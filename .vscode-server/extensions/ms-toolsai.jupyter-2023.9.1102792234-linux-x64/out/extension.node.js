/*! For license information please see extension.node.js.LICENSE.txt */
(()=>{var __webpack_modules__={78190:(e,t,n)=>{"use strict";void 0===Reflect.metadata&&n(28660)},68485:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseManager=void 0;const i=n(4016),r=n(4882);t.BaseManager=class{constructor(e){var t;this._isDisposed=!1,this._disposed=new i.Signal(this),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:r.ServerConnection.makeSettings()}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._disposed.emit(void 0),i.Signal.clearData(this))}}},83539:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuildManager=void 0;const i=n(79622),r=n(4882);t.BuildManager=class{constructor(e={}){var t;this._url="",this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:r.ServerConnection.makeSettings();const{baseUrl:n,appUrl:o}=this.serverSettings;this._url=i.URLExt.join(n,o,"api/build")}get isAvailable(){return"true"===i.PageConfig.getOption("buildAvailable").toLowerCase()}get shouldCheck(){return"true"===i.PageConfig.getOption("buildCheck").toLowerCase()}getStatus(){const{_url:e,serverSettings:t}=this;return r.ServerConnection.makeRequest(e,{},t).then((e=>{if(200!==e.status)throw new r.ServerConnection.ResponseError(e);return e.json()})).then((e=>{if("string"!=typeof e.status)throw new Error("Invalid data");if("string"!=typeof e.message)throw new Error("Invalid data");return e}))}build(){const{_url:e,serverSettings:t}=this;return r.ServerConnection.makeRequest(e,{method:"POST"},t).then((e=>{if(400===e.status)throw new r.ServerConnection.ResponseError(e,"Build aborted");if(200!==e.status){const t=`Build failed with ${e.status}, please run 'jupyter lab build' on the server for full output`;throw new r.ServerConnection.ResponseError(e,t)}}))}cancel(){const{_url:e,serverSettings:t}=this;return r.ServerConnection.makeRequest(e,{method:"DELETE"},t).then((e=>{if(204!==e.status)throw new r.ServerConnection.ResponseError(e)}))}}},76641:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigWithDefaults=t.ConfigSection=void 0;const i=n(79622),r=n(98250);(t.ConfigSection||(t.ConfigSection={})).create=function(e){const t=new o(e);return t.load().then((()=>t))};class o{constructor(e){var t;this._url="unknown";const n=this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:r.ServerConnection.makeSettings();this._url=i.URLExt.join(n.baseUrl,"api/config",encodeURIComponent(e.name))}get data(){return this._data}async load(){const e=await r.ServerConnection.makeRequest(this._url,{},this.serverSettings);if(200!==e.status)throw await r.ServerConnection.ResponseError.create(e);this._data=await e.json()}async update(e){this._data=Object.assign(Object.assign({},this._data),e);const t={method:"PATCH",body:JSON.stringify(e)},n=await r.ServerConnection.makeRequest(this._url,t,this.serverSettings);if(200!==n.status)throw await r.ServerConnection.ResponseError.create(n);return this._data=await n.json(),this._data}}t.ConfigWithDefaults=class{constructor(e){var t,n;this._className="",this._section=e.section,this._defaults=null!==(t=e.defaults)&&void 0!==t?t:{},this._className=null!==(n=e.className)&&void 0!==n?n:""}get(e){const t=this._classData();return e in t?t[e]:this._defaults[e]}set(e,t){const n={};if(n[e]=t,this._className){const e={};return e[this._className]=n,this._section.update(e)}return this._section.update(n)}_classData(){const e=this._section.data;return this._className&&this._className in e?e[this._className]:e}}},28873:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Drive=t.ContentsManager=t.Contents=void 0;const s=n(79622),a=n(35259),c=n(4016),l=n(98250),d=o(n(6963));var u,p;(p=t.Contents||(t.Contents={})).validateContentsModel=function(e){d.validateContentsModel(e)},p.validateCheckpointModel=function(e){d.validateCheckpointModel(e)},t.ContentsManager=class{constructor(e={}){var t,n;this._isDisposed=!1,this._additionalDrives=new Map,this._fileChanged=new c.Signal(this);const i=this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:l.ServerConnection.makeSettings();this._defaultDrive=null!==(n=e.defaultDrive)&&void 0!==n?n:new h({serverSettings:i}),this._defaultDrive.fileChanged.connect(this._onFileChanged,this)}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,c.Signal.clearData(this))}addDrive(e){this._additionalDrives.set(e.name,e),e.fileChanged.connect(this._onFileChanged,this)}getModelDBFactory(e){var t;const[n]=this._driveForPath(e);return null!==(t=null==n?void 0:n.modelDBFactory)&&void 0!==t?t:null}localPath(e){const t=e.split("/"),n=t[0].split(":");return 1!==n.length&&this._additionalDrives.has(n[0])?s.PathExt.join(n.slice(1).join(":"),...t.slice(1)):s.PathExt.removeSlash(e)}normalize(e){const t=e.split(":");return 1===t.length?s.PathExt.normalize(e):`${t[0]}:${s.PathExt.normalize(t.slice(1).join(":"))}`}resolvePath(e,t){const n=this.driveName(e),i=this.localPath(e),r=s.PathExt.resolve("/",i,t);return n?`${n}:${r}`:r}driveName(e){const t=e.split("/")[0].split(":");return 1===t.length?"":this._additionalDrives.has(t[0])?t[0]:""}get(e,t){const[n,i]=this._driveForPath(e);return n.get(i,t).then((e=>{const t=[];return"directory"===e.type&&e.content?(a.each(e.content,(e=>{t.push(Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,e.path)}))})),Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,i),content:t})):Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,i)})}))}getDownloadUrl(e){const[t,n]=this._driveForPath(e);return t.getDownloadUrl(n)}newUntitled(e={}){if(e.path){const t=this.normalize(e.path),[n,i]=this._driveForPath(t);return n.newUntitled(Object.assign(Object.assign({},e),{path:i})).then((e=>Object.assign(Object.assign({},e),{path:s.PathExt.join(t,e.name)})))}return this._defaultDrive.newUntitled(e)}delete(e){const[t,n]=this._driveForPath(e);return t.delete(n)}rename(e,t){const[n,i]=this._driveForPath(e),[r,o]=this._driveForPath(t);if(n!==r)throw Error("ContentsManager: renaming files must occur within a Drive");return n.rename(i,o).then((e=>Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,o)})))}save(e,t={}){const n=this.normalize(e),[i,r]=this._driveForPath(e);return i.save(r,Object.assign(Object.assign({},t),{path:r})).then((e=>Object.assign(Object.assign({},e),{path:n})))}copy(e,t){const[n,i]=this._driveForPath(e),[r,o]=this._driveForPath(t);if(n===r)return n.copy(i,o).then((e=>Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,e.path)})));throw Error("Copying files between drives is not currently implemented")}createCheckpoint(e){const[t,n]=this._driveForPath(e);return t.createCheckpoint(n)}listCheckpoints(e){const[t,n]=this._driveForPath(e);return t.listCheckpoints(n)}restoreCheckpoint(e,t){const[n,i]=this._driveForPath(e);return n.restoreCheckpoint(i,t)}deleteCheckpoint(e,t){const[n,i]=this._driveForPath(e);return n.deleteCheckpoint(i,t)}_toGlobalPath(e,t){return e===this._defaultDrive?s.PathExt.removeSlash(t):`${e.name}:${s.PathExt.removeSlash(t)}`}_driveForPath(e){const t=this.driveName(e),n=this.localPath(e);return t?[this._additionalDrives.get(t),n]:[this._defaultDrive,n]}_onFileChanged(e,t){var n,i;if(e===this._defaultDrive)this._fileChanged.emit(t);else{let r=null,o=null;(null===(n=t.newValue)||void 0===n?void 0:n.path)&&(r=Object.assign(Object.assign({},t.newValue),{path:this._toGlobalPath(e,t.newValue.path)})),(null===(i=t.oldValue)||void 0===i?void 0:i.path)&&(o=Object.assign(Object.assign({},t.oldValue),{path:this._toGlobalPath(e,t.oldValue.path)})),this._fileChanged.emit({type:t.type,newValue:r,oldValue:o})}}};class h{constructor(e={}){var t,n,i;this._isDisposed=!1,this._fileChanged=new c.Signal(this),this.name=null!==(t=e.name)&&void 0!==t?t:"Default",this._apiEndpoint=null!==(n=e.apiEndpoint)&&void 0!==n?n:"api/contents",this.serverSettings=null!==(i=e.serverSettings)&&void 0!==i?i:l.ServerConnection.makeSettings()}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,c.Signal.clearData(this))}async get(e,t){let n=this._getUrl(e);if(t){"notebook"===t.type&&delete t.format;const e=t.content?"1":"0",i=Object.assign(Object.assign({},t),{content:e});n+=s.URLExt.objectToQueryString(i)}const i=this.serverSettings,r=await l.ServerConnection.makeRequest(n,{},i);if(200!==r.status)throw await l.ServerConnection.ResponseError.create(r);const o=await r.json();return d.validateContentsModel(o),o}getDownloadUrl(e){const t=this.serverSettings.baseUrl;let n=s.URLExt.join(t,"files",s.URLExt.encodeParts(e));const i=document.cookie.match("\\b_xsrf=([^;]*)\\b");if(i){const e=new URL(n);e.searchParams.append("_xsrf",i[1]),n=e.toString()}return Promise.resolve(n)}async newUntitled(e={}){var t;let n="{}";e&&(e.ext&&(e.ext=u.normalizeExtension(e.ext)),n=JSON.stringify(e));const i=this.serverSettings,r=this._getUrl(null!==(t=e.path)&&void 0!==t?t:""),o={method:"POST",body:n},s=await l.ServerConnection.makeRequest(r,o,i);if(201!==s.status)throw await l.ServerConnection.ResponseError.create(s);const a=await s.json();return d.validateContentsModel(a),this._fileChanged.emit({type:"new",oldValue:null,newValue:a}),a}async delete(e){const t=this._getUrl(e),n=this.serverSettings,i=await l.ServerConnection.makeRequest(t,{method:"DELETE"},n);if(204!==i.status)throw await l.ServerConnection.ResponseError.create(i);this._fileChanged.emit({type:"delete",oldValue:{path:e},newValue:null})}async rename(e,t){const n=this.serverSettings,i=this._getUrl(e),r={method:"PATCH",body:JSON.stringify({path:t})},o=await l.ServerConnection.makeRequest(i,r,n);if(200!==o.status)throw await l.ServerConnection.ResponseError.create(o);const s=await o.json();return d.validateContentsModel(s),this._fileChanged.emit({type:"rename",oldValue:{path:e},newValue:s}),s}async save(e,t={}){const n=this.serverSettings,i=this._getUrl(e),r={method:"PUT",body:JSON.stringify(t)},o=await l.ServerConnection.makeRequest(i,r,n);if(200!==o.status&&201!==o.status)throw await l.ServerConnection.ResponseError.create(o);const s=await o.json();return d.validateContentsModel(s),this._fileChanged.emit({type:"save",oldValue:null,newValue:s}),s}async copy(e,t){const n=this.serverSettings,i=this._getUrl(t),r={method:"POST",body:JSON.stringify({copy_from:e})},o=await l.ServerConnection.makeRequest(i,r,n);if(201!==o.status)throw await l.ServerConnection.ResponseError.create(o);const s=await o.json();return d.validateContentsModel(s),this._fileChanged.emit({type:"new",oldValue:null,newValue:s}),s}async createCheckpoint(e){const t=this._getUrl(e,"checkpoints"),n=await l.ServerConnection.makeRequest(t,{method:"POST"},this.serverSettings);if(201!==n.status)throw await l.ServerConnection.ResponseError.create(n);const i=await n.json();return d.validateCheckpointModel(i),i}async listCheckpoints(e){const t=this._getUrl(e,"checkpoints"),n=await l.ServerConnection.makeRequest(t,{},this.serverSettings);if(200!==n.status)throw await l.ServerConnection.ResponseError.create(n);const i=await n.json();if(!Array.isArray(i))throw new Error("Invalid Checkpoint list");for(let e=0;e<i.length;e++)d.validateCheckpointModel(i[e]);return i}async restoreCheckpoint(e,t){const n=this._getUrl(e,"checkpoints",t),i=await l.ServerConnection.makeRequest(n,{method:"POST"},this.serverSettings);if(204!==i.status)throw await l.ServerConnection.ResponseError.create(i)}async deleteCheckpoint(e,t){const n=this._getUrl(e,"checkpoints",t),i=await l.ServerConnection.makeRequest(n,{method:"DELETE"},this.serverSettings);if(204!==i.status)throw await l.ServerConnection.ResponseError.create(i)}_getUrl(...e){const t=e.map((e=>s.URLExt.encodeParts(e))),n=this.serverSettings.baseUrl;return s.URLExt.join(n,this._apiEndpoint,...t)}}t.Drive=h,function(e){e.normalizeExtension=function(e){return e.length>0&&0!==e.indexOf(".")&&(e=`.${e}`),e}}(u||(u={}))},6963:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateCheckpointModel=t.validateContentsModel=void 0;const i=n(76801);t.validateContentsModel=function(e){i.validateProperty(e,"name","string"),i.validateProperty(e,"path","string"),i.validateProperty(e,"type","string"),i.validateProperty(e,"created","string"),i.validateProperty(e,"last_modified","string"),i.validateProperty(e,"mimetype","object"),i.validateProperty(e,"content","object"),i.validateProperty(e,"format","object")},t.validateCheckpointModel=function(e){i.validateProperty(e,"id","string"),i.validateProperty(e,"last_modified","string")}},98250:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(76641),t),r(n(28873),t),r(n(41968),t),r(n(62397),t),r(n(42076),t),r(n(4882),t),r(n(55682),t),r(n(29470),t),r(n(69139),t),r(n(9251),t),r(n(51553),t)},10115:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CommHandler=void 0;const s=n(70725),a=o(n(97980));class c extends s.DisposableDelegate{constructor(e,t,n,i){super(i),this._target="",this._id="",this._id=t,this._target=e,this._kernel=n}get commId(){return this._id}get targetName(){return this._target}get onClose(){return this._onClose}set onClose(e){this._onClose=e}get onMsg(){return this._onMsg}set onMsg(e){this._onMsg=e}open(e,t,n=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot open");const i=a.createMessage({msgType:"comm_open",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,target_name:this._target,data:null!=e?e:{}},metadata:t,buffers:n});return this._kernel.sendShellMessage(i,!1,!0)}send(e,t,n=[],i=!0){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot send");const r=a.createMessage({msgType:"comm_msg",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:e},metadata:t,buffers:n});return this._kernel.sendShellMessage(r,!1,i)}close(e,t,n=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot close");const i=a.createMessage({msgType:"comm_close",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:null!=e?e:{}},metadata:t,buffers:n}),r=this._kernel.sendShellMessage(i,!1,!0),o=this._onClose;return o&&o(a.createMessage({msgType:"comm_close",channel:"iopub",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:null!=e?e:{}},metadata:t,buffers:n})),this.dispose(),r}}t.CommHandler=c},45259:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnection=void 0;const s=n(79622),a=n(66201),c=n(4016),l=n(98250),d=n(10115),u=o(n(97980)),p=n(29083),h=o(n(642)),f=o(n(92532)),m=n(62397),g=o(n(47717)),v="_RESTARTING_";class y{constructor(e){var t,n,i,r;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");const e=this.serverSettings,t=s.URLExt.join(e.wsUrl,g.KERNEL_SERVICE_URL,encodeURIComponent(this._id));t.replace(/^((?:\w+:)?\/\/)(?:[^@\/]+@)/,"$1");let n=s.URLExt.join(t,"channels?session_id="+encodeURIComponent(this._clientId));const i=e.token;e.appendToken&&""!==i&&(n+=`&token=${encodeURIComponent(i)}`),this._ws=new e.WebSocket(n),this._ws.binaryType="arraybuffer",this._ws.onmessage=this._onWSMessage,this._ws.onopen=this._onWSOpen,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose},this._onWSOpen=e=>{this._updateConnectionStatus("connected")},this._onWSMessage=e=>{let t;try{t=h.deserialize(e.data),f.validateMessage(t)}catch(e){throw e.message=`Kernel message validation error: ${e.message}`,e}this._kernelSession=t.header.session,this._msgChain=this._msgChain.then((()=>this._handleMessage(t))).catch((e=>{e.message.startsWith("Canceled future for ")&&console.error(e)})),this._anyMessage.emit({msg:t,direction:"recv"})},this._onWSClose=e=>{this.isDisposed||this._reconnect()},this._id="",this._name="",this._status="unknown",this._connectionStatus="connecting",this._kernelSession="",this._isDisposed=!1,this._ws=null,this._username="",this._reconnectLimit=7,this._reconnectAttempt=0,this._reconnectTimeout=null,this._futures=new Map,this._comms=new Map,this._targetRegistry=Object.create(null),this._info=new a.PromiseDelegate,this._pendingMessages=[],this._statusChanged=new c.Signal(this),this._connectionStatusChanged=new c.Signal(this),this._disposed=new c.Signal(this),this._iopubMessage=new c.Signal(this),this._anyMessage=new c.Signal(this),this._unhandledMessage=new c.Signal(this),this._displayIdToParentIds=new Map,this._msgIdToDisplayIds=new Map,this._msgChain=Promise.resolve(),this._noOp=()=>{},this._name=e.model.name,this._id=e.model.id,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:l.ServerConnection.makeSettings(),this._clientId=null!==(n=e.clientId)&&void 0!==n?n:a.UUID.uuid4(),this._username=null!==(i=e.username)&&void 0!==i?i:"",this.handleComms=null===(r=e.handleComms)||void 0===r||r,this._createSocket()}get disposed(){return this._disposed}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get model(){return{id:this.id,name:this.name}}get anyMessage(){return this._anyMessage}get id(){return this._id}get name(){return this._name}get username(){return this._username}get clientId(){return this._clientId}get status(){return this._status}get connectionStatus(){return this._connectionStatus}get isDisposed(){return this._isDisposed}get info(){return this._info.promise}get spec(){return this._specPromise||(this._specPromise=m.KernelSpecAPI.getSpecs(this.serverSettings).then((e=>e.kernelspecs[this._name]))),this._specPromise}clone(e={}){return new y(Object.assign({model:this.model,username:this.username,serverSettings:this.serverSettings,handleComms:!1},e))}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearKernelState(),this._pendingMessages=[],this._clearSocket(),c.Signal.clearData(this))}sendShellMessage(e,t=!1,n=!0){return this._sendKernelShellControl(p.KernelShellFutureHandler,e,t,n)}sendControlMessage(e,t=!1,n=!0){return this._sendKernelShellControl(p.KernelControlFutureHandler,e,t,n)}_sendKernelShellControl(e,t,n=!1,i=!0){this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"});const r=new e((()=>{const e=t.header.msg_id;this._futures.delete(e);const n=this._msgIdToDisplayIds.get(e);n&&(n.forEach((t=>{const n=this._displayIdToParentIds.get(t);if(n){const i=n.indexOf(e);if(-1===i)return;1===n.length?this._displayIdToParentIds.delete(t):(n.splice(i,1),this._displayIdToParentIds.set(t,n))}})),this._msgIdToDisplayIds.delete(e))}),t,n,i,this);return this._futures.set(t.header.msg_id,r),r}_sendMessage(e,t=!0){if("dead"===this.status)throw new Error("Kernel is dead");if((""===this._kernelSession||this._kernelSession===v)&&u.isInfoRequestMsg(e)){if("connected"===this.connectionStatus)return void this._ws.send(h.serialize(e));throw new Error("Could not send message: status is not connected")}if(t&&this._pendingMessages.length>0)this._pendingMessages.push(e);else if("connected"===this.connectionStatus&&this._kernelSession!==v)this._ws.send(h.serialize(e));else{if(!t)throw new Error("Could not send message");this._pendingMessages.push(e)}}async interrupt(){if("dead"===this.status)throw new Error("Kernel is dead");return g.interruptKernel(this.id,this.serverSettings)}async restart(){if("dead"===this.status)throw new Error("Kernel is dead");this._updateStatus("restarting"),this._clearKernelState(),this._kernelSession=v,await g.restartKernel(this.id,this.serverSettings),await this.reconnect()}reconnect(){this._errorIfDisposed();const e=new a.PromiseDelegate,t=(n,i)=>{"connected"===i?(e.resolve(),this.connectionStatusChanged.disconnect(t,this)):"disconnected"===i&&(e.reject(new Error("Kernel connection disconnected")),this.connectionStatusChanged.disconnect(t,this))};return this.connectionStatusChanged.connect(t,this),this._reconnectAttempt=0,this._reconnect(),e.promise}async shutdown(){"dead"!==this.status&&await g.shutdownKernel(this.id,this.serverSettings),this.handleShutdown()}handleShutdown(){this._updateStatus("dead"),this.dispose()}async requestKernelInfo(){const e=u.createMessage({msgType:"kernel_info_request",channel:"shell",username:this._username,session:this._clientId,content:{}});let t;try{t=await b.handleShellMessage(this,e)}catch(e){if(this.isDisposed)return;throw e}if(this._errorIfDisposed(),t)return void 0===t.content.status&&(t.content.status="ok"),"ok"!==t.content.status?(this._info.reject("Kernel info reply errored"),t):(this._info.resolve(t.content),this._kernelSession=t.header.session,t)}requestComplete(e){const t=u.createMessage({msgType:"complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return b.handleShellMessage(this,t)}requestInspect(e){const t=u.createMessage({msgType:"inspect_request",channel:"shell",username:this._username,session:this._clientId,content:e});return b.handleShellMessage(this,t)}requestHistory(e){const t=u.createMessage({msgType:"history_request",channel:"shell",username:this._username,session:this._clientId,content:e});return b.handleShellMessage(this,t)}requestExecute(e,t=!0,n){const i=u.createMessage({msgType:"execute_request",channel:"shell",username:this._username,session:this._clientId,content:Object.assign(Object.assign({},{silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!1}),e),metadata:n});return this.sendShellMessage(i,!0,t)}requestDebug(e,t=!0){const n=u.createMessage({msgType:"debug_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(n,!0,t)}requestIsComplete(e){const t=u.createMessage({msgType:"is_complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return b.handleShellMessage(this,t)}requestCommInfo(e){const t=u.createMessage({msgType:"comm_info_request",channel:"shell",username:this._username,session:this._clientId,content:e});return b.handleShellMessage(this,t)}sendInputReply(e){const t=u.createMessage({msgType:"input_reply",channel:"stdin",username:this._username,session:this._clientId,content:e});this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"})}createComm(e,t=a.UUID.uuid4()){if(!this.handleComms)throw new Error("Comms are disabled on this kernel connection");if(this._comms.has(t))throw new Error("Comm is already created");const n=new d.CommHandler(e,t,this,(()=>{this._unregisterComm(t)}));return this._comms.set(t,n),n}hasComm(e){return this._comms.has(e)}registerCommTarget(e,t){this.handleComms&&(this._targetRegistry[e]=t)}removeCommTarget(e,t){this.handleComms&&(this.isDisposed||this._targetRegistry[e]!==t||delete this._targetRegistry[e])}registerMessageHook(e,t){var n;const i=null===(n=this._futures)||void 0===n?void 0:n.get(e);i&&i.registerMessageHook(t)}removeMessageHook(e,t){var n;const i=null===(n=this._futures)||void 0===n?void 0:n.get(e);i&&i.removeMessageHook(t)}async _handleDisplayId(e,t){var n,i;const r=t.parent_header.msg_id;let o=this._displayIdToParentIds.get(e);if(o){const e={header:a.JSONExt.deepCopy(t.header),parent_header:a.JSONExt.deepCopy(t.parent_header),metadata:a.JSONExt.deepCopy(t.metadata),content:a.JSONExt.deepCopy(t.content),channel:t.channel,buffers:t.buffers?t.buffers.slice():[]};e.header.msg_type="update_display_data",await Promise.all(o.map((async t=>{const n=this._futures&&this._futures.get(t);n&&await n.handleMsg(e)})))}if("update_display_data"===t.header.msg_type)return!0;o=null!==(n=this._displayIdToParentIds.get(e))&&void 0!==n?n:[],-1===o.indexOf(r)&&o.push(r),this._displayIdToParentIds.set(e,o);const s=null!==(i=this._msgIdToDisplayIds.get(r))&&void 0!==i?i:[];return-1===s.indexOf(r)&&s.push(r),this._msgIdToDisplayIds.set(r,s),!1}_clearSocket(){null!==this._ws&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}_updateStatus(e){this._status!==e&&"dead"!==this._status&&(this._status=e,b.logKernelStatus(this),this._statusChanged.emit(e),"dead"===e&&this.dispose())}_sendPending(){for(;"connected"===this.connectionStatus&&this._kernelSession!==v&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}_clearKernelState(){this._kernelSession="",this._pendingMessages=[],this._futures.forEach((e=>{e.dispose()})),this._comms.forEach((e=>{e.dispose()})),this._msgChain=Promise.resolve(),this._futures=new Map,this._comms=new Map,this._displayIdToParentIds.clear(),this._msgIdToDisplayIds.clear()}_assertCurrentMessage(e){if(this._errorIfDisposed(),e.header.session!==this._kernelSession)throw new Error(`Canceling handling of old message: ${e.header.msg_type}`)}async _handleCommOpen(e){this._assertCurrentMessage(e);const t=e.content,n=new d.CommHandler(t.target_name,t.comm_id,this,(()=>{this._unregisterComm(t.comm_id)}));this._comms.set(t.comm_id,n);try{const i=await b.loadObject(t.target_name,t.target_module,this._targetRegistry);await i(n,e)}catch(e){throw n.close(),console.error("Exception opening new comm"),e}}async _handleCommClose(e){this._assertCurrentMessage(e);const t=e.content,n=this._comms.get(t.comm_id);if(!n)return void console.error("Comm not found for comm id "+t.comm_id);this._unregisterComm(n.commId);const i=n.onClose;i&&await i(e),n.dispose()}async _handleCommMsg(e){this._assertCurrentMessage(e);const t=e.content,n=this._comms.get(t.comm_id);if(!n)return;const i=n.onMsg;i&&await i(e)}_unregisterComm(e){this._comms.delete(e)}_updateConnectionStatus(e){if(this._connectionStatus!==e){if(this._connectionStatus=e,"connecting"!==e&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),"dead"!==this.status)if("connected"===e){let e=this._kernelSession===v,t=this.requestKernelInfo(),n=!1,i=()=>{n||(n=!0,e&&this._kernelSession===v&&(this._kernelSession=""),clearTimeout(r),this._pendingMessages.length>0&&this._sendPending())};t.then(i);let r=setTimeout(i,3e3)}else this._updateStatus("unknown");this._connectionStatusChanged.emit(e)}}async _handleMessage(e){var t,n;let i=!1;if(e.parent_header&&"iopub"===e.channel&&(u.isDisplayDataMsg(e)||u.isUpdateDisplayDataMsg(e)||u.isExecuteResultMsg(e))){const n=(null!==(t=e.content.transient)&&void 0!==t?t:{}).display_id;n&&(i=await this._handleDisplayId(n,e),this._assertCurrentMessage(e))}if(!i&&e.parent_header){const t=e.parent_header,i=null===(n=this._futures)||void 0===n?void 0:n.get(t.msg_id);if(i)await i.handleMsg(e),this._assertCurrentMessage(e);else{const n=t.session===this.clientId;"iopub"!==e.channel&&n&&this._unhandledMessage.emit(e)}}if("iopub"===e.channel){switch(e.header.msg_type){case"status":{const t=e.content.execution_state;"restarting"===t&&Promise.resolve().then((async()=>{this._updateStatus("autorestarting"),this._clearKernelState(),await this.reconnect()})),this._updateStatus(t);break}case"comm_open":this.handleComms&&await this._handleCommOpen(e);break;case"comm_msg":this.handleComms&&await this._handleCommMsg(e);break;case"comm_close":this.handleComms&&await this._handleCommClose(e)}this.isDisposed||(this._assertCurrentMessage(e),this._iopubMessage.emit(e))}}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");const e=b.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.warn(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_errorIfDisposed(){if(this.isDisposed)throw new Error("Kernel connection is disposed")}}var b;t.KernelConnection=y,function(e){e.logKernelStatus=function(e){switch(e.status){case"idle":case"busy":case"unknown":return;default:console.debug(`Kernel: ${e.status} (${e.id})`)}},e.handleShellMessage=async function(e,t){return e.sendShellMessage(t,!0).done},e.loadObject=function(e,t,n){return new Promise(((i,r)=>{if(t){if("undefined"==typeof requirejs)throw new Error("requirejs not found");requirejs([t],(n=>{void 0===n[e]?r(new Error(`Object '${e}' not found in module '${t}'`)):i(n[e])}),r)}else(null==n?void 0:n[e])?i(n[e]):r(new Error(`Object '${e}' not found in registry`))}))},e.getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}}(b||(b={}))},29083:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelShellFutureHandler=t.KernelControlFutureHandler=t.KernelFutureHandler=void 0;const s=n(66201),a=n(70725),c=o(n(97980));class l extends a.DisposableDelegate{constructor(e,t,n,i,r){super(e),this._status=0,this._stdin=d.noOp,this._iopub=d.noOp,this._reply=d.noOp,this._done=new s.PromiseDelegate,this._hooks=new d.HookList,this._disposeOnDone=!0,this._msg=t,n||this._setFlag(d.KernelFutureFlag.GotReply),this._disposeOnDone=i,this._kernel=r}get msg(){return this._msg}get done(){return this._done.promise}get onReply(){return this._reply}set onReply(e){this._reply=e}get onIOPub(){return this._iopub}set onIOPub(e){this._iopub=e}get onStdin(){return this._stdin}set onStdin(e){this._stdin=e}registerMessageHook(e){if(this.isDisposed)throw new Error("Kernel future is disposed");this._hooks.add(e)}removeMessageHook(e){this.isDisposed||this._hooks.remove(e)}sendInputReply(e){this._kernel.sendInputReply(e)}dispose(){this._stdin=d.noOp,this._iopub=d.noOp,this._reply=d.noOp,this._hooks=null,this._testFlag(d.KernelFutureFlag.IsDone)||(this._done.promise.catch((()=>{})),this._done.reject(new Error(`Canceled future for ${this.msg.header.msg_type} message before replies were done`))),super.dispose()}async handleMsg(e){switch(e.channel){case"control":case"shell":e.channel===this.msg.channel&&e.parent_header.msg_id===this.msg.header.msg_id&&await this._handleReply(e);break;case"stdin":await this._handleStdin(e);break;case"iopub":await this._handleIOPub(e)}}async _handleReply(e){const t=this._reply;t&&await t(e),this._replyMsg=e,this._setFlag(d.KernelFutureFlag.GotReply),this._testFlag(d.KernelFutureFlag.GotIdle)&&this._handleDone()}async _handleStdin(e){const t=this._stdin;t&&await t(e)}async _handleIOPub(e){const t=await this._hooks.process(e),n=this._iopub;t&&n&&await n(e),c.isStatusMsg(e)&&"idle"===e.content.execution_state&&(this._setFlag(d.KernelFutureFlag.GotIdle),this._testFlag(d.KernelFutureFlag.GotReply)&&this._handleDone())}_handleDone(){this._testFlag(d.KernelFutureFlag.IsDone)||(this._setFlag(d.KernelFutureFlag.IsDone),this._done.resolve(this._replyMsg),this._disposeOnDone&&this.dispose())}_testFlag(e){return 0!=(this._status&e)}_setFlag(e){this._status|=e}}var d;t.KernelFutureHandler=l,t.KernelControlFutureHandler=class extends l{},t.KernelShellFutureHandler=class extends l{},function(e){e.noOp=()=>{};const t="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate;let n;e.HookList=class{constructor(){this._hooks=[]}add(e){this.remove(e),this._hooks.push(e)}remove(e){const t=this._hooks.indexOf(e);t>=0&&(this._hooks[t]=null,this._scheduleCompact())}async process(e){await this._processing;const t=new s.PromiseDelegate;let n;this._processing=t.promise;for(let i=this._hooks.length-1;i>=0;i--){const r=this._hooks[i];if(null!==r){try{n=await r(e)}catch(e){n=!0,console.error(e)}if(!1===n)return t.resolve(void 0),!1}}return t.resolve(void 0),!0}_scheduleCompact(){this._compactScheduled||(this._compactScheduled=!0,t((()=>{this._processing=this._processing.then((()=>{this._compactScheduled=!1,this._compact()}))})))}_compact(){let e=0;for(let t=0,n=this._hooks.length;t<n;t++){const n=this._hooks[t];null===this._hooks[t]?e++:this._hooks[t-e]=n}this._hooks.length-=e}},function(e){e[e.GotReply=1]="GotReply",e[e.GotIdle=2]="GotIdle",e[e.IsDone=4]="IsDone",e[e.DisposeOnDone=8]="DisposeOnDone"}(n=e.KernelFutureFlag||(e.KernelFutureFlag={}))}(d||(d={}))},41968:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelAPI=t.KernelMessage=t.Kernel=void 0;const a=o(n(77328));t.Kernel=a;const c=o(n(97980));t.KernelMessage=c;const l=o(n(47717));t.KernelAPI=l,s(n(58616),t)},77328:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},58616:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelManager=void 0;const i=n(35259),r=n(23114),o=n(4016),s=n(98250),a=n(68485),c=n(47717),l=n(45259);class d extends a.BaseManager{constructor(e={}){var t;super(e),this._isReady=!1,this._kernelConnections=new Set,this._models=new Map,this._runningChanged=new o.Signal(this),this._connectionFailure=new o.Signal(this),this._pollModels=new r.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:KernelManager#models",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._kernelConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}connectTo(e){var t;const{id:n}=e.model;let i=null===(t=e.handleComms)||void 0===t||t;if(void 0===e.handleComms)for(const e of this._kernelConnections)if(e.id===n&&e.handleComms){i=!1;break}const r=new l.KernelConnection(Object.assign(Object.assign({handleComms:i},e),{serverSettings:this.serverSettings}));return this._onStarted(r),this._models.has(n)||this.refreshRunning().catch((()=>{})),r}running(){return i.iter([...this._models.values()])}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e={},t={}){const n=await c.startNew(e,this.serverSettings);return this.connectTo(Object.assign(Object.assign({},t),{model:n}))}async shutdown(e){await c.shutdownKernel(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map((e=>c.shutdownKernel(e,this.serverSettings)))),await this.refreshRunning()}async findById(e){return this._models.has(e)||await this.refreshRunning(),this._models.get(e)}async requestRunning(){var e,t;let n;try{n=await c.listRunning(this.serverSettings)}catch(n){throw(n instanceof s.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}this.isDisposed||this._models.size===n.length&&i.every(n,(e=>{const t=this._models.get(e.id);return!!t&&t.name===e.name}))||(this._models=new Map(n.map((e=>[e.id,e]))),this._kernelConnections.forEach((e=>{this._models.has(e.id)||e.handleShutdown()})),this._runningChanged.emit(n))}_onStarted(e){this._kernelConnections.add(e),e.statusChanged.connect(this._onStatusChanged,this),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._kernelConnections.delete(e),this.refreshRunning().catch((()=>{}))}_onStatusChanged(e,t){"dead"===t&&this.refreshRunning().catch((()=>{}))}}t.KernelManager=d},97980:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInputReplyMsg=t.isInputRequestMsg=t.isDebugReplyMsg=t.isDebugRequestMsg=t.isExecuteReplyMsg=t.isInfoRequestMsg=t.isCommMsgMsg=t.isCommCloseMsg=t.isCommOpenMsg=t.isDebugEventMsg=t.isClearOutputMsg=t.isStatusMsg=t.isErrorMsg=t.isExecuteResultMsg=t.isExecuteInputMsg=t.isUpdateDisplayDataMsg=t.isDisplayDataMsg=t.isStreamMsg=t.createMessage=void 0;const i=n(66201);t.createMessage=function(e){var t,n,r,o,s;return{buffers:null!==(t=e.buffers)&&void 0!==t?t:[],channel:e.channel,content:e.content,header:{date:(new Date).toISOString(),msg_id:null!==(n=e.msgId)&&void 0!==n?n:i.UUID.uuid4(),msg_type:e.msgType,session:e.session,username:null!==(r=e.username)&&void 0!==r?r:"",version:"5.2"},metadata:null!==(o=e.metadata)&&void 0!==o?o:{},parent_header:null!==(s=e.parentHeader)&&void 0!==s?s:{}}},t.isStreamMsg=function(e){return"stream"===e.header.msg_type},t.isDisplayDataMsg=function(e){return"display_data"===e.header.msg_type},t.isUpdateDisplayDataMsg=function(e){return"update_display_data"===e.header.msg_type},t.isExecuteInputMsg=function(e){return"execute_input"===e.header.msg_type},t.isExecuteResultMsg=function(e){return"execute_result"===e.header.msg_type},t.isErrorMsg=function(e){return"error"===e.header.msg_type},t.isStatusMsg=function(e){return"status"===e.header.msg_type},t.isClearOutputMsg=function(e){return"clear_output"===e.header.msg_type},t.isDebugEventMsg=function(e){return"debug_event"===e.header.msg_type},t.isCommOpenMsg=function(e){return"comm_open"===e.header.msg_type},t.isCommCloseMsg=function(e){return"comm_close"===e.header.msg_type},t.isCommMsgMsg=function(e){return"comm_msg"===e.header.msg_type},t.isInfoRequestMsg=function(e){return"kernel_info_request"===e.header.msg_type},t.isExecuteReplyMsg=function(e){return"execute_reply"===e.header.msg_type},t.isDebugRequestMsg=function(e){return"debug_request"===e.header.msg_type},t.isDebugReplyMsg=function(e){return"debug_reply"===e.header.msg_type},t.isInputRequestMsg=function(e){return"input_request"===e.header.msg_type},t.isInputReplyMsg=function(e){return"input_reply"===e.header.msg_type}},60153:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnection=void 0;const s=n(79622),a=n(66201),c=n(4016),l=n(98250),d=n(10115),u=o(n(97980)),p=n(29083),h=o(n(92532)),f=n(62397),m=o(n(47717)),g="_RESTARTING_";class v{constructor(e){var t,n,i,r;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");const e=this.serverSettings,t=s.URLExt.join(e.wsUrl,m.KERNEL_SERVICE_URL,encodeURIComponent(this._id)),n=t.replace(/^((?:\w+:)?\/\/)(?:[^@\/]+@)/,"$1");console.debug(`Starting WebSocket: ${n}`);let i=s.URLExt.join(t,"channels?session_id="+encodeURIComponent(this._clientId));const r=e.token;e.appendToken&&""!==r&&(i+=`&token=${encodeURIComponent(r)}`),this._ws=new e.WebSocket(i),this._ws.binaryType="arraybuffer",this._ws.onmessage=this._onWSMessage,this._ws.onopen=this._onWSOpen,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose},this._onWSOpen=e=>{this._updateConnectionStatus("connected")},this._onWSMessage=e=>{let t;try{t=e.data,h.validateMessage(t)}catch(e){throw e.message=`Kernel message validation error: ${e.message}`,e}this._kernelSession=t.header.session,this._msgChain=this._msgChain.then((()=>this._handleMessage(t))).catch((e=>{e.message.startsWith("Canceled future for ")&&console.error(e)})),this._anyMessage.emit({msg:t,direction:"recv"})},this._onWSClose=e=>{this.isDisposed||this._reconnect()},this._id="",this._name="",this._status="unknown",this._connectionStatus="connecting",this._kernelSession="",this._isDisposed=!1,this._ws=null,this._username="",this._reconnectLimit=7,this._reconnectAttempt=0,this._reconnectTimeout=null,this._futures=new Map,this._comms=new Map,this._targetRegistry=Object.create(null),this._info=new a.PromiseDelegate,this._pendingMessages=[],this._statusChanged=new c.Signal(this),this._connectionStatusChanged=new c.Signal(this),this._disposed=new c.Signal(this),this._iopubMessage=new c.Signal(this),this._anyMessage=new c.Signal(this),this._unhandledMessage=new c.Signal(this),this._displayIdToParentIds=new Map,this._msgIdToDisplayIds=new Map,this._msgChain=Promise.resolve(),this._noOp=()=>{},this._name=e.model.name,this._id=e.model.id,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:l.ServerConnection.makeSettings(),this._clientId=null!==(n=e.clientId)&&void 0!==n?n:a.UUID.uuid4(),this._username=null!==(i=e.username)&&void 0!==i?i:"",this.handleComms=null===(r=e.handleComms)||void 0===r||r,this._createSocket()}get disposed(){return this._disposed}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get model(){return{id:this.id,name:this.name}}get anyMessage(){return this._anyMessage}get id(){return this._id}get name(){return this._name}get username(){return this._username}get clientId(){return this._clientId}get status(){return this._status}get connectionStatus(){return this._connectionStatus}get isDisposed(){return this._isDisposed}get info(){return this._info.promise}get spec(){return this._specPromise||(this._specPromise=f.KernelSpecAPI.getSpecs(this.serverSettings).then((e=>e.kernelspecs[this._name]))),this._specPromise}clone(e={}){return new v(Object.assign({model:this.model,username:this.username,serverSettings:this.serverSettings,handleComms:!1},e))}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearKernelState(),this._pendingMessages=[],this._clearSocket(),c.Signal.clearData(this))}sendShellMessage(e,t=!1,n=!0){return this._sendKernelShellControl(p.KernelShellFutureHandler,e,t,n)}sendControlMessage(e,t=!1,n=!0){return this._sendKernelShellControl(p.KernelControlFutureHandler,e,t,n)}_sendKernelShellControl(e,t,n=!1,i=!0){this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"});const r=new e((()=>{const e=t.header.msg_id;this._futures.delete(e);const n=this._msgIdToDisplayIds.get(e);n&&(n.forEach((t=>{const n=this._displayIdToParentIds.get(t);if(n){const i=n.indexOf(e);if(-1===i)return;1===n.length?this._displayIdToParentIds.delete(t):(n.splice(i,1),this._displayIdToParentIds.set(t,n))}})),this._msgIdToDisplayIds.delete(e))}),t,n,i,this);return this._futures.set(t.header.msg_id,r),r}_sendMessage(e,t=!0){if("dead"===this.status)throw new Error("Kernel is dead");if((""===this._kernelSession||this._kernelSession===g)&&u.isInfoRequestMsg(e)){if("connected"===this.connectionStatus)return void this._ws.send(e);throw new Error("Could not send message: status is not connected")}if(t&&this._pendingMessages.length>0)this._pendingMessages.push(e);else if("connected"===this.connectionStatus&&this._kernelSession!==g)this._ws.send(e);else{if(!t)throw new Error("Could not send message");this._pendingMessages.push(e)}}async interrupt(){if("dead"===this.status)throw new Error("Kernel is dead");return m.interruptKernel(this.id,this.serverSettings)}async restart(){if("dead"===this.status)throw new Error("Kernel is dead");this._updateStatus("restarting"),this._clearKernelState(),this._kernelSession=g,await m.restartKernel(this.id,this.serverSettings),await this.reconnect()}reconnect(){this._errorIfDisposed();const e=new a.PromiseDelegate,t=(n,i)=>{"connected"===i?(e.resolve(),this.connectionStatusChanged.disconnect(t,this)):"disconnected"===i&&(e.reject(new Error("Kernel connection disconnected")),this.connectionStatusChanged.disconnect(t,this))};return this.connectionStatusChanged.connect(t,this),this._reconnectAttempt=0,this._reconnect(),e.promise}async shutdown(){"dead"!==this.status&&await m.shutdownKernel(this.id,this.serverSettings),this.handleShutdown()}handleShutdown(){this._updateStatus("dead"),this.dispose()}async requestKernelInfo(){const e=u.createMessage({msgType:"kernel_info_request",channel:"shell",username:this._username,session:this._clientId,content:{}});let t;try{t=await y.handleShellMessage(this,e)}catch(e){if(this.isDisposed)return;throw e}if(this._errorIfDisposed(),t)return void 0===t.content.status&&(t.content.status="ok"),"ok"!==t.content.status?(this._info.reject("Kernel info reply errored"),t):(this._info.resolve(t.content),this._kernelSession=t.header.session,t)}requestComplete(e){const t=u.createMessage({msgType:"complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return y.handleShellMessage(this,t)}requestInspect(e){const t=u.createMessage({msgType:"inspect_request",channel:"shell",username:this._username,session:this._clientId,content:e});return y.handleShellMessage(this,t)}requestHistory(e){const t=u.createMessage({msgType:"history_request",channel:"shell",username:this._username,session:this._clientId,content:e});return y.handleShellMessage(this,t)}requestExecute(e,t=!0,n){const i=u.createMessage({msgType:"execute_request",channel:"shell",username:this._username,session:this._clientId,content:Object.assign(Object.assign({},{silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!1}),e),metadata:n});return this.sendShellMessage(i,!0,t)}requestDebug(e,t=!0){const n=u.createMessage({msgType:"debug_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(n,!0,t)}requestIsComplete(e){const t=u.createMessage({msgType:"is_complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return y.handleShellMessage(this,t)}requestCommInfo(e){const t=u.createMessage({msgType:"comm_info_request",channel:"shell",username:this._username,session:this._clientId,content:e});return y.handleShellMessage(this,t)}sendInputReply(e){const t=u.createMessage({msgType:"input_reply",channel:"stdin",username:this._username,session:this._clientId,content:e});this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"})}createComm(e,t=a.UUID.uuid4()){if(!this.handleComms)throw new Error("Comms are disabled on this kernel connection");if(this._comms.has(t))throw new Error("Comm is already created");const n=new d.CommHandler(e,t,this,(()=>{this._unregisterComm(t)}));return this._comms.set(t,n),n}hasComm(e){return this._comms.has(e)}registerCommTarget(e,t){this.handleComms&&(this._targetRegistry[e]=t)}removeCommTarget(e,t){this.handleComms&&(this.isDisposed||this._targetRegistry[e]!==t||delete this._targetRegistry[e])}registerMessageHook(e,t){var n;const i=null===(n=this._futures)||void 0===n?void 0:n.get(e);i&&i.registerMessageHook(t)}removeMessageHook(e,t){var n;const i=null===(n=this._futures)||void 0===n?void 0:n.get(e);i&&i.removeMessageHook(t)}async _handleDisplayId(e,t){var n,i;const r=t.parent_header.msg_id;let o=this._displayIdToParentIds.get(e);if(o){const e={header:a.JSONExt.deepCopy(t.header),parent_header:a.JSONExt.deepCopy(t.parent_header),metadata:a.JSONExt.deepCopy(t.metadata),content:a.JSONExt.deepCopy(t.content),channel:t.channel,buffers:t.buffers?t.buffers.slice():[]};e.header.msg_type="update_display_data",await Promise.all(o.map((async t=>{const n=this._futures&&this._futures.get(t);n&&await n.handleMsg(e)})))}if("update_display_data"===t.header.msg_type)return!0;o=null!==(n=this._displayIdToParentIds.get(e))&&void 0!==n?n:[],-1===o.indexOf(r)&&o.push(r),this._displayIdToParentIds.set(e,o);const s=null!==(i=this._msgIdToDisplayIds.get(r))&&void 0!==i?i:[];return-1===s.indexOf(r)&&s.push(r),this._msgIdToDisplayIds.set(r,s),!1}_clearSocket(){null!==this._ws&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}_updateStatus(e){this._status!==e&&"dead"!==this._status&&(this._status=e,y.logKernelStatus(this),this._statusChanged.emit(e),"dead"===e&&this.dispose())}_sendPending(){for(;"connected"===this.connectionStatus&&this._kernelSession!==g&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}_clearKernelState(){this._kernelSession="",this._pendingMessages=[],this._futures.forEach((e=>{e.dispose()})),this._comms.forEach((e=>{e.dispose()})),this._msgChain=Promise.resolve(),this._futures=new Map,this._comms=new Map,this._displayIdToParentIds.clear(),this._msgIdToDisplayIds.clear()}_assertCurrentMessage(e){if(this._errorIfDisposed(),e.header.session!==this._kernelSession)throw new Error(`Canceling handling of old message: ${e.header.msg_type}`)}async _handleCommOpen(e){this._assertCurrentMessage(e);const t=e.content,n=new d.CommHandler(t.target_name,t.comm_id,this,(()=>{this._unregisterComm(t.comm_id)}));this._comms.set(t.comm_id,n);try{const i=await y.loadObject(t.target_name,t.target_module,this._targetRegistry);await i(n,e)}catch(e){throw n.close(),console.error("Exception opening new comm"),e}}async _handleCommClose(e){this._assertCurrentMessage(e);const t=e.content,n=this._comms.get(t.comm_id);if(!n)return void console.error("Comm not found for comm id "+t.comm_id);this._unregisterComm(n.commId);const i=n.onClose;i&&await i(e),n.dispose()}async _handleCommMsg(e){this._assertCurrentMessage(e);const t=e.content,n=this._comms.get(t.comm_id);if(!n)return;const i=n.onMsg;i&&await i(e)}_unregisterComm(e){this._comms.delete(e)}_updateConnectionStatus(e){if(this._connectionStatus!==e){if(this._connectionStatus=e,"connecting"!==e&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),"dead"!==this.status)if("connected"===e){let e=this._kernelSession===g,t=this.requestKernelInfo(),n=!1,i=()=>{n||(n=!0,e&&this._kernelSession===g&&(this._kernelSession=""),clearTimeout(r),this._pendingMessages.length>0&&this._sendPending())};t.then(i);let r=setTimeout(i,3e3)}else this._updateStatus("unknown");this._connectionStatusChanged.emit(e)}}async _handleMessage(e){var t,n;let i=!1;if(e.parent_header&&"iopub"===e.channel&&(u.isDisplayDataMsg(e)||u.isUpdateDisplayDataMsg(e)||u.isExecuteResultMsg(e))){const n=(null!==(t=e.content.transient)&&void 0!==t?t:{}).display_id;n&&(i=await this._handleDisplayId(n,e),this._assertCurrentMessage(e))}if(!i&&e.parent_header){const t=e.parent_header,i=null===(n=this._futures)||void 0===n?void 0:n.get(t.msg_id);if(i)await i.handleMsg(e),this._assertCurrentMessage(e);else{const n=t.session===this.clientId;"iopub"!==e.channel&&n&&this._unhandledMessage.emit(e)}}if("iopub"===e.channel){switch(e.header.msg_type){case"status":{const t=e.content.execution_state;"restarting"===t&&Promise.resolve().then((async()=>{this._updateStatus("autorestarting"),this._clearKernelState(),await this.reconnect()})),this._updateStatus(t);break}case"comm_open":this.handleComms&&await this._handleCommOpen(e);break;case"comm_msg":this.handleComms&&await this._handleCommMsg(e);break;case"comm_close":this.handleComms&&await this._handleCommClose(e)}this.isDisposed||(this._assertCurrentMessage(e),this._iopubMessage.emit(e))}}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");const e=y.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.warn(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_errorIfDisposed(){if(this.isDisposed)throw new Error("Kernel connection is disposed")}}var y;t.KernelConnection=v,function(e){e.logKernelStatus=function(e){switch(e.status){case"idle":case"busy":case"unknown":return;default:console.debug(`Kernel: ${e.status} (${e.id})`)}},e.handleShellMessage=async function(e,t){return e.sendShellMessage(t,!0).done},e.loadObject=function(e,t,n){return new Promise(((i,r)=>{if(t){if("undefined"==typeof requirejs)throw new Error("requirejs not found");requirejs([t],(n=>{void 0===n[e]?r(new Error(`Object '${e}' not found in module '${t}'`)):i(n[e])}),r)}else(null==n?void 0:n[e])?i(n[e]):r(new Error(`Object '${e}' not found in registry`))}))},e.getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}}(y||(y={}))},47717:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKernelModel=t.shutdownKernel=t.interruptKernel=t.restartKernel=t.startNew=t.listRunning=t.KERNEL_SERVICE_URL=void 0;const i=n(4882),r=n(79622),o=n(92532);t.KERNEL_SERVICE_URL="api/kernels",t.listRunning=async function(e=i.ServerConnection.makeSettings()){const n=r.URLExt.join(e.baseUrl,t.KERNEL_SERVICE_URL),s=await i.ServerConnection.makeRequest(n,{},e);if(200!==s.status)throw await i.ServerConnection.ResponseError.create(s);const a=await s.json();return o.validateModels(a),a},t.startNew=async function(e={},n=i.ServerConnection.makeSettings()){const s=r.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL),a={method:"POST",body:JSON.stringify(e)},c=await i.ServerConnection.makeRequest(s,a,n);if(201!==c.status)throw await i.ServerConnection.ResponseError.create(c);const l=await c.json();return o.validateModel(l),l},t.restartKernel=async function(e,n=i.ServerConnection.makeSettings()){const s=r.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e),"restart"),a=await i.ServerConnection.makeRequest(s,{method:"POST"},n);if(200!==a.status)throw await i.ServerConnection.ResponseError.create(a);const c=await a.json();o.validateModel(c)},t.interruptKernel=async function(e,n=i.ServerConnection.makeSettings()){const o=r.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e),"interrupt"),s=await i.ServerConnection.makeRequest(o,{method:"POST"},n);if(204!==s.status)throw await i.ServerConnection.ResponseError.create(s)},t.shutdownKernel=async function(e,n=i.ServerConnection.makeSettings()){const o=r.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e)),s=await i.ServerConnection.makeRequest(o,{method:"DELETE"},n);if(404===s.status){const t=`The kernel "${e}" does not exist on the server`;console.warn(t)}else if(204!==s.status)throw await i.ServerConnection.ResponseError.create(s)},t.getKernelModel=async function(e,n=i.ServerConnection.makeSettings()){const s=r.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e)),a=await i.ServerConnection.makeRequest(s,{},n);if(404===a.status)return;if(200!==a.status)throw await i.ServerConnection.ResponseError.create(a);const c=await a.json();return o.validateModel(c),c}},642:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=t.deserialize=void 0,t.deserialize=function(e){let t;return t="string"==typeof e?JSON.parse(e):function(e){const t=new DataView(e),n=t.getUint32(0),i=[];if(n<2)throw new Error("Invalid incoming Kernel Message");for(let e=1;e<=n;e++)i.push(t.getUint32(4*e));const r=new Uint8Array(e.slice(i[0],i[1])),o=JSON.parse(new TextDecoder("utf8").decode(r));o.buffers=[];for(let t=1;t<n;t++){const n=i[t],r=i[t+1]||e.byteLength;o.buffers.push(new DataView(e.slice(n,r)))}return o}(e),t},t.serialize=function(e){var t;let n;return n=(null===(t=e.buffers)||void 0===t?void 0:t.length)?function(e){const t=[],n=[],i=new TextEncoder;let r=[];void 0!==e.buffers&&(r=e.buffers,delete e.buffers);const o=i.encode(JSON.stringify(e));n.push(o.buffer);for(let e=0;e<r.length;e++){const t=r[e];n.push(ArrayBuffer.isView(t)?t.buffer:t)}const s=n.length;t.push(4*(s+1));for(let e=0;e+1<n.length;e++)t.push(t[t.length-1]+n[e].byteLength);const a=new Uint8Array(t[t.length-1]+n[n.length-1].byteLength),c=new DataView(a.buffer);c.setUint32(0,s);for(let e=0;e<t.length;e++)c.setUint32(4*(e+1),t[e]);for(let e=0;e<n.length;e++)a.set(new Uint8Array(n[e]),t[e]);return a.buffer}(e):JSON.stringify(e),n}},92532:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateModels=t.validateModel=t.validateMessage=void 0;const i=n(76801),r=["username","version","session","msg_id","msg_type"],o={stream:{name:"string",text:"string"},display_data:{data:"object",metadata:"object"},execute_input:{code:"string",execution_count:"number"},execute_result:{execution_count:"number",data:"object",metadata:"object"},error:{ename:"string",evalue:"string",traceback:"object"},status:{execution_state:["string",["starting","idle","busy","restarting","dead"]]},clear_output:{wait:"boolean"},comm_open:{comm_id:"string",target_name:"string",data:"object"},comm_msg:{comm_id:"string",data:"object"},comm_close:{comm_id:"string"},shutdown_reply:{restart:"boolean"}};function s(e){i.validateProperty(e,"name","string"),i.validateProperty(e,"id","string")}t.validateMessage=function(e){i.validateProperty(e,"metadata","object"),i.validateProperty(e,"content","object"),i.validateProperty(e,"channel","string"),function(e){for(let t=0;t<r.length;t++)i.validateProperty(e,r[t],"string")}(e.header),"iopub"===e.channel&&function(e){if("iopub"===e.channel){const t=o[e.header.msg_type];if(void 0===t)return;const n=Object.keys(t),r=e.content;for(let e=0;e<n.length;e++){let o=t[n[e]];Array.isArray(o)||(o=[o]),i.validateProperty(r,n[e],...o)}}}(e)},t.validateModel=s,t.validateModels=function(e){if(!Array.isArray(e))throw new Error("Invalid kernel list");e.forEach((e=>s(e)))}},62397:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSpecAPI=t.KernelSpec=void 0;const a=o(n(20164));t.KernelSpec=a;const c=o(n(23350));t.KernelSpecAPI=c,s(n(47810),t)},20164:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},47810:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSpecManager=void 0;const s=n(66201),a=n(23114),c=n(4016),l=o(n(23350)),d=n(68485);class u extends d.BaseManager{constructor(e={}){var t;super(e),this._isReady=!1,this._connectionFailure=new c.Signal(this),this._specs=null,this._specsChanged=new c.Signal(this),this._ready=Promise.all([this.requestSpecs()]).then((e=>{})).catch((e=>{})).then((()=>{this.isDisposed||(this._isReady=!0)})),this._pollSpecs=new a.Poll({auto:!1,factory:()=>this.requestSpecs(),frequency:{interval:61e3,backoff:!0,max:3e5},name:"@jupyterlab/services:KernelSpecManager#specs",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this.ready.then((()=>{this._pollSpecs.start()}))}get isReady(){return this._isReady}get ready(){return this._ready}get specs(){return this._specs}get specsChanged(){return this._specsChanged}get connectionFailure(){return this._connectionFailure}dispose(){this._pollSpecs.dispose(),super.dispose()}async refreshSpecs(){await this._pollSpecs.refresh(),await this._pollSpecs.tick}async requestSpecs(){const e=await l.getSpecs(this.serverSettings);this.isDisposed||s.JSONExt.deepEqual(e,this._specs)||(this._specs=e,this._specsChanged.emit(e))}}t.KernelSpecManager=u},23350:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpecs=void 0;const i=n(4882),r=n(37398),o=n(79622);t.getSpecs=async function(e=i.ServerConnection.makeSettings()){const t=o.URLExt.join(e.baseUrl,"api/kernelspecs"),n=await i.ServerConnection.makeRequest(t,{},e);if(200!==n.status)throw await i.ServerConnection.ResponseError.create(n);const s=await n.json();return r.validateSpecModels(s)}},37398:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSpecModels=t.validateSpecModel=void 0;const i=n(76801);function r(e){const t=e.spec;if(!t)throw new Error("Invalid kernel spec");i.validateProperty(e,"name","string"),i.validateProperty(e,"resources","object"),i.validateProperty(t,"language","string"),i.validateProperty(t,"display_name","string"),i.validateProperty(t,"argv","array");let n=null;t.hasOwnProperty("metadata")&&(i.validateProperty(t,"metadata","object"),n=t.metadata);let r=null;return t.hasOwnProperty("env")&&(i.validateProperty(t,"env","object"),r=t.env),{name:e.name,resources:e.resources,language:t.language,display_name:t.display_name,argv:t.argv,metadata:n,env:r}}t.validateSpecModel=r,t.validateSpecModels=function(e){if(!e.hasOwnProperty("kernelspecs"))throw new Error("No kernelspecs found");let t=Object.keys(e.kernelspecs);const n=Object.create(null);let i=e.default;for(let i=0;i<t.length;i++){const o=e.kernelspecs[t[i]];try{n[t[i]]=r(o)}catch(e){console.warn(`Removing errant kernel spec: ${t[i]}`)}}if(t=Object.keys(n),!t.length)throw new Error("No valid kernelspecs found");return i&&"string"==typeof i&&i in n||(i=t[0],console.warn(`Default kernel not found, using '${t[0]}'`)),{default:i,kernelspecs:n}}},42076:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceManager=void 0;const i=n(4016),r=n(83539),o=n(51553),s=n(28873),a=n(62397),c=n(55682),l=n(29470),d=n(69139),u=n(4882),p=n(9251),h=n(41968);t.ServiceManager=class{constructor(e={}){var t,n;this._isDisposed=!1,this._connectionFailure=new i.Signal(this),this._isReady=!1;const f=e.defaultDrive,m=null!==(t=e.serverSettings)&&void 0!==t?t:u.ServerConnection.makeSettings(),g={defaultDrive:f,serverSettings:m,standby:null!==(n=e.standby)&&void 0!==n?n:"when-hidden"},v=new h.KernelManager(g);this.serverSettings=m,this.contents=new s.ContentsManager(g),this.sessions=new c.SessionManager(Object.assign(Object.assign({},g),{kernelManager:v})),this.settings=new l.SettingManager(g),this.terminals=new d.TerminalManager(g),this.builder=new r.BuildManager(g),this.workspaces=new p.WorkspaceManager(g),this.nbconvert=new o.NbConvertManager(g),this.kernelspecs=new a.KernelSpecManager(g),this.kernelspecs.connectionFailure.connect(this._onConnectionFailure,this),this.sessions.connectionFailure.connect(this._onConnectionFailure,this),this.terminals.connectionFailure.connect(this._onConnectionFailure,this);const y=[this.sessions.ready,this.kernelspecs.ready];this.terminals.isAvailable()&&y.push(this.terminals.ready),this._readyPromise=Promise.all(y).then((()=>{this._isReady=!0}))}get connectionFailure(){return this._connectionFailure}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,i.Signal.clearData(this),this.contents.dispose(),this.sessions.dispose(),this.terminals.dispose())}get isReady(){return this._isReady}get ready(){return this._readyPromise}_onConnectionFailure(e,t){this._connectionFailure.emit(t)}}},51553:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NbConvertManager=void 0;const i=n(79622),r=n(4882);t.NbConvertManager=class{constructor(e={}){var t;this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:r.ServerConnection.makeSettings()}async getExportFormats(){const e=this.serverSettings.baseUrl,t=i.URLExt.join(e,"api/nbconvert"),{serverSettings:n}=this,o=await r.ServerConnection.makeRequest(t,{},n);if(200!==o.status)throw await r.ServerConnection.ResponseError.create(o);const s=await o.json(),a={};return Object.keys(s).forEach((function(e){const t=s[e].output_mimetype;a[e]={output_mimetype:t}})),a}}},4882:(e,t,n)=>{"use strict";var i,r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.ServerConnection=void 0;const s=n(79622);let a,c,l,d;if("undefined"==typeof window){const e=n(31515);a=null!==(i=global.fetch)&&void 0!==i?i:e,l=null!==(r=global.Request)&&void 0!==r?r:e.Request,c=null!==(o=global.Headers)&&void 0!==o?o:e.Headers,d=n(57367)}else a=fetch,l=Request,c=Headers,d=WebSocket;var u,p;!function(e){e.makeSettings=function(e){return p.makeSettings(e)},e.makeRequest=function(e,t,n){return p.handleRequest(e,t,n)};class t extends Error{constructor(e,t=`Invalid response: ${e.status} ${e.statusText}`,n=""){super(t),this.response=e,this.traceback=n}static async create(e){try{const n=await e.json();return n.traceback&&console.error(n.traceback),n.message?new t(e,n.message):new t(e)}catch(n){return console.debug(n),new t(e)}}}e.ResponseError=t;class n extends TypeError{constructor(e){super(e.message),this.stack=e.stack}}e.NetworkError=n}(u=t.ServerConnection||(t.ServerConnection={})),function(e){e.makeSettings=function(e={}){const t=s.PageConfig.getBaseUrl(),n=s.PageConfig.getWsUrl(),i=s.URLExt.normalize(e.baseUrl)||t;let r=e.wsUrl;return r||i!==t||(r=n),r||0!==i.indexOf("http")||(r="ws"+i.slice(4)),r=null!=r?r:n,Object.assign(Object.assign({init:{cache:"no-store",credentials:"same-origin"},fetch:a,Headers:c,Request:l,WebSocket:d,token:s.PageConfig.getToken(),appUrl:s.PageConfig.getOption("appUrl"),appendToken:"undefined"==typeof window||void 0!==process.env.JEST_WORKER_ID||s.URLExt.getHostName(t)!==s.URLExt.getHostName(r)},e),{baseUrl:i,wsUrl:r})},e.handleRequest=function(e,t,n){var i;if(0!==e.indexOf(n.baseUrl))throw new Error("Can only be used for notebook server requests");"no-store"===(null!==(i=t.cache)&&void 0!==i?i:n.init.cache)&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());const r=new n.Request(e,Object.assign(Object.assign({},n.init),t));let o=!1;if(n.token&&(o=!0,r.headers.append("Authorization",`token ${n.token}`)),"undefined"!=typeof document&&(null===document||void 0===document?void 0:document.cookie)){const e=function(e){const t=document.cookie.match("\\b_xsrf=([^;]*)\\b");return null==t?void 0:t[1]}();void 0!==e&&(o=!0,r.headers.append("X-XSRFToken",e))}return!r.headers.has("Content-Type")&&o&&r.headers.set("Content-Type","application/json"),n.fetch.call(null,r).catch((e=>{throw new u.NetworkError(e)}))}}(p||(p={}))},8144:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionConnection=void 0;const i=n(4016),r=n(98250),o=n(88094),s=n(66201);t.SessionConnection=class{constructor(e){var t,n,o,a;this._id="",this._path="",this._name="",this._type="",this._kernel=null,this._isDisposed=!1,this._disposed=new i.Signal(this),this._kernelChanged=new i.Signal(this),this._statusChanged=new i.Signal(this),this._connectionStatusChanged=new i.Signal(this),this._iopubMessage=new i.Signal(this),this._unhandledMessage=new i.Signal(this),this._anyMessage=new i.Signal(this),this._propertyChanged=new i.Signal(this),this._id=e.model.id,this._name=e.model.name,this._path=e.model.path,this._type=e.model.type,this._username=null!==(t=e.username)&&void 0!==t?t:"",this._clientId=null!==(n=e.clientId)&&void 0!==n?n:s.UUID.uuid4(),this._connectToKernel=e.connectToKernel,this._kernelConnectionOptions=null!==(o=e.kernelConnectionOptions)&&void 0!==o?o:{},this.serverSettings=null!==(a=e.serverSettings)&&void 0!==a?a:r.ServerConnection.makeSettings(),this.setupKernel(e.model.kernel)}get disposed(){return this._disposed}get kernelChanged(){return this._kernelChanged}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get anyMessage(){return this._anyMessage}get propertyChanged(){return this._propertyChanged}get id(){return this._id}get kernel(){return this._kernel}get path(){return this._path}get type(){return this._type}get name(){return this._name}get model(){return{id:this.id,kernel:this.kernel&&{id:this.kernel.id,name:this.kernel.name},path:this._path,type:this._type,name:this._name}}get isDisposed(){return this._isDisposed}update(e){const t=this.model;if(this._path=e.path,this._name=e.name,this._type=e.type,null===this._kernel&&null!==e.kernel||null!==this._kernel&&null===e.kernel||null!==this._kernel&&null!==e.kernel&&this._kernel.id!==e.kernel.id){null!==this._kernel&&this._kernel.dispose();const t=this._kernel||null;this.setupKernel(e.kernel);const n=this._kernel||null;this._kernelChanged.emit({name:"kernel",oldValue:t,newValue:n})}this._handleModelChange(t)}dispose(){if(!this.isDisposed){if(this._isDisposed=!0,this._disposed.emit(),this._kernel){this._kernel.dispose();const e=this._kernel;this._kernel=null;const t=this._kernel;this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:t})}i.Signal.clearData(this)}}async setPath(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({path:e})}async setName(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({name:e})}async setType(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({type:e})}async changeKernel(e){if(this.isDisposed)throw new Error("Session is disposed");return await this._patch({kernel:e}),this.kernel}async shutdown(){if(this.isDisposed)throw new Error("Session is disposed");await o.shutdownSession(this.id,this.serverSettings),this.dispose()}setupKernel(e){if(null===e)return void(this._kernel=null);const t=this._connectToKernel(Object.assign(Object.assign({},this._kernelConnectionOptions),{model:e,username:this._username,clientId:this._clientId,serverSettings:this.serverSettings}));this._kernel=t,t.statusChanged.connect(this.onKernelStatus,this),t.connectionStatusChanged.connect(this.onKernelConnectionStatus,this),t.unhandledMessage.connect(this.onUnhandledMessage,this),t.iopubMessage.connect(this.onIOPubMessage,this),t.anyMessage.connect(this.onAnyMessage,this)}onKernelStatus(e,t){this._statusChanged.emit(t)}onKernelConnectionStatus(e,t){this._connectionStatusChanged.emit(t)}onIOPubMessage(e,t){this._iopubMessage.emit(t)}onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}onAnyMessage(e,t){this._anyMessage.emit(t)}async _patch(e){const t=await o.updateSession(Object.assign(Object.assign({},e),{id:this._id}),this.serverSettings);return this.update(t),t}_handleModelChange(e){e.name!==this._name&&this._propertyChanged.emit("name"),e.type!==this._type&&this._propertyChanged.emit("type"),e.path!==this._path&&this._propertyChanged.emit("path")}}},55682:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionAPI=t.Session=void 0;const a=o(n(56989));t.Session=a;const c=o(n(88094));t.SessionAPI=c,s(n(68584),t)},68584:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionManager=void 0;const i=n(35259),r=n(23114),o=n(4016),s=n(4882),a=n(68485),c=n(8144),l=n(88094);class d extends a.BaseManager{constructor(e){var t;super(e),this._isReady=!1,this._sessionConnections=new Set,this._models=new Map,this._runningChanged=new o.Signal(this),this._connectionFailure=new o.Signal(this),this._connectToKernel=e=>this._kernelManager.connectTo(e),this._kernelManager=e.kernelManager,this._pollModels=new r.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:SessionManager#models",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,await this._kernelManager.ready,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._sessionConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}connectTo(e){const t=new c.SessionConnection(Object.assign(Object.assign({},e),{connectToKernel:this._connectToKernel,serverSettings:this.serverSettings}));return this._onStarted(t),this._models.has(e.model.id)||this.refreshRunning().catch((()=>{})),t}running(){return i.iter([...this._models.values()])}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e,t={}){const n=await l.startSession(e,this.serverSettings);return await this.refreshRunning(),this.connectTo(Object.assign(Object.assign({},t),{model:n}))}async shutdown(e){await l.shutdownSession(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map((e=>l.shutdownSession(e,this.serverSettings)))),await this.refreshRunning()}async stopIfNeeded(e){try{const t=(await l.listRunning(this.serverSettings)).filter((t=>t.path===e));if(1===t.length){const e=t[0].id;await this.shutdown(e)}}catch(e){}}async findById(e){return this._models.has(e)||await this.refreshRunning(),this._models.get(e)}async findByPath(e){for(const t of this._models.values())if(t.path===e)return t;await this.refreshRunning();for(const t of this._models.values())if(t.path===e)return t}async requestRunning(){var e,t;let n;try{n=await l.listRunning(this.serverSettings)}catch(n){throw(n instanceof s.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}this.isDisposed||this._models.size===n.length&&i.every(n,(e=>{var t,n,i,r;const o=this._models.get(e.id);return!!o&&(null===(t=o.kernel)||void 0===t?void 0:t.id)===(null===(n=e.kernel)||void 0===n?void 0:n.id)&&(null===(i=o.kernel)||void 0===i?void 0:i.name)===(null===(r=e.kernel)||void 0===r?void 0:r.name)&&o.name===e.name&&o.path===e.path&&o.type===e.type}))||(this._models=new Map(n.map((e=>[e.id,e]))),this._sessionConnections.forEach((e=>{this._models.has(e.id)?e.update(this._models.get(e.id)):e.dispose()})),this._runningChanged.emit(n))}_onStarted(e){this._sessionConnections.add(e),e.disposed.connect(this._onDisposed,this),e.propertyChanged.connect(this._onChanged,this),e.kernelChanged.connect(this._onChanged,this)}_onDisposed(e){this._sessionConnections.delete(e),this.refreshRunning().catch((()=>{}))}_onChanged(){this.refreshRunning().catch((()=>{}))}}t.SessionManager=d},88094:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateSession=t.startSession=t.getSessionModel=t.shutdownSession=t.getSessionUrl=t.listRunning=t.SESSION_SERVICE_URL=void 0;const i=n(4882),r=n(79622),o=n(9988);function s(e,n){return r.URLExt.join(e,t.SESSION_SERVICE_URL,n)}t.SESSION_SERVICE_URL="api/sessions",t.listRunning=async function(e=i.ServerConnection.makeSettings()){const n=r.URLExt.join(e.baseUrl,t.SESSION_SERVICE_URL),s=await i.ServerConnection.makeRequest(n,{},e);if(200!==s.status)throw await i.ServerConnection.ResponseError.create(s);const a=await s.json();if(!Array.isArray(a))throw new Error("Invalid Session list");return a.forEach((e=>{o.updateLegacySessionModel(e),o.validateModel(e)})),a},t.getSessionUrl=s,t.shutdownSession=async function(e,t=i.ServerConnection.makeSettings()){var n;const r=s(t.baseUrl,e),o=await i.ServerConnection.makeRequest(r,{method:"DELETE"},t);if(404===o.status){const t=null!==(n=(await o.json()).message)&&void 0!==n?n:`The session "${e}"" does not exist on the server`;console.warn(t)}else{if(410===o.status)throw new i.ServerConnection.ResponseError(o,"The kernel was deleted but the session was not");if(204!==o.status)throw await i.ServerConnection.ResponseError.create(o)}},t.getSessionModel=async function(e,t=i.ServerConnection.makeSettings()){const n=s(t.baseUrl,e),r=await i.ServerConnection.makeRequest(n,{},t);if(200!==r.status)throw await i.ServerConnection.ResponseError.create(r);const a=await r.json();return o.updateLegacySessionModel(a),o.validateModel(a),a},t.startSession=async function(e,n=i.ServerConnection.makeSettings()){const s=r.URLExt.join(n.baseUrl,t.SESSION_SERVICE_URL),a={method:"POST",body:JSON.stringify(e)},c=await i.ServerConnection.makeRequest(s,a,n);if(201!==c.status)throw await i.ServerConnection.ResponseError.create(c);const l=await c.json();return o.updateLegacySessionModel(l),o.validateModel(l),l},t.updateSession=async function(e,t=i.ServerConnection.makeSettings()){const n=s(t.baseUrl,e.id),r={method:"PATCH",body:JSON.stringify(e)},a=await i.ServerConnection.makeRequest(n,r,t);if(200!==a.status)throw await i.ServerConnection.ResponseError.create(a);const c=await a.json();return o.updateLegacySessionModel(c),o.validateModel(c),c}},56989:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9988:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateModels=t.updateLegacySessionModel=t.validateModel=void 0;const i=n(92532),r=n(76801);function o(e){r.validateProperty(e,"id","string"),r.validateProperty(e,"type","string"),r.validateProperty(e,"name","string"),r.validateProperty(e,"path","string"),r.validateProperty(e,"kernel","object"),i.validateModel(e.kernel)}t.validateModel=o,t.updateLegacySessionModel=function(e){void 0===e.path&&void 0!==e.notebook&&(e.path=e.notebook.path,e.type="notebook",e.name="")},t.validateModels=function(e){if(!Array.isArray(e))throw new Error("Invalid session list");e.forEach((e=>o(e)))}},29470:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingManager=void 0;const i=n(79622),r=n(17266),o=n(4882);class s extends r.DataConnector{constructor(e={}){var t;super(),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:o.ServerConnection.makeSettings()}async fetch(e){if(!e)throw new Error("Plugin `id` parameter is required for settings fetch.");const{serverSettings:t}=this,{baseUrl:n,appUrl:i}=t,{makeRequest:r,ResponseError:s}=o.ServerConnection,c=n+i,l=a.url(c,e),d=await r(l,{},t);if(200!==d.status)throw await s.create(d);return d.json()}async list(){var e,t;const{serverSettings:n}=this,{baseUrl:i,appUrl:r}=n,{makeRequest:s,ResponseError:c}=o.ServerConnection,l=i+r,d=a.url(l,""),u=await s(d,{},n);if(200!==u.status)throw new c(u);const p=await u.json(),h=null!==(t=null===(e=null==p?void 0:p.settings)||void 0===e?void 0:e.map((e=>(e.data={composite:{},user:{}},e))))&&void 0!==t?t:[];return{ids:h.map((e=>e.id)),values:h}}async save(e,t){const{serverSettings:n}=this,{baseUrl:i,appUrl:r}=n,{makeRequest:s,ResponseError:c}=o.ServerConnection,l=i+r,d=a.url(l,e),u={body:JSON.stringify({raw:t}),method:"PUT"},p=await s(d,u,n);if(204!==p.status)throw new c(p)}}var a;t.SettingManager=s,function(e){e.url=function(e,t){return i.URLExt.join(e,"api/settings",t)}}(a||(a={}))},82498:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalConnection=void 0;const i=n(79622),r=n(66201),o=n(4016),s=n(98250),a=n(50828);class c{constructor(e){var t;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");const e=this._name,t=this.serverSettings;let n=i.URLExt.join(t.wsUrl,"terminals","websocket",encodeURIComponent(e));const r=t.token;t.appendToken&&""!==r&&(n+=`?token=${encodeURIComponent(r)}`),this._ws=new t.WebSocket(n),this._ws.onmessage=this._onWSMessage,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose},this._onWSMessage=e=>{if(this._isDisposed)return;const t=JSON.parse(e.data);"disconnect"===t[0]&&this.dispose(),"connecting"!==this._connectionStatus?this._messageReceived.emit({type:t[0],content:t.slice(1)}):"setup"===t[0]&&this._updateConnectionStatus("connected")},this._onWSClose=e=>{console.warn(`Terminal websocket closed: ${e.code}`),this.isDisposed||this._reconnect()},this._connectionStatus="connecting",this._connectionStatusChanged=new o.Signal(this),this._isDisposed=!1,this._disposed=new o.Signal(this),this._messageReceived=new o.Signal(this),this._reconnectTimeout=null,this._ws=null,this._noOp=()=>{},this._reconnectLimit=7,this._reconnectAttempt=0,this._pendingMessages=[],this._name=e.model.name,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:s.ServerConnection.makeSettings(),this._createSocket()}get disposed(){return this._disposed}get messageReceived(){return this._messageReceived}get name(){return this._name}get model(){return{name:this._name}}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearSocket(),o.Signal.clearData(this))}send(e){this._sendMessage(e)}_sendMessage(e,t=!0){if(!this._isDisposed&&e.content)if("connected"===this.connectionStatus&&this._ws){const t=[e.type,...e.content];this._ws.send(JSON.stringify(t))}else{if(!t)throw new Error(`Could not send message: ${JSON.stringify(e)}`);this._pendingMessages.push(e)}}_sendPending(){for(;"connected"===this.connectionStatus&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}reconnect(){this._errorIfDisposed();const e=new r.PromiseDelegate,t=(n,i)=>{"connected"===i?(e.resolve(),this.connectionStatusChanged.disconnect(t,this)):"disconnected"===i&&(e.reject(new Error("Terminal connection disconnected")),this.connectionStatusChanged.disconnect(t,this))};return this.connectionStatusChanged.connect(t,this),this._reconnectAttempt=0,this._reconnect(),e.promise}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");const e=l.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.error(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_clearSocket(){null!==this._ws&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}async shutdown(){await a.shutdownTerminal(this.name,this.serverSettings),this.dispose()}clone(){return new c(this)}_updateConnectionStatus(e){this._connectionStatus!==e&&(this._connectionStatus=e,"connecting"!==e&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),"connected"===e&&this._sendPending(),this._connectionStatusChanged.emit(e))}_errorIfDisposed(){if(this.isDisposed)throw new Error("Terminal connection is disposed")}get connectionStatusChanged(){return this._connectionStatusChanged}get connectionStatus(){return this._connectionStatus}}var l;t.TerminalConnection=c,function(e){e.getTermUrl=function(e,t){return i.URLExt.join(e,a.TERMINAL_SERVICE_URL,encodeURIComponent(t))},e.getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}}(l||(l={}))},69139:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalAPI=t.Terminal=void 0;const a=o(n(96166));t.Terminal=a;const c=o(n(50828));t.TerminalAPI=c,s(n(92839),t)},92839:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalManager=void 0;const i=n(35259),r=n(23114),o=n(4016),s=n(98250),a=n(68485),c=n(50828),l=n(82498);class d extends a.BaseManager{constructor(e={}){var t;if(super(e),this._isReady=!1,this._names=[],this._terminalConnections=new Set,this._runningChanged=new o.Signal(this),this._connectionFailure=new o.Signal(this),!this.isAvailable())return this._ready=Promise.reject("Terminals unavailable"),void this._ready.catch((e=>{}));this._pollModels=new r.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:TerminalManager#models",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._names.length=0,this._terminalConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}isAvailable(){return c.isAvailable()}connectTo(e){const t=new l.TerminalConnection(Object.assign(Object.assign({},e),{serverSettings:this.serverSettings}));return this._onStarted(t),this._names.includes(e.model.name)||this.refreshRunning().catch((()=>{})),t}running(){return i.iter(this._models)}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(){const e=await c.startNew(this.serverSettings);return await this.refreshRunning(),this.connectTo({model:e})}async shutdown(e){await c.shutdownTerminal(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all(this._names.map((e=>c.shutdownTerminal(e,this.serverSettings)))),await this.refreshRunning()}async requestRunning(){var e,t;let n;try{n=await c.listRunning(this.serverSettings)}catch(n){throw(n instanceof s.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}if(this.isDisposed)return;const i=n.map((({name:e})=>e)).sort();i!==this._names&&(this._names=i,this._terminalConnections.forEach((e=>{i.includes(e.name)||e.dispose()})),this._runningChanged.emit(this._models))}_onStarted(e){this._terminalConnections.add(e),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._terminalConnections.delete(e),this.refreshRunning().catch((()=>{}))}get _models(){return this._names.map((e=>({name:e})))}}t.TerminalManager=d},50828:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shutdownTerminal=t.listRunning=t.startNew=t.isAvailable=t.TERMINAL_SERVICE_URL=void 0;const i=n(79622),r=n(4882);function o(){return"true"===String(i.PageConfig.getOption("terminalsAvailable")).toLowerCase()}var s;t.TERMINAL_SERVICE_URL="api/terminals",t.isAvailable=o,t.startNew=async function(e=r.ServerConnection.makeSettings()){s.errorIfNotAvailable();const n=i.URLExt.join(e.baseUrl,t.TERMINAL_SERVICE_URL),o=await r.ServerConnection.makeRequest(n,{method:"POST"},e);if(200!==o.status)throw await r.ServerConnection.ResponseError.create(o);return await o.json()},t.listRunning=async function(e=r.ServerConnection.makeSettings()){s.errorIfNotAvailable();const n=i.URLExt.join(e.baseUrl,t.TERMINAL_SERVICE_URL),o=await r.ServerConnection.makeRequest(n,{},e);if(200!==o.status)throw await r.ServerConnection.ResponseError.create(o);const a=await o.json();if(!Array.isArray(a))throw new Error("Invalid terminal list");return a},t.shutdownTerminal=async function(e,n=r.ServerConnection.makeSettings()){var o;s.errorIfNotAvailable();const a=i.URLExt.join(n.baseUrl,t.TERMINAL_SERVICE_URL,e),c=await r.ServerConnection.makeRequest(a,{method:"DELETE"},n);if(404===c.status){const t=null!==(o=(await c.json()).message)&&void 0!==o?o:`The terminal session "${e}"" does not exist on the server`;console.warn(t)}else if(204!==c.status)throw await r.ServerConnection.ResponseError.create(c)},function(e){e.errorIfNotAvailable=function(){if(!o())throw new Error("Terminals Unavailable")}}(s||(s={}))},96166:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAvailable=void 0;const i=n(50828);Object.defineProperty(t,"isAvailable",{enumerable:!0,get:function(){return i.isAvailable}})},76801:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateProperty=void 0,t.validateProperty=function(e,t,n,i=[]){if(!e.hasOwnProperty(t))throw Error(`Missing property '${t}'`);const r=e[t];if(void 0!==n){let e=!0;switch(n){case"array":e=Array.isArray(r);break;case"object":e=void 0!==r;break;default:e=typeof r===n}if(!e)throw new Error(`Property '${t}' is not of type '${n}'`);if(i.length>0){let e=!0;switch(n){case"string":case"number":case"boolean":e=i.includes(r);break;default:e=i.findIndex((e=>e===r))>=0}if(!e)throw new Error(`Property '${t}' is not one of the valid values ${JSON.stringify(i)}`)}}}},9251:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceManager=void 0;const i=n(79622),r=n(17266),o=n(4882);class s extends r.DataConnector{constructor(e={}){var t;super(),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:o.ServerConnection.makeSettings()}async fetch(e){const{serverSettings:t}=this,{baseUrl:n,appUrl:i}=t,{makeRequest:r,ResponseError:s}=o.ServerConnection,c=n+i,l=a.url(c,e),d=await r(l,{},t);if(200!==d.status)throw await s.create(d);return d.json()}async list(){const{serverSettings:e}=this,{baseUrl:t,appUrl:n}=e,{makeRequest:i,ResponseError:r}=o.ServerConnection,s=t+n,c=a.url(s,""),l=await i(c,{},e);if(200!==l.status)throw await r.create(l);return(await l.json()).workspaces}async remove(e){const{serverSettings:t}=this,{baseUrl:n,appUrl:i}=t,{makeRequest:r,ResponseError:s}=o.ServerConnection,c=n+i,l=a.url(c,e),d=await r(l,{method:"DELETE"},t);if(204!==d.status)throw await s.create(d)}async save(e,t){const{serverSettings:n}=this,{baseUrl:i,appUrl:r}=n,{makeRequest:s,ResponseError:c}=o.ServerConnection,l=i+r,d=a.url(l,e),u={body:JSON.stringify(t),method:"PUT"},p=await s(d,u,n);if(204!==p.status)throw await c.create(p)}}var a;t.WorkspaceManager=s,function(e){e.url=function(e,t){return i.URLExt.join(e,"api/workspaces",t)}}(a||(a={}))},57367:(e,t,n)=>{"use strict";const i=n(75764);i.createWebSocketStream=n(12136),i.Server=n(91569),i.Receiver=n(5037),i.Sender=n(94979),e.exports=i},40451:(e,t,n)=>{"use strict";const{EMPTY_BUFFER:i}=n(70232);function r(e,t){if(0===e.length)return i;if(1===e.length)return e[0];const n=Buffer.allocUnsafe(t);let r=0;for(let t=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return r<t?n.slice(0,r):n}function o(e,t,n,i,r){for(let o=0;o<r;o++)n[i+o]=e[o]^t[3&o]}function s(e,t){const n=e.length;for(let i=0;i<n;i++)e[i]^=t[3&i]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function c(e){if(c.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),c.readOnly=!1),t}try{const t=n(41891),i=t.BufferUtil||t;e.exports={concat:r,mask(e,t,n,r,s){s<48?o(e,t,n,r,s):i.mask(e,t,n,r,s)},toArrayBuffer:a,toBuffer:c,unmask(e,t){e.length<32?s(e,t):i.unmask(e,t)}}}catch(t){e.exports={concat:r,mask:o,toArrayBuffer:a,toBuffer:c,unmask:s}}},70232:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},3077:e=>{"use strict";class t{constructor(e,t){this.target=t,this.type=e}}class n extends t{constructor(e,t){super("message",t),this.data=e}}class i extends t{constructor(e,t,n){super("close",n),this.wasClean=n._closeFrameReceived&&n._closeFrameSent,this.reason=t,this.code=e}}class r extends t{constructor(e){super("open",e)}}class o extends t{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const s={addEventListener(e,t,s){if("function"!=typeof t)return;function a(e){t.call(this,new n(e,this))}function c(e,n){t.call(this,new i(e,n,this))}function l(e){t.call(this,new o(e,this))}function d(){t.call(this,new r(this))}const u=s&&s.once?"once":"on";"message"===e?(a._listener=t,this[u](e,a)):"close"===e?(c._listener=t,this[u](e,c)):"error"===e?(l._listener=t,this[u](e,l)):"open"===e?(d._listener=t,this[u](e,d)):this[u](e,t)},removeEventListener(e,t){const n=this.listeners(e);for(let i=0;i<n.length;i++)n[i]!==t&&n[i]._listener!==t||this.removeListener(e,n[i])}};e.exports=s},58260:e=>{"use strict";const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function n(e,t,n){void 0===e[t]?e[t]=[n]:e[t].push(n)}e.exports={format:function(e){return Object.keys(e).map((t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map((e=>[t].concat(Object.keys(e).map((t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const i=Object.create(null);if(void 0===e||""===e)return i;let r,o,s=Object.create(null),a=!1,c=!1,l=!1,d=-1,u=-1,p=0;for(;p<e.length;p++){const h=e.charCodeAt(p);if(void 0===r)if(-1===u&&1===t[h])-1===d&&(d=p);else if(32===h||9===h)-1===u&&-1!==d&&(u=p);else{if(59!==h&&44!==h)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===d)throw new SyntaxError(`Unexpected character at index ${p}`);-1===u&&(u=p);const t=e.slice(d,u);44===h?(n(i,t,s),s=Object.create(null)):r=t,d=u=-1}}else if(void 0===o)if(-1===u&&1===t[h])-1===d&&(d=p);else if(32===h||9===h)-1===u&&-1!==d&&(u=p);else if(59===h||44===h){if(-1===d)throw new SyntaxError(`Unexpected character at index ${p}`);-1===u&&(u=p),n(s,e.slice(d,u),!0),44===h&&(n(i,r,s),s=Object.create(null),r=void 0),d=u=-1}else{if(61!==h||-1===d||-1!==u)throw new SyntaxError(`Unexpected character at index ${p}`);o=e.slice(d,p),d=u=-1}else if(c){if(1!==t[h])throw new SyntaxError(`Unexpected character at index ${p}`);-1===d?d=p:a||(a=!0),c=!1}else if(l)if(1===t[h])-1===d&&(d=p);else if(34===h&&-1!==d)l=!1,u=p;else{if(92!==h)throw new SyntaxError(`Unexpected character at index ${p}`);c=!0}else if(34===h&&61===e.charCodeAt(p-1))l=!0;else if(-1===u&&1===t[h])-1===d&&(d=p);else if(-1===d||32!==h&&9!==h){if(59!==h&&44!==h)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===d)throw new SyntaxError(`Unexpected character at index ${p}`);-1===u&&(u=p);let t=e.slice(d,u);a&&(t=t.replace(/\\/g,""),a=!1),n(s,o,t),44===h&&(n(i,r,s),s=Object.create(null),r=void 0),o=void 0,d=u=-1}}else-1===u&&(u=p)}if(-1===d||l)throw new SyntaxError("Unexpected end of input");-1===u&&(u=p);const h=e.slice(d,u);return void 0===r?n(i,h,s):(void 0===o?n(s,h,!0):n(s,o,a?h.replace(/\\/g,""):h),n(i,r,s)),i}}},27573:e=>{"use strict";const t=Symbol("kDone"),n=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[n]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[n]()}[n](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},19564:(e,t,n)=>{"use strict";const i=n(59796),r=n(40451),o=n(27573),{kStatusCode:s,NOOP:a}=n(70232),c=Buffer.from([0,0,255,255]),l=Symbol("permessage-deflate"),d=Symbol("total-length"),u=Symbol("callback"),p=Symbol("buffers"),h=Symbol("error");let f;function m(e){this[p].push(e),this[d]+=e.length}function g(e){this[d]+=e.length,this[l]._maxPayload<1||this[d]<=this[l]._maxPayload?this[p].push(e):(this[h]=new RangeError("Max payload size exceeded"),this[h].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[h][s]=1009,this.removeListener("data",g),this.reset())}function v(e){this[l]._inflate=null,e[s]=1007,this[u](e)}e.exports=class{constructor(e,t,n){if(this._maxPayload=0|n,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!f){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;f=new o(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[u];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,n=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(n.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?n.client_max_window_bits=t.clientMaxWindowBits:!0!==n.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete n.client_max_window_bits,n}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let n=e[t];if(n.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(n=n[0],"client_max_window_bits"===t){if(!0!==n){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}else if("server_max_window_bits"===t){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==n)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}e[t]=n}))})),e}decompress(e,t,n){f.add((i=>{this._decompress(e,t,((e,t)=>{i(),n(e,t)}))}))}compress(e,t,n){f.add((i=>{this._compress(e,t,((e,t)=>{i(),n(e,t)}))}))}_decompress(e,t,n){const o=this._isServer?"client":"server";if(!this._inflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=i.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[l]=this,this._inflate[d]=0,this._inflate[p]=[],this._inflate.on("error",v),this._inflate.on("data",g)}this._inflate[u]=n,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush((()=>{const e=this._inflate[h];if(e)return this._inflate.close(),this._inflate=null,void n(e);const i=r.concat(this._inflate[p],this._inflate[d]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[d]=0,this._inflate[p]=[],t&&this.params[`${o}_no_context_takeover`]&&this._inflate.reset()),n(null,i)}))}_compress(e,t,n){const o=this._isServer?"server":"client";if(!this._deflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=i.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[d]=0,this._deflate[p]=[],this._deflate.on("error",a),this._deflate.on("data",m)}this._deflate[u]=n,this._deflate.write(e),this._deflate.flush(i.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=r.concat(this._deflate[p],this._deflate[d]);t&&(e=e.slice(0,e.length-4)),this._deflate[u]=null,this._deflate[d]=0,this._deflate[p]=[],t&&this.params[`${o}_no_context_takeover`]&&this._deflate.reset(),n(null,e)}))}}},5037:(e,t,n)=>{"use strict";const{Writable:i}=n(12781),r=n(19564),{BINARY_TYPES:o,EMPTY_BUFFER:s,kStatusCode:a,kWebSocket:c}=n(70232),{concat:l,toArrayBuffer:d,unmask:u}=n(40451),{isValidStatusCode:p,isValidUTF8:h}=n(39265);function f(e,t,n,i,r){const o=new e(n?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(o,f),o.code=r,o[a]=i,o}e.exports=class extends i{constructor(e,t,n,i){super(),this._binaryType=e||o[0],this[c]=void 0,this._extensions=t||{},this._isServer=!!n,this._maxPayload=0|i,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,n){if(8===this._opcode&&0==this._state)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const n=this._buffers[0],i=t.length-e;e>=n.length?t.set(this._buffers.shift(),i):(t.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=n.slice(e)),e-=n.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,f(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const t=64==(64&e[0]);if(t&&!this._extensions[r.extensionName])return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,f(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,f(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,f(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,f(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,f(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,f(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,f(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&u(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[r.extensionName].decompress(e,this._fin,((e,n)=>{if(e)return t(e);if(n.length){if(this._messageLength+=n.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(f(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(n)}const i=this.dataMessage();if(i)return t(i);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let n;n="nodebuffer"===this._binaryType?l(t,e):"arraybuffer"===this._binaryType?d(l(t,e)):t,this.emit("message",n)}else{const n=l(t,e);if(!h(n))return this._loop=!1,f(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",n.toString())}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return f(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{const t=e.readUInt16BE(0);if(!p(t))return f(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const n=e.slice(2);if(!h(n))return f(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,n.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},94979:(e,t,n)=>{"use strict";n(41808),n(24404);const{randomFillSync:i}=n(6113),r=n(19564),{EMPTY_BUFFER:o}=n(70232),{isValidStatusCode:s}=n(39265),{mask:a,toBuffer:c}=n(40451),l=Buffer.alloc(4);class d{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const n=t.mask&&t.readOnly;let r=t.mask?6:2,o=e.length;e.length>=65536?(r+=8,o=127):e.length>125&&(r+=2,o=126);const s=Buffer.allocUnsafe(n?e.length+r:r);return s[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(s[0]|=64),s[1]=o,126===o?s.writeUInt16BE(e.length,2):127===o&&(s.writeUInt32BE(0,2),s.writeUInt32BE(e.length,6)),t.mask?(i(l,0,4),s[1]|=128,s[r-4]=l[0],s[r-3]=l[1],s[r-2]=l[2],s[r-1]=l[3],n?(a(e,l,s,r,e.length),[s]):(a(e,l,e,0,e.length),[s,e])):[s,e]}close(e,t,n,i){let r;if(void 0===e)r=o;else{if("number"!=typeof e||!s(e))throw new TypeError("First argument must be a valid error code number");if(void 0===t||""===t)r=Buffer.allocUnsafe(2),r.writeUInt16BE(e,0);else{const n=Buffer.byteLength(t);if(n>123)throw new RangeError("The message must not be greater than 123 bytes");r=Buffer.allocUnsafe(2+n),r.writeUInt16BE(e,0),r.write(t,2)}}this._deflating?this.enqueue([this.doClose,r,n,i]):this.doClose(r,n,i)}doClose(e,t,n){this.sendFrame(d.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),n)}ping(e,t,n){const i=c(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,i,t,c.readOnly,n]):this.doPing(i,t,c.readOnly,n)}doPing(e,t,n,i){this.sendFrame(d.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:n}),i)}pong(e,t,n){const i=c(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,i,t,c.readOnly,n]):this.doPong(i,t,c.readOnly,n)}doPong(e,t,n,i){this.sendFrame(d.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:n}),i)}send(e,t,n){const i=c(e),o=this._extensions[r.extensionName];let s=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&o&&(a=i.length>=o._threshold),this._compress=a):(a=!1,s=0),t.fin&&(this._firstFragment=!0),o){const e={fin:t.fin,rsv1:a,opcode:s,mask:t.mask,readOnly:c.readOnly};this._deflating?this.enqueue([this.dispatch,i,this._compress,e,n]):this.dispatch(i,this._compress,e,n)}else this.sendFrame(d.frame(i,{fin:t.fin,rsv1:!1,opcode:s,mask:t.mask,readOnly:c.readOnly}),n)}dispatch(e,t,n,i){if(!t)return void this.sendFrame(d.frame(e,n),i);const o=this._extensions[r.extensionName];this._bufferedBytes+=e.length,this._deflating=!0,o.compress(e,n.fin,((t,r)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof i&&i(e);for(let t=0;t<this._queue.length;t++){const n=this._queue[t][4];"function"==typeof n&&n(e)}}else this._bufferedBytes-=e.length,this._deflating=!1,n.readOnly=!1,this.sendFrame(d.frame(r,n),i),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=d},12136:(e,t,n)=>{"use strict";const{Duplex:i}=n(12781);function r(e){e.emit("close")}function o(){!this.destroyed&&this._writableState.finished&&this.destroy()}function s(e){this.removeListener("error",s),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let n=!0,a=!0;function c(){n&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",(function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",c)})):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",c));const l=new i({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t){l.push(t)||(n=!1,e._socket.pause())})),e.once("error",(function(e){l.destroyed||(a=!1,l.destroy(e))})),e.once("close",(function(){l.destroyed||l.push(null)})),l._destroy=function(t,n){if(e.readyState===e.CLOSED)return n(t),void process.nextTick(r,l);let i=!1;e.once("error",(function(e){i=!0,n(e)})),e.once("close",(function(){i||n(t),process.nextTick(r,l)})),a&&e.terminate()},l._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),l._readableState.endEmitted&&l.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){l._final(t)}))},l._read=function(){e.readyState!==e.OPEN&&e.readyState!==e.CLOSING||n||(n=!0,e._receiver._writableState.needDrain||e._socket.resume())},l._write=function(t,n,i){e.readyState!==e.CONNECTING?e.send(t,i):e.once("open",(function(){l._write(t,n,i)}))},l.on("end",o),l.on("error",s),l}},39265:(e,t,n)=>{"use strict";function i(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999}function r(e){const t=e.length;let n=0;for(;n<t;)if(0==(128&e[n]))n++;else if(192==(224&e[n])){if(n+1===t||128!=(192&e[n+1])||192==(254&e[n]))return!1;n+=2}else if(224==(240&e[n])){if(n+2>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||224===e[n]&&128==(224&e[n+1])||237===e[n]&&160==(224&e[n+1]))return!1;n+=3}else{if(240!=(248&e[n]))return!1;if(n+3>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||128!=(192&e[n+3])||240===e[n]&&128==(240&e[n+1])||244===e[n]&&e[n+1]>143||e[n]>244)return!1;n+=4}return!0}try{let t=n(70311);"object"==typeof t&&(t=t.Validation.isValidUTF8),e.exports={isValidStatusCode:i,isValidUTF8:e=>e.length<150?r(e):t(e)}}catch(t){e.exports={isValidStatusCode:i,isValidUTF8:r}}},91569:(e,t,n)=>{"use strict";const i=n(82361),r=n(13685),{createHash:o}=(n(95687),n(41808),n(24404),n(6113)),s=n(19564),a=n(75764),{format:c,parse:l}=n(58260),{GUID:d,kWebSocket:u}=n(70232),p=/^[+/0-9A-Za-z]{22}==$/;function h(e){e._state=2,e.emit("close")}function f(){this.destroy()}function m(e,t,n,i){e.writable&&(n=n||r.STATUS_CODES[t],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(n),...i},e.write(`HTTP/1.1 ${t} ${r.STATUS_CODES[t]}\r\n`+Object.keys(i).map((e=>`${e}: ${i[e]}`)).join("\r\n")+"\r\n\r\n"+n)),e.removeListener("error",f),e.destroy()}function g(e){return e.trim()}e.exports=class extends i{constructor(e,t){if(super(),null==(e={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=r.createServer(((e,t)=>{const n=r.STATUS_CODES[426];t.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),t.end(n)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const n of Object.keys(t))e.on(n,t[n]);return function(){for(const n of Object.keys(t))e.removeListener(n,t[n])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,n,i)=>{this.handleUpgrade(t,n,i,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),2===this._state)return void process.nextTick(h,this);if(1===this._state)return;if(this._state=1,this.clients)for(const e of this.clients)e.terminate();const t=this._server;t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?t.close(h.bind(void 0,this)):process.nextTick(h,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,i){t.on("error",f);const r=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),o=+e.headers["sec-websocket-version"],a={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!r||!p.test(r)||8!==o&&13!==o||!this.shouldHandle(e))return m(t,400);if(this.options.perMessageDeflate){const n=new s(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const t=l(e.headers["sec-websocket-extensions"]);t[s.extensionName]&&(n.accept(t[s.extensionName]),a[s.extensionName]=n)}catch(e){return m(t,400)}}if(this.options.verifyClient){const s={origin:e.headers[8===o?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(s,((o,s,c,l)=>{if(!o)return m(t,s||401,c,l);this.completeUpgrade(r,a,e,t,n,i)}));if(!this.options.verifyClient(s))return m(t,401)}this.completeUpgrade(r,a,e,t,n,i)}completeUpgrade(e,t,n,i,r,l){if(!i.readable||!i.writable)return i.destroy();if(i[u])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return m(i,503);const p=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${o("sha1").update(e+d).digest("base64")}`],h=new a(null);let v=n.headers["sec-websocket-protocol"];if(v&&(v=v.split(",").map(g),v=this.options.handleProtocols?this.options.handleProtocols(v,n):v[0],v&&(p.push(`Sec-WebSocket-Protocol: ${v}`),h._protocol=v)),t[s.extensionName]){const e=t[s.extensionName].params,n=c({[s.extensionName]:[e]});p.push(`Sec-WebSocket-Extensions: ${n}`),h._extensions=t}this.emit("headers",p,n),i.write(p.concat("\r\n").join("\r\n")),i.removeListener("error",f),h.setSocket(i,r,this.options.maxPayload),this.clients&&(this.clients.add(h),h.on("close",(()=>this.clients.delete(h)))),l(h,n)}}},75764:(e,t,n)=>{"use strict";const i=n(82361),r=n(95687),o=n(13685),s=n(41808),a=n(24404),{randomBytes:c,createHash:l}=n(6113),{Readable:d}=n(12781),{URL:u}=n(57310),p=n(19564),h=n(5037),f=n(94979),{BINARY_TYPES:m,EMPTY_BUFFER:g,GUID:v,kStatusCode:y,kWebSocket:b,NOOP:w}=n(70232),{addEventListener:_,removeEventListener:S}=n(3077),{format:C,parse:k}=n(58260),{toBuffer:E}=n(40451),x=["CONNECTING","OPEN","CLOSING","CLOSED"],T=[8,13];class P extends i{constructor(e,t,n){super(),this._binaryType=m[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=P.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(n=t,t=void 0),I(this,e,t,n)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){m.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){}set onclose(e){}get onerror(){}set onerror(e){}get onopen(){}set onopen(e){}get onmessage(){}set onmessage(e){}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,n){const i=new h(this.binaryType,this._extensions,this._isServer,n);this._sender=new f(e,this._extensions),this._receiver=i,this._socket=e,i[b]=this,e[b]=this,i.on("conclude",M),i.on("drain",L),i.on("error",j),i.on("message",U),i.on("ping",q),i.on("pong",K),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",W),e.on("data",$),e.on("end",B),e.on("error",H),this._readyState=P.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=P.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[p.extensionName]&&this._extensions[p.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=P.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==P.CLOSED){if(this.readyState===P.CONNECTING){const e="WebSocket was closed before the connection was established";return A(this,this._req,e)}this.readyState!==P.CLOSING?(this._readyState=P.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end()}}ping(e,t,n){if(this.readyState===P.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===P.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||g,t,n)):N(this,e,n)}pong(e,t,n){if(this.readyState===P.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===P.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||g,t,n)):N(this,e,n)}send(e,t,n){if(this.readyState===P.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(n=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==P.OPEN)return void N(this,e,n);const i={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[p.extensionName]||(i.compress=!1),this._sender.send(e||g,i,n)}terminate(){if(this.readyState!==P.CLOSED){if(this.readyState===P.CONNECTING){const e="WebSocket was closed before the connection was established";return A(this,this._req,e)}this._socket&&(this._readyState=P.CLOSING,this._socket.destroy())}}}function I(e,t,n,i){const s={protocolVersion:T[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...i,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!T.includes(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} (supported versions: ${T.join(", ")})`);let a;t instanceof u?(a=t,e._url=t.href):(a=new u(t),e._url=t);const d="ws+unix:"===a.protocol;if(!(a.host||d&&a.pathname)){const t=new Error(`Invalid URL: ${e.url}`);if(0===e._redirects)throw t;return void D(e,t)}const h="wss:"===a.protocol||"https:"===a.protocol,f=h?443:80,m=c(16).toString("base64"),g=h?r.get:o.get;let y;if(s.createConnection=h?O:R,s.defaultPort=s.defaultPort||f,s.port=a.port||f,s.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,s.headers={"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket",...s.headers},s.path=a.pathname+a.search,s.timeout=s.handshakeTimeout,s.perMessageDeflate&&(y=new p(!0!==s.perMessageDeflate?s.perMessageDeflate:{},!1,s.maxPayload),s.headers["Sec-WebSocket-Extensions"]=C({[p.extensionName]:y.offer()})),n&&(s.headers["Sec-WebSocket-Protocol"]=n),s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin),(a.username||a.password)&&(s.auth=`${a.username}:${a.password}`),d){const e=s.path.split(":");s.socketPath=e[0],s.path=e[1]}if(s.followRedirects){if(0===e._redirects){e._originalHost=a.host;const t=i&&i.headers;if(i={...i,headers:{}},t)for(const[e,n]of Object.entries(t))i.headers[e.toLowerCase()]=n}else a.host!==e._originalHost&&(delete s.headers.authorization,delete s.headers.cookie,delete s.headers.host,s.auth=void 0);s.auth&&!i.headers.authorization&&(i.headers.authorization="Basic "+Buffer.from(s.auth).toString("base64"))}let b=e._req=g(s);s.timeout&&b.on("timeout",(()=>{A(e,b,"Opening handshake has timed out")})),b.on("error",(t=>{null===b||b.aborted||(b=e._req=null,D(e,t))})),b.on("response",(r=>{const o=r.headers.location,a=r.statusCode;if(o&&s.followRedirects&&a>=300&&a<400){if(++e._redirects>s.maxRedirects)return void A(e,b,"Maximum redirects exceeded");let r;b.abort();try{r=new u(o,t)}catch(t){return void D(e,t)}I(e,r,n,i)}else e.emit("unexpected-response",b,r)||A(e,b,`Unexpected server response: ${r.statusCode}`)})),b.on("upgrade",((t,i,r)=>{if(e.emit("upgrade",t),e.readyState!==P.CONNECTING)return;b=e._req=null;const o=l("sha1").update(m+v).digest("base64");if(t.headers["sec-websocket-accept"]!==o)return void A(e,i,"Invalid Sec-WebSocket-Accept header");const a=t.headers["sec-websocket-protocol"],c=(n||"").split(/, */);let d;if(!n&&a?d="Server sent a subprotocol but none was requested":n&&!a?d="Server sent no subprotocol":a&&!c.includes(a)&&(d="Server sent an invalid subprotocol"),d)return void A(e,i,d);a&&(e._protocol=a);const u=t.headers["sec-websocket-extensions"];if(void 0!==u){if(!y)return void A(e,i,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=k(u)}catch(t){return void A(e,i,"Invalid Sec-WebSocket-Extensions header")}const n=Object.keys(t);if(n.length){if(1!==n.length||n[0]!==p.extensionName)return void A(e,i,"Server indicated an extension that was not requested");try{y.accept(t[p.extensionName])}catch(t){return void A(e,i,"Invalid Sec-WebSocket-Extensions header")}e._extensions[p.extensionName]=y}}e.setSocket(i,r,s.maxPayload)}))}function D(e,t){e._readyState=P.CLOSING,e.emit("error",t),e.emitClose()}function R(e){return e.path=e.socketPath,s.connect(e)}function O(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=s.isIP(e.host)?"":e.host),a.connect(e)}function A(e,t,n){e._readyState=P.CLOSING;const i=new Error(n);Error.captureStackTrace(i,A),t.setHeader?(t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),t.once("abort",e.emitClose.bind(e)),e.emit("error",i)):(t.destroy(i),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function N(e,t,n){if(t){const n=E(t).length;e._socket?e._sender._bufferedBytes+=n:e._bufferedAmount+=n}n&&n(new Error(`WebSocket is not open: readyState ${e.readyState} (${x[e.readyState]})`))}function M(e,t){const n=this[b];n._closeFrameReceived=!0,n._closeMessage=t,n._closeCode=e,void 0!==n._socket[b]&&(n._socket.removeListener("data",$),process.nextTick(V,n._socket),1005===e?n.close():n.close(e,t))}function L(){this[b]._socket.resume()}function j(e){const t=this[b];void 0!==t._socket[b]&&(t._socket.removeListener("data",$),process.nextTick(V,t._socket),t.close(e[y])),t.emit("error",e)}function F(){this[b].emitClose()}function U(e){this[b].emit("message",e)}function q(e){const t=this[b];t.pong(e,!t._isServer,w),t.emit("ping",e)}function K(e){this[b].emit("pong",e)}function V(e){e.resume()}function W(){const e=this[b];let t;this.removeListener("close",W),this.removeListener("data",$),this.removeListener("end",B),e._readyState=P.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[b]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",F),e._receiver.on("finish",F))}function $(e){this[b]._receiver.write(e)||this.pause()}function B(){const e=this[b];e._readyState=P.CLOSING,e._receiver.end(),this.end()}function H(){const e=this[b];this.removeListener("error",H),this.on("error",w),e&&(e._readyState=P.CLOSING,this.destroy())}Object.defineProperty(P,"CONNECTING",{enumerable:!0,value:x.indexOf("CONNECTING")}),Object.defineProperty(P.prototype,"CONNECTING",{enumerable:!0,value:x.indexOf("CONNECTING")}),Object.defineProperty(P,"OPEN",{enumerable:!0,value:x.indexOf("OPEN")}),Object.defineProperty(P.prototype,"OPEN",{enumerable:!0,value:x.indexOf("OPEN")}),Object.defineProperty(P,"CLOSING",{enumerable:!0,value:x.indexOf("CLOSING")}),Object.defineProperty(P.prototype,"CLOSING",{enumerable:!0,value:x.indexOf("CLOSING")}),Object.defineProperty(P,"CLOSED",{enumerable:!0,value:x.indexOf("CLOSED")}),Object.defineProperty(P.prototype,"CLOSED",{enumerable:!0,value:x.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach((e=>{Object.defineProperty(P.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(P.prototype,`on${e}`,{enumerable:!0,get(){const t=this.listeners(e);for(let e=0;e<t.length;e++)if(t[e]._listener)return t[e]._listener},set(t){const n=this.listeners(e);for(let t=0;t<n.length;t++)n[t]._listener&&this.removeListener(e,n[t]);this.addEventListener(e,t)}})})),P.prototype.addEventListener=_,P.prototype.removeEventListener=S,e.exports=P},68295:(e,t,n)=>{"use strict";function i(e){return{formatNow:()=>{try{return e.toLocaleString()}catch{return`${e}`}},format:()=>{try{return e.toLocaleTimeString()}catch{return`${e}`}}}}n.r(t),n.d(t,{default:()=>i})},36709:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RestError:()=>Xe,bearerTokenAuthenticationPolicy:()=>jt,bearerTokenAuthenticationPolicyName:()=>Mt,createDefaultHttpClient:()=>gt,createEmptyPipeline:()=>o,createHttpHeaders:()=>lt,createPipelineFromOptions:()=>nt,createPipelineRequest:()=>Tt,decompressResponsePolicy:()=>Q,decompressResponsePolicyName:()=>Y,defaultRetryPolicy:()=>ye,exponentialRetryPolicy:()=>It,exponentialRetryPolicyName:()=>Pt,formDataPolicy:()=>Se,formDataPolicyName:()=>_e,getDefaultProxySettings:()=>Le,isRestError:()=>Ze,logPolicy:()=>U,logPolicyName:()=>F,ndJsonPolicy:()=>Ut,ndJsonPolicyName:()=>Ft,proxyPolicy:()=>Fe,proxyPolicyName:()=>Re,redirectPolicy:()=>V,redirectPolicyName:()=>q,retryPolicy:()=>ge,setClientRequestIdPolicy:()=>qe,setClientRequestIdPolicyName:()=>Ue,systemErrorRetryPolicy:()=>Rt,systemErrorRetryPolicyName:()=>Dt,throttlingRetryPolicy:()=>At,throttlingRetryPolicyName:()=>Ot,tlsPolicy:()=>Ve,tlsPolicyName:()=>Ke,tracingPolicy:()=>tt,tracingPolicyName:()=>et,userAgentPolicy:()=>G,userAgentPolicyName:()=>J});const i=new Set(["Deserialize","Serialize","Retry","Sign"]);class r{constructor(e){var t;this._policies=[],this._policies=null!==(t=null==e?void 0:e.slice(0))&&void 0!==t?t:[],this._orderedPolicies=void 0}addPolicy(e,t={}){if(t.phase&&t.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(t.phase&&!i.has(t.phase))throw new Error(`Invalid phase name: ${t.phase}`);if(t.afterPhase&&!i.has(t.afterPhase))throw new Error(`Invalid afterPhase name: ${t.afterPhase}`);this._policies.push({policy:e,options:t}),this._orderedPolicies=void 0}removePolicy(e){const t=[];return this._policies=this._policies.filter((n=>!(e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase)||(t.push(n.policy),!1))),this._orderedPolicies=void 0,t}sendRequest(e,t){return this.getOrderedPolicies().reduceRight(((e,t)=>n=>t.sendRequest(n,e)),(t=>e.sendRequest(t)))(t)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new r(this._policies)}static create(){return new r}orderPolicies(){const e=[],t=new Map;function n(e){return{name:e,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const i=n("Serialize"),r=n("None"),o=n("Deserialize"),s=n("Retry"),a=n("Sign"),c=[i,r,o,s,a];function l(e){return"Retry"===e?s:"Serialize"===e?i:"Deserialize"===e?o:"Sign"===e?a:r}for(const e of this._policies){const n=e.policy,i=e.options,r=n.name;if(t.has(r))throw new Error("Duplicate policy names not allowed in pipeline");const o={policy:n,dependsOn:new Set,dependants:new Set};i.afterPhase&&(o.afterPhase=l(i.afterPhase),o.afterPhase.hasAfterPolicies=!0),t.set(r,o),l(i.phase).policies.add(o)}for(const e of this._policies){const{policy:n,options:i}=e,r=n.name,o=t.get(r);if(!o)throw new Error(`Missing node for policy ${r}`);if(i.afterPolicies)for(const e of i.afterPolicies){const n=t.get(e);n&&(o.dependsOn.add(n),n.dependants.add(o))}if(i.beforePolicies)for(const e of i.beforePolicies){const n=t.get(e);n&&(n.dependsOn.add(o),o.dependants.add(n))}}function d(n){n.hasRun=!0;for(const i of n.policies)if((!i.afterPhase||i.afterPhase.hasRun&&!i.afterPhase.policies.size)&&0===i.dependsOn.size){e.push(i.policy);for(const e of i.dependants)e.dependsOn.delete(i);t.delete(i.policy.name),n.policies.delete(i)}}function u(){for(const e of c){if(d(e),e.policies.size>0&&e!==r)return void(r.hasRun||d(r));e.hasAfterPolicies&&d(r)}}let p=0;for(;t.size>0;){p++;const t=e.length;if(u(),e.length<=t&&p>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}function o(){return r.create()}var s=n(22037),a=n(73837),c=n.n(a);const l="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0;let d,u=[],p=[];const h=[];l&&m(l);const f=Object.assign((e=>v(e)),{enable:m,enabled:g,disable:function(){const e=d||"";return m(""),e},log:function(e,...t){process.stderr.write(`${c().format(e,...t)}${s.EOL}`)}});function m(e){d=e,u=[],p=[];const t=/\*/g,n=e.split(",").map((e=>e.trim().replace(t,".*?")));for(const e of n)e.startsWith("-")?p.push(new RegExp(`^${e.substr(1)}$`)):u.push(new RegExp(`^${e}$`));for(const e of h)e.enabled=g(e.namespace)}function g(e){if(e.endsWith("*"))return!0;for(const t of p)if(t.test(e))return!1;for(const t of u)if(t.test(e))return!0;return!1}function v(e){const t=Object.assign((function(...n){t.enabled&&(n.length>0&&(n[0]=`${e} ${n[0]}`),t.log(...n))}),{enabled:g(e),destroy:y,log:f.log,namespace:e,extend:b});return h.push(t),t}function y(){const e=h.indexOf(this);return e>=0&&(h.splice(e,1),!0)}function b(e){const t=v(`${this.namespace}:${e}`);return t.log=this.log,t}const w=f,_=new Set,S="undefined"!=typeof process&&process.env&&process.env.AZURE_LOG_LEVEL||void 0;let C;const k=w("azure");k.log=(...e)=>{w.log(...e)};const E=["verbose","info","warning","error"];S&&(R(S)?function(e){if(e&&!R(e))throw new Error(`Unknown log level '${e}'. Acceptable values: ${E.join(",")}`);C=e;const t=[];for(const e of _)D(e)&&t.push(e.namespace);w.enable(t.join(","))}(S):console.error(`AZURE_LOG_LEVEL set to unknown log level '${S}'; logging is not enabled. Acceptable values: ${E.join(", ")}.`));const x={verbose:400,info:300,warning:200,error:100};function T(e){const t=k.extend(e);return P(k,t),{error:I(t,"error"),warning:I(t,"warning"),info:I(t,"info"),verbose:I(t,"verbose")}}function P(e,t){t.log=(...t)=>{e.log(...t)}}function I(e,t){const n=Object.assign(e.extend(t),{level:t});if(P(e,n),D(n)){const e=w.disable();w.enable(e+","+n.namespace)}return _.add(n),n}function D(e){return Boolean(C&&x[e.level]<=x[C])}function R(e){return E.includes(e)}const O=T("core-rest-pipeline");function A(e){return!("object"!=typeof e||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}const N="REDACTED",M=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],L=["api-version"];class j{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:t=[]}={}){e=M.concat(e),t=L.concat(t),this.allowedHeaderNames=new Set(e.map((e=>e.toLowerCase()))),this.allowedQueryParameters=new Set(t.map((e=>e.toLowerCase())))}sanitize(e){const t=new Set;return JSON.stringify(e,((e,n)=>{if(n instanceof Error)return Object.assign(Object.assign({},n),{name:n.name,message:n.message});if("headers"===e)return this.sanitizeHeaders(n);if("url"===e)return this.sanitizeUrl(n);if("query"===e)return this.sanitizeQuery(n);if("body"!==e&&"response"!==e&&"operationSpec"!==e){if(Array.isArray(n)||A(n)){if(t.has(n))return"[Circular]";t.add(n)}return n}}),2)}sanitizeHeaders(e){const t={};for(const n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?t[n]=e[n]:t[n]=N;return t}sanitizeQuery(e){if("object"!=typeof e||null===e)return e;const t={};for(const n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?t[n]=e[n]:t[n]=N;return t}sanitizeUrl(e){if("string"!=typeof e||null===e)return e;const t=new URL(e);if(!t.search)return e;for(const[e]of t.searchParams)this.allowedQueryParameters.has(e.toLowerCase())||t.searchParams.set(e,N);return t.toString()}}const F="logPolicy";function U(e={}){var t;const n=null!==(t=e.logger)&&void 0!==t?t:O.info,i=new j({additionalAllowedHeaderNames:e.additionalAllowedHeaderNames,additionalAllowedQueryParameters:e.additionalAllowedQueryParameters});return{name:F,async sendRequest(e,t){if(!n.enabled)return t(e);n(`Request: ${i.sanitize(e)}`);const r=await t(e);return n(`Response status code: ${r.status}`),n(`Headers: ${i.sanitize(r.headers)}`),r}}}const q="redirectPolicy",K=["GET","HEAD"];function V(e={}){const{maxRetries:t=20}=e;return{name:q,async sendRequest(e,n){const i=await n(e);return W(n,i,t)}}}async function W(e,t,n,i=0){const{request:r,status:o,headers:s}=t,a=s.get("location");if(a&&(300===o||301===o&&K.includes(r.method)||302===o&&K.includes(r.method)||303===o&&"POST"===r.method||307===o)&&i<n){const t=new URL(a,r.url);r.url=t.toString(),303===o&&(r.method="GET",r.headers.delete("Content-Length"),delete r.body),r.headers.delete("Authorization");const s=await e(r);return W(e,s,n,i+1)}return t}const $="1.10.2",B=3;function H(e){const t=new Map;var n;t.set("core-rest-pipeline",$),(n=t).set("Node",process.version),n.set("OS",`(${s.arch()}-${s.type()}-${s.release()})`);const i=function(e){const t=[];for(const[n,i]of e){const e=i?`${n}/${i}`:n;t.push(e)}return t.join(" ")}(t);return e?`${e} ${i}`:i}const z="User-Agent",J="userAgentPolicy";function G(e={}){const t=H(e.userAgentPrefix);return{name:J,sendRequest:async(e,n)=>(e.headers.has(z)||e.headers.set(z,t),n(e))}}const Y="decompressResponsePolicy";function Q(){return{name:Y,sendRequest:async(e,t)=>("HEAD"!==e.method&&e.headers.set("Accept-Encoding","gzip,deflate"),t(e))}}const X=new WeakMap,Z=new WeakMap;class ee{constructor(){this.onabort=null,X.set(this,[]),Z.set(this,!1)}get aborted(){if(!Z.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return Z.get(this)}static get none(){return new ee}addEventListener(e,t){if(!X.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");X.get(this).push(t)}removeEventListener(e,t){if(!X.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");const n=X.get(this),i=n.indexOf(t);i>-1&&n.splice(i,1)}dispatchEvent(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}}function te(e){if(e.aborted)return;e.onabort&&e.onabort.call(e);const t=X.get(e);t&&t.slice().forEach((t=>{t.call(e,{type:"abort"})})),Z.set(e,!0)}class ne extends Error{constructor(e){super(e),this.name="AbortError"}}class ie{constructor(e){if(this._signal=new ee,e){Array.isArray(e)||(e=arguments);for(const t of e)t.aborted?this.abort():t.addEventListener("abort",(()=>{this.abort()}))}}get signal(){return this._signal}abort(){te(this._signal)}static timeout(e){const t=new ee,n=setTimeout(te,e,t);return"function"==typeof n.unref&&n.unref(),t}}const re="The operation was aborted.";function oe(e,t,n){return new Promise(((i,r)=>{let o,s;const a=()=>r(new ne((null==n?void 0:n.abortErrorMsg)?null==n?void 0:n.abortErrorMsg:re)),c=()=>{(null==n?void 0:n.abortSignal)&&s&&n.abortSignal.removeEventListener("abort",s)};if(s=()=>(o&&clearTimeout(o),c(),a()),(null==n?void 0:n.abortSignal)&&n.abortSignal.aborted)return a();o=setTimeout((()=>{c(),i(t)}),e),(null==n?void 0:n.abortSignal)&&n.abortSignal.addEventListener("abort",s)}))}function se(e,t){const n=e.headers.get(t);if(!n)return;const i=Number(n);return Number.isNaN(i)?void 0:i}const ae="Retry-After",ce=["retry-after-ms","x-ms-retry-after-ms",ae];function le(e){if(e&&[429,503].includes(e.status))try{for(const t of ce){const n=se(e,t);if(0===n||n)return n*(t===ae?1e3:1)}const t=e.headers.get(ae);if(!t)return;const n=Date.parse(t)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch(e){return}}function de(){return{name:"throttlingRetryStrategy",retry({response:e}){const t=le(e);return Number.isFinite(t)?{retryAfterInMs:t}:{skipStrategy:!0}}}}const ue=1e3,pe=64e3;function he(e={}){var t,n;const i=null!==(t=e.retryDelayInMs)&&void 0!==t?t:ue,r=null!==(n=e.maxRetryDelayInMs)&&void 0!==n?n:pe;let o=i;return{name:"exponentialRetryStrategy",retry({retryCount:t,response:n,responseError:i}){const s=!!(u=i)&&("ETIMEDOUT"===u.code||"ESOCKETTIMEDOUT"===u.code||"ECONNREFUSED"===u.code||"ECONNRESET"===u.code||"ENOENT"===u.code),a=s&&e.ignoreSystemErrors,c=function(e){return Boolean(e&&void 0!==e.status&&(e.status>=500||408===e.status)&&501!==e.status&&505!==e.status)}(n),l=c&&e.ignoreHttpStatusCodes,d=n&&(function(e){return Number.isFinite(le(e))}(n)||!c);var u;if(d||l||a)return{skipStrategy:!0};if(i&&!s&&!c)return{errorToThrow:i};const p=o*Math.pow(2,t),h=Math.min(r,p);var f,m;return o=h/2+(f=0,m=h/2,f=Math.ceil(f),m=Math.floor(m),Math.floor(Math.random()*(m-f+1))+f),{retryAfterInMs:o}}}}const fe=T("core-rest-pipeline retryPolicy"),me="retryPolicy";function ge(e,t={maxRetries:B}){const n=t.logger||fe;return{name:me,async sendRequest(i,r){var o,s;let a,c,l=-1;e:for(;;){l+=1,a=void 0,c=void 0;try{n.info(`Retry ${l}: Attempting to send request`,i.requestId),a=await r(i),n.info(`Retry ${l}: Received a response from request`,i.requestId)}catch(e){if(n.error(`Retry ${l}: Received an error from request`,i.requestId),c=e,!e||"RestError"!==c.name)throw e;a=c.response}if(null===(o=i.abortSignal)||void 0===o?void 0:o.aborted)throw n.error(`Retry ${l}: Request aborted.`),new ne;if(l>=(null!==(s=t.maxRetries)&&void 0!==s?s:B)){if(n.info(`Retry ${l}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),c)throw c;if(a)return a;throw new Error("Maximum retries reached with no response or error to throw")}n.info(`Retry ${l}: Processing ${e.length} retry strategies.`);t:for(const t of e){const e=t.logger||fe;e.info(`Retry ${l}: Processing retry strategy ${t.name}.`);const n=t.retry({retryCount:l,response:a,responseError:c});if(n.skipStrategy){e.info(`Retry ${l}: Skipped.`);continue t}const{errorToThrow:r,retryAfterInMs:o,redirectTo:s}=n;if(r)throw e.error(`Retry ${l}: Retry strategy ${t.name} throws error:`,r),r;if(o||0===o){e.info(`Retry ${l}: Retry strategy ${t.name} retries after ${o}`),await oe(o,void 0,{abortSignal:i.abortSignal});continue e}if(s){e.info(`Retry ${l}: Retry strategy ${t.name} redirects to ${s}`),i.url=s;continue e}}if(c)throw n.info("None of the retry strategies could work with the received error. Throwing it."),c;if(a)return n.info("None of the retry strategies could work with the received response. Returning it."),a}}}}const ve="defaultRetryPolicy";function ye(e={}){var t;return{name:ve,sendRequest:ge([de(),he(e)],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:B}).sendRequest}}var be=n(53173),we=n.n(be);const _e="formDataPolicy";function Se(){return{name:_e,async sendRequest(e,t){if(e.formData){const t=e.headers.get("Content-Type");t&&-1!==t.indexOf("application/x-www-form-urlencoded")?(e.body=function(e){const t=new URLSearchParams;for(const[n,i]of Object.entries(e))if(Array.isArray(i))for(const e of i)t.append(n,e.toString());else t.append(n,i.toString());return t.toString()}(e.formData),e.formData=void 0):await async function(e,t){const n=new(we());for(const t of Object.keys(e)){const i=e[t];if(Array.isArray(i))for(const e of i)n.append(t,e);else n.append(t,i)}t.body=n,t.formData=void 0;const i=t.headers.get("Content-Type");i&&-1!==i.indexOf("multipart/form-data")&&t.headers.set("Content-Type",`multipart/form-data; boundary=${n.getBoundary()}`);try{const e=await new Promise(((e,t)=>{n.getLength(((n,i)=>{n?t(n):e(i)}))}));t.headers.set("Content-Length",e)}catch(e){}}(e.formData,e)}return t(e)}}}var Ce;const ke="undefined"!=typeof process&&Boolean(process.version)&&Boolean(null===(Ce=process.versions)||void 0===Ce?void 0:Ce.node);var Ee=n(26018),xe=n(74476);const Te="HTTPS_PROXY",Pe="HTTP_PROXY",Ie="ALL_PROXY",De="NO_PROXY",Re="proxyPolicy",Oe=[];let Ae=!1;const Ne=new Map;function Me(e){return process.env[e]?process.env[e]:process.env[e.toLowerCase()]?process.env[e.toLowerCase()]:void 0}function Le(e){if(!e&&!(e=function(){if(!process)return;const e=Me(Te),t=Me(Ie),n=Me(Pe);return e||t||n}()))return;const t=new URL(e);return{host:(t.protocol?t.protocol+"//":"")+t.hostname,port:Number.parseInt(t.port||"80"),username:t.username,password:t.password}}function je(e,{headers:t,tlsSettings:n}){let i;try{i=new URL(e.host)}catch(t){throw new Error(`Expecting a valid host string in proxy settings, but found "${e.host}".`)}n&&O.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");const r={hostname:i.hostname,port:e.port,protocol:i.protocol,headers:t.toJSON()};return e.username&&e.password?r.auth=`${e.username}:${e.password}`:e.username&&(r.auth=`${e.username}`),r}function Fe(e=Le(),t){Ae||Oe.push(...function(){const e=Me(De);return Ae=!0,e?e.split(",").map((e=>e.trim())).filter((e=>e.length)):[]}());const n={};return{name:Re,async sendRequest(i,r){var o;return i.proxySettings||function(e,t,n){if(0===t.length)return!1;const i=new URL(e).hostname;if(null==n?void 0:n.has(i))return n.get(i);let r=!1;for(const e of t)"."===e[0]?(i.endsWith(e)||i.length===e.length-1&&i===e.slice(1))&&(r=!0):i===e&&(r=!0);return null==n||n.set(i,r),r}(i.url,null!==(o=null==t?void 0:t.customNoProxyList)&&void 0!==o?o:Oe,(null==t?void 0:t.customNoProxyList)?void 0:Ne)||(i.proxySettings=e),i.proxySettings&&function(e,t){if(e.agent)return;const n="https:"!==new URL(e.url).protocol,i=e.proxySettings;if(i)if(n){if(!t.httpProxyAgent){const n=je(i,e);t.httpProxyAgent=new xe.HttpProxyAgent(n)}e.agent=t.httpProxyAgent}else{if(!t.httpsProxyAgent){const n=je(i,e);t.httpsProxyAgent=new Ee.HttpsProxyAgent(n)}e.agent=t.httpsProxyAgent}}(i,n),r(i)}}}const Ue="setClientRequestIdPolicy";function qe(e="x-ms-client-request-id"){return{name:Ue,sendRequest:async(t,n)=>(t.headers.has(e)||t.headers.set(e,t.requestId),n(t))}}const Ke="tlsPolicy";function Ve(e){return{name:Ke,sendRequest:async(t,n)=>(t.tlsSettings||(t.tlsSettings=e),n(t))}}const We={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function $e(e={}){let t=new Be(e.parentContext);return e.span&&(t=t.setValue(We.span,e.span)),e.namespace&&(t=t.setValue(We.namespace,e.namespace)),t}class Be{constructor(e){this._contextMap=e instanceof Be?new Map(e._contextMap):new Map}setValue(e,t){const n=new Be(this);return n._contextMap.set(e,t),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){const t=new Be(this);return t._contextMap.delete(e),t}}let He;function ze(){return He||(He={createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(e,t)=>({span:{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}},tracingContext:$e({parentContext:t.tracingContext})}),withContext:(e,t,...n)=>t(...n)}),He}function Je(e){if(A(e)){const t="string"==typeof e.name,n="string"==typeof e.message;return t&&n}return!1}function Ge(e){if(Je(e))return e.message;{let t;try{t="object"==typeof e&&e?JSON.stringify(e):String(e)}catch(e){t="[unable to stringify input]"}return`Unknown error ${t}`}}const Ye=a.inspect.custom,Qe=new j;class Xe extends Error{constructor(e,t={}){super(e),this.name="RestError",this.code=t.code,this.statusCode=t.statusCode,this.request=t.request,this.response=t.response,Object.setPrototypeOf(this,Xe.prototype)}[Ye](){return`RestError: ${this.message} \n ${Qe.sanitize(this)}`}}function Ze(e){return e instanceof Xe||Je(e)&&"RestError"===e.name}Xe.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",Xe.PARSE_ERROR="PARSE_ERROR";const et="tracingPolicy";function tt(e={}){const t=H(e.userAgentPrefix),n=function(){try{return function(e){const{namespace:t,packageName:n,packageVersion:i}=e;function r(e,r,o){var s;const a=ze().startSpan(e,Object.assign(Object.assign({},o),{packageName:n,packageVersion:i,tracingContext:null===(s=null==r?void 0:r.tracingOptions)||void 0===s?void 0:s.tracingContext}));let c=a.tracingContext;const l=a.span;return c.getValue(We.namespace)||(c=c.setValue(We.namespace,t)),l.setAttribute("az.namespace",c.getValue(We.namespace)),{span:l,updatedOptions:Object.assign({},r,{tracingOptions:Object.assign(Object.assign({},null==r?void 0:r.tracingOptions),{tracingContext:c})})}}function o(e,t,...n){return ze().withContext(e,t,...n)}return{startSpan:r,withSpan:async function(e,t,n,i){const{span:s,updatedOptions:a}=r(e,t,i);try{const e=await o(a.tracingOptions.tracingContext,(()=>Promise.resolve(n(a,s))));return s.setStatus({status:"success"}),e}catch(e){throw s.setStatus({status:"error",error:e}),e}finally{s.end()}},withContext:o,parseTraceparentHeader:function(e){return ze().parseTraceparentHeader(e)},createRequestHeaders:function(e){return ze().createRequestHeaders(e)}}}({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:$})}catch(e){return void O.warning(`Error when creating the TracingClient: ${Ge(e)}`)}}();return{name:et,async sendRequest(e,i){var r,o;if(!n||!(null===(r=e.tracingOptions)||void 0===r?void 0:r.tracingContext))return i(e);const{span:s,tracingContext:a}=null!==(o=function(e,t,n){try{const{span:i,updatedOptions:r}=e.startSpan(`HTTP ${t.method}`,{tracingOptions:t.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":t.method,"http.url":t.url,requestId:t.requestId}});if(!i.isRecording())return void i.end();n&&i.setAttribute("http.user_agent",n);const o=e.createRequestHeaders(r.tracingOptions.tracingContext);for(const[e,n]of Object.entries(o))t.headers.set(e,n);return{span:i,tracingContext:r.tracingOptions.tracingContext}}catch(e){return void O.warning(`Skipping creating a tracing span due to an error: ${Ge(e)}`)}}(n,e,t))&&void 0!==o?o:{};if(!s||!a)return i(e);try{const t=await n.withContext(a,i,e);return function(e,t){try{e.setAttribute("http.status_code",t.status);const n=t.headers.get("x-ms-request-id");n&&e.setAttribute("serviceRequestId",n),e.setStatus({status:"success"}),e.end()}catch(e){O.warning(`Skipping tracing span processing due to an error: ${Ge(e)}`)}}(s,t),t}catch(e){throw function(e,t){try{e.setStatus({status:"error",error:Je(t)?t:void 0}),Ze(t)&&t.statusCode&&e.setAttribute("http.status_code",t.statusCode),e.end()}catch(e){O.warning(`Skipping tracing span processing due to an error: ${Ge(e)}`)}}(s,e),e}}}}function nt(e){const t=o();return ke&&(e.tlsOptions&&t.addPolicy(Ve(e.tlsOptions)),t.addPolicy(Fe(e.proxyOptions)),t.addPolicy(Q())),t.addPolicy(Se()),t.addPolicy(G(e.userAgentOptions)),t.addPolicy(qe()),t.addPolicy(ye(e.retryOptions),{phase:"Retry"}),t.addPolicy(tt(e.userAgentOptions),{afterPhase:"Retry"}),ke&&t.addPolicy(V(e.redirectOptions),{afterPhase:"Retry"}),t.addPolicy(U(e.loggingOptions),{afterPhase:"Sign"}),t}var it=n(13685),rt=n(95687),ot=n(59796),st=n(12781);function at(e){return e.toLowerCase()}class ct{constructor(e){if(this._headersMap=new Map,e)for(const t of Object.keys(e))this.set(t,e[t])}set(e,t){this._headersMap.set(at(e),{name:e,value:String(t)})}get(e){var t;return null===(t=this._headersMap.get(at(e)))||void 0===t?void 0:t.value}has(e){return this._headersMap.has(at(e))}delete(e){this._headersMap.delete(at(e))}toJSON(e={}){const t={};if(e.preserveCase)for(const e of this._headersMap.values())t[e.name]=e.value;else for(const[e,n]of this._headersMap)t[e]=n.value;return t}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*(e){for(const t of e.values())yield[t.name,t.value]}(this._headersMap)}}function lt(e){return new ct(e)}const dt={};function ut(e){return e&&"function"==typeof e.pipe}function pt(e){return new Promise((t=>{e.on("close",t),e.on("end",t),e.on("error",t)}))}function ht(e){return e&&"number"==typeof e.byteLength}class ft extends st.Transform{constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}_transform(e,t,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(e){n(e)}}}class mt{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var t,n,i;const r=new ie;let o;if(e.abortSignal){if(e.abortSignal.aborted)throw new ne("The operation was aborted.");o=e=>{"abort"===e.type&&r.abort()},e.abortSignal.addEventListener("abort",o)}e.timeout>0&&setTimeout((()=>{r.abort()}),e.timeout);const s=e.headers.get("Accept-Encoding"),a=(null==s?void 0:s.includes("gzip"))||(null==s?void 0:s.includes("deflate"));let c,l="function"==typeof e.body?e.body():e.body;if(l&&!e.headers.has("Content-Length")){const t=function(e){return e?Buffer.isBuffer(e)?e.length:ut(e)?null:ht(e)?e.byteLength:"string"==typeof e?Buffer.from(e).length:null:0}(l);null!==t&&e.headers.set("Content-Length",t)}try{if(l&&e.onUploadProgress){const t=e.onUploadProgress,n=new ft(t);n.on("error",(e=>{O.error("Error in upload progress",e)})),ut(l)?l.pipe(n):n.end(l),l=n}const o=await this.makeRequest(e,r,l),s=function(e){const t=lt();for(const n of Object.keys(e.headers)){const i=e.headers[n];Array.isArray(i)?i.length>0&&t.set(n,i[0]):i&&t.set(n,i)}return t}(o),u={status:null!==(t=o.statusCode)&&void 0!==t?t:0,headers:s,request:e};if("HEAD"===e.method)return o.resume(),u;c=a?function(e,t){const n=t.get("Content-Encoding");if("gzip"===n){const t=ot.createGunzip();return e.pipe(t),t}if("deflate"===n){const t=ot.createInflate();return e.pipe(t),t}return e}(o,s):o;const p=e.onDownloadProgress;if(p){const e=new ft(p);e.on("error",(e=>{O.error("Error in download progress",e)})),c.pipe(e),c=e}return(null===(n=e.streamResponseStatusCodes)||void 0===n?void 0:n.has(Number.POSITIVE_INFINITY))||(null===(i=e.streamResponseStatusCodes)||void 0===i?void 0:i.has(u.status))?u.readableStreamBody=c:u.bodyAsText=await(d=c,new Promise(((e,t)=>{const n=[];d.on("data",(e=>{Buffer.isBuffer(e)?n.push(e):n.push(Buffer.from(e))})),d.on("end",(()=>{e(Buffer.concat(n).toString("utf8"))})),d.on("error",(e=>{e&&"AbortError"===(null==e?void 0:e.name)?t(e):t(new Xe(`Error reading response as text: ${e.message}`,{code:Xe.PARSE_ERROR}))}))}))),u}finally{if(e.abortSignal&&o){let t=Promise.resolve();ut(l)&&(t=pt(l));let n=Promise.resolve();ut(c)&&(n=pt(c)),Promise.all([t,n]).then((()=>{var t;o&&(null===(t=e.abortSignal)||void 0===t||t.removeEventListener("abort",o))})).catch((e=>{O.warning("Error when cleaning up abortListener on httpRequest",e)}))}}var d}makeRequest(e,t,n){var i;const r=new URL(e.url),o="https:"!==r.protocol;if(o&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);const s={agent:null!==(i=e.agent)&&void 0!==i?i:this.getOrCreateAgent(e,o),hostname:r.hostname,path:`${r.pathname}${r.search}`,port:r.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})};return new Promise(((i,r)=>{const a=o?it.request(s,i):rt.request(s,i);a.once("error",(t=>{var n;r(new Xe(t.message,{code:null!==(n=t.code)&&void 0!==n?n:Xe.REQUEST_SEND_ERROR,request:e}))})),t.signal.addEventListener("abort",(()=>{const e=new ne("The operation was aborted.");a.destroy(e),r(e)})),n&&ut(n)?n.pipe(a):n?"string"==typeof n||Buffer.isBuffer(n)?a.end(n):ht(n)?a.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(O.error("Unrecognized body type",n),r(new Xe("Unrecognized body type"))):a.end()}))}getOrCreateAgent(e,t){var n;const i=e.disableKeepAlive;if(t)return i?it.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new it.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return rt.globalAgent;const t=null!==(n=e.tlsSettings)&&void 0!==n?n:dt;let r=this.cachedHttpsAgents.get(t);return r&&r.options.keepAlive===!i||(O.info("No cached TLS Agent exist, creating a new Agent"),r=new rt.Agent(Object.assign({keepAlive:!i},t)),this.cachedHttpsAgents.set(t,r)),r}}}function gt(){return new mt}var vt=n(6113),yt=n.n(vt);const bt=new Uint8Array(256);let wt=bt.length;function _t(){return wt>bt.length-16&&(yt().randomFillSync(bt),wt=0),bt.slice(wt,wt+=16)}const St=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ct=[];for(let e=0;e<256;++e)Ct.push((e+256).toString(16).substr(1));const kt=function(e,t=0){const n=(Ct[e[t+0]]+Ct[e[t+1]]+Ct[e[t+2]]+Ct[e[t+3]]+"-"+Ct[e[t+4]]+Ct[e[t+5]]+"-"+Ct[e[t+6]]+Ct[e[t+7]]+"-"+Ct[e[t+8]]+Ct[e[t+9]]+"-"+Ct[e[t+10]]+Ct[e[t+11]]+Ct[e[t+12]]+Ct[e[t+13]]+Ct[e[t+14]]+Ct[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&St.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n},Et=function(e,t,n){const i=(e=e||{}).random||(e.rng||_t)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return kt(i)};class xt{constructor(e){var t,n,i,r,o,s,a;this.url=e.url,this.body=e.body,this.headers=null!==(t=e.headers)&&void 0!==t?t:lt(),this.method=null!==(n=e.method)&&void 0!==n?n:"GET",this.timeout=null!==(i=e.timeout)&&void 0!==i?i:0,this.formData=e.formData,this.disableKeepAlive=null!==(r=e.disableKeepAlive)&&void 0!==r&&r,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=null!==(o=e.withCredentials)&&void 0!==o&&o,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||Et(),this.allowInsecureConnection=null!==(s=e.allowInsecureConnection)&&void 0!==s&&s,this.enableBrowserStreams=null!==(a=e.enableBrowserStreams)&&void 0!==a&&a}}function Tt(e){return new xt(e)}const Pt="exponentialRetryPolicy";function It(e={}){var t;return ge([he(Object.assign(Object.assign({},e),{ignoreSystemErrors:!0}))],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:B})}const Dt="systemErrorRetryPolicy";function Rt(e={}){var t;return{name:Dt,sendRequest:ge([he(Object.assign(Object.assign({},e),{ignoreHttpStatusCodes:!0}))],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:B}).sendRequest}}const Ot="throttlingRetryPolicy";function At(e={}){var t;return{name:Ot,sendRequest:ge([de()],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:B}).sendRequest}}const Nt={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};const Mt="bearerTokenAuthenticationPolicy";async function Lt(e){const{scopes:t,getAccessToken:n,request:i}=e,r={abortSignal:i.abortSignal,tracingOptions:i.tracingOptions},o=await n(t,r);o&&e.request.headers.set("Authorization",`Bearer ${o.token}`)}function jt(e){var t;const{credential:n,scopes:i,challengeCallbacks:r}=e,o=e.logger||O,s=Object.assign({authorizeRequest:null!==(t=null==r?void 0:r.authorizeRequest)&&void 0!==t?t:Lt,authorizeRequestOnChallenge:null==r?void 0:r.authorizeRequestOnChallenge},r),a=n?function(e,t){let n,i=null,r=null;const o=Object.assign(Object.assign({},Nt),t),s={get isRefreshing(){return null!==i},get shouldRefresh(){var e;return!s.isRefreshing&&(null!==(e=null==r?void 0:r.expiresOnTimestamp)&&void 0!==e?e:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return null===r||r.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function a(t,a){var c;return s.isRefreshing||(i=async function(e,t,n){async function i(){if(!(Date.now()<n)){const t=await e();if(null===t)throw new Error("Failed to refresh access token.");return t}try{return await e()}catch(e){return null}}let r=await i();for(;null===r;)await oe(t),r=await i();return r}((()=>e.getToken(t,a)),o.retryIntervalInMs,null!==(c=null==r?void 0:r.expiresOnTimestamp)&&void 0!==c?c:Date.now()).then((e=>(i=null,r=e,n=a.tenantId,r))).catch((e=>{throw i=null,r=null,n=void 0,e}))),i}return async(e,t)=>n!==t.tenantId||Boolean(t.claims)||s.mustRefresh?a(e,t):(s.shouldRefresh&&a(e,t),r)}(n):()=>Promise.resolve(null);return{name:Mt,async sendRequest(e,t){if(!e.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");let n,r;await s.authorizeRequest({scopes:Array.isArray(i)?i:[i],request:e,getAccessToken:a,logger:o});try{n=await t(e)}catch(e){r=e,n=e.response}if(s.authorizeRequestOnChallenge&&401===(null==n?void 0:n.status)&&function(e){const t=e.headers.get("WWW-Authenticate");if(401===e.status&&t)return t}(n)&&await s.authorizeRequestOnChallenge({scopes:Array.isArray(i)?i:[i],request:e,response:n,getAccessToken:a,logger:o}))return t(e);if(r)throw r;return n}}}const Ft="ndJsonPolicy";function Ut(){return{name:Ft,async sendRequest(e,t){if("string"==typeof e.body&&e.body.startsWith("[")){const t=JSON.parse(e.body);Array.isArray(t)&&(e.body=t.map((e=>JSON.stringify(e)+"\n")).join(""))}return t(e)}}}},65521:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,{signal:n}={}){return new Promise(((i,r)=>{function o(){null==n||n.removeEventListener("abort",o),e.removeListener(t,s),e.removeListener("error",a)}function s(...e){o(),i(e)}function a(e){o(),r(e)}null==n||n.addEventListener("abort",o),e.on(t,s),e.on("error",a)}))}},53173:(e,t,n)=>{var i=n(9779),r=n(73837),o=n(71017),s=n(13685),a=n(95687),c=n(57310).parse,l=n(57147),d=n(12781).Stream,u=n(80983),p=n(59118),h=n(32018);function f(e){if(!(this instanceof f))return new f(e);for(var t in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],i.call(this),e=e||{})this[t]=e[t]}e.exports=f,r.inherits(f,i),f.LINE_BREAK="\r\n",f.DEFAULT_CONTENT_TYPE="application/octet-stream",f.prototype.append=function(e,t,n){"string"==typeof(n=n||{})&&(n={filename:n});var o=i.prototype.append.bind(this);if("number"==typeof t&&(t=""+t),r.isArray(t))this._error(new Error("Arrays are not supported."));else{var s=this._multiPartHeader(e,t,n),a=this._multiPartFooter();o(s),o(t),o(a),this._trackLength(s,t,n)}},f.prototype._trackLength=function(e,t,n){var i=0;null!=n.knownLength?i+=+n.knownLength:Buffer.isBuffer(t)?i=t.length:"string"==typeof t&&(i=Buffer.byteLength(t)),this._valueLength+=i,this._overheadLength+=Buffer.byteLength(e)+f.LINE_BREAK.length,t&&(t.path||t.readable&&t.hasOwnProperty("httpVersion")||t instanceof d)&&(n.knownLength||this._valuesToMeasure.push(t))},f.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?null!=e.end&&e.end!=1/0&&null!=e.start?t(null,e.end+1-(e.start?e.start:0)):l.stat(e.path,(function(n,i){var r;n?t(n):(r=i.size-(e.start?e.start:0),t(null,r))})):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",(function(n){e.pause(),t(null,+n.headers["content-length"])})),e.resume()):t("Unknown stream")},f.prototype._multiPartHeader=function(e,t,n){if("string"==typeof n.header)return n.header;var i,r=this._getContentDisposition(t,n),o=this._getContentType(t,n),s="",a={"Content-Disposition":["form-data",'name="'+e+'"'].concat(r||[]),"Content-Type":[].concat(o||[])};for(var c in"object"==typeof n.header&&h(a,n.header),a)a.hasOwnProperty(c)&&null!=(i=a[c])&&(Array.isArray(i)||(i=[i]),i.length&&(s+=c+": "+i.join("; ")+f.LINE_BREAK));return"--"+this.getBoundary()+f.LINE_BREAK+s+f.LINE_BREAK},f.prototype._getContentDisposition=function(e,t){var n,i;return"string"==typeof t.filepath?n=o.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?n=o.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(n=o.basename(e.client._httpMessage.path||"")),n&&(i='filename="'+n+'"'),i},f.prototype._getContentType=function(e,t){var n=t.contentType;return!n&&e.name&&(n=u.lookup(e.name)),!n&&e.path&&(n=u.lookup(e.path)),!n&&e.readable&&e.hasOwnProperty("httpVersion")&&(n=e.headers["content-type"]),n||!t.filepath&&!t.filename||(n=u.lookup(t.filepath||t.filename)),n||"object"!=typeof e||(n=f.DEFAULT_CONTENT_TYPE),n},f.prototype._multiPartFooter=function(){return function(e){var t=f.LINE_BREAK;0===this._streams.length&&(t+=this._lastBoundary()),e(t)}.bind(this)},f.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+f.LINE_BREAK},f.prototype.getHeaders=function(e){var t,n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(n[t.toLowerCase()]=e[t]);return n},f.prototype.setBoundary=function(e){this._boundary=e},f.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},f.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),n=0,i=this._streams.length;n<i;n++)"function"!=typeof this._streams[n]&&(e=Buffer.isBuffer(this._streams[n])?Buffer.concat([e,this._streams[n]]):Buffer.concat([e,Buffer.from(this._streams[n])]),"string"==typeof this._streams[n]&&this._streams[n].substring(2,t.length+2)===t||(e=Buffer.concat([e,Buffer.from(f.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])},f.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);this._boundary=e},f.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e},f.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},f.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;this._streams.length&&(t+=this._lastBoundary().length),this._valuesToMeasure.length?p.parallel(this._valuesToMeasure,this._lengthRetriever,(function(n,i){n?e(n):(i.forEach((function(e){t+=e})),e(null,t))})):process.nextTick(e.bind(this,null,t))},f.prototype.submit=function(e,t){var n,i,r={method:"post"};return"string"==typeof e?(e=c(e),i=h({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},r)):(i=h(e,r)).port||(i.port="https:"==i.protocol?443:80),i.headers=this.getHeaders(e.headers),n="https:"==i.protocol?a.request(i):s.request(i),this.getLength(function(e,i){if(e&&"Unknown stream"!==e)this._error(e);else if(i&&n.setHeader("Content-Length",i),this.pipe(n),t){var r,o=function(e,i){return n.removeListener("error",o),n.removeListener("response",r),t.call(this,e,i)};r=o.bind(this,null),n.on("error",o),n.on("response",r)}}.bind(this)),n},f.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},f.prototype.toString=function(){return"[object FormData]"}},32018:e=>{e.exports=function(e,t){return Object.keys(t).forEach((function(n){e[n]=e[n]||t[n]})),e}},88192:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(41808)),s=r(n(24404)),a=r(n(57310)),c=r(n(15158)),l=r(n(65521)),d=n(88054),u=(0,c.default)("http-proxy-agent");class p extends d.Agent{constructor(e){let t;if(t="string"==typeof e?a.default.parse(e):e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");u("Creating new HttpProxyAgent instance: %o",t),super(t);const n=Object.assign({},t);var i;this.secureProxy=t.secureProxy||"string"==typeof(i=n.protocol)&&/^https:?$/i.test(i),n.host=n.hostname||n.host,"string"==typeof n.port&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,t){return i(this,void 0,void 0,(function*(){const{proxy:n,secureProxy:i}=this,r=a.default.parse(e.path);let c;if(r.protocol||(r.protocol="http:"),r.hostname||(r.hostname=t.hostname||t.host||null),null==r.port&&(t.port,1)&&(r.port=String(t.port)),"80"===r.port&&(r.port=""),e.path=a.default.format(r),n.auth&&e.setHeader("Proxy-Authorization",`Basic ${Buffer.from(n.auth).toString("base64")}`),i?(u("Creating `tls.Socket`: %o",n),c=s.default.connect(n)):(u("Creating `net.Socket`: %o",n),c=o.default.connect(n)),e._header){let t,n;u("Regenerating stored HTTP header string for request"),e._header=null,e._implicitHeader(),e.output&&e.output.length>0?(u("Patching connection write() output buffer with updated header"),t=e.output[0],n=t.indexOf("\r\n\r\n")+4,e.output[0]=e._header+t.substring(n),u("Output buffer: %o",e.output)):e.outputData&&e.outputData.length>0&&(u("Patching connection write() output buffer with updated header"),t=e.outputData[0].data,n=t.indexOf("\r\n\r\n")+4,e.outputData[0].data=e._header+t.substring(n),u("Output buffer: %o",e.outputData[0].data))}return yield(0,l.default)(c,"connect"),c}))}}t.default=p},74476:function(e,t,n){"use strict";const i=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(88192));function r(e){return new i.default(e)}!function(e){e.HttpProxyAgent=i.default,e.prototype=i.default.prototype}(r||(r={})),e.exports=r},47542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityMonitor=void 0;const i=n(4016);t.ActivityMonitor=class{constructor(e){this._timer=-1,this._timeout=-1,this._isDisposed=!1,this._activityStopped=new i.Signal(this),e.signal.connect(this._onSignalFired,this),this._timeout=e.timeout||1e3}get activityStopped(){return this._activityStopped}get timeout(){return this._timeout}set timeout(e){this._timeout=e}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,i.Signal.clearData(this))}_onSignalFired(e,t){clearTimeout(this._timer),this._sender=e,this._args=t,this._timer=setTimeout((()=>{this._activityStopped.emit({sender:this._sender,args:this._args})}),this._timeout)}}},79622:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(47542),t),r(n(92086),t),r(n(47390),t),r(n(99458),t),r(n(20176),t),r(n(47846),t),r(n(32533),t),r(n(57319),t)},92086:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},47390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarkdownCodeBlocks=void 0,function(e){e.CODE_BLOCK_MARKER="```";const t=[".markdown",".mdown",".mkdn",".md",".mkd",".mdwn",".mdtxt",".mdtext",".text",".txt",".Rmd"];class n{constructor(e){this.startLine=e,this.code="",this.endLine=-1}}e.MarkdownCodeBlock=n,e.isMarkdown=function(e){return t.indexOf(e)>-1},e.findMarkdownCodeBlocks=function(t){if(!t||""===t)return[];const i=t.split("\n"),r=[];let o=null;for(let t=0;t<i.length;t++){const s=i[t],a=0===s.indexOf(e.CODE_BLOCK_MARKER),c=null!=o;if(a||c)if(c)o&&(a?(o.endLine=t-1,r.push(o),o=null):o.code+=s+"\n");else{o=new n(t);const i=s.indexOf(e.CODE_BLOCK_MARKER),a=s.lastIndexOf(e.CODE_BLOCK_MARKER);i!==a&&(o.code=s.substring(i+e.CODE_BLOCK_MARKER.length,a),o.endLine=t,r.push(o),o=null)}}return r}}(t.MarkdownCodeBlocks||(t.MarkdownCodeBlocks={}))},99458:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageConfig=void 0;const coreutils_1=__webpack_require__(66201),minimist_1=__importDefault(__webpack_require__(96562)),url_1=__webpack_require__(57319);var PageConfig;(function(PageConfig){function getOption(name){if(configData)return configData[name]||getBodyData(name);configData=Object.create(null);let found=!1;if("undefined"!=typeof document&&document){const e=document.getElementById("jupyter-config-data");e&&(configData=JSON.parse(e.textContent||""),found=!0)}if(!found&&"undefined"!=typeof process&&process.argv)try{const cli=minimist_1.default(process.argv.slice(2)),path=__webpack_require__(71017);let fullPath="";"jupyter-config-data"in cli?fullPath=path.resolve(cli["jupyter-config-data"]):"JUPYTER_CONFIG_DATA"in process.env&&(fullPath=path.resolve(process.env.JUPYTER_CONFIG_DATA)),fullPath&&(configData=eval("require")(fullPath))}catch(e){console.error(e)}if(coreutils_1.JSONExt.isObject(configData))for(const e in configData)"string"!=typeof configData[e]&&(configData[e]=JSON.stringify(configData[e]));else configData=Object.create(null);return configData[name]||getBodyData(name)}function setOption(e,t){const n=getOption(e);return configData[e]=t,n}function getBaseUrl(){return url_1.URLExt.normalize(getOption("baseUrl")||"/")}function getTreeUrl(){return url_1.URLExt.join(getBaseUrl(),getOption("treeUrl"))}function getShareUrl(){return url_1.URLExt.normalize(getOption("shareUrl")||getBaseUrl())}function getTreeShareUrl(){return url_1.URLExt.normalize(url_1.URLExt.join(getShareUrl(),getOption("treeUrl")))}function getUrl(e){var t,n,i;let r=getOption("baseUrl")||"/";const o=null!==(t=e.mode)&&void 0!==t?t:getOption("mode"),s=null!==(n=e.workspace)&&void 0!==n?n:getOption("workspace"),a="multiple-document"===o?"lab":"doc";r=url_1.URLExt.join(r,a),s!==PageConfig.defaultWorkspace&&(r=url_1.URLExt.join(r,"workspaces",encodeURIComponent(getOption("workspace"))));const c=null!==(i=e.treePath)&&void 0!==i?i:getOption("treePath");return c&&(r=url_1.URLExt.join(r,"tree",url_1.URLExt.encodeParts(c))),r}function getWsUrl(e){let t=getOption("wsUrl");if(!t){if(0!==(e=e?url_1.URLExt.normalize(e):getBaseUrl()).indexOf("http"))return"";t="ws"+e.slice(4)}return url_1.URLExt.normalize(t)}function getNBConvertURL({path:e,format:t,download:n}){const i=url_1.URLExt.encodeParts(e),r=url_1.URLExt.join(getBaseUrl(),"nbconvert",t,i);return n?r+"?download=true":r}function getToken(){return getOption("token")||getBodyData("jupyterApiToken")}function getNotebookVersion(){const e=getOption("notebookVersion");return""===e?[0,0,0]:JSON.parse(e)}PageConfig.getOption=getOption,PageConfig.setOption=setOption,PageConfig.getBaseUrl=getBaseUrl,PageConfig.getTreeUrl=getTreeUrl,PageConfig.getShareUrl=getShareUrl,PageConfig.getTreeShareUrl=getTreeShareUrl,PageConfig.getUrl=getUrl,PageConfig.defaultWorkspace="default",PageConfig.getWsUrl=getWsUrl,PageConfig.getNBConvertURL=getNBConvertURL,PageConfig.getToken=getToken,PageConfig.getNotebookVersion=getNotebookVersion;let configData=null,Extension;function getBodyData(e){if("undefined"==typeof document||!document.body)return"";const t=document.body.dataset[e];return void 0===t?"":decodeURIComponent(t)}!function(e){function t(e){try{const t=getOption(e);if(t)return JSON.parse(t)}catch(t){console.warn(`Unable to parse ${e}.`,t)}return[]}e.deferred=t("deferredExtensions"),e.disabled=t("disabledExtensions"),e.isDeferred=function(t){const n=t.indexOf(":");let i="";return-1!==n&&(i=t.slice(0,n)),e.deferred.some((e=>e===t||i&&e===i))},e.isDisabled=function(t){const n=t.indexOf(":");let i="";return-1!==n&&(i=t.slice(0,n)),e.disabled.some((e=>e===t||i&&e===i))}}(Extension=PageConfig.Extension||(PageConfig.Extension={}))})(PageConfig=exports.PageConfig||(exports.PageConfig={}))},20176:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathExt=void 0;const i=n(71017);!function(e){function t(e){return 0===e.indexOf("/")&&(e=e.slice(1)),e}e.join=function(...e){const n=i.posix.join(...e);return"."===n?"":t(n)},e.basename=function(e,t){return i.posix.basename(e,t)},e.dirname=function(e){const n=t(i.posix.dirname(e));return"."===n?"":n},e.extname=function(e){return i.posix.extname(e)},e.normalize=function(e){return""===e?"":t(i.posix.normalize(e))},e.resolve=function(...e){return t(i.posix.resolve(...e))},e.relative=function(e,n){return t(i.posix.relative(e,n))},e.normalizeExtension=function(e){return e.length>0&&0!==e.indexOf(".")&&(e=`.${e}`),e},e.removeSlash=t}(t.PathExt||(t.PathExt={}))},47846:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0,(n=t.Text||(t.Text={})).jsIndexToCharIndex=function(e,t){return e},n.charIndexToJsIndex=function(e,t){return e},n.camelCase=function(e,t=!1){return e.replace(/^(\w)|[\s-_:]+(\w)/g,(function(e,n,i){return i?i.toUpperCase():t?n.toUpperCase():n.toLowerCase()}))},n.titleCase=function(e){return(e||"").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}},32533:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Time=void 0;const r=i(n(68295));var o;(o=t.Time||(t.Time={})).formatHuman=function(e){r.default.locale(document.documentElement.lang);let t=r.default(e).fromNow();return t="a few seconds ago"===t?"seconds ago":t,t},o.format=function(e,t="YYYY-MM-DD HH:mm"){return r.default(e).format(t)}},57319:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.URLExt=void 0;const r=n(71017),o=i(n(84564));!function(e){function t(e){if("undefined"!=typeof document&&document){const t=document.createElement("a");return t.href=e,t}return o.default(e)}function n(...e){const t=o.default(e[0],{}),n=`${t.protocol}${t.slashes?"//":""}${t.auth}${t.auth?"@":""}${t.host}`,i=r.posix.join(`${n&&"/"!==t.pathname[0]?"/":""}${t.pathname}`,...e.slice(1));return`${n}${"."===i?"":i}`}e.parse=t,e.getHostName=function(e){return o.default(e).hostname},e.normalize=function(e){return e&&t(e).toString()},e.join=n,e.encodeParts=function(e){return n(...e.split("/").map(encodeURIComponent))},e.objectToQueryString=function(e){const t=Object.keys(e).filter((e=>e.length>0));return t.length?"?"+t.map((t=>{const n=encodeURIComponent(String(e[t]));return t+(n?"="+n:"")})).join("&"):""},e.queryStringToObject=function(e){return e.replace(/^\?/,"").split("&").reduce(((e,t)=>{const[n,i]=t.split("=");return n.length>0&&(e[n]=decodeURIComponent(i||"")),e}),{})},e.isLocal=function(e){const{protocol:n}=t(e);return(!n||0!==e.toLowerCase().indexOf(n))&&0!==e.indexOf("/")}}(t.URLExt||(t.URLExt={}))},89525:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataConnector=void 0,t.DataConnector=class{async list(e){throw new Error("DataConnector#list method has not been implemented.")}async remove(e){throw new Error("DataConnector#remove method has not been implemented.")}async save(e,t){throw new Error("DataConnector#save method has not been implemented.")}}},17266:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(89525),t),r(n(14623),t),r(n(51156),t),r(n(64962),t),r(n(7263),t)},14623:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},51156:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestorablePool=void 0;const i=n(66201),r=n(39770),o=n(4016);var s;t.RestorablePool=class{constructor(e){this._added=new o.Signal(this),this._current=null,this._currentChanged=new o.Signal(this),this._hasRestored=!1,this._isDisposed=!1,this._objects=new Set,this._restore=null,this._restored=new i.PromiseDelegate,this._updated=new o.Signal(this),this.namespace=e.namespace}get added(){return this._added}get current(){return this._current}set current(e){this._current!==e&&null!==e&&this._objects.has(e)&&(this._current=e,this._currentChanged.emit(this._current))}get currentChanged(){return this._currentChanged}get isDisposed(){return this._isDisposed}get restored(){return this._restored.promise}get size(){return this._objects.size}get updated(){return this._updated}async add(e){var t,n;if(e.isDisposed){const t="A disposed object cannot be added.";throw console.warn(t,e),new Error(t)}if(this._objects.has(e)){const t="This object already exists in the pool.";throw console.warn(t,e),new Error(t)}if(this._objects.add(e),e.disposed.connect(this._onInstanceDisposed,this),!s.injectedProperty.get(e)){if(this._restore){const{connector:i}=this._restore,r=this._restore.name(e);if(r){const o=`${this.namespace}:${r}`,a=null===(n=(t=this._restore).args)||void 0===n?void 0:n.call(t,e);s.nameProperty.set(e,o),await i.save(o,{data:a})}}this._added.emit(e)}}dispose(){this.isDisposed||(this._current=null,this._isDisposed=!0,this._objects.clear(),o.Signal.clearData(this))}find(e){const t=this._objects.values();for(const n of t)if(e(n))return n}forEach(e){this._objects.forEach(e)}filter(e){const t=[];return this.forEach((n=>{e(n)&&t.push(n)})),t}inject(e){return s.injectedProperty.set(e,!0),this.add(e)}has(e){return this._objects.has(e)}async restore(e){if(this._hasRestored)throw new Error("This pool has already been restored.");this._hasRestored=!0;const{command:t,connector:n,registry:i,when:r}=e,o=this.namespace,s=r?[n.list(o)].concat(r):[n.list(o)];this._restore=e;const[a]=await Promise.all(s),c=await Promise.all(a.ids.map((async(e,r)=>{const o=a.values[r],s=o&&o.data;return void 0===s?n.remove(e):i.execute(t,s).catch((()=>n.remove(e)))})));return this._restored.resolve(),c}async save(e){var t,n;const i=s.injectedProperty.get(e);if(!this._restore||!this.has(e)||i)return;const{connector:r}=this._restore,o=this._restore.name(e),a=s.nameProperty.get(e),c=o?`${this.namespace}:${o}`:"";if(a&&a!==c&&await r.remove(a),s.nameProperty.set(e,c),c){const i=null===(n=(t=this._restore).args)||void 0===n?void 0:n.call(t,e);await r.save(c,{data:i})}a!==c&&this._updated.emit(e)}_onInstanceDisposed(e){if(this._objects.delete(e),e===this._current&&(this._current=null,this._currentChanged.emit(this._current)),s.injectedProperty.get(e))return;if(!this._restore)return;const{connector:t}=this._restore,n=s.nameProperty.get(e);n&&t.remove(n)}},function(e){e.injectedProperty=new r.AttachedProperty({name:"injected",create:()=>!1}),e.nameProperty=new r.AttachedProperty({name:"name",create:()=>""})}(s||(s={}))},64962:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateDB=void 0;const i=n(4016);class r{constructor(e={}){this._changed=new i.Signal(this);const{connector:t,transform:n}=e;this._connector=t||new r.Connector,this._ready=n?n.then((e=>{const{contents:t,type:n}=e;switch(n){case"cancel":default:return;case"clear":return this._clear();case"merge":return this._merge(t||{});case"overwrite":return this._overwrite(t||{})}})):Promise.resolve(void 0)}get changed(){return this._changed}async clear(){await this._ready,await this._clear()}async fetch(e){return await this._ready,this._fetch(e)}async list(e){return await this._ready,this._list(e)}async remove(e){await this._ready,await this._remove(e),this._changed.emit({id:e,type:"remove"})}async save(e,t){await this._ready,await this._save(e,t),this._changed.emit({id:e,type:"save"})}async toJSON(){await this._ready;const{ids:e,values:t}=await this._list();return t.reduce(((t,n,i)=>(t[e[i]]=n,t)),{})}async _clear(){await Promise.all((await this._list()).ids.map((e=>this._remove(e))))}async _fetch(e){const t=await this._connector.fetch(e);if(t)return JSON.parse(t).v}async _list(e=""){const{ids:t,values:n}=await this._connector.list(e);return{ids:t,values:n.map((e=>JSON.parse(e).v))}}async _merge(e){await Promise.all(Object.keys(e).map((t=>e[t]&&this._save(t,e[t]))))}async _overwrite(e){await this._clear(),await this._merge(e)}async _remove(e){return this._connector.remove(e)}async _save(e,t){return this._connector.save(e,JSON.stringify({v:t}))}}t.StateDB=r,function(e){e.Connector=class{constructor(){this._storage={}}async fetch(e){return this._storage[e]}async list(e=""){return Object.keys(this._storage).reduce(((t,n)=>(""!==e&&e!==n.split(":")[0]||(t.ids.push(n),t.values.push(this._storage[n])),t)),{ids:[],values:[]})}async remove(e){delete this._storage[e]}async save(e,t){this._storage[e]=t}}}(r=t.StateDB||(t.StateDB={}))},7263:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IStateDB=void 0;const i=n(66201);t.IStateDB=new i.Token("@jupyterlab/coreutils:IStateDB")},35259:(e,t,n)=>{"use strict";var i;function r(e){return"function"==typeof e.iter?e.iter():new f(e)}function o(e){return new m(e)}function s(e){return new g(e)}function a(e){return new v(e)}function c(e){return new y(e)}function l(e,t){for(var n,i=0,o=r(e);void 0!==(n=o.next());)if(!1===t(n,i++))return}function d(e,t){for(var n,i=0,o=r(e);void 0!==(n=o.next());)if(!t(n,i++))return!1;return!0}function u(e,t){for(var n,i=0,o=r(e);void 0!==(n=o.next());)if(t(n,i++))return!0;return!1}function p(e){for(var t,n=0,i=[],o=r(e);void 0!==(t=o.next());)i[n++]=t;return i}function h(e){for(var t,n=r(e),i={};void 0!==(t=n.next());)i[t[0]]=t[1];return i}n.r(t),n.d(t,{ArrayExt:()=>i,ArrayIterator:()=>f,ChainIterator:()=>w,EmptyIterator:()=>S,EnumerateIterator:()=>k,FilterIterator:()=>x,FnIterator:()=>y,ItemIterator:()=>v,KeyIterator:()=>m,MapIterator:()=>A,RangeIterator:()=>L,RepeatIterator:()=>q,RetroArrayIterator:()=>V,StrideIterator:()=>H,StringExt:()=>B,TakeIterator:()=>J,ValueIterator:()=>g,ZipIterator:()=>Y,chain:()=>b,each:()=>l,empty:()=>_,enumerate:()=>C,every:()=>d,filter:()=>E,find:()=>T,findIndex:()=>P,iter:()=>r,iterFn:()=>c,iterItems:()=>a,iterKeys:()=>o,iterValues:()=>s,map:()=>O,max:()=>D,min:()=>I,minmax:()=>R,once:()=>U,range:()=>N,reduce:()=>j,repeat:()=>F,retro:()=>K,some:()=>u,stride:()=>$,take:()=>z,toArray:()=>p,toObject:()=>h,topologicSort:()=>W,zip:()=>G}),function(e){function t(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r,o=e.length;if(0===o)return-1;n=n<0?Math.max(0,n+o):Math.min(n,o-1),r=(i=i<0?Math.max(0,i+o):Math.min(i,o-1))<n?i+1+(o-n):i-n+1;for(var s=0;s<r;++s){var a=(n+s)%o;if(e[a]===t)return a}return-1}function n(e,t,n,i){void 0===n&&(n=-1),void 0===i&&(i=0);var r,o=e.length;if(0===o)return-1;r=(n=n<0?Math.max(0,n+o):Math.min(n,o-1))<(i=i<0?Math.max(0,i+o):Math.min(i,o-1))?n+1+(o-i):n-i+1;for(var s=0;s<r;++s){var a=(n-s+o)%o;if(e[a]===t)return a}return-1}function i(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r,o=e.length;if(0===o)return-1;n=n<0?Math.max(0,n+o):Math.min(n,o-1),r=(i=i<0?Math.max(0,i+o):Math.min(i,o-1))<n?i+1+(o-n):i-n+1;for(var s=0;s<r;++s){var a=(n+s)%o;if(t(e[a],a))return a}return-1}function r(e,t,n,i){void 0===n&&(n=-1),void 0===i&&(i=0);var r,o=e.length;if(0===o)return-1;r=(n=n<0?Math.max(0,n+o):Math.min(n,o-1))<(i=i<0?Math.max(0,i+o):Math.min(i,o-1))?n+1+(o-i):n-i+1;for(var s=0;s<r;++s){var a=(n-s+o)%o;if(t(e[a],a))return a}return-1}function o(e,t,n){void 0===t&&(t=0),void 0===n&&(n=-1);var i=e.length;if(!(i<=1))for(t=t<0?Math.max(0,t+i):Math.min(t,i-1),n=n<0?Math.max(0,n+i):Math.min(n,i-1);t<n;){var r=e[t],o=e[n];e[t++]=o,e[n--]=r}}function s(e,t){var n=e.length;if(t<0&&(t+=n),!(t<0||t>=n)){for(var i=e[t],r=t+1;r<n;++r)e[r-1]=e[r];return e.length=n-1,i}}e.firstIndexOf=t,e.lastIndexOf=n,e.findFirstIndex=i,e.findLastIndex=r,e.findFirstValue=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var o=i(e,t,n,r);return-1!==o?e[o]:void 0},e.findLastValue=function(e,t,n,i){void 0===n&&(n=-1),void 0===i&&(i=0);var o=r(e,t,n,i);return-1!==o?e[o]:void 0},e.lowerBound=function(e,t,n,i,r){void 0===i&&(i=0),void 0===r&&(r=-1);var o=e.length;if(0===o)return 0;for(var s=i=i<0?Math.max(0,i+o):Math.min(i,o-1),a=(r=r<0?Math.max(0,r+o):Math.min(r,o-1))-i+1;a>0;){var c=a>>1,l=s+c;n(e[l],t)<0?(s=l+1,a-=c+1):a=c}return s},e.upperBound=function(e,t,n,i,r){void 0===i&&(i=0),void 0===r&&(r=-1);var o=e.length;if(0===o)return 0;for(var s=i=i<0?Math.max(0,i+o):Math.min(i,o-1),a=(r=r<0?Math.max(0,r+o):Math.min(r,o-1))-i+1;a>0;){var c=a>>1,l=s+c;n(e[l],t)>0?a=c:(s=l+1,a-=c+1)}return s},e.shallowEqual=function(e,t,n){if(e===t)return!0;if(e.length!==t.length)return!1;for(var i=0,r=e.length;i<r;++i)if(n?!n(e[i],t[i]):e[i]!==t[i])return!1;return!0},e.slice=function(e,t){void 0===t&&(t={});var n=t.start,i=t.stop,r=t.step;if(void 0===r&&(r=1),0===r)throw new Error("Slice `step` cannot be zero.");var o,s=e.length;void 0===n?n=r<0?s-1:0:n<0?n=Math.max(n+s,r<0?-1:0):n>=s&&(n=r<0?s-1:s),void 0===i?i=r<0?-1:s:i<0?i=Math.max(i+s,r<0?-1:0):i>=s&&(i=r<0?s-1:s),o=r<0&&i>=n||r>0&&n>=i?0:r<0?Math.floor((i-n+1)/r+1):Math.floor((i-n-1)/r+1);for(var a=[],c=0;c<o;++c)a[c]=e[n+c*r];return a},e.move=function(e,t,n){var i=e.length;if(!(i<=1)&&(t=t<0?Math.max(0,t+i):Math.min(t,i-1))!==(n=n<0?Math.max(0,n+i):Math.min(n,i-1))){for(var r=e[t],o=t<n?1:-1,s=t;s!==n;s+=o)e[s]=e[s+o];e[n]=r}},e.reverse=o,e.rotate=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r=e.length;if(!(r<=1||(n=n<0?Math.max(0,n+r):Math.min(n,r-1))>=(i=i<0?Math.max(0,i+r):Math.min(i,r-1)))){var s=i-n+1;if(t>0?t%=s:t<0&&(t=(t%s+s)%s),0!==t){var a=n+t;o(e,n,a-1),o(e,a,i),o(e,n,i)}}},e.fill=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r=e.length;if(0!==r){var o;n=n<0?Math.max(0,n+r):Math.min(n,r-1),o=(i=i<0?Math.max(0,i+r):Math.min(i,r-1))<n?i+1+(r-n):i-n+1;for(var s=0;s<o;++s)e[(n+s)%r]=t}},e.insert=function(e,t,n){var i=e.length;t=t<0?Math.max(0,t+i):Math.min(t,i);for(var r=i;r>t;--r)e[r]=e[r-1];e[t]=n},e.removeAt=s,e.removeFirstOf=function(e,n,i,r){void 0===i&&(i=0),void 0===r&&(r=-1);var o=t(e,n,i,r);return-1!==o&&s(e,o),o},e.removeLastOf=function(e,t,i,r){void 0===i&&(i=-1),void 0===r&&(r=0);var o=n(e,t,i,r);return-1!==o&&s(e,o),o},e.removeAllOf=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r=e.length;if(0===r)return 0;n=n<0?Math.max(0,n+r):Math.min(n,r-1),i=i<0?Math.max(0,i+r):Math.min(i,r-1);for(var o=0,s=0;s<r;++s)n<=i&&s>=n&&s<=i&&e[s]===t||i<n&&(s<=i||s>=n)&&e[s]===t?o++:o>0&&(e[s-o]=e[s]);return o>0&&(e.length=r-o),o},e.removeFirstWhere=function(e,t,n,r){var o;void 0===n&&(n=0),void 0===r&&(r=-1);var a=i(e,t,n,r);return-1!==a&&(o=s(e,a)),{index:a,value:o}},e.removeLastWhere=function(e,t,n,i){var o;void 0===n&&(n=-1),void 0===i&&(i=0);var a=r(e,t,n,i);return-1!==a&&(o=s(e,a)),{index:a,value:o}},e.removeAllWhere=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r=e.length;if(0===r)return 0;n=n<0?Math.max(0,n+r):Math.min(n,r-1),i=i<0?Math.max(0,i+r):Math.min(i,r-1);for(var o=0,s=0;s<r;++s)n<=i&&s>=n&&s<=i&&t(e[s],s)||i<n&&(s<=i||s>=n)&&t(e[s],s)?o++:o>0&&(e[s-o]=e[s]);return o>0&&(e.length=r-o),o}}(i||(i={}));var f=function(){function e(e){this._index=0,this._source=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},e}(),m=function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},e}(),g=function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},e}(),v=function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},e}(),y=function(){function e(e){this._fn=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},e.prototype.next=function(){return this._fn.call(void 0)},e}();function b(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new w(r(e.map(r)))}var w=function(){function e(e){this._cloned=!1,this._source=e,this._active=void 0}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone());return t._active=this._active&&this._active.clone(),t._cloned=!0,this._cloned=!0,t},e.prototype.next=function(){if(void 0===this._active){var e=this._source.next();if(void 0===e)return;this._active=this._cloned?e.clone():e}var t=this._active.next();return void 0!==t?t:(this._active=void 0,this.next())},e}();function _(){return new S}var S=function(){function e(){}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e},e.prototype.next=function(){},e}();function C(e,t){return void 0===t&&(t=0),new k(r(e),t)}var k=function(){function e(e,t){this._source=e,this._index=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._index)},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return[this._index++,e]},e}();function E(e,t){return new x(r(e),t)}var x=function(){function e(e,t){this._index=0,this._source=e,this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){for(var e,t=this._fn,n=this._source;void 0!==(e=n.next());)if(t(e,this._index++))return e},e}();function T(e,t){for(var n,i=0,o=r(e);void 0!==(n=o.next());)if(t(n,i++))return n}function P(e,t){for(var n,i=0,o=r(e);void 0!==(n=o.next());)if(t(n,i++))return i-1;return-1}function I(e,t){var n=r(e),i=n.next();if(void 0!==i){for(var o=i;void 0!==(i=n.next());)t(i,o)<0&&(o=i);return o}}function D(e,t){var n=r(e),i=n.next();if(void 0!==i){for(var o=i;void 0!==(i=n.next());)t(i,o)>0&&(o=i);return o}}function R(e,t){var n=r(e),i=n.next();if(void 0!==i){for(var o=i,s=i;void 0!==(i=n.next());)t(i,o)<0?o=i:t(i,s)>0&&(s=i);return[o,s]}}function O(e,t){return new A(r(e),t)}var A=function(){function e(e,t){this._index=0,this._source=e,this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return this._fn.call(void 0,e,this._index++)},e}();function N(e,t,n){return void 0===t?new L(0,e,1):new L(e,t,void 0===n?1:n)}var M,L=function(){function e(e,t,n){this._index=0,this._start=e,this._stop=t,this._step=n,this._length=M.rangeLength(e,t,n)}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._start,this._stop,this._step);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},e}();function j(e,t,n){var i=0,o=r(e),s=o.next();if(void 0===s&&void 0===n)throw new TypeError("Reduce of empty iterable with no initial value.");if(void 0===s)return n;var a,c,l=o.next();if(void 0===l&&void 0===n)return s;if(void 0===l)return t(n,s,i++);for(a=t(void 0===n?s:t(n,s,i++),l,i++);void 0!==(c=o.next());)a=t(a,c,i++);return a}function F(e,t){return new q(e,t)}function U(e){return new q(e,1)}!function(e){e.rangeLength=function(e,t,n){return 0===n?1/0:e>t&&n>0||e<t&&n<0?0:Math.ceil((t-e)/n)}}(M||(M={}));var q=function(){function e(e,t){this._value=e,this._count=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._value,this._count)},e.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},e}();function K(e){return"function"==typeof e.retro?e.retro():new V(e)}var V=function(){function e(e){this._source=e,this._index=e.length-1}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},e}();function W(e){var t=[],n=new Set,i=new Map;return l(e,(function(e){var t=e[0],n=e[1],r=i.get(n);r?r.push(t):i.set(n,[t])})),i.forEach((function(e,t){r(t)})),t;function r(e){if(!n.has(e)){n.add(e);var o=i.get(e);o&&o.forEach(r),t.push(e)}}}function $(e,t){return new H(r(e),t)}var B,H=function(){function e(e,t){this._source=e,this._step=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._step)},e.prototype.next=function(){for(var e=this._source.next(),t=this._step-1;t>0;--t)this._source.next();return e},e}();function z(e,t){return new J(r(e),t)}!function(e){function t(e,t,n){void 0===n&&(n=0);for(var i=new Array(t.length),r=0,o=n,s=t.length;r<s;++r,++o){if(-1===(o=e.indexOf(t[r],o)))return null;i[r]=o}return i}e.findIndices=t,e.matchSumOfSquares=function(e,n,i){void 0===i&&(i=0);var r=t(e,n,i);if(!r)return null;for(var o=0,s=0,a=r.length;s<a;++s){var c=r[s]-i;o+=c*c}return{score:o,indices:r}},e.matchSumOfDeltas=function(e,n,i){void 0===i&&(i=0);var r=t(e,n,i);if(!r)return null;for(var o=0,s=i-1,a=0,c=r.length;a<c;++a){var l=r[a];o+=l-s-1,s=l}return{score:o,indices:r}},e.highlight=function(e,t,n){for(var i=[],r=0,o=0,s=t.length;r<s;){for(var a=t[r],c=t[r];++r<s&&t[r]===c+1;)c++;o<a&&i.push(e.slice(o,a)),a<c+1&&i.push(n(e.slice(a,c+1))),o=c+1}return o<e.length&&i.push(e.slice(o)),i},e.cmp=function(e,t){return e<t?-1:e>t?1:0}}(B||(B={}));var J=function(){function e(e,t){this._source=e,this._count=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._count)},e.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(void 0!==e)return this._count--,e}},e}();function G(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Y(e.map(r))}var Y=function(){function e(e){this._source=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.map((function(e){return e.clone()})))},e.prototype.next=function(){for(var e=new Array(this._source.length),t=0,n=this._source.length;t<n;++t){var i=this._source[t].next();if(void 0===i)return;e[t]=i}return e},e}()},66201:(e,t,n)=>{"use strict";var i;n.r(t),n.d(t,{JSONExt:()=>i,MimeData:()=>s,PromiseDelegate:()=>a,Random:()=>r,Token:()=>c,UUID:()=>o}),function(e){function t(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e}function n(e){return Array.isArray(e)}e.emptyObject=Object.freeze({}),e.emptyArray=Object.freeze([]),e.isPrimitive=t,e.isArray=n,e.isObject=function(e){return!t(e)&&!n(e)},e.deepEqual=function e(i,r){if(i===r)return!0;if(t(i)||t(r))return!1;var o=n(i),s=n(r);return o===s&&(o&&s?function(t,n){if(t===n)return!0;if(t.length!==n.length)return!1;for(var i=0,r=t.length;i<r;++i)if(!e(t[i],n[i]))return!1;return!0}(i,r):function(t,n){if(t===n)return!0;for(var i in t)if(void 0!==t[i]&&!(i in n))return!1;for(var i in n)if(void 0!==n[i]&&!(i in t))return!1;for(var i in t){var r=t[i],o=n[i];if(void 0!==r||void 0!==o){if(void 0===r||void 0===o)return!1;if(!e(r,o))return!1}}return!0}(i,r))},e.deepCopy=function e(i){return t(i)?i:n(i)?function(t){for(var n=new Array(t.length),i=0,r=t.length;i<r;++i)n[i]=e(t[i]);return n}(i):function(t){var n={};for(var i in t){var r=t[i];void 0!==r&&(n[i]=e(r))}return n}(i)}}(i||(i={}));var r,o,s=function(){function e(){this._types=[],this._values=[]}return e.prototype.types=function(){return this._types.slice()},e.prototype.hasData=function(e){return-1!==this._types.indexOf(e)},e.prototype.getData=function(e){var t=this._types.indexOf(e);return-1!==t?this._values[t]:void 0},e.prototype.setData=function(e,t){this.clearData(e),this._types.push(e),this._values.push(t)},e.prototype.clearData=function(e){var t=this._types.indexOf(e);-1!==t&&(this._types.splice(t,1),this._values.splice(t,1))},e.prototype.clear=function(){this._types.length=0,this._values.length=0},e}(),a=function(){function e(){var e=this;this.promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return e.prototype.resolve=function(e){(0,this._resolve)(e)},e.prototype.reject=function(e){(0,this._reject)(e)},e}(),c=function(e){this.name=e,this._tokenStructuralPropertyT=null};function l(e){for(var t=0,n=0,i=e.length;n<i;++n)n%4==0&&(t=4294967295*Math.random()>>>0),e[n]=255&t,t>>>=8}!function(e){e.getRandomValues=function(){var e="undefined"!=typeof window&&(window.crypto||window.msCrypto)||null;return e&&"function"==typeof e.getRandomValues?function(t){return e.getRandomValues(t)}:l}()}(r||(r={})),function(e){e.uuid4=function(e){for(var t=new Uint8Array(16),n=new Array(256),i=0;i<16;++i)n[i]="0"+i.toString(16);for(i=16;i<256;++i)n[i]=i.toString(16);return function(){return e(t),t[6]=64|15&t[6],t[8]=128|63&t[8],n[t[0]]+n[t[1]]+n[t[2]]+n[t[3]]+"-"+n[t[4]]+n[t[5]]+"-"+n[t[6]]+n[t[7]]+"-"+n[t[8]]+n[t[9]]+"-"+n[t[10]]+n[t[11]]+n[t[12]]+n[t[13]]+n[t[14]]+n[t[15]]}}(r.getRandomValues)}(o||(o={}))},70725:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DisposableDelegate:()=>a,DisposableSet:()=>l,ObservableDisposableDelegate:()=>c,ObservableDisposableSet:()=>d});var i=n(35259),r=n(4016),o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){function e(e){this._fn=e}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){if(this._fn){var e=this._fn;this._fn=null,e()}},e}(),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._disposed=new r.Signal(t),t}return s(t,e),Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(e.prototype.dispose.call(this),this._disposed.emit(void 0),r.Signal.clearData(this))},t}(a),l=function(){function e(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach((function(e){e.dispose()})),this._items.clear())},e.prototype.contains=function(e){return this._items.has(e)},e.prototype.add=function(e){this._items.add(e)},e.prototype.remove=function(e){this._items.delete(e)},e.prototype.clear=function(){this._items.clear()},e}();!function(e){e.from=function(t){var n=new e;return(0,i.each)(t,(function(e){n.add(e)})),n}}(l||(l={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._disposed=new r.Signal(t),t}return s(t,e),Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(e.prototype.dispose.call(this),this._disposed.emit(void 0),r.Signal.clearData(this))},t}(l);!function(e){e.from=function(t){var n=new e;return(0,i.each)(t,(function(e){n.add(e)})),n}}(d||(d={}))},23114:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Debouncer:()=>m,Poll:()=>h,RateLimiter:()=>f,Throttler:()=>g});var i=n(66201),r=n(4016),o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)};function c(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function l(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var d,u="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate,p="function"==typeof cancelAnimationFrame?cancelAnimationFrame:clearImmediate,h=function(){function e(e){var t=this;this._disposed=new r.Signal(this),this._tick=new i.PromiseDelegate,this._ticked=new r.Signal(this),this._timeout=-1,this._factory=e.factory,this._standby=e.standby||d.DEFAULT_STANDBY,this._state=a(a({},d.DEFAULT_STATE),{timestamp:(new Date).getTime()});var n=e.frequency||{},o=Math.max(n.interval||0,n.max||0,d.DEFAULT_FREQUENCY.max);this.frequency=a(a(a({},d.DEFAULT_FREQUENCY),n),{max:o}),this.name=e.name||d.DEFAULT_NAME,"auto"in e&&!e.auto||u((function(){t.start()}))}return Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frequency",{get:function(){return this._frequency},set:function(t){if(!this.isDisposed&&!i.JSONExt.deepEqual(t,this.frequency||{})){var n=t.backoff,r=t.interval,o=t.max;if(r=Math.round(r),o=Math.round(o),"number"==typeof n&&n<1)throw new Error("Poll backoff growth factor must be at least 1");if((r<0||r>o)&&r!==e.NEVER)throw new Error("Poll interval must be between 0 and max");if(o>e.MAX_INTERVAL&&o!==e.NEVER)throw new Error("Max interval must be less than "+e.MAX_INTERVAL);this._frequency={backoff:n,interval:r,max:o}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisposed",{get:function(){return"disposed"===this.state.phase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"standby",{get:function(){return this._standby},set:function(e){this.isDisposed||this.standby===e||(this._standby=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tick",{get:function(){return this._tick.promise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ticked",{get:function(){return this._ticked},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(this._state=a(a({},d.DISPOSED_STATE),{timestamp:(new Date).getTime()}),this._tick.promise.catch((function(e){})),this._tick.reject(new Error("Poll ("+this.name+") is disposed.")),this._disposed.emit(void 0),r.Signal.clearData(this))},e.prototype.refresh=function(){return this.schedule({cancel:function(e){return"refreshed"===e.phase},interval:e.IMMEDIATE,phase:"refreshed"})},e.prototype.schedule=function(t){return void 0===t&&(t={}),c(this,void 0,void 0,(function(){var n,r,o,s,c,d=this;return l(this,(function(l){switch(l.label){case 0:return this.isDisposed||t.cancel&&t.cancel(this.state)?[2]:(n=this.state,r=this._tick,o=new i.PromiseDelegate,s=a({interval:this.frequency.interval,payload:null,phase:"standby",timestamp:(new Date).getTime()},t),this._state=s,this._tick=o,n.interval===e.IMMEDIATE?p(this._timeout):clearTimeout(this._timeout),this._ticked.emit(this.state),r.resolve(this),[4,r.promise]);case 1:return l.sent(),c=function(){d.isDisposed||d.tick!==o.promise||d._execute()},this._timeout=s.interval===e.IMMEDIATE?u(c):s.interval===e.NEVER?-1:setTimeout(c,s.interval),[2]}}))}))},e.prototype.start=function(){return this.schedule({cancel:function(e){var t=e.phase;return"constructed"!==t&&"standby"!==t&&"stopped"!==t},interval:e.IMMEDIATE,phase:"started"})},e.prototype.stop=function(){return this.schedule({cancel:function(e){return"stopped"===e.phase},interval:e.NEVER,phase:"stopped"})},e.prototype._execute=function(){var e=this,t="function"==typeof this.standby?this.standby():this.standby;if(t="never"!==t&&("when-hidden"===t?!("undefined"==typeof document||!document||!document.hidden):t))this.schedule();else{var n=this.tick;this._factory(this.state).then((function(t){e.isDisposed||e.tick!==n||e.schedule({payload:t,phase:"rejected"===e.state.phase?"reconnected":"resolved"})})).catch((function(t){e.isDisposed||e.tick!==n||e.schedule({interval:d.sleep(e.frequency,e.state),payload:t,phase:"rejected"})}))}},e}();!function(e){e.IMMEDIATE=0,e.MAX_INTERVAL=2147483647,e.NEVER=1/0}(h||(h={})),function(e){e.DEFAULT_BACKOFF=3,e.DEFAULT_FREQUENCY={backoff:!0,interval:1e3,max:3e4},e.DEFAULT_NAME="unknown",e.DEFAULT_STANDBY="when-hidden",e.DEFAULT_STATE={interval:h.NEVER,payload:null,phase:"constructed",timestamp:new Date(0).getTime()},e.DISPOSED_STATE={interval:h.NEVER,payload:null,phase:"disposed",timestamp:new Date(0).getTime()},e.sleep=function(t,n){var i=t.backoff,r=t.interval,o=t.max;if(r===h.NEVER)return r;var s=!0===i?e.DEFAULT_BACKOFF:!1===i?1:i,a=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}(r,n.interval*s);return Math.min(o,a)}}(d||(d={}));var f=function(){function e(e,t){var n=this;void 0===t&&(t=500),this.payload=null,this.limit=t,this.poll=new h({auto:!1,factory:function(){return c(n,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return[4,e()];case 1:return[2,t.sent()]}}))}))},frequency:{backoff:!1,interval:h.NEVER,max:h.NEVER},standby:"never"}),this.payload=new i.PromiseDelegate,this.poll.ticked.connect((function(e,t){var r=n.payload;return"resolved"===t.phase?(n.payload=new i.PromiseDelegate,void r.resolve(t.payload)):"rejected"===t.phase||"stopped"===t.phase?(n.payload=new i.PromiseDelegate,r.promise.catch((function(e){})),void r.reject(t.payload)):void 0}),this)}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return null===this.payload},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(this.payload=null,this.poll.dispose())},e.prototype.stop=function(){return c(this,void 0,void 0,(function(){return l(this,(function(e){return[2,this.poll.stop()]}))}))},e}(),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.invoke=function(){return this.poll.schedule({interval:this.limit,phase:"invoked"}),this.payload.promise},t}(f),g=function(e){function t(t,n){var i=e.call(this,t,"number"==typeof n?n:n&&n.limit)||this,r="leading";return"number"!=typeof n&&(r="edge"in(n=n||{})?n.edge:r),i._interval="trailing"===r?i.limit:h.IMMEDIATE,i}return s(t,e),t.prototype.invoke=function(){return"invoked"!==this.poll.state.phase&&this.poll.schedule({interval:this._interval,phase:"invoked"}),this.payload.promise},t}(f)},39770:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AttachedProperty:()=>r});var i,r=function(){function e(e){this._pid=i.nextPID(),this.name=e.name,this._create=e.create,this._coerce=e.coerce||null,this._compare=e.compare||null,this._changed=e.changed||null}return e.prototype.get=function(e){var t=i.ensureMap(e);return this._pid in t?t[this._pid]:t[this._pid]=this._createValue(e)},e.prototype.set=function(e,t){var n,r=i.ensureMap(e);n=this._pid in r?r[this._pid]:r[this._pid]=this._createValue(e);var o=this._coerceValue(e,t);this._maybeNotify(e,n,r[this._pid]=o)},e.prototype.coerce=function(e){var t,n=i.ensureMap(e);t=this._pid in n?n[this._pid]:n[this._pid]=this._createValue(e);var r=this._coerceValue(e,t);this._maybeNotify(e,t,n[this._pid]=r)},e.prototype._createValue=function(e){return(0,this._create)(e)},e.prototype._coerceValue=function(e,t){var n=this._coerce;return n?n(e,t):t},e.prototype._compareValue=function(e,t){var n=this._compare;return n?n(e,t):e===t},e.prototype._maybeNotify=function(e,t,n){var i=this._changed;i&&!this._compareValue(t,n)&&i(e,t,n)},e}();!function(e){e.clearData=function(e){i.ownerData.delete(e)}}(r||(r={})),function(e){var t;e.ownerData=new WeakMap,e.nextPID=(t=0,function(){return"pid-"+(""+Math.random()).slice(2)+"-"+t++}),e.ensureMap=function(t){var n=e.ownerData.get(t);return n||(n=Object.create(null),e.ownerData.set(t,n),n)}}(i||(i={}))},4016:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Signal:()=>s});var i,r=n(35259),o=n(39770),s=function(){function e(e){this._blockedCount=0,this.sender=e}return e.prototype.block=function(e){this._blockedCount++;try{e()}finally{this._blockedCount--}},e.prototype.connect=function(e,t){return i.connect(this,e,t)},e.prototype.disconnect=function(e,t){return i.disconnect(this,e,t)},e.prototype.emit=function(e){this._blockedCount||i.emit(this,e)},e}();!function(e){e.blockAll=function(e,t){var n=i.blockedProperty;n.set(e,n.get(e)+1);try{t()}finally{n.set(e,n.get(e)-1)}},e.disconnectBetween=function(e,t){i.disconnectBetween(e,t)},e.disconnectSender=function(e){i.disconnectSender(e)},e.disconnectReceiver=function(e){i.disconnectReceiver(e)},e.disconnectAll=function(e){i.disconnectAll(e)},e.clearData=function(e){i.disconnectAll(e)},e.getExceptionHandler=function(){return i.exceptionHandler},e.setExceptionHandler=function(e){var t=i.exceptionHandler;return i.exceptionHandler=e,t}}(s||(s={})),function(e){function t(e){var t=i.get(e);t&&0!==t.length&&((0,r.each)(t,(function(e){if(e.signal){var t=e.thisArg||e.slot;e.signal=null,u(s.get(t))}})),u(t))}function n(e){var t=s.get(e);t&&0!==t.length&&((0,r.each)(t,(function(e){if(e.signal){var t=e.signal.sender;e.signal=null,u(i.get(t))}})),u(t))}e.exceptionHandler=function(e){console.error(e)},e.connect=function(e,t,n){n=n||void 0;var r=i.get(e.sender);if(r||(r=[],i.set(e.sender,r)),l(r,e,t,n))return!1;var o=n||t,a=s.get(o);a||(a=[],s.set(o,a));var c={signal:e,slot:t,thisArg:n};return r.push(c),a.push(c),!0},e.disconnect=function(e,t,n){n=n||void 0;var r=i.get(e.sender);if(!r||0===r.length)return!1;var o=l(r,e,t,n);if(!o)return!1;var a=n||t,c=s.get(a);return o.signal=null,u(r),u(c),!0},e.disconnectBetween=function(e,t){var n=i.get(e);if(n&&0!==n.length){var o=s.get(t);o&&0!==o.length&&((0,r.each)(o,(function(t){t.signal&&t.signal.sender===e&&(t.signal=null)})),u(n),u(o))}},e.disconnectSender=t,e.disconnectReceiver=n,e.disconnectAll=function(e){t(e),n(e)},e.emit=function(t,n){if(!(e.blockedProperty.get(t.sender)>0)){var r=i.get(t.sender);if(r&&0!==r.length)for(var o=0,s=r.length;o<s;++o){var a=r[o];a.signal===t&&d(a,n)}}};var i=new WeakMap,s=new WeakMap,a=new Set,c="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate;function l(e,t,n,i){return(0,r.find)(e,(function(e){return e.signal===t&&e.slot===n&&e.thisArg===i}))}function d(t,n){var i=t.signal,r=t.slot,o=t.thisArg;try{r.call(o,i.sender,n)}catch(t){e.exceptionHandler(t)}}function u(e){0===a.size&&c(p),a.add(e)}function p(){a.forEach(h),a.clear()}function h(e){r.ArrayExt.removeAllWhere(e,f)}function f(e){return null===e.signal}e.blockedProperty=new o.AttachedProperty({name:"blocked",create:function(){return 0}})}(i||(i={}))},67164:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AppInsightsCore:()=>se,BaseCore:()=>ce,BaseTelemetryPlugin:()=>$.i,CoreUtils:()=>re.Tr,DiagnosticLogger:()=>R.AQ,ESPromise:()=>ue,ESPromiseScheduler:()=>ve,EventHelper:()=>_e.zB,EventLatency:()=>E,EventPersistence:()=>T,EventPropertyType:()=>x,EventsDiscardedReason:()=>we.h,FullVersionString:()=>re.vs,InternalAppInsightsCore:()=>ne,InternalBaseCore:()=>Z,LoggingSeverity:()=>S,MinChannelPriorty:()=>be,NotificationManager:()=>te,PerfEvent:()=>O.zn,PerfManager:()=>O.Jk,ProcessTelemetryContext:()=>j.Vi,TraceLevel:()=>P,Undefined:()=>ke.jA,Utils:()=>re.cQ,ValueKind:()=>k,ValueSanitizer:()=>ye,Version:()=>re.Gf,_ExtendedInternalMessageId:()=>I,_InternalLogMessage:()=>R.lQ,_InternalMessageId:()=>C,__getRegisteredEvents:()=>Se.um,_logInternalMessage:()=>R.L4,_throwInternal:()=>R.kP,_warnToConsole:()=>R.jV,addEventHandler:()=>Se.Ib,addEventListeners:()=>Se.yw,addPageHideEventListener:()=>Se.TJ,addPageShowEventListener:()=>Se.nD,addPageUnloadEventListener:()=>Se.c9,areCookiesSupported:()=>K.p7,arrForEach:()=>s.tO,arrIndexOf:()=>s.UA,arrMap:()=>s.Mr,arrReduce:()=>s.Xz,attachEvent:()=>Se.pZ,cookieAvailable:()=>K.p7,createCookieMgr:()=>K.Nz,createEnumStyle:()=>o.By,createGuid:()=>re.cm,createProcessTelemetryContext:()=>j.CD,createTraceParent:()=>Ee.SU,createUniqueNamespace:()=>V.J,createUnloadHandlerContainer:()=>H.Y,dateNow:()=>s.m6,deleteCookie:()=>re.kT,detachEvent:()=>Se.pD,disableCookies:()=>re.oF,disallowsSameSiteNone:()=>K.UY,doPerf:()=>O.Lm,dumpObj:()=>A.eU,eventOff:()=>Se.QY,eventOn:()=>Se.XO,extend:()=>re.l7,findW3cTraceParent:()=>Ee.lq,formatTraceParent:()=>Ee.aR,generateW3CId:()=>_e.DO,getCommonSchemaMetaData:()=>re.Vv,getConsole:()=>A.dr,getCookie:()=>re.ej,getCookieValue:()=>re.Do,getCrypto:()=>A.MX,getDocument:()=>A.Me,getExceptionName:()=>s.jj,getFieldValueType:()=>re.Sy,getGlobal:()=>M.Rd,getGlobalInst:()=>A.a8,getHistory:()=>A.s1,getIEVersion:()=>A.sA,getISOString:()=>s.Y6,getJSON:()=>A.xA,getLocation:()=>A.k$,getMsCrypto:()=>A.gz,getNavigator:()=>A.jW,getPerformance:()=>A.r,getSetValue:()=>s.qK,getTenantId:()=>re.jM,getTime:()=>re.hK,getWindow:()=>A.Jj,hasDocument:()=>A.Nv,hasHistory:()=>A.fE,hasJSON:()=>A.nS,hasNavigator:()=>A.d6,hasOwnProperty:()=>s.nr,hasWindow:()=>A.Ym,isArray:()=>s.kJ,isArrayValid:()=>re.JT,isBeaconsSupported:()=>A.MF,isBoolean:()=>s.jn,isChromium:()=>re.mJ,isDate:()=>s.J_,isDocumentObjectAvailable:()=>re.x9,isError:()=>s.VZ,isFetchSupported:()=>A.JO,isFunction:()=>s.mf,isIE:()=>A.w1,isLatency:()=>re.r7,isNotTruthy:()=>s.F,isNullOrUndefined:()=>s.le,isNumber:()=>s.hj,isObject:()=>s.Kn,isReactNative:()=>A.b$,isSampledFlag:()=>Ee.Pn,isString:()=>s.HD,isTruthy:()=>s.fQ,isTypeof:()=>s.Ym,isUint8ArrayAvailable:()=>re.IZ,isUndefined:()=>s.o8,isValidSpanId:()=>Ee.Lc,isValidTraceId:()=>Ee.jN,isValidTraceParent:()=>Ee.J6,isValueAssigned:()=>re.Sn,isValueKind:()=>re.oS,isWindowObjectAvailable:()=>re.dH,isXhrSupported:()=>A.Z3,mergeEvtNamespace:()=>Se.jU,newGuid:()=>_e.GW,newId:()=>Ce.pZ,normalizeJsName:()=>s.Gf,objCreate:()=>M.pu,objDefineAccessors:()=>s.l_,objForEachKey:()=>s.rW,objFreeze:()=>s.FL,objKeys:()=>s.FY,objSeal:()=>s.Xi,openXhr:()=>re.ot,optimizeObject:()=>s.Ax,parseTraceParent:()=>Ee.j_,perfNow:()=>_e.Jj,proxyAssign:()=>s.cf,proxyFunctionAs:()=>s.Oi,proxyFunctions:()=>s.Vb,random32:()=>Ce._l,randomValue:()=>Ce.az,removeEventHandler:()=>Se.C1,removeEventListeners:()=>Se.nJ,removePageHideEventListener:()=>Se.C9,removePageShowEventListener:()=>Se.Yl,removePageUnloadEventListener:()=>Se.JA,safeGetCookieMgr:()=>K.JP,safeGetLogger:()=>R.vH,sanitizeProperty:()=>re.yj,setCookie:()=>re.d8,setEnableEnvMocks:()=>A.dI,setProcessTelemetryTimings:()=>re.if,setValue:()=>s.sO,strContains:()=>s._Q,strEndsWith:()=>s.Id,strFunction:()=>ke.cb,strObject:()=>ke.fK,strPrototype:()=>ke.hB,strStartsWith:()=>s.xe,strTrim:()=>s.nd,strUndefined:()=>ke.jA,throwError:()=>s._y,toISOString:()=>s.Y6,useXDomainRequest:()=>A.cp});var i,r=n(27421),o=n(50951),s=n(24869),a="Failed",c=a+"MonitorAjax",l="Track",d="Start",u="Stop",p="Event",h="AuthContext",f="Exception",m="Local",g="Session",v="Storage",y="Browser",b="Cannot",w="Buffer",_="InstrumentationKey",S=(0,o.By)({CRITICAL:1,WARNING:2}),C=(0,o.By)(((i={})[y+"DoesNotSupport"+m+v]=0,i[y+b+"Read"+m+v]=1,i[y+b+"Read"+g+v]=2,i[y+b+"Write"+m+v]=3,i[y+b+"Write"+g+v]=4,i[y+a+"RemovalFrom"+m+v]=5,i[y+a+"RemovalFrom"+g+v]=6,i[b+"SendEmptyTelemetry"]=7,i.ClientPerformanceMathError=8,i["ErrorParsingAI"+g+"Cookie"]=9,i.ErrorPVCalc=10,i[f+"WhileLoggingError"]=11,i[a+"AddingTelemetryTo"+w]=12,i[c+"Abort"]=13,i[c+"Dur"]=14,i[c+"Open"]=15,i[c+"RSC"]=16,i[c+"Send"]=17,i[c+"GetCorrelationHeader"]=18,i[a+"ToAddHandlerForOnBeforeUnload"]=19,i[a+"ToSendQueuedTelemetry"]=20,i[a+"ToReportDataLoss"]=21,i["Flush"+a]=22,i.MessageLimitPerPVExceeded=23,i.MissingRequiredFieldSpecification=24,i.NavigationTimingNotSupported=25,i.OnError=26,i[g+"RenewalDateIsZero"]=27,i.SenderNotInitialized=28,i[d+l+p+a]=29,i[u+l+p+a]=30,i[d+l+a]=31,i[u+l+a]=32,i.TelemetrySampledAndNotSent=33,i[l+p+a]=34,i[l+f+a]=35,i[l+"Metric"+a]=36,i[l+"PV"+a]=37,i[l+"PV"+a+"Calc"]=38,i[l+"Trace"+a]=39,i["Transmission"+a]=40,i[a+"ToSet"+v+w]=41,i[a+"ToRestore"+v+w]=42,i.InvalidBackendResponse=43,i[a+"ToFixDepricatedValues"]=44,i.InvalidDurationValue=45,i.TelemetryEnvelopeInvalid=46,i.CreateEnvelopeError=47,i[b+"SerializeObject"]=48,i[b+"SerializeObjectNonSerializable"]=49,i.CircularReferenceDetected=50,i["Clear"+h+a]=51,i[f+"Truncated"]=52,i.IllegalCharsInName=53,i.ItemNotInArray=54,i.MaxAjaxPerPVExceeded=55,i.MessageTruncated=56,i.NameTooLong=57,i.SampleRateOutOfRange=58,i["Set"+h+a]=59,i["Set"+h+a+"AccountName"]=60,i.StringValueTooLong=61,i.StartCalledMoreThanOnce=62,i.StopCalledWithoutStart=63,i["TelemetryInitializer"+a]=64,i.TrackArgumentsNotSpecified=65,i.UrlTooLong=66,i[g+v+w+"Full"]=67,i[b+"AccessCookie"]=68,i.IdTooLong=69,i.InvalidEvent=70,i[c+"SetRequestHeader"]=71,i["Send"+y+"InfoOnUserInit"]=72,i["Plugin"+f]=73,i["Notification"+f]=74,i.SnippetScriptLoadFailure=99,i["Invalid"+_]=100,i[b+"ParseAiBlobValue"]=101,i.InvalidContentBlob=102,i[l+"PageAction"+p+a]=103,i[a+"AddingCustomDefinedRequestContext"]=104,i["InMemory"+v+w+"Full"]=105,i[_+"Deprecation"]=106,i)),k=(0,o.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),E=(0,o.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),x=(0,o.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),T=(0,o.By)({Normal:1,Critical:2}),P=(0,o.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),I=(0,s.FL)((0,r.uc)((0,r.uc)({},C),(0,o.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),D=n(29141),R=n(29339),O=n(81782),A=n(49251),N=n(98145),M=n(30175),L=n(96335),j=n(31030),F=n(69031),U=500;function q(e,t,n){t&&(0,s.kJ)(t)&&t[N.R5]>0&&(t=t.sort((function(e,t){return e[L.yi]-t[L.yi]})),(0,s.tO)(t,(function(e){e[L.yi]<U&&(0,s._y)("Channel has invalid priority - "+e[N.pZ])})),e[N.MW]({queue:(0,s.FL)(t),chain:(0,j.jV)(t,n[N.TC],n)}))}var K=n(88140),V=n(87624),W=n(28341),$=n(87951),B=function(e){function t(){var n,i,r=e.call(this)||this;function o(){n=0,i=[]}return r.identifier="TelemetryInitializerPlugin",r.priority=199,o(),(0,D.Z)(t,r,(function(e,t){e.addTelemetryInitializer=function(e){var t={id:n++,fn:e};return i[N.MW](t),{remove:function(){(0,s.tO)(i,(function(e,n){if(e.id===t.id)return i[N.cb](n,1),-1}))}}},e[L.hL]=function(t,n){for(var r=!1,o=i[N.R5],a=0;a<o;++a){var c=i[a];if(c)try{if(!1===c.fn[N.ZV](null,[t])){r=!0;break}}catch(e){(0,R.kP)(n[N.mc](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,s.jj)(e),{exception:(0,A.eU)(e)},!0)}}r||e[N.uL](t,n)},e[N.F3]=function(){o()}})),r}return(0,r.ne)(t,e),t.__ieDyn=1,t}($.i),H=n(38593),z="Plugins must provide initialize method",J="_notificationManager",G="SDK is still unloading...",Y={loggingLevelConsole:1};function Q(e,t){return new O.Jk(t)}function X(e,t){var n=!1;return(0,s.tO)(t,(function(t){if(t===e)return n=!0,-1})),n}var Z=function(){function e(){var t,n,i,o,a,c,l,d,u,p,h,f,m,g,v,y,b,w,_,S,C=0;(0,D.Z)(e,this,(function(e){function k(){n=!1,t=(0,s.mm)(!0,{},Y),e[N.TC]=t,e[N.eZ]=new R.AQ(t),e[N.iC]=[],v=new B,i=[],o=null,a=null,c=null,l=null,d=null,p=null,u=[],h=null,f=null,m=null,g=!1,y=null,b=(0,V.J)("AIBaseCore",!0),w=(0,H.Y)(),S=null}function E(){return(0,j.CD)(P(),t,e)}function x(n){var i=function(e,t,n){var i,r=[],o={};return(0,s.tO)(n,(function(t){((0,s.le)(t)||(0,s.le)(t[N.VL]))&&(0,s._y)(z);var n=t[L.yi],i=t[N.pZ];t&&n&&((0,s.le)(o[n])?o[n]=i:(0,R.jV)(e,"Two extensions have same priority #"+n+" - "+o[n]+", "+i)),(!n||n<500)&&r[N.MW](t)})),(i={all:n})[L.oV]=r,i}(e[N.eZ],0,u);p=i[L.oV],d=null;var r=i.all;if(m=(0,s.FL)(function(e,t,n){var i=[];if(e&&(0,s.tO)(e,(function(e){return q(i,e,n)})),t){var r=[];(0,s.tO)(t,(function(e){e[L.yi]>U&&r[N.MW](e)})),q(i,r,n)}return i}(f,r,e)),h){var o=(0,s.UA)(r,h);-1!==o&&r[N.cb](o,1),-1!==(o=(0,s.UA)(p,h))&&p[N.cb](o,1),h._setQueue(m)}else h=function(e,t){function n(){return(0,j.CD)(null,t[N.TC],t,null)}function i(e,t,n,i){var r=e?e[N.R5]+1:1;function o(){0==--r&&(i&&i(),i=null)}r>0&&(0,s.tO)(e,(function(e){if(e&&e.queue[N.R5]>0){var i=e.chain,s=t[N.zV](i);s[N.Fc](o),n(s)}else r--})),o()}var r=!1,o={identifier:"ChannelControllerPlugin",priority:U,initialize:function(t,n,i,o){r=!0,(0,s.tO)(e,(function(e){e&&e.queue[N.R5]>0&&(0,F.bP)((0,j.CD)(e.chain,t,n),i)}))},isInitialized:function(){return r},processTelemetry:function(t,r){i(e,r||n(),(function(e){e[N.uL](t)}),(function(){r[N.uL](t)}))},update:function(t,n){var r=n||{reason:0};return i(e,t,(function(e){e[N.uL](r)}),(function(){t[N.uL](r)})),!0},pause:function(){i(e,n(),(function(e){e.iterate((function(e){e.pause&&e.pause()}))}),null)},resume:function(){i(e,n(),(function(e){e.iterate((function(e){e.resume&&e.resume()}))}),null)},teardown:function(t,n){var o=n||{reason:0,isAsync:!1};return i(e,t,(function(e){e[N.uL](o)}),(function(){t[N.uL](o),r=!1})),!0},getChannel:function(t){var n=null;return e&&e[N.R5]>0&&(0,s.tO)(e,(function(e){if(e&&e.queue[N.R5]>0&&((0,s.tO)(e.queue,(function(e){if(e[N.pZ]===t)return n=e,-1})),n))return-1})),n},flush:function(t,r,o,s){var a=1,c=!1,l=null;function d(){a--,c&&0===a&&(l&&(clearTimeout(l),l=null),r&&r(c),r=null)}return s=s||5e3,i(e,n(),(function(e){e.iterate((function(e){if(e[N.kL]){a++;var n=!1;e[N.kL](t,(function(){n=!0,d()}),o)||n||(t&&null==l?l=setTimeout((function(){l=null,d()}),s):d())}}))}),(function(){c=!0,d()})),!0},_setQueue:function(t){e=t}};return o}(m,e);r[N.MW](h),p[N.MW](h),e[N.iC]=(0,F.AA)(r),h[N.VL](t,e,r),(0,F.bP)(E(),r),e[N.iC]=(0,s.FL)((0,F.AA)(p||[])).slice(),n&&function(t){var n=(0,j.xy)(P(),e);e._updateHook&&!0===e._updateHook(n,t)||n[N.uL](t)}(n)}function T(t){var n,i=null,r=null;return(0,s.tO)(e[N.iC],(function(e){if(e[N.pZ]===t&&e!==h&&e!==v)return r=e,-1})),!r&&h&&(r=h.getChannel(t)),r&&((n={plugin:r})[N.$h]=function(e){(0,F.OY)(r)[L.mE]=!e},n.isEnabled=function(){var e=(0,F.OY)(r);return!e[N.fi]&&!e[L.mE]},n.remove=function(e,t){var n;void 0===e&&(e=!0);var i=[r],o=((n={reason:1})[N.d]=e,n);I(i,o,(function(e){e&&x({reason:32,removed:i}),t&&t(e)}))},i=n),i}function P(){if(!d){var n=(p||[]).slice();-1===(0,s.UA)(n,v)&&n[N.MW](v),d=(0,j.jV)((0,F.AA)(n),t,e)}return d}function I(n,i,r){if(n&&n[N.R5]>0){var o=(0,j.jV)(n,t,e),a=(0,j.Bt)(o,e);a[N.Fc]((function(){var e=!1,t=[];(0,s.tO)(u,(function(i,r){X(i,n)?e=!0:t[N.MW](i)})),u=t;var i=[];f&&((0,s.tO)(f,(function(t,r){var o=[];(0,s.tO)(t,(function(t){X(t,n)?e=!0:o[N.MW](t)})),i[N.MW](o)})),f=i),r&&r(e)})),a[N.uL](i)}else r(!1)}function D(){var n=e[N.eZ]?e[N.eZ].queue:[];n&&((0,s.tO)(n,(function(n){var i,r=((i={})[N.I]=y||"InternalMessageId: "+n[N.Gc],i.iKey=(0,s.v4)(t[N.p$]),i.time=(0,s.Y6)(new Date),i.baseType=R.lQ.dataType,i.baseData={message:n[N.gU]},i);e.track(r)})),n[N.R5]=0)}function A(e,t,n,i){return h?h[N.kL](e,t,n||6,i):(t&&t(!1),!0)}function $(t){var n=e[N.eZ];n?(0,R.kP)(n,2,73,t):(0,s._y)(t)}k(),e[N.yl]=function(){return n},e[N.VL]=function(i,a,l,d){var p,h;g&&(0,s._y)(G),e[N.yl]()&&(0,s._y)("Core should not be initialized more than once"),t=i||{},e[N.TC]=t,(0,s.le)(i[N.p$])&&(0,s._y)("Please provide instrumentation key"),o=d,e[J]=d,!0===(h=(0,s.v4)(t.disableDbgExt))&&_&&(o[N.n7](_),_=null),o&&!_&&!0!==h&&(_=(0,W.p)(t),o[N.g](_)),!(p=(0,s.v4)(t.enablePerfMgr))&&c&&(c=null),p&&(0,s.qK)(t,L.DN,Q),(0,s.qK)(t,L.Zh,{}).NotificationManager=o,l&&(e[N.eZ]=l);var v=(0,s.qK)(t,L.js,[]);(u=[])[N.MW].apply(u,(0,r.$h)((0,r.$h)([],a,!1),v,!1)),f=(0,s.qK)(t,L.Z,[]),x(null),m&&0!==m[N.R5]||(0,s._y)("No "+L.Z+" available"),n=!0,e.releaseQueue()},e.getTransmissionControls=function(){var e=[];return m&&(0,s.tO)(m,(function(t){e[N.MW](t.queue)})),(0,s.FL)(e)},e.track=function(n){n.iKey=n.iKey||t[N.p$],n[N.Z_]=n[N.Z_]||(0,s.Y6)(new Date),n.ver=n.ver||"4.0",!g&&e[N.yl]()?E()[N.uL](n):i[N.MW](n)},e[N.SD]=E,e[N.tb]=function(){return o||(o=function(){var e;return(0,M.pu)(((e={})[N.g]=function(e){},e[N.n7]=function(e){},e[L.uC]=function(e){},e[L.$F]=function(e,t){},e[L.f_]=function(e,t){},e))}(),e[J]=o),o},e[N.g]=function(e){o&&o[N.g](e)},e[N.n7]=function(e){o&&o[N.n7](e)},e.getCookieMgr=function(){return l||(l=(0,K.Nz)(t,e[N.eZ])),l},e.setCookieMgr=function(e){l=e},e[L.kl]=function(){if(!a&&!c&&(0,s.v4)(t.enablePerfMgr)){var n=(0,s.v4)(t[L.DN]);(0,s.mf)(n)&&(c=n(e,e[N.tb]()))}return a||c||(0,O.j5)()},e.setPerfMgr=function(e){a=e},e.eventCnt=function(){return i[N.R5]},e.releaseQueue=function(){if(n&&i[N.R5]>0){var e=i;i=[],(0,s.tO)(e,(function(e){E()[N.uL](e)}))}},e.pollInternalLogs=function(e){y=e||null;var n=(0,s.v4)(t.diagnosticLogInterval);return n&&n>0||(n=1e4),C&&clearInterval(C),C=setInterval((function(){D()}),n)},e[N.LS]=function(){C&&(clearInterval(C),C=0,D())},(0,s.Vb)(e,(function(){return v}),["addTelemetryInitializer"]),e.unload=function(t,i,r){var o;void 0===t&&(t=!0),n||(0,s._y)("SDK is not initialized"),g&&(0,s._y)(G);var a=((o={reason:50})[N.d]=t,o.flushComplete=!1,o),c=(0,j.Bt)(P(),e);function l(t){a.flushComplete=t,g=!0,w.run(c,a),e[N.LS](),c[N.uL](a)}c[N.Fc]((function(){k(),i&&i(a)}),e),A(t,l,6,r)||l(!1)},e[N.TO]=T,e.addPlugin=function(e,t,n,i){if(!e)return i&&i(!1),void $(z);var r=T(e[N.pZ]);if(r&&!t)return i&&i(!1),void $("Plugin ["+e[N.pZ]+"] is already loaded!");var o={reason:16};function s(t){u[N.MW](e),o.added=[e],x(o),i&&i(!0)}if(r){var a=[r.plugin];I(a,{reason:2,isAsync:!!n},(function(e){e?(o.removed=a,o.reason|=32,s()):i&&i(!1)}))}else s()},e.evtNamespace=function(){return b},e[N.kL]=A,e.getTraceCtx=function(e){return S||(S=(0,F.Yn)()),S},e.setTraceCtx=function(e){S=e||null},(0,s.Oi)(e,"addUnloadCb",(function(){return w}),"add")}))}return e.__ieDyn=1,e}();function ee(e,t,n,i){(0,s.tO)(e,(function(e){if(e&&e[t])if(n)setTimeout((function(){return i(e)}),0);else try{i(e)}catch(e){}}))}var te=function(){function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;(0,D.Z)(e,this,(function(e){e[N.g]=function(t){e.listeners[N.MW](t)},e[N.n7]=function(t){for(var n=(0,s.UA)(e[N.dE],t);n>-1;)e.listeners[N.cb](n,1),n=(0,s.UA)(e[N.dE],t)},e[L.uC]=function(t){ee(e[N.dE],L.uC,!0,(function(e){e[L.uC](t)}))},e[L.$F]=function(t,n){ee(e[N.dE],L.$F,!0,(function(e){e[L.$F](t,n)}))},e[L.f_]=function(t,n){ee(e[N.dE],L.f_,n,(function(e){e[L.f_](t,n)}))},e[L.C$]=function(t){t&&(!n&&t[N.PL]()||ee(e[N.dE],L.C$,!1,(function(e){t[N.d]?setTimeout((function(){return e[L.C$](t)}),0):e[L.C$](t)})))}}))}return e.__ieDyn=1,e}(),ne=function(e){function t(){var n=e.call(this)||this;return(0,D.Z)(t,n,(function(e,t){function n(t){var n=e[N.tb]();n&&n[L.$F]([t],2)}e[N.VL]=function(e,n,i,r){t[N.VL](e,n,i||new R.AQ(e),r||new te(e))},e.track=function(i){(0,O.Lm)(e[L.kl](),(function(){return"AppInsightsCore:track"}),(function(){null===i&&(n(i),(0,s._y)("Invalid telemetry item")),function(e){(0,s.le)(e[N.I])&&(n(e),(0,s._y)("telemetry name required"))}(i),t.track(i)}),(function(){return{item:i}}),!i.sync)}})),n}return(0,r.ne)(t,e),t.__ieDyn=1,t}(Z),ie=n(51539),re=n(65705),oe=function(e){function t(){var n=e.call(this)||this;return n.pluginVersionStringArr=[],(0,D.Z)(t,n,(function(e,t){e.logger&&e.logger.queue||(e.logger=new R.AQ({loggingLevelConsole:1})),e.initialize=function(n,i,r,o){(0,O.Lm)(e,(function(){return"AppInsightsCore.initialize"}),(function(){var a=e.pluginVersionStringArr;if(n){n.endpointUrl||(n.endpointUrl=ie.YT);var c=n.propertyStorageOverride;!c||c.getProperty&&c.setProperty||(0,s._y)("Invalid property storage override passed."),n.channels&&(0,s.tO)(n.channels,(function(e){e&&(0,s.tO)(e,(function(e){if(e.identifier&&e.version){var t=e.identifier+"="+e.version;a.push(t)}}))}))}e.getWParam=function(){return"undefined"!=typeof document||n.enableWParam?0:-1},i&&(0,s.tO)(i,(function(e){if(e&&e.identifier&&e.version){var t=e.identifier+"="+e.version;a.push(t)}})),e.pluginVersionString=a.join(";"),e.pluginVersionStringArr=a;try{t.initialize(n,i,r,o),e.pollInternalLogs("InternalLog")}catch(t){var l=e.logger,d=(0,A.eU)(t);-1!==d.indexOf("channels")&&(d+="\n - Channels must be provided through config.channels only!"),(0,R.kP)(l,1,514,"SDK Initialization Failed - no telemetry will be sent: "+d)}}),(function(){return{config:n,extensions:i,logger:r,notificationManager:o}}))},e.track=function(n){(0,O.Lm)(e,(function(){return"AppInsightsCore.track"}),(function(){var i=n;if(i){i.timings=i.timings||{},i.timings.trackStart=(0,re.hK)(),(0,re.r7)(i.latency)||(i.latency=1);var r=i.ext=i.ext||{};r.sdk=r.sdk||{},r.sdk.ver=re.vs;var o=i.baseData=i.baseData||{};o[ie.o6]=o[ie.o6]||{};var s=o[ie.o6];s[ie.p8]=s[ie.p8]||e.pluginVersionString||ie.qS}t.track(i)}),(function(){return{item:n}}),!n.sync)}})),n}return(0,r.ne)(t,e),t.__ieDyn=1,t}(ne);const se=oe;var ae=function(e){function t(){var n=e.call(this)||this;return(0,D.Z)(t,n,(function(e,t){e.initialize=function(n,i,r,o){n&&!n.endpointUrl&&(n.endpointUrl=ie.YT),e.getWParam=function(){return re.x9||n.enableWParam?0:-1};try{t.initialize(n,i,r,o)}catch(t){(0,R.kP)(e.logger,1,514,"Initialization Failed: "+(0,A.eU)(t)+"\n - Note: Channels must be provided through config.channels only")}},e.track=function(e){var n=e;if(n){var i=n.ext=n.ext||{};i.sdk=i.sdk||{},i.sdk.ver=re.vs}t.track(n)}})),n}return(0,r.ne)(t,e),t.__ieDyn=1,t}(Z);const ce=ae;var le=s.mf;function de(e,t,n){return function(i){e[t]=i,n()}}const ue=function(){function e(t){var n=0,i=null,r=[];function o(){if(r.length>0){var e=r.slice();r=[],setTimeout((function(){for(var t=0,n=e.length;t<n;++t)try{e[t]()}catch(e){}}),0)}}function s(e){0===n&&(i=e,n=1,o())}function a(e){0===n&&(i=e,n=2,o())}(0,D.Z)(e,this,(function(t){t.then=function(t,s){return new e((function(a,c){!function(t,s,a,c){r.push((function(){var r;try{(r=1===n?le(t)?t(i):i:le(s)?s(i):i)instanceof e?r.then(a,c):2!==n||le(s)?a(r):c(r)}catch(e){return void c(e)}})),0!==n&&o()}(t,s,a,c)}))},t.catch=function(e){return t.then(null,e)}})),function(){if(!le(t))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{t(s,a)}catch(e){a(e)}}()}return e.resolve=function(t){return t instanceof e?t:t&&le(t.then)?new e((function(e,n){try{t.then(e,n)}catch(e){n(e)}})):new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){if(t&&t.length)return new e((function(e,n){try{for(var i=[],r=0,o=0;o<t.length;o++){var s=t[o];s&&le(s.then)?(r++,s.then(de(i,o,(function(){0==--r&&e(i)})),n)):i[o]=s}0===r&&setTimeout((function(){e(i)}),0)}catch(e){n(e)}}))},e.race=function(t){return new e((function(e,n){if(t&&t.length)try{for(var i=function(i){var r=t[i];r&&le(r.then)?r.then(e,n):setTimeout((function(){e(r)}),0)},r=0;r<t.length;r++)i(r)}catch(e){n(e)}}))},e}();var pe=0,he=[],fe=[],me=[];function ge(){return(new Date).getTime()}const ve=function(){function e(t,n){var i=0,r=(t||"<unnamed>")+"."+pe;function o(e){var t=(0,M.Rd)();t&&t.QUnit&&console&&console.log("ESPromiseScheduler["+r+"] "+e)}function s(e){(0,R.jV)(n,"ESPromiseScheduler["+r+"] "+e)}pe++,(0,D.Z)(e,this,(function(e){var t=null,n=0;function a(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return e.splice(n,1)[0];return null}e.scheduleEvent=function(e,c,l){var d=r+"."+n;n++,c&&(d+="-("+c+")");var u=d+"{"+i+"}";i++;var p,h,f,m={evt:null,tm:ge(),id:u,isRunning:!1,isAborted:!1};return m.evt=t?(p=m,h=t,f=new ue((function(e,t){var n=ge()-h.tm,i=h.id;o("["+d+"] is waiting for ["+i+":"+n+" ms] to complete before starting -- ["+fe.length+"] waiting and ["+he.length+"] running"),p.abort=function(e){p.abort=null,a(fe,d),p.isAborted=!0,t(new Error(e))},h.evt.then((function(n){a(fe,d),_(p).then(e,t)}),(function(n){a(fe,d),_(p).then(e,t)}))})),fe.push(p),f):_(m),(t=m).evt._schId=u,m.evt;function g(e){for(var t=ge(),n=t-6e5,i=e.length,r=0;r<i;){var o=e[r];if(o&&o.tm<n){var a=null;o.abort?(a="Aborting ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",o.abort(a)):a="Removing ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",s(a),e.splice(r,1),i--}else r++}}function v(e,n){var i=!1,r=a(he,e);if(r||(r=a(me,e),i=!0),r){r.to&&(clearTimeout(r.to),r.to=null);var c=ge()-r.tm;n?i?s("Timed out event ["+e+"] finally complete -- "+c+" ms"):o("Promise ["+e+"] Complete -- "+c+" ms"):(me.push(r),s("Event ["+e+"] Timed out and removed -- "+c+" ms"))}else o("Failed to remove ["+e+"] from running queue");t&&t.id===e&&(t=null),g(he),g(fe),g(me)}function y(e,t){return function(n){return v(e,!0),t&&t(n),n}}function b(e,t,n,i){t.then((function(t){return t instanceof ue?(o("Event ["+e+"] returned a promise -- waiting"),b(e,t,n,i),t):y(e,n)(t)}),y(e,i))}function w(e,t){var n=e.id;return new ue((function(i,r){o("Event ["+n+"] Starting -- waited for "+(e.wTm||"--")+" ms"),e.isRunning=!0,e.abort=function(t){e.abort=null,e.isAborted=!0,v(n,!1),r(new Error(t))};var s=t(n);s instanceof ue?(l&&(e.to=setTimeout((function(){v(n,!1),r(new Error("Timed out after ["+l+"] ms"))}),l)),b(n,s,(function(t){o("Event ["+n+"] Resolving after "+(ge()-e.tm)+" ms"),i(t)}),r)):(o("Promise ["+n+"] Auto completed as the start action did not return a promise"),i())}))}function _(t){var n=ge();return t.wTm=n-t.tm,t.tm=n,t.isAborted?ue.reject(new Error("["+d+"] was aborted")):(he.push(t),w(t,e))}}}))}return e.incomplete=function(){return he},e.waitingToStart=function(){return fe},e}();var ye=function(){function e(e){var t=this,n={},i=[],r=[];function o(e,t){var o,a=n[e];if(a&&(o=a[t]),!o&&null!==o){if((0,s.HD)(e)&&(0,s.HD)(t))if(r.length>0){for(var c=0;c<r.length;c++)if(r[c].handleField(e,t)){o={canHandle:!0,fieldHandler:r[c]};break}}else 0===i.length&&(o={canHandle:!0});if(!o&&null!==o)for(o=null,c=0;c<i.length;c++)if(i[c].handleField(e,t)){o={canHandle:!0,handler:i[c],fieldHandler:null};break}a||(a=n[e]={}),a[t]=o}return o}function a(e,t,n,i,r,o){if(e.handler)return e.handler.property(t,n,r,o);if(!(0,s.le)(r.kind)){if(4096==(4096&i)||!(0,re.oS)(r.kind))return null;r.value=r.value.toString()}return l(e.fieldHandler,t,n,i,r)}function c(e,t,n){return(0,re.Sn)(n)?{value:n}:null}function l(e,n,i,r,o){if(o&&e){var a=e.getSanitizer(n,i,r,o.kind,o.propertyType);if(a)if(4===r){var d={},u=o.value;(0,s.rW)(u,(function(t,r){var o=n+"."+i;if((0,re.Sn)(r)){var s=c(0,0,r);(s=l(e,o,t,(0,re.Sy)(r),s))&&(d[t]=s.value)}})),o.value=d}else{var p={path:n,name:i,type:r,prop:o,sanitizer:t};o=a.call(t,p)}}return o}e&&r.push(e),t.addSanitizer=function(e){e&&(i.push(e),n={})},t.addFieldSanitizer=function(e){e&&(r.push(e),n={})},t.handleField=function(e,t){var n=o(e,t);return!!n&&n.canHandle},t.value=function(e,t,n,i){var r=o(e,t);if(r&&r.canHandle){if(!r||!r.canHandle)return null;if(r.handler)return r.handler.value(e,t,n,i);if(!(0,s.HD)(t)||(0,s.le)(n)||n===ie.qS)return null;var l=null,d=(0,re.Sy)(n);if(8192==(8192&d)){var u=-8193&d;if(l=n,!(0,re.Sn)(l.value)||1!==u&&2!==u&&3!==u&&4096!=(4096&u))return null}else 1===d||2===d||3===d||4096==(4096&d)?l=c(0,0,n):4===d&&(l=c(0,0,i?JSON.stringify(n):n));if(l)return a(r,e,t,d,l,i)}return null},t.property=function(e,t,n,i){var r=o(e,t);if(!r||!r.canHandle)return null;if(!(0,s.HD)(t)||(0,s.le)(n)||!(0,re.Sn)(n.value))return null;var c=(0,re.Sy)(n.value);return 0===c?null:a(r,e,t,c,n,i)}}return e.getFieldType=re.Sy,e}(),be=100,we=n(28452),_e=n(28956),Se=n(47954),Ce=n(19406),ke=n(1550),Ee=n(56207)},51539:(e,t,n)=>{"use strict";n.d(t,{YT:()=>r,o6:()=>s,p8:()=>o,qS:()=>i});var i="",r="https://browser.events.data.microsoft.com/OneCollector/1.0/",o="version",s="properties"},65705:(e,t,n)=>{"use strict";n.d(t,{Do:()=>O,Gf:()=>h,IZ:()=>k,JT:()=>j,Sn:()=>S,Sy:()=>U,Tr:()=>K,Vv:()=>T,cQ:()=>q,cm:()=>A,d8:()=>I,dH:()=>_,ej:()=>R,hK:()=>M,if:()=>F,jM:()=>C,kT:()=>D,l7:()=>N,mJ:()=>V,oF:()=>P,oS:()=>L,ot:()=>W,r7:()=>E,vs:()=>f,x9:()=>w,yj:()=>x});var i,r=n(49251),o=n(24869),s=n(88140),a=n(28956),c=n(1550),l=n(47954),d=n(19406),u=n(30175),p=n(51539),h="3.2.9",f="1DS-Web-JS-"+h,m="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",g="withCredentials",v="timeout",y=((i={})[0]=0,i[2]=6,i[1]=1,i[3]=7,i[4098]=6,i[4097]=1,i[4099]=7,i),b=null,w=Boolean((0,r.Me)()),_=Boolean((0,r.Jj)());function S(e){return!(e===p.qS||(0,o.le)(e))}function C(e){if(e){var t=e.indexOf("-");if(t>-1)return e.substring(0,t)}return p.qS}function k(){return null===b&&(b=!(0,o.o8)(Uint8Array)&&!function(){var e=(0,r.jW)();if(!(0,o.o8)(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t.indexOf("safari")>=0||t.indexOf("firefox")>=0)&&t.indexOf("chrome")<0)return!0}return!1}()&&!(0,r.b$)()),b}function E(e){return!!(e&&(0,o.hj)(e)&&e>=1&&e<=4)}function x(e,t,n){if(!t&&!S(t)||"string"!=typeof e)return null;var i=typeof t;if("string"===i||"number"===i||"boolean"===i||(0,o.kJ)(t))t={value:t};else if("object"!==i||c.CY.call(t,"value")){if((0,o.le)(t.value)||t.value===p.qS||!(0,o.HD)(t.value)&&!(0,o.hj)(t.value)&&!(0,o.jn)(t.value)&&!(0,o.kJ)(t.value))return null}else t={value:n?JSON.stringify(t):t};if((0,o.kJ)(t.value)&&!j(t.value))return null;if(!(0,o.le)(t.kind)){if((0,o.kJ)(t.value)||!L(t.kind))return null;t.value=t.value.toString()}return t}function T(e,t,n){var i=-1;if(!(0,o.o8)(e))if(t>0&&(32===t?i=8192:t<=13&&(i=t<<5)),function(e){return e>=0&&e<=9}(n))-1===i&&(i=0),i|=n;else{var r=y[U(e)]||-1;-1!==i&&-1!==r?i|=r:6===r&&(i=r)}return i}function P(){(0,s.JP)(null).setEnabled(!1)}function I(e,t,n){(0,s.p7)(null)&&(0,s.JP)(null).set(e,t,86400*n,null,"/")}function D(e){(0,s.p7)(null)&&(0,s.JP)(null).del(e)}function R(e){return(0,s.p7)(null)?O((0,s.JP)(null),e):p.qS}function O(e,t,n){var i;return void 0===n&&(n=!0),e&&(i=e.get(t),n&&i&&decodeURIComponent&&(i=decodeURIComponent(i))),i||p.qS}function A(e){void 0===e&&(e="D");var t=(0,a.GW)();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,p.qS)),t}function N(e,t,n,i,r){var s={},a=!1,l=0,d=arguments.length,u=arguments;for("[object Boolean]"===Object[c.hB].toString.call(u[0])&&(a=u[0],l++);l<d;l++)e=u[l],(0,o.rW)(e,(function(e,t){a&&t&&(0,o.Kn)(t)?(0,o.kJ)(t)?(s[e]=s[e]||[],(0,o.tO)(t,(function(t,n){t&&(0,o.Kn)(t)?s[e][n]=N(!0,s[e][n],t):s[e][n]=t}))):s[e]=N(!0,s[e],t):s[e]=t}));return s}var M=a.Jj;function L(e){return 0===e||e>0&&e<=13||32===e}function j(e){return e.length>0}function F(e,t){var n=e;n.timings=n.timings||{},n.timings.processTelemetryStart=n.timings.processTelemetryStart||{},n.timings.processTelemetryStart[t]=M()}function U(e){var t=0;if(null!=e){var n=typeof e;"string"===n?t=1:"number"===n?t=2:"boolean"===n?t=3:n===c.fK&&(t=4,(0,o.kJ)(e)?(t=4096,e.length>0&&(t|=U(e[0]))):c.CY.call(e,"value")&&(t=8192|U(e.value)))}return t}var q={Version:h,FullVersionString:f,strUndefined:c.jA,strObject:c.fK,Undefined:c.jA,arrForEach:o.tO,arrIndexOf:o.UA,arrMap:o.Mr,arrReduce:o.Xz,objKeys:o.FY,toISOString:o.Y6,isReactNative:r.b$,isString:o.HD,isNumber:o.hj,isBoolean:o.jn,isFunction:o.mf,isArray:o.kJ,isObject:o.Kn,strTrim:o.nd,isDocumentObjectAvailable:w,isWindowObjectAvailable:_,isValueAssigned:S,getTenantId:C,isBeaconsSupported:r.MF,isUint8ArrayAvailable:k,isLatency:E,sanitizeProperty:x,getISOString:o.Y6,useXDomainRequest:r.cp,getCommonSchemaMetaData:T,cookieAvailable:s.p7,disallowsSameSiteNone:s.UY,setCookie:I,deleteCookie:D,getCookie:R,createGuid:A,extend:N,getTime:M,isValueKind:L,isArrayValid:j,objDefineAccessors:o.l_,addPageUnloadEventListener:l.c9,setProcessTelemetryTimings:F,addEventHandler:l.Ib,getFieldValueType:U,strEndsWith:o.Id,objForEachKey:o.rW},K={_canUseCookies:void 0,isTypeof:o.Ym,isUndefined:o.o8,isNullOrUndefined:o.le,hasOwnProperty:o.nr,isFunction:o.mf,isObject:o.Kn,isDate:o.J_,isArray:o.kJ,isError:o.VZ,isString:o.HD,isNumber:o.hj,isBoolean:o.jn,toISOString:o.Y6,arrForEach:o.tO,arrIndexOf:o.UA,arrMap:o.Mr,arrReduce:o.Xz,strTrim:o.nd,objCreate:u.pu,objKeys:o.FY,objDefineAccessors:o.l_,addEventHandler:l.Ib,dateNow:o.m6,isIE:r.w1,disableCookies:P,newGuid:a.GW,perfNow:a.Jj,newId:d.pZ,randomValue:d.az,random32:d._l,mwcRandomSeed:d.CN,mwcRandom32:d.F6,generateW3CId:a.DO};function V(){return!!(0,r.a8)("chrome")}function W(e,t,n,i,r,o){function s(e,t,n){try{e[t]=n}catch(e){}}void 0===i&&(i=!1),void 0===r&&(r=!1);var a=new XMLHttpRequest;return i&&s(a,m,i),n&&s(a,g,n),a.open(e,t,!r),n&&s(a,g,n),!r&&o&&s(a,v,o),a}},71488:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BE_PROFILE:()=>g,NRT_PROFILE:()=>m,PostChannel:()=>me,RT_PROFILE:()=>f});var i=n(27421),r=n(29141),o=n(81782),s=n(47954),a=n(87624),c=n(65705),l=n(24869),d=n(49251),u=n(28452),p=n(29339),h=n(87951),f="REAL_TIME",m="NEAR_REAL_TIME",g="BEST_EFFORT",v="",y="POST",b="drop",w="requeue",_="application/x-json-stream",S="cache-control",C="content-type",k="kill-duration",E="time-delta-millis",x="client-version",T="client-id",P="time-delta-to-apply-millis",I="upload-time",D="apikey",R="AuthMsaDeviceTicket",O="AuthXToken",A="msfpc",N="trace",M="user";function L(e){var t=(e.ext||{}).intweb;return t&&(0,c.Sn)(t[A])?t[A]:null}function j(e){for(var t=null,n=0;null===t&&n<e.length;n++)t=L(e[n]);return t}var F=function(){function e(t,n){var i=n?[].concat(n):[],r=this,o=j(i);r.iKey=function(){return t},r.Msfpc=function(){return o||v},r.count=function(){return i.length},r.events=function(){return i},r.addEvent=function(e){return!!e&&(i.push(e),o||(o=L(e)),!0)},r.split=function(n,r){var s;if(n<i.length){var a=i.length-n;(0,l.le)(r)||(a=r<a?r:a),s=i.splice(n,a),o=j(i)}return new e(t,s)}}return e.create=function(t,n){return new e(t,n)},e}();const U=function(){function e(){var t=!0,n=!0,i=!0,o="use-collector-delta",s=!1;(0,r.Z)(e,this,(function(e){e.allowRequestSending=function(){return t},e.firstRequestSent=function(){i&&(i=!1,s||(t=!1))},e.shouldAddClockSkewHeaders=function(){return n},e.getClockSkewHeaderValue=function(){return o},e.setClockSkew=function(e){s||(e?(o=e,n=!0,s=!0):n=!1,t=!0)}}))}return e.__ieDyn=1,e}(),q=function(){function e(){var t={};(0,r.Z)(e,this,(function(e){e.setKillSwitchTenants=function(e,n){if(e&&n)try{var i=(s=e.split(","),a=[],s&&(0,l.tO)(s,(function(e){a.push((0,l.nd)(e))})),a);if("this-request-only"===n)return i;for(var r=1e3*parseInt(n,10),o=0;o<i.length;++o)t[i[o]]=(0,l.m6)()+r}catch(e){return[]}var s,a;return[]},e.isTenantKilled=function(e){var n=t,i=(0,l.nd)(e);return void 0!==n[i]&&n[i]>(0,l.m6)()||(delete n[i],!1)}}))}return e.__ieDyn=1,e}();var K=n(1550);function V(e){var t,n=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*n,Math.min(t,6e5)}var W,$=2e6,B=Math.min($,65e3),H="metadata",z="f",J=/\./,G=function(){function e(t,n,i,s){var a="data",d="baseData",u=!!s,p=n,h={};(0,r.Z)(e,this,(function(e){function n(e,t,r,o,s,a,d){(0,l.rW)(e,(function(e,f){var m=null;if(f||(0,c.Sn)(f)){var g=r,v=e,y=s,b=t;if(u&&!o&&J.test(e)){var w=e.split("."),_=w.length;if(_>1){y&&(y=y.slice());for(var S=0;S<_-1;S++){var C=w[S];b=b[C]=b[C]||{},g+="."+C,y&&y.push(C)}v=w[_-1]}}var k=o&&function(e,t){var n=h[e];return void 0===n&&(e.length>=7&&(n=(0,l.xe)(e,"ext.metadata")||(0,l.xe)(e,"ext.web")),h[e]=n),n}(g);if(m=!k&&p&&p.handleField(g,v)?p.value(g,v,f,i):(0,c.yj)(v,f,i)){var E=m.value;if(b[v]=E,a&&a(y,v,m),d&&"object"==typeof E&&!(0,l.kJ)(E)){var x=y;x&&(x=x.slice()).push(v),n(f,E,g+"."+v,o,x,a,d)}}}}))}e.createPayload=function(e,t,n,i,r,o){return{apiKeys:[],payloadBlob:v,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:n,isBeacon:i,sendType:o,sendReason:r}},e.appendPayload=function(n,i,r){var s=n&&i&&!n.overflow;return s&&(0,o.Lm)(t,(function(){return"Serializer:appendPayload"}),(function(){for(var t=i.events(),o=n.payloadBlob,s=n.numEvents,a=!1,c=[],d=[],u=n.isBeacon,p=u?65e3:3984588,h=u?B:$,f=0,m=0;f<t.length;){var g=t[f];if(g){if(s>=r){n.overflow=i.split(f);break}var v=e.getEventBlob(g);if(v&&v.length<=h){var y=v.length;if(o.length+y>p){n.overflow=i.split(f);break}o&&(o+="\n"),o+=v,++m>20&&(o.substr(0,1),m=0),a=!0,s++}else v?c.push(g):d.push(g),t.splice(f,1),f--}f++}if(c&&c.length>0&&n.sizeExceed.push(F.create(i.iKey(),c)),d&&d.length>0&&n.failedEvts.push(F.create(i.iKey(),d)),a){n.batches.push(i),n.payloadBlob=o,n.numEvents=s;var b=i.iKey();-1===(0,l.UA)(n.apiKeys,b)&&n.apiKeys.push(b)}}),(function(){return{payload:n,theBatch:{iKey:i.iKey(),evts:i.events()},max:r}})),s},e.getEventBlob=function(e){try{return(0,o.Lm)(t,(function(){return"Serializer.getEventBlob"}),(function(){var t={};t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+(0,c.jM)(e.iKey);var i={},r=e.ext;r&&(t.ext=i,(0,l.rW)(r,(function(e,t){n(t,i[e]={},"ext."+e,!0,null,null,!0)})));var o=t[a]={};o.baseType=e.baseType;var s=o[d]={};return n(e.baseData,s,d,!1,[d],(function(e,t,n){Y(i,e,t,n)}),!0),n(e.data,o,a,!1,[],(function(e,t,n){Y(i,e,t,n)}),!0),JSON.stringify(t)}),(function(){return{item:e}}))}catch(e){return null}}}))}return e.__ieDyn=1,e}();function Y(e,t,n,i){if(i&&e){var r=(0,c.Vv)(i.value,i.kind,i.propertyType);if(r>-1){var o=e[H];o||(o=e[H]={f:{}});var s=o[z];if(s||(s=o[z]={}),t)for(var a=0;a<t.length;a++){var d=t[a];s[d]||(s[d]={f:{}});var u=s[d][z];u||(u=s[d][z]={}),s=u}s=s[n]={},(0,l.kJ)(i.value)?s.a={t:r}:s.t=r}}}var Q="sendAttempt",X="&NoResponseBody=true",Z=((W={})[1]=w,W[100]=w,W[200]="sent",W[8004]=b,W[8003]=b,W),ee={},te={};function ne(e,t,n){ee[e]=t,!1!==n&&(te[t]=e)}function ie(e){try{return e.responseText}catch(e){}return v}function re(e,t){var n=!1;if(e&&t){var i=(0,l.FY)(e);if(i&&i.length>0)for(var r=t.toLowerCase(),o=0;o<i.length;o++){var s=i[o];if(s&&(0,l.nr)(t,s)&&s.toLowerCase()===r){n=!0;break}}}return n}function oe(e,t,n,i){t&&n&&n.length>0&&(i&&ee[t]?(e.hdrs[ee[t]]=n,e.useHdrs=!0):e.url+="&"+t+"="+n)}function se(e,t){return t&&((0,l.hj)(t)?e=[t].concat(e):(0,l.kJ)(t)&&(e=t.concat(e))),e}ne(R,R,!1),ne(x,x),ne(T,"Client-Id"),ne(D,D),ne(P,P),ne(I,I),ne(O,O);var ae=function(){function e(t,n,i,s,a){this._responseHandlers=[];var u,h,f,m,g,w,R,O,N,M,L="?cors=true&"+C.toLowerCase()+"="+_,j=new q,F=!1,W=new U,$=!1,B=0,H=!0,z=[],J={},Y=[],ee=null,ne=!1,ae=!1,ce=!1;(0,r.Z)(e,this,(function(e){var r=!0;function U(e,t){for(var n=0,i=null,r=0;null==i&&r<e.length;)1===(n=e[r])?(0,d.cp)()?i=q:(0,d.Z3)()&&(i=de):2===n&&(0,d.JO)(t)&&(!t||t&&!O)?i=le:$&&3===n&&(0,d.MF)()&&(i=pe),r++;return i?{_transport:n,_isSync:t,sendPOST:i}:null}function q(e,t,n){var i=new XDomainRequest;i.open(y,e.urlString),e.timeout&&(i.timeout=e.timeout),i.onload=function(){var e=ie(i);ue(t,200,{},e),Ce(e)},i.onerror=function(){ue(t,400,{})},i.ontimeout=function(){ue(t,500,{})},i.onprogress=function(){},n?i.send(e.data):a.set((function(){i.send(e.data)}),0)}function le(e,t,n){var i,o=e.urlString,s=!1,c=!1,d=((i={body:e.data,method:y}).Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0,i);n&&(d.keepalive=!0,2===e._sendReason&&(s=!0,M&&(o+=X))),r&&(d.credentials="include"),e.headers&&(0,l.FY)(e.headers).length>0&&(d.headers=e.headers),fetch(o,d).then((function(e){var n={},i=v,r=e.headers;r&&r.forEach((function(e,t){n[t]=e})),e.body&&e.text().then((function(e){i=e})),c||(c=!0,ue(t,e.status,n,i),Ce(i))})).catch((function(e){c||(c=!0,ue(t,0,{}))})),s&&!c&&(c=!0,ue(t,200,{})),!c&&e.timeout>0&&a.set((function(){c||(c=!0,ue(t,500,{}))}),e.timeout)}function de(e,t,n){var i=e.urlString;function o(e,t,n){if(!e[n]&&t&&t.getResponseHeader){var i=t.getResponseHeader(n);i&&(e[n]=(0,l.nd)(i))}return e}function s(e,n){ue(t,e.status,function(e){var t={};return e.getAllResponseHeaders?t=function(e){var t={};if((0,l.HD)(e)){var n=(0,l.nd)(e).split(/[\r\n]+/);(0,l.tO)(n,(function(e){if(e){var n=e.indexOf(": ");if(-1!==n){var i=(0,l.nd)(e.substring(0,n)).toLowerCase(),r=(0,l.nd)(e.substring(n+1));t[i]=r}else t[(0,l.nd)(e)]=1}}))}return t}(e.getAllResponseHeaders()):(t=o(t,e,E),t=o(t,e,k),t=o(t,e,"kill-duration-seconds")),t}(e),n)}n&&e.disableXhrSync&&(n=!1);var a=(0,c.ot)(y,i,r,!0,n,e.timeout);(0,l.rW)(e.headers,(function(e,t){a.setRequestHeader(e,t)})),a.onload=function(){var e=ie(a);s(a,e),Ce(e)},a.onerror=function(){s(a)},a.ontimeout=function(){s(a)},a.send(e.data)}function ue(e,t,n,i){try{e(t,n,i)}catch(e){(0,p.kP)(h,2,518,(0,d.eU)(e))}}function pe(e,t,n){var i=200,r=e._thePayload,o=e.urlString+(M?X:v);try{var s=(0,d.jW)();if(!s.sendBeacon(o,e.data))if(r){var a=[];(0,l.tO)(r.batches,(function(e){if(a&&e&&e.count()>0){for(var t=e.events(),n=0;n<t.length;n++)if(!s.sendBeacon(o,ee.getEventBlob(t[n]))){a.push(e.split(n));break}}else a.push(e.split(0))})),ke(a,8003,r.sendType,!0)}else i=0}catch(e){(0,p.jV)(h,"Failed to send telemetry using sendBeacon API. Ex:"+(0,d.eU)(e)),i=0}finally{ue(t,i,{},v)}}function he(e){return 2===e||3===e}function fe(e){return ae&&he(e)&&(e=2),e}function me(){return!F&&B<n}function ge(){var e=Y;return Y=[],e}function ve(e,t,n){var i=!1;return e&&e.length>0&&!F&&f[t]&&ee&&(i=0!==t||me()&&(n>0||W.allowRequestSending())),i}function ye(e){var t={};return e&&(0,l.tO)(e,(function(e,n){t[n]={iKey:e.iKey(),evts:e.events()}})),t}function be(e,n,i,r,s){if(e&&0!==e.length)if(F)ke(e,1,r);else{r=fe(r);try{var a=e,l=0!==r;(0,o.Lm)(m,(function(){return"HttpManager:_sendBatches"}),(function(o){o&&(e=e.slice(0));for(var a=[],d=null,u=(0,c.hK)(),p=f[r]||(l?f[1]:f[0]),h=p&&p._transport,m=N&&(ae||he(r)||3===h||p._isSync&&2===h);ve(e,r,n);){var g=e.shift();g&&g.count()>0&&(j.isTenantKilled(g.iKey())?a.push(g):(d=d||ee.createPayload(n,i,l,m,s,r),ee.appendPayload(d,g,t)?null!==d.overflow&&(e=[d.overflow].concat(e),d.overflow=null,_e(d,u,(0,c.hK)(),s),u=(0,c.hK)(),d=null):(_e(d,u,(0,c.hK)(),s),u=(0,c.hK)(),e=[g].concat(e),d=null)))}d&&_e(d,u,(0,c.hK)(),s),e.length>0&&(Y=e.concat(Y)),ke(a,8004,r)}),(function(){return{batches:ye(a),retryCount:n,isTeardown:i,isSynchronous:l,sendReason:s,useSendBeacon:he(r),sendType:r}}),!l)}catch(e){(0,p.kP)(h,2,48,"Unexpected Exception sending batch: "+(0,d.eU)(e))}}}function we(e,t,n){e[t]=e[t]||{},e[t][u.identifier]=n}function _e(t,n,r,s){if(t&&t.payloadBlob&&t.payloadBlob.length>0){var a=!!e.sendHook,g=f[t.sendType];!he(t.sendType)&&t.isBeacon&&2===t.sendReason&&(g=f[2]||f[3]||g);var y=ce;(t.isBeacon||3===g._transport)&&(y=!1);var b=function(e,t){var n={url:L,hdrs:{},useHdrs:!1};t?(n.hdrs=(0,c.l7)(n.hdrs,J),n.useHdrs=(0,l.FY)(n.hdrs).length>0):(0,l.rW)(J,(function(e,t){te[e]?oe(n,te[e],t,!1):(n.hdrs[e]=t,n.useHdrs=!0)})),oe(n,T,"NO_AUTH",t),oe(n,x,c.vs,t);var i=v;(0,l.tO)(e.apiKeys,(function(e){i.length>0&&(i+=","),i+=e})),oe(n,D,i,t),oe(n,I,(0,l.m6)().toString(),t);var r=function(e){for(var t=0;t<e.batches.length;t++){var n=e.batches[t].Msfpc();if(n)return encodeURIComponent(n)}return v}(e);if((0,c.Sn)(r)&&(n.url+="&ext.intweb.msfpc="+r),W.shouldAddClockSkewHeaders()&&oe(n,P,W.getClockSkewHeaderValue(),t),m.getWParam){var o=m.getWParam();o>=0&&(n.url+="&w="+o)}for(var s=0;s<z.length;s++)n.url+="&"+z[s].name+"="+z[s].value;return n}(t,y);y=y||b.useHdrs;var A=(0,c.hK)();(0,o.Lm)(m,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var f=0;f<t.batches.length;f++)for(var v=t.batches[f].events(),x=0;x<v.length;x++){var T=v[x];if(ne){var P=T.timings=T.timings||{};we(P,"sendEventStart",A),we(P,"serializationStart",n),we(P,"serializationCompleted",r)}T[Q]>0?T[Q]++:T[Q]=1}ke(t.batches,1e3+(s||0),t.sendType,!0);var I={data:t.payloadBlob,urlString:b.url,headers:b.hdrs,_thePayload:t,_sendReason:s,timeout:w,disableXhrSync:R,disableFetchKeepAlive:O};y&&(re(I.headers,S)||(I.headers[S]="no-cache, no-store"),re(I.headers,C)||(I.headers[C]=_));var D=null;g&&(D=function(n){W.firstRequestSent();var r=function(n,r){!function(t,n,r,o){var s,a=9e3,d=null,p=!1,h=!1;try{var f=!0;if(typeof t!==K.jA){if(n){W.setClockSkew(n[E]);var m=n[k]||n["kill-duration-seconds"];(0,l.tO)(j.setKillSwitchTenants(n["kill-tokens"],m),(function(e){(0,l.tO)(r.batches,(function(t){if(t.iKey()===e){d=d||[];var n=t.split(0);r.numEvents-=n.count(),d.push(n)}}))}))}if(200==t||204==t)return void(a=200);((s=t)>=300&&s<500&&408!=s&&429!=s||501==s||505==s||r.numEvents<=0)&&(f=!1),a=9e3+t%1e3}if(f){a=100;var g=r.retryCnt;0===r.sendType&&(g<i?(p=!0,Se((function(){0===r.sendType&&B--,be(r.batches,g+1,r.isTeardown,ae?2:r.sendType,5)}),ae,V(g))):(h=!0,ae&&(a=8001)))}}finally{p||(W.setClockSkew(),function(t,n,i,r){try{r&&u._backOffTransmission(),200===n&&(r||t.isSync||u._clearBackOff(),function(e){if(ne){var t=(0,c.hK)();(0,l.tO)(e,(function(e){e&&e.count()>0&&function(e,t){ne&&(0,l.tO)(e,(function(e){we(e.timings=e.timings||{},"sendEventCompleted",t)}))}(e.events(),t)}))}}(t.batches)),ke(t.batches,n,t.sendType,!0)}finally{0===t.sendType&&(B--,5!==i&&e.sendQueuedRequests(t.sendType,i))}}(r,a,o,h)),ke(d,8004,r.sendType)}}(n,r,t,s)},o=t.isTeardown||t.isSync;try{g.sendPOST(n,r,o),e.sendListener&&e.sendListener(I,n,o,t.isBeacon)}catch(e){(0,p.jV)(h,"Unexpected exception sending payload. Ex:"+(0,d.eU)(e)),ue(r,0,{})}}),(0,o.Lm)(m,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(D)if(0===t.sendType&&B++,a&&!t.isBeacon&&3!==g._transport){var n={data:I.data,urlString:I.urlString,headers:(0,c.l7)({},I.headers),timeout:I.timeout,disableXhrSync:I.disableXhrSync,disableFetchKeepAlive:I.disableFetchKeepAlive},i=!1;(0,o.Lm)(m,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{e.sendHook(n,(function(e){i=!0,H||e._thePayload||(e._thePayload=e._thePayload||I._thePayload,e._sendReason=e._sendReason||I._sendReason),D(e)}),t.isSync||t.isTeardown)}catch(e){i||D(I)}}))}else D(I)}))}),(function(){return{thePayload:t,serializationStart:n,serializationCompleted:r,sendReason:s}}),t.isSync)}t.sizeExceed&&t.sizeExceed.length>0&&ke(t.sizeExceed,8003,t.sendType),t.failedEvts&&t.failedEvts.length>0&&ke(t.failedEvts,8002,t.sendType)}function Se(e,t,n){t?e():a.set(e,n)}function Ce(t){var n=e._responseHandlers;try{for(var i=0;i<n.length;i++)try{n[i](t)}catch(e){(0,p.kP)(h,1,519,"Response handler failed: "+e)}if(t){var r=JSON.parse(t);(0,c.Sn)(r.webResult)&&(0,c.Sn)(r.webResult[A])&&g.set("MSFPC",r.webResult[A],31536e3)}}catch(e){}}function ke(e,t,n,i){if(e&&e.length>0&&s){var r=s[(l=t,d=Z[l],(0,c.Sn)(d)||(d="oth",l>=9e3&&l<=9999?d="rspFail":l>=8e3&&l<=8999?d=b:l>=1e3&&l<=1999&&(d="send")),d)];if(r){var a=0!==n;(0,o.Lm)(m,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){Se((function(){try{r.call(s,e,t,a,n)}catch(e){(0,p.kP)(h,1,74,"send request notification failed: "+e)}}),i||a,0)}),(function(){return{batches:ye(e),reason:t,isSync:a,sendSync:i,sendType:n}}),!a)}}var l,d}e.initialize=function(e,t,n,i,o){var s;o||(o={}),L=e+L,ce=!!(0,l.o8)(o.avoidOptions)||!o.avoidOptions,m=t,g=t.getCookieMgr(),ne=!m.config.disableEventTimings;var a=!!m.config.enableCompoundKey;h=(u=n).diagLog();var c=o.valueSanitizer,v=o.stringifyObjects;(0,l.o8)(o.enableCompoundKey)||(a=!!o.enableCompoundKey),w=o.xhrTimeout,R=!!o.disableXhrSync,O=!!o.disableFetchKeepAlive,M=!1!==o.addNoResponse,$=!(0,d.b$)(),ee=new G(m,c,v,a),(0,l.le)(o.useSendBeacon)||($=!!o.useSendBeacon);var y=i,b=o.alwaysUseXhrOverride?i:null,_=o.alwaysUseXhrOverride?i:null,S=[3,2];if(!i){H=!1;var C=(0,d.k$)();C&&C.protocol&&"file:"===C.protocol.toLowerCase()&&(r=!1);var k=[];(0,d.b$)()?(k=[2,1],S=[2,1,3]):k=[1,2,3],(i=U(k=se(k,o.transports),!1))||(0,p.jV)(h,"No available transport to send events"),y=U(k,!0)}b||(b=U(S=se(S,o.unloadTransports),!0)),N=!H&&($&&(0,d.MF)()||!O&&(0,d.JO)(!0)),(s={})[0]=i,s[1]=y||U([1,2,3],!0),s[2]=b||y||U([1],!0),s[3]=_||U([2,3],!0)||y||U([1],!0),f=s},e._getDbgPlgTargets=function(){return[f[0],j,ee,f]},e.addQueryStringParameter=function(e,t){for(var n=0;n<z.length;n++)if(z[n].name===e)return void(z[n].value=t);z.push({name:e,value:t})},e.addHeader=function(e,t){J[e]=t},e.canSendRequest=function(){return me()&&W.allowRequestSending()},e.sendQueuedRequests=function(e,t){(0,l.o8)(e)&&(e=0),ae&&(e=fe(e),t=2),ve(Y,e,0)&&be(ge(),0,!1,e,t||0)},e.isCompletelyIdle=function(){return!F&&0===B&&0===Y.length},e.setUnloading=function(e){ae=e},e.addBatch=function(e){if(e&&e.count()>0){if(j.isTenantKilled(e.iKey()))return!1;Y.push(e)}return!0},e.teardown=function(){Y.length>0&&be(ge(),0,!0,2,2)},e.pause=function(){F=!0},e.resume=function(){F=!1,e.sendQueuedRequests(0,4)},e.sendSynchronousBatch=function(e,t,n){e&&e.count()>0&&((0,l.le)(t)&&(t=1),ae&&(t=fe(t),n=2),be([e],0,!1,t,n||0))}}))}return e.__ieDyn=1,e}();function ce(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout(e,t,n)}function le(e){clearTimeout(e)}function de(e,t){return{set:e||ce,clear:t||le}}var ue="eventsDiscarded",pe="overrideInstrumentationKey",he="maxEventRetryAttempts",fe="maxUnloadEventRetryAttempts";const me=function(e){function t(){var n,i=e.call(this)||this;i.identifier="PostChannel",i.priority=1011,i.version="3.2.9";var h,v,y,b,w,_,S,C=!1,k=[],E=null,x=!1,T=0,P=500,I=0,D=1e4,O={},A=f,L=null,j=null,U=0,q=0,K={},W=-1,$=!0,B=!1,H=6,z=2;return(0,r.Z)(t,i,(function(e,t){function i(e){"beforeunload"!==(e||(0,d.Jj)().event).type&&(B=!0,v.setUnloading(B)),te(2,2)}function r(e){B=!1,v.setUnloading(B)}function J(e,t){if(e.sendAttempt||(e.sendAttempt=0),e.latency||(e.latency=1),e.ext&&e.ext[N]&&delete e.ext[N],e.ext&&e.ext[M]&&e.ext[M].id&&delete e.ext[M].id,$&&(c.if,e.ext=(0,l.Ax)(e.ext),e.baseData&&(e.baseData=(0,l.Ax)(e.baseData)),e.data&&(e.data=(0,l.Ax)(e.data))),e.sync)if(U||x)e.latency=3,e.sync=!1;else if(v)return $&&(e=(0,l.Ax)(e)),void v.sendSynchronousBatch(F.create(e.iKey,[e]),!0===e.sync?1:e.sync,3);var n=e.latency,i=I,r=D;4===n&&(i=T,r=P);var o=!1;if(i<r)o=!re(e,t);else{var s=1,a=20;4===n&&(s=4,a=1),o=!0,function(e,t,n,i){for(;n<=t;){var r=ne(e,t,!0);if(r&&r.count()>0){var o=r.split(0,i),s=o.count();if(s>0)return 4===n?T-=s:I-=s,be(ue,[o],u.h.QueueFull),!0}n++}return oe(),!1}(e.iKey,e.latency,s,a)&&(o=!re(e,t))}o&&ye(ue,[e],u.h.QueueFull)}function G(e,t,n){var i=se(e,t,n);return v.sendQueuedRequests(t,n),i}function Y(){return I>0}function Q(){if(W>=0&&se(W,0,w)&&v.sendQueuedRequests(0,w),T>0&&!j&&!x){var e=O[A][2];e>=0&&(j=Z((function(){j=null,G(4,0,1),Q()}),e))}var t=O[A][1];!L&&!E&&t>=0&&!x&&(Y()?L=Z((function(){L=null,G(0===q?3:1,0,1),q++,q%=2,Q()}),t):q=0)}function X(){n=null,C=!1,k=[],E=null,x=!1,T=0,P=500,I=0,D=1e4,O={},A=f,L=null,j=null,U=0,q=0,h=null,K={},y=void 0,b=0,W=-1,w=null,$=!0,B=!1,H=6,z=2,_=null,S=de(),v=new ae(500,2,1,{requeue:ge,send:we,sent:_e,drop:Se,rspFail:Ce,oth:ke},S),me(),K[4]={batches:[],iKeyMap:{}},K[3]={batches:[],iKeyMap:{}},K[2]={batches:[],iKeyMap:{}},K[1]={batches:[],iKeyMap:{}},Ee()}function Z(e,t){0===t&&U&&(t=1);var n=1e3;return U&&(n=V(U-1)),S.set(e,t*n)}function ee(){return null!==L&&(S.clear(L),L=null,q=0,!0)}function te(e,t){ee(),E&&(S.clear(E),E=null),x||G(1,e,t)}function ne(e,t,n){var i=K[t];i||(i=K[t=1]);var r=i.iKeyMap[e];return!r&&n&&(r=F.create(e),i.batches.push(r),i.iKeyMap[e]=r),r}function ie(t,n){v.canSendRequest()&&!U&&(y>0&&I>y&&(n=!0),n&&null==E&&e.flush(t,null,20))}function re(e,t){$&&(e=(0,l.Ax)(e));var n=e.latency,i=ne(e.iKey,n,!0);return!!i.addEvent(e)&&(4!==n?(I++,t&&0===e.sendAttempt&&ie(!e.sync,b>0&&i.count()>=b)):T++,!0)}function oe(){for(var e=0,t=0,n=function(n){var i=K[n];i&&i.batches&&(0,l.tO)(i.batches,(function(i){4===n?e+=i.count():t+=i.count()}))},i=1;i<=4;i++)n(i);I=t,T=e}function se(t,n,i){var r=!1,s=0===n;return!s||v.canSendRequest()?(0,o.Lm)(e.core,(function(){return"PostChannel._queueBatches"}),(function(){for(var e=[],n=4;n>=t;){var i=K[n];i&&i.batches&&i.batches.length>0&&((0,l.tO)(i.batches,(function(t){v.addBatch(t)?r=r||t&&t.count()>0:e=e.concat(t.events()),4===n?T-=t.count():I-=t.count()})),i.batches=[],i.iKeyMap={}),n--}e.length>0&&ye(ue,e,u.h.KillSwitch),r&&W>=t&&(W=-1,w=0)}),(function(){return{latency:t,sendType:n,sendReason:i}}),!s):(W=W>=0?Math.min(W,t):t,w=Math.max(w,i)),r}function ce(e,t){G(1,0,t),oe(),le((function(){e&&e(),k.length>0?E=Z((function(){E=null,ce(k.shift(),t)}),0):(E=null,Q())}))}function le(e){v.isCompletelyIdle()?e():E=Z((function(){E=null,le(e)}),.25)}function me(){(O={})[f]=[2,1,0],O[m]=[6,3,0],O[g]=[18,9,0]}function ge(t,n){var i=[],r=H;B&&(r=z),(0,l.tO)(t,(function(t){t&&t.count()>0&&(0,l.tO)(t.events(),(function(t){t&&(t.sync&&(t.latency=4,t.sync=!1),t.sendAttempt<r?((0,c.if)(t,e.identifier),J(t,!1)):i.push(t))}))})),i.length>0&&ye(ue,i,u.h.NonRetryableStatus),B&&te(2,2)}function ve(t,n){var i=e._notificationManager||{},r=i[t];if(r)try{r.apply(i,n)}catch(n){(0,p.kP)(e.diagLog(),1,74,t+" notification failed: "+n)}}function ye(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];t&&t.length>0&&ve(e,[t].concat(n))}function be(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];t&&t.length>0&&(0,l.tO)(t,(function(t){t&&t.count()>0&&ve(e,[t.events()].concat(n))}))}function we(e,t,n){e&&e.length>0&&ve("eventsSendRequest",[t>=1e3&&t<=1999?t-1e3:0,!0!==n])}function _e(e,t){be("eventsSent",e,t),Q()}function Se(e,t){be(ue,e,t>=8e3&&t<=8999?t-8e3:u.h.Unknown)}function Ce(e){be(ue,e,u.h.NonRetryableStatus),Q()}function ke(e,t){be(ue,e,u.h.Unknown),Q()}function Ee(){b=n&&n.disableAutoBatchFlushLimit?0:Math.max(1500,D/6)}X(),e._getDbgPlgTargets=function(){return[v]},e.initialize=function(d,u,p){(0,o.Lm)(u,(function(){return"PostChannel:initialize"}),(function(){var o=u;t.initialize(d,u,p);try{u.addUnloadCb,_=(0,s.jU)((0,a.J)(e.identifier),u.evtNamespace&&u.evtNamespace());var f=e._getTelCtx();d.extensionConfig[e.identifier]=d.extensionConfig[e.identifier]||{},n=f.getExtCfg(e.identifier),S=de(n.setTimeoutOverride,n.clearTimeoutOverride),$=!n.disableOptimizeObj&&(0,c.mJ)(),function(e){var t=e.getWParam;e.getWParam=function(){var e=0;return n.ignoreMc1Ms0CookieProcessing&&(e|=2),e|t()}}(o),n.eventsLimitInMem>0&&(D=n.eventsLimitInMem),n.immediateEventLimit>0&&(P=n.immediateEventLimit),n.autoFlushEventsLimit>0&&(y=n.autoFlushEventsLimit),(0,l.hj)(n[he])&&(H=n[he]),(0,l.hj)(n[fe])&&(z=n[fe]),Ee(),n.httpXHROverride&&n.httpXHROverride.sendPOST&&(h=n.httpXHROverride),(0,c.Sn)(d.anonCookieName)&&v.addQueryStringParameter("anoncknm",d.anonCookieName),v.sendHook=n.payloadPreprocessor,v.sendListener=n.payloadListener;var m=n.overrideEndpointUrl?n.overrideEndpointUrl:d.endpointUrl;e._notificationManager=u.getNotifyMgr(),v.initialize(m,e.core,e,h,n);var g=d.disablePageUnloadEvents||[];(0,s.c9)(i,g,_),(0,s.TJ)(i,g,_),(0,s.nD)(r,d.disablePageShowEvents,_)}catch(t){throw e.setInitialized(!1),t}}),(function(){return{coreConfig:d,core:u,extensions:p}}))},e.processTelemetry=function(t,i){(0,c.if)(t,e.identifier);var r=(i=e._getTelCtx(i)).getExtCfg(e.identifier),o=!!n.disableTelemetry;r&&(o=o||!!r.disableTelemetry);var s=t;o||C||(n[pe]&&(s.iKey=n[pe]),r&&r[pe]&&(s.iKey=r[pe]),J(s,!0),B?te(2,2):Q()),e.processNext(s,i)},e._doTeardown=function(e,t){te(2,2),C=!0,v.teardown(),(0,s.JA)(null,_),(0,s.C9)(null,_),(0,s.Yl)(null,_),X()},e.setEventQueueLimits=function(e,t){D=e>0?e:1e4,y=t>0?t:0,Ee();var n=I>e;if(!n&&b>0)for(var i=1;!n&&i<=3;i++){var r=K[i];r&&r.batches&&(0,l.tO)(r.batches,(function(e){e&&e.count()>=b&&(n=!0)}))}ie(!0,n)},e.pause=function(){ee(),x=!0,v.pause()},e.resume=function(){x=!1,v.resume(),Q()},e.addResponseHandler=function(e){v._responseHandlers.push(e)},e._loadTransmitProfiles=function(e){ee(),me(),A=f,Q(),(0,l.rW)(e,(function(e,t){var n=t.length;if(n>=2){var i=n>2?t[2]:0;if(t.splice(0,n-2),t[1]<0&&(t[0]=-1),t[1]>0&&t[0]>0){var r=t[0]/t[1];t[0]=Math.ceil(r)*t[1]}i>=0&&t[1]>=0&&i>t[1]&&(i=t[1]),t.push(i),O[e]=t}}))},e.flush=function(e,t,n){if(void 0===e&&(e=!0),!x)if(n=n||1,e)null==E?(ee(),se(1,0,n),E=Z((function(){E=null,ce(t,n)}),0)):k.push(t);else{var i=ee();G(1,1,n),null!=t&&t(),i&&Q()}},e.setMsaAuthTicket=function(e){v.addHeader(R,e)},e.hasEvents=Y,e._setTransmitProfile=function(e){A!==e&&void 0!==O[e]&&(ee(),A=e,Q())},e._backOffTransmission=function(){U<4&&(U++,ee(),Q())},e._clearBackOff=function(){U&&(U=0,ee(),Q())},(0,l.l_)(e,"_setTimeoutOverride",(function(){return S.set}),(function(e){S=de(e,S.clear)})),(0,l.l_)(e,"_clearTimeoutOverride",(function(){return S.clear}),(function(e){S=de(S.set,e)}))})),i}return(0,i.ne)(t,e),t.__ieDyn=1,t}(h.i)},50951:(e,t,n)=>{"use strict";n.d(t,{By:()=>r});var i=n(24869);function r(e){var t={};return(0,i.rW)(e,(function(e,n){t[e]=n,t[n]=e})),(0,i._A)(t)}},28452:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var i=(0,n(50951).By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},87951:(e,t,n)=>{"use strict";n.d(t,{i:()=>d});var i=n(29141),r=n(98145),o=n(24869),s=n(96335),a=n(31030),c=n(38593),l="getPlugin",d=function(){function e(){var t,n,d,u,p,h=this;function f(e){void 0===e&&(e=null);var t=e;if(!t){var i=n||(0,a.CD)(null,{},h[s.oV]);t=d&&d[l]?i[r.zV](null,d[l]):i[r.zV](null,d)}return t}function m(e,t,i){e&&(0,o.sO)(e,s.Zh,[],null,o.le),!i&&t&&(i=t[r.SD]()[r.W2]());var c=d;d&&d[l]&&(c=d[l]()),h[s.oV]=t,n=(0,a.CD)(i,e,t,c)}function g(){t=!1,h[s.oV]=null,n=null,d=null,p=[],u=(0,c.Y)()}g(),(0,i.Z)(e,h,(function(e){e[r.VL]=function(e,n,i,r){m(e,n,r),t=!0},e[r.fi]=function(t,n){var i,c=e[s.oV];if(c&&(!t||c===t[s.oV]())){var h,f=!1,m=t||(0,a.Bt)(null,c,d&&d[l]?d[l]():d),v=n||((i={reason:0})[r.d]=!1,i);return e[r.F3]&&!0===e[r.F3](m,v,y)?h=!0:y(),h}function y(){if(!f){f=!0,u.run(m,n);var e=p;p=[],(0,o.tO)(e,(function(e){e.rm()})),!0===h&&m[r.uL](v),g()}}},e[r.Tu]=function(t,n){var i=e[s.oV];if(i&&(!t||i===t[s.oV]())){var o,c=!1,u=t||(0,a.xy)(null,i,d&&d[l]?d[l]():d),p=n||{reason:0};return e._doUpdate&&!0===e._doUpdate(u,p,h)?o=!0:h(),o}function h(){c||(c=!0,m(u.getCfg(),u.core(),u[r.W2]()))}},e._addHook=function(e){e&&((0,o.kJ)(e)?p=p.concat(e):p[r.MW](e))},(0,o.Oi)(e,"_addUnloadCb",(function(){return u}),"add")})),h[r.mc]=function(e){return f(e)[r.mc]()},h[r.yl]=function(){return t},h.setInitialized=function(e){t=e},h[r.Jd]=function(e){d=e},h[r.uL]=function(e,t){t?t[r.uL](e):d&&(0,o.mf)(d[s.hL])&&d[s.hL](e,null)},h._getTelCtx=f}return e.__ieDyn=1,e}()},88140:(e,t,n)=>{"use strict";n.d(t,{JP:()=>E,Nz:()=>x,UY:()=>A,kj:()=>S,p7:()=>T});var i=n(98145),r=n(29339),o=n(49251),s=n(24869),a=n(96335),c="toGMTString",l="toUTCString",d="cookie",u="expires",p="enabled",h="isCookieUseDisabled",f="disableCookiesUsage",m="_ckMgr",g=null,v=null,y=null,b=(0,o.Me)(),w={},_={};function S(e,t){var n=x[m]||_[m];return n||(n=x[m]=x(e,t),_[m]=n),n}function C(e){return!e||e.isEnabled()}function k(e,t){return!!(t&&e&&(0,s.kJ)(e.ignoreCookies))&&-1!==e.ignoreCookies[i.ou](t)}function E(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var r=t[i.Lk];n=r[m]?r[m]:x(t)}return n||(n=S(t,(e||{})[i.eZ])),n}function x(e,t){var n,r=function(e){var t=e[i.Lk]=e[i.Lk]||{};if((0,s.sO)(t,"domain",e.cookieDomain,s.BX,s.le),(0,s.sO)(t,"path",e.cookiePath||"/",null,s.le),(0,s.le)(t[p])){var n=void 0;(0,s.o8)(e[h])||(n=!e[h]),(0,s.o8)(e[f])||(n=!e[f]),t[p]=n}return t}(e||_),d=r.path||"/",g=r.domain,y=!1!==r[p],b=((n={isEnabled:function(){var e=y&&T(t),n=_[m];return e&&n&&b!==n&&(e=C(n)),e}})[i.$h]=function(e){y=!1!==e},n.set=function(e,t,n,p,h){var f=!1;if(C(b)&&!function(e,t){return!!(t&&e&&(0,s.kJ)(e.blockedCookies)&&-1!==e.blockedCookies[i.ou](t))||k(e,t)}(r,e)){var m={},y=(0,s.nd)(t||a.qS),w=y[i.ou](";");if(-1!==w&&(y=(0,s.nd)(t[i.zc](0,w)),m=P(t[i.zc](w+1))),(0,s.sO)(m,"domain",p||g,s.fQ,s.o8),!(0,s.le)(n)){var _=(0,o.w1)();if((0,s.o8)(m[u])){var S=(0,s.m6)()+1e3*n;if(S>0){var E=new Date;E.setTime(S),(0,s.sO)(m,u,I(E,_?c:l)||I(E,_?c:l)||a.qS,s.fQ)}}_||(0,s.sO)(m,"max-age",a.qS+n,null,s.o8)}var x=(0,o.k$)();x&&"https:"===x.protocol&&((0,s.sO)(m,"secure",null,null,s.o8),null===v&&(v=!A(((0,o.jW)()||{})[i.qV])),v&&(0,s.sO)(m,"SameSite","None",null,s.o8)),(0,s.sO)(m,"path",h||d,null,s.o8),(r.setCookie||O)(e,D(y,m)),f=!0}return f},n.get=function(e){var t=a.qS;return C(b)&&!k(r,e)&&(t=(r.getCookie||R)(e)),t},n.del=function(e,t){var n=!1;return C(b)&&(n=b.purge(e,t)),n},n.purge=function(e,n){var i,s=!1;if(T(t)){var c=((i={}).path=n||"/",i[u]="Thu, 01 Jan 1970 00:00:01 GMT",i);(0,o.w1)()||(c["max-age"]="0"),(r.delCookie||O)(e,D(a.qS,c)),s=!0}return s},n);return b[m]=b,b}function T(e){if(null===g){g=!1;try{g=void 0!==(b||{})[d]}catch(t){(0,r.kP)(e,2,68,"Cannot access document.cookie - "+(0,s.jj)(t),{exception:(0,o.eU)(t)})}}return g}function P(e){var t={};if(e&&e[i.R5]){var n=(0,s.nd)(e)[i.w6](";");(0,s.tO)(n,(function(e){if(e=(0,s.nd)(e||a.qS)){var n=e[i.ou]("=");-1===n?t[e]=null:t[(0,s.nd)(e[i.zc](0,n))]=(0,s.nd)(e[i.zc](n+1))}}))}return t}function I(e,t){return(0,s.mf)(e[t])?e[t]():null}function D(e,t){var n=e||a.qS;return(0,s.rW)(t,(function(e,t){n+="; "+e+((0,s.le)(t)?a.qS:"="+t)})),n}function R(e){var t=a.qS;if(b){var n=b[d]||a.qS;y!==n&&(w=P(n),y=n),t=(0,s.nd)(w[e]||a.qS)}return t}function O(e,t){b&&(b[d]=e+"="+t)}function A(e){return!(!(0,s.HD)(e)||!(0,s._Q)(e,"CPU iPhone OS 12")&&!(0,s._Q)(e,"iPad; CPU OS 12")&&!((0,s._Q)(e,"Macintosh; Intel Mac OS X 10_14")&&(0,s._Q)(e,"Version/")&&(0,s._Q)(e,"Safari"))&&(!(0,s._Q)(e,"Macintosh; Intel Mac OS X 10_14")||!(0,s.Id)(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!(0,s._Q)(e,"Chrome/5")&&!(0,s._Q)(e,"Chrome/6")&&(!(0,s._Q)(e,"UnrealEngine")||(0,s._Q)(e,"Chrome"))&&!(0,s._Q)(e,"UCBrowser/12")&&!(0,s._Q)(e,"UCBrowser/11"))}},28956:(e,t,n)=>{"use strict";n.d(t,{DO:()=>m,GW:()=>h,Jj:()=>f,zB:()=>v});var i,r=n(30175),o=n(98145),s=n(88140),a=n(49251),c=n(47954),l=n(24869),d=n(96335),u=n(19406),p=null;function h(){var e=m();return e[o.zc](0,8)+"-"+e[o.zc](8,12)+"-"+e[o.zc](12,16)+"-"+e[o.zc](16,20)+"-"+e[o.zc](20)}function f(){var e=(0,a.r)();return e&&e.now?e.now():(0,l.m6)()}function m(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=d.qS,i=0;i<4;i++)n+=t[15&(e=(0,u._l)())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var r=t[8+(3&(0,u._l)())|0];return n[o.Jn](0,8)+n[o.Jn](9,4)+"4"+n[o.Jn](13,3)+r+n[o.Jn](16,3)+n[o.Jn](19,12)}var g={_canUseCookies:void 0,isTypeof:l.Ym,isUndefined:l.o8,isNullOrUndefined:l.le,hasOwnProperty:l.nr,isFunction:l.mf,isObject:l.Kn,isDate:l.J_,isArray:l.kJ,isError:l.VZ,isString:l.HD,isNumber:l.hj,isBoolean:l.jn,toISOString:l.Y6,arrForEach:l.tO,arrIndexOf:l.UA,arrMap:l.Mr,arrReduce:l.Xz,strTrim:l.nd,objCreate:r.pu,objKeys:l.FY,objDefineAccessors:l.l_,addEventHandler:c.Ib,dateNow:l.m6,isIE:a.w1,disableCookies:function(){var e,t,n,r;(n=(0,s.kj)(e,t),r=g._canUseCookies,null===p&&(p=[],i=r,(0,l.l_)(g,"_canUseCookies",(function(){return i}),(function(e){i=e,(0,l.tO)(p,(function(t){t[o.$h](e)}))}))),-1===(0,l.UA)(p,n)&&p[o.MW](n),(0,l.jn)(r)&&n[o.$h](r),(0,l.jn)(i)&&n[o.$h](i),n)[o.$h](!1)},newGuid:h,perfNow:f,newId:u.pZ,randomValue:u.az,random32:u._l,mwcRandomSeed:u.CN,mwcRandom32:u.F6,generateW3CId:m},v={Attach:c.pZ,AttachEvent:c.pZ,Detach:c.pD,DetachEvent:c.pD}},87624:(e,t,n)=>{"use strict";n.d(t,{J:()=>h,K:()=>f});var i=n(1550),r=n(98145),o=n(24869),s=n(96335),a=n(19406),c=i.RJ,l="2.8.10",d="."+(0,a.pZ)(6),u=0;function p(e){return 1===e[r.xv]||9===e[r.xv]||!+e[r.xv]}function h(e,t){return void 0===t&&(t=!1),(0,o.Gf)(e+u+++(t?"."+l:s.qS)+d)}function f(e){var t={id:h("_aiData-"+(e||s.qS)+"."+l),accept:function(e){return p(e)},get:function(e,n,i,r){var s=e[t.id];return s?s[(0,o.Gf)(n)]:(r&&((s=function(e,t){var n=t[e.id];if(!n){n={};try{p(t)&&(function(e,t,n){if(c)try{return c(e,t,{value:n,enumerable:!1,configurable:!0}),!0}catch(e){}return!1}(t,e.id,n)||(t[e.id]=n))}catch(e){}}return n}(t,e))[(0,o.Gf)(n)]=i),i)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}},28341:(e,t,n)=>{"use strict";n.d(t,{j:()=>l,p:()=>d});var i,r=n(98145),o=n(49251),s=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],a=null;function c(e,t){return function(){var n=arguments,i=l(t);if(i){var o=i.listener;o&&o[e]&&o[e][r.ZV](o,n)}}}function l(e){var t,n=a;return n||!0===e.disableDbgExt||(n=a||((t=(0,o.a8)("Microsoft"))&&(a=t.ApplicationInsights),a)),n?n.ChromeDbgExt:null}function d(e){if(!i){i={};for(var t=0;t<s[r.R5];t++)i[s[t]]=c(s[t],e)}return i}},29339:(e,t,n)=>{"use strict";n.d(t,{AQ:()=>h,L4:()=>v,jV:()=>g,kP:()=>m,lQ:()=>u,vH:()=>p});var i=n(29141),r=n(98145),o=n(28341),s=n(49251),a=n(24869),c=n(96335);function l(e){return e?'"'+e[r.i7](/\"/g,c.qS)+'"':c.qS}function d(e,t){var n=(0,s.dr)();if(n){var i="log";n[e]&&(i=e),(0,a.mf)(n[i])&&n[i](t)}}var u=function(){function e(e,t,n,i){void 0===n&&(n=!1);var o=this;o[r.Gc]=e,o[r.gU]=(n?"AI: ":"AI (Internal): ")+e;var a=c.qS;(0,s.nS)()&&(a=(0,s.xA)().stringify(i));var d=(t?" message:"+l(t):c.qS)+(i?" props:"+l(a):c.qS);o[r.gU]+=d}return e.dataType="MessageData",e}();function p(e,t){return(e||{})[r.eZ]||new h(t)}var h=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n,l,p,h,f=0,m={};(0,i.Z)(e,this,(function(e){function i(t,n){if(!(f>=p)){var i=!0,o="AITR_"+n[r.Gc];if(m[o]?i=!1:m[o]=!0,i&&(t<=l&&(e.queue[r.MW](n),f++,g(1===t?"error":"warn",n)),f===p)){var s="Internal events throttle limit per PageView reached for this app.",a=new u(23,s,!1);e.queue[r.MW](a),1===t?e[c.ys](s):e[c.cL](s)}}}function g(e,n){var i=(0,o.j)(t||{});i&&i[r.mc]&&i[r.mc](e,n)}!function(e){n=(0,a.v4)(e.loggingLevelConsole,0),l=(0,a.v4)(e.loggingLevelTelemetry,1),p=(0,a.v4)(e.maxMessageLimit,25),h=(0,a.v4)(e[r.Fr],!1)}(t||{}),e.consoleLoggingLevel=function(){return n},e.telemetryLoggingLevel=function(){return l},e.maxInternalMessageLimit=function(){return p},e[r.Fr]=function(){return h},e.throwInternal=function(t,o,l,d,p){void 0===p&&(p=!1);var f=new u(o,l,p,d);if(h)throw(0,s.eU)(f);var v=1===t?c.ys:c.cL;if((0,a.o8)(f[r.gU]))g("throw"+(1===t?"Critical":"Warning"),f);else{if(p){var y=+f[r.Gc];!m[y]&&n>=t&&(e[v](f[r.gU]),m[y]=!0)}else n>=t&&e[v](f[r.gU]);i(t,f)}},e[c.cL]=function(e){d("warn",e),g("warning",e)},e[c.ys]=function(e){d("error",e),g("error",e)},e.resetInternalMessageCount=function(){f=0,m={}},e[r.jk]=i}))}return e.__ieDyn=1,e}();function f(e){return e||new h}function m(e,t,n,i,r,o){void 0===o&&(o=!1),f(e).throwInternal(t,n,i,r,o)}function g(e,t){f(e)[c.cL](t)}function v(e,t,n){f(e)[r.jk](t,n)}},49251:(e,t,n)=>{"use strict";n.d(t,{JO:()=>Q,Jj:()=>O,MF:()=>Y,MX:()=>$,Me:()=>N,Nv:()=>A,Ym:()=>R,Z3:()=>Z,a8:()=>D,b$:()=>H,cp:()=>X,d6:()=>M,dI:()=>I,dr:()=>q,eU:()=>G,ed:()=>te,fE:()=>j,gz:()=>B,jW:()=>L,k$:()=>U,nS:()=>V,pI:()=>ne,r:()=>K,s1:()=>F,sA:()=>J,w1:()=>z,xA:()=>W});var i=n(1550),r=n(30175),o=n(98145),s=n(24869),a=n(96335),c="window",l="document",d="documentMode",u="navigator",p="history",h="location",f="console",m="performance",g="JSON",v="crypto",y="msCrypto",b="ReactNative",w="msie",_="trident/",S="XMLHttpRequest",C=null,k=null,E=!1,x=null,T=null;function P(e,t){var n=!1;if(e){try{if(!(n=t in e)){var r=e[i.hB];r&&(n=t in r)}}catch(e){}if(!n)try{var o=new e;n=!(0,s.o8)(o[t])}catch(e){}}return n}function I(e){E=e}function D(e){var t=(0,r.Rd)();return t&&t[e]?t[e]:e===c&&R()?window:null}function R(){return Boolean(typeof window===i.fK&&window)}function O(){return R()?window:D(c)}function A(){return Boolean(typeof document===i.fK&&document)}function N(){return A()?document:D(l)}function M(){return Boolean(typeof navigator===i.fK&&navigator)}function L(){return M()?navigator:D(u)}function j(){return Boolean(typeof history===i.fK&&history)}function F(){return j()?history:D(p)}function U(e){if(e&&E){var t=D("__mockLocation");if(t)return t}return typeof location===i.fK&&location?location:D(h)}function q(){return typeof console!==i.jA?console:D(f)}function K(){return D(m)}function V(){return Boolean(typeof JSON===i.fK&&JSON||null!==D(g))}function W(){return V()?JSON||D(g):null}function $(){return D(v)}function B(){return D(y)}function H(){var e=L();return!(!e||!e.product)&&e.product===b}function z(){var e=L();if(e&&(e[o.qV]!==k||null===C)){var t=((k=e[o.qV])||a.qS)[o.T1]();C=(0,s._Q)(t,w)||(0,s._Q)(t,_)}return C}function J(e){if(void 0===e&&(e=null),!e){var t=L()||{};e=t?(t[o.qV]||a.qS)[o.T1]():a.qS}var n=(e||a.qS)[o.T1]();if((0,s._Q)(n,w)){var i=N()||{};return Math.max(parseInt(n[o.w6](w)[1]),i[d]||0)}if((0,s._Q)(n,_)){var r=parseInt(n[o.w6](_)[1]);if(r)return r+4}return null}function G(e){var t=Object[i.hB].toString[o._S](e),n=a.qS;return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e[o.I]+"'":V()&&(n=W().stringify(e)),t+n}function Y(){return null===T&&(T=M()&&Boolean(L().sendBeacon)),T}function Q(e){var t=!1;try{t=!!D("fetch");var n=D("Request");t&&e&&n&&(t=P(n,"keepalive"))}catch(e){}return t}function X(){return null===x&&(x=typeof XDomainRequest!==i.jA)&&Z()&&(x=x&&!P(D(S),"withCredentials")),x}function Z(){var e=!1;try{e=!!D(S)}catch(e){}return e}function ee(e,t){if(e)for(var n=0;n<e[o.R5];n++){var i=e[n];if(i[o.I]&&i[o.I]===t)return i}return{}}function te(e){var t=N();return t&&e?ee(t.querySelectorAll("meta"),e).content:null}function ne(e){var t,n=K();if(n){var i=n.getEntriesByType("navigation")||[];t=ee((i[o.R5]>0?i[0]:{}).serverTiming,e).description}return t}},47954:(e,t,n)=>{"use strict";n.d(t,{C1:()=>F,C9:()=>B,Ib:()=>j,JA:()=>W,QY:()=>N,TJ:()=>$,XO:()=>A,Yl:()=>z,c9:()=>V,jU:()=>O,nD:()=>H,nJ:()=>K,pD:()=>L,pZ:()=>M,um:()=>P,yw:()=>q});var i=n(98145),r=n(87624),o=n(49251),s=n(24869),a=n(96335),c="on",l="attachEvent",d="addEventListener",u="detachEvent",p="removeEventListener",h="events",f="visibilitychange",m="pagehide",g="pageshow",v="unload",y="beforeunload",b=(0,r.J)("aiEvtPageHide"),w=(0,r.J)("aiEvtPageShow"),_=/\.[\.]+/g,S=/[\.]+$/,C=1,k=(0,r.K)("events"),E=/^([^.]*)(?:\.(.+)|)/;function x(e){return e&&e[i.i7]?e[i.i7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,a.qS):e}function T(e,t){var n;if(t){var r=a.qS;(0,s.kJ)(t)?(r=a.qS,(0,s.tO)(t,(function(e){(e=x(e))&&("."!==e[0]&&(e="."+e),r+=e)}))):r=x(t),r&&("."!==r[0]&&(r="."+r),e=(e||a.qS)+r)}var o=E.exec(e||a.qS)||[];return(n={})[i.P6]=o[1],n.ns=(o[2]||a.qS).replace(_,".").replace(S,a.qS)[i.w6](".").sort().join("."),n}function P(e,t,n){var r=[],o=k.get(e,h,{},!1),c=T(t,n);return(0,s.rW)(o,(function(e,t){(0,s.tO)(t,(function(e){var t;c[i.P6]&&c[i.P6]!==e.evtName[i.P6]||c.ns&&c.ns!=c.ns||r[i.MW](((t={})[i.I]=e.evtName[i.P6]+(e.evtName.ns?"."+e.evtName.ns:a.qS),t.handler=e[i.Kn],t))}))})),r}function I(e,t,n){void 0===n&&(n=!0);var i=k.get(e,h,{},n),r=i[t];return r||(r=i[t]=[]),r}function D(e,t,n,r){e&&t&&t[i.P6]&&(e[p]?e[p](t[i.P6],n,r):e[u]&&e[u](c+t[i.P6],n))}function R(e,t,n,r){for(var o=t[i.R5];o--;){var s=t[o];s&&(n.ns&&n.ns!==s.evtName.ns||r&&!r(s)||(D(e,s.evtName,s[i.Kn],s.capture),t[i.cb](o,1)))}}function O(e,t){return t?T("xx",(0,s.kJ)(t)?[e].concat(t):[e,t]).ns[i.w6]("."):e}function A(e,t,n,r,o){var s;void 0===o&&(o=!1);var a=!1;if(e)try{var u=T(t,r);if(a=function(e,t,n,r){var o=!1;return e&&t&&t[i.P6]&&n&&(e[d]?(e[d](t[i.P6],n,r),o=!0):e[l]&&(e[l](c+t[i.P6],n),o=!0)),o}(e,u,n,o),a&&k.accept(e)){var p=((s={guid:C++,evtName:u})[i.Kn]=n,s.capture=o,s);I(e,u.type)[i.MW](p)}}catch(e){}return a}function N(e,t,n,r,o){if(void 0===o&&(o=!1),e)try{var a=T(t,r),c=!1;!function(e,t,n){if(t[i.P6])R(e,I(e,t[i.P6]),t,n);else{var r=k.get(e,h,{});(0,s.rW)(r,(function(i,r){R(e,r,t,n)})),0===(0,s.FY)(r)[i.R5]&&k.kill(e,h)}}(e,a,(function(e){return!((!a.ns||n)&&e[i.Kn]!==n||(c=!0,0))})),c||D(e,a,n,o)}catch(e){}}function M(e,t,n,i){return void 0===i&&(i=!1),A(e,t,n,null,i)}function L(e,t,n,i){void 0===i&&(i=!1),N(e,t,n,null,i)}function j(e,t,n){var i=!1,r=(0,o.Jj)();r&&(i=A(r,e,t,n),i=A(r.body,e,t,n)||i);var s=(0,o.Me)();return s&&(i=A(s,e,t,n)||i),i}function F(e,t,n){var i=(0,o.Jj)();i&&(N(i,e,t,n),N(i.body,e,t,n));var r=(0,o.Me)();r&&N(r,e,t,n)}function U(e,t,n,r){var o=!1;return t&&e&&e[i.R5]>0&&(0,s.tO)(e,(function(e){e&&(n&&-1!==(0,s.UA)(n,e)||(o=j(e,t,r)||o))})),o}function q(e,t,n,r){var o=!1;return t&&e&&(0,s.kJ)(e)&&!(o=U(e,t,n,r))&&n&&n[i.R5]>0&&(o=U(e,t,null,r)),o}function K(e,t,n){e&&(0,s.kJ)(e)&&(0,s.tO)(e,(function(e){e&&F(e,t,n)}))}function V(e,t,n){return q([y,v,m],e,t,n)}function W(e,t){K([y,v,m],e,t)}function $(e,t,n){var i=O(b,n),r=U([m],e,t,i);return t&&-1!==(0,s.UA)(t,f)||(r=U([f],(function(t){var n=(0,o.Me)();e&&n&&"hidden"===n.visibilityState&&e(t)}),t,i)||r),!r&&t&&(r=$(e,null,n)),r}function B(e,t){var n=O(b,t);K([m],e,n),K([f],null,n)}function H(e,t,n){var i=O(w,n),r=U([g],e,t,i);return!(r=U([f],(function(t){var n=(0,o.Me)();e&&n&&"visible"===n.visibilityState&&e(t)}),t,i)||r)&&t&&(r=H(e,null,n)),r}function z(e,t){var n=O(w,t);K([g],e,n),K([f],null,n)}},24869:(e,t,n)=>{"use strict";n.d(t,{Ax:()=>Ee,BX:()=>j,F:()=>ye,FL:()=>ue,FY:()=>ae,Gf:()=>K,HD:()=>G,Id:()=>W,J_:()=>H,Kn:()=>U,Mr:()=>ne,Oi:()=>Ce,UA:()=>te,VZ:()=>J,Vb:()=>ke,Xi:()=>pe,Xz:()=>ie,Y6:()=>Z,Ym:()=>N,_A:()=>de,_Q:()=>B,_y:()=>we,cf:()=>Se,fQ:()=>be,hj:()=>Y,jj:()=>fe,jn:()=>Q,kJ:()=>z,l_:()=>ce,le:()=>L,m6:()=>he,mf:()=>q,mm:()=>xe,nd:()=>re,nr:()=>F,o8:()=>M,qK:()=>ge,rW:()=>V,sO:()=>me,tO:()=>ee,v4:()=>ve,xe:()=>$});var i=n(1550),r=n(30175),o=n(98145),s=n(96335),a="toISOString",c="endsWith",l="startsWith",d="indexOf",u="map",p="reduce",h="trim",f="toString",m="__proto__",g="constructor",v=i.RJ,y=i.Pw.freeze,b=i.Pw.seal,w=i.Pw.keys,_=String[i.hB],S=_[h],C=_[c],k=_[l],E=Date[i.hB][a],x=Array.isArray,T=i.V4[f],P=i.CY[f],I=P[o._S](i.Pw),D=/-([a-z])/g,R=/([^\w\d_$])/g,O=/^(\d+[\w\d_$])/,A=Object.getPrototypeOf;function N(e,t){return typeof e===t}function M(e){return void 0===e||typeof e===i.jA}function L(e){return null===e||M(e)}function j(e){return!L(e)}function F(e,t){return!(!e||!i.CY[o._S](e,t))}function U(e){return!(!e||typeof e!==i.fK)}function q(e){return!(!e||typeof e!==i.cb)}function K(e){var t=e;return t&&G(t)&&(t=(t=(t=t[o.i7](D,(function(e,t){return t.toUpperCase()})))[o.i7](R,"_"))[o.i7](O,(function(e,t){return"_"+t}))),t}function V(e,t){if(e)for(var n in e)i.CY[o._S](e,n)&&t[o._S](e,n,e[n])}function W(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=C?e[c](t):function(e,t){var n=!1,i=t?t[o.R5]:0,r=e?e[o.R5]:0;if(i&&r&&r>=i&&!(n=e===t)){for(var s=r-1,a=i-1;a>=0;a--){if(e[s]!=t[a])return!1;s--}n=!0}return n}(e,t)),n}function $(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=k?e[l](t):function(e,t){var n=!1,i=t?t[o.R5]:0;if(e&&i&&e[o.R5]>=i&&!(n=e===t)){for(var r=0;r<i;r++)if(e[r]!==t[r])return!1;n=!0}return n}(e,t)),n}function B(e,t){return!(!e||!t)&&-1!==e[o.ou](t)}function H(e){return!(!e||"[object Date]"!==T[o._S](e))}var z=x||function(e){return!(!e||"[object Array]"!==T[o._S](e))};function J(e){return!(!e||"[object Error]"!==T[o._S](e))}function G(e){return"string"==typeof e}function Y(e){return"number"==typeof e}function Q(e){return"boolean"==typeof e}function X(e){var t=!1;if(e&&"object"==typeof e){var n=A?A(e):function(e){if(e){if(A)return A(e);var t=e[m]||e[i.hB]||e[g];if(t)return t}return null}(e);n?(n[g]&&i.CY[o._S](n,g)&&(n=n[g]),t=typeof n===i.cb&&P[o._S](n)===I):t=!0}return t}function Z(e){if(e)return E?e[a]():function(e){if(e&&e.getUTCFullYear){var t=function(e){var t=String(e);return 1===t[o.R5]&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(e)}function ee(e,t,n){var i=e[o.R5];try{for(var r=0;r<i&&(!(r in e)||-1!==t[o._S](n||e,e[r],r,e));r++);}catch(e){}}function te(e,t,n){if(e){if(e[d])return e[d](t,n);var i=e[o.R5],r=n||0;try{for(var s=Math.max(r>=0?r:i-Math.abs(r),0);s<i;s++)if(s in e&&e[s]===t)return s}catch(e){}}return-1}function ne(e,t,n){var i;if(e){if(e[u])return e[u](t,n);var r=e[o.R5],s=n||e;i=new Array(r);try{for(var a=0;a<r;a++)a in e&&(i[a]=t[o._S](s,e[a],e))}catch(e){}}return i}function ie(e,t,n){var i;if(e){if(e[p])return e[p](t,n);var r=e[o.R5],s=0;if(arguments[o.R5]>=3)i=arguments[2];else{for(;s<r&&!(s in e);)s++;i=e[s++]}for(;s<r;)s in e&&(i=t(i,e[s],s,e)),s++}return i}function re(e){return e&&(e=S&&e[h]?e[h]():e[o.i7]?e[o.i7](/^\s+|(?=\s)\s+$/g,s.qS):e),e}var oe=!{toString:null}.propertyIsEnumerable("toString"),se=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function ae(e){var t=typeof e;if(t===i.cb||t===i.fK&&null!==e||(0,r.ZU)("objKeys called on non-object"),!oe&&w)return w(e);var n=[];for(var s in e)e&&i.CY[o._S](e,s)&&n[o.MW](s);if(oe)for(var a=se[o.R5],c=0;c<a;c++)e&&i.CY[o._S](e,se[c])&&n[o.MW](se[c]);return n}function ce(e,t,n,i){if(v)try{var r={enumerable:!0,configurable:!0};return n&&(r.get=n),i&&(r.set=i),v(e,t,r),!0}catch(e){}return!1}function le(e){return e}function de(e){return y&&V(e,(function(e,t){(z(t)||U(t))&&y(t)})),ue(e)}var ue=y||le,pe=b||le;function he(){var e=Date;return e.now?e.now():(new e).getTime()}function fe(e){return J(e)?e[o.I]:s.qS}function me(e,t,n,i,r){var o=n;return e&&((o=e[t])===n||r&&!r(o)||i&&!i(n)||(o=n,e[t]=o)),o}function ge(e,t,n){var i;return e?!(i=e[t])&&L(i)&&(i=M(n)?{}:n,e[t]=i):i=M(n)?{}:n,i}function ve(e,t){return L(e)?t:e}function ye(e){return!e}function be(e){return!!e}function we(e){throw new Error(e)}function _e(e,t){var n=null,i=null;return q(e)?n=e:i=e,function(){var e=arguments;if(n&&(i=n()),i)return i[t][o.ZV](i,e)}}function Se(e,t,n){if(e&&t&&U(e)&&U(t)){var i=function(i){if(G(i)){var r=t[i];q(r)?n&&!n(i,!0,t,e)||(e[i]=_e(t,i)):n&&!n(i,!1,t,e)||(F(e,i)&&delete e[i],ce(e,i,(function(){return t[i]}),(function(e){t[i]=e}))||(e[i]=r))}};for(var r in t)i(r)}return e}function Ce(e,t,n,i,r){e&&t&&n&&(!1!==r||M(e[t]))&&(e[t]=_e(n,i))}function ke(e,t,n,i){return e&&t&&U(e)&&z(n)&&ee(n,(function(n){G(n)&&Ce(e,n,t,n,i)})),e}function Ee(e){return e&&i.rl&&(e=(0,i.Pw)((0,i.rl)({},e))),e}function xe(e,t,n,r,s,a){var c=arguments,l=c[0]||{},d=c[o.R5],u=!1,p=1;for(d>0&&Q(l)&&(u=l,l=c[p]||{},p++),U(l)||(l={});p<d;p++){var h=c[p],f=z(h),m=U(h);for(var g in h)if(f&&g in h||m&&i.CY[o._S](h,g)){var v=h[g],y=void 0;if(u&&v&&((y=z(v))||X(v))){var b=l[g];y?z(b)||(b=[]):X(b)||(b={}),v=xe(u,b,v)}void 0!==v&&(l[g]=v)}}return l}},96335:(e,t,n)=>{"use strict";n.d(t,{$F:()=>h,C$:()=>m,DN:()=>s,Z:()=>r,Zh:()=>c,cL:()=>v,f_:()=>f,hL:()=>d,js:()=>l,kl:()=>y,mE:()=>a,oV:()=>o,qS:()=>i,uC:()=>p,yi:()=>u,ys:()=>g});var i="",r="channels",o="core",s="createPerfMgr",a="disabled",c="extensionConfig",l="extensions",d="processTelemetry",u="priority",p="eventsSent",h="eventsDiscarded",f="eventsSendRequest",m="perfEvent",g="errorToConsole",v="warnToConsole",y="getPerfMgr"},81782:(e,t,n)=>{"use strict";n.d(t,{Jk:()=>p,Lm:()=>f,j5:()=>m,zn:()=>u});var i=n(29141),r=n(98145),o=n(24869),s=n(96335),a="ctx",c="ParentContextKey",l="ChildrenContextKey",d=null,u=function(){function e(t,n,i){var s,d=this,u=!1;d.start=(0,o.m6)(),d[r.I]=t,d[r.d]=i,d[r.PL]=function(){return!1},(0,o.mf)(n)&&(u=(0,o.l_)(d,"payload",(function(){return!s&&(0,o.mf)(n)&&(s=n(),n=null),s}))),d[r.T]=function(t){return t?t===e[c]||t===e[l]?d[t]:(d[a]||{})[t]:null},d[r.wu]=function(t,n){t&&(t===e[c]?(d[t]||(d[r.PL]=function(){return!0}),d[t]=n):t===e[l]?d[t]=n:(d[a]=d[a]||{})[t]=n)},d[r.Km]=function(){var t=0,i=d[r.T](e[l]);if((0,o.kJ)(i))for(var s=0;s<i[r.R5];s++){var a=i[s];a&&(t+=a[r.Z_])}d[r.Z_]=(0,o.m6)()-d.start,d.exTime=d[r.Z_]-t,d[r.Km]=function(){},!u&&(0,o.mf)(n)&&(d.payload=n())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),p=function(){function e(t){this.ctx={},(0,i.Z)(e,this,(function(e){e.create=function(e,t,n){return new u(e,t,n)},e.fire=function(e){e&&(e[r.Km](),t&&(0,o.mf)(t[s.C$])&&t[s.C$](e))},e[r.wu]=function(t,n){t&&((e[a]=e[a]||{})[t]=n)},e[r.T]=function(t){return(e[a]||{})[t]}}))}return e.__ieDyn=1,e}(),h="CoreUtils.doPerf";function f(e,t,n,i,o){if(e){var a=e;if(a[s.kl]&&(a=a[s.kl]()),a){var d=void 0,p=a[r.T](h);try{if(d=a.create(t(),i,o)){if(p&&d[r.wu]&&(d[r.wu](u[c],p),p[r.T]&&p[r.wu])){var f=p[r.T](u[l]);f||(f=[],p[r.wu](u[l],f)),f[r.MW](d)}return a[r.wu](h,d),n(d)}}catch(e){d&&d[r.wu]&&d[r.wu]("exception",e)}finally{d&&a.fire(d),a[r.wu](h,p)}}}return n()}function m(){return d}},31030:(e,t,n)=>{"use strict";n.d(t,{Bt:()=>g,CD:()=>m,Vi:()=>b,jV:()=>y,xy:()=>v});var i=n(98145),r=n(29339),o=n(49251),s=n(24869),a=n(96335),c=n(81782),l=n(69031),d="TelemetryPluginChain",u="_hasRun",p="_getTelCtx",h=0;function f(e,t,n,c){var l=null,d=[];null!==c&&(l=c?function(e,t,n){for(;e;){if(e[i.TO]()===n)return e;e=e[i.W2]()}return y([n],t[i.TC]||{},t)}(e,n,c):e);var u={_next:function(){var e=l;if(l=e?e[i.W2]():null,!e){var t=d;t&&t[i.R5]>0&&((0,s.tO)(t,(function(e){try{e.func[i._S](e.self,e.args)}catch(e){(0,r.kP)(n[i.eZ],2,73,"Unexpected Exception during onComplete - "+(0,o.eU)(e))}})),d=[])}return e},ctx:{core:function(){return n},diagLog:function(){return(0,r.vH)(n,t)},getCfg:function(){return t},getExtCfg:p,getConfig:function(e,n,i){void 0===i&&(i=!1);var r,o=p(e,null);return o&&!(0,s.le)(o[n])?r=o[n]:t&&!(0,s.le)(t[n])&&(r=t[n]),(0,s.le)(r)?i:r},hasNext:function(){return!!l},getNext:function(){return l},setNext:function(e){l=e},iterate:function(e){for(var t;t=u._next();){var n=t[i.TO]();n&&e(n)}},onComplete:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e&&d[i.MW]({func:e,self:(0,s.o8)(t)?u.ctx:t,args:n})}}};function p(e,n,i){var r;if(void 0===n&&(n={}),void 0===i&&(i=0),t){var o=t[a.Zh];o&&e&&(r=o[e])}if(r){if((0,s.Kn)(n)&&0!==i){var c=(0,s.mm)(!0,n,r);t&&2===i&&(0,s.rW)(n,(function(e){if((0,s.le)(c[e])){var n=t[e];(0,s.le)(n)||(c[e]=n)}})),r=c}}else r=n;return r}return u}function m(e,t,n,r){var o=f(e,t,n,r),c=o.ctx;return c[i.uL]=function(e){var t=o._next();return t&&t[a.hL](e,c),!t},c[i.zV]=function(e,r){return void 0===e&&(e=null),(0,s.kJ)(e)&&(e=y(e,t,n,r)),m(e||c[i.W2](),t,n,r)},c}function g(e,t,n){var r=t[i.TC]||{},o=f(e,r,t,n),a=o.ctx;return a[i.uL]=function(e){var t=o._next();return t&&t.unload(a,e),!t},a[i.zV]=function(e,n){return void 0===e&&(e=null),(0,s.kJ)(e)&&(e=y(e,r,t,n)),g(e||a[i.W2](),t,n)},a}function v(e,t,n){var r=t[i.TC]||{},o=f(e,r,t,n).ctx;return o[i.uL]=function(e){return o.iterate((function(t){(0,s.mf)(t[i.Tu])&&t[i.Tu](o,e)}))},o[i.zV]=function(e,n){return void 0===e&&(e=null),(0,s.kJ)(e)&&(e=y(e,r,t,n)),v(e||o[i.W2](),t,n)},o}function y(e,t,n,f){var g=null,v=!f;if((0,s.kJ)(e)&&e[i.R5]>0){var b=null;(0,s.tO)(e,(function(e){if(v||f!==e||(v=!0),v&&e&&(0,s.mf)(e[a.hL])){var y=function(e,t,n){var f,g=null,v=(0,s.mf)(e[a.hL]),y=(0,s.mf)(e[i.Jd]),b={getPlugin:function(){return e},getNext:function(){return g},processTelemetry:function(r,o){w(o=o||function(){var i;return e&&(0,s.mf)(e[p])&&(i=e[p]()),i||(i=m(b,t,n)),i}(),(function(t){if(!e||!v)return!1;var n=(0,l.OY)(e);return!n[i.fi]&&!n[a.mE]&&(y&&e[i.Jd](g),e[a.hL](r,t),!0)}),"processTelemetry",(function(){return{item:r}}),!r.sync)||o[i.uL](r)},unload:function(t,n){w(t,(function(){var r=!1;if(e){var o=(0,l.OY)(e),s=e[a.oV]||o[a.oV];!e||s&&s!==t.core()||o[i.fi]||(o[a.oV]=null,o[i.fi]=!0,o[i.yl]=!1,e[i.fi]&&!0===e[i.fi](t,n)&&(r=!0))}return r}),"unload",(function(){}),n[i.d])||t[i.uL](n)},update:function(t,n){w(t,(function(){var r=!1;if(e){var o=(0,l.OY)(e),s=e[a.oV]||o[a.oV];!e||s&&s!==t.core()||o[i.fi]||e[i.Tu]&&!0===e[i.Tu](t,n)&&(r=!0)}return r}),"update",(function(){}),!1)||t[i.uL](n)},_id:f=e?e[i.pZ]+"-"+e[a.yi]+"-"+h++:"Unknown-0-"+h++,_setNext:function(e){g=e}};function w(t,n,s,l,p){var h=!1,m=e?e[i.pZ]:d,v=t[u];return v||(v=t[u]={}),t.setNext(g),e&&(0,c.Lm)(t[a.oV](),(function(){return m+":"+s}),(function(){v[f]=!0;try{var e=g?g._id:a.qS;e&&(v[e]=!1),h=n(t)}catch(e){var c=!g||v[g._id];c&&(h=!0),g&&c||(0,r.kP)(t[i.mc](),1,73,"Plugin ["+m+"] failed during "+s+" - "+(0,o.eU)(e)+", run flags: "+(0,o.eU)(v))}}),l,p),h}return(0,s.FL)(b)}(e,t,n);g||(g=y),b&&b._setNext(y),b=y}}))}return f&&!g?y([f],t,n):g}var b=function(e,t,n,i){var r=m(e,t,n,i);(0,s.Vb)(this,r,(0,s.FY)(r))}},19406:(e,t,n)=>{"use strict";n.d(t,{CN:()=>g,F6:()=>v,_l:()=>m,az:()=>f,pZ:()=>y});var i=n(98145),r=n(49251),o=n(24869),s=n(96335),a=4294967296,c=4294967295,l=!1,d=123456789,u=987654321;function p(e){e<0&&(e>>>=0),d=123456789+e&c,u=987654321-e&c,l=!0}function h(){try{var e=2147483647&(0,o.m6)();p((Math.random()*a^e)+e)}catch(e){}}function f(e){return e>0?Math.floor(m()/c*(e+1))>>>0:0}function m(e){var t=0,n=(0,r.MX)()||(0,r.gz)();return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&c),0===t&&(0,r.w1)()&&(l||h(),t=v()&c),0===t&&(t=Math.floor(a*Math.random()|0)),e||(t>>>=0),t}function g(e){e?p(e):h()}function v(e){var t=((u=36969*(65535&u)+(u>>16)&c)<<16)+(65535&(d=18e3*(65535&d)+(d>>16)&c))>>>0&c|0;return e||(t>>>=0),t}function y(e){void 0===e&&(e=22);for(var t=m()>>>0,n=0,r=s.qS;r[i.R5]<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(m()<<2&4294967295|3&t)>>>0,n=0);return r}},69031:(e,t,n)=>{"use strict";n.d(t,{AA:()=>u,OY:()=>l,Yn:()=>p,bP:()=>d});var i=n(98145),r=n(87624),o=n(24869),s=n(96335),a=n(56207),c=(0,r.K)("plugin");function l(e){return c.get(e,"state",{},!0)}function d(e,t){for(var n,r=[],a=null,c=e[i.W2]();c;){var d=c[i.TO]();d&&(a&&(0,o.mf)(a[i.Jd])&&(0,o.mf)(d[s.hL])&&a[i.Jd](d),((0,o.mf)(d[i.yl])?d[i.yl]():(n=l(d))[i.yl])||r[i.MW](d),a=d,c=c[i.W2]())}(0,o.tO)(r,(function(r){var o=e[s.oV]();r[i.VL](e.getCfg(),o,t,e[i.W2]()),n=l(r),r[s.oV]||n[s.oV]||(n[s.oV]=o),n[i.yl]=!0,delete n[i.fi]}))}function u(e){return e.sort((function(e,t){var n=0;if(t){var i=(0,o.mf)(t[s.hL]);(0,o.mf)(e[s.hL])?n=i?e[s.yi]-t[s.yi]:1:i&&(n=-1)}else n=e?1:-1;return n}))}function p(e){var t={};return{getName:function(){return t[i.I]},setName:function(n){e&&e.setName(n),t[i.I]=n},getTraceId:function(){return t[i.nY]},setTraceId:function(n){e&&e.setTraceId(n),(0,a.jN)(n)&&(t[i.nY]=n)},getSpanId:function(){return t[i._d]},setSpanId:function(n){e&&e.setSpanId(n),(0,a.Lc)(n)&&(t[i._d]=n)},getTraceFlags:function(){return t[i.T0]},setTraceFlags:function(n){e&&e.setTraceFlags(n),t[i.T0]=n}}}},38593:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});var i=n(98145),r=n(29339),o=n(49251),s=n(24869);function a(){var e=[];return{add:function(t){t&&e[i.MW](t)},run:function(t,n){(0,s.tO)(e,(function(e){try{e(t,n)}catch(e){(0,r.kP)(t[i.mc](),2,73,"Unexpected error calling unload handler - "+(0,o.eU)(e))}})),e=[]}}}},56207:(e,t,n)=>{"use strict";n.d(t,{J6:()=>w,Lc:()=>b,Pn:()=>_,SU:()=>g,aR:()=>S,jN:()=>y,j_:()=>v,lq:()=>C});var i=n(98145),r=n(28956),o=n(49251),s=n(24869),a=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,c="00",l="ff",d="00000000000000000000000000000000",u="0000000000000000",p=1;function h(e,t,n){return!(!e||e[i.R5]!==t||e===n||!e.match(/^[\da-f]*$/))}function f(e,t,n){return h(e,t)?e:n}function m(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[i.R5]<2;)t="0"+t;return t}function g(e,t,n,o){var s;return(s={})[i.PA]=h(o,2,l)?o:c,s[i.nY]=y(e)?e:(0,r.DO)(),s.spanId=b(t)?t:(0,r.DO)()[i.Jn](0,16),s.traceFlags=n>=0&&n<=255?n:1,s}function v(e){var t;if(!e)return null;if((0,s.kJ)(e)&&(e=e[0]||""),!e||!(0,s.HD)(e)||e[i.R5]>8192)return null;var n=a.exec((0,s.nd)(e));return n&&n[1]!==l&&n[2]!==d&&n[3]!==u?((t={})[i.PA]=n[1],t[i.nY]=n[2],t[i._d]=n[3],t[i.T0]=parseInt(n[4],16),t):null}function y(e){return h(e,32,d)}function b(e){return h(e,16,u)}function w(e){return!!(e&&h(e[i.PA],2,l)&&h(e[i.nY],32,d)&&h(e[i._d],16,u)&&h(m(e[i.T0]),2))}function _(e){return!!w(e)&&(e[i.T0]&p)===p}function S(e){if(e){var t=m(e[i.T0]);h(t,2)||(t="01");var n=e[i.PA]||c;return"00"!==n&&"ff"!==n&&(n=c),"".concat(n,"-").concat(f(e.traceId,32,d),"-").concat(f(e.spanId,16,u),"-").concat(t)}return""}function C(){var e="traceparent",t=v((0,o.ed)(e));return t||(t=v((0,o.pI)(e))),t}},98145:(e,t,n)=>{"use strict";n.d(t,{$h:()=>U,F3:()=>P,Fc:()=>b,Fr:()=>$,Gc:()=>E,I:()=>r,Jd:()=>O,Jn:()=>q,Km:()=>ee,Kn:()=>G,LS:()=>y,Lk:()=>N,MW:()=>a,P6:()=>J,PA:()=>re,PL:()=>Q,R5:()=>p,SD:()=>m,T:()=>X,T0:()=>ie,T1:()=>H,TC:()=>l,TO:()=>w,Tu:()=>I,VL:()=>i,W2:()=>D,ZV:()=>V,Z_:()=>h,_S:()=>z,_d:()=>ne,cb:()=>C,d:()=>T,dE:()=>Y,eZ:()=>u,fi:()=>k,g:()=>g,gU:()=>x,i7:()=>W,iC:()=>S,jk:()=>B,kL:()=>_,mc:()=>R,n7:()=>v,nY:()=>te,ou:()=>M,p$:()=>d,pZ:()=>s,qV:()=>j,tb:()=>o,uL:()=>f,w6:()=>F,wu:()=>Z,xv:()=>K,yl:()=>c,zV:()=>A,zc:()=>L});var i="initialize",r="name",o="getNotifyMgr",s="identifier",a="push",c="isInitialized",l="config",d="instrumentationKey",u="logger",p="length",h="time",f="processNext",m="getProcessTelContext",g="addNotificationListener",v="removeNotificationListener",y="stopPollingInternalLogs",b="onComplete",w="getPlugin",_="flush",S="_extensions",C="splice",k="teardown",E="messageId",x="message",T="isAsync",P="_doTeardown",I="update",D="getNext",R="diagLog",O="setNextPlugin",A="createNew",N="cookieCfg",M="indexOf",L="substring",j="userAgent",F="split",U="setEnabled",q="substr",K="nodeType",V="apply",W="replace",$="enableDebugExceptions",B="logInternalMessage",H="toLowerCase",z="call",J="type",G="handler",Y="listeners",Q="isChildEvt",X="getCtx",Z="setCtx",ee="complete",te="traceId",ne="spanId",ie="traceFlags",re="version"},1550:(e,t,n)=>{"use strict";n.d(t,{CY:()=>h,Pw:()=>c,RJ:()=>p,V4:()=>l,bO:()=>a,cb:()=>i,fK:()=>r,hB:()=>s,jA:()=>o,rl:()=>d,yu:()=>u});var i="function",r="object",o="undefined",s="prototype",a="hasOwnProperty",c=Object,l=c[s],d=c.assign,u=c.create,p=c.defineProperty,h=l[a]},30175:(e,t,n)=>{"use strict";n.d(t,{Rd:()=>o,ZU:()=>s,pu:()=>a});var i=n(1550),r=null;function o(e){void 0===e&&(e=!0);var t=!1===e?null:r;return t||(typeof globalThis!==i.jA&&(t=globalThis),t||typeof self===i.jA||(t=self),t||typeof window===i.jA||(t=window),t||typeof global===i.jA||(t=global),r=t),t}function s(e){throw new TypeError(e)}function a(e){var t=i.yu;if(t)return t(e);if(null==e)return{};var n=typeof e;function r(){}return n!==i.fK&&n!==i.cb&&s("Object prototype may only be an Object:"+e),r[i.hB]=e,new r}},27421:(e,t,n)=>{"use strict";n.d(t,{$h:()=>c,ne:()=>a,uc:()=>o});var i=n(1550),r=n(30175),o=(((0,r.Rd)()||{}).Symbol,((0,r.Rd)()||{}).Reflect,i.rl||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])i.V4[i.bO].call(t,o)&&(e[o]=t[o]);return e}),s=function(e,t){return s=i.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[i.bO](n)&&(e[n]=t[n])},s(e,t)};function a(e,t){function n(){this.constructor=e}typeof t!==i.cb&&null!==t&&(0,r.ZU)("Class extends value "+String(t)+" is not a constructor or null"),s(e,t),e[i.hB]=null===t?(0,r.pu)(t):(n[i.hB]=t[i.hB],new n)}function c(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e}},40166:(e,t,n)=>{"use strict";n.r(t),n.d(t,{webSnippet:()=>i});var i='!function(T,l,y){var S=T.location,k="script",D="instrumentationKey",C="ingestionendpoint",I="disableExceptionTracking",E="ai.device.",b="toLowerCase",w="crossOrigin",N="POST",e="appInsightsSDK",t=y.name||"appInsights";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:"5",version:2,config:d};function v(e,t){var n={},a="Browser";return n[E+"id"]=a[b](),n[E+"type"]=a,n["ai.operation.name"]=S&&S.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(";"),a=0;a<n.length;a++){var i=n[a].split("=");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]="https://"+(o?o+".":"")+"dc."+(r||"services.visualstudio.com")}return e}(),c=s[D]||d[D]||"",u=s[C],p=u?u+"/v2/track":d.endpointUrl,(l=[]).push((n="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=t,i=p,(o=(r=v(c,"Exception")).data).baseType="ExceptionData",o.baseData.exceptions=[{typeName:"SDKLoadFailed",message:n.replace(/\\./g,"-"),hasFullStack:!1,stack:n+"\\nSnippet failed to load ["+a+"] -- Telemetry is disabled\\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\\nHost: "+(S&&S.pathname||"_unknown_")+"\\nEndpoint: "+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,"Message"),r=i.data;r.baseType="MessageData";var o=r.baseData;return o.message=\'AI (Internal): 99 message:"\'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\\"/g,"")+\'"\',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&""!==e||"undefined"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName("head")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n="track",r="TrackPage",o="TrackEvent";t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+r,"stop"+r,"start"+o,"stop"+o,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c="onerror";t(["_"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m["_"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{\r\nsrc: "https://js.monitor.azure.com/scripts/b/ai.2.min.js", // The SDK URL Source\r\n// name: "appInsights", // Global SDK Instance name defaults to "appInsights" when not supplied\r\n// ld: 0, // Defines the load delay (in ms) before attempting to load the sdk. -1 = block page load and add to head. (default) = 0ms load after timeout,\r\n// useXhr: 1, // Use XHR instead of fetch to report failures (if available),\r\n// crossOrigin: "anonymous", // When supplied this will add the provided value as the cross origin attribute on the script tag\r\n// onInit: null, // Once the application insights instance has loaded and initialized this callback function will be called with 1 argument -- the sdk instance (DO NOT ADD anything to the sdk.queue -- As they won\'t get called)\r\ncfg: { // Application Insights Configuration\r\n    instrumentationKey: "INSTRUMENTATION_KEY"\r\n}});'},29141:(e,t,n)=>{"use strict";var i;n.d(t,{Z:()=>F});var r,o="undefined",s="constructor",a="prototype",c="function",l="_dynInstFuncs",d="_isDynProxy",u="_dynClass",p="_dynCls$",h="_dynInstChk",f=h,m="_dfOpts",g="_unknown_",v="__proto__",y="_dyn"+v,b="__dynProto$Gbl",w="_dynInstProto",_="useBaseInst",S="setInstFuncs",C=Object,k=C.getPrototypeOf,E=C.getOwnPropertyNames,x=(typeof globalThis!==o&&(r=globalThis),r||typeof self===o||(r=self),r||typeof window===o||(r=window),r||typeof global===o||(r=global),r||{}),T=x[b]||(x[b]={o:(i={},i[S]=!0,i[_]=!0,i),n:1e3});function P(e,t){return e&&C[a].hasOwnProperty.call(e,t)}function I(e){return e&&(e===C[a]||e===Array[a])}function D(e){return I(e)||e===Function[a]}function R(e){var t;if(e){if(k)return k(e);var n=e[v]||e[a]||(e[s]?e[s][a]:null);t=e[y]||n,P(e,y)||(delete e[w],t=e[y]=e[w]||e[y],e[w]=n)}return t}function O(e,t){var n=[];if(E)n=E(e);else for(var i in e)"string"==typeof i&&P(e,i)&&n.push(i);if(n&&n.length>0)for(var r=0;r<n.length;r++)t(n[r])}function A(e,t,n){return t!==s&&typeof e[t]===c&&(n||P(e,t))}function N(e){throw new TypeError("DynamicProto: "+e)}function M(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function L(e,t,n,i,r){if(!I(e)){var o=n[l]=n[l]||{},s=o[t]=o[t]||{};!1!==o[f]&&(o[f]=!!r),O(n,(function(t){A(n,t,!1)&&n[t]!==i[t]&&(s[t]=n[t],delete n[t],(!P(e,t)||e[t]&&!e[t][d])&&(e[t]=function(e,t){var n=function(){var i=function(e,t,n,i){var r=null;if(e&&P(n,u)){var o=e[l]||{};if((r=(o[n[u]]||{})[t])||N("Missing ["+t+"] "+c),!r[h]&&!1!==o[f]){for(var s=!P(e,t),a=R(e),d=[];s&&a&&!D(a)&&!M(d,a);){var p=a[t];if(p){s=p===i;break}d.push(a),a=R(a)}try{s&&(e[t]=r),r[h]=1}catch(e){o[f]=!1}}}return r}(this,t,e,n)||function(e,t,n){var i=t[e];return i===n&&(i=R(t)[e]),typeof i!==c&&N("["+e+"] is not a "+c),i}(t,e,n);return i.apply(this,arguments)};return n[d]=1,n}(e,t)))}))}}function j(e,t){return P(e,a)?e.name||t||g:((e||{})[s]||{}).name||t||g}function F(e,t,n,i){P(e,a)||N("theClass is an invalid class definition.");var r=e[a];(function(e,t){if(k){for(var n=[],i=R(t);i&&!D(i)&&!M(n,i);){if(i===e)return!0;n.push(i),i=R(i)}return!1}return!0})(r,t)||N("["+j(e)+"] not in hierarchy of ["+j(t)+"]");var o=null;P(r,u)?o=r[u]:(o=p+j(e,"_")+"$"+T.n,T.n++,r[u]=o);var s=F[m],c=!!s[_];c&&i&&void 0!==i[_]&&(c=!!i[_]);var h=function(e){var t={};return O(e,(function(n){!t[n]&&A(e,n,!1)&&(t[n]=e[n])})),t}(t),g=function(e,t,n,i){function r(e,t,n){var r=t[n];if(r[d]&&i){var o=e[l]||{};!1!==o[f]&&(r=(o[t[u]]||{})[n]||r)}return function(){return r.apply(e,arguments)}}var o={};O(n,(function(e){o[e]=r(t,n,e)}));for(var s=R(e),a=[];s&&!D(s)&&!M(a,s);)O(s,(function(e){!o[e]&&A(s,e,!k)&&(o[e]=r(t,s,e))})),a.push(s),s=R(s);return o}(r,t,h,c);n(t,g);var v=!!k&&!!s[S];v&&i&&(v=!!i[S]),L(r,o,t,h,!1!==v)}F[m]=T.o},67684:(e,t,n)=>{"use strict";t.cv=t.Jx=void 0;const i=n(6113),r="<IDS|MSG>";function o(e){return JSON.parse(e.toString())}function s(e){return Object.assign({},{header:{},parent_header:{},metadata:{},content:{},idents:[],buffers:[]},e)}function a(e){let t=e;return"hmac-sha256"===e&&(t="sha256"),t}t.Jx=function(e,t,n="sha256"){var c=0;const l=[];for(c=0;c<e.length;c++){var d=e[c];if(d.toString()===r)break;l.push(d)}if(e.length-c<5)throw new Error("Message Decoding: Not enough message frames");if(e[c].toString()!==r)throw new Error("Message Decoding: Missing delimiter");if(t){const r=a(n);var u=e[c+1].toString(),p=i.createHmac(r,t);p.update(e[c+2]),p.update(e[c+3]),p.update(e[c+4]),p.update(e[c+5]);var h=p.digest("hex");if(h!==u)throw new Error(`Message Decoding: Incorrect;\nObtained "${u}"\nExpected "${h}"`)}return s({idents:l,header:o(e[c+2]),parent_header:o(e[c+3]),content:o(e[c+5]),metadata:o(e[c+4]),buffers:Array.prototype.slice.apply(e,[c+6])})},t.cv=function(e,t,n="sha256"){const o=s(e),c=a(n),l=o.idents,d=Buffer.from(JSON.stringify(o.header),"utf-8"),u=Buffer.from(JSON.stringify(o.parent_header),"utf-8"),p=Buffer.from(JSON.stringify(o.metadata),"utf-8"),h=Buffer.from(JSON.stringify(o.content),"utf-8");let f="";if(t){const e=i.createHmac(c,t);e.update(d),e.update(u),e.update(p),e.update(h),f=e.digest("hex")}return l.concat([Buffer.from(r),Buffer.from(f),d,u,p,h]).concat(o.buffers)}},7150:(e,t,n)=>{"use strict";n.d(t,{c:()=>l});var i=n(15834),r=function(){function e(){}return e.prototype.active=function(){return i.I},e.prototype.with=function(e,t,n){for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];return t.call.apply(t,function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}([n],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}(i),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),o=n(30658),s=n(95774),a="context",c=new r,l=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return(0,o.TG)(a,e,s.G.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var i,r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return(i=this._getContextManager()).with.apply(i,function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}([e,t,n],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}(r),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return(0,o.Rd)(a)||c},e.prototype.disable=function(){this._getContextManager().disable(),(0,o.J_)(a,s.G.instance())},e}()},95774:(e,t,n)=>{"use strict";n.d(t,{G:()=>a});var i=n(30658),r=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("verbose",this._namespace,e)},e}();function o(e,t,n){var r=(0,i.Rd)("diag");if(r)return n.unshift(t),r[e].apply(r,function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}(n),!1))}var s=n(16740),a=function(){function e(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(0,i.Rd)("diag");if(r)return r[e].apply(r,function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}(t),!1))}}var t=this;t.setLogger=function(e,n){var r,o,a;if(void 0===n&&(n={logLevel:s.n.INFO}),e===t){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(r=c.stack)&&void 0!==r?r:c.message),!1}"number"==typeof n&&(n={logLevel:n});var l=(0,i.Rd)("diag"),d=function(e,t){function n(n,i){var r=t[n];return"function"==typeof r&&e>=i?r.bind(t):function(){}}return e<s.n.NONE?e=s.n.NONE:e>s.n.ALL&&(e=s.n.ALL),t=t||{},{error:n("error",s.n.ERROR),warn:n("warn",s.n.WARN),info:n("info",s.n.INFO),debug:n("debug",s.n.DEBUG),verbose:n("verbose",s.n.VERBOSE)}}(null!==(o=n.logLevel)&&void 0!==o?o:s.n.INFO,e);if(l&&!n.suppressOverrideMessage){var u=null!==(a=(new Error).stack)&&void 0!==a?a:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+u),d.warn("Current logger will overwrite one already registered from "+u)}return(0,i.TG)("diag",d,t,!0)},t.disable=function(){(0,i.J_)("diag",t)},t.createComponentLogger=function(e){return new r(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}()},92599:(e,t,n)=>{"use strict";n.d(t,{u:()=>c,H:()=>a});var i=n(95774),r=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}(e,2);return[t[0],t[1]]}))},e.prototype.setEntry=function(t,n){var i=new e(this._entries);return i._entries.set(t,n),i},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=new e(this._entries);try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),a=s.next();!a.done;a=s.next()){var c=a.value;o._entries.delete(c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},e.prototype.clear=function(){return new e},e}(),o=Symbol("BaggageEntryMetadata"),s=i.G.instance();function a(e){return void 0===e&&(e={}),new r(new Map(Object.entries(e)))}function c(e){return"string"!=typeof e&&(s.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:o,toString:function(){return e}}}},66339:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});var i=n(7150).c.getInstance()},15834:(e,t,n)=>{"use strict";function i(e){return Symbol.for(e)}n.d(t,{I:()=>r,Y:()=>i});var r=new function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,i){var r=new e(n._currentContext);return r._currentContext.set(t,i),r},n.deleteValue=function(t){var i=new e(n._currentContext);return i._currentContext.delete(t),i}}},90928:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});var i=n(95774).G.instance()},16740:(e,t,n)=>{"use strict";var i;n.d(t,{n:()=>i}),function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(i||(i={}))},94284:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DiagConsoleLogger:()=>c,DiagLogLevel:()=>l.n,INVALID_SPANID:()=>V.fQ,INVALID_SPAN_CONTEXT:()=>V.Rr,INVALID_TRACEID:()=>V.AE,ProxyTracer:()=>I.T,ProxyTracerProvider:()=>D.K,ROOT_CONTEXT:()=>s.I,SamplingDecision:()=>R.U,SpanKind:()=>O.M,SpanStatusCode:()=>A.Q,TraceFlags:()=>N.r,ValueType:()=>r,baggageEntryMetadataFromString:()=>o.u,context:()=>W.D,createContextKey:()=>s.Y,createNoopMeter:()=>T,createTraceState:()=>q,default:()=>X,defaultTextMapGetter:()=>P.r,defaultTextMapSetter:()=>P.M,diag:()=>$.K,isSpanContextValid:()=>K.BM,isValidSpanId:()=>K.Lc,isValidTraceId:()=>K.jN,metrics:()=>G,propagation:()=>Y.u,trace:()=>Q.g});var i,r,o=n(92599),s=n(15834),a=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],c=function(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(console){var i=console[e];if("function"!=typeof i&&(i=console.log),"function"==typeof i)return i.apply(console,t)}}}for(var t=0;t<a.length;t++)this[a[t].n]=e(a[t].c)},l=n(16740),d=(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(){function e(){}return e.prototype.createHistogram=function(e,t){return S},e.prototype.createCounter=function(e,t){return _},e.prototype.createUpDownCounter=function(e,t){return C},e.prototype.createObservableGauge=function(e,t){return E},e.prototype.createObservableCounter=function(e,t){return k},e.prototype.createObservableUpDownCounter=function(e,t){return x},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),p=function(){},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.add=function(e,t){},t}(p),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.add=function(e,t){},t}(p),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.record=function(e,t){},t}(p),g=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t}(g),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t}(g),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t}(g),w=new u,_=new h,S=new m,C=new f,k=new v,E=new y,x=new b;function T(){return w}!function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(r||(r={}));var P=n(7008),I=n(69953),D=n(5236),R=n(51227),O=n(70087),A=n(1820),N=n(68726),M="[_0-9a-z-*/]",L=new RegExp("^(?:[a-z]"+M+"{0,255}|[a-z0-9]"+M+"{0,240}@[a-z]"+M+"{0,13})$"),j=/^[ -~]{0,255}[!-~]$/,F=/,|=/,U=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,n){return t.push(n+"="+e.get(n)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var n=t.trim(),i=n.indexOf("=");if(-1!==i){var r=n.slice(0,i),o=n.slice(i+1,t.length);(function(e){return L.test(e)})(r)&&function(e){return j.test(e)&&!F.test(e)}(o)&&e.set(r,o)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function q(e){return new U(e)}var K=n(97228),V=n(27007),W=n(66339),$=n(90928),B=new(function(){function e(){}return e.prototype.getMeter=function(e,t,n){return w},e}()),H=n(30658),z=n(95774),J="metrics",G=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return(0,H.TG)(J,e,z.G.instance())},e.prototype.getMeterProvider=function(){return(0,H.Rd)(J)||B},e.prototype.getMeter=function(e,t,n){return this.getMeterProvider().getMeter(e,t,n)},e.prototype.disable=function(){(0,H.J_)(J,z.G.instance())},e}().getInstance(),Y=n(68303),Q=n(52210);const X={context:W.D,diag:$.K,metrics:G,propagation:Y.u,trace:Q.g}},30658:(e,t,n)=>{"use strict";n.d(t,{Rd:()=>u,TG:()=>d,J_:()=>p});var i="object"==typeof globalThis?globalThis:global,r="1.4.1",o=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,s=function(e){var t=new Set([e]),n=new Set,i=e.match(o);if(!i)return function(){return!1};var r=+i[1],s=+i[2],a=+i[3];if(null!=i[4])return function(t){return t===e};function c(e){return n.add(e),!1}function l(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var i=e.match(o);if(!i)return c(e);var d=+i[1],u=+i[2],p=+i[3];return null!=i[4]||r!==d?c(e):0===r?s===u&&a<=p?l(e):c(e):s<=u?l(e):c(e)}}(r),a=r.split(".")[0],c=Symbol.for("opentelemetry.js.api."+a),l=i;function d(e,t,n,i){var o;void 0===i&&(i=!1);var s=l[c]=null!==(o=l[c])&&void 0!==o?o:{version:r};if(!i&&s[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(a.stack||a.message),!1}return s.version!==r?(a=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+r),n.error(a.stack||a.message),!1):(s[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+r+"."),!0)}function u(e){var t,n,i=null===(t=l[c])||void 0===t?void 0:t.version;if(i&&s(i))return null===(n=l[c])||void 0===n?void 0:n[e]}function p(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+r+".");var n=l[c];n&&delete n[e]}},68303:(e,t,n)=>{"use strict";n.d(t,{u:()=>v});var i=n(30658),r=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),o=n(7008),s=n(7150),a=(0,n(15834).Y)("OpenTelemetry Baggage Key");function c(e){return e.getValue(a)||void 0}function l(){return c(s.c.getInstance().active())}function d(e,t){return e.setValue(a,t)}function u(e){return e.deleteValue(a)}var p=n(92599),h=n(95774),f="propagation",m=new r,g=function(){function e(){this.createBaggage=p.H,this.getBaggage=c,this.getActiveBaggage=l,this.setBaggage=d,this.deleteBaggage=u}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return(0,i.TG)(f,e,h.G.instance())},e.prototype.inject=function(e,t,n){return void 0===n&&(n=o.M),this._getGlobalPropagator().inject(e,t,n)},e.prototype.extract=function(e,t,n){return void 0===n&&(n=o.r),this._getGlobalPropagator().extract(e,t,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){(0,i.J_)(f,h.G.instance())},e.prototype._getGlobalPropagator=function(){return(0,i.Rd)(f)||m},e}(),v=g.getInstance()},7008:(e,t,n)=>{"use strict";n.d(t,{M:()=>r,r:()=>i});var i={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},r={set:function(e,t,n){null!=e&&(e[t]=n)}}},52210:(e,t,n)=>{"use strict";n.d(t,{g:()=>l});var i=n(30658),r=n(5236),o=n(97228),s=n(73557),a=n(95774),c="trace",l=function(){function e(){this._proxyTracerProvider=new r.K,this.wrapSpanContext=o.kw,this.isSpanContextValid=o.BM,this.deleteSpan=s.TW,this.getSpan=s.Br,this.getActiveSpan=s.HN,this.getSpanContext=s.A3,this.setSpan=s.WZ,this.setSpanContext=s.G3}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=(0,i.TG)(c,this._proxyTracerProvider,a.G.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return(0,i.Rd)(c)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){(0,i.J_)(c,a.G.instance()),this._proxyTracerProvider=new r.K},e}().getInstance()},97817:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});var i=n(27007),r=function(){function e(e){void 0===e&&(e=i.Rr),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}()},39127:(e,t,n)=>{"use strict";n.d(t,{E:()=>c});var i=n(7150),r=n(73557),o=n(97817),s=n(97228),a=i.c.getInstance(),c=function(){function e(){}return e.prototype.startSpan=function(e,t,n){if(void 0===n&&(n=a.active()),Boolean(null==t?void 0:t.root))return new o.s;var i,c=n&&(0,r.A3)(n);return"object"==typeof(i=c)&&"string"==typeof i.spanId&&"string"==typeof i.traceId&&"number"==typeof i.traceFlags&&(0,s.BM)(c)?new o.s(c):new o.s},e.prototype.startActiveSpan=function(e,t,n,i){var o,s,c;if(!(arguments.length<2)){2===arguments.length?c=t:3===arguments.length?(o=t,c=n):(o=t,s=n,c=i);var l=null!=s?s:a.active(),d=this.startSpan(e,o,l),u=(0,r.WZ)(l,d);return a.with(u,c,void 0,d)}},e}()},69953:(e,t,n)=>{"use strict";n.d(t,{T:()=>r});var i=new(n(39127).E),r=function(){function e(e,t,n,i){this._provider=e,this.name=t,this.version=n,this.options=i}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,i){var r=this._getTracer();return Reflect.apply(r.startActiveSpan,r,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):i},e}()},5236:(e,t,n)=>{"use strict";n.d(t,{K:()=>s});var i=n(69953),r=n(39127),o=new(function(){function e(){}return e.prototype.getTracer=function(e,t,n){return new r.E},e}()),s=function(){function e(){}return e.prototype.getTracer=function(e,t,n){var r;return null!==(r=this.getDelegateTracer(e,t,n))&&void 0!==r?r:new i.T(this,e,t,n)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:o},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){var i;return null===(i=this._delegate)||void 0===i?void 0:i.getTracer(e,t,n)},e}()},51227:(e,t,n)=>{"use strict";var i;n.d(t,{U:()=>i}),function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(i||(i={}))},73557:(e,t,n)=>{"use strict";n.d(t,{A3:()=>p,Br:()=>a,G3:()=>u,HN:()=>c,TW:()=>d,WZ:()=>l});var i=n(15834),r=n(97817),o=n(7150),s=(0,i.Y)("OpenTelemetry Context Key SPAN");function a(e){return e.getValue(s)||void 0}function c(){return a(o.c.getInstance().active())}function l(e,t){return e.setValue(s,t)}function d(e){return e.deleteValue(s)}function u(e,t){return l(e,new r.s(t))}function p(e){var t;return null===(t=a(e))||void 0===t?void 0:t.spanContext()}},27007:(e,t,n)=>{"use strict";n.d(t,{AE:()=>o,Rr:()=>s,fQ:()=>r});var i=n(68726),r="0000000000000000",o="00000000000000000000000000000000",s={traceId:o,spanId:r,traceFlags:i.r.NONE}},70087:(e,t,n)=>{"use strict";var i;n.d(t,{M:()=>i}),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(i||(i={}))},97228:(e,t,n)=>{"use strict";n.d(t,{BM:()=>l,Lc:()=>c,jN:()=>a,kw:()=>d});var i=n(27007),r=n(97817),o=/^([0-9a-f]{32})$/i,s=/^[0-9a-f]{16}$/i;function a(e){return o.test(e)&&e!==i.AE}function c(e){return s.test(e)&&e!==i.fQ}function l(e){return a(e.traceId)&&c(e.spanId)}function d(e){return new r.s(e)}},1820:(e,t,n)=>{"use strict";var i;n.d(t,{Q:()=>i}),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(i||(i={}))},68726:(e,t,n)=>{"use strict";var i;n.d(t,{r:()=>i}),function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(i||(i={}))},63420:(e,t,n)=>{"use strict";var i;n.d(t,{I:()=>i}),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"}(i||(i={}))},3250:(e,t,n)=>{"use strict";n.d(t,{Cx:()=>a,H3:()=>l,Vo:()=>i,WM:()=>s,bO:()=>r,bU:()=>o,ef:()=>c});var i="=",r=";",o=",",s="baggage",a=180,c=4096,l=8192},80926:(e,t,n)=>{"use strict";n.d(t,{a:()=>a});var i=n(68303),r=n(98397),o=n(3250),s=n(60315),a=function(){function e(){}return e.prototype.inject=function(e,t,n){var a=i.u.getBaggage(e);if(a&&!(0,r.Ll)(e)){var c=(0,s.getKeyPairs)(a).filter((function(e){return e.length<=o.ef})).slice(0,o.Cx),l=(0,s.serializeKeyPairs)(c);l.length>0&&n.set(t,o.WM,l)}},e.prototype.extract=function(e,t,n){var r=n.get(t,o.WM),a=Array.isArray(r)?r.join(o.bU):r;if(!a)return e;var c={};return 0===a.length?e:(a.split(o.bU).forEach((function(e){var t=(0,s.parsePairKeyValue)(e);if(t){var n={value:t.value};t.metadata&&(n.metadata=t.metadata),c[t.key]=n}})),0===Object.entries(c).length?e:i.u.setBaggage(e,i.u.createBaggage(c)))},e.prototype.fields=function(){return[o.WM]},e}()},60315:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getKeyPairs:()=>a,parseKeyPairsIntoRecord:()=>l,parsePairKeyValue:()=>c,serializeKeyPairs:()=>s});var i=n(92599),r=n(3250),o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s};function s(e){return e.reduce((function(e,t){var n=""+e+(""!==e?r.bU:"")+t;return n.length>r.H3?e:n}),"")}function a(e){return e.getAllEntries().map((function(e){var t=o(e,2),n=t[0],i=t[1],s=encodeURIComponent(n)+"="+encodeURIComponent(i.value);return void 0!==i.metadata&&(s+=r.bO+i.metadata.toString()),s}))}function c(e){var t=e.split(r.bO);if(!(t.length<=0)){var n=t.shift();if(n){var o=n.split(r.Vo);if(2===o.length){var s,a=decodeURIComponent(o[0].trim()),c=decodeURIComponent(o[1].trim());return t.length>0&&(s=(0,i.u)(t.join(r.bO))),{key:a,value:c,metadata:s}}}}}function l(e){return"string"!=typeof e||0===e.length?{}:e.split(r.bU).map((function(e){return c(e)})).filter((function(e){return void 0!==e&&e.value.length>0})).reduce((function(e,t){return e[t.key]=t.value,e}),{})}},60551:(e,t,n)=>{"use strict";n.d(t,{Do:()=>c,FT:()=>s,sy:()=>a});var i=n(90928),r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s};function s(e){var t,n,s={};if("object"!=typeof e||null==e)return s;try{for(var l=r(Object.entries(e)),d=l.next();!d.done;d=l.next()){var u=o(d.value,2),p=u[0],h=u[1];a(p)?c(h)?Array.isArray(h)?s[p]=h.slice():s[p]=h:i.K.warn("Invalid attribute value set for key: "+p):i.K.warn("Invalid attribute key: "+p)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return s}function a(e){return"string"==typeof e&&e.length>0}function c(e){return null==e||(Array.isArray(e)?function(e){var t,n,i;try{for(var o=r(e),s=o.next();!s.done;s=o.next()){var a=s.value;if(null!=a){if(!i){if(l(a)){i=typeof a;continue}return!1}if(typeof a!==i)return!1}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0}(e):l(e))}function l(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}},36220:(e,t,n)=>{"use strict";n.d(t,{L:()=>o,c:()=>r});var i=(0,n(26470).x)();function r(e){i=e}function o(e){try{i(e)}catch(e){}}},26470:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var i=n(90928);function r(){return function(e){i.K.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){for(var t={},n=e;null!==n;)Object.getOwnPropertyNames(n).forEach((function(e){if(!t[e]){var i=n[e];i&&(t[e]=String(i))}})),n=Object.getPrototypeOf(n);return t}(e))}(e))}}},97664:(e,t,n)=>{"use strict";n.d(t,{Dt:()=>g,J3:()=>u,Jt:()=>l,KO:()=>f,PW:()=>h,U:()=>c,Us:()=>p,X_:()=>v,aE:()=>d,i5:()=>a,ji:()=>m,vF:()=>y});var i=n(90471),r=9,o=Math.pow(10,6),s=Math.pow(10,r);function a(e){var t=e/1e3;return[Math.trunc(t),Math.round(e%1e3*o)]}function c(){var e=i.t.timeOrigin;if("number"!=typeof e){var t=i.t;e=t.timing&&t.timing.fetchStart}return e}function l(e){return y(a(c()),a("number"==typeof e?e:i.t.now()))}function d(e){if(g(e))return e;if("number"==typeof e)return e<c()?l(e):a(e);if(e instanceof Date)return a(e.getTime());throw TypeError("Invalid input type")}function u(e,t){var n=t[0]-e[0],i=t[1]-e[1];return i<0&&(n-=1,i+=s),[n,i]}function p(e){var t=r,n=""+"0".repeat(t)+e[1]+"Z",i=n.substr(n.length-t-1);return new Date(1e3*e[0]).toISOString().replace("000Z",i)}function h(e){return e[0]*s+e[1]}function f(e){return Math.round(1e3*e[0]+e[1]/1e6)}function m(e){return Math.round(1e6*e[0]+e[1]/1e3)}function g(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function v(e){return g(e)||"number"==typeof e||e instanceof Date}function y(e,t){var n=[e[0]+t[0],e[1]+t[1]];return n[1]>=s&&(n[1]-=s,n[0]+=1),n}},96237:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AlwaysOffSampler:()=>O,AlwaysOnSampler:()=>A,AnchoredClock:()=>r,BindOnceFuture:()=>J.q,CompositePropagator:()=>E.Y,DEFAULT_ATTRIBUTE_COUNT_LIMIT:()=>K.qG,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:()=>K.KR,DEFAULT_ENVIRONMENT:()=>K.J9,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:()=>K.Ys,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:()=>K.VH,ExportResultCode:()=>l.I,ParentBasedSampler:()=>j,RPCType:()=>_,RandomIdGenerator:()=>y,SDK_INFO:()=>C.m,TRACE_PARENT_HEADER:()=>x.FX,TRACE_STATE_HEADER:()=>x.C3,TraceIdRatioBasedSampler:()=>F,TraceState:()=>q.n,TracesSamplerValues:()=>W.J,VERSION:()=>d.q,W3CBaggagePropagator:()=>i.a,W3CTraceContextPropagator:()=>x.jf,_globalThis:()=>h,addHrTimes:()=>c.vF,baggageUtils:()=>u,deleteRPCMetadata:()=>I,getEnv:()=>p.d,getEnvWithoutDefaults:()=>K.vU,getRPCMetadata:()=>D,getTimeOrigin:()=>c.U,globalErrorHandler:()=>s.L,hexToBase64:()=>v,hrTime:()=>c.Jt,hrTimeDuration:()=>c.J3,hrTimeToMicroseconds:()=>c.ji,hrTimeToMilliseconds:()=>c.KO,hrTimeToNanoseconds:()=>c.PW,hrTimeToTimeStamp:()=>c.Us,internal:()=>Y,isAttributeKey:()=>o.sy,isAttributeValue:()=>o.Do,isTimeInput:()=>c.X_,isTimeInputHrTime:()=>c.Dt,isTracingSuppressed:()=>U.Ll,isUrlIgnored:()=>H,isWrapped:()=>z,loggingErrorHandler:()=>a.x,merge:()=>V.T,millisToHrTime:()=>c.i5,otperformance:()=>S.t,parseEnvironment:()=>K.Ds,parseTraceParent:()=>x.j_,sanitizeAttributes:()=>o.FT,setGlobalErrorHandler:()=>s.c,setRPCMetadata:()=>P,suppressTracing:()=>U.hE,timeInputToHrTime:()=>c.aE,unrefTimer:()=>k.g,unsuppressTracing:()=>U.yy,urlMatches:()=>B});var i=n(80926),r=function(){function e(e,t){this._monotonicClock=t,this._epochMillis=e.now(),this._performanceMillis=t.now()}return e.prototype.now=function(){var e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e},e}(),o=n(60551),s=n(36220),a=n(26470),c=n(97664),l=n(63420),d=n(18923),u=n(60315),p=n(54241),h="object"==typeof globalThis?globalThis:global;function f(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}var m=Buffer.alloc(8),g=Buffer.alloc(16);function v(e){var t;t=16===e.length?m:32===e.length?g:Buffer.alloc(e.length/2);for(var n=0,i=0;i<e.length;i+=2){var r=f(e.charCodeAt(i)),o=f(e.charCodeAt(i+1));t.writeUInt8(r<<4|o,n++)}return t.toString("base64")}var y=function(){this.generateTraceId=w(16),this.generateSpanId=w(8)},b=Buffer.allocUnsafe(16);function w(e){return function(){for(var t=0;t<e/4;t++)b.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,4*t);for(t=0;t<e&&!(b[t]>0);t++)t===e-1&&(b[e-1]=1);return b.toString("hex",0,e)}}var _,S=n(90471),C=n(93290),k=n(52140),E=n(63135),x=n(49588),T=(0,n(15834).Y)("OpenTelemetry SDK Context Key RPC_METADATA");function P(e,t){return e.setValue(T,t)}function I(e){return e.deleteValue(T)}function D(e){return e.getValue(T)}!function(e){e.HTTP="http"}(_||(_={}));var R=n(51227),O=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:R.U.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),A=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:R.U.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),N=n(52210),M=n(97228),L=n(68726),j=function(){function e(e){var t,n,i,r;this._root=e.root,this._root||((0,s.L)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new A),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new A,this._remoteParentNotSampled=null!==(n=e.remoteParentNotSampled)&&void 0!==n?n:new O,this._localParentSampled=null!==(i=e.localParentSampled)&&void 0!==i?i:new A,this._localParentNotSampled=null!==(r=e.localParentNotSampled)&&void 0!==r?r:new O}return e.prototype.shouldSample=function(e,t,n,i,r,o){var s=N.g.getSpanContext(e);return s&&(0,M.BM)(s)?s.isRemote?s.traceFlags&L.r.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,i,r,o):this._remoteParentNotSampled.shouldSample(e,t,n,i,r,o):s.traceFlags&L.r.SAMPLED?this._localParentSampled.shouldSample(e,t,n,i,r,o):this._localParentNotSampled.shouldSample(e,t,n,i,r,o):this._root.shouldSample(e,t,n,i,r,o)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),F=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:(0,M.jN)(t)&&this._accumulate(t)<this._upperBound?R.U.RECORD_AND_SAMPLED:R.U.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,n=0;n<e.length/8;n++){var i=8*n;t=(t^parseInt(e.slice(i,i+8),16))>>>0}return t},e}(),U=n(98397),q=n(59598),K=n(70450),V=n(39009),W=n(29290),$=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function B(e,t){return"string"==typeof t?e===t:!!e.match(t)}function H(e,t){var n,i;if(!t)return!1;try{for(var r=$(t),o=r.next();!o.done;o=r.next())if(B(e,o.value))return!0}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return!1}function z(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}var J=n(71399),G=n(66339),Y={_export:function(e,t){return new Promise((function(n){G.D.with((0,U.hE)(G.D.active()),(function(){e.export(t,(function(e){n(e)}))}))}))}}},54241:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var i=n(22037),r=n(70450);function o(){var e=(0,r.Ds)(process.env);return Object.assign({HOSTNAME:i.hostname()},r.J9,e)}},90471:(e,t,n)=>{"use strict";n.d(t,{t:()=>i});var i=require("perf_hooks").performance},93290:(e,t,n)=>{"use strict";n.d(t,{m:()=>s});var i,r=n(18923),o=n(95364),s=((i={})[o.R9.TELEMETRY_SDK_NAME]="opentelemetry",i[o.R9.PROCESS_RUNTIME_NAME]="node",i[o.R9.TELEMETRY_SDK_LANGUAGE]=o.Te.NODEJS,i[o.R9.TELEMETRY_SDK_VERSION]=r.q,i)},52140:(e,t,n)=>{"use strict";function i(e){e.unref()}n.d(t,{g:()=>i})},63135:(e,t,n)=>{"use strict";n.d(t,{Y:()=>r});var i=n(90928),r=function(){function e(e){var t;void 0===e&&(e={}),this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((function(e){return"function"==typeof e.fields?e.fields():[]})).reduce((function(e,t){return e.concat(t)}),[])))}return e.prototype.inject=function(e,t,n){var r,o;try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this._propagators),a=s.next();!a.done;a=s.next()){var c=a.value;try{c.inject(e,t,n)}catch(e){i.K.warn("Failed to inject with "+c.constructor.name+". Err: "+e.message)}}}catch(e){r={error:e}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}},e.prototype.extract=function(e,t,n){return this._propagators.reduce((function(e,r){try{return r.extract(e,t,n)}catch(e){i.K.warn("Failed to inject with "+r.constructor.name+". Err: "+e.message)}return e}),e)},e.prototype.fields=function(){return this._fields.slice()},e}()},59598:(e,t,n)=>{"use strict";n.d(t,{n:()=>a});var i="[_0-9a-z-*/]",r=new RegExp("^(?:[a-z]"+i+"{0,255}|[a-z0-9]"+i+"{0,240}@[a-z]"+i+"{0,13})$"),o=/^[ -~]{0,255}[!-~]$/,s=/,|=/,a=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,n){return t.push(n+"="+e.get(n)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var n=t.trim(),i=n.indexOf("=");if(-1!==i){var a=n.slice(0,i),c=n.slice(i+1,t.length);(function(e){return r.test(e)})(a)&&function(e){return o.test(e)&&!s.test(e)}(c)&&e.set(a,c)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}()},49588:(e,t,n)=>{"use strict";n.d(t,{C3:()=>l,FX:()=>c,j_:()=>u,jf:()=>p});var i=n(52210),r=n(97228),o=n(68726),s=n(98397),a=n(59598),c="traceparent",l="tracestate",d=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function u(e){var t=d.exec(e);return t?"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}:null}var p=function(){function e(){}return e.prototype.inject=function(e,t,n){var a=i.g.getSpanContext(e);if(a&&!(0,s.Ll)(e)&&(0,r.BM)(a)){var d="00-"+a.traceId+"-"+a.spanId+"-0"+Number(a.traceFlags||o.r.NONE).toString(16);n.set(t,c,d),a.traceState&&n.set(t,l,a.traceState.serialize())}},e.prototype.extract=function(e,t,n){var r=n.get(t,c);if(!r)return e;var o=Array.isArray(r)?r[0]:r;if("string"!=typeof o)return e;var s=u(o);if(!s)return e;s.isRemote=!0;var d=n.get(t,l);if(d){var p=Array.isArray(d)?d.join(","):d;s.traceState=new a.n("string"==typeof p?p:void 0)}return i.g.setSpanContext(e,s)},e.prototype.fields=function(){return[c,l]},e}()},98397:(e,t,n)=>{"use strict";n.d(t,{Ll:()=>s,hE:()=>r,yy:()=>o});var i=(0,n(15834).Y)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function r(e){return e.setValue(i,!0)}function o(e){return e.deleteValue(i)}function s(e){return!0===e.getValue(i)}},71399:(e,t,n)=>{"use strict";n.d(t,{q:()=>r});var i=function(){function e(){var e=this;this._promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(e){this._reject(e)},e}(),r=function(){function e(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new i}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var e,t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}([this._that],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}(n),!1))).then((function(e){return t._deferred.resolve(e)}),(function(e){return t._deferred.reject(e)}))}catch(e){this._deferred.reject(e)}}return this._deferred.promise},e}()},70450:(e,t,n)=>{"use strict";n.d(t,{qG:()=>f,KR:()=>h,J9:()=>v,Ys:()=>m,VH:()=>g,vU:()=>k,Ds:()=>C});var i=n(16740),r=n(29290),o="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},s=",",a=["OTEL_SDK_DISABLED"];function c(e){return a.indexOf(e)>-1}var l=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function d(e){return l.indexOf(e)>-1}var u=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function p(e){return u.indexOf(e)>-1}var h=1/0,f=128,m=128,g=128,v={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:i.n.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:h,OTEL_ATTRIBUTE_COUNT_LIMIT:f,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:h,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:f,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:m,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:g,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:r.J.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function y(e,t,n){if(void 0!==n[e]){var i=String(n[e]);t[e]="true"===i.toLowerCase()}}function b(e,t,n,i,r){if(void 0===i&&(i=-1/0),void 0===r&&(r=1/0),void 0!==n[e]){var o=Number(n[e]);isNaN(o)||(t[e]=o<i?i:o>r?r:o)}}function w(e,t,n,i){void 0===i&&(i=s);var r=n[e];"string"==typeof r&&(t[e]=r.split(i).map((function(e){return e.trim()})))}var _={ALL:i.n.ALL,VERBOSE:i.n.VERBOSE,DEBUG:i.n.DEBUG,INFO:i.n.INFO,WARN:i.n.WARN,ERROR:i.n.ERROR,NONE:i.n.NONE};function S(e,t,n){var i=n[e];if("string"==typeof i){var r=_[i.toUpperCase()];null!=r&&(t[e]=r)}}function C(e){var t={};for(var n in v){var i=n;if("OTEL_LOG_LEVEL"===i)S(i,t,e);else if(c(i))y(i,t,e);else if(d(i))b(i,t,e);else if(p(i))w(i,t,e);else{var r=e[i];null!=r&&(t[i]=String(r))}}return t}function k(){return"undefined"!=typeof process&&process&&process.env?C(process.env):C(o)}},39009:(e,t,n)=>{"use strict";n.d(t,{T:()=>v});var i,r,o="[object Object]",s="[object Null]",a="[object Undefined]",c=Function.prototype.toString,l=c.call(Object),d=(i=Object.getPrototypeOf,r=Object,function(e){return i(r(e))}),u=Object.prototype,p=u.hasOwnProperty,h=Symbol?Symbol.toStringTag:void 0,f=u.toString;function m(e){if(!function(e){return null!=e&&"object"==typeof e}(e)||function(e){return null==e?void 0===e?a:s:h&&h in Object(e)?function(e){var t=p.call(e,h),n=e[h],i=!1;try{e[h]=void 0,i=!0}catch(e){}var r=f.call(e);return i&&(t?e[h]=n:delete e[h]),r}(e):function(e){return f.call(e)}(e)}(e)!==o)return!1;var t=d(e);if(null===t)return!0;var n=p.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)===l}var g=20;function v(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.shift(),i=new WeakMap;e.length>0;)n=b(n,e.shift(),0,i);return n}function y(e){return _(e)?e.slice():e}function b(e,t,n,i){var r;if(void 0===n&&(n=0),!(n>g)){if(n++,k(e)||k(t)||S(t))r=y(t);else if(_(e)){if(r=e.slice(),_(t))for(var o=0,s=t.length;o<s;o++)r.push(y(t[o]));else if(C(t))for(o=0,s=(a=Object.keys(t)).length;o<s;o++)r[c=a[o]]=y(t[c])}else if(C(e))if(C(t)){if(!function(e,t){return!(!m(e)||!m(t))}(e,t))return t;var a;for(r=Object.assign({},e),o=0,s=(a=Object.keys(t)).length;o<s;o++){var c,l=t[c=a[o]];if(k(l))void 0===l?delete r[c]:r[c]=l;else{var d=r[c],u=l;if(w(e,c,i)||w(t,c,i))delete r[c];else{if(C(d)&&C(u)){var p=i.get(d)||[],h=i.get(u)||[];p.push({obj:e,key:c}),h.push({obj:t,key:c}),i.set(d,p),i.set(u,h)}r[c]=b(r[c],l,n,i)}}}}else r=t;return r}}function w(e,t,n){for(var i=n.get(e[t])||[],r=0,o=i.length;r<o;r++){var s=i[r];if(s.key===t&&s.obj===e)return!0}return!1}function _(e){return Array.isArray(e)}function S(e){return"function"==typeof e}function C(e){return!k(e)&&!_(e)&&!S(e)&&"object"==typeof e}function k(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||e instanceof Date||e instanceof RegExp||null===e}},29290:(e,t,n)=>{"use strict";var i;n.d(t,{J:()=>i}),function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"}(i||(i={}))},18923:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});var i="1.10.1"},82506:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AlwaysOffSampler:()=>_,AlwaysOnSampler:()=>S,BasicTracerProvider:()=>re,BatchSpanProcessor:()=>ie,ConsoleSpanExporter:()=>oe,ForceFlushState:()=>F,InMemorySpanExporter:()=>se,NoopSpanProcessor:()=>Q,ParentBasedSampler:()=>E,RandomIdGenerator:()=>N,SamplingDecision:()=>i,SimpleSpanProcessor:()=>ce,Span:()=>y,TraceIdRatioBasedSampler:()=>x,Tracer:()=>U});var i,r=n(66339),o=n(52210),s=n(90928),a=n(27007),c=n(70087),l=n(51227),d=n(68726),u=n(98397),p=n(60551),h=n(1820),f=n(90471),m=n(97664),g=n(73108),v=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},y=function(){function e(e,t,n,i,r,o,s,a,c){void 0===s&&(s=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:h.Q.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=o,this.kind=r,this.links=s;var l=Date.now();this._performanceStartTime=f.t.now(),this._performanceOffset=l-(this._performanceStartTime+(0,m.U)()),this._startTimeProvided=null!=a,this.startTime=this._getTime(null!=a?a:l),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return null==t||this._isSpanEnded()?this:0===e.length?(s.K.warn("Invalid attribute key: "+e),this):(0,p.Do)(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(t),this):(s.K.warn("Invalid attribute value set for key: "+e),this)},e.prototype.setAttributes=function(e){var t,n;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(e)),r=i.next();!r.done;r=i.next()){var o=v(r.value,2),s=o[0],a=o[1];this.setAttribute(s,a)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},e.prototype.addEvent=function(e,t,n){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return s.K.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(s.K.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),(0,m.X_)(t)&&((0,m.X_)(n)||(n=t),t=void 0);var i=(0,p.FT)(t);return this.events.push({name:e,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this},e.prototype.setStatus=function(e){return this._isSpanEnded()||(this.status=e),this},e.prototype.updateName=function(e){return this._isSpanEnded()||(this.name=e),this},e.prototype.end=function(e){this._isSpanEnded()?s.K.error("You can only call end() on a span once."):(this._ended=!0,this.endTime=this._getTime(e),this._duration=(0,m.J3)(this.startTime,this.endTime),this._duration[0]<0&&(s.K.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this))},e.prototype._getTime=function(e){if("number"==typeof e&&e<f.t.now())return(0,m.Jt)(e+this._performanceOffset);if("number"==typeof e)return(0,m.i5)(e);if(e instanceof Date)return(0,m.i5)(e.getTime());if((0,m.Dt)(e))return e;if(this._startTimeProvided)return(0,m.i5)(Date.now());var t=f.t.now()-this._performanceStartTime;return(0,m.vF)(this.startTime,(0,m.i5)(t))},e.prototype.isRecording=function(){return!1===this._ended},e.prototype.recordException=function(e,t){var n={};"string"==typeof e?n[g.og.EXCEPTION_MESSAGE]=e:e&&(e.code?n[g.og.EXCEPTION_TYPE]=e.code.toString():e.name&&(n[g.og.EXCEPTION_TYPE]=e.name),e.message&&(n[g.og.EXCEPTION_MESSAGE]=e.message),e.stack&&(n[g.og.EXCEPTION_STACKTRACE]=e.stack)),n[g.og.EXCEPTION_TYPE]||n[g.og.EXCEPTION_MESSAGE]?this.addEvent("exception",n,t):s.K.warn("Failed to record an exception "+e)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&s.K.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substr(0,t)},e.prototype._truncateToSize=function(e){var t=this,n=this._attributeValueLengthLimit;return n<=0?(s.K.warn("Attribute value limit must be positive, got "+n),e):"string"==typeof e?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map((function(e){return"string"==typeof e?t._truncateToLimitUtil(e,n):e})):e},e}(),b=n(54241),w=n(29290);!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(i||(i={}));var _=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:i.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),S=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:i.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),C=n(97228),k=n(36220),E=function(){function e(e){var t,n,i,r;this._root=e.root,this._root||((0,k.L)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new S),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new S,this._remoteParentNotSampled=null!==(n=e.remoteParentNotSampled)&&void 0!==n?n:new _,this._localParentSampled=null!==(i=e.localParentSampled)&&void 0!==i?i:new S,this._localParentNotSampled=null!==(r=e.localParentNotSampled)&&void 0!==r?r:new _}return e.prototype.shouldSample=function(e,t,n,i,r,s){var a=o.g.getSpanContext(e);return a&&(0,C.BM)(a)?a.isRemote?a.traceFlags&d.r.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,i,r,s):this._remoteParentNotSampled.shouldSample(e,t,n,i,r,s):a.traceFlags&d.r.SAMPLED?this._localParentSampled.shouldSample(e,t,n,i,r,s):this._localParentNotSampled.shouldSample(e,t,n,i,r,s):this._root.shouldSample(e,t,n,i,r,s)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),x=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:(0,C.jN)(t)&&this._accumulate(t)<this._upperBound?i.RECORD_AND_SAMPLED:i.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,n=0;n<e.length/8;n++){var i=8*n;t=(t^parseInt(e.slice(i,i+8),16))>>>0}return t},e}(),T=(0,b.d)(),P=w.J.AlwaysOn,I=1;function D(){return{sampler:R(T),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,b.d)().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,b.d)().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:(0,b.d)().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,b.d)().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:(0,b.d)().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:(0,b.d)().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:(0,b.d)().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:(0,b.d)().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function R(e){switch(void 0===e&&(e=(0,b.d)()),e.OTEL_TRACES_SAMPLER){case w.J.AlwaysOn:return new S;case w.J.AlwaysOff:return new _;case w.J.ParentBasedAlwaysOn:return new E({root:new S});case w.J.ParentBasedAlwaysOff:return new E({root:new _});case w.J.TraceIdRatio:return new x(O(e));case w.J.ParentBasedTraceIdRatio:return new E({root:new x(O(e))});default:return s.K.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+P+'".'),new S}}function O(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return s.K.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+I+"."),I;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(s.K.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+I+"."),I):t<0||t>1?(s.K.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+I+"."),I):t}var A=n(70450),N=function(){this.generateTraceId=L(16),this.generateSpanId=L(8)},M=Buffer.allocUnsafe(16);function L(e){return function(){for(var t=0;t<e/4;t++)M.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,4*t);for(t=0;t<e&&!(M[t]>0);t++)t===e-1&&(M[e-1]=1);return M.toString("hex",0,e)}}var j,F,U=function(){function e(e,t,n){this._tracerProvider=n;var i,r,o,s,a=(i=t,r={sampler:R()},o=D(),(s=Object.assign({},o,r,i)).generalLimits=Object.assign({},o.generalLimits,i.generalLimits||{}),s.spanLimits=Object.assign({},o.spanLimits,i.spanLimits||{}),s);this._sampler=a.sampler,this._generalLimits=a.generalLimits,this._spanLimits=a.spanLimits,this._idGenerator=t.idGenerator||new N,this.resource=n.resource,this.instrumentationLibrary=e}return e.prototype.startSpan=function(e,t,n){var i,h,f;void 0===t&&(t={}),void 0===n&&(n=r.D.active()),t.root&&(n=o.g.deleteSpan(n));var m=o.g.getSpan(n);if((0,u.Ll)(n))return s.K.debug("Instrumentation suppressed, returning Noop Span"),o.g.wrapSpanContext(a.Rr);var g,v,b,w=null==m?void 0:m.spanContext(),_=this._idGenerator.generateSpanId();w&&o.g.isSpanContextValid(w)?(g=w.traceId,v=w.traceState,b=w.spanId):g=this._idGenerator.generateTraceId();var S=null!==(i=t.kind)&&void 0!==i?i:c.M.INTERNAL,C=(null!==(h=t.links)&&void 0!==h?h:[]).map((function(e){return{context:e.context,attributes:(0,p.FT)(e.attributes)}})),k=(0,p.FT)(t.attributes),E=this._sampler.shouldSample(n,g,e,S,k,C);v=null!==(f=E.traceState)&&void 0!==f?f:v;var x={traceId:g,spanId:_,traceFlags:E.decision===l.U.RECORD_AND_SAMPLED?d.r.SAMPLED:d.r.NONE,traceState:v};if(E.decision===l.U.NOT_RECORD)return s.K.debug("Recording is off, propagating context in a non-recording span"),o.g.wrapSpanContext(x);var T=new y(this,n,e,x,S,b,C,t.startTime),P=(0,p.FT)(Object.assign(k,E.attributes));return T.setAttributes(P),T},e.prototype.startActiveSpan=function(e,t,n,i){var s,a,c;if(!(arguments.length<2)){2===arguments.length?c=t:3===arguments.length?(s=t,c=n):(s=t,a=n,c=i);var l=null!=a?a:r.D.active(),d=this.startSpan(e,s,l),u=o.g.setSpan(l,d);return r.D.with(u,c,void 0,d)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}(),q=n(68303),K=n(39009),V=n(63135),W=n(49588),$=n(80926),B=n(95364),H=n(93290),z=function(){return z=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},z.apply(this,arguments)},J=function(){function e(e,t){var n,i=this;this._attributes=e,this.asyncAttributesPending=null!=t,this._syncAttributes=null!==(n=this._attributes)&&void 0!==n?n:{},this._asyncAttributesPromise=null==t?void 0:t.then((function(e){return i._attributes=Object.assign({},i._attributes,e),i.asyncAttributesPending=!1,e}),(function(e){return s.K.debug("a resource's async attributes promise rejected: %s",e),i.asyncAttributesPending=!1,{}}))}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e(((t={})[B.R9.SERVICE_NAME]="unknown_service:"+process.argv0,t[B.R9.TELEMETRY_SDK_LANGUAGE]=H.m[B.R9.TELEMETRY_SDK_LANGUAGE],t[B.R9.TELEMETRY_SDK_NAME]=H.m[B.R9.TELEMETRY_SDK_NAME],t[B.R9.TELEMETRY_SDK_VERSION]=H.m[B.R9.TELEMETRY_SDK_VERSION],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&s.K.error("Accessing resource attributes before async attributes settled"),null!==(e=this._attributes)&&void 0!==e?e:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return e=this,t=void 0,i=function(){return function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},new((n=void 0)||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}));var e,t,n,i},e.prototype.merge=function(t){var n,i=this;if(!t)return this;var r=z(z({},this._syncAttributes),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(r);var o=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then((function(e){var n,r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}(e,2),o=r[0],s=r[1];return z(z(z(z({},i._syncAttributes),o),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes),s)}));return new e(r,o)},e.EMPTY=new e({}),e}(),G=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=function(){function e(e){this._spanProcessors=e}return e.prototype.forceFlush=function(){var e,t,n=[];try{for(var i=G(this._spanProcessors),r=i.next();!r.done;r=i.next()){var o=r.value;n.push(o.forceFlush())}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return new Promise((function(e){Promise.all(n).then((function(){e()})).catch((function(t){(0,k.L)(t||new Error("MultiSpanProcessor: forceFlush failed")),e()}))}))},e.prototype.onStart=function(e,t){var n,i;try{for(var r=G(this._spanProcessors),o=r.next();!o.done;o=r.next())o.value.onStart(e,t)}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},e.prototype.onEnd=function(e){var t,n;try{for(var i=G(this._spanProcessors),r=i.next();!r.done;r=i.next())r.value.onEnd(e)}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.shutdown=function(){var e,t,n=[];try{for(var i=G(this._spanProcessors),r=i.next();!r.done;r=i.next()){var o=r.value;n.push(o.shutdown())}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return new Promise((function(e,t){Promise.all(n).then((function(){e()}),t)}))},e}(),Q=function(){function e(){}return e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}(),X=n(71399),Z=n(63420),ee=n(52140),te=function(){function e(e,t){this._exporter=e,this._finishedSpans=[],this._droppedSpansCount=0;var n=(0,b.d)();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new X.q(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(s.K.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){this._shutdownOnce.isCalled||0!=(e.spanContext().traceFlags&d.r.SAMPLED)&&this._addToBuffer(e)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var e=this;return Promise.resolve().then((function(){return e.onShutdown()})).then((function(){return e._flushAll()})).then((function(){return e._exporter.shutdown()}))},e.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&s.K.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(s.K.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},e.prototype._flushAll=function(){var e=this;return new Promise((function(t,n){for(var i=[],r=0,o=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize);r<o;r++)i.push(e._flushOneBatch());Promise.all(i).then((function(){t()})).catch(n)}))},e.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((function(t,n){var i=setTimeout((function(){n(new Error("Timeout"))}),e._exportTimeoutMillis);r.D.with((0,u.hE)(r.D.active()),(function(){var r=e._finishedSpans.splice(0,e._maxExportBatchSize),o=function(){return e._exporter.export(r,(function(e){var r;clearTimeout(i),e.code===Z.I.SUCCESS?t():n(null!==(r=e.error)&&void 0!==r?r:new Error("BatchSpanProcessor: span export failed"))}))},s=r.map((function(e){return e.resource})).filter((function(e){return e.asyncAttributesPending}));0===s.length?o():Promise.all(s.map((function(e){var t;return null===(t=e.waitForAsyncAttributes)||void 0===t?void 0:t.call(e)}))).then(o,(function(e){(0,k.L)(e),n(e)}))}))}))},e.prototype._maybeStartTimer=function(){var e=this;void 0===this._timer&&(this._timer=setTimeout((function(){e._flushOneBatch().then((function(){e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())})).catch((function(e){(0,k.L)(e)}))}),this._scheduledDelayMillis),(0,ee.g)(this._timer))},e.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},e}(),ne=(j=function(e,t){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},j(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}j(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.prototype.onShutdown=function(){},t}(te);!function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"}(F||(F={}));var re=function(){function e(e){var t;void 0===e&&(e={}),this._registeredSpanProcessors=[],this._tracers=new Map;var n=(0,K.T)({},D(),function(e){var t,n,i,r,o,s,a,c,l,d,u,p,h=Object.assign({},e.spanLimits),f=(0,A.vU)();return h.attributeCountLimit=null!==(s=null!==(o=null!==(r=null!==(n=null===(t=e.spanLimits)||void 0===t?void 0:t.attributeCountLimit)&&void 0!==n?n:null===(i=e.generalLimits)||void 0===i?void 0:i.attributeCountLimit)&&void 0!==r?r:f.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)&&void 0!==o?o:f.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==s?s:A.qG,h.attributeValueLengthLimit=null!==(p=null!==(u=null!==(d=null!==(c=null===(a=e.spanLimits)||void 0===a?void 0:a.attributeValueLengthLimit)&&void 0!==c?c:null===(l=e.generalLimits)||void 0===l?void 0:l.attributeValueLengthLimit)&&void 0!==d?d:f.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==u?u:f.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==p?p:A.KR,Object.assign({},e,{spanLimits:h})}(e));this.resource=null!==(t=n.resource)&&void 0!==t?t:J.empty(),this.resource=J.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var i=this._buildExporterFromEnv();if(void 0!==i){var r=new ie(i);this.activeSpanProcessor=r}else this.activeSpanProcessor=new Q}return e.prototype.getTracer=function(e,t,n){var i=e+"@"+(t||"")+":"+((null==n?void 0:n.schemaUrl)||"");return this._tracers.has(i)||this._tracers.set(i,new U({name:e,version:t,schemaUrl:null==n?void 0:n.schemaUrl},this._config,this)),this._tracers.get(i)},e.prototype.addSpanProcessor=function(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((function(e){return s.K.error("Error while trying to shutdown current span processor",e)})),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new Y(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(e){void 0===e&&(e={}),o.g.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&r.D.setGlobalContextManager(e.contextManager),e.propagator&&q.u.setGlobalPropagator(e.propagator)},e.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map((function(t){return new Promise((function(n){var i,r=setTimeout((function(){n(new Error("Span processor did not completed within timeout period of "+e+" ms")),i=F.timeout}),e);t.forceFlush().then((function(){clearTimeout(r),i!==F.timeout&&(i=F.resolved,n(i))})).catch((function(e){clearTimeout(r),i=F.error,n(e)}))}))}));return new Promise((function(e,n){Promise.all(t).then((function(t){var i=t.filter((function(e){return e!==F.resolved}));i.length>0?n(i):e()})).catch((function(e){return n([e])}))}))},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(e){var t;return null===(t=this.constructor._registeredPropagators.get(e))||void 0===t?void 0:t()},e.prototype._getSpanExporter=function(e){var t;return null===(t=this.constructor._registeredExporters.get(e))||void 0===t?void 0:t()},e.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set((0,b.d)().OTEL_PROPAGATORS)),n=t.map((function(t){var n=e._getPropagator(t);return n||s.K.warn('Propagator "'+t+'" requested through environment variable is unavailable.'),n})).reduce((function(e,t){return t&&e.push(t),e}),[]);return 0===n.length?void 0:1===t.length?n[0]:new V.Y({propagators:n})},e.prototype._buildExporterFromEnv=function(){var e=(0,b.d)().OTEL_TRACES_EXPORTER;if("none"!==e&&""!==e){var t=this._getSpanExporter(e);return t||s.K.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},e._registeredPropagators=new Map([["tracecontext",function(){return new W.jf}],["baggage",function(){return new $.a}]]),e._registeredExporters=new Map,e}(),oe=function(){function e(){}return e.prototype.export=function(e,t){return this._sendSpans(e,t)},e.prototype.shutdown=function(){return this._sendSpans([]),Promise.resolve()},e.prototype._exportInfo=function(e){var t;return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:null===(t=e.spanContext().traceState)||void 0===t?void 0:t.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:(0,m.ji)(e.startTime),duration:(0,m.ji)(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}},e.prototype._sendSpans=function(e,t){var n,i;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),o=r.next();!o.done;o=r.next()){var s=o.value;console.dir(this._exportInfo(s),{depth:3})}}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}if(t)return t({code:Z.I.SUCCESS})},e}(),se=function(){function e(){this._finishedSpans=[],this._stopped=!1}return e.prototype.export=function(e,t){var n;if(this._stopped)return t({code:Z.I.FAILED,error:new Error("Exporter has been stopped")});(n=this._finishedSpans).push.apply(n,function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}(e),!1)),setTimeout((function(){return t({code:Z.I.SUCCESS})}),0)},e.prototype.shutdown=function(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()},e.prototype.reset=function(){this._finishedSpans=[]},e.prototype.getFinishedSpans=function(){return this._finishedSpans},e}(),ae=n(96237),ce=function(){function e(e){this._exporter=e,this._shutdownOnce=new X.q(this._shutdown,this),this._unresolvedExports=new Set}return e.prototype.forceFlush=function(){return e=this,t=void 0,i=function(){return function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return e.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}));var e,t,n,i},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){var t,n,i=this;if(!this._shutdownOnce.isCalled&&0!=(e.spanContext().traceFlags&d.r.SAMPLED)){var r=function(){return ae.internal._export(i._exporter,[e]).then((function(e){var t;e.code!==Z.I.SUCCESS&&(0,k.L)(null!==(t=e.error)&&void 0!==t?t:new Error("SimpleSpanProcessor: span export failed (status "+e+")"))})).catch((function(e){(0,k.L)(e)}))};if(e.resource.asyncAttributesPending){var o=null===(n=(t=e.resource).waitForAsyncAttributes)||void 0===n?void 0:n.call(t).then((function(){return null!=o&&i._unresolvedExports.delete(o),r()}),(function(e){return(0,k.L)(e)}));null!=o&&this._unresolvedExports.add(o)}else r()}},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return this._exporter.shutdown()},e}()},47480:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AwsEcsLaunchtypeValues:()=>r._t,CloudPlatformValues:()=>r.CY,CloudProviderValues:()=>r.LH,DbCassandraConsistencyLevelValues:()=>i.xM,DbSystemValues:()=>i.fL,FaasDocumentOperationValues:()=>i.ZI,FaasInvokedProviderValues:()=>i.o0,FaasTriggerValues:()=>i.iD,HostArchValues:()=>r.IV,HttpFlavorValues:()=>i.Yi,MessageTypeValues:()=>i._J,MessagingDestinationKindValues:()=>i.y8,MessagingOperationValues:()=>i.jU,NetHostConnectionSubtypeValues:()=>i.oP,NetHostConnectionTypeValues:()=>i.ZM,NetTransportValues:()=>i.Di,OsTypeValues:()=>r.er,RpcGrpcStatusCodeValues:()=>i.yG,SemanticAttributes:()=>i.og,SemanticResourceAttributes:()=>r.R9,TelemetrySdkLanguageValues:()=>r.Te});var i=n(73108),r=n(95364)},95364:(e,t,n)=>{"use strict";n.d(t,{CY:()=>o,IV:()=>a,LH:()=>r,R9:()=>i,Te:()=>l,_t:()=>s,er:()=>c});var i={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},r={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},o={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"},s={EC2:"ec2",FARGATE:"fargate"},a={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"},c={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"},l={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}},73108:(e,t,n)=>{"use strict";n.d(t,{Di:()=>l,Yi:()=>p,ZI:()=>a,ZM:()=>d,_J:()=>g,fL:()=>r,iD:()=>s,jU:()=>f,o0:()=>c,oP:()=>u,og:()=>i,xM:()=>o,y8:()=>h,yG:()=>m});var i={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},r={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"},o={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"},s={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"},a={INSERT:"insert",EDIT:"edit",DELETE:"delete"},c={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},l={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"},d={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"},u={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"},p={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"},h={QUEUE:"queue",TOPIC:"topic"},f={RECEIVE:"receive",PROCESS:"process"},m={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},g={SENT:"SENT",RECEIVED:"RECEIVED"}},40725:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.oneDataSystemClientFactory=void 0,t.oneDataSystemClientFactory=async(e,t,i)=>{const r=await(async(e,t,i)=>{const r=await Promise.resolve().then((()=>o(n(67164)))),s=await Promise.resolve().then((()=>o(n(71488)))),a=new r.AppInsightsCore,c=new s.PostChannel,l={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[c]]};if(i){l.extensionConfig={};const e={alwaysUseXhrOverride:!0,httpXHROverride:i};l.extensionConfig[c.identifier]=e}const d=t.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(l,[]),a.addTelemetryInitializer((e=>{d&&(e.ext=e.ext??{},e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)})),a})(e,t,i);return{logEvent:(e,t)=>{try{r?.track({name:e,baseData:{name:e,properties:t?.properties,measurements:t?.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},flush:async()=>{try{r?.unload()}catch(e){throw new Error("Failed to flush app insights!\n"+e.message)}}}}},33456:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetryReporter=void 0,t.BaseTelemetryReporter=class{constructor(e,t,n){this.telemetrySender=e,this.vscodeAPI=t,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates((()=>{this.updateUserOptIn()}))}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,t,n,i){i?this.telemetrySender.sendEventData(e,{properties:t,measurements:n}):this.telemetryLogger.logUsage(e,{properties:t,measurements:n})}sendTelemetryEvent(e,t,n){this.internalSendTelemetryEvent(e,t,n,!1)}sendDangerousTelemetryEvent(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,t,n,!0)}internalSendTelemetryErrorEvent(e,t,n,i){i?this.telemetrySender.sendEventData(e,{properties:t,measurements:n}):this.telemetryLogger.logError(e,{properties:t,measurements:n})}sendTelemetryErrorEvent(e,t,n){this.internalSendTelemetryErrorEvent(e,t,n,!1)}sendDangerousTelemetryErrorEvent(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,t,n,!0)}internalSendTelemetryException(e,t,n,i){i?this.telemetrySender.sendErrorData(e,{properties:t,measurements:n}):this.telemetryLogger.logError(e,{properties:t,measurements:n})}sendTelemetryException(e,t,n){this.internalSendTelemetryException(e,t,n,!1)}sendDangerousTelemetryException(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryException(e,t,n,!0)}dispose(){return this.telemetryLogger.dispose(),Promise.all(this.disposables.map((e=>e.dispose())))}}},12015:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetrySender=void 0,function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"}(n||(n={})),t.BaseTelemetrySender=class{constructor(e,t){this._instantiationStatus=n.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}sendEventData(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):this._instantiationStatus!==n.INSTANTIATED&&this._eventQueue.push({eventName:e,data:t})}sendErrorData(e,t){this._telemetryClient||this._instantiationStatus!==n.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:t})}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.sendEventData(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.sendErrorData(e,t))),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===n.NOT_INSTANTIATED&&(this._instantiationStatus=n.INSTANTIATING,this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._instantiationStatus=n.INSTANTIATED,this._flushQueues()})).catch((e=>{console.error(e),this._instantiationStatus=n.INSTANTIATED})))}}},95888:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryUtil=void 0;class n{static applyReplacements(e,t){for(const n of Object.keys(e))for(const i of t)i.lookup.test(n)&&(void 0!==i.replacementString?e[n]=i.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.7.7"}}static getInstance(){return n._instance||(n._instance=new n),n._instance}}t.TelemetryUtil=n},92291:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(22037)),a=o(n(66828)),c=o(n(95687)),l=n(33456),d=n(12015),u=n(95888),p=n(40725);class h extends l.BaseTelemetryReporter{constructor(e,t){let i=e=>(async(e,t)=>{let i;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";const t=await Promise.resolve().then((()=>o(n(9574))));t.defaultClient?(i=new t.TelemetryClient(e),i.channel.setUseDiskRetryCaching(!0)):(t.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),i=t.defaultClient),a&&a.env&&(i.context.tags[i.context.keys.userId]=a.env.machineId,i.context.tags[i.context.keys.sessionId]=a.env.sessionId,i.context.tags[i.context.keys.cloudRole]=a.env.appName,i.context.tags[i.context.keys.cloudRoleInstance]=a.env.appName)}catch(e){return Promise.reject("Failed to initialize app insights!\n"+e.message)}return t?.length&&function(e,t){e.addTelemetryProcessor((e=>(Array.isArray(e.tags)?e.tags.forEach((e=>u.TelemetryUtil.applyReplacements(e,t))):e.tags&&u.TelemetryUtil.applyReplacements(e.tags,t),e.data.baseData&&u.TelemetryUtil.applyReplacements(e.data.baseData,t),!0)))}(i,t),{logEvent:(e,t)=>{try{i?.trackEvent({name:e,properties:t?.properties,measurements:t?.measurements})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},flush:async()=>{try{i?.flush()}catch(e){throw new Error("Failed to flush app insights!\n"+e.message)}}}})(e,t);u.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(i=e=>(0,p.oneDataSystemClientFactory)(e,a,{sendPOST:(e,t)=>{const n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{const i=c.request(e.urlString,n,(e=>{e.on("data",(function(n){t(e.statusCode??200,e.headers,n.toString())})),e.on("error",(function(){t(0,{})}))}));i.write(e.data),i.end()}catch{t(0,{})}}}));const r={release:s.release(),platform:s.platform(),architecture:s.arch()},l=new d.BaseTelemetrySender(e,i);if(e&&0===e.indexOf("AIF-"))throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(l,a,{additionalCommonProperties:u.TelemetryUtil.getAdditionalCommonProperties(r)})}}t.default=h},1730:(e,t,n)=>{(()=>{var t={881:(e,t,n)=>{(()=>{var t={705:e=>{e.exports=function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}a=n[s]={exports:{}},t[s][0].call(a.exports,(function(e){return r(t[s][1][e]||e)}),a,a.exports,e,t,n,i)}return n[s].exports}for(var o=void 0,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){(function(i,r,o,s,a,c,l,d,u){"use strict";var p=e("crypto");function h(e,t){var n;return void 0===(n="passthrough"!==(t=g(e,t)).algorithm?p.createHash(t.algorithm):new b).write&&(n.write=n.update,n.end=n.update),y(t,n).dispatch(e),n.update||n.end(""),n.digest?n.digest("buffer"===t.encoding?void 0:t.encoding):(e=n.read(),"buffer"!==t.encoding?e.toString(t.encoding):e)}(n=t.exports=h).sha1=function(e){return h(e)},n.keys=function(e){return h(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},n.MD5=function(e){return h(e,{algorithm:"md5",encoding:"hex"})},n.keysMD5=function(e){return h(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var f=p.getHashes?p.getHashes().slice():["sha1","md5"],m=(f.push("passthrough"),["buffer","hex","binary","base64"]);function g(e,t){var n={};if(n.algorithm=(t=t||{}).algorithm||"sha1",n.encoding=t.encoding||"hex",n.excludeValues=!!t.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=!0===t.ignoreUnknown,n.respectType=!1!==t.respectType,n.respectFunctionNames=!1!==t.respectFunctionNames,n.respectFunctionProperties=!1!==t.respectFunctionProperties,n.unorderedArrays=!0===t.unorderedArrays,n.unorderedSets=!1!==t.unorderedSets,n.unorderedObjects=!1!==t.unorderedObjects,n.replacer=t.replacer||void 0,n.excludeKeys=t.excludeKeys||void 0,void 0===e)throw new Error("Object argument required.");for(var i=0;i<f.length;++i)f[i].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=f[i]);if(-1===f.indexOf(n.algorithm))throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+f.join(", "));if(-1===m.indexOf(n.encoding)&&"passthrough"!==n.algorithm)throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+m.join(", "));return n}function v(e){if("function"==typeof e)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))}function y(e,t,n){function i(e){return t.update?t.update(e,"utf8"):t.write(e,"utf8")}return n=n||[],{dispatch:function(t){return this["_"+(null===(t=e.replacer?e.replacer(t):t)?"null":typeof t)](t)},_object:function(t){var r,s=Object.prototype.toString.call(t),a=/\[object (.*)\]/i.exec(s);if(a=(a=a?a[1]:"unknown:["+s+"]").toLowerCase(),0<=(s=n.indexOf(t)))return this.dispatch("[CIRCULAR:"+s+"]");if(n.push(t),void 0!==o&&o.isBuffer&&o.isBuffer(t))return i("buffer:"),i(t);if("object"===a||"function"===a||"asyncfunction"===a)return s=Object.keys(t),e.unorderedObjects&&(s=s.sort()),!1===e.respectType||v(t)||s.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(s=s.filter((function(t){return!e.excludeKeys(t)}))),i("object:"+s.length+":"),r=this,s.forEach((function(n){r.dispatch(n),i(":"),e.excludeValues||r.dispatch(t[n]),i(",")}));if(!this["_"+a]){if(e.ignoreUnknown)return i("["+a+"]");throw new Error('Unknown object type "'+a+'"')}this["_"+a](t)},_array:function(t,r){r=void 0!==r?r:!1!==e.unorderedArrays;var o=this;if(i("array:"+t.length+":"),!r||t.length<=1)return t.forEach((function(e){return o.dispatch(e)}));var s=[];return r=t.map((function(t){var i=new b,r=n.slice();return y(e,i,r).dispatch(t),s=s.concat(r.slice(n.length)),i.read().toString()})),n=n.concat(s),r.sort(),this._array(r,!1)},_date:function(e){return i("date:"+e.toJSON())},_symbol:function(e){return i("symbol:"+e.toString())},_error:function(e){return i("error:"+e.toString())},_boolean:function(e){return i("bool:"+e.toString())},_string:function(e){i("string:"+e.length+":"),i(e.toString())},_function:function(t){i("fn:"),v(t)?this.dispatch("[native]"):this.dispatch(t.toString()),!1!==e.respectFunctionNames&&this.dispatch("function-name:"+String(t.name)),e.respectFunctionProperties&&this._object(t)},_number:function(e){return i("number:"+e.toString())},_xml:function(e){return i("xml:"+e.toString())},_null:function(){return i("Null")},_undefined:function(){return i("Undefined")},_regexp:function(e){return i("regex:"+e.toString())},_uint8array:function(e){return i("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){return i("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){return i("int8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){return i("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){return i("int16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){return i("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){return i("int32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){return i("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){return i("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){return i("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){return i("url:"+e.toString())},_map:function(t){return i("map:"),t=Array.from(t),this._array(t,!1!==e.unorderedSets)},_set:function(t){return i("set:"),t=Array.from(t),this._array(t,!1!==e.unorderedSets)},_file:function(e){return i("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},_blob:function(){if(e.ignoreUnknown)return i("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return i("domwindow")},_bigint:function(e){return i("bigint:"+e.toString())},_process:function(){return i("process")},_timer:function(){return i("timer")},_pipe:function(){return i("pipe")},_tcp:function(){return i("tcp")},_udp:function(){return i("udp")},_tty:function(){return i("tty")},_statwatcher:function(){return i("statwatcher")},_securecontext:function(){return i("securecontext")},_connection:function(){return i("connection")},_zlib:function(){return i("zlib")},_context:function(){return i("context")},_nodescript:function(){return i("nodescript")},_httpparser:function(){return i("httpparser")},_dataview:function(){return i("dataview")},_signal:function(){return i("signal")},_fsevent:function(){return i("fsevent")},_tlswrap:function(){return i("tlswrap")}}}function b(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}n.writeToStream=function(e,t,n){return void 0===n&&(n=t,t={}),y(t=g(e,t),n).dispatch(e)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(e,t,n){(function(e,t,i,r,o,s,a,c,l){!function(e){"use strict";var t="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),i="/".charCodeAt(0),r="0".charCodeAt(0),o="a".charCodeAt(0),s="A".charCodeAt(0),a="-".charCodeAt(0),c="_".charCodeAt(0);function l(e){return(e=e.charCodeAt(0))===n||e===a?62:e===i||e===c?63:e<r?-1:e<r+10?e-r+26+26:e<s+26?e-s:e<o+26?e-o+26:void 0}e.toByteArray=function(e){var n,i;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.length,o=(r="="===e.charAt(r-2)?2:"="===e.charAt(r-1)?1:0,new t(3*e.length/4-r)),s=0<r?e.length-4:e.length,a=0;function c(e){o[a++]=e}for(n=0;n<s;n+=4,0)c((16711680&(i=l(e.charAt(n))<<18|l(e.charAt(n+1))<<12|l(e.charAt(n+2))<<6|l(e.charAt(n+3))))>>16),c((65280&i)>>8),c(255&i);return 2==r?c(255&(i=l(e.charAt(n))<<2|l(e.charAt(n+1))>>4)):1==r&&(c((i=l(e.charAt(n))<<10|l(e.charAt(n+1))<<4|l(e.charAt(n+2))>>2)>>8&255),c(255&i)),o},e.fromByteArray=function(e){var t,n,i,r,o=e.length%3,s="";function a(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}for(t=0,i=e.length-o;t<i;t+=3)s+=a((r=n=(e[t]<<16)+(e[t+1]<<8)+e[t+2])>>18&63)+a(r>>12&63)+a(r>>6&63)+a(63&r);switch(o){case 1:s=(s+=a((n=e[e.length-1])>>2))+a(n<<4&63)+"==";break;case 2:s=(s=(s+=a((n=(e[e.length-2]<<8)+e[e.length-1])>>10))+a(n>>4&63))+a(n<<2&63)+"="}return s}}(void 0===n?this.base64js={}:n)}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(e,t,n){(function(t,i,r,o,s,a,c,l,d){var u=e("base64-js"),p=e("ieee754");function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);var i,o,s,a,c=typeof e;if("base64"===t&&"string"==c)for(e=(a=e).trim?a.trim():a.replace(/^\s+|\s+$/g,"");e.length%4!=0;)e+="=";if("number"==c)i=T(e);else if("string"==c)i=r.byteLength(e,t);else{if("object"!=c)throw new Error("First argument needs to be a number, array or string.");i=T(e.length)}if(r._useTypedArrays?o=r._augment(new Uint8Array(i)):((o=this).length=i,o._isBuffer=!0),r._useTypedArrays&&"number"==typeof e.byteLength)o._set(e);else if(P(a=e)||r.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length)for(s=0;s<i;s++)r.isBuffer(e)?o[s]=e.readUInt8(s):o[s]=e[s];else if("string"==c)o.write(e,0,t);else if("number"==c&&!r._useTypedArrays&&!n)for(s=0;s<i;s++)o[s]=0;return o}function h(e,t,n,i){var r;if(i||(j("boolean"==typeof n,"missing or invalid endian"),j(null!=t,"missing offset"),j(t+1<e.length,"Trying to read beyond buffer length")),!((i=e.length)<=t))return n?(r=e[t],t+1<i&&(r|=e[t+1]<<8)):(r=e[t]<<8,t+1<i&&(r|=e[t+1])),r}function f(e,t,n,i){var r;if(i||(j("boolean"==typeof n,"missing or invalid endian"),j(null!=t,"missing offset"),j(t+3<e.length,"Trying to read beyond buffer length")),!((i=e.length)<=t))return n?(t+2<i&&(r=e[t+2]<<16),t+1<i&&(r|=e[t+1]<<8),r|=e[t],t+3<i&&(r+=e[t+3]<<24>>>0)):(t+1<i&&(r=e[t+1]<<16),t+2<i&&(r|=e[t+2]<<8),t+3<i&&(r|=e[t+3]),r+=e[t]<<24>>>0),r}function m(e,t,n,i){if(i||(j("boolean"==typeof n,"missing or invalid endian"),j(null!=t,"missing offset"),j(t+1<e.length,"Trying to read beyond buffer length")),!(e.length<=t))return 32768&(i=h(e,t,n,!0))?-1*(65535-i+1):i}function g(e,t,n,i){if(i||(j("boolean"==typeof n,"missing or invalid endian"),j(null!=t,"missing offset"),j(t+3<e.length,"Trying to read beyond buffer length")),!(e.length<=t))return 2147483648&(i=f(e,t,n,!0))?-1*(4294967295-i+1):i}function v(e,t,n,i){return i||(j("boolean"==typeof n,"missing or invalid endian"),j(t+3<e.length,"Trying to read beyond buffer length")),p.read(e,t,n,23,4)}function y(e,t,n,i){return i||(j("boolean"==typeof n,"missing or invalid endian"),j(t+7<e.length,"Trying to read beyond buffer length")),p.read(e,t,n,52,8)}function b(e,t,n,i,r){if(r||(j(null!=t,"missing value"),j("boolean"==typeof i,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+1<e.length,"trying to write beyond buffer length"),N(t,65535)),!((r=e.length)<=n))for(var o=0,s=Math.min(r-n,2);o<s;o++)e[n+o]=(t&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function w(e,t,n,i,r){if(r||(j(null!=t,"missing value"),j("boolean"==typeof i,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+3<e.length,"trying to write beyond buffer length"),N(t,4294967295)),!((r=e.length)<=n))for(var o=0,s=Math.min(r-n,4);o<s;o++)e[n+o]=t>>>8*(i?o:3-o)&255}function _(e,t,n,i,r){r||(j(null!=t,"missing value"),j("boolean"==typeof i,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+1<e.length,"Trying to write beyond buffer length"),M(t,32767,-32768)),e.length<=n||b(e,0<=t?t:65535+t+1,n,i,r)}function S(e,t,n,i,r){r||(j(null!=t,"missing value"),j("boolean"==typeof i,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+3<e.length,"Trying to write beyond buffer length"),M(t,2147483647,-2147483648)),e.length<=n||w(e,0<=t?t:4294967295+t+1,n,i,r)}function C(e,t,n,i,r){r||(j(null!=t,"missing value"),j("boolean"==typeof i,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+3<e.length,"Trying to write beyond buffer length"),L(t,34028234663852886e22,-34028234663852886e22)),e.length<=n||p.write(e,t,n,i,23,4)}function k(e,t,n,i,r){r||(j(null!=t,"missing value"),j("boolean"==typeof i,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+7<e.length,"Trying to write beyond buffer length"),L(t,17976931348623157e292,-17976931348623157e292)),e.length<=n||p.write(e,t,n,i,52,8)}n.Buffer=r,n.SlowBuffer=r,n.INSPECT_MAX_BYTES=50,r.poolSize=8192,r._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(e){return!1}}(),r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.isBuffer=function(e){return!(null==e||!e._isBuffer)},r.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"hex":n=e.length/2;break;case"utf8":case"utf-8":n=D(e).length;break;case"ascii":case"binary":case"raw":n=e.length;break;case"base64":n=R(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;default:throw new Error("Unknown encoding")}return n},r.concat=function(e,t){if(j(P(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new r(0);if(1===e.length)return e[0];if("number"!=typeof t)for(o=t=0;o<e.length;o++)t+=e[o].length;for(var n=new r(t),i=0,o=0;o<e.length;o++){var s=e[o];s.copy(n,i),i+=s.length}return n},r.prototype.write=function(e,t,n,i){isFinite(t)?isFinite(n)||(i=n,n=void 0):(l=i,i=t,t=n,n=l),t=Number(t)||0;var o,s,a,c,l=this.length-t;switch((!n||l<(n=Number(n)))&&(n=l),i=String(i||"utf8").toLowerCase()){case"hex":o=function(e,t,n,i){n=Number(n)||0;var o=e.length-n;(!i||o<(i=Number(i)))&&(i=o),j((o=t.length)%2==0,"Invalid hex string"),o/2<i&&(i=o/2);for(var s=0;s<i;s++){var a=parseInt(t.substr(2*s,2),16);j(!isNaN(a),"Invalid hex string"),e[n+s]=a}return r._charsWritten=2*s,s}(this,e,t,n);break;case"utf8":case"utf-8":s=this,a=t,c=n,o=r._charsWritten=O(D(e),s,a,c);break;case"ascii":case"binary":o=function(e,t,n,i){return r._charsWritten=O(function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}(this,e,t,n);break;case"base64":s=this,a=t,c=n,o=r._charsWritten=O(R(e),s,a,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=function(e,t,n,i){return r._charsWritten=O(function(e){for(var t,n,i=[],r=0;r<e.length;r++)t=(n=e.charCodeAt(r))>>8,n%=256,i.push(n),i.push(t);return i}(t),e,n,i)}(this,e,t,n);break;default:throw new Error("Unknown encoding")}return o},r.prototype.toString=function(e,t,n){var i,r,o,s,a=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,(n=void 0!==n?Number(n):a.length)===t)return"";switch(e){case"hex":i=function(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||i<n)&&(n=i);for(var r="",o=t;o<n;o++)r+=I(e[o]);return r}(a,t,n);break;case"utf8":case"utf-8":i=function(e,t,n){var i="",r="";n=Math.min(e.length,n);for(var o=t;o<n;o++)e[o]<=127?(i+=A(r)+String.fromCharCode(e[o]),r=""):r+="%"+e[o].toString(16);return i+A(r)}(a,t,n);break;case"ascii":case"binary":i=function(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;r++)i+=String.fromCharCode(e[r]);return i}(a,t,n);break;case"base64":r=a,s=n,i=0===(o=t)&&s===r.length?u.fromByteArray(r):u.fromByteArray(r.slice(o,s));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=function(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}(a,t,n);break;default:throw new Error("Unknown encoding")}return i},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.copy=function(e,t,n,i){if(t=t||0,(i=i||0===i?i:this.length)!==(n=n||0)&&0!==e.length&&0!==this.length){j(n<=i,"sourceEnd < sourceStart"),j(0<=t&&t<e.length,"targetStart out of bounds"),j(0<=n&&n<this.length,"sourceStart out of bounds"),j(0<=i&&i<=this.length,"sourceEnd out of bounds"),i>this.length&&(i=this.length);var o=(i=e.length-t<i-n?e.length-t+n:i)-n;if(o<100||!r._useTypedArrays)for(var s=0;s<o;s++)e[s+t]=this[s+n];else e._set(this.subarray(n,n+o),t)}},r.prototype.slice=function(e,t){var n=this.length;if(e=x(e,n,0),t=x(t,n,n),r._useTypedArrays)return r._augment(this.subarray(e,t));for(var i=t-e,o=new r(i,void 0,!0),s=0;s<i;s++)o[s]=this[s+e];return o},r.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},r.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},r.prototype.readUInt8=function(e,t){if(t||(j(null!=e,"missing offset"),j(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return this[e]},r.prototype.readUInt16LE=function(e,t){return h(this,e,!0,t)},r.prototype.readUInt16BE=function(e,t){return h(this,e,!1,t)},r.prototype.readUInt32LE=function(e,t){return f(this,e,!0,t)},r.prototype.readUInt32BE=function(e,t){return f(this,e,!1,t)},r.prototype.readInt8=function(e,t){if(t||(j(null!=e,"missing offset"),j(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return 128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){return m(this,e,!0,t)},r.prototype.readInt16BE=function(e,t){return m(this,e,!1,t)},r.prototype.readInt32LE=function(e,t){return g(this,e,!0,t)},r.prototype.readInt32BE=function(e,t){return g(this,e,!1,t)},r.prototype.readFloatLE=function(e,t){return v(this,e,!0,t)},r.prototype.readFloatBE=function(e,t){return v(this,e,!1,t)},r.prototype.readDoubleLE=function(e,t){return y(this,e,!0,t)},r.prototype.readDoubleBE=function(e,t){return y(this,e,!1,t)},r.prototype.writeUInt8=function(e,t,n){n||(j(null!=e,"missing value"),j(null!=t,"missing offset"),j(t<this.length,"trying to write beyond buffer length"),N(e,255)),t>=this.length||(this[t]=e)},r.prototype.writeUInt16LE=function(e,t,n){b(this,e,t,!0,n)},r.prototype.writeUInt16BE=function(e,t,n){b(this,e,t,!1,n)},r.prototype.writeUInt32LE=function(e,t,n){w(this,e,t,!0,n)},r.prototype.writeUInt32BE=function(e,t,n){w(this,e,t,!1,n)},r.prototype.writeInt8=function(e,t,n){n||(j(null!=e,"missing value"),j(null!=t,"missing offset"),j(t<this.length,"Trying to write beyond buffer length"),M(e,127,-128)),t>=this.length||(0<=e?this.writeUInt8(e,t,n):this.writeUInt8(255+e+1,t,n))},r.prototype.writeInt16LE=function(e,t,n){_(this,e,t,!0,n)},r.prototype.writeInt16BE=function(e,t,n){_(this,e,t,!1,n)},r.prototype.writeInt32LE=function(e,t,n){S(this,e,t,!0,n)},r.prototype.writeInt32BE=function(e,t,n){S(this,e,t,!1,n)},r.prototype.writeFloatLE=function(e,t,n){C(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){C(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){k(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){k(this,e,t,!1,n)},r.prototype.fill=function(e,t,n){if(t=t||0,n=n||this.length,j("number"==typeof(e="string"==typeof(e=e||0)?e.charCodeAt(0):e)&&!isNaN(e),"value is not a number"),j(t<=n,"end < start"),n!==t&&0!==this.length){j(0<=t&&t<this.length,"start out of bounds"),j(0<=n&&n<=this.length,"end out of bounds");for(var i=t;i<n;i++)this[i]=e}},r.prototype.inspect=function(){for(var e=[],t=this.length,i=0;i<t;i++)if(e[i]=I(this[i]),i===n.INSPECT_MAX_BYTES){e[i+1]="...";break}return"<Buffer "+e.join(" ")+">"},r.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(r._useTypedArrays)return new r(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer};var E=r.prototype;function x(e,t,n){return"number"!=typeof e?n:t<=(e=~~e)?t:0<=e||0<=(e+=t)?e:0}function T(e){return(e=~~Math.ceil(+e))<0?0:e}function P(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function I(e){return e<16?"0"+e.toString(16):e.toString(16)}function D(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<=127)t.push(e.charCodeAt(n));else for(var r=n,o=(55296<=i&&i<=57343&&n++,encodeURIComponent(e.slice(r,n+1)).substr(1).split("%")),s=0;s<o.length;s++)t.push(parseInt(o[s],16))}return t}function R(e){return u.toByteArray(e)}function O(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);r++)t[r+n]=e[r];return r}function A(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}function N(e,t){j("number"==typeof e,"cannot write a non-number as a number"),j(0<=e,"specified a negative value for writing an unsigned value"),j(e<=t,"value is larger than maximum value for type"),j(Math.floor(e)===e,"value has a fractional component")}function M(e,t,n){j("number"==typeof e,"cannot write a non-number as a number"),j(e<=t,"value larger than maximum allowed value"),j(n<=e,"value smaller than minimum allowed value"),j(Math.floor(e)===e,"value has a fractional component")}function L(e,t,n){j("number"==typeof e,"cannot write a non-number as a number"),j(e<=t,"value larger than maximum allowed value"),j(n<=e,"value smaller than minimum allowed value")}function j(e,t){if(!e)throw new Error(t||"Failed assertion")}r._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=E.get,e.set=E.set,e.write=E.write,e.toString=E.toString,e.toLocaleString=E.toString,e.toJSON=E.toJSON,e.copy=E.copy,e.slice=E.slice,e.readUInt8=E.readUInt8,e.readUInt16LE=E.readUInt16LE,e.readUInt16BE=E.readUInt16BE,e.readUInt32LE=E.readUInt32LE,e.readUInt32BE=E.readUInt32BE,e.readInt8=E.readInt8,e.readInt16LE=E.readInt16LE,e.readInt16BE=E.readInt16BE,e.readInt32LE=E.readInt32LE,e.readInt32BE=E.readInt32BE,e.readFloatLE=E.readFloatLE,e.readFloatBE=E.readFloatBE,e.readDoubleLE=E.readDoubleLE,e.readDoubleBE=E.readDoubleBE,e.writeUInt8=E.writeUInt8,e.writeUInt16LE=E.writeUInt16LE,e.writeUInt16BE=E.writeUInt16BE,e.writeUInt32LE=E.writeUInt32LE,e.writeUInt32BE=E.writeUInt32BE,e.writeInt8=E.writeInt8,e.writeInt16LE=E.writeInt16LE,e.writeInt16BE=E.writeInt16BE,e.writeInt32LE=E.writeInt32LE,e.writeInt32BE=E.writeInt32BE,e.writeFloatLE=E.writeFloatLE,e.writeFloatBE=E.writeFloatBE,e.writeDoubleLE=E.writeDoubleLE,e.writeDoubleBE=E.writeDoubleBE,e.fill=E.fill,e.inspect=E.inspect,e.toArrayBuffer=E.toArrayBuffer,e}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(e,t,n){(function(n,i,r,o,s,a,c,l,d){var u=new(r=e("buffer").Buffer)(4);u.fill(0),t.exports={hash:function(e,t,n,i){for(var o=t(function(e,t){e.length%4!=0&&(n=e.length+(4-e.length%4),e=r.concat([e,u],n));for(var n,i=[],o=t?e.readInt32BE:e.readInt32LE,s=0;s<e.length;s+=4)i.push(o.call(e,s));return i}(e=r.isBuffer(e)?e:new r(e),i),8*e.length),s=(t=i,new r(n)),a=t?s.writeInt32BE:s.writeInt32LE,c=0;c<o.length;c++)a.call(s,o[c],4*c,!0);return s}}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(e,t,n){(function(t,i,r,o,s,a,c,l,d){r=e("buffer").Buffer;var u=e("./sha"),p=e("./sha256"),h=e("./rng"),f={sha1:u,sha256:p,md5:e("./md5")},m=64,g=new r(m);function v(e,t){var n=f[e=e||"sha1"],i=[];return n||y("algorithm:",e,"is not yet supported"),{update:function(e){return r.isBuffer(e)||(e=new r(e)),i.push(e),e.length,this},digest:function(e){var o=r.concat(i);return o=t?function(e,t,n){r.isBuffer(t)||(t=new r(t)),r.isBuffer(n)||(n=new r(n)),t.length>m?t=e(t):t.length<m&&(t=r.concat([t,g],m));for(var i=new r(m),o=new r(m),s=0;s<m;s++)i[s]=54^t[s],o[s]=92^t[s];return n=e(r.concat([i,n])),e(r.concat([o,n]))}(n,t,o):n(o),i=null,e?o.toString(e):o}}}function y(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}g.fill(0),n.createHash=function(e){return v(e)},n.createHmac=v,n.randomBytes=function(e,t){if(!t||!t.call)return new r(h(e));try{t.call(this,void 0,new r(h(e)))}catch(e){t(e)}};var b,w=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],_=function(e){n[e]=function(){y("sorry,",e,"is not implemented yet")}};for(b in w)_(w[b])}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(e,t,n){(function(n,i,r,o,s,a,c,l,d){var u=e("./helpers");function p(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,i=-271733879,r=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=n,c=i,l=r,d=o;n=f(n,i,r,o,e[s+0],7,-680876936),o=f(o,n,i,r,e[s+1],12,-389564586),r=f(r,o,n,i,e[s+2],17,606105819),i=f(i,r,o,n,e[s+3],22,-1044525330),n=f(n,i,r,o,e[s+4],7,-176418897),o=f(o,n,i,r,e[s+5],12,1200080426),r=f(r,o,n,i,e[s+6],17,-1473231341),i=f(i,r,o,n,e[s+7],22,-45705983),n=f(n,i,r,o,e[s+8],7,1770035416),o=f(o,n,i,r,e[s+9],12,-1958414417),r=f(r,o,n,i,e[s+10],17,-42063),i=f(i,r,o,n,e[s+11],22,-1990404162),n=f(n,i,r,o,e[s+12],7,1804603682),o=f(o,n,i,r,e[s+13],12,-40341101),r=f(r,o,n,i,e[s+14],17,-1502002290),n=m(n,i=f(i,r,o,n,e[s+15],22,1236535329),r,o,e[s+1],5,-165796510),o=m(o,n,i,r,e[s+6],9,-1069501632),r=m(r,o,n,i,e[s+11],14,643717713),i=m(i,r,o,n,e[s+0],20,-373897302),n=m(n,i,r,o,e[s+5],5,-701558691),o=m(o,n,i,r,e[s+10],9,38016083),r=m(r,o,n,i,e[s+15],14,-660478335),i=m(i,r,o,n,e[s+4],20,-405537848),n=m(n,i,r,o,e[s+9],5,568446438),o=m(o,n,i,r,e[s+14],9,-1019803690),r=m(r,o,n,i,e[s+3],14,-187363961),i=m(i,r,o,n,e[s+8],20,1163531501),n=m(n,i,r,o,e[s+13],5,-1444681467),o=m(o,n,i,r,e[s+2],9,-51403784),r=m(r,o,n,i,e[s+7],14,1735328473),n=g(n,i=m(i,r,o,n,e[s+12],20,-1926607734),r,o,e[s+5],4,-378558),o=g(o,n,i,r,e[s+8],11,-2022574463),r=g(r,o,n,i,e[s+11],16,1839030562),i=g(i,r,o,n,e[s+14],23,-35309556),n=g(n,i,r,o,e[s+1],4,-1530992060),o=g(o,n,i,r,e[s+4],11,1272893353),r=g(r,o,n,i,e[s+7],16,-155497632),i=g(i,r,o,n,e[s+10],23,-1094730640),n=g(n,i,r,o,e[s+13],4,681279174),o=g(o,n,i,r,e[s+0],11,-358537222),r=g(r,o,n,i,e[s+3],16,-722521979),i=g(i,r,o,n,e[s+6],23,76029189),n=g(n,i,r,o,e[s+9],4,-640364487),o=g(o,n,i,r,e[s+12],11,-421815835),r=g(r,o,n,i,e[s+15],16,530742520),n=v(n,i=g(i,r,o,n,e[s+2],23,-995338651),r,o,e[s+0],6,-198630844),o=v(o,n,i,r,e[s+7],10,1126891415),r=v(r,o,n,i,e[s+14],15,-1416354905),i=v(i,r,o,n,e[s+5],21,-57434055),n=v(n,i,r,o,e[s+12],6,1700485571),o=v(o,n,i,r,e[s+3],10,-1894986606),r=v(r,o,n,i,e[s+10],15,-1051523),i=v(i,r,o,n,e[s+1],21,-2054922799),n=v(n,i,r,o,e[s+8],6,1873313359),o=v(o,n,i,r,e[s+15],10,-30611744),r=v(r,o,n,i,e[s+6],15,-1560198380),i=v(i,r,o,n,e[s+13],21,1309151649),n=v(n,i,r,o,e[s+4],6,-145523070),o=v(o,n,i,r,e[s+11],10,-1120210379),r=v(r,o,n,i,e[s+2],15,718787259),i=v(i,r,o,n,e[s+9],21,-343485551),n=y(n,a),i=y(i,c),r=y(r,l),o=y(o,d)}return Array(n,i,r,o)}function h(e,t,n,i,r,o){return y((t=y(y(t,e),y(i,o)))<<r|t>>>32-r,n)}function f(e,t,n,i,r,o,s){return h(t&n|~t&i,e,t,r,o,s)}function m(e,t,n,i,r,o,s){return h(t&i|n&~i,e,t,r,o,s)}function g(e,t,n,i,r,o,s){return h(t^n^i,e,t,r,o,s)}function v(e,t,n,i,r,o,s){return h(n^(t|~i),e,t,r,o,s)}function y(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}t.exports=function(e){return u.hash(e,p,16)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(e,t,n){(function(e,n,i,r,o,s,a,c,l){t.exports=function(e){for(var t,n=new Array(e),i=0;i<e;i++)0==(3&i)&&(t=4294967296*Math.random()),n[i]=t>>>((3&i)<<3)&255;return n}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(e,t,n){(function(n,i,r,o,s,a,c,l,d){var u=e("./helpers");function p(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var n,i,r,o=Array(80),s=1732584193,a=-271733879,c=-1732584194,l=271733878,d=-1009589776,u=0;u<e.length;u+=16){for(var p=s,m=a,g=c,v=l,y=d,b=0;b<80;b++){o[b]=b<16?e[u+b]:f(o[b-3]^o[b-8]^o[b-14]^o[b-16],1);var w=h(h(f(s,5),(w=a,i=c,r=l,(n=b)<20?w&i|~w&r:!(n<40)&&n<60?w&i|w&r|i&r:w^i^r)),h(h(d,o[b]),(n=b)<20?1518500249:n<40?1859775393:n<60?-1894007588:-899497514));d=l,l=c,c=f(a,30),a=s,s=w}s=h(s,p),a=h(a,m),c=h(c,g),l=h(l,v),d=h(d,y)}return Array(s,a,c,l,d)}function h(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function f(e,t){return e<<t|e>>>32-t}t.exports=function(e){return u.hash(e,p,20,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(e,t,n){(function(n,i,r,o,s,a,c,l,d){function u(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function p(e,t){var n,i=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),r=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),o=new Array(64);e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var s,a,c=0;c<e.length;c+=16){for(var l=r[0],d=r[1],p=r[2],h=r[3],g=r[4],v=r[5],y=r[6],b=r[7],w=0;w<64;w++)o[w]=w<16?e[w+c]:u(u(u((a=o[w-2],f(a,17)^f(a,19)^m(a,10)),o[w-7]),(a=o[w-15],f(a,7)^f(a,18)^m(a,3))),o[w-16]),n=u(u(u(u(b,f(a=g,6)^f(a,11)^f(a,25)),g&v^~g&y),i[w]),o[w]),s=u(f(s=l,2)^f(s,13)^f(s,22),l&d^l&p^d&p),b=y,y=v,v=g,g=u(h,n),h=p,p=d,d=l,l=u(n,s);r[0]=u(l,r[0]),r[1]=u(d,r[1]),r[2]=u(p,r[2]),r[3]=u(h,r[3]),r[4]=u(g,r[4]),r[5]=u(v,r[5]),r[6]=u(y,r[6]),r[7]=u(b,r[7])}return r}var h=e("./helpers"),f=function(e,t){return e>>>t|e<<32-t},m=function(e,t){return e>>>t};t.exports=function(e){return h.hash(e,p,32,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(e,t,n){(function(e,t,i,r,o,s,a,c,l){n.read=function(e,t,n,i,r){var o,s,a=8*r-i-1,c=(1<<a)-1,l=c>>1,d=-7,u=n?r-1:0,p=n?-1:1;for(r=e[t+u],u+=p,o=r&(1<<-d)-1,r>>=-d,d+=a;0<d;o=256*o+e[t+u],u+=p,d-=8);for(s=o&(1<<-d)-1,o>>=-d,d+=i;0<d;s=256*s+e[t+u],u+=p,d-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(r?-1:1);s+=Math.pow(2,i),o-=l}return(r?-1:1)*s*Math.pow(2,o-i)},n.write=function(e,t,n,i,r,o){var s,a,c=8*o-r-1,l=(1<<c)-1,d=l>>1,u=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,h=i?1:-1;for(o=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(i=Math.pow(2,-s))<1&&(s--,i*=2),2<=(t+=1<=s+d?u/i:u*Math.pow(2,1-d))*i&&(s++,i/=2),l<=s+d?(a=0,s=l):1<=s+d?(a=(t*i-1)*Math.pow(2,r),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));8<=r;e[n+p]=255&a,p+=h,a/=256,r-=8);for(s=s<<r|a,c+=r;0<c;e[n+p]=255&s,p+=h,s/=256,c-=8);e[n+p-h]|=128*o}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(e,t,n){(function(e,n,i,r,o,s,a,c,l){var d,u,p;function h(){}(e=t.exports={}).nextTick=(u="undefined"!=typeof window&&window.setImmediate,p="undefined"!=typeof window&&window.postMessage&&window.addEventListener,u?function(e){return window.setImmediate(e)}:p?(d=[],window.addEventListener("message",(function(e){var t=e.source;t!==window&&null!==t||"process-tick"!==e.data||(e.stopPropagation(),0<d.length&&d.shift()())}),!0),function(e){d.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=h,e.addListener=h,e.once=h,e.off=h,e.removeListener=h,e.removeAllListeners=h,e.emit=h,e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},470:e=>{"use strict";function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,i="",r=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(i.length<2||2!==r||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var c=i.lastIndexOf("/");if(c!==i.length-1){-1===c?(i="",r=0):r=(i=i.slice(0,c)).length-1-i.lastIndexOf("/"),o=a,s=0;continue}}else if(2===i.length||1===i.length){i="",r=0,o=a,s=0;continue}t&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+="/"+e.slice(o+1,a):i=e.slice(o+1,a),r=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return i}var i={resolve:function(){for(var e,i="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s;o>=0?s=arguments[o]:(void 0===e&&(e=process.cwd()),s=e),t(s),0!==s.length&&(i=s+"/"+i,r=47===s.charCodeAt(0))}return i=n(i,!r),r?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(e){if(t(e),0===e.length)return".";var i=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!i)).length||i||(e="."),e.length>0&&r&&(e+="/"),i?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];t(r),r.length>0&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":i.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=i.resolve(e))===(n=i.resolve(n)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var o=e.length,s=o-r,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var c=n.length-a,l=s<c?s:c,d=-1,u=0;u<=l;++u){if(u===l){if(c>l){if(47===n.charCodeAt(a+u))return n.slice(a+u+1);if(0===u)return n.slice(a+u)}else s>l&&(47===e.charCodeAt(r+u)?d=u:0===u&&(d=0));break}var p=e.charCodeAt(r+u);if(p!==n.charCodeAt(a+u))break;47===p&&(d=u)}var h="";for(u=r+d+1;u<=o;++u)u!==o&&47!==e.charCodeAt(u)||(0===h.length?h+="..":h+="/..");return h.length>0?h+n.slice(a+d):(a+=d,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),i=47===n,r=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(n=e.charCodeAt(s))){if(!o){r=s;break}}else o=!1;return-1===r?i?"/":".":i&&1===r?"//":e.slice(0,r)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var i,r=0,o=-1,s=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,c=-1;for(i=e.length-1;i>=0;--i){var l=e.charCodeAt(i);if(47===l){if(!s){r=i+1;break}}else-1===c&&(s=!1,c=i+1),a>=0&&(l===n.charCodeAt(a)?-1==--a&&(o=i):(a=-1,o=c))}return r===o?o=c:-1===o&&(o=e.length),e.slice(r,o)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!s){r=i+1;break}}else-1===o&&(s=!1,o=i+1);return-1===o?"":e.slice(r,o)},extname:function(e){t(e);for(var n=-1,i=0,r=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===r&&(o=!1,r=a+1),46===c?-1===n?n=a:1!==s&&(s=1):-1!==n&&(s=-1);else if(!o){i=a+1;break}}return-1===n||-1===r||0===s||1===s&&n===r-1&&n===i+1?"":e.slice(n,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+i:n+"/"+i:i}(0,e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var i,r=e.charCodeAt(0),o=47===r;o?(n.root="/",i=1):i=0;for(var s=-1,a=0,c=-1,l=!0,d=e.length-1,u=0;d>=i;--d)if(47!==(r=e.charCodeAt(d)))-1===c&&(l=!1,c=d+1),46===r?-1===s?s=d:1!==u&&(u=1):-1!==s&&(u=-1);else if(!l){a=d+1;break}return-1===s||-1===c||0===u||1===u&&s===c-1&&s===a+1?-1!==c&&(n.base=n.name=0===a&&o?e.slice(1,c):e.slice(a,c)):(0===a&&o?(n.name=e.slice(1,s),n.base=e.slice(1,c)):(n.name=e.slice(a,s),n.base=e.slice(a,c)),n.ext=e.slice(s,c)),a>0?n.dir=e.slice(0,a-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,e.exports=i}},i={};function r(e){var n=i[e];if(void 0!==n)return n.exports;var o=i[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";var e;r.r(o),r.d(o,{createConverter:()=>k,getConcatDocumentRoot:()=>_,isNotebookCell:()=>l}),e=(()=>{var e={470:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,i="",r=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(i.length<2||2!==r||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var c=i.lastIndexOf("/");if(c!==i.length-1){-1===c?(i="",r=0):r=(i=i.slice(0,c)).length-1-i.lastIndexOf("/"),o=a,s=0;continue}}else if(2===i.length||1===i.length){i="",r=0,o=a,s=0;continue}t&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+="/"+e.slice(o+1,a):i=e.slice(o+1,a),r=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return i}var i={resolve:function(){for(var e,i="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s;o>=0?s=arguments[o]:(void 0===e&&(e=process.cwd()),s=e),t(s),0!==s.length&&(i=s+"/"+i,r=47===s.charCodeAt(0))}return i=n(i,!r),r?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(e){if(t(e),0===e.length)return".";var i=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!i)).length||i||(e="."),e.length>0&&r&&(e+="/"),i?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];t(r),r.length>0&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":i.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=i.resolve(e))===(n=i.resolve(n)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var o=e.length,s=o-r,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var c=n.length-a,l=s<c?s:c,d=-1,u=0;u<=l;++u){if(u===l){if(c>l){if(47===n.charCodeAt(a+u))return n.slice(a+u+1);if(0===u)return n.slice(a+u)}else s>l&&(47===e.charCodeAt(r+u)?d=u:0===u&&(d=0));break}var p=e.charCodeAt(r+u);if(p!==n.charCodeAt(a+u))break;47===p&&(d=u)}var h="";for(u=r+d+1;u<=o;++u)u!==o&&47!==e.charCodeAt(u)||(0===h.length?h+="..":h+="/..");return h.length>0?h+n.slice(a+d):(a+=d,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),i=47===n,r=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(n=e.charCodeAt(s))){if(!o){r=s;break}}else o=!1;return-1===r?i?"/":".":i&&1===r?"//":e.slice(0,r)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var i,r=0,o=-1,s=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,c=-1;for(i=e.length-1;i>=0;--i){var l=e.charCodeAt(i);if(47===l){if(!s){r=i+1;break}}else-1===c&&(s=!1,c=i+1),a>=0&&(l===n.charCodeAt(a)?-1==--a&&(o=i):(a=-1,o=c))}return r===o?o=c:-1===o&&(o=e.length),e.slice(r,o)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!s){r=i+1;break}}else-1===o&&(s=!1,o=i+1);return-1===o?"":e.slice(r,o)},extname:function(e){t(e);for(var n=-1,i=0,r=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===r&&(o=!1,r=a+1),46===c?-1===n?n=a:1!==s&&(s=1):-1!==n&&(s=-1);else if(!o){i=a+1;break}}return-1===n||-1===r||0===s||1===s&&n===r-1&&n===i+1?"":e.slice(n,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+i:n+"/"+i:i}(0,e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var i,r=e.charCodeAt(0),o=47===r;o?(n.root="/",i=1):i=0;for(var s=-1,a=0,c=-1,l=!0,d=e.length-1,u=0;d>=i;--d)if(47!==(r=e.charCodeAt(d)))-1===c&&(l=!1,c=d+1),46===r?-1===s?s=d:1!==u&&(u=1):-1!==s&&(u=-1);else if(!l){a=d+1;break}return-1===s||-1===c||0===u||1===u&&s===c-1&&s===a+1?-1!==c&&(n.base=n.name=0===a&&o?e.slice(1,c):e.slice(a,c)):(0===a&&o?(n.name=e.slice(1,s),n.base=e.slice(1,c)):(n.name=e.slice(a,s),n.base=e.slice(a,c)),n.ext=e.slice(s,c)),a>0?n.dir=e.slice(0,a-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,e.exports=i},447:(e,t,n)=>{var i;if(n.r(t),n.d(t,{URI:()=>m,Utils:()=>x}),"object"==typeof process)i="win32"===process.platform;else if("object"==typeof navigator){var r=navigator.userAgent;i=r.indexOf("Windows")>=0}var o,s,a=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=/^\w[\w\d+.-]*$/,l=/^\//,d=/^\/\//;function u(e,t){if(!e.scheme&&t)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(e.authority,'", path: "').concat(e.path,'", query: "').concat(e.query,'", fragment: "').concat(e.fragment,'"}'));if(e.scheme&&!c.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!l.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(d.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}var p="",h="/",f=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,m=function(){function e(e,t,n,i,r,o){void 0===o&&(o=!1),"object"==typeof e?(this.scheme=e.scheme||p,this.authority=e.authority||p,this.path=e.path||p,this.query=e.query||p,this.fragment=e.fragment||p):(this.scheme=function(e,t){return e||t?e:"file"}(e,o),this.authority=t||p,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==h&&(t=h+t):t=h}return t}(this.scheme,n||p),this.query=i||p,this.fragment=r||p,u(this,o))}return e.isUri=function(t){return t instanceof e||!!t&&"string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme&&"string"==typeof t.fsPath&&"function"==typeof t.with&&"function"==typeof t.toString},Object.defineProperty(e.prototype,"fsPath",{get:function(){return _(this,!1)},enumerable:!1,configurable:!0}),e.prototype.with=function(e){if(!e)return this;var t=e.scheme,n=e.authority,i=e.path,r=e.query,o=e.fragment;return void 0===t?t=this.scheme:null===t&&(t=p),void 0===n?n=this.authority:null===n&&(n=p),void 0===i?i=this.path:null===i&&(i=p),void 0===r?r=this.query:null===r&&(r=p),void 0===o?o=this.fragment:null===o&&(o=p),t===this.scheme&&n===this.authority&&i===this.path&&r===this.query&&o===this.fragment?this:new v(t,n,i,r,o)},e.parse=function(e,t){void 0===t&&(t=!1);var n=f.exec(e);return n?new v(n[2]||p,E(n[4]||p),E(n[5]||p),E(n[7]||p),E(n[9]||p),t):new v(p,p,p,p,p)},e.file=function(e){var t=p;if(i&&(e=e.replace(/\\/g,h)),e[0]===h&&e[1]===h){var n=e.indexOf(h,2);-1===n?(t=e.substring(2),e=h):(t=e.substring(2,n),e=e.substring(n)||h)}return new v("file",t,e,p,p)},e.from=function(e){var t=new v(e.scheme,e.authority,e.path,e.query,e.fragment);return u(t,!0),t},e.prototype.toString=function(e){return void 0===e&&(e=!1),S(this,e)},e.prototype.toJSON=function(){return this},e.revive=function(t){if(t){if(t instanceof e)return t;var n=new v(t);return n._formatted=t.external,n._fsPath=t._sep===g?t.fsPath:null,n}return t},e}(),g=i?1:void 0,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._formatted=null,t._fsPath=null,t}return a(t,e),Object.defineProperty(t.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=_(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(e){return void 0===e&&(e=!1),e?S(this,!0):(this._formatted||(this._formatted=S(this,!1)),this._formatted)},t.prototype.toJSON=function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=g),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},t}(m),y=((s={})[58]="%3A",s[47]="%2F",s[63]="%3F",s[35]="%23",s[91]="%5B",s[93]="%5D",s[64]="%40",s[33]="%21",s[36]="%24",s[38]="%26",s[39]="%27",s[40]="%28",s[41]="%29",s[42]="%2A",s[43]="%2B",s[44]="%2C",s[59]="%3B",s[61]="%3D",s[32]="%20",s);function b(e,t){for(var n=void 0,i=-1,r=0;r<e.length;r++){var o=e.charCodeAt(r);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||45===o||46===o||95===o||126===o||t&&47===o)-1!==i&&(n+=encodeURIComponent(e.substring(i,r)),i=-1),void 0!==n&&(n+=e.charAt(r));else{void 0===n&&(n=e.substr(0,r));var s=y[o];void 0!==s?(-1!==i&&(n+=encodeURIComponent(e.substring(i,r)),i=-1),n+=s):-1===i&&(i=r)}}return-1!==i&&(n+=encodeURIComponent(e.substring(i))),void 0!==n?n:e}function w(e){for(var t=void 0,n=0;n<e.length;n++){var i=e.charCodeAt(n);35===i||63===i?(void 0===t&&(t=e.substr(0,n)),t+=y[i]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function _(e,t){var n;return n=e.authority&&e.path.length>1&&"file"===e.scheme?"//".concat(e.authority).concat(e.path):47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,i&&(n=n.replace(/\//g,"\\")),n}function S(e,t){var n=t?w:b,i="",r=e.scheme,o=e.authority,s=e.path,a=e.query,c=e.fragment;if(r&&(i+=r,i+=":"),(o||"file"===r)&&(i+=h,i+=h),o){var l=o.indexOf("@");if(-1!==l){var d=o.substr(0,l);o=o.substr(l+1),-1===(l=d.indexOf(":"))?i+=n(d,!1):(i+=n(d.substr(0,l),!1),i+=":",i+=n(d.substr(l+1),!1)),i+="@"}-1===(l=(o=o.toLowerCase()).indexOf(":"))?i+=n(o,!1):(i+=n(o.substr(0,l),!1),i+=o.substr(l))}if(s){if(s.length>=3&&47===s.charCodeAt(0)&&58===s.charCodeAt(2))(u=s.charCodeAt(1))>=65&&u<=90&&(s="/".concat(String.fromCharCode(u+32),":").concat(s.substr(3)));else if(s.length>=2&&58===s.charCodeAt(1)){var u;(u=s.charCodeAt(0))>=65&&u<=90&&(s="".concat(String.fromCharCode(u+32),":").concat(s.substr(2)))}i+=n(s,!0)}return a&&(i+="?",i+=n(a,!1)),c&&(i+="#",i+=t?c:b(c,!1)),i}function C(e){try{return decodeURIComponent(e)}catch(t){return e.length>3?e.substr(0,3)+C(e.substr(3)):e}}var k=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function E(e){return e.match(k)?e.replace(k,(function(e){return C(e)})):e}var x,T=n(470),P=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},I=T.posix||T;!function(e){e.joinPath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.with({path:I.join.apply(I,P([e.path],t,!1))})},e.resolvePath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=e.path||"/";return e.with({path:I.resolve.apply(I,P([i],t,!1))})},e.dirname=function(e){var t=I.dirname(e.path);return 1===t.length&&46===t.charCodeAt(0)?e:e.with({path:t})},e.basename=function(e){return I.basename(e.path)},e.extname=function(e){return I.extname(e.path)}}(x||(x={}))}},t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}return n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(447)})();const{URI:t,Utils:i}=e,s=n(638),a="vscode-interactive-input",c="vscode-interactive";function l(e){return e.scheme.includes("vscode-notebook-cell")||e.scheme.includes(a)}function d(e){let t=e.split(/\r?\n/g);return t.slice(0,t.length-1)}var u=r(470),p=r(705);const h=function(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const n of"`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?")e.indexOf(n)>=0||(t+=`\\${n}`);return t+="\\s]+)",new RegExp(t,"g")}(),f=/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g;function m(e,t){return{start:e,end:t}}function g(e,t){return{line:e,character:t}}function v(e,t){return{uri:e,range:t}}class y{constructor(e,t,n,i){this.cellUri=e,this._contents=t,this._line=n,this._offset=i,this._range=m(g(n,0),g(n,t.length)),this._rangeWithLineBreak=m(this.range.start,g(n,t.length+1))}get offset(){return this._offset}get endOffset(){return this._offset+this._contents.length+1}get lineNumber(){return this._line}get text(){return this._contents}get range(){return this._range}get rangeIncludingLineBreak(){return this._rangeWithLineBreak}get firstNonWhitespaceCharacterIndex(){return void 0===this._firstNonWhitespaceIndex&&(this._firstNonWhitespaceIndex=this._contents.trimLeft().length-this._contents.length),this._firstNonWhitespaceIndex}get isEmptyOrWhitespace(){return void 0===this._isEmpty&&(this._isEmpty=0===this._contents.length||0===this._contents.trim().length),this._isEmpty}}const b="import IPython\nIPython.get_ipython()\n",w=[{regex:/(^\s*%.*)/},{regex:/(^\s*!.*)/},{regex:/(^\s*await\s+.*)/}];function _(e){return u.dirname(e.fsPath)}class S{constructor(e,t,n=!1){this.key=e,this.getNotebookHeader=t,this._disableTypeIgnore=n,this._interactiveWindow=!1,this._version=1,this._closed=!0,this._spans=[],this._lines=[],this._realLines=[]}get uri(){return this.concatUri}get fileName(){return this.uri.fsPath}get isUntitled(){return!0}get languageId(){return"python"}get version(){return this._version}get isDirty(){return!0}get isClosed(){return this._closed}get isOpen(){return!this.isClosed}get eol(){return 1}get notebook(){}get lineCount(){return this._lines.length}get concatUri(){return this._concatUri||t.parse("")}get notebookUri(){return this._notebookUri||t.parse("")}handleChange(e){this._version++;const t=[],n=this._spans.findIndex((t=>t.uri.toString()===e.textDocument.uri));if(n>=0)return e.contentChanges.forEach((i=>{try{const r=this._spans.filter((t=>t.uri.toString()===e.textDocument.uri)),o=this._lines.filter((t=>t.cellUri.toString()===e.textDocument.uri)),s=i.text.replace(/\r/g,""),a="range"in i?i.range:m(g(0,0),g(0,0)),c=this.getRealText(r[0].uri),l=this._realLines.filter((t=>t.cellUri.toString()===e.textDocument.uri)),d=l[0].offset,u=l[a.start.line].offset+a.start.character-d,p=l[a.end.line].offset+a.end.character-d,h=`${c.slice(0,u)}${s}${c.slice(p)}`,f=this.createSpans(r[0].uri,h,r[0].startOffset,r[0].realOffset),v=f.map((e=>e.text)).join(""),y=r.find((e=>!e.inRealCell&&!e.text.endsWith("\n"))),b=f.find((e=>!e.inRealCell&&!e.text.endsWith("\n")));if(y||b||f.length!=r.length){const e=o[0].range.start,n={line:o.length+o[0].range.start.line,character:0};t.push({text:v,range:this.createSerializableRange(e,n),rangeLength:o[o.length-1].endOffset+1-o[0].offset})}else{const e=this.mapRealToConcatOffset(u+d),n=this.mapRealToConcatOffset(p+d),i=o.find((t=>e>=t.offset&&e<t.endOffset)),r=o.find((e=>n>=e.offset&&n<e.endOffset)),c=g((null==i?void 0:i.lineNumber)||a.start.line,a.start.character),l=g((null==r?void 0:r.lineNumber)||a.end.line,a.end.character);t.push({text:s,range:this.createSerializableRange(c,l),rangeLength:n-e})}const w=f[f.length-1].endOffset-r[r.length-1].endOffset,_=f[f.length-1].realEndOffset-r[r.length-1].realEndOffset;this._spans.splice(n,r.length,...f);for(let e=n+f.length;e<this._spans.length;e++)this._spans[e].startOffset+=w,this._spans[e].endOffset+=w,this._spans[e].realOffset+=_,this._spans[e].realEndOffset+=_;this.computeLines()}catch(e){console.log(`Concat document failure : ${e}`)}})),this.toDidChangeTextDocumentParams(t)}handleOpen(e,n){const i=t.parse(e.textDocument.uri);if(this._spans.find((t=>{var n;return(null===(n=t.uri)||void 0===n?void 0:n.toString())==e.textDocument.uri})))return;this._version=Math.max(e.textDocument.version,this._version+1),this._closed=!1,this.initialize(i);const r=`${e.textDocument.text.replace(/\r/g,"")}\n`,o=i.scheme===a?"":i.fragment,s=n?this._spans.length:this.computeInsertionIndex(o),c=s<this._spans.length&&s>=0?this._spans[s].startOffset:this.getEndOffset(),l=s<this._spans.length&&s>=0?this._spans[s].realOffset:this.getRealEndOffset(),d=s<this._spans.length&&s>=0?this._lines.find((e=>e.offset==c)).range.start:g(this._lines.length,0),u=this.createSpans(i,r,c,l),p=u[u.length-1].endOffset-c,h=u[u.length-1].realEndOffset-l;for(let e=s;e<=this._spans.length-1;e+=1)this._spans[e].startOffset+=p,this._spans[e].endOffset+=p,this._spans[e].realOffset+=h,this._spans[e].realEndOffset+=h;this._spans.splice(s,0,...u),this.computeLines();const f=[{range:this.createSerializableRange(d,d),rangeOffset:c,rangeLength:0,text:u.map((e=>e.text)).join("")}];return this.toDidChangeTextDocumentParams(f)}handleClose(e){const n=this._spans.findIndex((t=>t.uri.toString()===e.textDocument.uri)),i=function(t,n){for(let n=t.length-1;n>=0;n--)if(t[n].uri.toString()===e.textDocument.uri)return n;return-1}(this._spans);if(this.initialize(t.parse(e.textDocument.uri)),n>=0&&i>=0&&!this._interactiveWindow){this._version+=1;const t=this._spans[n].startOffset,r=this._spans[i].endOffset,o=this._lines.find((e=>e.offset==t)).range.start,s=this._lines.find((e=>e.endOffset==r)).range.end,a=r-t;this._spans=this._spans.filter((t=>t.uri.toString()!==e.textDocument.uri));for(let e=n;e<this._spans.length;e++)this._spans[e].startOffset-=a,this._spans[e].endOffset-=a;this.computeLines();const c=[{range:this.createSerializableRange(o,s),rangeOffset:t,rangeLength:a,text:""}];return 0==this._spans.length&&(this._closed=!0),this.toDidChangeTextDocumentParams(c)}e.textDocument.uri.includes(a)&&(this._closed=!0,this._spans=[],this._lines=[],this._realLines=[])}handleRefresh(e){if(!this._interactiveWindow){const t=g(0,0),n=this._lines.length>0?this._lines[this._lines.length-1].rangeIncludingLineBreak.end:t,i=this.getEndOffset(),r=this.getRealText();if(`${e.cells.map((e=>e.textDocument.text.replace(/\r/g,""))).join("\n")}\n`!=r){this._version++,this._closed=!1,this._spans=[],this._lines=[],this._realLines=[],this._concatUri=void 0,e.cells.forEach((e=>{this.handleOpen({textDocument:e.textDocument},!0)}));const r=[{range:this.createSerializableRange(t,n),rangeOffset:0,rangeLength:i,text:this.getContents()}];return this.toDidChangeTextDocumentParams(r)}}}dispose(){}contains(e){return void 0!==this._spans.find((t=>t.uri.toString()===e.toString()))}save(){return Promise.resolve(!1)}lineAt(e){return"number"==typeof e?this._lines[e]:this._lines[e.line]}offsetAt(e){throw new Error("offsetAt should not be used on concat document. Use a more specific offset computation")}positionAt(e){throw new Error("positionAt should not be used on concat document. Use a more specific position computation")}getText(e){const t=this.getContents();if(e){const n=this._lines[e.start.line].offset+e.start.character,i=this._lines[e.end.line].offset+e.end.character;return t.substring(n,i-n)}return t}concatPositionAt(e){const t=this._realLines.find((t=>t.cellUri.toString()===e.uri.toString()));if(t){const n=this._realLines[e.range.start.line+t.lineNumber],i=this.mapRealToConcatOffset(n.offset+e.range.start.character),r=this._lines.find((e=>i>=e.offset&&i<e.endOffset));if(r)return g(r.lineNumber,i-r.offset)}return g(0,0)}concatOffsetAt(e){const t=this._realLines.find((t=>t.cellUri.toString()===e.uri.toString()));if(t){const n=this._realLines[e.range.start.line+t.lineNumber];return this.mapRealToConcatOffset(n.offset+e.range.start.character)}return 0}concatRangeOf(e){const t=this._lines.filter((t=>t.cellUri.toString()===e.toString())),n=t[0],i=t[t.length-1];return n&&i?m(n.range.start,i.rangeIncludingLineBreak.end):m(g(0,0),g(0,0))}realRangeOf(e){const t=this._spans.filter((t=>t.uri.toString()==e.toString()&&t.inRealCell)),n=t[0].startOffset||0,i=t.length>0?t[t.length-1].endOffset:n,r=this._lines.find((e=>n>=e.offset&&n<e.endOffset)),o=this._lines.find((e=>i>=e.offset&&i<=e.endOffset));return r&&o?m(r.range.start,o.rangeIncludingLineBreak.end):m(g(0,0),g(0,0))}getCells(){return[...new Set(this._spans.map((e=>e.uri)))]}notebookLocationAt(e){const t="line"in e?m(e,e):e;let n=this._lines[t.start.line],i=this._lines[t.end.line];if(n&&i){let e=n.offset+t.start.character,r=i.offset+t.end.character;const o=this._spans.filter((t=>t.inRealCell&&(e>=t.startOffset&&e<t.endOffset||r>=t.startOffset&&r<=t.endOffset)));if(e=o.length>0?Math.max(e,o[0].startOffset):-1,n=this._lines.find((t=>e>=t.offset&&e<t.endOffset)),n)return{uri:n.cellUri.toString(),range:m(this.notebookPositionAt(g(n.lineNumber,e-n.offset)),this.notebookPositionAt(t.end))}}return{uri:"",range:t}}notebookPositionAt(e){const t=this._lines[e.line].offset,n=this.mapConcatToClosestRealOffset(t),i=this._realLines.find((e=>n>=e.offset&&n<e.endOffset)),r=this._realLines.find((e=>e.cellUri.toString()===(null==i?void 0:i.cellUri.toString())));return g(r&&i?i.lineNumber-r.lineNumber:0,this.mapConcatToClosestRealOffset(t+e.character)-((null==i?void 0:i.offset)||0))}notebookOffsetAt(e,t){const n=this.mapConcatToClosestRealOffset(t),i=this._spans.find((t=>t.uri.toString()===e.toString()));return i?n-i.realOffset:n}getWordRangeAtPosition(e,t){t?function(e){return"^"!==e.source&&"^$"!==e.source&&"$"!==e.source&&"^\\s*$"!==e.source&&!(!e.exec("")||0!==e.lastIndex)}(t)&&(console.warn(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`),t=f):t=f;const n=function(e,t,n,i){t.lastIndex=0;const r=t.exec(n);if(!r)return null;const o=r[0].indexOf(" ")>=0?function(e,t,n,i){const r=e-1-0;t.lastIndex=0;let o=t.exec(n);for(;o;){const e=o.index||0;if(e>r)return null;if(t.lastIndex>=r)return{word:o[0],startColumn:1+e,endColumn:1+t.lastIndex};o=t.exec(n)}return null}(e,t,n):function(e,t,n,i){const r=e-1-0,o=n.lastIndexOf(" ",r-1)+1;t.lastIndex=o;let s=t.exec(n);for(;s;){const e=s.index||0;if(e<=r&&t.lastIndex>=r)return{word:s[0],startColumn:1+e,endColumn:1+t.lastIndex};s=t.exec(n)}return null}(e,t,n);return t.lastIndex=0,o}(e.character+1,function(e){let t=h;if(e&&e instanceof RegExp)if(e.global)t=e;else{let n="g";e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.unicode&&(n+="u"),t=new RegExp(e.source,n)}return t.lastIndex=0,t}(t),this._lines[e.line].text);if(n)return m(g(e.line,n.startColumn-1),g(e.line,n.endColumn-1))}validateRange(e){return e}validatePosition(e){return e}get textDocumentItem(){return{uri:this.concatUri.toString(),languageId:this.languageId,version:this.version,text:this.getText()}}get textDocumentId(){return{uri:this.concatUri.toString(),version:this.version}}getContents(){return this._spans.map((e=>e.text)).join("")}toDidChangeTextDocumentParams(e){return{textDocument:{version:this.version,uri:this.concatUri.toString()},contentChanges:e}}mapRealToConcatOffset(e){const t=this._spans.find((t=>t.inRealCell&&e>=t.realOffset&&e<t.realEndOffset));return t?e-t.realOffset+t.startOffset:e}mapConcatToClosestRealOffset(e){const t=this._spans.find((t=>e>=t.startOffset&&e<t.endOffset));if(t){const n=e-t.startOffset;return t.inRealCell?n+t.realOffset:t.realOffset}return e}createSpan(e,t,n,i,r){return{fragment:e.scheme===a?"":e.fragment,uri:e,inRealCell:!0,startOffset:i,endOffset:i+t.length,realOffset:r,realEndOffset:r+n.length,text:t,realText:n}}createTypeIgnoreSpan(e,t,n){return{fragment:e.scheme===a?"":e.fragment,uri:e,inRealCell:!1,startOffset:t,endOffset:t+15,realOffset:n,realEndOffset:n,text:" # type: ignore",realText:""}}createHeaderSpans(e){let t=this.getNotebookHeader(e);return t.length?(t.endsWith("\n")||(t=`${t}\n`),[{fragment:"",uri:e,inRealCell:!1,startOffset:0,endOffset:37+t.length,realOffset:0,realEndOffset:0,text:`${b}${t}`,realText:""}]):[{fragment:"",uri:e,inRealCell:!1,startOffset:0,endOffset:37,realOffset:0,realEndOffset:0,text:b,realText:""}]}createSpans(e,t,n,i){const r=d(t);let o=[];0!=n||e.scheme.includes(a)||(o=this.createHeaderSpans(e),n=o[o.length-1].endOffset);let s=i,c=0,l=0;return r.forEach((i=>{!this._disableTypeIgnore&&w.find((e=>e.regex.test(i)))?(o.push(this.createSpan(e,t.substring(c,l+i.length),t.substring(c,l+i.length),n,c+s)),n=o[o.length-1].endOffset,l+=i.length,c=l,o.push(this.createTypeIgnoreSpan(e,n,c+s)),n=o[o.length-1].endOffset,l+=1):l+=i.length+1})),c<t.length&&o.push(this.createSpan(e,t.substring(c),t.substring(c),n,s+c)),o}getRealText(e){return e?this._spans.filter((t=>t.inRealCell&&t.uri.toString()===e.toString())).map((e=>e.realText)).join(""):this._spans.filter((e=>e.inRealCell)).map((e=>e.realText)).join("")}createTextLines(e,t,n){return d(t).map((t=>{const i=this.createTextLine(e,t,n);return n=i,i}))}computeLinesUsingFunc(e,t){const n=[];let i;return e.forEach((e=>{const r=this._spans.filter((t=>t.uri.toString()==e.toString())).map(t).join("");n.push(...this.createTextLines(e,r,i)),i=n[n.length-1]})),n}computeLines(){const e=this.getCells();this._lines=this.computeLinesUsingFunc(e,(e=>e.text)),this._realLines=this.computeLinesUsingFunc(e,(e=>e.realText))}createTextLine(e,t,n){return new y(e,t,n?n.lineNumber+1:0,n?n.offset+n.rangeIncludingLineBreak.end.character:0)}getEndOffset(){return this._spans.length>0?this._spans[this._spans.length-1].endOffset:0}getRealEndOffset(){return this._spans.length>0?this._spans[this._spans.length-1].realEndOffset:0}createSerializableRange(e,t){return{start:{line:e.line,character:e.character},end:{line:t.line,character:t.character}}}computeInsertionIndex(e){var t,n;const i=(null===(n=null===(t=this._spans[this._spans.length-1])||void 0===t?void 0:t.uri)||void 0===n?void 0:n.scheme)===a?this._spans.length-1:this._spans.length,r=""===e?this._spans.length:this._spans.findIndex((t=>t.fragment>e));return r<0?i:r}initialize(e){var n;if(!(null===(n=this._concatUri)||void 0===n?void 0:n.fsPath)){this._interactiveWindow=function(e){return e.fragment.includes(c)||e.scheme.includes(a)||e.scheme.includes(c)}(e);const n=_(e),i=u.join(n,`_NotebookConcat_${p.sha1(e.fsPath).substring(0,12)}.py`);this._concatUri=t.file(i),this._notebookUri=this._interactiveWindow?e.with({scheme:c,path:e.fsPath,fragment:""}):e.fragment.includes("untitled")?e.with({scheme:"untitled",path:e.fsPath,fragment:"",query:""}):t.file(e.fsPath)}}}class C{constructor(e,t,n=!1){this.getNotebookHeader=e,this.platformGetter=t,this.disableTypeIgnore=n,this.activeConcats=new Map,this.activeConcatsOutgoingMap=new Map,this.disposables=[],this.mapOfConcatDocumentsWithCellUris=new Map}getDocumentKey(e){if(e.scheme===a){const t=/InteractiveInput-(\d+)/.exec(e.path);if(t&&t[1])return`interactive-${t[1]}.interactive`}return e.scheme===c?e.path.toLowerCase():"win32"===this.platformGetter()?e.fsPath.toLowerCase():e.fsPath}dispose(){this.disposables.forEach((e=>e.dispose()))}hasCell(e){return this.getConcatDocument(e).contains(e.uri)}isOpen(e){const t=this.toURI(e),n=this.getDocumentKey(t),i=this.activeConcats.get(n);return!!i&&i.isOpen}handleOpen(e){const t=this.getConcatDocument(e.textDocument),n=null==t?void 0:t.handleOpen(e);return this.activeConcatsOutgoingMap.set(this.getDocumentKey(t.concatUri),t),n}handleRefresh(e){const t=e.cells.length?this.getConcatDocument(e.cells[0].textDocument):void 0;return null==t?void 0:t.handleRefresh(e)}handleClose(e){return this.getConcatDocument(e.textDocument.uri).handleClose(e)}handleChange(e){return this.getConcatDocument(e.textDocument.uri).handleChange(e)}toNotebookDiagnosticsMap(e,n){const i=this.getConcatDocumentForUri(e),r=new Map;if(i){const o=[],s=this.mapOfConcatDocumentsWithCellUris.get(e.toString())||[];i.getCells().forEach((e=>{r.set(e.toString(),[]),o.push(e.toString())}));const a=new Set(o);s.filter((e=>!a.has(e))).forEach((e=>r.set(e,[]))),this.mapOfConcatDocumentsWithCellUris.set(e.toString(),o),n.forEach((e=>{const n=i.notebookLocationAt(e.range);if(t.parse(n.uri).fragment){let t=r.get(n.uri);t||(t=[],r.set(n.uri,t)),t.push(this.toNotebookDiagnostic(n.uri,e))}}))}else this.mapOfConcatDocumentsWithCellUris.has(e.toString())?((this.mapOfConcatDocumentsWithCellUris.get(e.toString())||[]).forEach((e=>r.set(e,[]))),this.mapOfConcatDocumentsWithCellUris.delete(e.toString())):r.set(this.toURI(e).toString(),n);return r}toNotebookWorkspaceSymbols(e){return Array.isArray(e)?e.map(this.toNotebookWorkspaceSymbol.bind(this)):null!=e?e:void 0}toNotebookWorkspaceEdit(e){if(e){const t=new Map;(e.changes?Object.keys(e.changes):[]).forEach((n=>{e.changes[n].forEach((e=>{const i=this.toNotebookLocationFromRange(n,e.range);let r=t.get(i.uri);r||(r=[],t.set(i.uri,r)),r.push({...e,range:i.range})}))}));const n={changes:{}};return t.forEach(((e,t)=>n.changes[t]=e)),n}return null!=e?e:void 0}toConcatDocument(e){const t=this.getConcatDocument(e);return{text:t.getText(),uri:t.uri.toString(),languageId:t.languageId,version:t.version}}toConcatTextDocument(e){return this.getConcatDocument(e)}toConcatUri(e){return this.getConcatDocument(e).concatUri.toString()}toConcatPosition(e,t){return this.getConcatDocument(e).concatPositionAt(v(e.uri,m(t,t)))}toConcatPositions(e,t){return t.map((t=>this.toConcatPosition(e,t)))}toConcatRange(e,t){const n=this.getConcatDocument(e),i=this.toURI(e);return n.concatRangeOf(i)||t||m(g(0,0),g(0,0))}toRealRange(e,t){const n=this.getConcatDocument(e),i=this.toURI(e);return n.realRangeOf(i)||t||m(g(0,0),g(0,0))}toConcatContext(e,t){return{...t,diagnostics:t.diagnostics.map(this.toConcatDiagnostic.bind(this,e))}}toNotebookHover(e,t){return t&&t.range?{...t,range:this.toNotebookRange(e,t.range)}:null!=t?t:void 0}toNotebookCompletions(e,t){return t?Array.isArray(t)?t.map(this.toNotebookCompletion.bind(this,e)):{...t,items:t.items.map(this.toNotebookCompletion.bind(this,e))}:t}toNotebookLocations(e){return Array.isArray(e)?e.map(this.toNotebookLocationOrLink.bind(this)):(null==e?void 0:e.range)?this.toNotebookRange(e.uri,e.range):e}toNotebookHighlight(e,t){if(!t)return;const n=this.getConcatDocument(e),i=[];for(let r of t){const t=n.notebookLocationAt(r.range);t.uri.toString()===e.uri.toString()&&i.push({...r,range:t.range})}return i}toNotebookSymbols(e,t){return t&&Array.isArray(t)&&t.length?"kind"in t[0]?t.map(this.toNotebookSymbolFromSymbolInformation.bind(this,e.uri)):t.map(this.toNotebookSymbolFromDocumentSymbol.bind(this,e)):null!=t?t:void 0}toNotebookSymbolFromSymbolInformation(e,t){return{...t,location:"range"in t.location?this.toNotebookLocationFromRange(e,t.location.range):{uri:this.toNotebookUri(t.location.uri)}}}toNotebookDiagnostic(e,t){return{...t,range:this.toNotebookRange(e,t.range),relatedInformation:t.relatedInformation?t.relatedInformation.map(this.toNotebookRelatedInformation.bind(this,e)):void 0}}toNotebookActions(e,t){if(!Array.isArray(t))return null!=t?t:void 0}toNotebookCodeLenses(e,t){return Array.isArray(t)?t.map((t=>({...t,range:this.toNotebookRange(e,t.range)}))):null!=t?t:void 0}toNotebookEdits(e,t){return Array.isArray(t)?t.map((t=>({...t,range:this.toNotebookRange(e,t.range)}))):null!=t?t:void 0}toNotebookRename(e,t){return t?"range"in t?{...t,range:this.toNotebookRange(e,t.range)}:this.toNotebookRange(e,t):null!=t?t:void 0}toNotebookDocumentLinks(e,t){return t&&Array.isArray(t)?t.map((t=>{const n=t.target?t.target:e.uri,i=this.toNotebookLocationFromRange(n,t.range);return{...t,range:i.range,target:t.target?i.uri:void 0}})):null!=t?t:void 0}toNotebookRange(e,t){const n=this.getConcatDocumentForUri(e);if(n){const e=n.notebookLocationAt(t.start),i=n.notebookLocationAt(t.end);return m(e.range.start,i.range.end)}return t}toNotebookPosition(e,t){return this.toNotebookRange(e,m(t,t)).start}toNotebookOffset(e,t){const n=this.toURI(e);return this.getConcatDocument(e).notebookOffsetAt(n,t)}toNotebookUri(e,t){const n=this.getConcatDocumentForUri(e);let i;return n&&(i=t?n.notebookLocationAt(t).uri:n.notebookUri.toString()),i||e}toNotebookColorInformations(e,n){if(Array.isArray(n)){const i=this.toURI(e);return n.map((t=>({color:t.color,location:this.toNotebookLocationFromRange(e,t.range)}))).filter((e=>t.parse(e.location.uri).fragment==i.fragment)).map((e=>({color:e.color,range:e.location.range})))}}toNotebookColorPresentations(e,t){if(Array.isArray(t))return t.map((t=>({...t,additionalTextEdits:t.additionalTextEdits?this.toNotebookTextEdits(e,t.additionalTextEdits):void 0,textEdit:t.textEdit?this.toNotebookTextEdit(e,t.textEdit):void 0})))}toNotebookTextEdits(e,t){if(Array.isArray(t))return t.map((t=>this.toNotebookTextEdit(e,t)))}toNotebookTextEdit(e,t){return{...t,range:this.toNotebookRange(e,t.range)}}toNotebookFoldingRanges(e,t){if(Array.isArray(t)){const n=this.toURI(e);return t.map((t=>this.toNotebookLocationFromRange(e,m(g(t.startLine,0),g(t.endLine,0))))).filter((e=>e.uri==n.toString())).map((e=>({startLine:e.range.start.line,endLine:e.range.end.line})))}}toNotebookSelectionRanges(e,t){if(Array.isArray(t))return t.map((t=>this.toNotebookSelectionRange(e,t)))}toNotebookSelectionRange(e,t){return{parent:t.parent?this.toNotebookSelectionRange(e,t.parent):void 0,range:this.toNotebookRange(e,t.range)}}toNotebookCallHierarchyItems(e,t){return Array.isArray(t)?t.map((t=>this.toNotebookCallHierarchyItem(e,t))):t?[this.toNotebookCallHierarchyItem(e,t)]:null}toNotebookCallHierarchyItem(e,t){return{...t,uri:this.toURI(e).toString(),range:this.toNotebookRange(e,t.range),selectionRange:this.toNotebookRange(e,t.selectionRange)}}toNotebookCallHierarchyIncomingCallItems(e,t){return Array.isArray(t)?t.map((t=>this.toNotebookCallHierarchyIncomingCallItem(e,t))):null}toNotebookCallHierarchyIncomingCallItem(e,t){return{from:this.toNotebookCallHierarchyItem(e,t.from),fromRanges:t.fromRanges.map((t=>this.toNotebookRange(e,t)))}}toNotebookCallHierarchyOutgoingCallItems(e,t){return Array.isArray(t)?t.map((t=>this.toNotebookCallHierarchyOutgoingCallItem(e,t))):null}toNotebookCallHierarchyOutgoingCallItem(e,t){return{to:this.toNotebookCallHierarchyItem(e,t.to),fromRanges:t.fromRanges.map((t=>this.toNotebookRange(e,t)))}}toNotebookSemanticEdit(e,t){return{...t,start:this.toNotebookOffset(e,t.start)}}toNotebookSemanticTokens(e,t){if(t){const n=this.getConcatDocument(e),i=this.toURI(e);if(n&&t.data.length>0){const e=n.concatPositionAt(v(i.toString(),m(g(0,0),g(0,0))));return t.data[0]=t.data[0]-e.line,t}}}toNotebookLinkedEditingRanges(e,t){if(t)return{...t,ranges:t.ranges.map((t=>this.toNotebookRange(e,t)))}}remove(e){const t=this.toURI(e),n=this.getDocumentKey(t),i=this.activeConcats.get(n);i&&this.deleteConcatDocument(i)}toURI(e){return t.isUri(e)?e:"string"==typeof e?t.parse(e):t.parse(e.uri)}toNotebookWorkspaceSymbol(e){return this.toNotebookSymbolFromSymbolInformation(e.location.uri,e)}toConcatDiagnostic(e,t){return{...t,range:this.toConcatRange(e,t.range),relatedInformation:t.relatedInformation?t.relatedInformation.map(this.toConcatRelatedInformation.bind(this,e)):void 0}}toConcatRelatedInformation(e,t){const n=this.toConcatDocument(e);return{...t,location:t.location.uri===n.uri?this.toConcatLocation(e,t.location):t.location}}toConcatLocation(e,t){return{uri:this.toConcatDocument(e).uri,range:this.toConcatRange(e,t.range)}}toNotebookRelatedInformation(e,t){const n=this.toConcatUri(e);return{...t,location:t.location.uri===n?this.toNotebookLocationFromLocation(t.location):t.location}}toNotebookSymbolFromDocumentSymbol(e,t){return t.children?{...t,range:this.toNotebookRange(e,t.range),selectionRange:this.toNotebookRange(e,t.selectionRange),children:t.children.map(this.toNotebookSymbolFromDocumentSymbol.bind(this,e))}:{...t,range:this.toNotebookRange(e,t.range),selectionRange:this.toNotebookRange(e,t.selectionRange)}}toNotebookLocationFromLocation(e){const t=this.toNotebookUri(e.uri,e.range);return{uri:t,range:this.toNotebookRange(t,e.range)}}toNotebookLocationLinkFromLocationLink(e){const t=this.toNotebookUri(e.targetUri,e.targetRange);return{originSelectionRange:e.originSelectionRange?this.toNotebookRange(t,e.originSelectionRange):void 0,targetUri:t,targetRange:this.toNotebookRange(t,e.targetRange),targetSelectionRange:this.toNotebookRange(t,e.targetSelectionRange)}}toNotebookLocationOrLink(e){return"targetUri"in e?this.toNotebookLocationLinkFromLocationLink(e):this.toNotebookLocationFromLocation(e)}toNotebookCompletion(e,t){const n=t;return n.range?n.range.inserting?{...t,range:{inserting:this.toNotebookRange(e,n.range.inserting),replacing:this.toNotebookRange(e,n.range.replacing)}}:{...t,range:this.toNotebookRange(e,n.range)}:t}toNotebookLocationFromRange(e,t){const n=this.getConcatDocumentForUri(e);if(n){const e=n.notebookLocationAt(t.start),i=n.notebookLocationAt(t.end);return{uri:e.uri,range:m(e.range.start,i.range.end)}}return{uri:s.TextDocumentIdentifier.is(e)?e.uri:e,range:t}}deleteConcatDocument(e){this.activeConcatsOutgoingMap.delete(this.getDocumentKey(e.concatUri)),this.activeConcats.delete(e.key),e.dispose()}getConcatDocumentForUri(e){const t=this.toURI(e);return l(t)?this.getConcatDocument(t):this.getConcatFromOutgoingUri(t)}getConcatFromOutgoingUri(e){const t=this.toURI(e);return this.activeConcatsOutgoingMap.get(this.getDocumentKey(t))}getConcatDocument(e){const t=this.toURI(e),n=this.getDocumentKey(t);let i=this.activeConcats.get(n);return i||(i=new S(n,this.getNotebookHeader,this.disableTypeIgnore),this.activeConcats.set(n,i)),i}}function k(e,t,n=!1){return new C(e,t,n)}})(),e.exports=o})()},638:e=>{"use strict";e.exports=n(40273)}},i={};function r(e){var n=i[e];if(void 0!==n)return n.exports;var o=i[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";r.r(o),r.d(o,{createHidingMiddleware:()=>f,createNotebookMiddleware:()=>m});const e="vscode-interactive-input",t="vscode-interactive";function i(t){return t.scheme.includes("vscode-notebook-cell")||t.scheme.includes(e)}class s{constructor(){this.handleDiagnostics=this.handleDiagnostics.bind(this),this.didOpen=this.didOpen.bind(this),this.didSave=this.didSave.bind(this),this.didChange=this.didChange.bind(this),this.didClose=this.didClose.bind(this)}dispose(){}async didChange(e,t){if(!i(e.document.uri))return t(e)}async didOpen(e,t){if(!i(e.uri))return t(e)}async didClose(e,t){if(!i(e.uri))return t(e)}async didSave(e,t){if(!i(e.uri))return t(e)}provideCompletionItem(e,t,n,r,o){if(!i(e.uri))return o(e,t,n,r)}provideHover(e,t,n,r){if(!i(e.uri))return r(e,t,n)}resolveCompletionItem(e,t,n){return n(e,t)}provideSignatureHelp(e,t,n,r,o){if(!i(e.uri))return o(e,t,n,r)}provideDefinition(e,t,n,r){if(!i(e.uri))return r(e,t,n)}provideReferences(e,t,n,r,o){if(!i(e.uri))return o(e,t,n,r)}provideDocumentHighlights(e,t,n,r){if(!i(e.uri))return r(e,t,n)}provideDocumentSymbols(e,t,n){if(!i(e.uri))return n(e,t)}provideCodeActions(e,t,n,r,o){if(!i(e.uri))return o(e,t,n,r)}provideCodeLenses(e,t,n){if(!i(e.uri))return n(e,t)}provideDocumentFormattingEdits(e,t,n,r){if(!i(e.uri))return r(e,t,n)}provideDocumentRangeFormattingEdits(e,t,n,r,o){if(!i(e.uri))return o(e,t,n,r)}provideOnTypeFormattingEdits(e,t,n,r,o,s){if(!i(e.uri))return s(e,t,n,r,o)}provideRenameEdits(e,t,n,r,o){if(!i(e.uri))return o(e,t,n,r)}prepareRename(e,t,n,r){if(!i(e.uri))return r(e,t,n)}provideDocumentLinks(e,t,n){if(!i(e.uri))return n(e,t)}provideDeclaration(e,t,n,r){if(!i(e.uri))return r(e,t,n)}handleDiagnostics(e,t,n){i(e)?n(e,[]):n(e,t)}provideTypeDefinition(e,t,n,r){if(!i(e.uri))return r(e,t,n)}provideImplementation(e,t,n,r){if(!i(e.uri))return r(e,t,n)}provideDocumentColors(e,t,n){if(!i(e.uri))return n(e,t)}provideColorPresentations(e,t,n,r){if(!i(t.document.uri))return r(e,t,n)}provideFoldingRanges(e,t,n,r){if(!i(e.uri))return r(e,t,n)}provideSelectionRanges(e,t,n,r){if(!i(e.uri))return r(e,t,n)}prepareCallHierarchy(e,t,n,r){if(!i(e.uri))return r(e,t,n)}provideCallHierarchyIncomingCalls(e,t,n){if(!i(e.uri))return n(e,t)}provideCallHierarchyOutgoingCalls(e,t,n){if(!i(e.uri))return n(e,t)}provideDocumentSemanticTokens(e,t,n){if(!i(e.uri))return n(e,t)}provideDocumentSemanticTokensEdits(e,t,n,r){if(!i(e.uri))return r(e,t,n)}provideDocumentRangeSemanticTokens(e,t,n,r){if(!i(e.uri))return r(e,t,n)}provideLinkedEditingRange(e,t,n,r){if(!i(e.uri))return r(e,t,n)}}const a=n(66828),c=n(92850),l=n(52847),d=n(22037);var u=r(881);function p(e,t){return a.languages.match(t,e)}class h{constructor(e,t,n,i,r,o){this.getClient=e,this.traceInfo=t,this.cellSelector=n,this.pythonPath=i,this.isDocumentAllowed=r,this.disposables=[],this.workspace={configuration:async(e,t,n)=>{let i=n(e,t);var r;if("function"==typeof(null==(r=i)?void 0:r.then)&&(i=await i),i instanceof c.ResponseError)return i;for(const[t,n]of e.items.entries())"python"===n.section&&(i[t].pythonPath=this.pythonPath,i[t].analysis.indexing=!1);return i}},this.converter=u.createConverter(o,(()=>d.platform())),this.handleDiagnostics=this.handleDiagnostics.bind(this),this.didOpen=this.didOpen.bind(this),this.didSave=this.didSave.bind(this),this.didChange=this.didChange.bind(this),this.didClose=this.didClose.bind(this),this.willSave=this.willSave.bind(this),this.willSaveWaitUntil=this.willSaveWaitUntil.bind(this)}dispose(){this.disposables.forEach((e=>e.dispose())),this.disposables=[],this.converter.dispose()}refresh(e){const t=this.getClient();if(t&&e.cellCount>0){const n=this.asTextDocumentIdentifier(e.cellAt(0).document);if(this.converter.isOpen(n)){const n=this.converter.handleRefresh(function(e,t){return{cells:e.getCells().filter((e=>p(e.document,t)>0)).map((e=>({textDocument:{uri:e.document.uri.toString(),text:e.document.getText(),languageId:e.document.languageId,version:e.document.version}})))}}(e,this.cellSelector));n&&t.sendNotification(c.DidChangeTextDocumentNotification.type,n)}}}stopWatching(e){const t=this.getClient();if(t&&e.cellCount>0){const n=this.asTextDocumentIdentifier(e.cellAt(0).document),i={textDocument:this.converter.toConcatDocument(n)};t.sendNotification(c.DidCloseTextDocumentNotification.type,i),t.diagnostics&&e.getCells().forEach((e=>{var n;null===(n=t.diagnostics)||void 0===n||n.set(e.document.uri,[])})),e.getCells().forEach((e=>{this.converter.handleClose({textDocument:{uri:e.document.uri.toString()}})}))}}startWatching(e){const t=this.getClient();t&&e.cellCount>0&&e.getCells().forEach((e=>{this.didOpen(e.document,(async e=>{const n=t.code2ProtocolConverter.asOpenTextDocumentParams(e);await t.sendNotification(c.DidOpenTextDocumentNotification.type,n)}))}))}async didChange(e){const t=this.getClient();if(i(e.document.uri)&&t&&p(e.document,this.cellSelector)){const n=this.asTextDocumentIdentifier(e.document),i=this.converter.isOpen(n),r=this.converter.handleChange(t.code2ProtocolConverter.asChangeTextDocumentParams(e));if(i)r&&t.sendNotification(c.DidChangeTextDocumentNotification.type,r);else{const e={textDocument:this.converter.toConcatDocument(n)};t.sendNotification(c.DidOpenTextDocumentNotification.type,e)}}}async didOpen(e,t){const n=this.getClient();if(i(e.uri)&&this.isDocumentAllowed(e.uri)&&n&&p(e,this.cellSelector)){const t=this.asTextDocumentIdentifier(e),i=this.asTextDocumentItem(e),r=this.converter.isOpen(t),o=this.converter.handleOpen({textDocument:i});if(r)o&&n.sendNotification(c.DidChangeTextDocumentNotification.type,o);else{const e=this.converter.toConcatDocument(t);n.sendNotification(c.DidOpenTextDocumentNotification.type,{textDocument:e})}}}async didClose(e,t){const n=this.getClient();if(i(e.uri)&&n&&p(e,this.cellSelector)){const t=this.asTextDocumentItem(e),i=this.converter.isOpen(t),r=this.converter.handleClose({textDocument:t}),o=!this.converter.isOpen(t);if(o&&i){const e=this.converter.toConcatDocument(t);n.sendNotification(c.DidCloseTextDocumentNotification.type,{textDocument:e})}else!o&&r&&n.sendNotification(c.DidChangeTextDocumentNotification.type,r)}}didSave(e,t){return t(e)}willSave(e,t){return t(e)}willSaveWaitUntil(e,t){return t(e)}async provideCompletionItem(e,t,n,i,r){const o=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&o){const r=this.asTextDocumentIdentifier(e),s={textDocument:this.converter.toConcatDocument(r),position:this.converter.toConcatPosition(r,t),context:o.code2ProtocolConverter.asCompletionParams(e,t,n).context},a=await o.sendRequest(l.CompletionRequest.type,s,i),c=this.converter.toNotebookCompletions(r,a);return o.protocol2CodeConverter.asCompletionResult(c)}}async provideHover(e,t,n,i){const r=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&r){const i=this.asTextDocumentIdentifier(e),o={textDocument:this.converter.toConcatDocument(i),position:this.converter.toConcatPosition(i,t)},s=await r.sendRequest(l.HoverRequest.type,o,n),a=this.converter.toNotebookHover(i,s);return r.protocol2CodeConverter.asHover(a)}}resolveCompletionItem(e,t,n){return n(e,t)}async provideSignatureHelp(e,t,n,i,r){const o=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&o){const r=this.asTextDocumentIdentifier(e),s={textDocument:this.converter.toConcatDocument(r),position:this.converter.toConcatPosition(r,t),context:o.code2ProtocolConverter.asSignatureHelpParams(e,t,n).context},a=await o.sendRequest(l.SignatureHelpRequest.type,s,i);return o.protocol2CodeConverter.asSignatureHelp(a)}}async provideDefinition(e,t,n,i){const r=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&r){const i=this.asTextDocumentIdentifier(e),o={textDocument:this.converter.toConcatDocument(i),position:this.converter.toConcatPosition(i,t)},s=await r.sendRequest(l.DefinitionRequest.type,o,n),a=this.converter.toNotebookLocations(s);return r.protocol2CodeConverter.asDefinitionResult(a)}}async provideReferences(e,t,n,i,r){const o=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&o){const r=this.asTextDocumentIdentifier(e),s={textDocument:this.converter.toConcatDocument(r),position:this.converter.toConcatPosition(r,t),context:{includeDeclaration:n.includeDeclaration}},a=await o.sendRequest(l.ReferencesRequest.type,s,i),c=this.converter.toNotebookLocations(a);return o.protocol2CodeConverter.asReferences(c)}}async provideDocumentHighlights(e,t,n,i){const r=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&r){const i=this.asTextDocumentIdentifier(e),o={textDocument:this.converter.toConcatDocument(i),position:this.converter.toConcatPosition(i,t)},s=await r.sendRequest(l.DocumentHighlightRequest.type,o,n),a=this.converter.toNotebookHighlight(i,s);return r.protocol2CodeConverter.asDocumentHighlights(a)}}async provideDocumentSymbols(e,t,n){const i=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&i){const n=this.asTextDocumentIdentifier(e),r={textDocument:this.converter.toConcatDocument(n)},o=await i.sendRequest(l.DocumentSymbolRequest.type,r,t),s=this.converter.toNotebookSymbols(n,o),a=s?s[0]:void 0;if(c.DocumentSymbol.is(a))return i.protocol2CodeConverter.asDocumentSymbols(s);if(a)return i.protocol2CodeConverter.asSymbolInformations(s)}}async provideWorkspaceSymbols(e,t,n){const i=this.getClient();if(i){const n={query:e},r=await i.sendRequest(l.WorkspaceSymbolRequest.type,n,t),o=this.converter.toNotebookWorkspaceSymbols(r);return i.protocol2CodeConverter.asSymbolInformations(o)}}provideCodeActions(e,t,n,i,r){this.shouldProvideIntellisense(e.uri)&&this.traceInfo("provideCodeActions not currently supported for notebooks")}provideCodeLenses(e,t,n){this.shouldProvideIntellisense(e.uri)&&this.traceInfo("provideCodeLenses not currently supported for notebooks")}resolveCodeLens(e,t,n){return n(e,t)}provideDocumentFormattingEdits(e,t,n,i){this.shouldProvideIntellisense(e.uri)&&this.traceInfo("provideDocumentFormattingEdits not currently supported for notebooks")}provideDocumentRangeFormattingEdits(e,t,n,i,r){this.shouldProvideIntellisense(e.uri)&&this.traceInfo("provideDocumentRangeFormattingEdits not currently supported for notebooks")}provideOnTypeFormattingEdits(e,t,n,i,r,o){this.shouldProvideIntellisense(e.uri)&&this.traceInfo("provideOnTypeFormattingEdits not currently supported for notebooks")}provideRenameEdits(e,t,n,i,r){this.shouldProvideIntellisense(e.uri)&&this.traceInfo("provideRenameEdits not currently supported for notebooks")}prepareRename(e,t,n,i){this.shouldProvideIntellisense(e.uri)&&this.traceInfo("prepareRename not currently supported for notebooks")}provideDocumentLinks(e,t,n){this.shouldProvideIntellisense(e.uri)&&this.traceInfo("provideDocumentLinks not currently supported for notebooks")}resolveDocumentLink(e,t,n){return n(e,t)}handleDiagnostics(n,i,r){try{const s=this.converter.toNotebookUri(n.toString()),c=s?a.Uri.parse(s):void 0,l=this.getClient();l&&c&&s!=n.toString()&&this.shouldProvideIntellisense(c)&&!((o=c).fragment.includes(t)||o.scheme.includes(e)||o.scheme.includes(t))?l.code2ProtocolConverter.asDiagnostics(i).then((e=>{const t=this.converter.toNotebookDiagnosticsMap(n.toString(),e);[...t.keys()].map((async e=>r(a.Uri.parse(e),await l.protocol2CodeConverter.asDiagnostics(t.get(e)))))})):r(n,[])}catch(e){this.traceInfo(`Error during handling diagnostics: ${e}`),r(n,[])}var o}async provideTypeDefinition(e,t,n,i){const r=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&r){const i=this.asTextDocumentIdentifier(e),o={textDocument:this.converter.toConcatDocument(i),position:this.converter.toConcatPosition(i,t)},s=await r.sendRequest(l.TypeDefinitionRequest.type,o,n),a=this.converter.toNotebookLocations(s);return r.protocol2CodeConverter.asDefinitionResult(a)}}async provideImplementation(e,t,n,i){const r=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&r){const i=this.asTextDocumentIdentifier(e),o={textDocument:this.converter.toConcatDocument(i),position:this.converter.toConcatPosition(i,t)},s=await r.sendRequest(l.ImplementationRequest.type,o,n),a=this.converter.toNotebookLocations(s);return r.protocol2CodeConverter.asDefinitionResult(a)}}async provideDocumentColors(e,t,n){const i=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&i){const n=this.asTextDocumentIdentifier(e),r={textDocument:this.converter.toConcatDocument(n)},o=await i.sendRequest(l.DocumentColorRequest.type,r,t),s=this.converter.toNotebookColorInformations(n,o);return i.protocol2CodeConverter.asColorInformations(s)}}async provideColorPresentations(e,t,n,i){const r=this.getClient();if(this.shouldProvideIntellisense(t.document.uri)&&r){const i=this.asTextDocumentIdentifier(t.document),o={textDocument:this.converter.toConcatDocument(i),range:this.converter.toRealRange(i,t.range),color:e},s=await r.sendRequest(l.ColorPresentationRequest.type,o,n),a=this.converter.toNotebookColorPresentations(i,s);return r.protocol2CodeConverter.asColorPresentations(a)}}async provideFoldingRanges(e,t,n,i){const r=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&r){const t=this.asTextDocumentIdentifier(e),i={textDocument:this.converter.toConcatDocument(t)},o=await r.sendRequest(l.FoldingRangeRequest.type,i,n),s=this.converter.toNotebookFoldingRanges(t,o);return r.protocol2CodeConverter.asFoldingRanges(s)}}async provideDeclaration(e,t,n,i){const r=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&r){const i=this.asTextDocumentIdentifier(e),o={textDocument:this.converter.toConcatDocument(i),position:this.converter.toConcatPosition(i,t)},s=await r.sendRequest(l.DeclarationRequest.type,o,n),a=this.converter.toNotebookLocations(s);return r.protocol2CodeConverter.asDeclarationResult(a)}}async provideSelectionRanges(e,t,n,i){const r=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&r){const i=this.asTextDocumentIdentifier(e),o={textDocument:this.converter.toConcatDocument(i),positions:this.converter.toConcatPositions(i,t)},s=await r.sendRequest(l.SelectionRangeRequest.type,o,n),a=this.converter.toNotebookSelectionRanges(i,s);return r.protocol2CodeConverter.asSelectionRanges(a)}}async prepareCallHierarchy(e,t,n,i){const r=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&r){const i=this.asTextDocumentIdentifier(e),o={textDocument:this.converter.toConcatDocument(i),position:this.converter.toConcatPosition(i,t)},s=await r.sendRequest(l.CallHierarchyPrepareRequest.type,o,n),a=this.converter.toNotebookCallHierarchyItems(i,s);return r.protocol2CodeConverter.asCallHierarchyItems(a)}}async provideCallHierarchyIncomingCalls(e,t,n){const i=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&i){const n=this.asTextDocumentIdentifier(e.uri),r=this.converter.toConcatDocument(n),o=this.converter.toRealRange(n,e.range),s=this.converter.toRealRange(n,e.selectionRange),a={item:{...i.code2ProtocolConverter.asCallHierarchyItem(e),uri:r.uri,range:o,selectionRange:s}},c=await i.sendRequest(l.CallHierarchyIncomingCallsRequest.type,a,t),d=this.converter.toNotebookCallHierarchyIncomingCallItems(n,c);return i.protocol2CodeConverter.asCallHierarchyIncomingCalls(d)}}async provideCallHierarchyOutgoingCalls(e,t,n){const i=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&i){const n=this.asTextDocumentIdentifier(e.uri),r=this.converter.toConcatDocument(n),o=this.converter.toRealRange(n,e.range),s=this.converter.toRealRange(n,e.selectionRange),a={item:{...i.code2ProtocolConverter.asCallHierarchyItem(e),uri:r.uri,range:o,selectionRange:s}},c=await i.sendRequest(l.CallHierarchyOutgoingCallsRequest.type,a,t),d=this.converter.toNotebookCallHierarchyOutgoingCallItems(n,c);return i.protocol2CodeConverter.asCallHierarchyOutgoingCalls(d)}}async provideDocumentSemanticTokens(e,t,n){const i=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&i){const n=this.asTextDocumentIdentifier(e),r={textDocument:this.converter.toConcatDocument(n),range:this.converter.toRealRange(n,void 0)},o=await i.sendRequest(c.SemanticTokensRangeRequest.type,r,t),s=this.converter.toNotebookSemanticTokens(n,o);return i.protocol2CodeConverter.asSemanticTokens(s)}}async provideDocumentSemanticTokensEdits(e,t,n,i){const r=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&r){const t=this.asTextDocumentIdentifier(e),i={textDocument:this.converter.toConcatDocument(t),range:this.converter.toRealRange(t,void 0)},o=await r.sendRequest(c.SemanticTokensRangeRequest.type,i,n),s=this.converter.toNotebookSemanticTokens(t,o);return r.protocol2CodeConverter.asSemanticTokens(s)}}async provideDocumentRangeSemanticTokens(e,t,n,i){const r=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&r){const i=this.asTextDocumentIdentifier(e),o={textDocument:this.converter.toConcatDocument(i),range:this.converter.toRealRange(i,t)},s=await r.sendRequest(c.SemanticTokensRangeRequest.type,o,n),a=this.converter.toNotebookSemanticTokens(i,s);return r.protocol2CodeConverter.asSemanticTokens(a)}}async provideLinkedEditingRange(e,t,n,i){const r=this.getClient();if(this.shouldProvideIntellisense(e.uri)&&r){const i=this.asTextDocumentIdentifier(e),o={textDocument:this.converter.toConcatDocument(i),position:this.converter.toConcatPosition(i,t)},s=await r.sendRequest(c.LinkedEditingRangeRequest.type,o,n),a=this.converter.toNotebookLinkedEditingRanges(i,s);return r.protocol2CodeConverter.asLinkedEditingRanges(a)}}shouldProvideIntellisense(e){return this.isDocumentAllowed(e)}asTextDocumentIdentifier(e){return{uri:"uri"in e?e.uri.toString():e.toString()}}asTextDocumentItem(e){return{uri:e.uri.toString(),text:e.getText(),languageId:e.languageId,version:e.version}}}function f(){return new s}function m(e,t,n,i,r,o){return new h(e,t,n,i,r,o)}})(),e.exports=o})()},52881:(e,t,n)=>{(()=>{var t={705:e=>{e.exports=function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}a=n[s]={exports:{}},t[s][0].call(a.exports,(function(e){return r(t[s][1][e]||e)}),a,a.exports,e,t,n,i)}return n[s].exports}for(var o=void 0,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){(function(i,r,o,s,a,c,l,d,u){"use strict";var p=e("crypto");function h(e,t){var n;return void 0===(n="passthrough"!==(t=g(e,t)).algorithm?p.createHash(t.algorithm):new b).write&&(n.write=n.update,n.end=n.update),y(t,n).dispatch(e),n.update||n.end(""),n.digest?n.digest("buffer"===t.encoding?void 0:t.encoding):(e=n.read(),"buffer"!==t.encoding?e.toString(t.encoding):e)}(n=t.exports=h).sha1=function(e){return h(e)},n.keys=function(e){return h(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},n.MD5=function(e){return h(e,{algorithm:"md5",encoding:"hex"})},n.keysMD5=function(e){return h(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var f=p.getHashes?p.getHashes().slice():["sha1","md5"],m=(f.push("passthrough"),["buffer","hex","binary","base64"]);function g(e,t){var n={};if(n.algorithm=(t=t||{}).algorithm||"sha1",n.encoding=t.encoding||"hex",n.excludeValues=!!t.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=!0===t.ignoreUnknown,n.respectType=!1!==t.respectType,n.respectFunctionNames=!1!==t.respectFunctionNames,n.respectFunctionProperties=!1!==t.respectFunctionProperties,n.unorderedArrays=!0===t.unorderedArrays,n.unorderedSets=!1!==t.unorderedSets,n.unorderedObjects=!1!==t.unorderedObjects,n.replacer=t.replacer||void 0,n.excludeKeys=t.excludeKeys||void 0,void 0===e)throw new Error("Object argument required.");for(var i=0;i<f.length;++i)f[i].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=f[i]);if(-1===f.indexOf(n.algorithm))throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+f.join(", "));if(-1===m.indexOf(n.encoding)&&"passthrough"!==n.algorithm)throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+m.join(", "));return n}function v(e){if("function"==typeof e)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))}function y(e,t,n){function i(e){return t.update?t.update(e,"utf8"):t.write(e,"utf8")}return n=n||[],{dispatch:function(t){return this["_"+(null===(t=e.replacer?e.replacer(t):t)?"null":typeof t)](t)},_object:function(t){var r,s=Object.prototype.toString.call(t),a=/\[object (.*)\]/i.exec(s);if(a=(a=a?a[1]:"unknown:["+s+"]").toLowerCase(),0<=(s=n.indexOf(t)))return this.dispatch("[CIRCULAR:"+s+"]");if(n.push(t),void 0!==o&&o.isBuffer&&o.isBuffer(t))return i("buffer:"),i(t);if("object"===a||"function"===a||"asyncfunction"===a)return s=Object.keys(t),e.unorderedObjects&&(s=s.sort()),!1===e.respectType||v(t)||s.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(s=s.filter((function(t){return!e.excludeKeys(t)}))),i("object:"+s.length+":"),r=this,s.forEach((function(n){r.dispatch(n),i(":"),e.excludeValues||r.dispatch(t[n]),i(",")}));if(!this["_"+a]){if(e.ignoreUnknown)return i("["+a+"]");throw new Error('Unknown object type "'+a+'"')}this["_"+a](t)},_array:function(t,r){r=void 0!==r?r:!1!==e.unorderedArrays;var o=this;if(i("array:"+t.length+":"),!r||t.length<=1)return t.forEach((function(e){return o.dispatch(e)}));var s=[];return r=t.map((function(t){var i=new b,r=n.slice();return y(e,i,r).dispatch(t),s=s.concat(r.slice(n.length)),i.read().toString()})),n=n.concat(s),r.sort(),this._array(r,!1)},_date:function(e){return i("date:"+e.toJSON())},_symbol:function(e){return i("symbol:"+e.toString())},_error:function(e){return i("error:"+e.toString())},_boolean:function(e){return i("bool:"+e.toString())},_string:function(e){i("string:"+e.length+":"),i(e.toString())},_function:function(t){i("fn:"),v(t)?this.dispatch("[native]"):this.dispatch(t.toString()),!1!==e.respectFunctionNames&&this.dispatch("function-name:"+String(t.name)),e.respectFunctionProperties&&this._object(t)},_number:function(e){return i("number:"+e.toString())},_xml:function(e){return i("xml:"+e.toString())},_null:function(){return i("Null")},_undefined:function(){return i("Undefined")},_regexp:function(e){return i("regex:"+e.toString())},_uint8array:function(e){return i("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){return i("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){return i("int8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){return i("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){return i("int16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){return i("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){return i("int32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){return i("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){return i("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){return i("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){return i("url:"+e.toString())},_map:function(t){return i("map:"),t=Array.from(t),this._array(t,!1!==e.unorderedSets)},_set:function(t){return i("set:"),t=Array.from(t),this._array(t,!1!==e.unorderedSets)},_file:function(e){return i("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},_blob:function(){if(e.ignoreUnknown)return i("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return i("domwindow")},_bigint:function(e){return i("bigint:"+e.toString())},_process:function(){return i("process")},_timer:function(){return i("timer")},_pipe:function(){return i("pipe")},_tcp:function(){return i("tcp")},_udp:function(){return i("udp")},_tty:function(){return i("tty")},_statwatcher:function(){return i("statwatcher")},_securecontext:function(){return i("securecontext")},_connection:function(){return i("connection")},_zlib:function(){return i("zlib")},_context:function(){return i("context")},_nodescript:function(){return i("nodescript")},_httpparser:function(){return i("httpparser")},_dataview:function(){return i("dataview")},_signal:function(){return i("signal")},_fsevent:function(){return i("fsevent")},_tlswrap:function(){return i("tlswrap")}}}function b(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}n.writeToStream=function(e,t,n){return void 0===n&&(n=t,t={}),y(t=g(e,t),n).dispatch(e)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(e,t,n){(function(e,t,i,r,o,s,a,c,l){!function(e){"use strict";var t="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),i="/".charCodeAt(0),r="0".charCodeAt(0),o="a".charCodeAt(0),s="A".charCodeAt(0),a="-".charCodeAt(0),c="_".charCodeAt(0);function l(e){return(e=e.charCodeAt(0))===n||e===a?62:e===i||e===c?63:e<r?-1:e<r+10?e-r+26+26:e<s+26?e-s:e<o+26?e-o+26:void 0}e.toByteArray=function(e){var n,i;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.length,o=(r="="===e.charAt(r-2)?2:"="===e.charAt(r-1)?1:0,new t(3*e.length/4-r)),s=0<r?e.length-4:e.length,a=0;function c(e){o[a++]=e}for(n=0;n<s;n+=4,0)c((16711680&(i=l(e.charAt(n))<<18|l(e.charAt(n+1))<<12|l(e.charAt(n+2))<<6|l(e.charAt(n+3))))>>16),c((65280&i)>>8),c(255&i);return 2==r?c(255&(i=l(e.charAt(n))<<2|l(e.charAt(n+1))>>4)):1==r&&(c((i=l(e.charAt(n))<<10|l(e.charAt(n+1))<<4|l(e.charAt(n+2))>>2)>>8&255),c(255&i)),o},e.fromByteArray=function(e){var t,n,i,r,o=e.length%3,s="";function a(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}for(t=0,i=e.length-o;t<i;t+=3)s+=a((r=n=(e[t]<<16)+(e[t+1]<<8)+e[t+2])>>18&63)+a(r>>12&63)+a(r>>6&63)+a(63&r);switch(o){case 1:s=(s+=a((n=e[e.length-1])>>2))+a(n<<4&63)+"==";break;case 2:s=(s=(s+=a((n=(e[e.length-2]<<8)+e[e.length-1])>>10))+a(n>>4&63))+a(n<<2&63)+"="}return s}}(void 0===n?this.base64js={}:n)}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(e,t,n){(function(t,i,r,o,s,a,c,l,d){var u=e("base64-js"),p=e("ieee754");function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);var i,o,s,a,c=typeof e;if("base64"===t&&"string"==c)for(e=(a=e).trim?a.trim():a.replace(/^\s+|\s+$/g,"");e.length%4!=0;)e+="=";if("number"==c)i=T(e);else if("string"==c)i=r.byteLength(e,t);else{if("object"!=c)throw new Error("First argument needs to be a number, array or string.");i=T(e.length)}if(r._useTypedArrays?o=r._augment(new Uint8Array(i)):((o=this).length=i,o._isBuffer=!0),r._useTypedArrays&&"number"==typeof e.byteLength)o._set(e);else if(P(a=e)||r.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length)for(s=0;s<i;s++)r.isBuffer(e)?o[s]=e.readUInt8(s):o[s]=e[s];else if("string"==c)o.write(e,0,t);else if("number"==c&&!r._useTypedArrays&&!n)for(s=0;s<i;s++)o[s]=0;return o}function h(e,t,n,i){var r;if(i||(j("boolean"==typeof n,"missing or invalid endian"),j(null!=t,"missing offset"),j(t+1<e.length,"Trying to read beyond buffer length")),!((i=e.length)<=t))return n?(r=e[t],t+1<i&&(r|=e[t+1]<<8)):(r=e[t]<<8,t+1<i&&(r|=e[t+1])),r}function f(e,t,n,i){var r;if(i||(j("boolean"==typeof n,"missing or invalid endian"),j(null!=t,"missing offset"),j(t+3<e.length,"Trying to read beyond buffer length")),!((i=e.length)<=t))return n?(t+2<i&&(r=e[t+2]<<16),t+1<i&&(r|=e[t+1]<<8),r|=e[t],t+3<i&&(r+=e[t+3]<<24>>>0)):(t+1<i&&(r=e[t+1]<<16),t+2<i&&(r|=e[t+2]<<8),t+3<i&&(r|=e[t+3]),r+=e[t]<<24>>>0),r}function m(e,t,n,i){if(i||(j("boolean"==typeof n,"missing or invalid endian"),j(null!=t,"missing offset"),j(t+1<e.length,"Trying to read beyond buffer length")),!(e.length<=t))return 32768&(i=h(e,t,n,!0))?-1*(65535-i+1):i}function g(e,t,n,i){if(i||(j("boolean"==typeof n,"missing or invalid endian"),j(null!=t,"missing offset"),j(t+3<e.length,"Trying to read beyond buffer length")),!(e.length<=t))return 2147483648&(i=f(e,t,n,!0))?-1*(4294967295-i+1):i}function v(e,t,n,i){return i||(j("boolean"==typeof n,"missing or invalid endian"),j(t+3<e.length,"Trying to read beyond buffer length")),p.read(e,t,n,23,4)}function y(e,t,n,i){return i||(j("boolean"==typeof n,"missing or invalid endian"),j(t+7<e.length,"Trying to read beyond buffer length")),p.read(e,t,n,52,8)}function b(e,t,n,i,r){if(r||(j(null!=t,"missing value"),j("boolean"==typeof i,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+1<e.length,"trying to write beyond buffer length"),N(t,65535)),!((r=e.length)<=n))for(var o=0,s=Math.min(r-n,2);o<s;o++)e[n+o]=(t&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function w(e,t,n,i,r){if(r||(j(null!=t,"missing value"),j("boolean"==typeof i,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+3<e.length,"trying to write beyond buffer length"),N(t,4294967295)),!((r=e.length)<=n))for(var o=0,s=Math.min(r-n,4);o<s;o++)e[n+o]=t>>>8*(i?o:3-o)&255}function _(e,t,n,i,r){r||(j(null!=t,"missing value"),j("boolean"==typeof i,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+1<e.length,"Trying to write beyond buffer length"),M(t,32767,-32768)),e.length<=n||b(e,0<=t?t:65535+t+1,n,i,r)}function S(e,t,n,i,r){r||(j(null!=t,"missing value"),j("boolean"==typeof i,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+3<e.length,"Trying to write beyond buffer length"),M(t,2147483647,-2147483648)),e.length<=n||w(e,0<=t?t:4294967295+t+1,n,i,r)}function C(e,t,n,i,r){r||(j(null!=t,"missing value"),j("boolean"==typeof i,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+3<e.length,"Trying to write beyond buffer length"),L(t,34028234663852886e22,-34028234663852886e22)),e.length<=n||p.write(e,t,n,i,23,4)}function k(e,t,n,i,r){r||(j(null!=t,"missing value"),j("boolean"==typeof i,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+7<e.length,"Trying to write beyond buffer length"),L(t,17976931348623157e292,-17976931348623157e292)),e.length<=n||p.write(e,t,n,i,52,8)}n.Buffer=r,n.SlowBuffer=r,n.INSPECT_MAX_BYTES=50,r.poolSize=8192,r._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(e){return!1}}(),r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.isBuffer=function(e){return!(null==e||!e._isBuffer)},r.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"hex":n=e.length/2;break;case"utf8":case"utf-8":n=D(e).length;break;case"ascii":case"binary":case"raw":n=e.length;break;case"base64":n=R(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;default:throw new Error("Unknown encoding")}return n},r.concat=function(e,t){if(j(P(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new r(0);if(1===e.length)return e[0];if("number"!=typeof t)for(o=t=0;o<e.length;o++)t+=e[o].length;for(var n=new r(t),i=0,o=0;o<e.length;o++){var s=e[o];s.copy(n,i),i+=s.length}return n},r.prototype.write=function(e,t,n,i){isFinite(t)?isFinite(n)||(i=n,n=void 0):(l=i,i=t,t=n,n=l),t=Number(t)||0;var o,s,a,c,l=this.length-t;switch((!n||l<(n=Number(n)))&&(n=l),i=String(i||"utf8").toLowerCase()){case"hex":o=function(e,t,n,i){n=Number(n)||0;var o=e.length-n;(!i||o<(i=Number(i)))&&(i=o),j((o=t.length)%2==0,"Invalid hex string"),o/2<i&&(i=o/2);for(var s=0;s<i;s++){var a=parseInt(t.substr(2*s,2),16);j(!isNaN(a),"Invalid hex string"),e[n+s]=a}return r._charsWritten=2*s,s}(this,e,t,n);break;case"utf8":case"utf-8":s=this,a=t,c=n,o=r._charsWritten=O(D(e),s,a,c);break;case"ascii":case"binary":o=function(e,t,n,i){return r._charsWritten=O(function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}(this,e,t,n);break;case"base64":s=this,a=t,c=n,o=r._charsWritten=O(R(e),s,a,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=function(e,t,n,i){return r._charsWritten=O(function(e){for(var t,n,i=[],r=0;r<e.length;r++)t=(n=e.charCodeAt(r))>>8,n%=256,i.push(n),i.push(t);return i}(t),e,n,i)}(this,e,t,n);break;default:throw new Error("Unknown encoding")}return o},r.prototype.toString=function(e,t,n){var i,r,o,s,a=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,(n=void 0!==n?Number(n):a.length)===t)return"";switch(e){case"hex":i=function(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||i<n)&&(n=i);for(var r="",o=t;o<n;o++)r+=I(e[o]);return r}(a,t,n);break;case"utf8":case"utf-8":i=function(e,t,n){var i="",r="";n=Math.min(e.length,n);for(var o=t;o<n;o++)e[o]<=127?(i+=A(r)+String.fromCharCode(e[o]),r=""):r+="%"+e[o].toString(16);return i+A(r)}(a,t,n);break;case"ascii":case"binary":i=function(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;r++)i+=String.fromCharCode(e[r]);return i}(a,t,n);break;case"base64":r=a,s=n,i=0===(o=t)&&s===r.length?u.fromByteArray(r):u.fromByteArray(r.slice(o,s));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=function(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}(a,t,n);break;default:throw new Error("Unknown encoding")}return i},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.copy=function(e,t,n,i){if(t=t||0,(i=i||0===i?i:this.length)!==(n=n||0)&&0!==e.length&&0!==this.length){j(n<=i,"sourceEnd < sourceStart"),j(0<=t&&t<e.length,"targetStart out of bounds"),j(0<=n&&n<this.length,"sourceStart out of bounds"),j(0<=i&&i<=this.length,"sourceEnd out of bounds"),i>this.length&&(i=this.length);var o=(i=e.length-t<i-n?e.length-t+n:i)-n;if(o<100||!r._useTypedArrays)for(var s=0;s<o;s++)e[s+t]=this[s+n];else e._set(this.subarray(n,n+o),t)}},r.prototype.slice=function(e,t){var n=this.length;if(e=x(e,n,0),t=x(t,n,n),r._useTypedArrays)return r._augment(this.subarray(e,t));for(var i=t-e,o=new r(i,void 0,!0),s=0;s<i;s++)o[s]=this[s+e];return o},r.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},r.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},r.prototype.readUInt8=function(e,t){if(t||(j(null!=e,"missing offset"),j(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return this[e]},r.prototype.readUInt16LE=function(e,t){return h(this,e,!0,t)},r.prototype.readUInt16BE=function(e,t){return h(this,e,!1,t)},r.prototype.readUInt32LE=function(e,t){return f(this,e,!0,t)},r.prototype.readUInt32BE=function(e,t){return f(this,e,!1,t)},r.prototype.readInt8=function(e,t){if(t||(j(null!=e,"missing offset"),j(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return 128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){return m(this,e,!0,t)},r.prototype.readInt16BE=function(e,t){return m(this,e,!1,t)},r.prototype.readInt32LE=function(e,t){return g(this,e,!0,t)},r.prototype.readInt32BE=function(e,t){return g(this,e,!1,t)},r.prototype.readFloatLE=function(e,t){return v(this,e,!0,t)},r.prototype.readFloatBE=function(e,t){return v(this,e,!1,t)},r.prototype.readDoubleLE=function(e,t){return y(this,e,!0,t)},r.prototype.readDoubleBE=function(e,t){return y(this,e,!1,t)},r.prototype.writeUInt8=function(e,t,n){n||(j(null!=e,"missing value"),j(null!=t,"missing offset"),j(t<this.length,"trying to write beyond buffer length"),N(e,255)),t>=this.length||(this[t]=e)},r.prototype.writeUInt16LE=function(e,t,n){b(this,e,t,!0,n)},r.prototype.writeUInt16BE=function(e,t,n){b(this,e,t,!1,n)},r.prototype.writeUInt32LE=function(e,t,n){w(this,e,t,!0,n)},r.prototype.writeUInt32BE=function(e,t,n){w(this,e,t,!1,n)},r.prototype.writeInt8=function(e,t,n){n||(j(null!=e,"missing value"),j(null!=t,"missing offset"),j(t<this.length,"Trying to write beyond buffer length"),M(e,127,-128)),t>=this.length||(0<=e?this.writeUInt8(e,t,n):this.writeUInt8(255+e+1,t,n))},r.prototype.writeInt16LE=function(e,t,n){_(this,e,t,!0,n)},r.prototype.writeInt16BE=function(e,t,n){_(this,e,t,!1,n)},r.prototype.writeInt32LE=function(e,t,n){S(this,e,t,!0,n)},r.prototype.writeInt32BE=function(e,t,n){S(this,e,t,!1,n)},r.prototype.writeFloatLE=function(e,t,n){C(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){C(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){k(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){k(this,e,t,!1,n)},r.prototype.fill=function(e,t,n){if(t=t||0,n=n||this.length,j("number"==typeof(e="string"==typeof(e=e||0)?e.charCodeAt(0):e)&&!isNaN(e),"value is not a number"),j(t<=n,"end < start"),n!==t&&0!==this.length){j(0<=t&&t<this.length,"start out of bounds"),j(0<=n&&n<=this.length,"end out of bounds");for(var i=t;i<n;i++)this[i]=e}},r.prototype.inspect=function(){for(var e=[],t=this.length,i=0;i<t;i++)if(e[i]=I(this[i]),i===n.INSPECT_MAX_BYTES){e[i+1]="...";break}return"<Buffer "+e.join(" ")+">"},r.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(r._useTypedArrays)return new r(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer};var E=r.prototype;function x(e,t,n){return"number"!=typeof e?n:t<=(e=~~e)?t:0<=e||0<=(e+=t)?e:0}function T(e){return(e=~~Math.ceil(+e))<0?0:e}function P(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function I(e){return e<16?"0"+e.toString(16):e.toString(16)}function D(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<=127)t.push(e.charCodeAt(n));else for(var r=n,o=(55296<=i&&i<=57343&&n++,encodeURIComponent(e.slice(r,n+1)).substr(1).split("%")),s=0;s<o.length;s++)t.push(parseInt(o[s],16))}return t}function R(e){return u.toByteArray(e)}function O(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);r++)t[r+n]=e[r];return r}function A(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}function N(e,t){j("number"==typeof e,"cannot write a non-number as a number"),j(0<=e,"specified a negative value for writing an unsigned value"),j(e<=t,"value is larger than maximum value for type"),j(Math.floor(e)===e,"value has a fractional component")}function M(e,t,n){j("number"==typeof e,"cannot write a non-number as a number"),j(e<=t,"value larger than maximum allowed value"),j(n<=e,"value smaller than minimum allowed value"),j(Math.floor(e)===e,"value has a fractional component")}function L(e,t,n){j("number"==typeof e,"cannot write a non-number as a number"),j(e<=t,"value larger than maximum allowed value"),j(n<=e,"value smaller than minimum allowed value")}function j(e,t){if(!e)throw new Error(t||"Failed assertion")}r._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=E.get,e.set=E.set,e.write=E.write,e.toString=E.toString,e.toLocaleString=E.toString,e.toJSON=E.toJSON,e.copy=E.copy,e.slice=E.slice,e.readUInt8=E.readUInt8,e.readUInt16LE=E.readUInt16LE,e.readUInt16BE=E.readUInt16BE,e.readUInt32LE=E.readUInt32LE,e.readUInt32BE=E.readUInt32BE,e.readInt8=E.readInt8,e.readInt16LE=E.readInt16LE,e.readInt16BE=E.readInt16BE,e.readInt32LE=E.readInt32LE,e.readInt32BE=E.readInt32BE,e.readFloatLE=E.readFloatLE,e.readFloatBE=E.readFloatBE,e.readDoubleLE=E.readDoubleLE,e.readDoubleBE=E.readDoubleBE,e.writeUInt8=E.writeUInt8,e.writeUInt16LE=E.writeUInt16LE,e.writeUInt16BE=E.writeUInt16BE,e.writeUInt32LE=E.writeUInt32LE,e.writeUInt32BE=E.writeUInt32BE,e.writeInt8=E.writeInt8,e.writeInt16LE=E.writeInt16LE,e.writeInt16BE=E.writeInt16BE,e.writeInt32LE=E.writeInt32LE,e.writeInt32BE=E.writeInt32BE,e.writeFloatLE=E.writeFloatLE,e.writeFloatBE=E.writeFloatBE,e.writeDoubleLE=E.writeDoubleLE,e.writeDoubleBE=E.writeDoubleBE,e.fill=E.fill,e.inspect=E.inspect,e.toArrayBuffer=E.toArrayBuffer,e}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(e,t,n){(function(n,i,r,o,s,a,c,l,d){var u=new(r=e("buffer").Buffer)(4);u.fill(0),t.exports={hash:function(e,t,n,i){for(var o=t(function(e,t){e.length%4!=0&&(n=e.length+(4-e.length%4),e=r.concat([e,u],n));for(var n,i=[],o=t?e.readInt32BE:e.readInt32LE,s=0;s<e.length;s+=4)i.push(o.call(e,s));return i}(e=r.isBuffer(e)?e:new r(e),i),8*e.length),s=(t=i,new r(n)),a=t?s.writeInt32BE:s.writeInt32LE,c=0;c<o.length;c++)a.call(s,o[c],4*c,!0);return s}}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(e,t,n){(function(t,i,r,o,s,a,c,l,d){r=e("buffer").Buffer;var u=e("./sha"),p=e("./sha256"),h=e("./rng"),f={sha1:u,sha256:p,md5:e("./md5")},m=64,g=new r(m);function v(e,t){var n=f[e=e||"sha1"],i=[];return n||y("algorithm:",e,"is not yet supported"),{update:function(e){return r.isBuffer(e)||(e=new r(e)),i.push(e),e.length,this},digest:function(e){var o=r.concat(i);return o=t?function(e,t,n){r.isBuffer(t)||(t=new r(t)),r.isBuffer(n)||(n=new r(n)),t.length>m?t=e(t):t.length<m&&(t=r.concat([t,g],m));for(var i=new r(m),o=new r(m),s=0;s<m;s++)i[s]=54^t[s],o[s]=92^t[s];return n=e(r.concat([i,n])),e(r.concat([o,n]))}(n,t,o):n(o),i=null,e?o.toString(e):o}}}function y(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}g.fill(0),n.createHash=function(e){return v(e)},n.createHmac=v,n.randomBytes=function(e,t){if(!t||!t.call)return new r(h(e));try{t.call(this,void 0,new r(h(e)))}catch(e){t(e)}};var b,w=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],_=function(e){n[e]=function(){y("sorry,",e,"is not implemented yet")}};for(b in w)_(w[b])}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(e,t,n){(function(n,i,r,o,s,a,c,l,d){var u=e("./helpers");function p(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,i=-271733879,r=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=n,c=i,l=r,d=o;n=f(n,i,r,o,e[s+0],7,-680876936),o=f(o,n,i,r,e[s+1],12,-389564586),r=f(r,o,n,i,e[s+2],17,606105819),i=f(i,r,o,n,e[s+3],22,-1044525330),n=f(n,i,r,o,e[s+4],7,-176418897),o=f(o,n,i,r,e[s+5],12,1200080426),r=f(r,o,n,i,e[s+6],17,-1473231341),i=f(i,r,o,n,e[s+7],22,-45705983),n=f(n,i,r,o,e[s+8],7,1770035416),o=f(o,n,i,r,e[s+9],12,-1958414417),r=f(r,o,n,i,e[s+10],17,-42063),i=f(i,r,o,n,e[s+11],22,-1990404162),n=f(n,i,r,o,e[s+12],7,1804603682),o=f(o,n,i,r,e[s+13],12,-40341101),r=f(r,o,n,i,e[s+14],17,-1502002290),n=m(n,i=f(i,r,o,n,e[s+15],22,1236535329),r,o,e[s+1],5,-165796510),o=m(o,n,i,r,e[s+6],9,-1069501632),r=m(r,o,n,i,e[s+11],14,643717713),i=m(i,r,o,n,e[s+0],20,-373897302),n=m(n,i,r,o,e[s+5],5,-701558691),o=m(o,n,i,r,e[s+10],9,38016083),r=m(r,o,n,i,e[s+15],14,-660478335),i=m(i,r,o,n,e[s+4],20,-405537848),n=m(n,i,r,o,e[s+9],5,568446438),o=m(o,n,i,r,e[s+14],9,-1019803690),r=m(r,o,n,i,e[s+3],14,-187363961),i=m(i,r,o,n,e[s+8],20,1163531501),n=m(n,i,r,o,e[s+13],5,-1444681467),o=m(o,n,i,r,e[s+2],9,-51403784),r=m(r,o,n,i,e[s+7],14,1735328473),n=g(n,i=m(i,r,o,n,e[s+12],20,-1926607734),r,o,e[s+5],4,-378558),o=g(o,n,i,r,e[s+8],11,-2022574463),r=g(r,o,n,i,e[s+11],16,1839030562),i=g(i,r,o,n,e[s+14],23,-35309556),n=g(n,i,r,o,e[s+1],4,-1530992060),o=g(o,n,i,r,e[s+4],11,1272893353),r=g(r,o,n,i,e[s+7],16,-155497632),i=g(i,r,o,n,e[s+10],23,-1094730640),n=g(n,i,r,o,e[s+13],4,681279174),o=g(o,n,i,r,e[s+0],11,-358537222),r=g(r,o,n,i,e[s+3],16,-722521979),i=g(i,r,o,n,e[s+6],23,76029189),n=g(n,i,r,o,e[s+9],4,-640364487),o=g(o,n,i,r,e[s+12],11,-421815835),r=g(r,o,n,i,e[s+15],16,530742520),n=v(n,i=g(i,r,o,n,e[s+2],23,-995338651),r,o,e[s+0],6,-198630844),o=v(o,n,i,r,e[s+7],10,1126891415),r=v(r,o,n,i,e[s+14],15,-1416354905),i=v(i,r,o,n,e[s+5],21,-57434055),n=v(n,i,r,o,e[s+12],6,1700485571),o=v(o,n,i,r,e[s+3],10,-1894986606),r=v(r,o,n,i,e[s+10],15,-1051523),i=v(i,r,o,n,e[s+1],21,-2054922799),n=v(n,i,r,o,e[s+8],6,1873313359),o=v(o,n,i,r,e[s+15],10,-30611744),r=v(r,o,n,i,e[s+6],15,-1560198380),i=v(i,r,o,n,e[s+13],21,1309151649),n=v(n,i,r,o,e[s+4],6,-145523070),o=v(o,n,i,r,e[s+11],10,-1120210379),r=v(r,o,n,i,e[s+2],15,718787259),i=v(i,r,o,n,e[s+9],21,-343485551),n=y(n,a),i=y(i,c),r=y(r,l),o=y(o,d)}return Array(n,i,r,o)}function h(e,t,n,i,r,o){return y((t=y(y(t,e),y(i,o)))<<r|t>>>32-r,n)}function f(e,t,n,i,r,o,s){return h(t&n|~t&i,e,t,r,o,s)}function m(e,t,n,i,r,o,s){return h(t&i|n&~i,e,t,r,o,s)}function g(e,t,n,i,r,o,s){return h(t^n^i,e,t,r,o,s)}function v(e,t,n,i,r,o,s){return h(n^(t|~i),e,t,r,o,s)}function y(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}t.exports=function(e){return u.hash(e,p,16)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(e,t,n){(function(e,n,i,r,o,s,a,c,l){t.exports=function(e){for(var t,n=new Array(e),i=0;i<e;i++)0==(3&i)&&(t=4294967296*Math.random()),n[i]=t>>>((3&i)<<3)&255;return n}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(e,t,n){(function(n,i,r,o,s,a,c,l,d){var u=e("./helpers");function p(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var n,i,r,o=Array(80),s=1732584193,a=-271733879,c=-1732584194,l=271733878,d=-1009589776,u=0;u<e.length;u+=16){for(var p=s,m=a,g=c,v=l,y=d,b=0;b<80;b++){o[b]=b<16?e[u+b]:f(o[b-3]^o[b-8]^o[b-14]^o[b-16],1);var w=h(h(f(s,5),(w=a,i=c,r=l,(n=b)<20?w&i|~w&r:!(n<40)&&n<60?w&i|w&r|i&r:w^i^r)),h(h(d,o[b]),(n=b)<20?1518500249:n<40?1859775393:n<60?-1894007588:-899497514));d=l,l=c,c=f(a,30),a=s,s=w}s=h(s,p),a=h(a,m),c=h(c,g),l=h(l,v),d=h(d,y)}return Array(s,a,c,l,d)}function h(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function f(e,t){return e<<t|e>>>32-t}t.exports=function(e){return u.hash(e,p,20,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(e,t,n){(function(n,i,r,o,s,a,c,l,d){function u(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function p(e,t){var n,i=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),r=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),o=new Array(64);e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var s,a,c=0;c<e.length;c+=16){for(var l=r[0],d=r[1],p=r[2],h=r[3],g=r[4],v=r[5],y=r[6],b=r[7],w=0;w<64;w++)o[w]=w<16?e[w+c]:u(u(u((a=o[w-2],f(a,17)^f(a,19)^m(a,10)),o[w-7]),(a=o[w-15],f(a,7)^f(a,18)^m(a,3))),o[w-16]),n=u(u(u(u(b,f(a=g,6)^f(a,11)^f(a,25)),g&v^~g&y),i[w]),o[w]),s=u(f(s=l,2)^f(s,13)^f(s,22),l&d^l&p^d&p),b=y,y=v,v=g,g=u(h,n),h=p,p=d,d=l,l=u(n,s);r[0]=u(l,r[0]),r[1]=u(d,r[1]),r[2]=u(p,r[2]),r[3]=u(h,r[3]),r[4]=u(g,r[4]),r[5]=u(v,r[5]),r[6]=u(y,r[6]),r[7]=u(b,r[7])}return r}var h=e("./helpers"),f=function(e,t){return e>>>t|e<<32-t},m=function(e,t){return e>>>t};t.exports=function(e){return h.hash(e,p,32,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(e,t,n){(function(e,t,i,r,o,s,a,c,l){n.read=function(e,t,n,i,r){var o,s,a=8*r-i-1,c=(1<<a)-1,l=c>>1,d=-7,u=n?r-1:0,p=n?-1:1;for(r=e[t+u],u+=p,o=r&(1<<-d)-1,r>>=-d,d+=a;0<d;o=256*o+e[t+u],u+=p,d-=8);for(s=o&(1<<-d)-1,o>>=-d,d+=i;0<d;s=256*s+e[t+u],u+=p,d-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(r?-1:1);s+=Math.pow(2,i),o-=l}return(r?-1:1)*s*Math.pow(2,o-i)},n.write=function(e,t,n,i,r,o){var s,a,c=8*o-r-1,l=(1<<c)-1,d=l>>1,u=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,h=i?1:-1;for(o=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(i=Math.pow(2,-s))<1&&(s--,i*=2),2<=(t+=1<=s+d?u/i:u*Math.pow(2,1-d))*i&&(s++,i/=2),l<=s+d?(a=0,s=l):1<=s+d?(a=(t*i-1)*Math.pow(2,r),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));8<=r;e[n+p]=255&a,p+=h,a/=256,r-=8);for(s=s<<r|a,c+=r;0<c;e[n+p]=255&s,p+=h,s/=256,c-=8);e[n+p-h]|=128*o}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(e,t,n){(function(e,n,i,r,o,s,a,c,l){var d,u,p;function h(){}(e=t.exports={}).nextTick=(u="undefined"!=typeof window&&window.setImmediate,p="undefined"!=typeof window&&window.postMessage&&window.addEventListener,u?function(e){return window.setImmediate(e)}:p?(d=[],window.addEventListener("message",(function(e){var t=e.source;t!==window&&null!==t||"process-tick"!==e.data||(e.stopPropagation(),0<d.length&&d.shift()())}),!0),function(e){d.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=h,e.addListener=h,e.once=h,e.off=h,e.removeListener=h,e.removeAllListeners=h,e.emit=h,e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},470:e=>{"use strict";function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,i="",r=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(i.length<2||2!==r||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var c=i.lastIndexOf("/");if(c!==i.length-1){-1===c?(i="",r=0):r=(i=i.slice(0,c)).length-1-i.lastIndexOf("/"),o=a,s=0;continue}}else if(2===i.length||1===i.length){i="",r=0,o=a,s=0;continue}t&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+="/"+e.slice(o+1,a):i=e.slice(o+1,a),r=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return i}var i={resolve:function(){for(var e,i="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s;o>=0?s=arguments[o]:(void 0===e&&(e=process.cwd()),s=e),t(s),0!==s.length&&(i=s+"/"+i,r=47===s.charCodeAt(0))}return i=n(i,!r),r?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(e){if(t(e),0===e.length)return".";var i=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!i)).length||i||(e="."),e.length>0&&r&&(e+="/"),i?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];t(r),r.length>0&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":i.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=i.resolve(e))===(n=i.resolve(n)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var o=e.length,s=o-r,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var c=n.length-a,l=s<c?s:c,d=-1,u=0;u<=l;++u){if(u===l){if(c>l){if(47===n.charCodeAt(a+u))return n.slice(a+u+1);if(0===u)return n.slice(a+u)}else s>l&&(47===e.charCodeAt(r+u)?d=u:0===u&&(d=0));break}var p=e.charCodeAt(r+u);if(p!==n.charCodeAt(a+u))break;47===p&&(d=u)}var h="";for(u=r+d+1;u<=o;++u)u!==o&&47!==e.charCodeAt(u)||(0===h.length?h+="..":h+="/..");return h.length>0?h+n.slice(a+d):(a+=d,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),i=47===n,r=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(n=e.charCodeAt(s))){if(!o){r=s;break}}else o=!1;return-1===r?i?"/":".":i&&1===r?"//":e.slice(0,r)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var i,r=0,o=-1,s=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,c=-1;for(i=e.length-1;i>=0;--i){var l=e.charCodeAt(i);if(47===l){if(!s){r=i+1;break}}else-1===c&&(s=!1,c=i+1),a>=0&&(l===n.charCodeAt(a)?-1==--a&&(o=i):(a=-1,o=c))}return r===o?o=c:-1===o&&(o=e.length),e.slice(r,o)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!s){r=i+1;break}}else-1===o&&(s=!1,o=i+1);return-1===o?"":e.slice(r,o)},extname:function(e){t(e);for(var n=-1,i=0,r=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===r&&(o=!1,r=a+1),46===c?-1===n?n=a:1!==s&&(s=1):-1!==n&&(s=-1);else if(!o){i=a+1;break}}return-1===n||-1===r||0===s||1===s&&n===r-1&&n===i+1?"":e.slice(n,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+i:n+"/"+i:i}(0,e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var i,r=e.charCodeAt(0),o=47===r;o?(n.root="/",i=1):i=0;for(var s=-1,a=0,c=-1,l=!0,d=e.length-1,u=0;d>=i;--d)if(47!==(r=e.charCodeAt(d)))-1===c&&(l=!1,c=d+1),46===r?-1===s?s=d:1!==u&&(u=1):-1!==s&&(u=-1);else if(!l){a=d+1;break}return-1===s||-1===c||0===u||1===u&&s===c-1&&s===a+1?-1!==c&&(n.base=n.name=0===a&&o?e.slice(1,c):e.slice(a,c)):(0===a&&o?(n.name=e.slice(1,s),n.base=e.slice(1,c)):(n.name=e.slice(a,s),n.base=e.slice(a,c)),n.ext=e.slice(s,c)),a>0?n.dir=e.slice(0,a-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,e.exports=i}},i={};function r(e){var n=i[e];if(void 0!==n)return n.exports;var o=i[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";var e;r.r(o),r.d(o,{createConverter:()=>k,getConcatDocumentRoot:()=>_,isNotebookCell:()=>l}),e=(()=>{var e={470:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,i="",r=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(i.length<2||2!==r||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var c=i.lastIndexOf("/");if(c!==i.length-1){-1===c?(i="",r=0):r=(i=i.slice(0,c)).length-1-i.lastIndexOf("/"),o=a,s=0;continue}}else if(2===i.length||1===i.length){i="",r=0,o=a,s=0;continue}t&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+="/"+e.slice(o+1,a):i=e.slice(o+1,a),r=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return i}var i={resolve:function(){for(var e,i="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s;o>=0?s=arguments[o]:(void 0===e&&(e=process.cwd()),s=e),t(s),0!==s.length&&(i=s+"/"+i,r=47===s.charCodeAt(0))}return i=n(i,!r),r?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(e){if(t(e),0===e.length)return".";var i=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!i)).length||i||(e="."),e.length>0&&r&&(e+="/"),i?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];t(r),r.length>0&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":i.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=i.resolve(e))===(n=i.resolve(n)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var o=e.length,s=o-r,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var c=n.length-a,l=s<c?s:c,d=-1,u=0;u<=l;++u){if(u===l){if(c>l){if(47===n.charCodeAt(a+u))return n.slice(a+u+1);if(0===u)return n.slice(a+u)}else s>l&&(47===e.charCodeAt(r+u)?d=u:0===u&&(d=0));break}var p=e.charCodeAt(r+u);if(p!==n.charCodeAt(a+u))break;47===p&&(d=u)}var h="";for(u=r+d+1;u<=o;++u)u!==o&&47!==e.charCodeAt(u)||(0===h.length?h+="..":h+="/..");return h.length>0?h+n.slice(a+d):(a+=d,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),i=47===n,r=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(n=e.charCodeAt(s))){if(!o){r=s;break}}else o=!1;return-1===r?i?"/":".":i&&1===r?"//":e.slice(0,r)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var i,r=0,o=-1,s=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,c=-1;for(i=e.length-1;i>=0;--i){var l=e.charCodeAt(i);if(47===l){if(!s){r=i+1;break}}else-1===c&&(s=!1,c=i+1),a>=0&&(l===n.charCodeAt(a)?-1==--a&&(o=i):(a=-1,o=c))}return r===o?o=c:-1===o&&(o=e.length),e.slice(r,o)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!s){r=i+1;break}}else-1===o&&(s=!1,o=i+1);return-1===o?"":e.slice(r,o)},extname:function(e){t(e);for(var n=-1,i=0,r=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===r&&(o=!1,r=a+1),46===c?-1===n?n=a:1!==s&&(s=1):-1!==n&&(s=-1);else if(!o){i=a+1;break}}return-1===n||-1===r||0===s||1===s&&n===r-1&&n===i+1?"":e.slice(n,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+i:n+"/"+i:i}(0,e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var i,r=e.charCodeAt(0),o=47===r;o?(n.root="/",i=1):i=0;for(var s=-1,a=0,c=-1,l=!0,d=e.length-1,u=0;d>=i;--d)if(47!==(r=e.charCodeAt(d)))-1===c&&(l=!1,c=d+1),46===r?-1===s?s=d:1!==u&&(u=1):-1!==s&&(u=-1);else if(!l){a=d+1;break}return-1===s||-1===c||0===u||1===u&&s===c-1&&s===a+1?-1!==c&&(n.base=n.name=0===a&&o?e.slice(1,c):e.slice(a,c)):(0===a&&o?(n.name=e.slice(1,s),n.base=e.slice(1,c)):(n.name=e.slice(a,s),n.base=e.slice(a,c)),n.ext=e.slice(s,c)),a>0?n.dir=e.slice(0,a-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,e.exports=i},447:(e,t,n)=>{var i;if(n.r(t),n.d(t,{URI:()=>m,Utils:()=>x}),"object"==typeof process)i="win32"===process.platform;else if("object"==typeof navigator){var r=navigator.userAgent;i=r.indexOf("Windows")>=0}var o,s,a=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=/^\w[\w\d+.-]*$/,l=/^\//,d=/^\/\//;function u(e,t){if(!e.scheme&&t)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(e.authority,'", path: "').concat(e.path,'", query: "').concat(e.query,'", fragment: "').concat(e.fragment,'"}'));if(e.scheme&&!c.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!l.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(d.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}var p="",h="/",f=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,m=function(){function e(e,t,n,i,r,o){void 0===o&&(o=!1),"object"==typeof e?(this.scheme=e.scheme||p,this.authority=e.authority||p,this.path=e.path||p,this.query=e.query||p,this.fragment=e.fragment||p):(this.scheme=function(e,t){return e||t?e:"file"}(e,o),this.authority=t||p,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==h&&(t=h+t):t=h}return t}(this.scheme,n||p),this.query=i||p,this.fragment=r||p,u(this,o))}return e.isUri=function(t){return t instanceof e||!!t&&"string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme&&"string"==typeof t.fsPath&&"function"==typeof t.with&&"function"==typeof t.toString},Object.defineProperty(e.prototype,"fsPath",{get:function(){return _(this,!1)},enumerable:!1,configurable:!0}),e.prototype.with=function(e){if(!e)return this;var t=e.scheme,n=e.authority,i=e.path,r=e.query,o=e.fragment;return void 0===t?t=this.scheme:null===t&&(t=p),void 0===n?n=this.authority:null===n&&(n=p),void 0===i?i=this.path:null===i&&(i=p),void 0===r?r=this.query:null===r&&(r=p),void 0===o?o=this.fragment:null===o&&(o=p),t===this.scheme&&n===this.authority&&i===this.path&&r===this.query&&o===this.fragment?this:new v(t,n,i,r,o)},e.parse=function(e,t){void 0===t&&(t=!1);var n=f.exec(e);return n?new v(n[2]||p,E(n[4]||p),E(n[5]||p),E(n[7]||p),E(n[9]||p),t):new v(p,p,p,p,p)},e.file=function(e){var t=p;if(i&&(e=e.replace(/\\/g,h)),e[0]===h&&e[1]===h){var n=e.indexOf(h,2);-1===n?(t=e.substring(2),e=h):(t=e.substring(2,n),e=e.substring(n)||h)}return new v("file",t,e,p,p)},e.from=function(e){var t=new v(e.scheme,e.authority,e.path,e.query,e.fragment);return u(t,!0),t},e.prototype.toString=function(e){return void 0===e&&(e=!1),S(this,e)},e.prototype.toJSON=function(){return this},e.revive=function(t){if(t){if(t instanceof e)return t;var n=new v(t);return n._formatted=t.external,n._fsPath=t._sep===g?t.fsPath:null,n}return t},e}(),g=i?1:void 0,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._formatted=null,t._fsPath=null,t}return a(t,e),Object.defineProperty(t.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=_(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(e){return void 0===e&&(e=!1),e?S(this,!0):(this._formatted||(this._formatted=S(this,!1)),this._formatted)},t.prototype.toJSON=function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=g),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},t}(m),y=((s={})[58]="%3A",s[47]="%2F",s[63]="%3F",s[35]="%23",s[91]="%5B",s[93]="%5D",s[64]="%40",s[33]="%21",s[36]="%24",s[38]="%26",s[39]="%27",s[40]="%28",s[41]="%29",s[42]="%2A",s[43]="%2B",s[44]="%2C",s[59]="%3B",s[61]="%3D",s[32]="%20",s);function b(e,t){for(var n=void 0,i=-1,r=0;r<e.length;r++){var o=e.charCodeAt(r);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||45===o||46===o||95===o||126===o||t&&47===o)-1!==i&&(n+=encodeURIComponent(e.substring(i,r)),i=-1),void 0!==n&&(n+=e.charAt(r));else{void 0===n&&(n=e.substr(0,r));var s=y[o];void 0!==s?(-1!==i&&(n+=encodeURIComponent(e.substring(i,r)),i=-1),n+=s):-1===i&&(i=r)}}return-1!==i&&(n+=encodeURIComponent(e.substring(i))),void 0!==n?n:e}function w(e){for(var t=void 0,n=0;n<e.length;n++){var i=e.charCodeAt(n);35===i||63===i?(void 0===t&&(t=e.substr(0,n)),t+=y[i]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function _(e,t){var n;return n=e.authority&&e.path.length>1&&"file"===e.scheme?"//".concat(e.authority).concat(e.path):47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,i&&(n=n.replace(/\//g,"\\")),n}function S(e,t){var n=t?w:b,i="",r=e.scheme,o=e.authority,s=e.path,a=e.query,c=e.fragment;if(r&&(i+=r,i+=":"),(o||"file"===r)&&(i+=h,i+=h),o){var l=o.indexOf("@");if(-1!==l){var d=o.substr(0,l);o=o.substr(l+1),-1===(l=d.indexOf(":"))?i+=n(d,!1):(i+=n(d.substr(0,l),!1),i+=":",i+=n(d.substr(l+1),!1)),i+="@"}-1===(l=(o=o.toLowerCase()).indexOf(":"))?i+=n(o,!1):(i+=n(o.substr(0,l),!1),i+=o.substr(l))}if(s){if(s.length>=3&&47===s.charCodeAt(0)&&58===s.charCodeAt(2))(u=s.charCodeAt(1))>=65&&u<=90&&(s="/".concat(String.fromCharCode(u+32),":").concat(s.substr(3)));else if(s.length>=2&&58===s.charCodeAt(1)){var u;(u=s.charCodeAt(0))>=65&&u<=90&&(s="".concat(String.fromCharCode(u+32),":").concat(s.substr(2)))}i+=n(s,!0)}return a&&(i+="?",i+=n(a,!1)),c&&(i+="#",i+=t?c:b(c,!1)),i}function C(e){try{return decodeURIComponent(e)}catch(t){return e.length>3?e.substr(0,3)+C(e.substr(3)):e}}var k=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function E(e){return e.match(k)?e.replace(k,(function(e){return C(e)})):e}var x,T=n(470),P=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},I=T.posix||T;!function(e){e.joinPath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.with({path:I.join.apply(I,P([e.path],t,!1))})},e.resolvePath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=e.path||"/";return e.with({path:I.resolve.apply(I,P([i],t,!1))})},e.dirname=function(e){var t=I.dirname(e.path);return 1===t.length&&46===t.charCodeAt(0)?e:e.with({path:t})},e.basename=function(e){return I.basename(e.path)},e.extname=function(e){return I.extname(e.path)}}(x||(x={}))}},t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}return n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(447)})();const{URI:t,Utils:i}=e,s=n(40273),a="vscode-interactive-input",c="vscode-interactive";function l(e){return e.scheme.includes("vscode-notebook-cell")||e.scheme.includes(a)}function d(e){let t=e.split(/\r?\n/g);return t.slice(0,t.length-1)}var u=r(470),p=r(705);const h=function(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const n of"`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?")e.indexOf(n)>=0||(t+=`\\${n}`);return t+="\\s]+)",new RegExp(t,"g")}(),f=/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g;function m(e,t){return{start:e,end:t}}function g(e,t){return{line:e,character:t}}function v(e,t){return{uri:e,range:t}}class y{constructor(e,t,n,i){this.cellUri=e,this._contents=t,this._line=n,this._offset=i,this._range=m(g(n,0),g(n,t.length)),this._rangeWithLineBreak=m(this.range.start,g(n,t.length+1))}get offset(){return this._offset}get endOffset(){return this._offset+this._contents.length+1}get lineNumber(){return this._line}get text(){return this._contents}get range(){return this._range}get rangeIncludingLineBreak(){return this._rangeWithLineBreak}get firstNonWhitespaceCharacterIndex(){return void 0===this._firstNonWhitespaceIndex&&(this._firstNonWhitespaceIndex=this._contents.trimLeft().length-this._contents.length),this._firstNonWhitespaceIndex}get isEmptyOrWhitespace(){return void 0===this._isEmpty&&(this._isEmpty=0===this._contents.length||0===this._contents.trim().length),this._isEmpty}}const b="import IPython\nIPython.get_ipython()\n",w=[{regex:/(^\s*%.*)/},{regex:/(^\s*!.*)/},{regex:/(^\s*await\s+.*)/}];function _(e){return u.dirname(e.fsPath)}class S{constructor(e,t,n=!1){this.key=e,this.getNotebookHeader=t,this._disableTypeIgnore=n,this._interactiveWindow=!1,this._version=1,this._closed=!0,this._spans=[],this._lines=[],this._realLines=[]}get uri(){return this.concatUri}get fileName(){return this.uri.fsPath}get isUntitled(){return!0}get languageId(){return"python"}get version(){return this._version}get isDirty(){return!0}get isClosed(){return this._closed}get isOpen(){return!this.isClosed}get eol(){return 1}get notebook(){}get lineCount(){return this._lines.length}get concatUri(){return this._concatUri||t.parse("")}get notebookUri(){return this._notebookUri||t.parse("")}handleChange(e){this._version++;const t=[],n=this._spans.findIndex((t=>t.uri.toString()===e.textDocument.uri));if(n>=0)return e.contentChanges.forEach((i=>{try{const r=this._spans.filter((t=>t.uri.toString()===e.textDocument.uri)),o=this._lines.filter((t=>t.cellUri.toString()===e.textDocument.uri)),s=i.text.replace(/\r/g,""),a="range"in i?i.range:m(g(0,0),g(0,0)),c=this.getRealText(r[0].uri),l=this._realLines.filter((t=>t.cellUri.toString()===e.textDocument.uri)),d=l[0].offset,u=l[a.start.line].offset+a.start.character-d,p=l[a.end.line].offset+a.end.character-d,h=`${c.slice(0,u)}${s}${c.slice(p)}`,f=this.createSpans(r[0].uri,h,r[0].startOffset,r[0].realOffset),v=f.map((e=>e.text)).join(""),y=r.find((e=>!e.inRealCell&&!e.text.endsWith("\n"))),b=f.find((e=>!e.inRealCell&&!e.text.endsWith("\n")));if(y||b||f.length!=r.length){const e=o[0].range.start,n={line:o.length+o[0].range.start.line,character:0};t.push({text:v,range:this.createSerializableRange(e,n),rangeLength:o[o.length-1].endOffset+1-o[0].offset})}else{const e=this.mapRealToConcatOffset(u+d),n=this.mapRealToConcatOffset(p+d),i=o.find((t=>e>=t.offset&&e<t.endOffset)),r=o.find((e=>n>=e.offset&&n<e.endOffset)),c=g((null==i?void 0:i.lineNumber)||a.start.line,a.start.character),l=g((null==r?void 0:r.lineNumber)||a.end.line,a.end.character);t.push({text:s,range:this.createSerializableRange(c,l),rangeLength:n-e})}const w=f[f.length-1].endOffset-r[r.length-1].endOffset,_=f[f.length-1].realEndOffset-r[r.length-1].realEndOffset;this._spans.splice(n,r.length,...f);for(let e=n+f.length;e<this._spans.length;e++)this._spans[e].startOffset+=w,this._spans[e].endOffset+=w,this._spans[e].realOffset+=_,this._spans[e].realEndOffset+=_;this.computeLines()}catch(e){console.log(`Concat document failure : ${e}`)}})),this.toDidChangeTextDocumentParams(t)}handleOpen(e,n){const i=t.parse(e.textDocument.uri);if(this._spans.find((t=>{var n;return(null===(n=t.uri)||void 0===n?void 0:n.toString())==e.textDocument.uri})))return;this._version=Math.max(e.textDocument.version,this._version+1),this._closed=!1,this.initialize(i);const r=`${e.textDocument.text.replace(/\r/g,"")}\n`,o=i.scheme===a?"":i.fragment,s=n?this._spans.length:this.computeInsertionIndex(o),c=s<this._spans.length&&s>=0?this._spans[s].startOffset:this.getEndOffset(),l=s<this._spans.length&&s>=0?this._spans[s].realOffset:this.getRealEndOffset(),d=s<this._spans.length&&s>=0?this._lines.find((e=>e.offset==c)).range.start:g(this._lines.length,0),u=this.createSpans(i,r,c,l),p=u[u.length-1].endOffset-c,h=u[u.length-1].realEndOffset-l;for(let e=s;e<=this._spans.length-1;e+=1)this._spans[e].startOffset+=p,this._spans[e].endOffset+=p,this._spans[e].realOffset+=h,this._spans[e].realEndOffset+=h;this._spans.splice(s,0,...u),this.computeLines();const f=[{range:this.createSerializableRange(d,d),rangeOffset:c,rangeLength:0,text:u.map((e=>e.text)).join("")}];return this.toDidChangeTextDocumentParams(f)}handleClose(e){const n=this._spans.findIndex((t=>t.uri.toString()===e.textDocument.uri)),i=function(t,n){for(let n=t.length-1;n>=0;n--)if(t[n].uri.toString()===e.textDocument.uri)return n;return-1}(this._spans);if(this.initialize(t.parse(e.textDocument.uri)),n>=0&&i>=0&&!this._interactiveWindow){this._version+=1;const t=this._spans[n].startOffset,r=this._spans[i].endOffset,o=this._lines.find((e=>e.offset==t)).range.start,s=this._lines.find((e=>e.endOffset==r)).range.end,a=r-t;this._spans=this._spans.filter((t=>t.uri.toString()!==e.textDocument.uri));for(let e=n;e<this._spans.length;e++)this._spans[e].startOffset-=a,this._spans[e].endOffset-=a;this.computeLines();const c=[{range:this.createSerializableRange(o,s),rangeOffset:t,rangeLength:a,text:""}];return 0==this._spans.length&&(this._closed=!0),this.toDidChangeTextDocumentParams(c)}e.textDocument.uri.includes(a)&&(this._closed=!0,this._spans=[],this._lines=[],this._realLines=[])}handleRefresh(e){if(!this._interactiveWindow){const t=g(0,0),n=this._lines.length>0?this._lines[this._lines.length-1].rangeIncludingLineBreak.end:t,i=this.getEndOffset(),r=this.getRealText();if(`${e.cells.map((e=>e.textDocument.text.replace(/\r/g,""))).join("\n")}\n`!=r){this._version++,this._closed=!1,this._spans=[],this._lines=[],this._realLines=[],this._concatUri=void 0,e.cells.forEach((e=>{this.handleOpen({textDocument:e.textDocument},!0)}));const r=[{range:this.createSerializableRange(t,n),rangeOffset:0,rangeLength:i,text:this.getContents()}];return this.toDidChangeTextDocumentParams(r)}}}dispose(){}contains(e){return void 0!==this._spans.find((t=>t.uri.toString()===e.toString()))}save(){return Promise.resolve(!1)}lineAt(e){return"number"==typeof e?this._lines[e]:this._lines[e.line]}offsetAt(e){throw new Error("offsetAt should not be used on concat document. Use a more specific offset computation")}positionAt(e){throw new Error("positionAt should not be used on concat document. Use a more specific position computation")}getText(e){const t=this.getContents();if(e){const n=this._lines[e.start.line].offset+e.start.character,i=this._lines[e.end.line].offset+e.end.character;return t.substring(n,i-n)}return t}concatPositionAt(e){const t=this._realLines.find((t=>t.cellUri.toString()===e.uri.toString()));if(t){const n=this._realLines[e.range.start.line+t.lineNumber],i=this.mapRealToConcatOffset(n.offset+e.range.start.character),r=this._lines.find((e=>i>=e.offset&&i<e.endOffset));if(r)return g(r.lineNumber,i-r.offset)}return g(0,0)}concatOffsetAt(e){const t=this._realLines.find((t=>t.cellUri.toString()===e.uri.toString()));if(t){const n=this._realLines[e.range.start.line+t.lineNumber];return this.mapRealToConcatOffset(n.offset+e.range.start.character)}return 0}concatRangeOf(e){const t=this._lines.filter((t=>t.cellUri.toString()===e.toString())),n=t[0],i=t[t.length-1];return n&&i?m(n.range.start,i.rangeIncludingLineBreak.end):m(g(0,0),g(0,0))}realRangeOf(e){const t=this._spans.filter((t=>t.uri.toString()==e.toString()&&t.inRealCell)),n=t[0].startOffset||0,i=t.length>0?t[t.length-1].endOffset:n,r=this._lines.find((e=>n>=e.offset&&n<e.endOffset)),o=this._lines.find((e=>i>=e.offset&&i<=e.endOffset));return r&&o?m(r.range.start,o.rangeIncludingLineBreak.end):m(g(0,0),g(0,0))}getCells(){return[...new Set(this._spans.map((e=>e.uri)))]}notebookLocationAt(e){const t="line"in e?m(e,e):e;let n=this._lines[t.start.line],i=this._lines[t.end.line];if(n&&i){let e=n.offset+t.start.character,r=i.offset+t.end.character;const o=this._spans.filter((t=>t.inRealCell&&(e>=t.startOffset&&e<t.endOffset||r>=t.startOffset&&r<=t.endOffset)));if(e=o.length>0?Math.max(e,o[0].startOffset):-1,n=this._lines.find((t=>e>=t.offset&&e<t.endOffset)),n)return{uri:n.cellUri.toString(),range:m(this.notebookPositionAt(g(n.lineNumber,e-n.offset)),this.notebookPositionAt(t.end))}}return{uri:"",range:t}}notebookPositionAt(e){const t=this._lines[e.line].offset,n=this.mapConcatToClosestRealOffset(t),i=this._realLines.find((e=>n>=e.offset&&n<e.endOffset)),r=this._realLines.find((e=>e.cellUri.toString()===(null==i?void 0:i.cellUri.toString())));return g(r&&i?i.lineNumber-r.lineNumber:0,this.mapConcatToClosestRealOffset(t+e.character)-((null==i?void 0:i.offset)||0))}notebookOffsetAt(e,t){const n=this.mapConcatToClosestRealOffset(t),i=this._spans.find((t=>t.uri.toString()===e.toString()));return i?n-i.realOffset:n}getWordRangeAtPosition(e,t){t?function(e){return"^"!==e.source&&"^$"!==e.source&&"$"!==e.source&&"^\\s*$"!==e.source&&!(!e.exec("")||0!==e.lastIndex)}(t)&&(console.warn(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`),t=f):t=f;const n=function(e,t,n,i){t.lastIndex=0;const r=t.exec(n);if(!r)return null;const o=r[0].indexOf(" ")>=0?function(e,t,n,i){const r=e-1-0;t.lastIndex=0;let o=t.exec(n);for(;o;){const e=o.index||0;if(e>r)return null;if(t.lastIndex>=r)return{word:o[0],startColumn:1+e,endColumn:1+t.lastIndex};o=t.exec(n)}return null}(e,t,n):function(e,t,n,i){const r=e-1-0,o=n.lastIndexOf(" ",r-1)+1;t.lastIndex=o;let s=t.exec(n);for(;s;){const e=s.index||0;if(e<=r&&t.lastIndex>=r)return{word:s[0],startColumn:1+e,endColumn:1+t.lastIndex};s=t.exec(n)}return null}(e,t,n);return t.lastIndex=0,o}(e.character+1,function(e){let t=h;if(e&&e instanceof RegExp)if(e.global)t=e;else{let n="g";e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.unicode&&(n+="u"),t=new RegExp(e.source,n)}return t.lastIndex=0,t}(t),this._lines[e.line].text);if(n)return m(g(e.line,n.startColumn-1),g(e.line,n.endColumn-1))}validateRange(e){return e}validatePosition(e){return e}get textDocumentItem(){return{uri:this.concatUri.toString(),languageId:this.languageId,version:this.version,text:this.getText()}}get textDocumentId(){return{uri:this.concatUri.toString(),version:this.version}}getContents(){return this._spans.map((e=>e.text)).join("")}toDidChangeTextDocumentParams(e){return{textDocument:{version:this.version,uri:this.concatUri.toString()},contentChanges:e}}mapRealToConcatOffset(e){const t=this._spans.find((t=>t.inRealCell&&e>=t.realOffset&&e<t.realEndOffset));return t?e-t.realOffset+t.startOffset:e}mapConcatToClosestRealOffset(e){const t=this._spans.find((t=>e>=t.startOffset&&e<t.endOffset));if(t){const n=e-t.startOffset;return t.inRealCell?n+t.realOffset:t.realOffset}return e}createSpan(e,t,n,i,r){return{fragment:e.scheme===a?"":e.fragment,uri:e,inRealCell:!0,startOffset:i,endOffset:i+t.length,realOffset:r,realEndOffset:r+n.length,text:t,realText:n}}createTypeIgnoreSpan(e,t,n){return{fragment:e.scheme===a?"":e.fragment,uri:e,inRealCell:!1,startOffset:t,endOffset:t+15,realOffset:n,realEndOffset:n,text:" # type: ignore",realText:""}}createHeaderSpans(e){let t=this.getNotebookHeader(e);return t.length?(t.endsWith("\n")||(t=`${t}\n`),[{fragment:"",uri:e,inRealCell:!1,startOffset:0,endOffset:37+t.length,realOffset:0,realEndOffset:0,text:`${b}${t}`,realText:""}]):[{fragment:"",uri:e,inRealCell:!1,startOffset:0,endOffset:37,realOffset:0,realEndOffset:0,text:b,realText:""}]}createSpans(e,t,n,i){const r=d(t);let o=[];0!=n||e.scheme.includes(a)||(o=this.createHeaderSpans(e),n=o[o.length-1].endOffset);let s=i,c=0,l=0;return r.forEach((i=>{!this._disableTypeIgnore&&w.find((e=>e.regex.test(i)))?(o.push(this.createSpan(e,t.substring(c,l+i.length),t.substring(c,l+i.length),n,c+s)),n=o[o.length-1].endOffset,l+=i.length,c=l,o.push(this.createTypeIgnoreSpan(e,n,c+s)),n=o[o.length-1].endOffset,l+=1):l+=i.length+1})),c<t.length&&o.push(this.createSpan(e,t.substring(c),t.substring(c),n,s+c)),o}getRealText(e){return e?this._spans.filter((t=>t.inRealCell&&t.uri.toString()===e.toString())).map((e=>e.realText)).join(""):this._spans.filter((e=>e.inRealCell)).map((e=>e.realText)).join("")}createTextLines(e,t,n){return d(t).map((t=>{const i=this.createTextLine(e,t,n);return n=i,i}))}computeLinesUsingFunc(e,t){const n=[];let i;return e.forEach((e=>{const r=this._spans.filter((t=>t.uri.toString()==e.toString())).map(t).join("");n.push(...this.createTextLines(e,r,i)),i=n[n.length-1]})),n}computeLines(){const e=this.getCells();this._lines=this.computeLinesUsingFunc(e,(e=>e.text)),this._realLines=this.computeLinesUsingFunc(e,(e=>e.realText))}createTextLine(e,t,n){return new y(e,t,n?n.lineNumber+1:0,n?n.offset+n.rangeIncludingLineBreak.end.character:0)}getEndOffset(){return this._spans.length>0?this._spans[this._spans.length-1].endOffset:0}getRealEndOffset(){return this._spans.length>0?this._spans[this._spans.length-1].realEndOffset:0}createSerializableRange(e,t){return{start:{line:e.line,character:e.character},end:{line:t.line,character:t.character}}}computeInsertionIndex(e){var t,n;const i=(null===(n=null===(t=this._spans[this._spans.length-1])||void 0===t?void 0:t.uri)||void 0===n?void 0:n.scheme)===a?this._spans.length-1:this._spans.length,r=""===e?this._spans.length:this._spans.findIndex((t=>t.fragment>e));return r<0?i:r}initialize(e){var n;if(!(null===(n=this._concatUri)||void 0===n?void 0:n.fsPath)){this._interactiveWindow=function(e){return e.fragment.includes(c)||e.scheme.includes(a)||e.scheme.includes(c)}(e);const n=_(e),i=u.join(n,`_NotebookConcat_${p.sha1(e.fsPath).substring(0,12)}.py`);this._concatUri=t.file(i),this._notebookUri=this._interactiveWindow?e.with({scheme:c,path:e.fsPath,fragment:""}):e.fragment.includes("untitled")?e.with({scheme:"untitled",path:e.fsPath,fragment:"",query:""}):t.file(e.fsPath)}}}class C{constructor(e,t,n=!1){this.getNotebookHeader=e,this.platformGetter=t,this.disableTypeIgnore=n,this.activeConcats=new Map,this.activeConcatsOutgoingMap=new Map,this.disposables=[],this.mapOfConcatDocumentsWithCellUris=new Map}getDocumentKey(e){if(e.scheme===a){const t=/InteractiveInput-(\d+)/.exec(e.path);if(t&&t[1])return`interactive-${t[1]}.interactive`}return e.scheme===c?e.path.toLowerCase():"win32"===this.platformGetter()?e.fsPath.toLowerCase():e.fsPath}dispose(){this.disposables.forEach((e=>e.dispose()))}hasCell(e){return this.getConcatDocument(e).contains(e.uri)}isOpen(e){const t=this.toURI(e),n=this.getDocumentKey(t),i=this.activeConcats.get(n);return!!i&&i.isOpen}handleOpen(e){const t=this.getConcatDocument(e.textDocument),n=null==t?void 0:t.handleOpen(e);return this.activeConcatsOutgoingMap.set(this.getDocumentKey(t.concatUri),t),n}handleRefresh(e){const t=e.cells.length?this.getConcatDocument(e.cells[0].textDocument):void 0;return null==t?void 0:t.handleRefresh(e)}handleClose(e){return this.getConcatDocument(e.textDocument.uri).handleClose(e)}handleChange(e){return this.getConcatDocument(e.textDocument.uri).handleChange(e)}toNotebookDiagnosticsMap(e,n){const i=this.getConcatDocumentForUri(e),r=new Map;if(i){const o=[],s=this.mapOfConcatDocumentsWithCellUris.get(e.toString())||[];i.getCells().forEach((e=>{r.set(e.toString(),[]),o.push(e.toString())}));const a=new Set(o);s.filter((e=>!a.has(e))).forEach((e=>r.set(e,[]))),this.mapOfConcatDocumentsWithCellUris.set(e.toString(),o),n.forEach((e=>{const n=i.notebookLocationAt(e.range);if(t.parse(n.uri).fragment){let t=r.get(n.uri);t||(t=[],r.set(n.uri,t)),t.push(this.toNotebookDiagnostic(n.uri,e))}}))}else this.mapOfConcatDocumentsWithCellUris.has(e.toString())?((this.mapOfConcatDocumentsWithCellUris.get(e.toString())||[]).forEach((e=>r.set(e,[]))),this.mapOfConcatDocumentsWithCellUris.delete(e.toString())):r.set(this.toURI(e).toString(),n);return r}toNotebookWorkspaceSymbols(e){return Array.isArray(e)?e.map(this.toNotebookWorkspaceSymbol.bind(this)):null!=e?e:void 0}toNotebookWorkspaceEdit(e){if(e){const t=new Map;(e.changes?Object.keys(e.changes):[]).forEach((n=>{e.changes[n].forEach((e=>{const i=this.toNotebookLocationFromRange(n,e.range);let r=t.get(i.uri);r||(r=[],t.set(i.uri,r)),r.push({...e,range:i.range})}))}));const n={changes:{}};return t.forEach(((e,t)=>n.changes[t]=e)),n}return null!=e?e:void 0}toConcatDocument(e){const t=this.getConcatDocument(e);return{text:t.getText(),uri:t.uri.toString(),languageId:t.languageId,version:t.version}}toConcatTextDocument(e){return this.getConcatDocument(e)}toConcatUri(e){return this.getConcatDocument(e).concatUri.toString()}toConcatPosition(e,t){return this.getConcatDocument(e).concatPositionAt(v(e.uri,m(t,t)))}toConcatPositions(e,t){return t.map((t=>this.toConcatPosition(e,t)))}toConcatRange(e,t){const n=this.getConcatDocument(e),i=this.toURI(e);return n.concatRangeOf(i)||t||m(g(0,0),g(0,0))}toRealRange(e,t){const n=this.getConcatDocument(e),i=this.toURI(e);return n.realRangeOf(i)||t||m(g(0,0),g(0,0))}toConcatContext(e,t){return{...t,diagnostics:t.diagnostics.map(this.toConcatDiagnostic.bind(this,e))}}toNotebookHover(e,t){return t&&t.range?{...t,range:this.toNotebookRange(e,t.range)}:null!=t?t:void 0}toNotebookCompletions(e,t){return t?Array.isArray(t)?t.map(this.toNotebookCompletion.bind(this,e)):{...t,items:t.items.map(this.toNotebookCompletion.bind(this,e))}:t}toNotebookLocations(e){return Array.isArray(e)?e.map(this.toNotebookLocationOrLink.bind(this)):(null==e?void 0:e.range)?this.toNotebookRange(e.uri,e.range):e}toNotebookHighlight(e,t){if(!t)return;const n=this.getConcatDocument(e),i=[];for(let r of t){const t=n.notebookLocationAt(r.range);t.uri.toString()===e.uri.toString()&&i.push({...r,range:t.range})}return i}toNotebookSymbols(e,t){return t&&Array.isArray(t)&&t.length?"kind"in t[0]?t.map(this.toNotebookSymbolFromSymbolInformation.bind(this,e.uri)):t.map(this.toNotebookSymbolFromDocumentSymbol.bind(this,e)):null!=t?t:void 0}toNotebookSymbolFromSymbolInformation(e,t){return{...t,location:"range"in t.location?this.toNotebookLocationFromRange(e,t.location.range):{uri:this.toNotebookUri(t.location.uri)}}}toNotebookDiagnostic(e,t){return{...t,range:this.toNotebookRange(e,t.range),relatedInformation:t.relatedInformation?t.relatedInformation.map(this.toNotebookRelatedInformation.bind(this,e)):void 0}}toNotebookActions(e,t){if(!Array.isArray(t))return null!=t?t:void 0}toNotebookCodeLenses(e,t){return Array.isArray(t)?t.map((t=>({...t,range:this.toNotebookRange(e,t.range)}))):null!=t?t:void 0}toNotebookEdits(e,t){return Array.isArray(t)?t.map((t=>({...t,range:this.toNotebookRange(e,t.range)}))):null!=t?t:void 0}toNotebookRename(e,t){return t?"range"in t?{...t,range:this.toNotebookRange(e,t.range)}:this.toNotebookRange(e,t):null!=t?t:void 0}toNotebookDocumentLinks(e,t){return t&&Array.isArray(t)?t.map((t=>{const n=t.target?t.target:e.uri,i=this.toNotebookLocationFromRange(n,t.range);return{...t,range:i.range,target:t.target?i.uri:void 0}})):null!=t?t:void 0}toNotebookRange(e,t){const n=this.getConcatDocumentForUri(e);if(n){const e=n.notebookLocationAt(t.start),i=n.notebookLocationAt(t.end);return m(e.range.start,i.range.end)}return t}toNotebookPosition(e,t){return this.toNotebookRange(e,m(t,t)).start}toNotebookOffset(e,t){const n=this.toURI(e);return this.getConcatDocument(e).notebookOffsetAt(n,t)}toNotebookUri(e,t){const n=this.getConcatDocumentForUri(e);let i;return n&&(i=t?n.notebookLocationAt(t).uri:n.notebookUri.toString()),i||e}toNotebookColorInformations(e,n){if(Array.isArray(n)){const i=this.toURI(e);return n.map((t=>({color:t.color,location:this.toNotebookLocationFromRange(e,t.range)}))).filter((e=>t.parse(e.location.uri).fragment==i.fragment)).map((e=>({color:e.color,range:e.location.range})))}}toNotebookColorPresentations(e,t){if(Array.isArray(t))return t.map((t=>({...t,additionalTextEdits:t.additionalTextEdits?this.toNotebookTextEdits(e,t.additionalTextEdits):void 0,textEdit:t.textEdit?this.toNotebookTextEdit(e,t.textEdit):void 0})))}toNotebookTextEdits(e,t){if(Array.isArray(t))return t.map((t=>this.toNotebookTextEdit(e,t)))}toNotebookTextEdit(e,t){return{...t,range:this.toNotebookRange(e,t.range)}}toNotebookFoldingRanges(e,t){if(Array.isArray(t)){const n=this.toURI(e);return t.map((t=>this.toNotebookLocationFromRange(e,m(g(t.startLine,0),g(t.endLine,0))))).filter((e=>e.uri==n.toString())).map((e=>({startLine:e.range.start.line,endLine:e.range.end.line})))}}toNotebookSelectionRanges(e,t){if(Array.isArray(t))return t.map((t=>this.toNotebookSelectionRange(e,t)))}toNotebookSelectionRange(e,t){return{parent:t.parent?this.toNotebookSelectionRange(e,t.parent):void 0,range:this.toNotebookRange(e,t.range)}}toNotebookCallHierarchyItems(e,t){return Array.isArray(t)?t.map((t=>this.toNotebookCallHierarchyItem(e,t))):t?[this.toNotebookCallHierarchyItem(e,t)]:null}toNotebookCallHierarchyItem(e,t){return{...t,uri:this.toURI(e).toString(),range:this.toNotebookRange(e,t.range),selectionRange:this.toNotebookRange(e,t.selectionRange)}}toNotebookCallHierarchyIncomingCallItems(e,t){return Array.isArray(t)?t.map((t=>this.toNotebookCallHierarchyIncomingCallItem(e,t))):null}toNotebookCallHierarchyIncomingCallItem(e,t){return{from:this.toNotebookCallHierarchyItem(e,t.from),fromRanges:t.fromRanges.map((t=>this.toNotebookRange(e,t)))}}toNotebookCallHierarchyOutgoingCallItems(e,t){return Array.isArray(t)?t.map((t=>this.toNotebookCallHierarchyOutgoingCallItem(e,t))):null}toNotebookCallHierarchyOutgoingCallItem(e,t){return{to:this.toNotebookCallHierarchyItem(e,t.to),fromRanges:t.fromRanges.map((t=>this.toNotebookRange(e,t)))}}toNotebookSemanticEdit(e,t){return{...t,start:this.toNotebookOffset(e,t.start)}}toNotebookSemanticTokens(e,t){if(t){const n=this.getConcatDocument(e),i=this.toURI(e);if(n&&t.data.length>0){const e=n.concatPositionAt(v(i.toString(),m(g(0,0),g(0,0))));return t.data[0]=t.data[0]-e.line,t}}}toNotebookLinkedEditingRanges(e,t){if(t)return{...t,ranges:t.ranges.map((t=>this.toNotebookRange(e,t)))}}remove(e){const t=this.toURI(e),n=this.getDocumentKey(t),i=this.activeConcats.get(n);i&&this.deleteConcatDocument(i)}toURI(e){return t.isUri(e)?e:"string"==typeof e?t.parse(e):t.parse(e.uri)}toNotebookWorkspaceSymbol(e){return this.toNotebookSymbolFromSymbolInformation(e.location.uri,e)}toConcatDiagnostic(e,t){return{...t,range:this.toConcatRange(e,t.range),relatedInformation:t.relatedInformation?t.relatedInformation.map(this.toConcatRelatedInformation.bind(this,e)):void 0}}toConcatRelatedInformation(e,t){const n=this.toConcatDocument(e);return{...t,location:t.location.uri===n.uri?this.toConcatLocation(e,t.location):t.location}}toConcatLocation(e,t){return{uri:this.toConcatDocument(e).uri,range:this.toConcatRange(e,t.range)}}toNotebookRelatedInformation(e,t){const n=this.toConcatUri(e);return{...t,location:t.location.uri===n?this.toNotebookLocationFromLocation(t.location):t.location}}toNotebookSymbolFromDocumentSymbol(e,t){return t.children?{...t,range:this.toNotebookRange(e,t.range),selectionRange:this.toNotebookRange(e,t.selectionRange),children:t.children.map(this.toNotebookSymbolFromDocumentSymbol.bind(this,e))}:{...t,range:this.toNotebookRange(e,t.range),selectionRange:this.toNotebookRange(e,t.selectionRange)}}toNotebookLocationFromLocation(e){const t=this.toNotebookUri(e.uri,e.range);return{uri:t,range:this.toNotebookRange(t,e.range)}}toNotebookLocationLinkFromLocationLink(e){const t=this.toNotebookUri(e.targetUri,e.targetRange);return{originSelectionRange:e.originSelectionRange?this.toNotebookRange(t,e.originSelectionRange):void 0,targetUri:t,targetRange:this.toNotebookRange(t,e.targetRange),targetSelectionRange:this.toNotebookRange(t,e.targetSelectionRange)}}toNotebookLocationOrLink(e){return"targetUri"in e?this.toNotebookLocationLinkFromLocationLink(e):this.toNotebookLocationFromLocation(e)}toNotebookCompletion(e,t){const n=t;return n.range?n.range.inserting?{...t,range:{inserting:this.toNotebookRange(e,n.range.inserting),replacing:this.toNotebookRange(e,n.range.replacing)}}:{...t,range:this.toNotebookRange(e,n.range)}:t}toNotebookLocationFromRange(e,t){const n=this.getConcatDocumentForUri(e);if(n){const e=n.notebookLocationAt(t.start),i=n.notebookLocationAt(t.end);return{uri:e.uri,range:m(e.range.start,i.range.end)}}return{uri:s.TextDocumentIdentifier.is(e)?e.uri:e,range:t}}deleteConcatDocument(e){this.activeConcatsOutgoingMap.delete(this.getDocumentKey(e.concatUri)),this.activeConcats.delete(e.key),e.dispose()}getConcatDocumentForUri(e){const t=this.toURI(e);return l(t)?this.getConcatDocument(t):this.getConcatFromOutgoingUri(t)}getConcatFromOutgoingUri(e){const t=this.toURI(e);return this.activeConcatsOutgoingMap.get(this.getDocumentKey(t))}getConcatDocument(e){const t=this.toURI(e),n=this.getDocumentKey(t);let i=this.activeConcats.get(n);return i||(i=new S(n,this.getNotebookHeader,this.disableTypeIgnore),this.activeConcats.set(n,i)),i}}function k(e,t,n=!1){return new C(e,t,n)}})(),e.exports=o})()},88054:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const r=n(82361),o=i(n(15158)),s=i(n(96304)),a=o.default("agent-base");function c(){const{stack:e}=new Error;return"string"==typeof e&&e.split("\n").some((e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:")))}function l(e,t){return new l.Agent(e,t)}!function(e){class t extends r.EventEmitter{constructor(e,t){super();let n=t;"function"==typeof e?this.callback=e:e&&(n=e),this.timeout=null,n&&"number"==typeof n.timeout&&(this.timeout=n.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:c()?443:80}set defaultPort(e){this.explicitDefaultPort=e}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:c()?"https:":"http:"}set protocol(e){this.explicitProtocol=e}callback(e,t,n){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(e,t){const n=Object.assign({},t);"boolean"!=typeof n.secureEndpoint&&(n.secureEndpoint=c()),null==n.host&&(n.host="localhost"),null==n.port&&(n.port=n.secureEndpoint?443:80),null==n.protocol&&(n.protocol=n.secureEndpoint?"https:":"http:"),n.host&&n.path&&delete n.path,delete n.agent,delete n.hostname,delete n._defaultAgent,delete n.defaultPort,delete n.createConnection,e._last=!0,e.shouldKeepAlive=!1;let i=!1,r=null;const o=n.timeout||this.timeout,l=t=>{e._hadError||(e.emit("error",t),e._hadError=!0)},d=()=>{r=null,i=!0;const e=new Error(`A "socket" was not created for HTTP request before ${o}ms`);e.code="ETIMEOUT",l(e)},u=e=>{i||(null!==r&&(clearTimeout(r),r=null),l(e))},p=t=>{if(i)return;if(null!=r&&(clearTimeout(r),r=null),o=t,Boolean(o)&&"function"==typeof o.addRequest)return a("Callback returned another Agent instance %o",t.constructor.name),void t.addRequest(e,n);var o;if(t)return t.once("free",(()=>{this.freeSocket(t,n)})),void e.onSocket(t);const s=new Error(`no Duplex stream was returned to agent-base for \`${e.method} ${e.path}\``);l(s)};if("function"==typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?(a("Converting legacy callback function to promise"),this.promisifiedCallback=s.default(this.callback)):this.promisifiedCallback=this.callback),"number"==typeof o&&o>0&&(r=setTimeout(d,o)),"port"in n&&"number"!=typeof n.port&&(n.port=Number(n.port));try{a("Resolving socket for %o request: %o",n.protocol,`${e.method} ${e.path}`),Promise.resolve(this.promisifiedCallback(e,n)).then(p,u)}catch(e){Promise.reject(e).catch(u)}}else l(new Error("`callback` is not defined"))}freeSocket(e,t){a("Freeing socket %o %o",e.constructor.name,t),e.destroy()}destroy(){a("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype}(l||(l={})),e.exports=l},96304:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){return new Promise(((i,r)=>{e.call(this,t,n,((e,t)=>{e?r(e):i(t)}))}))}}},14277:e=>{"use strict";e.exports=({onlyFirst:e=!1}={})=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}},20699:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncScopeManager=t.OpenTelemetryScopeManagerWrapper=void 0;var r=n(70894),o=n(82361),s=function(){function e(){}return e.prototype.active=function(){var e=this,t=r.CorrelationContextManager.getCurrentContext();return i(i({},t),{getValue:function(n){return e._activeSymbol?n===e._activeSymbol&&t:(e._activeSymbol=n,t)},setValue:function(){}})},e.prototype.with=function(t,n){var i=t.parentSpanId,o=t.name,s=e._spanToContext(t,i,o);return r.CorrelationContextManager.runWithContext(s,n)()},e.prototype.bind=function(e){return"function"==typeof e?r.CorrelationContextManager.wrapCallback(e):(e instanceof o.EventEmitter&&r.CorrelationContextManager.wrapEmitter(e),e)},e.prototype.enable=function(){return r.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return r.CorrelationContextManager.disable(),this},e._spanToContext=function(e,t,n){var o=e.spanContext?e.spanContext():e.context(),s=i(i({},e.spanContext()),{traceFlags:e.spanContext().traceFlags}),a=t?"|"+o.traceId+"."+t+".":o.traceId,c=r.CorrelationContextManager.getCurrentContext();return c&&(s.traceId=c.operation.id,t||(a=c.operation.parentId)),r.CorrelationContextManager.spanToContextObject(s,a,n)},e}();t.OpenTelemetryScopeManagerWrapper=s,t.AsyncScopeManager=new s},81162:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.AzureFunctionsHook=void 0;var o=n(95282),s=n(70894),a=function(){function e(e){this._client=e,this._autoGenerateIncomingRequests=!1;try{this._functionsCoreModule=n(19605);var t=this._functionsCoreModule.getProgrammingModel();"@azure/functions"===t.name&&t.version.startsWith("3.")?(this._addPreInvocationHook(),this._addPostInvocationHook()):o.warn('AzureFunctionsHook does not support model "'+t.name+'" version "'+t.version+'"')}catch(e){o.info("AzureFunctionsHook failed to load, not running in Azure Functions")}}return e.prototype.enable=function(e){this._autoGenerateIncomingRequests=e},e.prototype.dispose=function(){this.enable(!1),this._removeInvocationHooks(),this._functionsCoreModule=void 0},e.prototype._addPreInvocationHook=function(){var e=this;this._preInvocationHook||(this._preInvocationHook=this._functionsCoreModule.registerHook("preInvocation",(function(t){return i(e,void 0,void 0,(function(){var e,n;return r(this,(function(i){e=t.invocationContext;try{(n=s.CorrelationContextManager.startOperation(e)).customProperties.setProperty("InvocationId",e.invocationId),e.traceContext.attributes&&(n.customProperties.setProperty("ProcessId",e.traceContext.attributes.ProcessId),n.customProperties.setProperty("LogLevel",e.traceContext.attributes.LogLevel),n.customProperties.setProperty("Category",e.traceContext.attributes.Category),n.customProperties.setProperty("HostInstanceId",e.traceContext.attributes.HostInstanceId),n.customProperties.setProperty("AzFuncLiveLogsSessionId",e.traceContext.attributes["#AzFuncLiveLogsSessionId"])),t.functionCallback=s.CorrelationContextManager.wrapCallback(t.functionCallback,n),this._isHttpTrigger(e)&&this._autoGenerateIncomingRequests&&(t.hookData.appInsightsExtractedContext=n,t.hookData.appInsightsStartTime=Date.now())}catch(e){return o.warn("Failed to propagate context in Azure Functions",e),[2]}return[2]}))}))})))},e.prototype._addPostInvocationHook=function(){var e=this;this._postInvocationHook||(this._postInvocationHook=this._functionsCoreModule.registerHook("postInvocation",(function(t){return i(e,void 0,void 0,(function(){var e,n,i,a,c,l=this;return r(this,(function(r){try{this._autoGenerateIncomingRequests&&(e=t.invocationContext,this._isHttpTrigger(e)&&(n=t.inputs[0])&&(i=t.hookData.appInsightsStartTime||Date.now(),a=this._getAzureFunctionResponse(t,e),(c=t.hookData.appInsightsExtractedContext)?s.CorrelationContextManager.runWithContext(c,(function(){l._createIncomingRequestTelemetry(n,a,i,c.operation.parentId)})):this._createIncomingRequestTelemetry(n,a,i,null)))}catch(e){o.warn("Error creating automatic incoming request in Azure Functions",e)}return[2]}))}))})))},e.prototype._createIncomingRequestTelemetry=function(e,t,n,i){for(var r=200,o=0,s=[t.statusCode,t.status];o<s.length;o++){var a=s[o];if("number"==typeof a&&Number.isInteger(a)){r=a;break}if("string"==typeof a){var c=parseInt(a);if(!isNaN(c)){r=c;break}}}this._client.trackRequest({name:e.method+" "+e.url,resultCode:r,success:0<r&&r<400,url:e.url,time:new Date(n),duration:Date.now()-n,id:i}),this._client.flush()},e.prototype._getAzureFunctionResponse=function(e,t){var n=t.bindingDefinitions.find((function(e){return"out"===e.direction&&"http"===e.type.toLowerCase()}));return"$return"===(null==n?void 0:n.name)?e.result:n&&t.bindings&&void 0!==t.bindings[n.name]?t.bindings[n.name]:t.res},e.prototype._isHttpTrigger=function(e){return e.bindingDefinitions.find((function(e){var t;return"httptrigger"===(null===(t=e.type)||void 0===t?void 0:t.toLowerCase())}))},e.prototype._removeInvocationHooks=function(){this._preInvocationHook&&(this._preInvocationHook.dispose(),this._preInvocationHook=void 0),this._postInvocationHook&&(this._postInvocationHook.dispose(),this._postInvocationHook=void 0)},e}();t.AzureFunctionsHook=a},66281:(e,t,n)=>{"use strict";var i=n(87396),r=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(e,t){i.IsInitialized&&(n(14309).wp(e&&t,this._client),n(35823).wp(e,this._client),n(30454).wp(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();e.exports=r},70894:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CorrelationContextManager=void 0;var i=n(95282),r=n(87396),o=n(58090),s=n(10420),a=n(86694),c=n(25740),l=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return void 0===t?null:t},e.generateContextObject=function(e,t,n,i,r,o){return t=t||e,this.enabled?{operation:{name:n,id:e,parentId:t,traceparent:r,tracestate:o},customProperties:new d(i)}:null},e.spanToContextObject=function(t,n,i){var r=new o;return r.traceId=t.traceId,r.spanId=t.spanId,r.traceFlag=o.formatOpenTelemetryTraceFlags(t.traceFlags)||o.DEFAULT_TRACE_FLAG,r.parentId=n,e.generateContextObject(r.traceId,r.parentId,i,null,r)},e.runWithContext=function(t,n){var r;if(e.enabled)try{return e.session.bind(n,((r={})[e.CONTEXT_NAME]=t,r))()}catch(e){i.warn("Error binding to session context",c.dumpObj(e))}return n()},e.wrapEmitter=function(t){if(e.enabled)try{e.session.bindEmitter(t)}catch(e){i.warn("Error binding to session context",c.dumpObj(e))}},e.wrapCallback=function(t,n){var r;if(e.enabled)try{return e.session.bind(t,n?((r={})[e.CONTEXT_NAME]=n,r):void 0)}catch(e){i.warn("Error binding to session context",c.dumpObj(e))}return t},e.enable=function(t){this.enabled||(this.isNodeVersionCompatible()?(e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,void 0===this.cls&&(!0===e.forceClsHooked||void 0===e.forceClsHooked&&e.shouldUseClsHooked()?this.cls=n(39562):this.cls=n(13057)),e.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation((function(t){try{return e.session.bind(t)}catch(e){i.warn("Error binding to session context",c.dumpObj(e))}}))),this.enabled=!0):this.enabled=!1)},e.startOperation=function(t,n){var r=t&&t.traceContext||null,c=t&&t.spanContext?t:null,l=t&&t.traceId?t:null,d=t&&t.headers;if(c)return this.spanToContextObject(c.spanContext(),c.parentSpanId,c.name);if(l)return this.spanToContextObject(l,"|"+l.traceId+"."+l.spanId+".","string"==typeof n?n:"");var u="string"==typeof n?n:"";if(r){var p=null,h=null;if(u=r.attributes.OperationName||u,n){var f=n;f.headers&&(f.headers.traceparent?p=new o(f.headers.traceparent):f.headers["request-id"]&&(p=new o(null,f.headers["request-id"])),f.headers.tracestate&&(h=new s(f.headers.tracestate)))}p||(p=new o(r.traceparent)),h||(h=new s(r.tracestate));var m=void 0;return"object"==typeof n&&(m=(g=new a(n)).getCorrelationContextHeader(),u=g.getOperationName({})),e.generateContextObject(p.traceId,p.parentId,u,m,p,h)}if(d){p=new o(d.traceparent?d.traceparent.toString():null),h=new s(d.tracestate?d.tracestate.toString():null);var g=new a(t);return e.generateContextObject(p.traceId,p.parentId,g.getOperationName({}),g.getCorrelationContextHeader(),p,h)}return i.warn("startOperation was called with invalid arguments",arguments),null},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},e.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},e.canUseClsHooked=function(){var e=process.versions.node.split("."),t=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,i=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(t&&n)&&i},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();t.CorrelationContextManager=l;var d=function(){function e(e){this.props=[],this.addHeaderData(e)}return e.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map((function(e){var t=e.split("=");return{key:t[0],value:t[1]}})).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map((function(e){return e.key+"="+e.value})).join(", ")},e.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var n=this.props[t];if(n.key===e)return n.value}},e.prototype.setProperty=function(t,n){if(e.bannedCharacters.test(t)||e.bannedCharacters.test(n))i.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+t+" and value: "+n);else{for(var r=0;r<this.props.length;++r){var o=this.props[r];if(o.key===t)return void(o.value=n)}this.props.push({key:t,value:n})}},e.bannedCharacters=/[,=]/,e}()},6639:e=>{"use strict";var t=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var n=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(n[0])>13||13===parseInt(n[0])&&parseInt(n[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var n=this;if(t){if(this._isInitialized=!0,!this._exceptionListenerHandle){var i=function(t,i,r){void 0===r&&(r=new Error(e._FALLBACK_ERROR_MESSAGE));var o={exception:r,contextObjects:{}};o.contextObjects.Error=r,n._client.trackException(o),n._client.flush({isAppCrashing:!0}),t&&i&&1===process.listeners(i).length&&(console.error(r),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=i.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=i.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=i.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();e.exports=t},38975:(e,t,n)=>{"use strict";var i=n(22037),r=n(32713),o=n(63580),s=n(54470),a=function(){function e(t){this._collectionInterval=9e5,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t}return e.prototype.enable=function(e){var t=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval((function(){return t.trackHeartBeat(t._client.config,(function(){}))}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(e,t){var n=this,a=!1,c={},l=s.sdkVersion;c.sdk=l,c.osType=i.type(),process.env.WEBSITE_SITE_NAME?(c.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",c.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",c.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?c.azfunction_appId=process.env.WEBSITE_HOSTNAME:e&&void 0===this._isVM&&(a=!0,r.AzureVirtualMachine.getAzureComputeMetadata(e,(function(e){n._isVM=e.isVM,n._isVM&&(c.azInst_vmId=e.id,c.azInst_subscriptionId=e.subscriptionId,c.azInst_osType=e.osType),n._client.trackMetric({name:o.HeartBeatMetricName,value:0,properties:c}),t()}))),a||(this._client.trackMetric({name:o.HeartBeatMetricName,value:0,properties:c}),t())},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();e.exports=a},88723:function(e,t,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i},r=n(13685),o=n(95687),s=n(95282),a=n(25740),c=n(59036),l=n(48339),d=n(70894),u=n(58090),p=n(87396),h=n(29962),f=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),p.IsInitialized&&(n(89879).wp(e,this._client),n(67886).wp(e,this._client),n(34777).wp(e,this._client),n(85071).wp(e,this._client),n(31227).wp(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var n=r.request,c=o.request,l=function(n,i){try{var r=!i[e.disableCollectionRequestOption]&&!n[e.alreadyAutoCollectedFlag],o=null;if(i.headers&&(o=i.headers["User-Agent"]||i.headers["user-agent"])&&-1!==o.toString().indexOf("azsdk-js")&&(r=!1),n&&i&&r&&(d.CorrelationContextManager.wrapEmitter(n),t._isEnabled))if(n[e.alreadyAutoCollectedFlag]=!0,d.CorrelationContextManager.getCurrentContext())e.trackRequest(t._client,{options:i,request:n});else{var c=null;if(h.w3cEnabled)c=(new u).traceId;else{var l=h.generateRequestId(null);c=h.getRootId(l)}var p=d.CorrelationContextManager.generateContextObject(c);d.CorrelationContextManager.runWithContext(p,(function(){e.trackRequest(t._client,{options:i,request:n})}))}}catch(e){s.warn("Failed to generate dependency telemetry.",a.dumpObj(e))}};r.request=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var s=n.call.apply(n,i([r,e],t));return l(s,e),s},o.request=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=c.call.apply(c,i([o,e],t));return l(r,e),r},r.get=function(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var s=(t=r.request).call.apply(t,i([r,e],n));return s.end(),s},o.get=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var s=(t=o.request).call.apply(t,i([o,e],n));return s.end(),s}},e.trackRequest=function(t,n){if(n.options&&n.request&&t){var i,r,o=new l(n.options,n.request),p=d.CorrelationContextManager.getCurrentContext();if(p&&p.operation&&p.operation.traceparent&&u.isValidTraceId(p.operation.traceparent.traceId)?(p.operation.traceparent.updateSpanId(),i=p.operation.traceparent.getBackCompatRequestId()):h.w3cEnabled?(r=(m=new u).toString(),i=m.getBackCompatRequestId()):i=p&&p.operation&&p.operation.parentId+e.requestNumber+++".",a.canIncludeCorrelationHeader(t,o.getUrl())&&n.request.getHeader&&n.request.setHeader&&t.config&&t.config.correlationId){var f=n.request.getHeader(c.requestContextHeader);try{a.safeIncludeCorrelationHeader(t,n.request,f)}catch(e){s.warn("Request-Context header could not be set. Correlation of requests may be lost",e)}if(p&&p.operation)try{if(n.request.setHeader(c.requestIdHeader,i),t.config.ignoreLegacyHeaders||(n.request.setHeader(c.parentIdHeader,p.operation.id),n.request.setHeader(c.rootIdHeader,i)),r||p.operation.traceparent)n.request.setHeader(c.traceparentHeader,r||p.operation.traceparent.toString());else if(h.w3cEnabled){var m=(new u).toString();n.request.setHeader(c.traceparentHeader,m)}if(p.operation.tracestate){var g=p.operation.tracestate.toString();g&&n.request.setHeader(c.traceStateHeader,g)}var v=p.customProperties.serializeToHeader();v&&n.request.setHeader(c.correlationContextHeader,v)}catch(e){s.warn("Correlation headers could not be set. Correlation of requests may be lost.",e)}}n.request.on&&(n.request.on("response",(function(e){if(!n.isProcessed){n.isProcessed=!0,o.onResponse(e);var r=o.getDependencyTelemetry(n,i);r.contextObjects=r.contextObjects||{},r.contextObjects["http.RequestOptions"]=n.options,r.contextObjects["http.ClientRequest"]=n.request,r.contextObjects["http.ClientResponse"]=e,t.trackDependency(r)}})),n.request.on("error",(function(e){if(!n.isProcessed){n.isProcessed=!0,o.onError(e);var r=o.getDependencyTelemetry(n,i);r.contextObjects=r.contextObjects||{},r.contextObjects["http.RequestOptions"]=n.options,r.contextObjects["http.ClientRequest"]=n.request,r.contextObjects.Error=e,t.trackDependency(r)}})),n.request.on("abort",(function(){if(!n.isProcessed){n.isProcessed=!0,o.onError(new Error("The request has been aborted and the network socket has closed."));var e=o.getDependencyTelemetry(n,i);e.contextObjects=e.contextObjects||{},e.contextObjects["http.RequestOptions"]=n.options,e.contextObjects["http.ClientRequest"]=n.request,t.trackDependency(e)}})))}else s.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!n.options,!n.request,!t)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();e.exports=f},48339:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(57310),s=n(55290),a=n(25740),c=n(59036),l=n(13054),d=n(29962),u=function(e){function t(n,i){var r=e.call(this)||this;return i&&i.method&&n&&(r.method=i.method,r.url=t._getUrlFromRequestOptions(n,i),r.startTime=+new Date),r}return r(t,e),t.prototype.onError=function(e){this._setStatus(void 0,e)},t.prototype.onResponse=function(e){this._setStatus(e.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(e,c.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(e,t){var n=this.method.toUpperCase(),i=s.RemoteDependencyDataConstants.TYPE_HTTP,r="";try{var a=new o.URL(this.url);a.search=void 0,a.hash=void 0,n+=" "+a.pathname,r=a.hostname,a.port&&(r+=":"+a.port)}catch(e){}this.correlationId?(i=s.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==d.correlationIdPrefix&&(r+=" | "+this.correlationId)):i=s.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:t,name:n,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:i,target:r};if(e&&e.time?c.time=e.time:this.startTime&&(c.time=new Date(this.startTime)),e){for(var l in e)c[l]||(c[l]=e[l]);if(e.properties)for(var l in e.properties)c.properties[l]=e.properties[l]}return c},t._getUrlFromRequestOptions=function(e,t){if("string"==typeof e)if(0===e.indexOf("http://")||0===e.indexOf("https://"))try{e=new o.URL(e)}catch(e){}else try{var n=new o.URL("http://"+e);e="443"===n.port?new o.URL("https://"+e):new o.URL("http://"+e)}catch(e){}else{if(e&&"function"==typeof o.URL&&e instanceof o.URL)return o.format(e);var i=e;e={},i&&Object.keys(i).forEach((function(t){e[t]=i[t]}))}if(e.path&&e.host)try{var r=new o.URL(e.path,"http://"+e.host+e.path);e.pathname=r.pathname,e.search=r.search}catch(e){}if(e.path&&e.hostname&&!e.host)try{r=new o.URL(e.path,"http://"+e.hostname+e.path),e.pathname=r.pathname,e.search=r.search}catch(e){}if(e.host&&e.port)try{!new o.URL("http://"+e.host).port&&e.port&&(e.hostname=e.host,delete e.host)}catch(e){}return e.protocol=e.protocol||t.agent&&t.agent.protocol||t.protocol||void 0,e.hostname=e.hostname||"localhost",o.format(e)},t}(l);e.exports=u},86694:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(57310),s=n(55290),a=n(25740),c=n(59036),l=n(13054),d=n(29962),u=n(10420),p=n(58090),h=function(e){function t(t,n){var i=e.call(this)||this;return t&&(i.method=t.method,i.url=i._getAbsoluteUrl(t),i.startTime=+new Date,i.socketRemoteAddress=t.socket&&t.socket.remoteAddress,i.parseHeaders(t,n),t.connection&&(i.connectionRemoteAddress=t.connection.remoteAddress,i.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),i}return r(t,e),t.prototype.onError=function(e,t){this._setStatus(void 0,e),t&&(this.duration=t)},t.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,void 0),t&&(this.duration=t)},t.prototype.getRequestTelemetry=function(e){var t=this.method;try{t+=" "+new o.URL(this.url).pathname}catch(e){}var n={id:this.requestId,name:t,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(e&&e.time?n.time=e.time:this.startTime&&(n.time=new Date(this.startTime)),e){for(var i in e)n[i]||(n[i]=e[i]);if(e.properties)for(var i in e.properties)n.properties[i]=e.properties[i]}return n},t.prototype.getRequestTags=function(e){var n={};for(var i in e)n[i]=e[i];return n[t.keys.locationIp]=e[t.keys.locationIp]||this._getIp(),n[t.keys.sessionId]=e[t.keys.sessionId]||this._getId("ai_session"),n[t.keys.userId]=e[t.keys.userId]||this._getId("ai_user"),n[t.keys.userAuthUserId]=e[t.keys.userAuthUserId]||this._getId("ai_authUser"),n[t.keys.operationName]=this.getOperationName(e),n[t.keys.operationParentId]=this.getOperationParentId(e),n[t.keys.operationId]=this.getOperationId(e),n},t.prototype.getOperationId=function(e){return e[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(e){return e[t.keys.operationParentId]||this.parentId||this.getOperationId(e)},t.prototype.getOperationName=function(e){if(e[t.keys.operationName])return e[t.keys.operationName];var n="";try{n=new o.URL(this.url).pathname}catch(e){}var i=this.method;return n&&(i+=" "+n),i},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(e){if(!e.headers)return e.url;var t=e.connection&&e.connection.encrypted||"https"==e.headers["x-forwarded-proto"]?"https":"http",n=t+"://"+e.headers.host+"/",i="",r="";try{var s=new o.URL(e.url,n);i=s.pathname,r=s.search}catch(e){}return o.format({protocol:t,host:e.headers.host,pathname:i,search:r})},t.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var n=e.exec(t);if(n)return n[0]},n=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!n&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(n="127.0.0.1"),n},t.prototype._getId=function(e){var n=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return t.parseId(a.getCookie(e,n))},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(e,t){if(this.rawHeaders=e.headers||e.rawHeaders,this.userAgent=e.headers&&e.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(e,c.requestContextSourceKey),e.headers){var n=e.headers[c.traceStateHeader]?e.headers[c.traceStateHeader].toString():null,i=e.headers[c.traceparentHeader]?e.headers[c.traceparentHeader].toString():null,r=e.headers[c.requestIdHeader]?e.headers[c.requestIdHeader].toString():null,o=e.headers[c.parentIdHeader]?e.headers[c.parentIdHeader].toString():null,s=e.headers[c.rootIdHeader]?e.headers[c.rootIdHeader].toString():null;this.correlationContextHeader=e.headers[c.correlationContextHeader]?e.headers[c.correlationContextHeader].toString():null,d.w3cEnabled&&(i||n)?(this.traceparent=new p(i?i.toString():null),this.tracestate=i&&n&&new u(n?n.toString():null),this.setBackCompatFromThisTraceContext()):r?d.w3cEnabled?(this.traceparent=new p(null,r),this.setBackCompatFromThisTraceContext()):(this.parentId=r,this.requestId=d.generateRequestId(this.parentId),this.operationId=d.getRootId(this.requestId)):d.w3cEnabled?(this.traceparent=new p,this.traceparent.parentId=o,this.traceparent.legacyRootId=s||o,this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=d.generateRequestId(s||this.parentId),this.correlationContextHeader=null,this.operationId=d.getRootId(this.requestId)),t&&(this.requestId=t,this.operationId=d.getRootId(this.requestId))}},t.parseId=function(e){var t=e.split("|");return t.length>0?t[0]:""},t.keys=new s.ContextTagKeys,t}(l);e.exports=h},40731:(e,t,n)=>{"use strict";var i=n(13685),r=n(95687),o=n(95282),s=n(25740),a=n(59036),c=n(86694),l=n(70894),d=n(74350),u=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||d.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(e,t){e&&!this._isAutoCorrelating?l.CorrelationContextManager.enable(t):!e&&this._isAutoCorrelating&&l.CorrelationContextManager.disable(),this._isAutoCorrelating=e},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return l.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},e.prototype._registerRequest=function(t,n,i){var r=this,o=new c(t),s=this._generateCorrelationContext(o);l.CorrelationContextManager.runWithContext(s,(function(){r._isEnabled&&(t[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(r._client,{request:t,response:n},o)),"function"==typeof i&&i(t,n)}))},e.prototype._initialize=function(){if(this._isInitialized=!0,!e.HANDLER_READY){e.HANDLER_READY=!0;var t=function(t){if(t){if("function"!=typeof t)throw new Error("onRequest handler must be a function");return function(n,i){var r;l.CorrelationContextManager.wrapEmitter(n),l.CorrelationContextManager.wrapEmitter(i);var o=n&&!n[e.alreadyAutoCollectedFlag];n&&o?null===(r=e.INSTANCE)||void 0===r||r._registerRequest(n,i,t):"function"==typeof t&&t(n,i)}}},n=function(e){var n=e.addListener.bind(e);e.addListener=function(e,i){switch(e){case"request":case"checkContinue":return n(e,t(i));default:return n(e,i)}},e.on=e.addListener},o=i.createServer;i.createServer=function(e,i){if(i&&"function"==typeof i){var r=o(e,t(i));return n(r),r}return r=o(t(e)),n(r),r};var s=r.createServer;r.createServer=function(e,i){var r=s(e,t(i));return n(r),r}}},e.trackRequestSync=function(t,n){if(n.request&&n.response&&t){n.isProcessed=!1,e.addResponseCorrelationIdHeader(t,n.response);var i=l.CorrelationContextManager.getCurrentContext(),r=new c(n.request,i&&i.operation.parentId);i&&(i.operation.id=r.getOperationId(t.context.tags)||i.operation.id,i.operation.name=r.getOperationName(t.context.tags)||i.operation.name,i.operation.parentId=r.getRequestId()||i.operation.parentId,i.customProperties.addHeaderData(r.getCorrelationContextHeader())),e.endRequest(t,r,n,n.duration,n.error)}else o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!n.request,!n.response,!t)},e.trackRequest=function(t,n,i){if(n.request&&n.response&&t){n.isProcessed=!1;var r=l.CorrelationContextManager.getCurrentContext(),a=i||new c(n.request,r&&r.operation.parentId);s.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,n.response),r&&!i&&(r.operation.id=a.getOperationId(t.context.tags)||r.operation.id,r.operation.name=a.getOperationName(t.context.tags)||r.operation.name,r.operation.parentId=a.getOperationParentId(t.context.tags)||r.operation.parentId,r.customProperties.addHeaderData(a.getCorrelationContextHeader())),n.response.once&&n.response.once("finish",(function(){e.endRequest(t,a,n,null,null)})),n.request.on&&n.request.on("error",(function(i){e.endRequest(t,a,n,null,i)})),n.request.on&&n.request.on("aborted",(function(){e.endRequest(t,a,n,null,"The request has been aborted and the network socket has closed.")}))}else o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!n.request,!n.response,!t)},e.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var n=t.getHeader(a.requestContextHeader);s.safeIncludeCorrelationHeader(e,t,n)}},e.endRequest=function(e,t,n,i,r){if(!n.isProcessed){n.isProcessed=!0,r?t.onError(r,i):t.onResponse(n.response,i);var o=t.getRequestTelemetry(n);if(o.tagOverrides=t.getRequestTags(e.context.tags),n.tagOverrides)for(var s in n.tagOverrides)o.tagOverrides[s]=n.tagOverrides[s];var a=t.getLegacyRootId();a&&(o.properties.ai_legacyRootId=a),o.contextObjects=o.contextObjects||{},o.contextObjects["http.ServerRequest"]=n.request,o.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(o)}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,l.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.HANDLER_READY=!1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();e.exports=u},11629:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoCollectNativePerformance=void 0;var r=n(54470),o=n(95282),s=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.prototype.enable=function(t,i,r){var s=this;if(void 0===i&&(i={}),void 0===r&&(r=6e4),null==e._metricsAvailable&&t&&!this._isInitialized)try{var a=n(32220);e._emitter=new a,e._metricsAvailable=!0,o.info("Native metrics module successfully loaded!")}catch(t){return void(e._metricsAvailable=!1)}this._isEnabled=t,this._disabledMetrics=i,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,r),this._handle||(this._handle=setInterval((function(){return s._trackNativeMetrics()}),r),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(e,t){var n=t.disableAllExtendedMetrics,r=t.extendedMetricDisablers;if(n)return{isEnabled:!1,disabledMetrics:{}};if(r){var o=r.split(","),s={};if(o.length>0)for(var a=0,c=o;a<c.length;a++)s[c[a]]=!0;return"object"==typeof e?{isEnabled:!0,disabledMetrics:i(i({},e),s)}:{isEnabled:e,disabledMetrics:s}}return"boolean"==typeof e?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},e.prototype._trackNativeMetrics=function(){var e=!0;"object"!=typeof this._isEnabled&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var n=e._emitter.getGCData();for(var i in n){var o=n[i].metrics,s=i+" Garbage Collection Duration",a=Math.sqrt(o.sumSquares/o.count-Math.pow(o.total/o.count,2))||0;this._client.trackMetric({name:s,value:o.total,count:o.count,max:o.max,min:o.min,stdDev:a,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+r.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var n=e._emitter.getLoopData().loopUsage;if(0!=n.count){var i=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:"Event Loop CPU Time",value:n.total,count:n.count,min:n.min,max:n.max,stdDev:i,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+r.sdkVersion,t)})}}},e.prototype._trackHeapUsage=function(){var e,t,n;if(!this._disabledMetrics.heap){var i=process.memoryUsage(),o=i.heapUsed,s=i.heapTotal,a=i.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+r.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+r.sdkVersion,t)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+r.sdkVersion,n)})}},e}();t.AutoCollectNativePerformance=s},64555:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkStatsbeat=void 0;t.NetworkStatsbeat=function(e,t){this.endpoint=e,this.host=t,this.totalRequestCount=0,this.totalSuccesfulRequestCount=0,this.totalFailedRequestCount=[],this.retryCount=[],this.exceptionCount=[],this.throttleCount=[],this.intervalRequestExecutionTime=0,this.lastIntervalRequestExecutionTime=0,this.lastTime=+new Date,this.lastRequestCount=0}},74350:(e,t,n)=>{"use strict";var i=n(22037),r=n(63580),o=function(){function e(t,n,i){void 0===n&&(n=6e4),void 0===i&&(i=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._lastRequests={totalRequestCount:0,totalFailedRequestCount:0,time:0},this._lastDependencies={totalDependencyCount:0,totalFailedDependencyCount:0,time:0},this._lastExceptions={totalExceptionCount:0,time:0},this._isInitialized=!1,this._client=t,this._collectionInterval=n,this._enableLiveMetricsCounters=i}return e.prototype.enable=function(t,n){var r=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=i.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},"function"==typeof process.cpuUsage&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=n||this._collectionInterval,this._handle=setInterval((function(){return r.trackPerformance()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,n){var i;if(e.isEnabled()){if("string"==typeof t)i=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;i=t}e._intervalRequestExecutionTime+=i,!1===n&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,n){var i;if(e.isEnabled()){if("string"==typeof t)i=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;i=t}e._intervalDependencyExecutionTime+=i,!1===n&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var e=i.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,n=0,o=0,s=0,a=0,c=0;e&&c<e.length;c++){var l=e[c],d=this._lastCpus[c],u=(l.model,l.speed,l.times),p=d.times;t+=u.user-p.user||0,n+=u.sys-p.sys||0,o+=u.nice-p.nice||0,s+=u.idle-p.idle||0,a+=u.irq-p.irq||0}var h=void 0;if("function"==typeof process.cpuUsage){var f=process.cpuUsage(),m=process.hrtime(),g=f.user-this._lastAppCpuUsage.user+(f.system-this._lastAppCpuUsage.system)||0;void 0!==this._lastHrtime&&2===this._lastHrtime.length&&(h=100*g/((1e6*(m[0]-this._lastHrtime[0])+(m[1]-this._lastHrtime[1])/1e3||0)*e.length)),this._lastAppCpuUsage=f,this._lastHrtime=m}var v=t+n+o+s+a||1;this._client.trackMetric({name:r.PerformanceCounter.PROCESSOR_TIME,value:(v-s)/v*100}),this._client.trackMetric({name:r.PerformanceCounter.PROCESS_TIME,value:h||t/v*100})}this._lastCpus=e},e.prototype._trackMemory=function(){var e=i.freemem(),t=process.memoryUsage().rss,n=i.totalmem()-e;this._client.trackMetric({name:r.PerformanceCounter.PRIVATE_BYTES,value:t}),this._client.trackMetric({name:r.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:r.QuickPulseCounter.COMMITTED_BYTES,value:n})},e.prototype._trackNetwork=function(){var t=this._lastRequests,n={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},i=n.totalRequestCount-t.totalRequestCount||0,o=n.totalFailedRequestCount-t.totalFailedRequestCount||0,s=n.time-t.time,a=s/1e3,c=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/i||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,s>0){var l=i/a,d=o/a;this._client.trackMetric({name:r.PerformanceCounter.REQUEST_RATE,value:l}),(!this._enableLiveMetricsCounters||i>0)&&this._client.trackMetric({name:r.PerformanceCounter.REQUEST_DURATION,value:c}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:r.QuickPulseCounter.REQUEST_FAILURE_RATE,value:d})}this._lastRequests=n},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,n={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},i=n.totalDependencyCount-t.totalDependencyCount||0,o=n.totalFailedDependencyCount-t.totalFailedDependencyCount||0,s=n.time-t.time,a=s/1e3,c=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/i||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,s>0){var l=i/a,d=o/a;this._client.trackMetric({name:r.QuickPulseCounter.DEPENDENCY_RATE,value:l}),this._client.trackMetric({name:r.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:d}),(!this._enableLiveMetricsCounters||i>0)&&this._client.trackMetric({name:r.QuickPulseCounter.DEPENDENCY_DURATION,value:c})}this._lastDependencies=n}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,n={totalExceptionCount:e._totalExceptionCount,time:+new Date},i=n.totalExceptionCount-t.totalExceptionCount||0,o=n.time-t.time;if(o>0){var s=i/(o/1e3);this._client.trackMetric({name:r.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=n}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();e.exports=o},62309:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=n(63580),o=n(60521),s=n(77535),a=function(){function e(t,n){void 0===n&&(n=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=n}return e.prototype.enable=function(e,t){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=t||this._collectionInterval,this._handle=setInterval((function(){return n.trackPreAggregatedMetrics()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._exceptionCountersCollection).totalCount++},e.countTrace=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._traceCountersCollection).totalCount++},e.countRequest=function(t,n){if(e.isEnabled()){var i,r=e._getAggregatedCounter(n,this._requestCountersCollection);if("string"==typeof t)i=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;i=t}r.intervalExecutionTime+=i,r.totalCount++}},e.countDependency=function(t,n){if(e.isEnabled()){var i,r=e._getAggregatedCounter(n,this._dependencyCountersCollection);if("string"==typeof t)i=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;i=t}r.intervalExecutionTime+=i,r.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(e,t){for(var n=!1,i=0;i<t.length;i++){if(e===t[i].dimensions)return t[i];if(Object.keys(e).length===Object.keys(t[i].dimensions).length){for(var r in e)if(e[r]!=t[i].dimensions[r]){n=!0;break}if(!n)return t[i];n=!1}}var s=new o.AggregatedMetricCounter(e);return t.push(s),s},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var n=e._requestCountersCollection[t];n.time=+new Date;var i=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime,s=(n.intervalExecutionTime-n.lastIntervalExecutionTime)/i||0;n.lastIntervalExecutionTime=n.intervalExecutionTime,o>0&&i>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:n.dimensions,value:s,count:i,aggregationInterval:o,metricType:r.MetricId.REQUESTS_DURATION}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var n=e._dependencyCountersCollection[t];n.time=+new Date;var i=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime,s=(n.intervalExecutionTime-n.lastIntervalExecutionTime)/i||0;n.lastIntervalExecutionTime=n.intervalExecutionTime,o>0&&i>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:n.dimensions,value:s,count:i,aggregationInterval:o,metricType:r.MetricId.DEPENDENCIES_DURATION}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var n=e._exceptionCountersCollection[t];n.time=+new Date;var i=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime;o>0&&i>0&&this._trackPreAggregatedMetric({name:"Exceptions",dimensions:n.dimensions,value:i,count:i,aggregationInterval:o,metricType:r.MetricId.EXCEPTIONS_COUNT}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var n=e._traceCountersCollection[t];n.time=+new Date;var i=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime;o>0&&i>0&&this._trackPreAggregatedMetric({name:"Traces",dimensions:n.dimensions,value:i,count:i,aggregationInterval:o,metricType:r.MetricId.TRACES_COUNT}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackPreAggregatedMetric=function(e){var t={};for(var n in e.dimensions)t[s.PreaggregatedMetricPropertyNames[n]]=e.dimensions[n];t=i(i({},t),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var r={name:e.name,value:e.value,count:e.count,properties:t,kind:"Aggregation"};this._client.trackMetric(r)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();e.exports=a},13054:e=>{"use strict";var t=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(e,t){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var i=this.properties||{};if(t)if("string"==typeof t)i.error=t;else if(t instanceof Error)i.error=t.message;else if("object"==typeof t)for(var r in t)i[r]=t[r]&&t[r].toString&&t[r].toString();this.properties=i},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();e.exports=t},49004:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=n(22037),a=n(99813),c=n(95282),l=n(82588),d=n(63580),u=n(55290),p=n(32713),h=n(69253),f=n(54470),m=n(64555),g=n(25740),v=function(){function e(e,t){this._attach=d.StatsbeatAttach.sdk,this._feature=d.StatsbeatFeature.NONE,this._instrumentation=d.StatsbeatInstrumentation.NONE,this._isInitialized=!1,this._statbeatMetrics=[],this._networkStatsbeatCollection=[],this._config=e,this._context=t||new f;var n=this._getConnectionString(e);this._statsbeatConfig=new h(n),this._statsbeatConfig.samplingPercentage=100,this._sender=new l(this._statsbeatConfig,null,null,null,null,!0,this._shutdownStatsbeat.bind(this))}return e.prototype.enable=function(t){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._getCustomProperties(),this._isInitialized=!0),t?(this._handle||(this._handle=setInterval((function(){n.trackShortIntervalStatsbeats()}),e.STATS_COLLECTION_SHORT_INTERVAL),this._handle.unref()),this._longHandle||(this.trackLongIntervalStatsbeats(),this._longHandle=setInterval((function(){n.trackLongIntervalStatsbeats()}),e.STATS_COLLECTION_LONG_INTERVAL),this._longHandle.unref())):(this._handle&&(clearInterval(this._handle),this._handle=null),this._longHandle&&(clearInterval(this._longHandle),this._longHandle=null))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isEnabled=function(){return this._isEnabled},e.prototype.setCodelessAttach=function(){this._attach=d.StatsbeatAttach.codeless},e.prototype.addFeature=function(e){this._feature|=e},e.prototype.removeFeature=function(e){this._feature&=~e},e.prototype.addInstrumentation=function(e){this._instrumentation|=e},e.prototype.removeInstrumentation=function(e){this._instrumentation&=~e},e.prototype.countRequest=function(e,t,n,i,r){if(this.isEnabled()){var o=this._getNetworkStatsbeatCounter(e,t);if(o.totalRequestCount++,o.intervalRequestExecutionTime+=n,!1===i){if(!r)return;var s=o.totalFailedRequestCount.find((function(e){return r===e.statusCode}));s?s.count++:o.totalFailedRequestCount.push({statusCode:r,count:1})}else o.totalSuccesfulRequestCount++}},e.prototype.countException=function(e,t,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,t),r=i.exceptionCount.find((function(e){return n.name===e.exceptionType}));r?r.count++:i.exceptionCount.push({exceptionType:n.name,count:1})}},e.prototype.countThrottle=function(e,t,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,t),r=i.throttleCount.find((function(e){return n===e.statusCode}));r?r.count++:i.throttleCount.push({statusCode:n,count:1})}},e.prototype.countRetry=function(e,t,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,t),r=i.retryCount.find((function(e){return n===e.statusCode}));r?r.count++:i.retryCount.push({statusCode:n,count:1})}},e.prototype.trackShortIntervalStatsbeats=function(){return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return i.sent(),t={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},this._trackRequestDuration(t),this._trackRequestsCount(t),[4,this._sendStatsbeats()];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),c.info(e.TAG,"Failed to send Statsbeat metrics: "+g.dumpObj(n)),[3,4];case 4:return[2]}}))}))},e.prototype.trackLongIntervalStatsbeats=function(){return r(this,void 0,void 0,(function(){var t,n,i,r,s;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return o.sent(),t={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},n=Object.assign({rpId:this._resourceIdentifier},t),this._statbeatMetrics.push({name:d.StatsbeatCounter.ATTACH,value:1,properties:n}),this._instrumentation!=d.StatsbeatInstrumentation.NONE&&(i=Object.assign({feature:this._instrumentation,type:d.StatsbeatFeatureType.Instrumentation},t),this._statbeatMetrics.push({name:d.StatsbeatCounter.FEATURE,value:1,properties:i})),this._feature!=d.StatsbeatFeature.NONE&&(r=Object.assign({feature:this._feature,type:d.StatsbeatFeatureType.Feature},t),this._statbeatMetrics.push({name:d.StatsbeatCounter.FEATURE,value:1,properties:r})),[4,this._sendStatsbeats()];case 2:return o.sent(),[3,4];case 3:return s=o.sent(),c.info(e.TAG,"Failed to send Statsbeat metrics: "+g.dumpObj(s)),[3,4];case 4:return[2]}}))}))},e.prototype._getNetworkStatsbeatCounter=function(e,t){for(var n=this._getShortHost(t),i=0;i<this._networkStatsbeatCollection.length;i++)if(e===this._networkStatsbeatCollection[i].endpoint&&n===this._networkStatsbeatCollection[i].host)return this._networkStatsbeatCollection[i];var r=new m.NetworkStatsbeat(e,n);return this._networkStatsbeatCollection.push(r),r},e.prototype._trackRequestDuration=function(e){for(var t=0;t<this._networkStatsbeatCollection.length;t++){var n=this._networkStatsbeatCollection[t];n.time=+new Date;var i=n.totalRequestCount-n.lastRequestCount||0,r=n.intervalRequestExecutionTime-n.lastIntervalRequestExecutionTime,o=r>0&&r/i||0;if(n.lastIntervalRequestExecutionTime=n.intervalRequestExecutionTime,i>0){var s=Object.assign({endpoint:this._networkStatsbeatCollection[t].endpoint,host:this._networkStatsbeatCollection[t].host},e);this._statbeatMetrics.push({name:d.StatsbeatCounter.REQUEST_DURATION,value:o,properties:s})}n.lastRequestCount=n.totalRequestCount,n.lastTime=n.time}},e.prototype._getShortHost=function(e){var t=e;try{var n=new RegExp(/^https?:\/\/(?:www\.)?([^\/.-]+)/).exec(e);null!=n&&n.length>1&&(t=n[1]),t=t.replace(".in.applicationinsights.azure.com","")}catch(e){}return t},e.prototype._trackRequestsCount=function(e){for(var t,n=this,r=function(r){t=o._networkStatsbeatCollection[r];var s=Object.assign({endpoint:t.endpoint,host:t.host},e);t.totalSuccesfulRequestCount>0&&(o._statbeatMetrics.push({name:d.StatsbeatCounter.REQUEST_SUCCESS,value:t.totalSuccesfulRequestCount,properties:s}),t.totalSuccesfulRequestCount=0),t.totalFailedRequestCount.length>0&&(t.totalFailedRequestCount.forEach((function(e){s=Object.assign(i(i({},s),{statusCode:e.statusCode})),n._statbeatMetrics.push({name:d.StatsbeatCounter.REQUEST_FAILURE,value:e.count,properties:s})})),t.totalFailedRequestCount=[]),t.retryCount.length>0&&(t.retryCount.forEach((function(e){s=Object.assign(i(i({},s),{statusCode:e.statusCode})),n._statbeatMetrics.push({name:d.StatsbeatCounter.RETRY_COUNT,value:e.count,properties:s})})),t.retryCount=[]),t.throttleCount.length>0&&(t.throttleCount.forEach((function(e){s=Object.assign(i(i({},s),{statusCode:e.statusCode})),n._statbeatMetrics.push({name:d.StatsbeatCounter.THROTTLE_COUNT,value:e.count,properties:s})})),t.throttleCount=[]),t.exceptionCount.length>0&&(t.exceptionCount.forEach((function(e){s=Object.assign(i(i({},s),{exceptionType:e.exceptionType})),n._statbeatMetrics.push({name:d.StatsbeatCounter.EXCEPTION_COUNT,value:e.count,properties:s})})),t.exceptionCount=[])},o=this,s=0;s<this._networkStatsbeatCollection.length;s++)r(s)},e.prototype._sendStatsbeats=function(){return r(this,void 0,void 0,(function(){var e,t,n,i;return o(this,(function(r){switch(r.label){case 0:for(e=[],t=0;t<this._statbeatMetrics.length;t++)n={name:this._statbeatMetrics[t].name,value:this._statbeatMetrics[t].value,properties:this._statbeatMetrics[t].properties},(i=a.createEnvelope(n,u.TelemetryType.Metric,null,this._context,this._statsbeatConfig)).name=d.StatsbeatTelemetryName,e.push(i);return this._statbeatMetrics=[],[4,this._sender.send(e)];case 1:return r.sent(),[2]}}))}))},e.prototype._getCustomProperties=function(){this._language="node",this._cikey=this._config.instrumentationKey,this._sdkVersion=f.sdkVersion,this._os=s.type(),this._runtimeVersion=process.version},e.prototype._getResourceProvider=function(){var e=this;return new Promise((function(t,n){var i=!1;e._resourceProvider=d.StatsbeatResourceProvider.unknown,e._resourceIdentifier=d.StatsbeatResourceProvider.unknown,process.env.WEBSITE_SITE_NAME?(e._resourceProvider=d.StatsbeatResourceProvider.appsvc,e._resourceIdentifier=process.env.WEBSITE_SITE_NAME,process.env.WEBSITE_HOME_STAMPNAME&&(e._resourceIdentifier+="/"+process.env.WEBSITE_HOME_STAMPNAME)):process.env.FUNCTIONS_WORKER_RUNTIME?(e._resourceProvider=d.StatsbeatResourceProvider.functions,process.env.WEBSITE_HOSTNAME&&(e._resourceIdentifier=process.env.WEBSITE_HOSTNAME)):e._config&&(void 0===e._isVM||1==e._isVM?(i=!0,p.AzureVirtualMachine.getAzureComputeMetadata(e._config,(function(n){e._isVM=n.isVM,e._isVM&&(e._resourceProvider=d.StatsbeatResourceProvider.vm,e._resourceIdentifier=n.id+"/"+n.subscriptionId,n.osType&&(e._os=n.osType)),t()}))):e._resourceProvider=d.StatsbeatResourceProvider.unknown),i||t()}))},e.prototype._shutdownStatsbeat=function(){this.enable(!1)},e.prototype._getConnectionString=function(t){for(var n=t.endpointUrl,i=["westeurope","northeurope","francecentral","francesouth","germanywestcentral","norwayeast","norwaywest","swedencentral","switzerlandnorth","switzerlandwest","uksouth","ukwest"],r=0;r<i.length;r++)if(n.indexOf(i[r])>-1)return e.EU_CONNECTION_STRING;return e.NON_EU_CONNECTION_STRING},e.NON_EU_CONNECTION_STRING="InstrumentationKey=c4a29126-a7cb-47e5-b348-11414998b11e;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com",e.EU_CONNECTION_STRING="InstrumentationKey=7dc56bab-3c0c-4e9f-9ebb-d1acadee8d0f;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com",e.STATS_COLLECTION_SHORT_INTERVAL=9e5,e.STATS_COLLECTION_LONG_INTERVAL=864e5,e.TAG="Statsbeat",e}();e.exports=v},11918:(e,t,n)=>{"use strict";var i=n(13685),r=n(95687),o=n(59796),s=n(95282),a=n(82570),c=n(40095),l=n(63580),d=n(55158),u=n(40166),p=function(){function e(t){var n;if(this._isIkeyValid=!0,e.INSTANCE)throw new Error("Web snippet injection should be configured from the applicationInsights object");e.INSTANCE=this,e._aiUrl=l.WEB_INSTRUMENTATION_DEFAULT_SOURCE,e._aiDeprecatedUrl=l.WEB_INSTRUMENTATION_DEPRECATED_SOURCE;var i=this._getWebSnippetIkey(null===(n=t.config)||void 0===n?void 0:n.webInstrumentationConnectionString);this._webInstrumentationIkey=i||t.config.instrumentationKey,this._clientWebInstrumentationConfig=t.config.webInstrumentationConfig,this._clientWebInstrumentationSrc=t.config.webInstrumentationSrc,this._statsbeat=t.getStatsbeat()}return e.prototype.enable=function(t,n){this._isEnabled=t,this._webInstrumentationIkey=this._getWebSnippetIkey(n)||this._webInstrumentationIkey,e._snippet=this._getWebInstrumentationReplacedStr(),this._isEnabled&&!this._isInitialized&&this._isIkeyValid?(this._statsbeat&&this._statsbeat.addFeature(l.StatsbeatFeature.WEB_SNIPPET),this._initialize()):this._isEnabled||this._statsbeat&&this._statsbeat.removeFeature(l.StatsbeatFeature.WEB_SNIPPET)},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._getWebSnippetIkey=function(e){var t=null;try{var n=d.parse(e).instrumentationkey||"";d.isIkeyValid(n)?(this._isIkeyValid=!0,t=n):(this._isIkeyValid=!1,s.info("Invalid web Instrumentation connection string, web Instrumentation is not enabled."))}catch(e){s.info("get web snippet ikey error: "+e)}return t},e.prototype._getWebInstrumentationReplacedStr=function(){var e=this._getClientWebInstrumentationConfigStr(this._clientWebInstrumentationConfig),t=c.getOsPrefix(),n=c.getResourceProvider(),i=this._webInstrumentationIkey+'",\r\n'+e+' disableIkeyDeprecationMessage: true,\r\n sdkExtension: "'+n+t+"d_n_",r=u.webSnippet.replace("INSTRUMENTATION_KEY",i);return this._clientWebInstrumentationSrc?r.replace(l.WEB_INSTRUMENTATION_DEFAULT_SOURCE+".2.min.js",this._clientWebInstrumentationSrc):r},e.prototype._getClientWebInstrumentationConfigStr=function(e){var t="";try{null!=e&&e.length>0&&e.forEach((function(e){var n=e.name;if(void 0!==n){var i=e.value;switch(typeof i){case"function":case"object":break;case"string":t+=" "+n+': "'+i+'",\r\n';break;default:t+=" "+n+": "+i+",\r\n"}}}))}catch(e){this._isEnabled=!1,s.info("Parse client web instrumentation error. Web Instrumentation is disabled")}return t},e.prototype._initialize=function(){this._isInitialized=!0;var t=i.createServer,n=r.createServer,o=this._isEnabled;i.createServer=function(n){var i=n;return i&&(n=function(t,n){var r=n.write,c="GET"==t.method;n.write=function(t,i,l){try{if(o&&c){var d=a.getContentEncodingFromHeaders(n),u=void 0;if("string"==typeof i&&(u=i),null==d)e.INSTANCE.ValidateInjection(n,t)&&(arguments[0]=e.INSTANCE.InjectWebSnippet(n,t,void 0,u));else if(d.length){var p=d[0];arguments[0]=e.INSTANCE.InjectWebSnippet(n,t,p)}}}catch(e){s.warn("Inject snippet error: "+e)}return r.apply(n,arguments)};var l=n.end;return n.end=function(t,i,r){if(o&&c)try{if(o&&c){var d=a.getContentEncodingFromHeaders(n),u=void 0;if("string"==typeof i&&(u=i),null==d)e.INSTANCE.ValidateInjection(n,t)&&(arguments[0]=e.INSTANCE.InjectWebSnippet(n,t,void 0,u));else if(d.length){var p=d[0];arguments[0]=e.INSTANCE.InjectWebSnippet(n,t,p)}}}catch(e){s.warn("Inject snipet error: "+e)}return l.apply(n,arguments)},i(t,n)}),t(n)},r.createServer=function(t,i){var r=i;if(r)return i=function(t,n){var i="GET"==t.method,c=n.write,l=n.end;return n.write=function(t,r,l){try{if(o&&i){var d=a.getContentEncodingFromHeaders(n),u=void 0;if("string"==typeof r&&(u=r),null==d)e.INSTANCE.ValidateInjection(n,t)&&(arguments[0]=this.InjectWebSnippet(n,t,void 0,u));else if(d.length){var p=d[0];arguments[0]=e.INSTANCE.InjectWebSnippet(n,t,p)}}}catch(e){s.warn("Inject snippet error: "+e)}return c.apply(n,arguments)},n.end=function(t,r,c){try{if(o&&i){var d=a.getContentEncodingFromHeaders(n),u=void 0;if("string"==typeof r&&(u=r),null==d)e.INSTANCE.ValidateInjection(n,t)&&(arguments[0]=e.INSTANCE.InjectWebSnippet(n,t,void 0,u));else if(d.length){var p=d[0];arguments[0]=e.INSTANCE.InjectWebSnippet(n,t,p)}}}catch(e){s.warn("Inject snippet error: "+e)}return l.apply(n,arguments)},r(t,n)},n(t,i)}},e.prototype.ValidateInjection=function(t,n){try{if(!t||!n||200!=t.statusCode)return!1;if(!a.isContentTypeHeaderHtml(t))return!1;var i=n.slice().toString();if(i.indexOf("<head>")>=0&&i.indexOf("</head>")>=0&&i.indexOf(e._aiUrl)<0&&i.indexOf(e._aiDeprecatedUrl)<0)return!0}catch(e){s.info("validate injections error: "+e)}return!1},e.prototype.InjectWebSnippet=function(t,n,i,r){try{if(i)t.removeHeader("Content-Length"),n=this._getInjectedCompressBuffer(t,n,i),t.setHeader("Content-Length",n.length);else{var o=n.toString(),c=o.indexOf("</head>");if(c<0)return n;var l=a.insertSnippetByIndex(c,o,e._snippet);if("string"==typeof n)t.removeHeader("Content-Length"),n=l,t.setHeader("Content-Length",Buffer.byteLength(n));else if(Buffer.isBuffer(n)){var d=r||"utf8";if(a.isBufferType(n,d)){t.removeHeader("Content-Length");var u=Buffer.from(l).toString(d);n=Buffer.from(u,d),t.setHeader("Content-Length",n.length)}}}}catch(e){s.warn("Failed to inject web snippet and change content-lenght headers. Exception:"+e)}return n},e.prototype._getInjectedCompressBuffer=function(e,t,n){try{switch(n){case a.contentEncodingMethod.GZIP:var i=o.gunzipSync(t);if(this.ValidateInjection(e,i)){var r=this.InjectWebSnippet(e,i);t=o.gzipSync(r)}break;case a.contentEncodingMethod.DEFLATE:var c=o.inflateSync(t);if(this.ValidateInjection(e,c)){var l=this.InjectWebSnippet(e,c);t=o.deflateSync(l)}break;case a.contentEncodingMethod.BR:var d=a.getBrotliDecompressSync(o),u=a.getBrotliCompressSync(o);if(d&&u){var p=d(t);this.ValidateInjection(e,p)&&(t=u(this.InjectWebSnippet(e,p)));break}}}catch(e){s.info("get web injection compress buffer error: "+e)}return t},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();e.exports=p},60211:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseEventHubSpan=void 0;var r=n(94284),o=n(96237),s=n(47480),a=n(63580);t.parseEventHubSpan=function(e,t){var n,c=e.attributes[a.AzNamespace],l=(e.attributes[s.SemanticAttributes.NET_PEER_NAME]||e.attributes["peer.address"]||"unknown").replace(/\/$/g,""),d=e.attributes[a.MessageBusDestination]||"unknown";switch(e.kind){case r.SpanKind.CLIENT:t.dependencyTypeName=c,t.target=l+"/"+d;break;case r.SpanKind.PRODUCER:t.dependencyTypeName=a.DependencyTypeName.QueueMessage+" | "+c,t.target=l+"/"+d;break;case r.SpanKind.CONSUMER:t.source=l+"/"+d,t.measurements=i(i({},t.measurements),((n={})[a.TIME_SINCE_ENQUEUED]=function(e){var t=0,n=0,i=o.hrTimeToMilliseconds(e.startTime);return e.links.forEach((function(e){var r=e.attributes,o=null==r?void 0:r[a.ENQUEUED_TIME];o&&(t+=1,n+=i-(parseFloat(o.toString())||0))})),Math.max(n/(t||1),0)}(e),n))}}},65946:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spanToTelemetryContract=void 0;var i=n(57310),r=n(94284),o=n(47480),s=n(63580),a=n(60211),c=n(25740);function l(e){if(e.attributes[o.SemanticAttributes.HTTP_METHOD]){var t=e.attributes[o.SemanticAttributes.HTTP_URL];if(t)return String(t);var n=e.attributes[o.SemanticAttributes.HTTP_SCHEME],i=e.attributes[o.SemanticAttributes.HTTP_TARGET];if(n&&i){var r=e.attributes[o.SemanticAttributes.HTTP_HOST];if(r)return n+"://"+r+i;var s=e.attributes[o.SemanticAttributes.NET_PEER_PORT];if(s){var a=e.attributes[o.SemanticAttributes.NET_PEER_NAME];if(a)return n+"://"+a+":"+s+i;var c=e.attributes[o.SemanticAttributes.NET_PEER_IP];if(c)return n+"://"+c+":"+s+i}}}return""}function d(e){var t=e.attributes[o.SemanticAttributes.PEER_SERVICE],n=e.attributes[o.SemanticAttributes.HTTP_HOST],i=e.attributes[o.SemanticAttributes.HTTP_URL],r=e.attributes[o.SemanticAttributes.NET_PEER_NAME],s=e.attributes[o.SemanticAttributes.NET_PEER_IP];return t?String(t):n?String(n):i?String(i):r?String(r):s?String(s):""}t.spanToTelemetryContract=function(e){var t;switch(e.kind){case r.SpanKind.CLIENT:case r.SpanKind.PRODUCER:case r.SpanKind.INTERNAL:t=function(e){var t={name:e.name,success:e.status.code!=r.SpanStatusCode.ERROR,resultCode:"0",duration:0,data:"",dependencyTypeName:""};e.kind===r.SpanKind.PRODUCER&&(t.dependencyTypeName=s.DependencyTypeName.QueueMessage),e.kind===r.SpanKind.INTERNAL&&e.parentSpanId&&(t.dependencyTypeName=s.DependencyTypeName.InProc);var n=e.attributes[o.SemanticAttributes.HTTP_METHOD],a=e.attributes[o.SemanticAttributes.DB_SYSTEM],c=e.attributes[o.SemanticAttributes.RPC_SYSTEM];if(n){t.dependencyTypeName=s.DependencyTypeName.Http;var u=e.attributes[o.SemanticAttributes.HTTP_URL];if(u){var p="";try{p=new i.URL(String(u)).pathname}catch(e){}t.name=n+" "+p}t.data=l(e);var h=e.attributes[o.SemanticAttributes.HTTP_STATUS_CODE];if(h&&(t.resultCode=String(h)),b=d(e)){try{var f=new RegExp(/(https?)(:\/\/.*)(:\d+)(\S*)/).exec(b);if(null!=f){var m=f[1],g=f[3];("https"==m&&":443"==g||"http"==m&&":80"==g)&&(b=f[1]+f[2]+f[4])}}catch(e){}t.target=""+b}}else if(a){String(a)===o.DbSystemValues.MYSQL?t.dependencyTypeName="mysql":String(a)===o.DbSystemValues.POSTGRESQL?t.dependencyTypeName="postgresql":String(a)===o.DbSystemValues.MONGODB?t.dependencyTypeName="mongodb":String(a)===o.DbSystemValues.REDIS?t.dependencyTypeName="redis":function(e){return e===o.DbSystemValues.DB2||e===o.DbSystemValues.DERBY||e===o.DbSystemValues.MARIADB||e===o.DbSystemValues.MSSQL||e===o.DbSystemValues.ORACLE||e===o.DbSystemValues.SQLITE||e===o.DbSystemValues.OTHER_SQL||e===o.DbSystemValues.HSQLDB||e===o.DbSystemValues.H2}(String(a))?t.dependencyTypeName="SQL":t.dependencyTypeName=String(a);var v=e.attributes[o.SemanticAttributes.DB_STATEMENT],y=e.attributes[o.SemanticAttributes.DB_OPERATION];v?t.data=String(v):y&&(t.data=String(y));var b=d(e),w=e.attributes[o.SemanticAttributes.DB_NAME];t.target=b?w?b+"|"+w:""+b:w?""+w:""+a}else if(c){t.dependencyTypeName=s.DependencyTypeName.Grpc;var _=e.attributes[o.SemanticAttributes.RPC_GRPC_STATUS_CODE];_&&(t.resultCode=String(_)),(b=d(e))?t.target=""+b:c&&(t.target=String(c))}return t}(e);break;case r.SpanKind.SERVER:case r.SpanKind.CONSUMER:t=function(e){var t={name:e.name,success:e.status.code!=r.SpanStatusCode.ERROR,resultCode:"0",duration:0,url:"",source:void 0},n=e.attributes[o.SemanticAttributes.HTTP_METHOD],s=e.attributes[o.SemanticAttributes.RPC_GRPC_STATUS_CODE];if(n){if(e.kind==r.SpanKind.SERVER){var a=e.attributes[o.SemanticAttributes.HTTP_ROUTE],c=e.attributes[o.SemanticAttributes.HTTP_URL];if(a)t.name=n+" "+a;else if(c)try{var d=new i.URL(String(c));t.name=n+" "+d.pathname}catch(e){}}t.url=l(e);var u=e.attributes[o.SemanticAttributes.HTTP_STATUS_CODE];u&&(t.resultCode=String(u))}else s&&(t.resultCode=String(s));return t}(e)}var n=""+(e.spanContext?e.spanContext():e.context()).spanId,u=Math.round(1e3*e.duration[0]+e.duration[1]/1e6);return t.id=n,t.duration=u,t.properties=function(e){for(var t={},n=0,i=Object.keys(e.attributes);n<i.length;n++){var r=i[n];r.startsWith("http.")||r.startsWith("rpc.")||r.startsWith("db.")||r.startsWith("peer.")||r.startsWith("net.")||(t[r]=e.attributes[r])}var o=e.links.map((function(e){return{operation_Id:e.context.traceId,id:e.context.spanId}}));return o.length>0&&(t["_MS.links"]=c.stringify(o)),t}(e),e.attributes[s.AzNamespace]&&(e.kind===r.SpanKind.INTERNAL&&(t.dependencyTypeName=s.DependencyTypeName.InProc+" | "+e.attributes[s.AzNamespace]),e.attributes[s.AzNamespace]===s.MicrosoftEventHub&&a.parseEventHubSpan(e,t)),t}},89879:(e,t,n)=>{"use strict";t.wp=t.qP=void 0;var i=n(94284),r=n(63580),o=n(84953),s=n(65946),a=n(20699),c=[];t.qP=function(e){try{var t=e.data,n=s.spanToTelemetryContract(t);a.AsyncScopeManager.with(t,(function(){c.forEach((function(e){t.kind===i.SpanKind.SERVER||t.kind===i.SpanKind.CONSUMER?e.trackRequest(n):t.kind!==i.SpanKind.CLIENT&&t.kind!==i.SpanKind.INTERNAL&&t.kind!==i.SpanKind.PRODUCER||e.trackDependency(n)}))}))}catch(e){}},t.wp=function(e,n){if(e){if(c.find((function(e){return e==n})))return;0===c.length&&o.channel.subscribe("azure-coretracing",t.qP,o.trueFilter,(function(e,t){var i=n.getStatsbeat();i&&i.addInstrumentation(r.StatsbeatInstrumentation.AZURE_CORE_TRACING)})),c.push(n)}else 0===(c=c.filter((function(e){return e!=n}))).length&&o.channel.unsubscribe("azure-coretracing",t.qP)}},35823:(e,t,n)=>{"use strict";t.wp=void 0;var i=n(55290),r=n(63580),o=n(84953),s=[],a={10:i.SeverityLevel.Verbose,20:i.SeverityLevel.Verbose,30:i.SeverityLevel.Information,40:i.SeverityLevel.Warning,50:i.SeverityLevel.Error,60:i.SeverityLevel.Critical},c=function(e){var t=e.data.result;s.forEach((function(n){try{var i=JSON.parse(t);if(i.err){var r=new Error(i.err.message);return r.name=i.err.name,r.stack=i.err.stack,void n.trackException({exception:r})}}catch(e){}var o=a[e.data.level];n.trackTrace({message:t,severity:o})}))};t.wp=function(e,t){if(e){if(s.find((function(e){return e==t})))return;0===s.length&&o.channel.subscribe("bunyan",c,o.trueFilter,(function(e,n){var i=t.getStatsbeat();i&&i.addInstrumentation(r.StatsbeatInstrumentation.BUNYAN)})),s.push(t)}else 0===(s=s.filter((function(e){return e!=t}))).length&&o.channel.unsubscribe("bunyan",c)}},14309:(e,t,n)=>{"use strict";t.wp=void 0;var i=n(55290),r=n(63580),o=n(84953),s=[],a=function(e){var t=e.data.message;s.forEach((function(n){t instanceof Error?n.trackException({exception:t}):(t.lastIndexOf("\n")==t.length-1&&(t=t.substring(0,t.length-1)),n.trackTrace({message:t,severity:e.data.stderr?i.SeverityLevel.Warning:i.SeverityLevel.Information}))}))};t.wp=function(e,t){if(e){if(s.find((function(e){return e==t})))return;0===s.length&&o.channel.subscribe("console",a,o.trueFilter,(function(e,n){var i=t.getStatsbeat();i&&i.addInstrumentation(r.StatsbeatInstrumentation.CONSOLE)})),s.push(t)}else 0===(s=s.filter((function(e){return e!=t}))).length&&o.channel.unsubscribe("console",a)}},87396:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextPreservation=t.IsInitialized=void 0;var i=n(95282),r=n(3063);t.IsInitialized=!r.JsonConfig.getInstance().noDiagnosticChannel;var o="DiagnosticChannel";if(t.IsInitialized){var s=n(4106),a=r.JsonConfig.getInstance().noPatchModules.split(","),c={bunyan:s.bunyan,console:s.console,mongodb:s.mongodb,mongodbCore:s.mongodbCore,mysql:s.mysql,redis:s.redis,pg:s.pg,pgPool:s.pgPool,winston:s.winston,azuresdk:s.azuresdk};for(var l in c)-1===a.indexOf(l)&&(c[l].enable(),i.info(o,"Subscribed to "+l+" events"));a.length>0&&i.info(o,"Some modules will not be patched",a)}else i.info(o,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");t.registerContextPreservation=function(e){t.IsInitialized&&n(84953).channel.addContextPreservation(e)}},67886:(e,t,n)=>{"use strict";t.wp=t.qP=void 0;var i=n(63580),r=n(84953),o=[];t.qP=function(e){"ismaster"!==e.data.event.commandName&&o.forEach((function(t){var n=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:n,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"})}))},t.wp=function(e,n){if(e){if(o.find((function(e){return e==n})))return;0===o.length&&r.channel.subscribe("mongodb",t.qP,r.trueFilter,(function(e,t){var r=n.getStatsbeat();r&&r.addInstrumentation(i.StatsbeatInstrumentation.MONGODB)})),o.push(n)}else 0===(o=o.filter((function(e){return e!=n}))).length&&r.channel.unsubscribe("mongodb",t.qP)}},34777:(e,t,n)=>{"use strict";t.wp=t.qP=void 0;var i=n(63580),r=n(84953),o=[];t.qP=function(e){o.forEach((function(t){var n=e.data.query||{},i=n.sql||"Unknown query",r=!e.data.err,o=(n._connection||{}).config||{},s=o.socketPath?o.socketPath:(o.host||"localhost")+":"+o.port;t.trackDependency({target:s,data:i,name:i,duration:e.data.duration,success:r,resultCode:r?"0":"1",time:e.data.time,dependencyTypeName:"mysql"})}))},t.wp=function(e,n){if(e){if(o.find((function(e){return e==n})))return;0===o.length&&r.channel.subscribe("mysql",t.qP,r.trueFilter,(function(e,t){var r=n.getStatsbeat();r&&r.addInstrumentation(i.StatsbeatInstrumentation.MYSQL)})),o.push(n)}else 0===(o=o.filter((function(e){return e!=n}))).length&&r.channel.unsubscribe("mysql",t.qP)}},31227:(e,t,n)=>{"use strict";t.wp=t.qP=void 0;var i=n(63580),r=n(84953),o=[];t.qP=function(e){o.forEach((function(t){var n=e.data.query,i=n.preparable&&n.preparable.text||n.plan||n.text||"unknown query",r=!e.data.error,o=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:o,data:i,name:i,duration:e.data.duration,success:r,resultCode:r?"0":"1",time:e.data.time,dependencyTypeName:"postgres"})}))},t.wp=function(e,n){if(e){if(o.find((function(e){return e==n})))return;0===o.length&&r.channel.subscribe("postgres",t.qP,r.trueFilter,(function(e,t){var r=n.getStatsbeat();r&&r.addInstrumentation(i.StatsbeatInstrumentation.POSTGRES)})),o.push(n)}else 0===(o=o.filter((function(e){return e!=n}))).length&&r.channel.unsubscribe("postgres",t.qP)}},85071:(e,t,n)=>{"use strict";t.wp=t.qP=void 0;var i=n(63580),r=n(84953),o=[];t.qP=function(e){o.forEach((function(t){"info"!==e.data.commandObj.command&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"})}))},t.wp=function(e,n){if(e){if(o.find((function(e){return e==n})))return;0===o.length&&r.channel.subscribe("redis",t.qP,r.trueFilter,(function(e,t){var r=n.getStatsbeat();r&&r.addInstrumentation(i.StatsbeatInstrumentation.REDIS)})),o.push(n)}else 0===(o=o.filter((function(e){return e!=n}))).length&&r.channel.unsubscribe("redis",t.qP)}},30454:(e,t,n)=>{"use strict";t.wp=void 0;var i=n(63580),r=n(55290),o=n(84953),s=[],a={syslog:function(e){var t={emerg:r.SeverityLevel.Critical,alert:r.SeverityLevel.Critical,crit:r.SeverityLevel.Critical,error:r.SeverityLevel.Error,warning:r.SeverityLevel.Warning,notice:r.SeverityLevel.Information,info:r.SeverityLevel.Information,debug:r.SeverityLevel.Verbose};return void 0===t[e]?r.SeverityLevel.Information:t[e]},npm:function(e){var t={error:r.SeverityLevel.Error,warn:r.SeverityLevel.Warning,info:r.SeverityLevel.Information,verbose:r.SeverityLevel.Verbose,debug:r.SeverityLevel.Verbose,silly:r.SeverityLevel.Verbose};return void 0===t[e]?r.SeverityLevel.Information:t[e]},unknown:function(e){return r.SeverityLevel.Information}},c=function(e){var t=e.data.message;s.forEach((function(n){if(t instanceof Error)n.trackException({exception:t,properties:e.data.meta});else{var i=a[e.data.levelKind](e.data.level);n.trackTrace({message:t,severity:i,properties:e.data.meta})}}))};t.wp=function(e,t){if(e){if(s.find((function(e){return e==t})))return;0===s.length&&o.channel.subscribe("winston",c,o.trueFilter,(function(e,n){var r=t.getStatsbeat();r&&r.addInstrumentation(i.StatsbeatInstrumentation.WINSTON)})),s.push(t)}else 0===(s=s.filter((function(e){return e!=t}))).length&&o.channel.unsubscribe("winston",c)}},63580:(e,t)=>{"use strict";var n,i,r,o,s,a,c,l;Object.defineProperty(t,"__esModule",{value:!0}),t.WEB_INSTRUMENTATION_DEPRECATED_SOURCE=t.WEB_INSTRUMENTATION_DEFAULT_SOURCE=t.TIME_SINCE_ENQUEUED=t.ENQUEUED_TIME=t.MessageBusDestination=t.MicrosoftEventHub=t.AzNamespace=t.StatsbeatNetworkCategory=t.StatsbeatFeatureType=t.StatsbeatInstrumentation=t.StatsbeatFeature=t.StatsbeatCounter=t.StatsbeatAttach=t.StatsbeatResourceProvider=t.StatsbeatTelemetryName=t.HeartBeatMetricName=t.DependencyTypeName=t.TelemetryTypeStringToQuickPulseDocumentType=t.TelemetryTypeStringToQuickPulseType=t.QuickPulseType=t.QuickPulseDocumentType=t.PerformanceToQuickPulseCounter=t.MetricId=t.PerformanceCounter=t.QuickPulseCounter=t.DEFAULT_LIVEMETRICS_HOST=t.DEFAULT_LIVEMETRICS_ENDPOINT=t.DEFAULT_BREEZE_ENDPOINT=t.APPLICATION_INSIGHTS_SDK_VERSION=void 0,t.APPLICATION_INSIGHTS_SDK_VERSION="2.5.0",t.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com",function(e){e.COMMITTED_BYTES="\\Memory\\Committed Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",e.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",e.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",e.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",e.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",e.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",e.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"}(i=t.QuickPulseCounter||(t.QuickPulseCounter={})),function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"}(r=t.PerformanceCounter||(t.PerformanceCounter={})),(l=t.MetricId||(t.MetricId={})).REQUESTS_DURATION="requests/duration",l.DEPENDENCIES_DURATION="dependencies/duration",l.EXCEPTIONS_COUNT="exceptions/count",l.TRACES_COUNT="traces/count",t.PerformanceToQuickPulseCounter=((n={})[r.PROCESSOR_TIME]=i.PROCESSOR_TIME,n[r.REQUEST_RATE]=i.REQUEST_RATE,n[r.REQUEST_DURATION]=i.REQUEST_DURATION,n[i.COMMITTED_BYTES]=i.COMMITTED_BYTES,n[i.REQUEST_FAILURE_RATE]=i.REQUEST_FAILURE_RATE,n[i.DEPENDENCY_RATE]=i.DEPENDENCY_RATE,n[i.DEPENDENCY_FAILURE_RATE]=i.DEPENDENCY_FAILURE_RATE,n[i.DEPENDENCY_DURATION]=i.DEPENDENCY_DURATION,n[i.EXCEPTION_RATE]=i.EXCEPTION_RATE,n),t.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},t.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},t.TelemetryTypeStringToQuickPulseType={EventData:t.QuickPulseType.Event,ExceptionData:t.QuickPulseType.Exception,MessageData:t.QuickPulseType.Trace,MetricData:t.QuickPulseType.Metric,RequestData:t.QuickPulseType.Request,RemoteDependencyData:t.QuickPulseType.Dependency,AvailabilityData:t.QuickPulseType.Availability,PageViewData:t.QuickPulseType.PageView},t.TelemetryTypeStringToQuickPulseDocumentType={EventData:t.QuickPulseDocumentType.Event,ExceptionData:t.QuickPulseDocumentType.Exception,MessageData:t.QuickPulseDocumentType.Trace,MetricData:t.QuickPulseDocumentType.Metric,RequestData:t.QuickPulseDocumentType.Request,RemoteDependencyData:t.QuickPulseDocumentType.Dependency,AvailabilityData:t.QuickPulseDocumentType.Availability,PageViewData:t.QuickPulseDocumentType.PageView},t.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc",Sql:"SQL",QueueMessage:"Queue Message"},t.HeartBeatMetricName="HeartBeat",t.StatsbeatTelemetryName="Statsbeat",t.StatsbeatResourceProvider={appsvc:"appsvc",functions:"functions",vm:"vm",unknown:"unknown"},t.StatsbeatAttach={codeless:"codeless",sdk:"sdk"},t.StatsbeatCounter={REQUEST_SUCCESS:"Request Success Count",REQUEST_FAILURE:"Request Failure Count",REQUEST_DURATION:"Request Duration",RETRY_COUNT:"Retry Count",THROTTLE_COUNT:"Throttle Count",EXCEPTION_COUNT:"Exception Count",ATTACH:"Attach",FEATURE:"Feature"},(c=t.StatsbeatFeature||(t.StatsbeatFeature={}))[c.NONE=0]="NONE",c[c.DISK_RETRY=1]="DISK_RETRY",c[c.AAD_HANDLING=2]="AAD_HANDLING",c[c.WEB_SNIPPET=4]="WEB_SNIPPET",(a=t.StatsbeatInstrumentation||(t.StatsbeatInstrumentation={}))[a.NONE=0]="NONE",a[a.AZURE_CORE_TRACING=1]="AZURE_CORE_TRACING",a[a.MONGODB=2]="MONGODB",a[a.MYSQL=4]="MYSQL",a[a.REDIS=8]="REDIS",a[a.POSTGRES=16]="POSTGRES",a[a.BUNYAN=32]="BUNYAN",a[a.WINSTON=64]="WINSTON",a[a.CONSOLE=128]="CONSOLE",(s=t.StatsbeatFeatureType||(t.StatsbeatFeatureType={}))[s.Feature=0]="Feature",s[s.Instrumentation=1]="Instrumentation",(o=t.StatsbeatNetworkCategory||(t.StatsbeatNetworkCategory={}))[o.Breeze=0]="Breeze",o[o.Quickpulse=1]="Quickpulse",t.AzNamespace="az.namespace",t.MicrosoftEventHub="Microsoft.EventHub",t.MessageBusDestination="message_bus.destination",t.ENQUEUED_TIME="enqueuedTime",t.TIME_SINCE_ENQUEUED="timeSinceEnqueued",t.WEB_INSTRUMENTATION_DEFAULT_SOURCE="https://js.monitor.azure.com/scripts/b/ai",t.WEB_INSTRUMENTATION_DEPRECATED_SOURCE="https://az416426.vo.msecnd.net/scripts/b/ai"},69382:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.domainSupportsProperties=t.RemoteDependencyDataConstants=void 0;var i=n(99958),r=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();t.RemoteDependencyDataConstants=r,t.domainSupportsProperties=function(e){return"properties"in e||e instanceof i.EventData||e instanceof i.ExceptionData||e instanceof i.MessageData||e instanceof i.MetricData||e instanceof i.PageViewData||e instanceof i.RemoteDependencyData||e instanceof i.RequestData}},27220:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(n(78934));e.exports=o},64101:e=>{"use strict";e.exports=function(){}},69871:e=>{"use strict";e.exports=function(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}},320:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){return e.call(this)||this}return r(t,e),t}(n(64101));e.exports=o},78602:(e,t,n)=>{"use strict";var i=n(80495);e.exports=function(){this.kind=i.Measurement}},80495:e=>{"use strict";var t;!function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"}(t||(t={})),e.exports=t},78934:e=>{"use strict";e.exports=function(){}},37300:e=>{"use strict";e.exports=function(){this.ver=1,this.sampleRate=100,this.tags={}}},44526:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(n(78934));e.exports=o},40935:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return r(t,e),t}(n(78934));e.exports=o},18082:e=>{"use strict";e.exports=function(){this.hasFullStack=!0,this.parsedStack=[]}},10901:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t}return r(t,e),t}(n(78934));e.exports=o},33092:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return r(t,e),t}(n(78934));e.exports=o},56279:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(n(44526));e.exports=o},86290:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return r(t,e),t}(n(78934));e.exports=o},7339:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(n(78934));e.exports=o},39697:e=>{"use strict";var t;!function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"}(t||(t={})),e.exports=t},76376:e=>{"use strict";e.exports=function(){}},99958:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvailabilityData=n(27220),t.Base=n(64101),t.ContextTagKeys=n(69871),t.Data=n(320),t.DataPoint=n(78602),t.DataPointType=n(80495),t.Domain=n(78934),t.Envelope=n(37300),t.EventData=n(44526),t.ExceptionData=n(40935),t.ExceptionDetails=n(18082),t.MessageData=n(10901),t.MetricData=n(33092),t.PageViewData=n(56279),t.RemoteDependencyData=n(86290),t.RequestData=n(7339),t.SeverityLevel=n(39697),t.StackFrame=n(76376)},76522:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},40532:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},84429:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8937:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},49003:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},15323:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},89477:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6647:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},85977:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(89477),t),r(n(84429),t),r(n(40532),t),r(n(49003),t),r(n(15323),t),r(n(76522),t),r(n(6647),t),r(n(8937),t)},93382:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},31727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},16375:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},78010:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},62637:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},34381:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},71143:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},42166:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},74013:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},72334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},18836:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},75481:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryType=t.TelemetryTypeString=t.baseTypeToTelemetryType=t.telemetryTypeToBaseType=void 0,t.telemetryTypeToBaseType=function(e){switch(e){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData";case n.PageView:return"PageViewData"}},t.baseTypeToTelemetryType=function(e){switch(e){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability;case"PageViewData":return n.PageView}},t.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"},function(e){e[e.Event=0]="Event",e[e.Exception=1]="Exception",e[e.Trace=2]="Trace",e[e.Metric=3]="Metric",e[e.Request=4]="Request",e[e.Dependency=5]="Dependency",e[e.Availability=6]="Availability",e[e.PageView=7]="PageView"}(n=t.TelemetryType||(t.TelemetryType={}))},35539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},62626:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(31727),t),r(n(78010),t),r(n(62637),t),r(n(34381),t),r(n(72334),t),r(n(35539),t),r(n(18836),t),r(n(71143),t),r(n(42166),t),r(n(93382),t),r(n(74013),t),r(n(16375),t),r(n(75481),t)},55290:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(69382),t),r(n(99958),t),r(n(62626),t),r(n(85977),t)},60521:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggregatedMetricCounter=void 0;t.AggregatedMetricCounter=function(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}},77535:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreaggregatedMetricPropertyNames=void 0,t.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}},80287:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=n(36709);function s(e){return null}var a=function(){function e(e){this._azureTokenPolicy=o.bearerTokenAuthenticationPolicy({credential:e,scopes:["https://monitor.azure.com//.default"]})}return e.prototype.addAuthorizationHeader=function(e){return i(this,void 0,void 0,(function(){var t,n;return r(this,(function(i){switch(i.label){case 0:return t="authorization",n=o.createPipelineRequest({url:"https://"}),[4,this._azureTokenPolicy.sendRequest(n,s)];case 1:return i.sent(),e.headers[t]=n.headers.get(t),[2]}}))}))},e}();e.exports=a},32713:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AzureVirtualMachine=void 0;var i=n(95282),r=n(25740),o=n(88723),s=function(){function e(){}return e.getAzureComputeMetadata=function(t,n){var s,a=this,c={},l=((s={method:"GET"})[o.disableCollectionRequestOption]=!0,s.headers={Metadata:"True"},s),d=r.makeRequest(t,"http://169.254.169.254/metadata/instance/compute?api-version=2017-12-01&format=json",l,(function(t){if(200===t.statusCode){c.isVM=!0;var r="";t.on("data",(function(e){r+=e})),t.on("end",(function(){try{var t=JSON.parse(r);c.id=t.vmId||"",c.subscriptionId=t.subscriptionId||"",c.osType=t.osType||""}catch(t){i.info(e.TAG,t)}n(c)}))}else n(c)}),!1,!1);d&&(setTimeout((function(){a._requestTimedOut=!0,d.abort()}),e.HTTP_TIMEOUT),d.on("error",(function(t){a._requestTimedOut&&t&&(t.name="telemetry timeout",t.message="telemetry request timed out"),t&&t.message&&t.message.indexOf("UNREACH")>-1?c.isVM=!1:i.info(e.TAG,t),n(c)})),d.end())},e.HTTP_TIMEOUT=2500,e.TAG="AzureVirtualMachine",e}();t.AzureVirtualMachine=s},3504:(e,t,n)=>{"use strict";var i=n(95282),r=n(25740),o=function(){function e(e,t,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=n,this._sender=i}return e.prototype.setUseDiskRetryCaching=function(e,t,n){this._sender.setDiskRetryMode(e,t,n)},e.prototype.send=function(e){var t=this;this._isDisabled()||(e?(this._buffer.push(e),this._buffer.length>=this._getBatchSize()?this.triggerSend(!1):!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout((function(){t._timeoutHandle=null,t.triggerSend(!1)}),this._getBatchIntervalMs()))):i.warn("Cannot send null/undefined telemetry"))},e.prototype.triggerSend=function(e,t){var n=this._buffer.length<1;n||(e||r.isNodeExit?(this._sender.saveOnCrash(this._buffer),"function"==typeof t&&t("data saved on crash")):this._sender.send(this._buffer,t)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&"function"==typeof t&&t("no data to send")},e}();e.exports=o},69253:(e,t,n)=>{"use strict";var i=n(29962),r=n(55158),o=n(95282),s=n(63580),a=n(57310),c=n(3063),l=function(){function e(t){this._endpointBase=s.DEFAULT_BREEZE_ENDPOINT,this._mergeConfig();var n=this._connectionString,i=r.parse(t),o=r.parse(n),c=!i.instrumentationkey&&Object.keys(i).length>0?null:t,l=this._instrumentationKey;this.instrumentationKey=i.instrumentationkey||c||o.instrumentationkey||l;var d=""+(this.endpointUrl||i.ingestionendpoint||o.ingestionendpoint||this._endpointBase);d.endsWith("/")&&(d=d.slice(0,-1)),this.endpointUrl=d+"/v2.1/track",this.maxBatchSize=this.maxBatchSize||250,this.maxBatchIntervalMs=this.maxBatchIntervalMs||15e3,this.disableAppInsights=this.disableAppInsights||!1,this.samplingPercentage=this.samplingPercentage||100,this.correlationIdRetryIntervalMs=this.correlationIdRetryIntervalMs||3e4,this.enableWebInstrumentation=this.enableWebInstrumentation||this.enableAutoWebSnippetInjection||!1,this.webInstrumentationConfig=this.webInstrumentationConfig||null,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.correlationHeaderExcludedDomains=this.correlationHeaderExcludedDomains||["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.ignoreLegacyHeaders=this.ignoreLegacyHeaders||!1,this.profileQueryEndpoint=i.ingestionendpoint||o.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this._endpointBase,this.quickPulseHost=this.quickPulseHost||i.liveendpoint||o.liveendpoint||process.env[e.ENV_quickPulseHost]||s.DEFAULT_LIVEMETRICS_HOST,this.webInstrumentationConnectionString=this.webInstrumentationConnectionString||this._webInstrumentationConnectionString||"",this.webSnippetConnectionString=this.webInstrumentationConnectionString,this.quickPulseHost.match(/^https?:\/\//)&&(this.quickPulseHost=new a.URL(this.quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){this._profileQueryEndpoint=e,this.correlationId=i.correlationIdPrefix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"instrumentationKey",{get:function(){return this._instrumentationKey},set:function(t){e._validateInstrumentationKey(t)||o.warn("An invalid instrumentation key was provided. There may be resulting telemetry loss",this.instrumentationKey),this._instrumentationKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"webSnippetConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"webInstrumentationConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),e.prototype._mergeConfig=function(){var e=c.JsonConfig.getInstance();this._connectionString=e.connectionString,this._instrumentationKey=e.instrumentationKey,this.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains,this.correlationIdRetryIntervalMs=e.correlationIdRetryIntervalMs,this.disableAllExtendedMetrics=e.disableAllExtendedMetrics,this.disableAppInsights=e.disableAppInsights,this.disableStatsbeat=e.disableStatsbeat,this.distributedTracingMode=e.distributedTracingMode,this.enableAutoCollectConsole=e.enableAutoCollectConsole,this.enableAutoCollectDependencies=e.enableAutoCollectDependencies,this.enableAutoCollectIncomingRequestAzureFunctions=e.enableAutoCollectIncomingRequestAzureFunctions,this.enableAutoCollectExceptions=e.enableAutoCollectExceptions,this.enableAutoCollectExtendedMetrics=e.enableAutoCollectExtendedMetrics,this.enableAutoCollectExternalLoggers=e.enableAutoCollectExternalLoggers,this.enableAutoCollectHeartbeat=e.enableAutoCollectHeartbeat,this.enableAutoCollectPerformance=e.enableAutoCollectPerformance,this.enableAutoCollectPreAggregatedMetrics=e.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectRequests=e.enableAutoCollectRequests,this.enableAutoDependencyCorrelation=e.enableAutoDependencyCorrelation,this.enableInternalDebugLogging=e.enableInternalDebugLogging,this.enableInternalWarningLogging=e.enableInternalWarningLogging,this.enableResendInterval=e.enableResendInterval,this.enableMaxBytesOnDisk=e.enableMaxBytesOnDisk,this.enableSendLiveMetrics=e.enableSendLiveMetrics,this.enableUseAsyncHooks=e.enableUseAsyncHooks,this.enableUseDiskRetryCaching=e.enableUseDiskRetryCaching,this.endpointUrl=e.endpointUrl,this.extendedMetricDisablers=e.extendedMetricDisablers,this.ignoreLegacyHeaders=e.ignoreLegacyHeaders,this.maxBatchIntervalMs=e.maxBatchIntervalMs,this.maxBatchSize=e.maxBatchSize,this.proxyHttpUrl=e.proxyHttpUrl,this.proxyHttpsUrl=e.proxyHttpsUrl,this.quickPulseHost=e.quickPulseHost,this.samplingPercentage=e.samplingPercentage,this.enableWebInstrumentation=e.enableWebInstrumentation,this._webInstrumentationConnectionString=e.webInstrumentationConnectionString,this.webInstrumentationConfig=e.webInstrumentationConfig,this.webInstrumentationSrc=e.webInstrumentationSrc},e._validateInstrumentationKey=function(e){return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e}();e.exports=l},55158:(e,t,n)=>{"use strict";var i=n(63580),r=function(){function e(){}return e.parse=function(t){if(!t)return{};var n=t.split(e._FIELDS_SEPARATOR).reduce((function(t,n){var i=n.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===i.length){var r=i[0].toLowerCase(),o=i[1];t[r]=o}return t}),{});if(Object.keys(n).length>0){if(n.endpointsuffix){var r=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+r+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+r+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||i.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||i.DEFAULT_LIVEMETRICS_ENDPOINT}return n},e.isIkeyValid=function(e){return!(!e||""==e)&&new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();e.exports=r},54470:(e,t,n)=>{"use strict";var i=n(22037),r=n(57147),o=n(71017),s=n(55290),a=n(63580),c=n(95282),l=function(){function e(e){this.keys=new s.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||o.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var n=JSON.parse(r.readFileSync(t,"utf8"));n&&"string"==typeof n.version&&(e.appVersion[t]=n.version)}catch(e){c.info("unable to read app version: ",e)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=i&&i.hostname(),this.tags[this.keys.deviceOSVersion]=i&&i.type()+" "+i.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=i&&i.arch(),this.tags["ai.device.osPlatform"]=i&&i.platform()},e.prototype._loadInternalContext=function(){e.sdkVersion=a.APPLICATION_INSIGHTS_SDK_VERSION,this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();e.exports=l},29962:(e,t,n)=>{"use strict";var i=n(25740),r=function(){function e(){}return e.queryCorrelationId=function(e,t){},e.cancelCorrelationIdQuery=function(e,t){},e.generateRequestId=function(t){if(t){"."!==(t="|"==t[0]?t:"|"+t)[t.length-1]&&(t+=".");var n=(e.currentRootId++).toString(16);return e.appendSuffix(t,n,"_")}return e.generateRootId()},e.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var n="|"===e[0]?1:0;return e.substring(n,t)},e.generateRootId=function(){return"|"+i.w3cTraceId()+"."},e.appendSuffix=function(t,n,r){if(t.length+n.length<e.requestIdMaxLength)return t+n+r;var o=e.requestIdMaxLength-9;if(t.length>o)for(;o>1;--o){var s=t[o-1];if("."===s||"_"===s)break}if(o<=1)return e.generateRootId();for(n=i.randomu32().toString(16);n.length<8;)n="0"+n;return t.substring(0,o)+n+"#"},e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.HTTP_TIMEOUT=2500,e.requestIdMaxLength=1024,e.currentRootId=i.randomu32(),e}();e.exports=r},99813:(e,t,n)=>{"use strict";var i=n(55290),r=n(25740),o=n(70894),s=function(){function e(){}return e.createEnvelope=function(t,n,o,s,a){var c=null;switch(n){case i.TelemetryType.Trace:c=e.createTraceData(t);break;case i.TelemetryType.Dependency:c=e.createDependencyData(t);break;case i.TelemetryType.Event:c=e.createEventData(t);break;case i.TelemetryType.Exception:c=e.createExceptionData(t);break;case i.TelemetryType.Request:c=e.createRequestData(t);break;case i.TelemetryType.Metric:c=e.createMetricData(t);break;case i.TelemetryType.Availability:c=e.createAvailabilityData(t);break;case i.TelemetryType.PageView:c=e.createPageViewData(t)}if(c&&c.baseData&&i.domainSupportsProperties(c.baseData)){if(o)if(c.baseData.properties)for(var l in o)c.baseData.properties[l]||(c.baseData.properties[l]=o[l]);else c.baseData.properties=o;e.addAzureFunctionsCorrelationProperties(c.baseData.properties),c.baseData.properties&&(c.baseData.properties=r.validateStringMap(c.baseData.properties))}var d=a&&a.instrumentationKey||"",u=new i.Envelope;return u.data=c,u.iKey=d,u.name="Microsoft.ApplicationInsights."+d.replace(/-/g,"")+"."+c.baseType.substr(0,c.baseType.length-4),u.tags=this.getTags(s,t.tagOverrides),u.time=(new Date).toISOString(),u.ver=1,u.sampleRate=a?a.samplingPercentage:100,n===i.TelemetryType.Metric&&(u.sampleRate=100),u},e.addAzureFunctionsCorrelationProperties=function(e){var t=o.CorrelationContextManager.getCurrentContext();if(t&&t.customProperties&&t.customProperties.getProperty instanceof Function){e=e||{};var n=t.customProperties.getProperty("InvocationId");n&&(e.InvocationId=n),(n=t.customProperties.getProperty("ProcessId"))&&(e.ProcessId=n),(n=t.customProperties.getProperty("LogLevel"))&&(e.LogLevel=n),(n=t.customProperties.getProperty("Category"))&&(e.Category=n),(n=t.customProperties.getProperty("HostInstanceId"))&&(e.HostInstanceId=n),(n=t.customProperties.getProperty("AzFuncLiveLogsSessionId"))&&(e.AzFuncLiveLogsSessionId=n)}},e.createTraceData=function(e){var t=new i.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=i.SeverityLevel.Information:t.severityLevel=e.severity;var n=new i.Data;return n.baseType=i.telemetryTypeToBaseType(i.TelemetryType.Trace),n.baseData=t,n},e.createDependencyData=function(e){var t=new i.RemoteDependencyData;"string"==typeof e.name&&(t.name=e.name.length>1024?e.name.slice(0,1021)+"...":e.name),t.data=e.data,t.target=e.target,t.duration=r.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode?e.resultCode.toString():"0",e.id?t.id=e.id:t.id=r.w3cTraceId();var n=new i.Data;return n.baseType=i.telemetryTypeToBaseType(i.TelemetryType.Dependency),n.baseData=t,n},e.createEventData=function(e){var t=new i.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var n=new i.Data;return n.baseType=i.telemetryTypeToBaseType(i.TelemetryType.Event),n.baseData=t,n},e.createExceptionData=function(e){var t=new i.ExceptionData;t.properties=e.properties,isNaN(e.severity)?t.severityLevel=i.SeverityLevel.Error:t.severityLevel=e.severity,t.measurements=e.measurements,t.exceptions=[];var n=e.exception.stack,o=new i.ExceptionDetails;o.message=e.exception.message,o.typeName=e.exception.name,o.parsedStack=this.parseStack(n),o.hasFullStack=r.isArray(o.parsedStack)&&o.parsedStack.length>0,t.exceptions.push(o);var s=new i.Data;return s.baseType=i.telemetryTypeToBaseType(i.TelemetryType.Exception),s.baseData=t,s},e.createRequestData=function(e){var t=new i.RequestData;e.id?t.id=e.id:t.id=r.w3cTraceId(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=r.msToTimeSpan(e.duration),t.responseCode=e.resultCode?e.resultCode.toString():"0",t.success=e.success,t.properties=e.properties,t.measurements=e.measurements;var n=new i.Data;return n.baseType=i.telemetryTypeToBaseType(i.TelemetryType.Request),n.baseData=t,n},e.createMetricData=function(e){var t=new i.MetricData;t.metrics=[];var n=new i.DataPoint;n.count=isNaN(e.count)?1:e.count,n.kind=i.DataPointType.Aggregation,n.max=isNaN(e.max)?e.value:e.max,n.min=isNaN(e.min)?e.value:e.min,n.name=e.name,n.stdDev=isNaN(e.stdDev)?0:e.stdDev,n.value=e.value,n.ns=e.namespace,t.metrics.push(n),t.properties=e.properties;var r=new i.Data;return r.baseType=i.telemetryTypeToBaseType(i.TelemetryType.Metric),r.baseData=t,r},e.createAvailabilityData=function(e){var t=new i.AvailabilityData;e.id?t.id=e.id:t.id=r.w3cTraceId(),t.name=e.name,t.duration=r.msToTimeSpan(e.duration),t.success=e.success,t.runLocation=e.runLocation,t.message=e.message,t.measurements=e.measurements,t.properties=e.properties;var n=new i.Data;return n.baseType=i.telemetryTypeToBaseType(i.TelemetryType.Availability),n.baseData=t,n},e.createPageViewData=function(e){var t=new i.PageViewData;t.name=e.name,t.duration=r.msToTimeSpan(e.duration),t.url=e.url,t.measurements=e.measurements,t.properties=e.properties;var n=new i.Data;return n.baseType=i.telemetryTypeToBaseType(i.TelemetryType.PageView),n.baseData=t,n},e.getTags=function(e,t){var n=o.CorrelationContextManager.getCurrentContext(),i={};if(e&&e.tags)for(var r in e.tags)i[r]=e.tags[r];if(t)for(var r in t)i[r]=t[r];return n&&(i[e.keys.operationId]=i[e.keys.operationId]||n.operation.id,i[e.keys.operationName]=i[e.keys.operationName]||n.operation.name,i[e.keys.operationParentId]=i[e.keys.operationParentId]||n.operation.parentId),i},e.parseStack=function(e){var t=void 0;if("string"==typeof e){var n=e.split("\n");t=[];for(var i=0,r=0,o=0;o<=n.length;o++){var s=n[o];if(a.regex.test(s)){var c=new a(n[o],i++);r+=c.sizeInBytes,t.push(c)}}if(r>32768)for(var l=0,d=t.length-1,u=0,p=l,h=d;l<d;){if((u+=t[l].sizeInBytes+t[d].sizeInBytes)>32768){var f=h-p+1;t.splice(p,f);break}p=l,h=d,l++,d--}}return t},e}(),a=function(){function e(t,n){this.sizeInBytes=0,this.level=n,this.method="<no_method>",this.assembly=r.trim(t);var i=t.match(e.regex);i&&i.length>=5&&(this.method=r.trim(i[2])||this.method,this.fileName=r.trim(i[4])||"<no_filename>",this.line=parseInt(i[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();e.exports=s},12640:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileAccessControl=void 0;var o=n(57147),s=n(22037),a=n(32081),c=n(95282),l=function(){function e(){}return e.checkFileProtection=function(){if(!e.OS_PROVIDES_FILE_PROTECTION&&!e.OS_FILE_PROTECTION_CHECKED)if(e.OS_FILE_PROTECTION_CHECKED=!0,e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=o.existsSync(e.ICACLS_PATH)}catch(e){}e.OS_PROVIDES_FILE_PROTECTION||c.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0},e.applyACLRules=function(t){return i(this,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:if(!e.USE_ICACLS)return[3,7];if(void 0!==e.ACLED_DIRECTORIES[t])return[3,6];e.ACLED_DIRECTORIES[t]=!1,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,this._getACLIdentity()];case 2:return n=r.sent(),[4,this._runICACLS(this._getACLArguments(t,n))];case 3:return r.sent(),e.ACLED_DIRECTORIES[t]=!0,[3,5];case 4:throw i=r.sent(),e.ACLED_DIRECTORIES[t]=!1,i;case 5:return[3,7];case 6:if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)");r.label=7;case 7:return[2]}}))}))},e.applyACLRulesSync=function(t){if(e.USE_ICACLS){if(void 0===e.ACLED_DIRECTORIES[t])return this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),void(e.ACLED_DIRECTORIES[t]=!0);if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e._runICACLS=function(t){return new Promise((function(n,i){var r=a.spawn(e.ICACLS_PATH,t,{windowsHide:!0});r.on("error",(function(e){return i(e)})),r.on("close",(function(e,t){0===e?n():i(new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+e+")"))}))}))},e._runICACLSSync=function(t){if(!a.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var n=a.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(n.error)throw n.error;if(0!==n.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+n.status+")")},e._getACLIdentity=function(){return new Promise((function(t,n){e.ACL_IDENTITY&&t(e.ACL_IDENTITY);var i=a.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),r="";i.stdout.on("data",(function(e){return r+=e})),i.on("error",(function(e){return n(e)})),i.on("close",(function(i,o){e.ACL_IDENTITY=r&&r.trim(),0===i?t(e.ACL_IDENTITY):n(new Error("Getting ACL identity did not succeed (PS returned code "+i+")"))}))}))},e._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(a.spawnSync){var t=a.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(0!==t.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},e.TAG="FileAccessControl",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.OS_FILE_PROTECTION_CHECKED=!1,e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS="Windows_NT"===s.type(),e}();t.FileAccessControl=l},30164:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getShallowFileSize=t.getShallowDirectorySizeSync=t.getShallowDirectorySize=t.confirmDirExists=t.unlinkAsync=t.readdirAsync=t.readFileAsync=t.writeFileAsync=t.appendFileAsync=t.accessAsync=t.mkdirAsync=t.lstatAsync=t.statAsync=void 0;var o=n(57147),s=n(71017),a=n(73837);t.statAsync=a.promisify(o.stat),t.lstatAsync=a.promisify(o.lstat),t.mkdirAsync=a.promisify(o.mkdir),t.accessAsync=a.promisify(o.access),t.appendFileAsync=a.promisify(o.appendFile),t.writeFileAsync=a.promisify(o.writeFile),t.readFileAsync=a.promisify(o.readFile),t.readdirAsync=a.promisify(o.readdir),t.unlinkAsync=a.promisify(o.unlink),t.confirmDirExists=function(e){return i(void 0,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,7]),[4,t.lstatAsync(e)];case 1:if(!r.sent().isDirectory())throw new Error("Path existed but was not a directory");return[3,7];case 2:if(!(n=r.sent())||"ENOENT"!==n.code)return[3,6];r.label=3;case 3:return r.trys.push([3,5,,6]),[4,t.mkdirAsync(e)];case 4:return r.sent(),[3,6];case 5:if((i=r.sent())&&"EEXIST"!==i.code)throw i;return[3,6];case 6:return[3,7];case 7:return[2]}}))}))},t.getShallowDirectorySize=function(e){return i(void 0,void 0,void 0,(function(){var n,i,o,a,c,l;return r(this,(function(r){switch(r.label){case 0:return[4,t.readdirAsync(e)];case 1:n=r.sent(),i=0,o=0,a=n,r.label=2;case 2:return o<a.length?(c=a[o],[4,t.statAsync(s.join(e,c))]):[3,5];case 3:(l=r.sent()).isFile()&&(i+=l.size),r.label=4;case 4:return o++,[3,2];case 5:return[2,i]}}))}))},t.getShallowDirectorySizeSync=function(e){for(var t=o.readdirSync(e),n=0,i=0;i<t.length;i++)n+=o.statSync(s.join(e,t[i])).size;return n},t.getShallowFileSize=function(e){return i(void 0,void 0,void 0,(function(){var n;return r(this,(function(i){switch(i.label){case 0:return[4,t.statAsync(e)];case 1:return(n=i.sent()).isFile()?[2,n.size]:[2]}}))}))}},56761:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},23370:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i},s=n(57147),a=n(22037),c=n(71017),l=n(30164),d=function(){function e(){var t=this;this.TAG="Logger",this._cleanupTimeOut=18e5,this._logToFile=!1,this._logToConsole=!0;var n=process.env.APPLICATIONINSIGHTS_LOG_DESTINATION;"file+console"==n&&(this._logToFile=!0),"file"==n&&(this._logToFile=!0,this._logToConsole=!1),this.maxSizeBytes=5e4,this.maxHistory=1,this._logFileName="applicationinsights.log";var i=process.env.APPLICATIONINSIGHTS_LOGDIR;i?c.isAbsolute(i)?this._tempDir=i:this._tempDir=c.join(process.cwd(),i):this._tempDir=c.join(a.tmpdir(),"appInsights-node"),this._fileFullPath=c.join(this._tempDir,this._logFileName),this._backUpNameFormat="."+this._logFileName,this._logToFile&&(e._fileCleanupTimer||(e._fileCleanupTimer=setInterval((function(){t._fileCleanupTask()}),this._cleanupTimeOut),e._fileCleanupTimer.unref()))}return e.prototype.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=e?o([e],t):t;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.info.apply(console,i)},e.prototype.warning=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=e?o([e],t):t;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.warn.apply(console,i)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype._storeToDisk=function(e){return i(this,void 0,void 0,(function(){var t,n,i,o;return r(this,(function(r){switch(r.label){case 0:t=e+"\r\n",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.confirmDirExists(this._tempDir)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),console.log(this.TAG,"Failed to create directory for log file: "+(n&&n.message)),[2];case 4:return r.trys.push([4,6,,11]),[4,l.accessAsync(this._fileFullPath,s.constants.F_OK)];case 5:return r.sent(),[3,11];case 6:i=r.sent(),r.label=7;case 7:return r.trys.push([7,9,,10]),[4,l.appendFileAsync(this._fileFullPath,t)];case 8:return r.sent(),[2];case 9:return r.sent(),console.log(this.TAG,"Failed to put log into file: "+(i&&i.message)),[2];case 10:return[3,11];case 11:return r.trys.push([11,17,,18]),[4,l.getShallowFileSize(this._fileFullPath)];case 12:return r.sent()>this.maxSizeBytes?[4,this._createBackupFile(t)]:[3,14];case 13:return r.sent(),[3,16];case 14:return[4,l.appendFileAsync(this._fileFullPath,t)];case 15:r.sent(),r.label=16;case 16:return[3,18];case 17:return o=r.sent(),console.log(this.TAG,"Failed to create backup file: "+(o&&o.message)),[3,18];case 18:return[2]}}))}))},e.prototype._createBackupFile=function(e){return i(this,void 0,void 0,(function(){var t,n,i;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,4,5]),[4,l.readFileAsync(this._fileFullPath)];case 1:return t=r.sent(),n=c.join(this._tempDir,(new Date).getTime()+"."+this._logFileName),[4,l.writeFileAsync(n,t)];case 2:return r.sent(),[3,5];case 3:return i=r.sent(),console.log("Failed to generate backup log file",i),[3,5];case 4:return l.writeFileAsync(this._fileFullPath,e),[7];case 5:return[2]}}))}))},e.prototype._fileCleanupTask=function(){return i(this,void 0,void 0,(function(){var e,t,n,i,o,s=this;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,6,,7]),[4,l.readdirAsync(this._tempDir)];case 1:(e=(e=r.sent()).filter((function(e){return c.basename(e).indexOf(s._backUpNameFormat)>-1}))).sort((function(e,t){var n=new Date(parseInt(e.split(s._backUpNameFormat)[0])),i=new Date(parseInt(t.split(s._backUpNameFormat)[0]));return n<i?-1:n>=i?1:void 0})),t=e.length,n=0,r.label=2;case 2:return n<t-this.maxHistory?(i=c.join(this._tempDir,e[n]),[4,l.unlinkAsync(i)]):[3,5];case 3:r.sent(),r.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:return o=r.sent(),console.log(this.TAG,"Failed to cleanup log files: "+(o&&o.message)),[3,7];case 7:return[2]}}))}))},e._fileCleanupTimer=null,e}();e.exports=d},3063:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonConfig=void 0;var i=n(57147),r=n(71017),o=n(95282),s="APPSETTING_",a="APPINSIGHTS_INSTRUMENTATIONKEY",c="APPINSIGHTS_INSTRUMENTATION_KEY",l=function(){function e(){this.connectionString=process.env.APPLICATIONINSIGHTS_CONNECTION_STRING,this.instrumentationKey=process.env[a]||process.env[s+a]||process.env[c]||process.env[s+c],!this.connectionString&&this.instrumentationKey&&o.warn("APPINSIGHTS_INSTRUMENTATIONKEY is in path of deprecation, please use APPLICATIONINSIGHTS_CONNECTION_STRING env variable to setup the SDK."),this.disableAllExtendedMetrics=!!process.env.APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS,this.extendedMetricDisablers=process.env.APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC,this.proxyHttpUrl=process.env.http_proxy,this.proxyHttpsUrl=process.env.https_proxy,this.noDiagnosticChannel=!!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL,this.disableStatsbeat=!!process.env.APPLICATION_INSIGHTS_NO_STATSBEAT,this.noHttpAgentKeepAlive=!!process.env.APPLICATION_INSIGHTS_NO_HTTP_AGENT_KEEP_ALIVE,this.noPatchModules=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",this.enableWebInstrumentation=!!process.env.APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_ENABLED||!!process.env.APPLICATIONINSIGHTS_WEB_SNIPPET_ENABLED,this.webInstrumentationSrc=process.env.APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_SOURCE||"",this.webInstrumentationConnectionString=process.env.APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_CONNECTION_STRING||process.env.APPLICATIONINSIGHTS_WEB_SNIPPET_CONNECTION_STRING||"",this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.webSnippetConnectionString=this.webInstrumentationConnectionString,this._loadJsonFile()}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype._loadJsonFile=function(){var e=r.join(__dirname,"../../"),t=r.join(e,"applicationinsights.json"),n=process.env.APPLICATIONINSIGHTS_CONFIGURATION_FILE;n&&(t=r.isAbsolute(n)?n:r.join(e,n));try{var s=JSON.parse(i.readFileSync(t,"utf8"));null!=s.disableStatsbeat&&(this.disableStatsbeat=s.disableStatsbeat),null!=s.disableAllExtendedMetrics&&(this.disableAllExtendedMetrics=s.disableStatsbeat),null!=s.noDiagnosticChannel&&(this.noDiagnosticChannel=s.noDiagnosticChannel),null!=s.noHttpAgentKeepAlive&&(this.noHttpAgentKeepAlive=s.noHttpAgentKeepAlive),null!=s.connectionString&&(this.connectionString=s.connectionString),null!=s.extendedMetricDisablers&&(this.extendedMetricDisablers=s.extendedMetricDisablers),null!=s.noDiagnosticChannel&&(this.noDiagnosticChannel=s.noDiagnosticChannel),null!=s.proxyHttpUrl&&(this.proxyHttpUrl=s.proxyHttpUrl),null!=s.proxyHttpsUrl&&(this.proxyHttpsUrl=s.proxyHttpsUrl),null!=s.proxyHttpsUrl&&(this.proxyHttpsUrl=s.proxyHttpsUrl),null!=s.noPatchModules&&(this.noPatchModules=s.noPatchModules),null!=s.enableAutoWebSnippetInjection&&(this.enableWebInstrumentation=s.enableAutoWebSnippetInjection,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),null!=s.enableWebInstrumentation&&(this.enableWebInstrumentation=s.enableWebInstrumentation,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),null!=s.webSnippetConnectionString&&(this.webInstrumentationConnectionString=s.webSnippetConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),null!=s.webInstrumentationConnectionString&&(this.webInstrumentationConnectionString=s.webInstrumentationConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),null!=s.webInstrumentationConfig&&(this.webInstrumentationConfig=s.webInstrumentationConfig),null!=s.webInstrumentationSrc&&(this.webInstrumentationSrc=s.webInstrumentationSrc),this.endpointUrl=s.endpointUrl,this.maxBatchSize=s.maxBatchSize,this.maxBatchIntervalMs=s.maxBatchIntervalMs,this.disableAppInsights=s.disableAppInsights,this.samplingPercentage=s.samplingPercentage,this.correlationIdRetryIntervalMs=s.correlationIdRetryIntervalMs,this.correlationHeaderExcludedDomains=s.correlationHeaderExcludedDomains,this.ignoreLegacyHeaders=s.ignoreLegacyHeaders,this.distributedTracingMode=s.distributedTracingMode,this.enableAutoCollectExternalLoggers=s.enableAutoCollectExternalLoggers,this.enableAutoCollectConsole=s.enableAutoCollectConsole,this.enableAutoCollectExceptions=s.enableAutoCollectExceptions,this.enableAutoCollectPerformance=s.enableAutoCollectPerformance,this.enableAutoCollectExtendedMetrics=s.enableAutoCollectExtendedMetrics,this.enableAutoCollectPreAggregatedMetrics=s.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectHeartbeat=s.enableAutoCollectHeartbeat,this.enableAutoCollectRequests=s.enableAutoCollectRequests,this.enableAutoCollectDependencies=s.enableAutoCollectDependencies,this.enableAutoDependencyCorrelation=s.enableAutoDependencyCorrelation,this.enableAutoCollectIncomingRequestAzureFunctions=s.enableAutoCollectIncomingRequestAzureFunctions,this.enableUseAsyncHooks=s.enableUseAsyncHooks,this.enableUseDiskRetryCaching=s.enableUseDiskRetryCaching,this.enableResendInterval=s.enableResendInterval,this.enableMaxBytesOnDisk=s.enableMaxBytesOnDisk,this.enableInternalDebugLogging=s.enableInternalDebugLogging,this.enableInternalWarningLogging=s.enableInternalWarningLogging,this.enableSendLiveMetrics=s.enableSendLiveMetrics,this.quickPulseHost=s.quickPulseHost}catch(e){o.info("Missing or invalid JSON config file: ",e)}},e}();t.JsonConfig=l},95282:(e,t,n)=>{"use strict";var i=n(23370),r=function(){function e(){}return e.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.enableDebug&&i.getInstance().info(this.TAG+e,t)},e.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.disableWarnings||i.getInstance().warning(this.TAG+e,t)},e.enableDebug=!1,e.disableWarnings=!1,e.TAG="ApplicationInsights:",e}();e.exports=r},1259:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(67625),s=n(40731),a=n(88723),c=n(95282),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.trackNodeHttpRequestSync=function(e){e&&e.request&&e.response&&e.duration?s.trackRequestSync(this,e):c.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(e){(e.duration||e.error)&&c.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),e&&e.request&&e.response?s.trackRequest(this,e):c.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(e){e&&e.request?a.trackRequest(this,e):c.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(o);e.exports=l},40095:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getResourceProvider=t.getOsPrefix=t.isFunctionApp=t.isWebApp=t.isLinux=t.isWindows=void 0,t.isWindows=function(){return"win32"===process.platform},t.isLinux=function(){return"linux"===process.platform},t.isWebApp=function(){return!!process.env.WEBSITE_SITE_NAME},t.isFunctionApp=function(){return!!process.env.FUNCTIONS_WORKER_RUNTIME},t.getOsPrefix=function(){return t.isWindows()?"w":t.isLinux()?"l":"u"},t.getResourceProvider=function(){return t.isWebApp()?"a":t.isFunctionApp()?"f":"u"}},87148:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=n(22037),o=n(55290),s=n(63580),a=n(25740),c=n(95282),l=a.w3cTraceId(),d=function(){function e(){}return e.createQuickPulseEnvelope=function(e,t,n,i){var o=r&&"function"==typeof r.hostname&&r.hostname()||"Unknown",s=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||o,a=i.tags&&i.keys&&i.keys.cloudRole&&i.tags[i.keys.cloudRole]||null;return{Documents:t.length>0?t:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:l,MachineName:o,Instance:s,RoleName:a}},e.createQuickPulseMetric=function(e){return{Name:e.name,Value:e.value,Weight:e.count||1}},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case o.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case o.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case o.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case o.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case o.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var n=e.createQuickPulseDocument(t),r=t.data.baseData.name;return i(i({},n),{Name:r})},e.createQuickPulseTraceDocument=function(t){var n=e.createQuickPulseDocument(t),r=t.data.baseData.severityLevel||0;return i(i({},n),{Message:t.data.baseData.message,SeverityLevel:o.SeverityLevel[r]})},e.createQuickPulseExceptionDocument=function(t){var n=e.createQuickPulseDocument(t),r=t.data.baseData.exceptions,o="",s="",a="";return r&&r.length>0&&(r[0].parsedStack&&r[0].parsedStack.length>0?r[0].parsedStack.forEach((function(e){o+=e.assembly+"\n"})):r[0].stack&&r[0].stack.length>0&&(o=r[0].stack),s=r[0].message,a=r[0].typeName),i(i({},n),{Exception:o,ExceptionMessage:s,ExceptionType:a})},e.createQuickPulseRequestDocument=function(t){var n=e.createQuickPulseDocument(t),r=t.data.baseData;return i(i({},n),{Name:r.name,Success:r.success,Duration:r.duration,ResponseCode:r.responseCode,OperationName:r.name})},e.createQuickPulseDependencyDocument=function(t){var n=e.createQuickPulseDocument(t),r=t.data.baseData;return i(i({},n),{Name:r.name,Target:r.target,Success:r.success,Duration:r.duration,ResultCode:r.resultCode,CommandName:r.data,OperationName:n.OperationId,DependencyTypeName:r.type})},e.createQuickPulseDocument=function(t){var n,i;return t.data.baseType?(i=s.TelemetryTypeStringToQuickPulseType[t.data.baseType],n=s.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):c.warn("Document type invalid; not sending live metric document",t.data.baseType),{DocumentType:n,__type:i,OperationId:t.tags[e.keys.operationId],Version:"1.0",Properties:e.aggregateProperties(t)}},e.aggregateProperties=function(e){var t=[],n=e.data.baseData.measurements||{};for(var i in n)if(n.hasOwnProperty(i)){var r={key:i,value:n[i]};t.push(r)}var o=e.data.baseData.properties||{};for(var i in o)o.hasOwnProperty(i)&&(r={key:i,value:o[i]},t.push(r));return t},e.keys=new o.ContextTagKeys,e}();e.exports=d},59184:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=n(95687),s=n(88723),a=n(95282),c=n(3751),l=n(25740),d=n(57310),u="x-ms-qps-service-polling-interval-hint",p="x-ms-qps-service-endpoint-redirect-v2",h=function(){function e(e,t){this._config=e,this._consecutiveErrors=0,this._getAuthorizationHandler=t}return e.prototype.ping=function(e,t,n){var i=[{name:"x-ms-qps-stream-id",value:e.StreamId},{name:"x-ms-qps-machine-name",value:e.MachineName},{name:"x-ms-qps-role-name",value:e.RoleName},{name:"x-ms-qps-instance-name",value:e.Instance},{name:"x-ms-qps-invariant-version",value:e.InvariantVersion.toString()}];this._submitData(e,t,n,"ping",i)},e.prototype.post=function(e,t,n){return i(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this._submitData([e],t,n,"post")];case 1:return i.sent(),[2]}}))}))},e.prototype._submitData=function(t,n,h,f,m){return i(this,void 0,void 0,(function(){var i,g,v,y,b,w,_,S=this;return r(this,(function(r){switch(r.label){case 0:if(i=l.stringify(t),(w={})[s.disableCollectionRequestOption]=!0,w.host=n&&n.length>0?n:this._config.quickPulseHost,w.method="POST",w.path="/QuickPulseService.svc/"+f+"?ikey="+this._config.instrumentationKey,w.headers=((_={Expect:"100-continue"})["x-ms-qps-transmission-time"]=c.getTransmissionTime(),_["Content-Type"]="application/json",_["Content-Length"]=Buffer.byteLength(i),_),g=w,m&&m.length>0&&m.forEach((function(e){return g.headers[e.name]=e.value})),"post"!==f)return[3,4];if(!(v=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,v.addAuthorizationHeader(g)];case 2:return r.sent(),[3,4];case 3:return y=r.sent(),a.info(e.TAG,"Failed to get AAD bearer token for the Application. Error:",y),[2];case 4:return this._config.httpsAgent?g.agent=this._config.httpsAgent:g.agent=l.tlsRestrictedAgent,(b=o.request(g,(function(e){if(200==e.statusCode){var t="true"===e.headers["x-ms-qps-subscribed"],n=null;try{n=e.headers[p]?new d.URL(e.headers[p].toString()).host:null}catch(e){S._onError("Failed to parse redirect header from QuickPulse: "+l.dumpObj(e))}var i=e.headers[u]?parseInt(e.headers[u].toString()):null;S._consecutiveErrors=0,h(t,e,n,i)}else S._onError("StatusCode:"+e.statusCode+" StatusMessage:"+e.statusMessage),h()}))).on("error",(function(e){S._onError(e),h()})),b.write(i),b.end(),[2]}}))}))},e.prototype._onError=function(t){this._consecutiveErrors++;var n="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(n="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",a.warn(e.TAG,n,t)):a.info(e.TAG,n,t)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();e.exports=h},83668:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=n(95282),s=n(87148),a=n(59184),c=n(63580),l=n(54470),d=function(){function e(e,t,n){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=t||new l,this._sender=new a(this.config,n),this._isEnabled=!1}return e.prototype.addCollector=function(e){this._collectors.push(e)},e.prototype.trackMetric=function(e){this._addMetric(e)},e.prototype.addDocument=function(e){if(this._isCollectingData){var t=s.telemetryEnvelopeToQuickPulseDocument(e);t&&this._documents.push(t)}},e.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(e){this._collectors.forEach((function(t){t.enable(e)}))},e.prototype._addMetric=function(e){var t=e.value,n=e.count||1,i=c.PerformanceToQuickPulseCounter[e.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+t*n)/(this._metrics[i].Weight+n),this._metrics[i].Weight+=n):(this._metrics[i]=s.createQuickPulseMetric(e),this._metrics[i].Name=i,this._metrics[i].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return i(this,void 0,void 0,(function(){var t,n,i,o,a=this;return r(this,(function(r){switch(r.label){case 0:return t=Object.keys(this._metrics).map((function(e){return a._metrics[e]})),n=s.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(n)]:[3,2];case 1:return r.sent(),[3,3];case 2:this._ping(n),r.label=3;case 3:return i=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,o=this._isCollectingData?e.POST_INTERVAL:i,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,o=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(o=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),o),this._handle.unref(),[2]}}))}))},e.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(e){return i(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return t.sent(),[2]}}))}))},e.prototype._quickPulseDone=function(e,t,n,i){null!=e?(this._isCollectingData!==e&&(o.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,n&&n.length>0&&(this._redirectedHost=n,o.info("Redirecting endpoint to: ",n)),i&&i>0&&(this._pollingIntervalHint=i),t&&t.statusCode<300&&t.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();e.exports=d},3751:e=>{"use strict";e.exports={getTransmissionTime:function(){return 1e4*(Date.now()+621355968e5)}}},59036:e=>{"use strict";e.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}},82588:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=n(57147),s=n(22037),a=n(71017),c=n(59796),l=n(63580),d=n(88723),u=n(30164),p=n(25740),h=n(57310),f=n(95282),m=n(12640),g=[200,206,402,408,429,439,500],v=function(){function e(t,n,i,r,o,c,l){this._redirectedHost=null,this._config=t,this._onSuccess=i,this._onError=r,this._statsbeat=o,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._getAuthorizationHandler=n,this._fileCleanupTimer=null,this._tempDir=a.join(s.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),this._isStatsbeatSender=c||!1,this._shutdownStatsbeat=l,this._failedToIngestCounter=0,this._statsbeatHasReachedIngestionAtLeastOnce=!1}return e.prototype.setDiskRetryMode=function(t,n,i){var r=this;t&&m.FileAccessControl.checkFileProtection(),this._enableDiskRetryMode=m.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&t,"number"==typeof n&&n>=0&&(this._resendInterval=Math.floor(n)),"number"==typeof i&&i>=0&&(this._maxBytesOnDisk=Math.floor(i)),t&&!m.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,this._logWarn("Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?(this._statsbeat&&this._statsbeat.addFeature(l.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout((function(){r._fileCleanupTask()}),e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref())):(this._statsbeat&&this._statsbeat.removeFeature(l.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer))},e.prototype.send=function(t,n){return i(this,void 0,void 0,(function(){var i,o,s,a,u,f,m,v,y=this;return r(this,(function(r){switch(r.label){case 0:if(!t)return[3,5];if(i=this._redirectedHost||this._config.endpointUrl,o=new h.URL(i).hostname,s={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},!(a=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null))return[3,4];this._statsbeat&&this._statsbeat.addFeature(l.StatsbeatFeature.AAD_HANDLING),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,a.addAuthorizationHeader(s)];case 2:return r.sent(),[3,4];case 3:return u=r.sent(),f="Failed to get AAD bearer token for the Application.",this._enableDiskRetryMode&&(f+="This batch of telemetry items will be retried. ",this._storeToDisk(t)),f+="Error:"+u.toString(),this._logWarn(f),"function"==typeof n&&n(f),[2];case 4:m="",t.forEach((function(e){var t=p.stringify(e);"string"==typeof t&&(m+=t+"\n")})),m.length>0&&(m=m.substring(0,m.length-1)),v=Buffer.from?Buffer.from(m):new Buffer(m),c.gzip(v,(function(r,a){var c=a;r?(y._logWarn(p.dumpObj(r)),c=v,s.headers["Content-Length"]=v.length.toString()):(s.headers["Content-Encoding"]="gzip",s.headers["Content-Length"]=a.length.toString()),y._logInfo(p.dumpObj(s)),s[d.disableCollectionRequestOption]=!0;var u=+new Date,h=p.makeRequest(y._config,i,s,(function(e){e.setEncoding("utf-8");var i="";e.on("data",(function(e){i+=e})),e.on("end",(function(){var r=+new Date-u;if(y._numConsecutiveFailures=0,y._isStatsbeatSender&&!y._statsbeatHasReachedIngestionAtLeastOnce&&(g.includes(e.statusCode)?y._statsbeatHasReachedIngestionAtLeastOnce=!0:y._statsbeatFailedToIngest()),y._statsbeat&&(402==e.statusCode||439==e.statusCode?y._statsbeat.countThrottle(l.StatsbeatNetworkCategory.Breeze,o,e.statusCode):y._statsbeat.countRequest(l.StatsbeatNetworkCategory.Breeze,o,r,200===e.statusCode,e.statusCode)),y._enableDiskRetryMode)if(200===e.statusCode)y._resendTimer||(y._resendTimer=setTimeout((function(){y._resendTimer=null,y._sendFirstFileOnDisk()}),y._resendInterval),y._resendTimer.unref());else if(y._isRetriable(e.statusCode))try{y._statsbeat&&y._statsbeat.countRetry(l.StatsbeatNetworkCategory.Breeze,o,e.statusCode);var s=JSON.parse(i),a=[];s.errors&&(s.errors.forEach((function(e){429!=e.statusCode&&500!=e.statusCode&&503!=e.statusCode||a.push(t[e.index])})),a.length>0&&y._storeToDisk(a))}catch(e){y._storeToDisk(t)}if(307===e.statusCode||308===e.statusCode)if(y._numConsecutiveRedirects++,y._numConsecutiveRedirects<10){var c=e.headers.location?e.headers.location.toString():null;c&&(y._redirectedHost=c,y.send(t,n))}else y._statsbeat&&y._statsbeat.countException(l.StatsbeatNetworkCategory.Breeze,o,{name:"Circular Redirect",message:"Error sending telemetry because of circular redirects."}),"function"==typeof n&&n("Error sending telemetry because of circular redirects.");else y._numConsecutiveRedirects=0,"function"==typeof n&&n(i),y._logInfo(i),"function"==typeof y._onSuccess&&y._onSuccess(i)}))}));h.setTimeout(e.HTTP_TIMEOUT,(function(){y._requestTimedOut=!0,h.abort()})),h.on("error",(function(i){if(y._isStatsbeatSender&&!y._statsbeatHasReachedIngestionAtLeastOnce&&y._statsbeatFailedToIngest(),y._numConsecutiveFailures++,y._statsbeat&&y._statsbeat.countException(l.StatsbeatNetworkCategory.Breeze,o,i),!y._enableDiskRetryMode||y._numConsecutiveFailures>0&&y._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var r="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";y._enableDiskRetryMode&&(r="Ingestion endpoint could not be reached "+y._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),y._logWarn(r,p.dumpObj(i))}else r="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:",y._logInfo(r,p.dumpObj(i));y._onErrorHelper(i),"function"==typeof n&&(i?(y._requestTimedOut&&(i.name="telemetry timeout",i.message="telemetry request timed out"),n(p.dumpObj(i))):n("Error sending telemetry")),y._enableDiskRetryMode&&y._storeToDisk(t)})),h.write(c),h.end()})),r.label=5;case 5:return[2]}}))}))},e.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(p.stringify(e))},e.prototype._isRetriable=function(e){return 206===e||401===e||403===e||408===e||429===e||500===e||502===e||503===e||504===e},e.prototype._logInfo=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];this._isStatsbeatSender||f.info(e.TAG,t,n)},e.prototype._logWarn=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];this._isStatsbeatSender||f.warn(e.TAG,t,n)},e.prototype._statsbeatFailedToIngest=function(){this._shutdownStatsbeat&&(this._failedToIngestCounter++,this._failedToIngestCounter>=3&&this._shutdownStatsbeat())},e.prototype._storeToDisk=function(e){return i(this,void 0,void 0,(function(){var t,n,i,o,s,c,l;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this._logInfo("Checking existence of data storage directory: "+this._tempDir),[4,u.confirmDirExists(this._tempDir)];case 1:return r.sent(),[3,3];case 2:return t=r.sent(),this._logWarn("Failed to create folder to put telemetry: "+p.dumpObj(t)),this._onErrorHelper(t),[2];case 3:return r.trys.push([3,5,,6]),[4,m.FileAccessControl.applyACLRules(this._tempDir)];case 4:return r.sent(),[3,6];case 5:return n=r.sent(),this._logWarn("Failed to apply file access control to folder: "+p.dumpObj(n)),this._onErrorHelper(n),[2];case 6:return r.trys.push([6,8,,9]),[4,u.getShallowDirectorySize(this._tempDir)];case 7:return(i=r.sent())>this._maxBytesOnDisk?(this._logWarn("Not saving data due to max size limit being met. Directory size in bytes is: "+i),[2]):[3,9];case 8:return o=r.sent(),this._logWarn("Failed to read directory for retriable telemetry: "+p.dumpObj(o)),this._onErrorHelper(o),[2];case 9:return r.trys.push([9,11,,12]),s=(new Date).getTime()+".ai.json",c=a.join(this._tempDir,s),this._logInfo("saving data to disk at: "+c),[4,u.writeFileAsync(c,p.stringify(e),{mode:384})];case 10:return r.sent(),[3,12];case 11:return l=r.sent(),this._logWarn("Failed to persist telemetry to disk: "+p.dumpObj(l)),this._onErrorHelper(l),[2];case 12:return[2]}}))}))},e.prototype._storeToDiskSync=function(e){try{this._logInfo("Checking existence of data storage directory: "+this._tempDir),o.existsSync(this._tempDir)||o.mkdirSync(this._tempDir),m.FileAccessControl.applyACLRulesSync(this._tempDir);var t=u.getShallowDirectorySizeSync(this._tempDir);if(t>this._maxBytesOnDisk)return void this._logInfo("Not saving data due to max size limit being met. Directory size in bytes is: "+t);var n=(new Date).getTime()+".ai.json",i=a.join(this._tempDir,n);this._logInfo("saving data before crash to disk at: "+i),o.writeFileSync(i,e,{mode:384})}catch(e){this._logWarn("Error while saving data to disk: "+p.dumpObj(e)),this._onErrorHelper(e)}},e.prototype._sendFirstFileOnDisk=function(){return i(this,void 0,void 0,(function(){var e,t,n,i,o,s;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,6,,7]),[4,u.readdirAsync(this._tempDir)];case 1:return(e=(e=r.sent()).filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0?(t=e[0],n=a.join(this._tempDir,t),[4,u.readFileAsync(n)]):[3,5];case 2:return i=r.sent(),[4,u.unlinkAsync(n)];case 3:return r.sent(),o=JSON.parse(i.toString()),[4,this.send(o)];case 4:r.sent(),r.label=5;case 5:return[3,7];case 6:return s=r.sent(),this._onErrorHelper(s),[3,7];case 7:return[2]}}))}))},e.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},e.prototype._fileCleanupTask=function(){return i(this,void 0,void 0,(function(){var t,n,i,o,s,c=this;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,6,,7]),[4,u.readdirAsync(this._tempDir)];case 1:if(!((t=(t=r.sent()).filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0))return[3,5];n=0,r.label=2;case 2:return n<t.length?(i=new Date(parseInt(t[n].split(".ai.json")[0])),new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>i?(o=a.join(this._tempDir,t[n]),[4,u.unlinkAsync(o).catch((function(e){c._onErrorHelper(e)}))]):[3,4]):[3,5];case 3:r.sent(),r.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:return"ENOENT"!=(s=r.sent()).code&&this._onErrorHelper(s),[3,7];case 7:return[2]}}))}))},e.TAG="Sender",e.WAIT_BETWEEN_RESEND=6e4,e.MAX_BYTES_ON_DISK=52428800,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=36e5,e.FILE_RETEMPTION_PERIOD=6048e5,e.TEMPDIR_PREFIX="appInsights-node",e.HTTP_TIMEOUT=2e4,e}();e.exports=v},82570:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isContentTypeHeaderHtml=t.insertSnippetByIndex=t.getContentEncodingFromHeaders=t.isSupportedContentEncoding=t.findBufferEncodingType=t.isBufferType=t.getBrotliDecompressSync=t.getBrotliDecompressAsync=t.getBrotliCompressSync=t.getBrotliCompressAsync=t.inflateAsync=t.deflateAsync=t.gunzipAsync=t.gzipAsync=t.isBrotliSupperted=t.bufferEncodingTypes=t.contentEncodingMethod=void 0;var i,r=n(59796),o=n(73837);!function(e){e.GZIP="gzip",e.DEFLATE="deflate",e.BR="br"}(i=t.contentEncodingMethod||(t.contentEncodingMethod={})),t.bufferEncodingTypes=["utf8","utf16le","latin1","base64","hex","ascii","binary","ucs2"],t.isBrotliSupperted=function(){var e=process.versions.node.split(".")[0];return parseInt(e)>=10},t.gzipAsync=o.promisify(r.gzip),t.gunzipAsync=o.promisify(r.gunzip),t.deflateAsync=o.promisify(r.deflate),t.inflateAsync=o.promisify(r.inflate),t.getBrotliCompressAsync=function(e){return t.isBrotliSupperted()&&"function"==typeof e.brotliCompress?o.promisify(e.brotliCompress):null},t.getBrotliCompressSync=function(e){return t.isBrotliSupperted()&&"function"==typeof e.brotliCompressSync?e.brotliCompressSync:null},t.getBrotliDecompressAsync=function(e){return t.isBrotliSupperted()&&"function"==typeof e.brotliDecompress?o.promisify(e.brotliDecompress):null},t.getBrotliDecompressSync=function(e){return t.isBrotliSupperted()&&"function"==typeof e.brotliDecompressSync?e.brotliDecompressSync:null},t.isBufferType=function(e,t){var n=t||"utf8",i=!1;return Buffer.isEncoding(n)&&(i=Buffer.from(e.toString(n),n).toJSON().data.toString()===e.toJSON().data.toString()),i},t.findBufferEncodingType=function(e){var n=null;for(var i in t.bufferEncodingTypes){var r=t.bufferEncodingTypes[i];if(Buffer.isEncoding(r)&&t.isBufferType(e,r)){n=r;break}}return n},t.isSupportedContentEncoding=function(e){var t=null;switch(e){case"gzip":t=i.GZIP;break;case"br":t=i.BR;break;case"deflate":t=i.DEFLATE}return t},t.getContentEncodingFromHeaders=function(e){var n=[],i=e.getHeader("Content-Encoding");if(!i)return null;if("string"==typeof i){var r=t.isSupportedContentEncoding(i);r&&n.push(r)}return n},t.insertSnippetByIndex=function(e,t,n){return e<0?null:t.substring(0,e)+'<script type="text/javascript">'+n+"<\/script>"+t.substring(e)},t.isContentTypeHeaderHtml=function(e){var t=!1,n=e.getHeader("Content-Type");return n&&(t="string"==typeof n?n.indexOf("html")>=0:n.toString().indexOf("html")>=0),t}},67625:(e,t,n)=>{"use strict";var i=n(57310),r=n(69253),o=n(80287),s=n(54470),a=n(55290),c=n(3504),l=n(59428),d=n(70894),u=n(49004),p=n(82588),h=n(25740),f=n(95282),m=n(99813),g=function(){function e(e){this._telemetryProcessors=[],this._enableAzureProperties=!1;var t=new r(e);if(this.config=t,!this.config.instrumentationKey||""==this.config.instrumentationKey)throw new Error("Instrumentation key not found, please provide a connection string before starting Application Insights SDK.");this.context=new s,this.commonProperties={},this.authorizationHandler=null,this.config.disableStatsbeat||(this._statsbeat=new u(this.config,this.context),this._statsbeat.enable(!0));var n=new p(this.config,this.getAuthorizationHandler,null,null,this._statsbeat);this.channel=new c((function(){return t.disableAppInsights}),(function(){return t.maxBatchSize}),(function(){return t.maxBatchIntervalMs}),n)}return e.prototype.trackAvailability=function(e){this.track(e,a.TelemetryType.Availability)},e.prototype.trackPageView=function(e){this.track(e,a.TelemetryType.PageView)},e.prototype.trackTrace=function(e){this.track(e,a.TelemetryType.Trace)},e.prototype.trackMetric=function(e){this.track(e,a.TelemetryType.Metric)},e.prototype.trackException=function(e){e&&e.exception&&!h.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,a.TelemetryType.Exception)},e.prototype.trackEvent=function(e){this.track(e,a.TelemetryType.Event)},e.prototype.trackRequest=function(e){this.track(e,a.TelemetryType.Request)},e.prototype.trackDependency=function(t){if(t&&!t.target&&t.data)try{t.target=new i.URL(t.data).host}catch(n){t.target=null,f.warn(e.TAG,"The URL object is failed to create.",n)}this.track(t,a.TelemetryType.Dependency)},e.prototype.flush=function(e){this.channel.triggerSend(!!e&&!!e.isAppCrashing,e?e.callback:void 0)},e.prototype.track=function(t,n){if(t&&a.telemetryTypeToBaseType(n)){var i=m.createEnvelope(t,n,this.commonProperties,this.context,this.config);t.time&&(i.time=t.time.toISOString()),this._enableAzureProperties&&l.azureRoleEnvironmentTelemetryProcessor(i,this.context);var r=this.runTelemetryProcessors(i,t.contextObjects);r=r&&l.samplingTelemetryProcessor(i,{correlationContext:d.CorrelationContextManager.getCurrentContext()}),l.preAggregatedMetricsTelemetryProcessor(i,this.context),r&&(l.performanceMetricsTelemetryProcessor(i,this.quickPulseClient),this.channel.send(i))}else f.warn(e.TAG,"track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(e){this._enableAzureProperties=e},e.prototype.getAuthorizationHandler=function(t){return t&&t.aadTokenCredential?(this.authorizationHandler||(f.info(e.TAG,"Adding authorization handler"),this.authorizationHandler=new o(t.aadTokenCredential)),this.authorizationHandler):null},e.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(t,n){var i=!0,r=this._telemetryProcessors.length;if(0===r)return i;(n=n||{}).correlationContext=d.CorrelationContextManager.getCurrentContext();for(var o=0;o<r;++o)try{var s=this._telemetryProcessors[o];if(s&&!1===s.apply(null,[t,n])){i=!1;break}}catch(n){i=!0,f.warn(e.TAG,"One of telemetry processors failed, telemetry item will be sent.",n,t)}return i&&(t&&t.tags&&(t.tags=h.validateStringMap(t.tags)),t&&t.data&&t.data.baseData&&t.data.baseData.properties&&(t.data.baseData.properties=h.validateStringMap(t.data.baseData.properties))),i},e.prototype.getStatsbeat=function(){return this._statsbeat},e.TAG="TelemetryClient",e}();e.exports=g},58090:(e,t,n)=>{"use strict";var i=n(25740),r=n(29962),o=function(){function e(t,n){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&"string"==typeof t)if(t.split(",").length>1)this.traceId=i.w3cTraceId(),this.spanId=i.w3cTraceId().substr(0,16);else{var o=t.trim().split("-"),s=o.length;s>=4?(this.version=o[0],this.traceId=o[1],this.spanId=o[2],this.traceFlag=o[3]):(this.traceId=i.w3cTraceId(),this.spanId=i.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=i.w3cTraceId()),"00"===this.version&&4!==s&&(this.traceId=i.w3cTraceId(),this.spanId=i.w3cTraceId().substr(0,16)),"ff"===this.version&&(this.version=e.DEFAULT_VERSION,this.traceId=i.w3cTraceId(),this.spanId=i.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=i.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=i.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=i.w3cTraceId().substr(0,16),this.traceId=i.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(n){this.parentId=n.slice();var a=r.getRootId(n);e.isValidTraceId(a)||(this.legacyRootId=a,a=i.w3cTraceId()),-1!==n.indexOf("|")&&(n=n.substring(1+n.substring(0,n.length-1).lastIndexOf("."),n.length-1)),this.traceId=a,this.spanId=n}else this.traceId=i.w3cTraceId(),this.spanId=i.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.formatOpenTelemetryTraceFlags=function(e){var t="0"+e.toString(16);return t.substring(t.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=i.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();e.exports=o},10420:e=>{"use strict";var t=function(){function e(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return e.prototype.toString=function(){var e=this.fieldmap;return e&&0!=e.length?e.join(", "):null},e.validateKeyChars=function(e){var t=e.split("@");if(2==t.length){var n=t[0].trim(),i=t[1].trim(),r=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),o=Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return r&&o}return 1==t.length&&Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/))},e.prototype.parseHeader=function(t){var n=[],i={},r=t.split(",");if(r.length>32)return null;for(var o=0,s=r;o<s.length;o++){var a=s[o].trim();if(0!==a.length){var c=a.split("=");if(2!==c.length)return null;if(!e.validateKeyChars(c[0]))return null;if(i[c[0]])return null;i[c[0]]=!0,n.push(a)}}return n},e.strict=!0,e}();e.exports=t},25740:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=n(13685),o=n(95687),s=n(57310),a=n(22057),c=n(95282),l=n(59036),d=n(3063),u=function(){function e(){e._addCloseHandler()}return e.getCookie=function(t,n){var i="";if(t&&t.length&&"string"==typeof n)for(var r=t+"=",o=n.split(";"),s=0;s<o.length;s++)if(n=o[s],(n=e.trim(n))&&0===n.indexOf(r)){i=n.substring(r.length,o[s].length);break}return i},e.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)},n=e.map((function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)})).join(""),i=(Buffer.from?Buffer.from(n,"binary"):new Buffer(n,"binary")).toString("base64");return i.substr(0,i.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],i="",r=0;r<4;r++)i+=n[15&(t=e.random32())]+n[t>>4&15]+n[t>>8&15]+n[t>>12&15]+n[t>>16&15]+n[t>>20&15]+n[t>>24&15]+n[t>>28&15];var o=n[8+4*Math.random()|0];return i.substr(0,8)+i.substr(9,4)+"4"+i.substr(13,3)+o+i.substr(16,3)+i.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(e){return 32===e.length&&"00000000000000000000000000000000"!==e},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return"[object Error]"===Object.prototype.toString.call(e)},e.isPrimitive=function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/6e4)%60,i=""+Math.floor(e/36e5)%24,r=Math.floor(e/864e5);return t=t.indexOf(".")<2?"0"+t:t,n=n.length<2?"0"+n:n,(r>0?r+".":"")+(i=i.length<2?"0"+i:i)+":"+n+":"+t},e.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):"function"==typeof t.toJSON?t.toJSON():t},e.validateStringMap=function(t){if("object"==typeof t){var n={};for(var i in t){var r="",o=t[i],s=typeof o;if(e.isPrimitive(o))r=o.toString();else if(null===o||"undefined"===s)r="";else{if("function"===s){c.info("key: "+i+" was function; will not serialize");continue}var a=e.isArray(o)?o:e.extractObject(o);try{r=e.isPrimitive(a)?a:JSON.stringify(a)}catch(e){r=o.constructor.name.toString()+" (Error: "+e.message+")",c.info("key: "+i+", could not be serialized")}}n[i]=r.substring(0,e.MAX_PROPERTY_LENGTH)}return n}c.info("Invalid properties dropped from payload")},e.canIncludeCorrelationHeader=function(e,t){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||0==n.length||!t)return!0;for(var i=0;i<n.length;i++){var r=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));try{if(r.test(new s.URL(t).hostname))return!1}catch(e){}}return!0},e.getCorrelationContextTarget=function(e,t){var n=e.headers&&e.headers[l.requestContextHeader];if(n)for(var i=n.split(","),r=0;r<i.length;++r){var o=i[r].split("=");if(2==o.length&&o[0]==t)return o[1]}},e.makeRequest=function(t,n,a,l,d,u){void 0===d&&(d=!0),void 0===u&&(u=!0),n&&0===n.indexOf("//")&&(n="https:"+n);var p=new s.URL(n),h=i(i({},a),{host:p.hostname,port:p.port,path:p.pathname}),f=void 0;if(d&&("https:"===p.protocol&&(f=t.proxyHttpsUrl||void 0),"http:"===p.protocol&&(f=t.proxyHttpUrl||void 0),f)){0===f.indexOf("//")&&(f="http:"+f);try{var m=new s.URL(f);"https:"===m.protocol?(c.info("Proxies that use HTTPS are not supported"),f=void 0):h=i(i({},h),{host:m.hostname,port:m.port||"80",path:n,headers:i(i({},h.headers),{Host:p.hostname})})}catch(e){c.warn("Wrong proxy URL provided")}}var g="https:"===p.protocol&&!f;return u&&(g&&void 0!==t.httpsAgent?h.agent=t.httpsAgent:g||void 0===t.httpAgent?g&&(h.agent=e._useKeepAlive?e.keepAliveAgent:e.tlsRestrictedAgent):h.agent=t.httpAgent),g?o.request(h,l):r.request(h,l)},e.safeIncludeCorrelationHeader=function(t,n,i){var r;if("string"==typeof i)r=i;else if(i instanceof Array)r=i.join(",");else if(i&&"function"==typeof i.toString)try{r=i.toString()}catch(e){c.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",e,i)}r?e.addCorrelationIdHeaderFromString(t,n,r):n.setHeader(l.requestContextHeader,l.requestContextSourceKey+"="+t.config.correlationId)},e.dumpObj=function(e){if(e)try{var t=Object.prototype.toString.call(e);return t+("[object Error]"===t?"{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":this.stringify(e))}catch(t){return e.toString()}},e.stringify=function(e){try{return JSON.stringify(e)}catch(t){c.warn("Failed to serialize payload",t,e)}},e.addCorrelationIdHeaderFromString=function(e,t,n){var i=n.split(","),r=l.requestContextSourceKey+"=";i.some((function(e){return e.substring(0,r.length)===r}))||t.setHeader(l.requestContextHeader,n+","+l.requestContextSourceKey+"="+e.config.correlationId)},e._addCloseHandler=function(){e._listenerAttached||(process.on("exit",(function(){e.isNodeExit=!0,e._useKeepAlive=!1})),e._listenerAttached=!0)},e._useKeepAlive=!d.JsonConfig.getInstance().noHttpAgentKeepAlive,e._listenerAttached=!1,e.MAX_PROPERTY_LENGTH=8192,e.keepAliveAgent=new o.Agent({keepAlive:!0,maxSockets:25,secureOptions:a.SSL_OP_NO_SSLv2|a.SSL_OP_NO_SSLv3|a.SSL_OP_NO_TLSv1|a.SSL_OP_NO_TLSv1_1}),e.tlsRestrictedAgent=new o.Agent({secureOptions:a.SSL_OP_NO_SSLv2|a.SSL_OP_NO_SSLv3|a.SSL_OP_NO_TLSv1|a.SSL_OP_NO_TLSv1_1}),e.isNodeExit=!1,e}();e.exports=u},67334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.azureRoleEnvironmentTelemetryProcessor=void 0,t.azureRoleEnvironmentTelemetryProcessor=function(e,t){process.env.WEBSITE_SITE_NAME&&(e.tags[t.keys.cloudRole]=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_INSTANCE_ID&&(e.tags[t.keys.cloudRoleInstance]=process.env.WEBSITE_INSTANCE_ID)}},84127:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performanceMetricsTelemetryProcessor=void 0;var i=n(74350),r=n(55290);t.performanceMetricsTelemetryProcessor=function(e,t){switch(t&&t.addDocument(e),e.data.baseType){case r.TelemetryTypeString.Exception:i.countException();break;case r.TelemetryTypeString.Request:var n=e.data.baseData;i.countRequest(n.duration,n.success);break;case r.TelemetryTypeString.Dependency:var o=e.data.baseData;i.countDependency(o.duration,o.success)}return!0}},36798:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.preAggregatedMetricsTelemetryProcessor=void 0;var r=n(55290),o=n(62309),s=n(55290);t.preAggregatedMetricsTelemetryProcessor=function(e,t){if(o.isEnabled())switch(e.data.baseType){case s.TelemetryTypeString.Exception:var n=e.data.baseData;n.properties=i(i({},n.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var a={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole]};o.countException(a);break;case s.TelemetryTypeString.Trace:var c=e.data.baseData;c.properties=i(i({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var l={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[c.severity]};o.countTrace(l);break;case s.TelemetryTypeString.Request:var d=e.data.baseData;d.properties=i(i({},d.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var u={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],requestSuccess:d.success,requestResultCode:d.responseCode};o.countRequest(d.duration,u);break;case s.TelemetryTypeString.Dependency:var p=e.data.baseData;p.properties=i(i({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var h={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],dependencySuccess:p.success,dependencyType:p.type,dependencyTarget:p.target,dependencyResultCode:p.resultCode};o.countDependency(p.duration,h)}return!0}},20608:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSamplingHashCode=t.samplingTelemetryProcessor=void 0;var i=n(55290);function r(e){var t=2147483647,n=5381;if(!e)return 0;for(;e.length<8;)e+=e;for(var i=0;i<e.length;i++)n=((n<<5)+n|0)+e.charCodeAt(i)|0;return(n=n<=-2147483648?t:Math.abs(n))/t*100}t.samplingTelemetryProcessor=function(e,t){var n=e.sampleRate;return null==n||n>=100||!(!e.data||i.TelemetryType.Metric!==i.baseTypeToTelemetryType(e.data.baseType))||(t.correlationContext&&t.correlationContext.operation?r(t.correlationContext.operation.id)<n:100*Math.random()<n)},t.getSamplingHashCode=r},59428:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(67334),t),r(n(20608),t),r(n(84127),t),r(n(36798),t)},9574:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.Configuration=t.wrapWithCorrelationContext=t.startOperation=t.getCorrelationContext=t.start=t.setup=t.liveMetricsClient=t.defaultClient=t.DistributedTracingModes=void 0;var i,r=n(70894),o=n(66281),s=n(6639),a=n(74350),c=n(62309),l=n(38975),d=n(11918),u=n(88723),p=n(40731),h=n(29962),f=n(95282),m=n(83668),g=n(11629),v=n(81162);t.TelemetryClient=n(1259),t.Contracts=n(55290),t.azureFunctionsTypes=n(56761),function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C"}(i=t.DistributedTracingModes||(t.DistributedTracingModes={}));var y,b,w,_,S,C,k,E,x,T,P,I,D,R=function(){return!1},O=function(){return!0},A=function(){return!0},N=function(){return!0},M=function(){return!1},L=function(){return!0},j=function(){return!0},F=function(){return!0},U=function(){return!0},q=function(){return!1},K=function(){return!0},V=function(){return!1},W=function(){return!1},$=function(){return!0}(),B=R(),H=O(),z=A(),J=N(),G=M(),Y=L(),Q=j(),X=F(),Z=U(),ee=q(),te=K(),ne=V(),ie=W(),re=void 0,oe=void 0,se=void 0,ae=!1;function ce(){return t.defaultClient?(ae=!0,w.enable($,B),_.enable(H),S.enable(z),C.enable(J),k.enable(G),x.enable(te,b),T.useAutoCorrelation(Z,y),T.enable(Y),P.enable(Q),E.enable(ne,se),t.liveMetricsClient&&ee&&t.liveMetricsClient.enable(ee),I.enable(ie)):f.warn("Start cannot be called before setup"),le}t.setup=function(e){return t.defaultClient?f.info("The default client is already setup"):(t.defaultClient=new t.TelemetryClient(e),function(){$=void 0!==t.defaultClient.config.enableAutoCollectExternalLoggers?t.defaultClient.config.enableAutoCollectExternalLoggers:$,B=void 0!==t.defaultClient.config.enableAutoCollectConsole?t.defaultClient.config.enableAutoCollectConsole:B,H=void 0!==t.defaultClient.config.enableAutoCollectExceptions?t.defaultClient.config.enableAutoCollectExceptions:H,z=void 0!==t.defaultClient.config.enableAutoCollectPerformance?t.defaultClient.config.enableAutoCollectPerformance:z,J=void 0!==t.defaultClient.config.enableAutoCollectPreAggregatedMetrics?t.defaultClient.config.enableAutoCollectPreAggregatedMetrics:J,G=void 0!==t.defaultClient.config.enableAutoCollectHeartbeat?t.defaultClient.config.enableAutoCollectHeartbeat:G,Y=void 0!==t.defaultClient.config.enableAutoCollectRequests?t.defaultClient.config.enableAutoCollectRequests:Y,Q=void 0!==t.defaultClient.config.enableAutoDependencyCorrelation?t.defaultClient.config.enableAutoDependencyCorrelation:Q,Z=void 0!==t.defaultClient.config.enableAutoDependencyCorrelation?t.defaultClient.config.enableAutoDependencyCorrelation:Z,y=void 0!==t.defaultClient.config.enableUseAsyncHooks?t.defaultClient.config.enableUseAsyncHooks:y,ne=void 0!==t.defaultClient.config.enableWebInstrumentation?t.defaultClient.config.enableWebInstrumentation:ne,ne=!0===t.defaultClient.config.enableAutoWebSnippetInjection||ne,ie=void 0!==t.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions?t.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions:ie;var e=g.AutoCollectNativePerformance.parseEnabled(t.defaultClient.config.enableAutoCollectExtendedMetrics,t.defaultClient.config);te=e.isEnabled,b=e.disabledMetrics}(),w=new o(t.defaultClient),_=new s(t.defaultClient),S=new a(t.defaultClient),C=new c(t.defaultClient),k=new l(t.defaultClient),E=new d(t.defaultClient),T=new p(t.defaultClient),P=new u(t.defaultClient),x||(x=new g.AutoCollectNativePerformance(t.defaultClient)),I=new v.AzureFunctionsHook(t.defaultClient)),t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(X,re,oe),le},t.start=ce,t.getCorrelationContext=function(){return Z?r.CorrelationContextManager.getCurrentContext():null},t.startOperation=function(e,t){return r.CorrelationContextManager.startOperation(e,t)},t.wrapWithCorrelationContext=function(e,t){return r.CorrelationContextManager.wrapCallback(e,t)};var le=function(){function e(){}return e.setDistributedTracingMode=function(t){return h.w3cEnabled=t===i.AI_AND_W3C,e},e.setAutoCollectConsole=function(t,n){return void 0===n&&(n=!1),$=t,B=n,ae&&w.enable(t,n),e},e.setAutoCollectExceptions=function(t){return H=t,ae&&_.enable(t),e},e.setAutoCollectPerformance=function(n,i){void 0===i&&(i=!0),z=n;var r=g.AutoCollectNativePerformance.parseEnabled(i,t.defaultClient.config);return te=r.isEnabled,b=r.disabledMetrics,ae&&(S.enable(n),x.enable(r.isEnabled,r.disabledMetrics)),e},e.setAutoCollectPreAggregatedMetrics=function(t){return J=t,ae&&C.enable(t),e},e.setAutoCollectHeartbeat=function(t){return G=t,ae&&k.enable(t),e},e.enableAutoWebSnippetInjection=function(t,n){return ne=t,se=n,ae&&E.enable(t,se),e},e.enableWebInstrumentation=function(t,n){return ne=t,se=n,ae&&E.enable(t,se),e},e.setAutoCollectRequests=function(t){return Y=t,ae&&T.enable(t),e},e.setAutoCollectDependencies=function(t){return Q=t,ae&&P.enable(t),e},e.setAutoDependencyCorrelation=function(t,n){return Z=t,y=n,ae&&T.useAutoCorrelation(t,n),e},e.setUseDiskRetryCaching=function(n,i,r){return X=n,re=i,oe=r,t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(X,re,oe),e},e.setInternalLogging=function(t,n){return void 0===t&&(t=!1),void 0===n&&(n=!0),f.enableDebug=t,f.disableWarnings=!n,e},e.setAutoCollectIncomingRequestAzureFunctions=function(t){return ie=t,ae&&I.enable(t),e},e.setSendLiveMetrics=function(n){return void 0===n&&(n=!1),t.defaultClient?(!t.liveMetricsClient&&n?(t.liveMetricsClient=new m(t.defaultClient.config,t.defaultClient.context,t.defaultClient.getAuthorizationHandler),D=new a(t.liveMetricsClient,1e3,!0),t.liveMetricsClient.addCollector(D),t.defaultClient.quickPulseClient=t.liveMetricsClient):t.liveMetricsClient&&t.liveMetricsClient.enable(n),ee=n,e):(f.warn("Live metrics client cannot be setup without the default client"),e)},e.start=ce,e}();t.Configuration=le,t.dispose=function(){h.w3cEnabled=!0,t.defaultClient=null,ae=!1,w&&w.dispose(),_&&_.dispose(),S&&S.dispose(),C&&C.dispose(),k&&k.dispose(),E&&E.dispose(),x&&x.dispose(),T&&T.dispose(),P&&P.dispose(),t.liveMetricsClient&&(t.liveMetricsClient.enable(!1),ee=!1,t.liveMetricsClient=void 0),I&&I.dispose()}},99822:(e,t,n)=>{"use strict";const i=process.binding("async_wrap"),r=i.Providers.TIMERWRAP,o={nextTick:n(93269),promise:n(99565),timers:n(57190)},s=new Set;function a(){this.enabled=!1,this.counter=0}function c(){const e=this.initFns=[],t=this.preFns=[],n=this.postFns=[],i=this.destroyFns=[];this.init=function(t,n,i,o){if(n!==r)for(const r of e)r(t,this,n,i,o);else s.add(t)},this.pre=function(e){if(!s.has(e))for(const n of t)n(e,this)},this.post=function(e,t){if(!s.has(e))for(const i of n)i(e,this,t)},this.destroy=function(e){if(s.has(e))s.delete(e);else for(const t of i)t(e)}}function l(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}function d(){this._state=new a,this._hooks=new c,this.version=n(26157).i8,this.providers=i.Providers;for(const e of Object.keys(o))o[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),i.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}c.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)},c.prototype.remove=function(e){e.init&&l(this.initFns,e.init),e.pre&&l(this.preFns,e.pre),e.post&&l(this.postFns,e.post),e.destroy&&l(this.destroyFns,e.destroy)},e.exports=d,d.prototype.addHooks=function(e){this._hooks.add(e)},d.prototype.removeHooks=function(e){this._hooks.remove(e)},d.prototype.enable=function(){this._state.enabled=!0,i.enable()},d.prototype.disable=function(){this._state.enabled=!1,i.disable()}},73223:(e,t,n)=>{"use strict";const i=n(99822);if(global._asyncHook){if(global._asyncHook.version!==n(26157).i8)throw new Error("Conflicting version of async-hook-jl found");e.exports=global._asyncHook}else n(92512).filter.attach((function(e,t){return t.filter((function(e){const t=e.getFileName();return!(t&&t.slice(0,__dirname.length)===__dirname)}))})),e.exports=global._asyncHook=new i},93269:e=>{"use strict";function t(){}e.exports=function(){const e=this._hooks,n=this._state,i=process.nextTick;process.nextTick=function(){if(!n.enabled)return i.apply(process,arguments);const r=new Array(arguments.length);for(let e=0;e<arguments.length;e++)r[e]=arguments[e];const o=r[0];if("function"!=typeof o)throw new TypeError("callback is not a function");const s=new t,a=--n.counter;return e.init.call(s,a,0,null,null),r[0]=function(){e.pre.call(s,a);let t=!0;try{o.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(s,a,!0),e.destroy.call(null,a)}))}e.post.call(s,a,!1),e.destroy.call(null,a)},i.apply(process,r)}}},99565:e=>{"use strict";function t(){}e.exports=function(){const e=this._hooks,n=this._state,i=global.Promise,r=i.prototype.then;function o(t,n,i,r){return"function"!=typeof t?r?function(t){return function(n){return e.destroy.call(null,t),n}}(i):function(t){return function(n){throw e.destroy.call(null,t),n}}(i):function(){e.pre.call(n,i);try{return t.apply(this,arguments)}finally{e.post.call(n,i,!1),e.destroy.call(null,i)}}}i.prototype.then=function(i,s){if(!n.enabled)return r.call(this,i,s);const a=new t,c=--n.counter;return e.init.call(a,c,0,null,null),r.call(this,o(i,a,c,!0),o(s,a,c,!1))}}},57190:(e,t,n)=>{"use strict";const i=n(39512);function r(){}function o(){}function s(){}const a=new Map,c=new Map,l=new Map;let d=null,u=!1;function p(e,t,n,r,o,s,a){const c=i[n],l=i[r];i[n]=function(){if(!t.enabled)return c.apply(i,arguments);const n=new Array(arguments.length);for(let e=0;e<arguments.length;e++)n[e]=arguments[e];const r=n[0];if("function"!=typeof r)throw new TypeError('"callback" argument must be a function');const l=new o,p=--t.counter;let h;return e.init.call(l,p,0,null,null),n[0]=function(){d=h,e.pre.call(l,p);let t=!0;try{r.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(l,p,!0),s.delete(h),e.destroy.call(null,p)}))}e.post.call(l,p,!1),d=null,(a||u)&&(u=!1,s.delete(h),e.destroy.call(null,p))},h=c.apply(i,n),s.set(h,p),h},i[r]=function(t){if(d===t&&null!==t)u=!0;else if(s.has(t)){const n=s.get(t);s.delete(t),e.destroy.call(null,n)}l.apply(i,arguments)}}e.exports=function(){p(this._hooks,this._state,"setTimeout","clearTimeout",r,a,!0),p(this._hooks,this._state,"setInterval","clearInterval",o,c,!1),p(this._hooks,this._state,"setImmediate","clearImmediate",s,l,!0),global.setTimeout=i.setTimeout,global.setInterval=i.setInterval,global.setImmediate=i.setImmediate,global.clearTimeout=i.clearTimeout,global.clearInterval=i.clearInterval,global.clearImmediate=i.clearImmediate}},73009:e=>{"use strict";function t(e){if(!(this instanceof t))return new t(e);e=e||{},this.concurrency=e.concurrency||1/0,this.pending=0,this.jobs=[],this.cbs=[],this._done=n.bind(this)}function n(){this.pending--,this._run()}["push","unshift","splice"].forEach((function(e){t.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this._run(),t}})),Object.defineProperty(t.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),t.prototype._run=function(){if(this.pending!==this.concurrency){if(this.jobs.length){var e=this.jobs.shift();this.pending++,e(this._done),this._run()}if(0===this.pending)for(;0!==this.cbs.length;){var t=this.cbs.pop();process.nextTick(t)}}},t.prototype.onDone=function(e){"function"==typeof e&&(this.cbs.push(e),this._run())},e.exports=t},68286:e=>{"use strict";e.exports=(e,t)=>class extends e{constructor(e){var n,i;super((function(e,o){n=this,i=[function(n){return t(r,!1),e(n)},function(e){return t(r,!1),o(e)}]}));var r=this;try{e.apply(n,i)}catch(e){i[1](e)}return r}}},89090:(e,t,n)=>{var i,r,o=n(76372).wrap,s=1,a=2,c=4,l=8,d=[],u=0,p=!1,h=[];function f(e,t){var n=e.length,i=t.length,r=[];if(0===n&&0===i)return r;for(var o=0;o<n;o++)r[o]=e[o];if(0===i)return r;for(var s=0;s<i;s++){var a=!0;for(o=0;o<n;o++)if(e[o].uid===t[s].uid){a=!1;break}a&&r.push(t[s])}return r}if(process._fatalException){var m,g=!1;i=function(e){var t=d.length;if(g||0===t)return!1;var n=!1;g=!0;for(var i=0;i<t;++i){var r=d[i];if(0!=(r.flags&l)){var o=m&&m[r.uid];n=r.error(o,e)||n}}return g=!1,h.length>0&&(d=h.pop()),m=void 0,n&&!p},r=function(e,t,n){var i=[];p=!0;for(var r=0;r<n;++r){var o=t[r];if(i[o.uid]=o.data,0!=(o.flags&s)){var l=o.create(o.data);void 0!==l&&(i[o.uid]=l)}}return p=!1,function(){m=i,h.push(d),d=f(t,d),p=!0;for(var r=0;r<n;++r)(t[r].flags&a)>0&&t[r].before(this,i[t[r].uid]);p=!1;var o=e.apply(this,arguments);for(p=!0,r=0;r<n;++r)(t[r].flags&c)>0&&t[r].after(this,i[t[r].uid]);return p=!1,d=h.pop(),m=void 0,o}},o(process,"_fatalException",(function(e){return function(t){return i(t)||e(t)}}))}else{var v=!1;i=function(e){if(v)throw e;for(var t=!1,n=d.length,i=0;i<n;++i){var r=d[i];0!=(r.flags&l)&&(t=r.error(null,e)||t)}if(!t&&p)throw e},r=function(e,t,n){var r=[];p=!0;for(var o=0;o<n;++o){var u=t[o];if(r[u.uid]=u.data,0!=(u.flags&s)){var m=u.create(u.data);void 0!==m&&(r[u.uid]=m)}}return p=!1,function(){var o,s=!1,u=!1;h.push(d),d=f(t,d),p=!0;for(var m=0;m<n;++m)(t[m].flags&a)>0&&t[m].before(this,r[t[m].uid]);p=!1;try{o=e.apply(this,arguments)}catch(e){for(s=!0,m=0;m<n;++m)if(0!=(d[m].flags&l))try{u=d[m].error(r[t[m].uid],e)||u}catch(e){throw v=!0,e}if(!u)throw process.removeListener("uncaughtException",i),process._originalNextTick((function(){process.addListener("uncaughtException",i)})),e}finally{if(!s||u){for(p=!0,m=0;m<n;++m)(t[m].flags&c)>0&&t[m].after(this,r[t[m].uid]);p=!1}d=h.pop()}return o}},process.addListener("uncaughtException",i)}function y(e,t){"function"==typeof e.create&&(this.create=e.create,this.flags|=s),"function"==typeof e.before&&(this.before=e.before,this.flags|=a),"function"==typeof e.after&&(this.after=e.after,this.flags|=c),"function"==typeof e.error&&(this.error=e.error,this.flags|=l),this.uid=++u,this.data=void 0===t?null:t}function b(e,t){if("object"!=typeof e||!e)throw new TypeError("callbacks argument must be an object");return e instanceof y?e:new y(e,t)}y.prototype.create=void 0,y.prototype.before=void 0,y.prototype.after=void 0,y.prototype.error=void 0,y.prototype.data=void 0,y.prototype.uid=0,y.prototype.flags=0,process.createAsyncListener=b,process.addAsyncListener=function(e,t){var n;n=e instanceof y?e:b(e,t);for(var i=!1,r=0;r<d.length;r++)if(n===d[r]){i=!0;break}return i||d.push(n),n},process.removeAsyncListener=function(e){for(var t=0;t<d.length;t++)if(e===d[t]){d.splice(t,1);break}},e.exports=function(e){var t=d.length;if(0===t)return e;for(var n=d.slice(),i=0;i<t;++i)if(n[i].flags>0)return r(e,n,t);return function(e,t,n){p=!0;for(var i=0;i<n;++i){var r=t[i];r.create&&r.create(r.data)}return p=!1,function(){h.push(d),d=f(t,d);var n=e.apply(this,arguments);return d=h.pop(),n}}(e,n,t)}},67645:(e,t,n)=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var i=n(76372),r=n(36625),o=i.wrap,s=i.massWrap,a=n(89090),c=n(73837),l=r.gte(process.version,"6.0.0"),d=r.gte(process.version,"7.0.0"),u=r.gte(process.version,"8.0.0"),p=r.gte(process.version,"11.0.0"),h=n(41808);function f(e){return function(){this.on("connection",(function(e){e._handle&&(e._handle.onread=a(e._handle.onread))}));try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=a(this._handle.onconnection))}}}function m(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=a(t._originalOnread)}}d&&!h._normalizeArgs?h._normalizeArgs=function(e){if(0===e.length)return[{},null];var t,n,i=e[0],r={};"object"==typeof i&&null!==i?r=i:"string"==typeof(t=i)&&!1===(n=t,(n=Number(n))>=0&&n)?r.path=i:(r.port=i,e.length>1&&"string"==typeof e[1]&&(r.host=e[1]));var o=e[e.length-1];return"function"!=typeof o?[r,null]:[r,o]}:d||h._normalizeConnectArgs||(h._normalizeConnectArgs=function(e){var t,n={};"object"==typeof e[0]&&null!==e[0]?n=e[0]:"string"==typeof e[0]&&!1===(t=e[0],(t=Number(t))>=0&&t)?n.path=e[0]:(n.port=e[0],"string"==typeof e[1]&&(n.host=e[1]));var i=e[e.length-1];return"function"==typeof i?[n,i]:[n]}),"_setUpListenHandle"in h.Server.prototype?o(h.Server.prototype,"_setUpListenHandle",f):o(h.Server.prototype,"_listen2",f),o(h.Socket.prototype,"connect",(function(e){return function(){var t;(t=u&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?arguments[0]:d?h._normalizeArgs(arguments):h._normalizeConnectArgs(arguments))[1]&&(t[1]=a(t[1]));var n=e.apply(this,t);return m(this),n}}));var g=n(13685);o(g.Agent.prototype,"addRequest",(function(e){return function(t){var n=t.onSocket;return t.onSocket=a((function(e){return m(e),n.apply(this,arguments)})),e.apply(this,arguments)}}));var v=n(32081);function y(e){Array.isArray(e.stdio)&&e.stdio.forEach((function(e){e&&e._handle&&(e._handle.onread=a(e._handle.onread),o(e._handle,"close",O))})),e._handle&&(e._handle.onexit=a(e._handle.onexit))}v.ChildProcess?o(v.ChildProcess.prototype,"spawn",(function(e){return function(){var t=e.apply(this,arguments);return y(this),t}})):s(v,["execFile","fork","spawn"],(function(e){return function(){var t=e.apply(this,arguments);return y(t),t}})),process._fatalException||(process._originalNextTick=process.nextTick);var b=[];process._nextDomainTick&&b.push("_nextDomainTick"),process._tickDomainCallback&&b.push("_tickDomainCallback"),s(process,b,R),o(process,"nextTick",O);var w=["setTimeout","setInterval"];global.setImmediate&&w.push("setImmediate");var _=n(39512),S=global.setTimeout===_.setTimeout;s(_,w,O),S&&s(global,w,O);var C=n(9523);s(C,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],R),C.resolveNaptr&&o(C,"resolveNaptr",R);var k,E,x=n(57147);s(x,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],R),x.lchown&&o(x,"lchown",R),x.lchmod&&o(x,"lchmod",R),x.ftruncate&&o(x,"ftruncate",R);try{k=n(59796)}catch(e){}if(k&&k.Deflate&&k.Deflate.prototype){var T=Object.getPrototypeOf(k.Deflate.prototype);T._transform?o(T,"_transform",R):T.write&&T.flush&&T.end&&s(T,["write","flush","end"],R)}try{E=n(6113)}catch(e){}if(E){var P=["pbkdf2","randomBytes"];p||P.push("pseudoRandomBytes"),s(E,P,R)}var I=!!global.Promise&&"function Promise() { [native code] }"===Promise.toString()&&"function toString() { [native code] }"===Promise.toString.toString();if(I){var D=process.addAsyncListener({create:function(){I=!1}});global.Promise.resolve(!0).then((function(){I=!1})),process.removeAsyncListener(D)}function R(e){var t=function(){var t,n=arguments.length-1;if("function"==typeof arguments[n]){t=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)t[i]=arguments[i];t[n]=a(arguments[n])}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(n){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n))};case 2:return function(n,i){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof i&&(i=a(i)),e.call(this,n,i))};case 3:return function(n,i,r){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=a(r)),e.call(this,n,i,r))};case 4:return function(n,i,r,o){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof o&&(o=a(o)),e.call(this,n,i,r,o))};case 5:return function(n,i,r,o,s){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof s&&(s=a(s)),e.call(this,n,i,r,o,s))};case 6:return function(n,i,r,o,s,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof c&&(c=a(c)),e.call(this,n,i,r,o,s,c))};default:return t}}function O(e){var t=function(){var t;if("function"==typeof arguments[0]){(t=Array(arguments.length))[0]=a(arguments[0]);for(var n=1;n<arguments.length;n++)t[n]=arguments[n]}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(n){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n))};case 2:return function(n,i){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n,i))};case 3:return function(n,i,r){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n,i,r))};case 4:return function(n,i,r,o){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n,i,r,o))};case 5:return function(n,i,r,o,s){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n,i,r,o,s))};case 6:return function(n,i,r,o,s,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n,i,r,o,s,c))};default:return t}}I&&function(){var e=global.Promise;function t(n){if(!(this instanceof t))return e(n);if("function"!=typeof n)return new e(n);var r,o,s=new e((function(e,t){r=this,o=[function(t){return i(s,!1),e(t)},function(e){return i(s,!1),t(e)}]}));s.__proto__=t.prototype;try{n.apply(r,o)}catch(e){o[1](e)}return s}function i(e,t){e.__asl_wrapper&&!t||(e.__asl_wrapper=a(r))}function r(t,n,o,s){var a;try{return{returnVal:a=n.call(t,o),error:!1}}catch(e){return{errorVal:e,error:!0}}finally{a instanceof e?s.__asl_wrapper=function(){return(a.__asl_wrapper||r).apply(this,arguments)}:i(s,!0)}}function s(e){return function(){var t=this,n=e.apply(t,Array.prototype.map.call(arguments,(function(e){return"function"!=typeof e?e:a((function(i){var o=(t.__asl_wrapper||r)(this,e,i,n);if(o.error)throw o.errorVal;return o.returnVal}))})));return n.__asl_wrapper=function(e,i,o,s){return t.__asl_wrapper?(t.__asl_wrapper(e,(function(){}),null,n),n.__asl_wrapper(e,i,o,s)):r(e,i,o,s)},n}}c.inherits(t,e),o(e.prototype,"then",s),e.prototype.chain&&o(e.prototype,"chain",s),l?global.Promise=n(68286)(e,i):(["all","race","reject","resolve","accept","defer"].forEach((function(n){"function"==typeof e[n]&&(t[n]=e[n])})),global.Promise=t)}()},59118:(e,t,n)=>{e.exports={parallel:n(19162),serial:n(31357),serialOrdered:n(69087)}},37651:e=>{function t(e){"function"==typeof this.jobs[e]&&this.jobs[e]()}e.exports=function(e){Object.keys(e.jobs).forEach(t.bind(e)),e.jobs={}}},55912:(e,t,n)=>{var i=n(9265);e.exports=function(e){var t=!1;return i((function(){t=!0})),function(n,r){t?e(n,r):i((function(){e(n,r)}))}}},9265:e=>{e.exports=function(e){var t="function"==typeof setImmediate?setImmediate:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:null;t?t(e):setTimeout(e,0)}},97594:(e,t,n)=>{var i=n(55912),r=n(37651);e.exports=function(e,t,n,o){var s=n.keyedList?n.keyedList[n.index]:n.index;n.jobs[s]=function(e,t,n,r){return 2==e.length?e(n,i(r)):e(n,t,i(r))}(t,s,e[s],(function(e,t){s in n.jobs&&(delete n.jobs[s],e?r(n):n.results[s]=t,o(e,n.results))}))}},94528:e=>{e.exports=function(e,t){var n=!Array.isArray(e),i={index:0,keyedList:n||t?Object.keys(e):null,jobs:{},results:n?{}:[],size:n?Object.keys(e).length:e.length};return t&&i.keyedList.sort(n?t:function(n,i){return t(e[n],e[i])}),i}},25353:(e,t,n)=>{var i=n(37651),r=n(55912);e.exports=function(e){Object.keys(this.jobs).length&&(this.index=this.size,i(this),r(e)(null,this.results))}},19162:(e,t,n)=>{var i=n(97594),r=n(94528),o=n(25353);e.exports=function(e,t,n){for(var s=r(e);s.index<(s.keyedList||e).length;)i(e,t,s,(function(e,t){e?n(e,t):0!==Object.keys(s.jobs).length||n(null,s.results)})),s.index++;return o.bind(s,n)}},31357:(e,t,n)=>{var i=n(69087);e.exports=function(e,t,n){return i(e,t,null,n)}},69087:(e,t,n)=>{var i=n(97594),r=n(94528),o=n(25353);function s(e,t){return e<t?-1:e>t?1:0}e.exports=function(e,t,n,s){var a=r(e,n);return i(e,t,a,(function n(r,o){r?s(r,o):(a.index++,a.index<(a.keyedList||e).length?i(e,t,a,n):s(null,a.results))})),o.bind(a,s)},e.exports.ascending=s,e.exports.descending=function(e,t){return-1*s(e,t)}},9669:(e,t,n)=>{e.exports=n(51609)},47970:(e,t,n)=>{"use strict";var i=n(64867),r=n(36026),o=n(94097),s=n(15327),a=n(13685),c=n(95687),l=n(30938).http,d=n(30938).https,u=n(57310),p=n(59796),h=n(97288).version,f=n(85061),m=n(80481),g=n(77874),v=n(65263),y=/https:?/;function b(e,t,n){if(e.hostname=t.host,e.host=t.host,e.port=t.port,e.path=n,t.auth){var i=Buffer.from(t.auth.username+":"+t.auth.password,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+i}e.beforeRedirect=function(e){e.headers.host=e.host,b(e,t,e.href)}}e.exports=function(e){return new Promise((function(t,n){var w;function _(){e.cancelToken&&e.cancelToken.unsubscribe(w),e.signal&&e.signal.removeEventListener("abort",w)}var S=function(e){_(),t(e)},C=!1,k=function(e){_(),C=!0,n(e)},E=e.data,x=e.headers,T={};if(Object.keys(x).forEach((function(e){T[e.toLowerCase()]=e})),"user-agent"in T?x[T["user-agent"]]||delete x[T["user-agent"]]:x["User-Agent"]="axios/"+h,E&&!i.isStream(E)){if(Buffer.isBuffer(E));else if(i.isArrayBuffer(E))E=Buffer.from(new Uint8Array(E));else{if(!i.isString(E))return k(f("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));E=Buffer.from(E,"utf-8")}if(e.maxBodyLength>-1&&E.length>e.maxBodyLength)return k(f("Request body larger than maxBodyLength limit",e));T["content-length"]||(x["Content-Length"]=E.length)}var P=void 0;e.auth&&(P=(e.auth.username||"")+":"+(e.auth.password||""));var I=o(e.baseURL,e.url),D=u.parse(I),R=D.protocol||"http:";if(!P&&D.auth){var O=D.auth.split(":");P=(O[0]||"")+":"+(O[1]||"")}P&&T.authorization&&delete x[T.authorization];var A=y.test(R),N=A?e.httpsAgent:e.httpAgent;try{s(D.path,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(t){var M=new Error(t.message);M.config=e,M.url=e.url,M.exists=!0,k(M)}var L={path:s(D.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:x,agent:N,agents:{http:e.httpAgent,https:e.httpsAgent},auth:P};e.socketPath?L.socketPath=e.socketPath:(L.hostname=D.hostname,L.port=D.port);var j,F=e.proxy;if(!F&&!1!==F){var U=R.slice(0,-1)+"_proxy",q=process.env[U]||process.env[U.toUpperCase()];if(q){var K=u.parse(q),V=process.env.no_proxy||process.env.NO_PROXY,W=!0;if(V&&(W=!V.split(",").map((function(e){return e.trim()})).some((function(e){return!!e&&("*"===e||"."===e[0]&&D.hostname.substr(D.hostname.length-e.length)===e||D.hostname===e)}))),W&&(F={host:K.hostname,port:K.port,protocol:K.protocol},K.auth)){var $=K.auth.split(":");F.auth={username:$[0],password:$[1]}}}}F&&(L.headers.host=D.hostname+(D.port?":"+D.port:""),b(L,F,R+"//"+D.hostname+(D.port?":"+D.port:"")+L.path));var B=A&&(!F||y.test(F.protocol));e.transport?j=e.transport:0===e.maxRedirects?j=B?c:a:(e.maxRedirects&&(L.maxRedirects=e.maxRedirects),j=B?d:l),e.maxBodyLength>-1&&(L.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(L.insecureHTTPParser=e.insecureHTTPParser);var H=j.request(L,(function(t){if(!H.aborted){var n=t,o=t.req||H;if(204!==t.statusCode&&"HEAD"!==o.method&&!1!==e.decompress)switch(t.headers["content-encoding"]){case"gzip":case"compress":case"deflate":n=n.pipe(p.createUnzip()),delete t.headers["content-encoding"]}var s={status:t.statusCode,statusText:t.statusMessage,headers:t.headers,config:e,request:o};if("stream"===e.responseType)s.data=n,r(S,k,s);else{var a=[],c=0;n.on("data",(function(t){a.push(t),c+=t.length,e.maxContentLength>-1&&c>e.maxContentLength&&(C=!0,n.destroy(),k(f("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,o)))})),n.on("aborted",(function(){C||(n.destroy(),k(f("error request aborted",e,"ERR_REQUEST_ABORTED",o)))})),n.on("error",(function(t){H.aborted||k(m(t,e,null,o))})),n.on("end",(function(){try{var t=1===a.length?a[0]:Buffer.concat(a);"arraybuffer"!==e.responseType&&(t=t.toString(e.responseEncoding),e.responseEncoding&&"utf8"!==e.responseEncoding||(t=i.stripBOM(t))),s.data=t}catch(t){k(m(t,e,t.code,s.request,s))}r(S,k,s)}))}}}));if(H.on("error",(function(t){H.aborted&&"ERR_FR_TOO_MANY_REDIRECTS"!==t.code||k(m(t,e,null,H))})),H.on("socket",(function(e){e.setKeepAlive(!0,6e4)})),e.timeout){var z=parseInt(e.timeout,10);if(isNaN(z))return void k(f("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",H));H.setTimeout(z,(function(){H.abort();var t;t=e.timeoutErrorMessage?e.timeoutErrorMessage:"timeout of "+e.timeout+"ms exceeded";var n=e.transitional||g;k(f(t,e,n.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",H))}))}(e.cancelToken||e.signal)&&(w=function(e){H.aborted||(H.abort(),k(!e||e&&e.type?new v("canceled"):e))},e.cancelToken&&e.cancelToken.subscribe(w),e.signal&&(e.signal.aborted?w():e.signal.addEventListener("abort",w))),i.isStream(E)?E.on("error",(function(t){k(m(t,e,null,H))})).pipe(H):H.end(E)}))}},55448:(e,t,n)=>{"use strict";var i=n(64867),r=n(36026),o=n(4372),s=n(15327),a=n(94097),c=n(84109),l=n(67985),d=n(85061),u=n(77874),p=n(65263);e.exports=function(e){return new Promise((function(t,n){var h,f=e.data,m=e.headers,g=e.responseType;function v(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}i.isFormData(f)&&delete m["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(b+":"+w)}var _=a(e.baseURL,e.url);function S(){if(y){var i="getAllResponseHeaders"in y?c(y.getAllResponseHeaders()):null,o={data:g&&"text"!==g&&"json"!==g?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:i,config:e,request:y};r((function(e){t(e),v()}),(function(e){n(e),v()}),o),y=null}}if(y.open(e.method.toUpperCase(),s(_,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=S:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(S)},y.onabort=function(){y&&(n(d("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function(){n(d("Network Error",e,null,y)),y=null},y.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",i=e.transitional||u;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(d(t,e,i.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},i.isStandardBrowserEnv()){var C=(e.withCredentials||l(_))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;C&&(m[e.xsrfHeaderName]=C)}"setRequestHeader"in y&&i.forEach(m,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete m[t]:y.setRequestHeader(t,e)})),i.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),g&&"json"!==g&&(y.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function(e){y&&(n(!e||e&&e.type?new p("canceled"):e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),f||(f=null),y.send(f)}))}},51609:(e,t,n)=>{"use strict";var i=n(64867),r=n(91849),o=n(30321),s=n(47185),a=function e(t){var n=new o(t),a=r(o.prototype.request,n);return i.extend(a,o.prototype,n),i.extend(a,n),a.create=function(n){return e(s(t,n))},a}(n(45546));a.Axios=o,a.Cancel=n(65263),a.CancelToken=n(14972),a.isCancel=n(26502),a.VERSION=n(97288).version,a.all=function(e){return Promise.all(e)},a.spread=n(8713),a.isAxiosError=n(16268),e.exports=a,e.exports.default=a},65263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},14972:(e,t,n)=>{"use strict";var i=n(65263);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,i=n._listeners.length;for(t=0;t<i;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,i=new Promise((function(e){n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e){n.reason||(n.reason=new i(e),t(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},r.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},26502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},30321:(e,t,n)=>{"use strict";var i=n(64867),r=n(15327),o=n(80782),s=n(13572),a=n(47185),c=n(54875),l=c.validators;function d(e){this.defaults=e,this.interceptors={request:new o,response:new o}}d.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var i=[],r=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));var o,d=[];if(this.interceptors.response.forEach((function(e){d.push(e.fulfilled,e.rejected)})),!r){var u=[s,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(d),o=Promise.resolve(t);u.length;)o=o.then(u.shift(),u.shift());return o}for(var p=t;i.length;){var h=i.shift(),f=i.shift();try{p=h(p)}catch(e){f(e);break}}try{o=s(p)}catch(e){return Promise.reject(e)}for(;d.length;)o=o.then(d.shift(),d.shift());return o},d.prototype.getUri=function(e){return e=a(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),i.forEach(["post","put","patch"],(function(e){d.prototype[e]=function(t,n,i){return this.request(a(i||{},{method:e,url:t,data:n}))}})),e.exports=d},80782:(e,t,n)=>{"use strict";var i=n(64867);function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},94097:(e,t,n)=>{"use strict";var i=n(91793),r=n(7303);e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},85061:(e,t,n)=>{"use strict";var i=n(80481);e.exports=function(e,t,n,r,o){var s=new Error(e);return i(s,t,n,r,o)}},13572:(e,t,n)=>{"use strict";var i=n(64867),r=n(18527),o=n(26502),s=n(45546),a=n(65263);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return c(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},80481:e=>{"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},47185:(e,t,n)=>{"use strict";var i=n(64867);e.exports=function(e,t){t=t||{};var n={};function r(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function o(n){return i.isUndefined(t[n])?i.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function s(e){if(!i.isUndefined(t[e]))return r(void 0,t[e])}function a(n){return i.isUndefined(t[n])?i.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function c(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return i.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||o,r=t(e);i.isUndefined(r)&&t!==c||(n[e]=r)})),n}},36026:(e,t,n)=>{"use strict";var i=n(85061);e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(i("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},18527:(e,t,n)=>{"use strict";var i=n(64867),r=n(45546);e.exports=function(e,t,n){var o=this||r;return i.forEach(n,(function(n){e=n.call(o,e,t)})),e}},45546:(e,t,n)=>{"use strict";var i=n(64867),r=n(16016),o=n(80481),s=n(77874),a={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,d={transitional:s,adapter:("undefined"!=typeof XMLHttpRequest?l=n(55448):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(l=n(47970)),l),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,n){if(i.isString(e))try{return(0,JSON.parse)(e),i.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||d.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||r&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){d.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){d.headers[e]=i.merge(a)})),e.exports=d},77874:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},97288:e=>{e.exports={version:"0.26.1"}},91849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},15327:(e,t,n)=>{"use strict";var i=n(64867);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var s=[];i.forEach(t,(function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),s.push(r(t)+"="+r(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var i=n(64867);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(r)&&a.push("path="+r),i.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},91793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},16268:(e,t,n)=>{"use strict";var i=n(64867);e.exports=function(e){return i.isObject(e)&&!0===e.isAxiosError}},67985:(e,t,n)=>{"use strict";var i=n(64867);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},16016:(e,t,n)=>{"use strict";var i=n(64867);e.exports=function(e,t){i.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))}},84109:(e,t,n)=>{"use strict";var i=n(64867),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(i.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=i.trim(e.substr(0,o)).toLowerCase(),n=i.trim(e.substr(o+1)),t){if(s[t]&&r.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},54875:(e,t,n)=>{"use strict";var i=n(97288).version,r={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){r[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};r.transitional=function(e,t,n){function r(e,t){return"[Axios v"+i+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,s){if(!1===e)throw new Error(r(i," has been removed"+(t?" in "+t:"")));return t&&!o[i]&&(o[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var i=Object.keys(e),r=i.length;r-- >0;){var o=i[r],s=t[o];if(s){var a=e[o],c=void 0===a||s(a,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:r}},64867:(e,t,n)=>{"use strict";var i=n(91849),r=Object.prototype.toString;function o(e){return Array.isArray(e)}function s(e){return void 0===e}function a(e){return"[object ArrayBuffer]"===r.call(e)}function c(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function d(e){return"[object Function]"===r.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:o,isArrayBuffer:a,isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===r.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&a(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isPlainObject:l,isUndefined:s,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:d,isStream:function(e){return c(e)&&d(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===r.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function n(n,i){l(t[i])&&l(n)?t[i]=e(t[i],n):l(n)?t[i]=e({},n):o(n)?t[i]=n.slice():t[i]=n}for(var i=0,r=arguments.length;i<r;i++)u(arguments[i],n);return t},extend:function(e,t,n){return u(t,(function(t,r){e[r]=n&&"function"==typeof t?i(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},5623:e=>{"use strict";function t(e,t,r){e instanceof RegExp&&(e=n(e,r)),t instanceof RegExp&&(t=n(t,r));var o=i(e,t,r);return o&&{start:o[0],end:o[1],pre:r.slice(0,o[0]),body:r.slice(o[0]+e.length,o[1]),post:r.slice(o[1]+t.length)}}function n(e,t){var n=t.match(e);return n?n[0]:null}function i(e,t,n){var i,r,o,s,a,c=n.indexOf(e),l=n.indexOf(t,c+1),d=c;if(c>=0&&l>0){if(e===t)return[c,l];for(i=[],o=n.length;d>=0&&!a;)d==c?(i.push(d),c=n.indexOf(e,d+1)):1==i.length?a=[i.pop(),l]:((r=i.pop())<o&&(o=r,s=l),l=n.indexOf(t,d+1)),d=c<l&&c>=0?c:l;i.length&&(a=[o,s])}return a}e.exports=t,t.range=i},3644:(e,t,n)=>{var i=n(11048),r=n(5623);e.exports=function(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),v(function(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(l)}(e),!0).map(u)):[]};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",l="\0PERIOD"+Math.random()+"\0";function d(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function u(e){return e.split(o).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(l).join(".")}function p(e){if(!e)return[""];var t=[],n=r("{","}",e);if(!n)return e.split(",");var i=n.pre,o=n.body,s=n.post,a=i.split(",");a[a.length-1]+="{"+o+"}";var c=p(s);return s.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),t.push.apply(t,a),t}function h(e){return"{"+e+"}"}function f(e){return/^-?0\d/.test(e)}function m(e,t){return e<=t}function g(e,t){return e>=t}function v(e,t){var n=[],o=r("{","}",e);if(!o||/\$$/.test(o.pre))return[e];var s,c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body),u=c||l,y=o.body.indexOf(",")>=0;if(!u&&!y)return o.post.match(/,.*\}/)?v(e=o.pre+"{"+o.body+a+o.post):[e];if(u)s=o.body.split(/\.\./);else if(1===(s=p(o.body)).length&&1===(s=v(s[0],!1).map(h)).length)return(_=o.post.length?v(o.post,!1):[""]).map((function(e){return o.pre+s[0]+e}));var b,w=o.pre,_=o.post.length?v(o.post,!1):[""];if(u){var S=d(s[0]),C=d(s[1]),k=Math.max(s[0].length,s[1].length),E=3==s.length?Math.abs(d(s[2])):1,x=m;C<S&&(E*=-1,x=g);var T=s.some(f);b=[];for(var P=S;x(P,C);P+=E){var I;if(l)"\\"===(I=String.fromCharCode(P))&&(I="");else if(I=String(P),T){var D=k-I.length;if(D>0){var R=new Array(D+1).join("0");I=P<0?"-"+R+I.slice(1):R+I}}b.push(I)}}else b=i(s,(function(e){return v(e,!1)}));for(var O=0;O<b.length;O++)for(var A=0;A<_.length;A++){var N=w+b[O]+_[A];(!t||u||N)&&n.push(N)}return n}},39376:e=>{"use strict";e.exports={mask:(e,t,n,i,r)=>{for(var o=0;o<r;o++)n[i+o]=e[o]^t[3&o]},unmask:(e,t)=>{const n=e.length;for(var i=0;i<n;i++)e[i]^=t[3&i]}}},41891:(e,t,n)=>{"use strict";try{e.exports=n(19516)(__dirname)}catch(t){e.exports=n(39376)}},44046:(e,t,n)=>{"use strict";const i=n(73837),r=n(39491),o=n(69867),s=n(73223),a="cls@contexts",c="error@context",l=[];for(let e in s.providers)l[s.providers[e]]=e;const d=process.env.DEBUG_CLS_HOOKED;let u=-1;function p(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}function h(e){return process.namespaces[e]}function f(e){let t=h(e);r.ok(t,"can't delete nonexistent namespace! \""+e+'"'),r.ok(t.id,"don't assign to process.namespaces directly! "+i.inspect(t)),process.namespaces[e]=null}function m(e){process.env.DEBUG&&process._rawDebug(e)}function g(e){return e?"function"==typeof e?e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]:e.constructor&&e.constructor.name?e.constructor.name:void 0:e}if(e.exports={getNamespace:h,createNamespace:function(e){r.ok(e,"namespace must be given a name."),d&&m("CREATING NAMESPACE "+e);let t=new p(e);return t.id=u,s.addHooks({init(n,r,o,s,a){u=n,s?(t._contexts.set(n,t._contexts.get(s)),d&&m("PARENTID: "+e+" uid:"+n+" parent:"+s+" provider:"+o)):t._contexts.set(u,t.active),d&&m("INIT "+e+" uid:"+n+" parent:"+s+" provider:"+l[o]+" active:"+i.inspect(t.active,!0))},pre(n,r){u=n;let o=t._contexts.get(n);o?(d&&m(" PRE "+e+" uid:"+n+" handle:"+g(r)+" context:"+i.inspect(o)),t.enter(o)):d&&m(" PRE MISSING CONTEXT "+e+" uid:"+n+" handle:"+g(r))},post(n,r){u=n;let o=t._contexts.get(n);o?(d&&m(" POST "+e+" uid:"+n+" handle:"+g(r)+" context:"+i.inspect(o)),t.exit(o)):d&&m(" POST MISSING CONTEXT "+e+" uid:"+n+" handle:"+g(r))},destroy(n){u=n,d&&m("DESTROY "+e+" uid:"+n+" context:"+i.inspect(t._contexts.get(u))+" active:"+i.inspect(t.active,!0)),t._contexts.delete(n)}}),process.namespaces[e]=t,t},destroyNamespace:f,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){f(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},p.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return d&&m("    SETTING KEY:"+e+"="+t+" in ns:"+this.name+" uid:"+u+" active:"+i.inspect(this.active,!0)),this.active[e]=t,t},p.prototype.get=function(e){if(this.active)return d&&m("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+u+" active:"+i.inspect(this.active,!0)),this.active[e];d&&m("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+u+" active:"+i.inspect(this.active,!0))},p.prototype.createContext=function(){d&&m("   CREATING Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  active:"+i.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=u,d&&m("   CREATED Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  context:"+i.inspect(e,!0,2,!0)),e},p.prototype.run=function(e){let t=this.createContext();this.enter(t);try{return d&&m(" BEFORE RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+i.inspect(t)),e(t),t}catch(e){throw e&&(e[c]=t),e}finally{d&&m(" AFTER RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+i.inspect(t)),this.exit(t)}},p.prototype.runAndReturn=function(e){var t;return this.run((function(n){t=e(n)})),t},p.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let n=e(t);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return d&&m(" BEFORE runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+i.inspect(t)),n.then((e=>(d&&m(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+i.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,d&&m(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+i.inspect(t)),this.exit(t),e}))},p.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{n.exit(t)}}},p.prototype.enter=function(e){r.ok(e,"context must be provided for entering"),d&&m("  ENTER "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+i.inspect(e)),this._set.push(this.active),this.active=e},p.prototype.exit=function(e){if(r.ok(e,"context must be provided for exiting"),d&&m("  EXIT "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+i.inspect(e)),this.active===e)return r.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(d&&m("??ERROR?? context exiting but not entered - ignoring: "+i.inspect(e)),r.ok(t>=0,"context not currently entered; can't exit. \n"+i.inspect(this)+"\n"+i.inspect(e))):(r.ok(t,"can't remove top context"),this._set.splice(t,1))},p.prototype.bindEmitter=function(e){r.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,n="context@"+this.name;o(e,(function(e){e&&(e[a]||(e[a]=Object.create(null)),e[a][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,n=e[a];return Object.keys(n).forEach((function(e){let i=n[e];t=i.namespace.bind(t,i.context)})),t}))},p.prototype.fromException=function(e){return e[c]},process.namespaces={},s._state&&!s._state.enabled&&s.enable(),d){var v=n(92512);for(var y in v.filter._modifiers)v.filter.deattach(y)}},93964:(e,t,n)=>{"use strict";const i=n(73837),r=n(39491),o=n(69867),s=n(50852),a="cls@contexts",c="error@context",l=process.env.DEBUG_CLS_HOOKED;let d=-1;function u(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}function p(e){return process.namespaces[e]}function h(e){let t=p(e);r.ok(t,"can't delete nonexistent namespace! \""+e+'"'),r.ok(t.id,"don't assign to process.namespaces directly! "+i.inspect(t)),process.namespaces[e]=null}function f(...e){l&&process._rawDebug(`${i.format(...e)}`)}e.exports={getNamespace:p,createNamespace:function(e){r.ok(e,"namespace must be given a name."),l&&f(`NS-CREATING NAMESPACE (${e})`);let t=new u(e);return t.id=d,s.createHook({init(n,r,o,a){if(d=s.executionAsyncId(),t.active){if(t._contexts.set(n,t.active),l){f(`${" ".repeat(t._indent<0?0:t._indent)}INIT [${r}] (${e}) asyncId:${n} currentUid:${d} triggerId:${o} active:${i.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}}else if(0===d){const o=s.triggerAsyncId(),c=t._contexts.get(o);if(c){if(t._contexts.set(n,c),l){f(`${" ".repeat(t._indent<0?0:t._indent)}INIT USING CONTEXT FROM TRIGGERID [${r}] (${e}) asyncId:${n} currentUid:${d} triggerId:${o} active:${i.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}}else if(l){f(`${" ".repeat(t._indent<0?0:t._indent)}INIT MISSING CONTEXT [${r}] (${e}) asyncId:${n} currentUid:${d} triggerId:${o} active:${i.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}}if(l&&"PROMISE"===r){f(i.inspect(a,{showHidden:!0}));const s=a.parentId;f(`${" ".repeat(t._indent<0?0:t._indent)}INIT RESOURCE-PROMISE [${r}] (${e}) parentId:${s} asyncId:${n} currentUid:${d} triggerId:${o} active:${i.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}},before(n){let r;if(d=s.executionAsyncId(),r=t._contexts.get(n)||t._contexts.get(d),r){if(l){const o=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE (${e}) asyncId:${n} currentUid:${d} triggerId:${o} active:${i.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${i.inspect(r)}`),t._indent+=2}t.enter(r)}else if(l){const r=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE MISSING CONTEXT (${e}) asyncId:${n} currentUid:${d} triggerId:${r} active:${i.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${i.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(n){let r;if(d=s.executionAsyncId(),r=t._contexts.get(n)||t._contexts.get(d),r){if(l){const o=s.triggerAsyncId();t._indent-=2;f(`${" ".repeat(t._indent<0?0:t._indent)}AFTER (${e}) asyncId:${n} currentUid:${d} triggerId:${o} active:${i.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${i.inspect(r)}`)}t.exit(r)}else if(l){const o=s.triggerAsyncId();t._indent-=2;f(`${" ".repeat(t._indent<0?0:t._indent)}AFTER MISSING CONTEXT (${e}) asyncId:${n} currentUid:${d} triggerId:${o} active:${i.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${i.inspect(r)}`)}},destroy(n){if(d=s.executionAsyncId(),l){const r=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}DESTROY (${e}) currentUid:${d} asyncId:${n} triggerId:${r} active:${i.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${i.inspect(t._contexts.get(d))}`)}t._contexts.delete(n)}}).enable(),process.namespaces[e]=t,t},destroyNamespace:h,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){h(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},u.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,l&&f(" ".repeat(this._indent<0?0:this._indent)+"CONTEXT-SET KEY:"+e+"="+t+" in ns:"+this.name+" currentUid:"+d+" active:"+i.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),t},u.prototype.get=function(e){if(this.active){if(l){const t=s.executionAsyncId(),n=s.triggerAsyncId(),r=" ".repeat(this._indent<0?0:this._indent);f(r+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+d+" active:"+i.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),f(`${r}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${d} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length} active:${i.inspect(this.active)}`)}return this.active[e]}if(l){const t=s.currentId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${d} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length}`)}},u.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=d,l){const t=s.executionAsyncId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-CREATED Context: (${this.name}) currentUid:${d} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length} context:${i.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e},u.prototype.run=function(e){let t=this.createContext();this.enter(t);try{if(l){const e=s.triggerAsyncId(),n=s.executionAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${d} triggerId:${e} asyncHooksCurrentId:${n} len:${this._set.length} context:${i.inspect(t)}`)}return e(t),t}catch(e){throw e&&(e[c]=t),e}finally{if(l){const e=s.triggerAsyncId(),n=s.executionAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN END: (${this.name}) currentUid:${d} triggerId:${e} asyncHooksCurrentId:${n} len:${this._set.length} ${i.inspect(t)}`)}this.exit(t)}},u.prototype.runAndReturn=function(e){let t;return this.run((function(n){t=e(n)})),t},u.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let n=e(t);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return l&&f("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+d+" len:"+this._set.length+" "+i.inspect(t)),n.then((e=>(l&&f("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+d+" len:"+this._set.length+" "+i.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,l&&f("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+d+" len:"+this._set.length+" "+i.inspect(t)),this.exit(t),e}))},u.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{n.exit(t)}}},u.prototype.enter=function(e){if(r.ok(e,"context must be provided for entering"),l){const t=s.executionAsyncId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-ENTER: (${this.name}) currentUid:${d} triggerId:${n} asyncHooksCurrentId:${t} len:${this._set.length} ${i.inspect(e)}`)}this._set.push(this.active),this.active=e},u.prototype.exit=function(e){if(r.ok(e,"context must be provided for exiting"),l){const t=s.executionAsyncId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-EXIT: (${this.name}) currentUid:${d} triggerId:${n} asyncHooksCurrentId:${t} len:${this._set.length} ${i.inspect(e)}`)}if(this.active===e)return r.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(l&&f("??ERROR?? context exiting but not entered - ignoring: "+i.inspect(e)),r.ok(t>=0,"context not currently entered; can't exit. \n"+i.inspect(this)+"\n"+i.inspect(e))):(r.ok(t,"can't remove top context"),this._set.splice(t,1))},u.prototype.bindEmitter=function(e){r.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,n="context@"+this.name;o(e,(function(e){e&&(e[a]||(e[a]=Object.create(null)),e[a][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,n=e[a];return Object.keys(n).forEach((function(e){let i=n[e];t=i.namespace.bind(t,i.context)})),t}))},u.prototype.fromException=function(e){return e[c]},process.namespaces={}},39562:(e,t,n)=>{"use strict";const i=n(36625);process&&i.gte(process.versions.node,"8.0.0")?e.exports=n(93964):e.exports=n(44046)},9779:(e,t,n)=>{var i=n(73837),r=n(12781).Stream,o=n(63463);function s(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}e.exports=s,i.inherits(s,r),s.create=function(e){var t=new this;for(var n in e=e||{})t[n]=e[n];return t},s.isStreamLike=function(e){return"function"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&!Buffer.isBuffer(e)},s.prototype.append=function(e){if(s.isStreamLike(e)){if(!(e instanceof o)){var t=o.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=t}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this},s.prototype.pipe=function(e,t){return r.prototype.pipe.call(this,e,t),this.resume(),e},s.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop)this._pendingNext=!0;else{this._insideLoop=!0;try{do{this._pendingNext=!1,this._realGetNext()}while(this._pendingNext)}finally{this._insideLoop=!1}}},s.prototype._realGetNext=function(){var e=this._streams.shift();void 0!==e?"function"==typeof e?e(function(e){s.isStreamLike(e)&&(e.on("data",this._checkDataSize.bind(this)),this._handleErrors(e)),this._pipeNext(e)}.bind(this)):this._pipeNext(e):this.end()},s.prototype._pipeNext=function(e){if(this._currentStream=e,s.isStreamLike(e))return e.on("end",this._getNext.bind(this)),void e.pipe(this,{end:!1});var t=e;this.write(t),this._getNext()},s.prototype._handleErrors=function(e){var t=this;e.on("error",(function(e){t._emitError(e)}))},s.prototype.write=function(e){this.emit("data",e)},s.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},s.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},s.prototype.end=function(){this._reset(),this.emit("end")},s.prototype.destroy=function(){this._reset(),this.emit("close")},s.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},s.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(e))}},s.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach((function(t){t.dataSize&&(e.dataSize+=t.dataSize)})),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},s.prototype._emitError=function(e){this._reset(),this.emit("error",e)}},11048:e=>{e.exports=function(e,n){for(var i=[],r=0;r<e.length;r++){var o=n(e[r],r);t(o)?i.push.apply(i,o):i.push(o)}return i};var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},13057:(e,t,n)=>{"use strict";var i=n(39491),r=n(69867),o="cls@contexts",s="error@context";function a(e){this.name=e,this.active=null,this._set=[],this.id=null}function c(e){return process.namespaces[e]}function l(e){var t=c(e);i.ok(t,"can't delete nonexistent namespace!"),i.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function d(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){l(e)})),process.namespaces=Object.create(null)}process.addAsyncListener||n(67645),a.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t},a.prototype.get=function(e){if(this.active)return this.active[e]},a.prototype.createContext=function(){return Object.create(this.active)},a.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(e){throw e&&(e[s]=t),e}finally{this.exit(t)}},a.prototype.runAndReturn=function(e){var t;return this.run((function(n){t=e(n)})),t},a.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());var n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[s]=t),e}finally{n.exit(t)}}},a.prototype.enter=function(e){i.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e},a.prototype.exit=function(e){if(i.ok(e,"context must be provided for exiting"),this.active===e)return i.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());var t=this._set.lastIndexOf(e);i.ok(t>=0,"context not currently entered; can't exit"),i.ok(t,"can't remove top context"),this._set.splice(t,1)},a.prototype.bindEmitter=function(e){i.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,n="context@"+this.name;r(e,(function(e){e&&(e[o]||(e[o]=Object.create(null)),e[o][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e[o])return e;var t=e,n=e[o];return Object.keys(n).forEach((function(e){var i=n[e];t=i.namespace.bind(t,i.context)})),t}))},a.prototype.fromException=function(e){return e[s]},process.namespaces||d(),e.exports={getNamespace:c,createNamespace:function(e){i.ok(e,"namespace must be given a name!");var t=new a(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(e,n){n&&t.enter(n)},after:function(e,n){n&&t.exit(n)},error:function(e){e&&t.exit(e)}}),process.namespaces[e]=t,t},destroyNamespace:l,reset:d}},44165:(e,t,n)=>{const i=n(36292),r=i.default||i,o=function(e,t){return/^\/\//.test(e)&&(e="https:"+e),r.call(this,e,t)};o.ponyfill=!0,e.exports=t=o,t.fetch=o,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,t.default=o},11227:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let i=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(i++,"%c"===e&&(r=i))})),t.splice(r,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(82447)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},82447:(e,t,n)=>{e.exports=function(e){function t(e){let n,r,o,s=null;function a(...e){if(!a.enabled)return;const i=a,r=Number(new Date),o=r-(n||r);i.diff=o,i.prev=n,i.curr=r,n=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,r)=>{if("%%"===n)return"%";s++;const o=t.formatters[r];if("function"==typeof o){const t=e[s];n=o.call(i,t),e.splice(s,1),s--}return n})),t.formatArgs.call(i,e),(i.log||t.log).apply(i,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=i,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(r!==t.namespaces&&(r=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function i(e,n){const i=t(this.namespace+(void 0===n?":":n)+e);return i.log=this.log,i}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(57824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},15158:(e,t,n)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(11227):e.exports=n(39)},39:(e,t,n)=>{const i=n(76224),r=n(73837);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let i=0;i<n.length;i++)e.inspectOpts[n[i]]=t.inspectOpts[n[i]]},t.log=function(...e){return process.stderr.write(r.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:i,useColors:r}=this;if(r){const t=this.color,r="[3"+(t<8?t:"8;5;"+t),o=`  ${r};1m${i} [0m`;n[0]=o+n[0].split("\n").join("\n"+o),n.push(r+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+i+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):i.isatty(process.stderr.fd)},t.destroy=r.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=n(92130);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let i=process.env[t];return i=!!/^(yes|on|true|enabled)$/i.test(i)||!/^(no|off|false|disabled)$/i.test(i)&&("null"===i?null:Number(i)),e[n]=i,e}),{}),e.exports=n(82447)(t);const{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts)}},66518:e=>{"use strict";e.exports=function(e){var t=void 0;t="string"==typeof e?[e]:e.raw;for(var n="",i=0;i<t.length;i++)n+=t[i].replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`"),i<(arguments.length<=1?0:arguments.length-1)&&(n+=arguments.length<=i+1?void 0:arguments[i+1]);var r=n.split("\n"),o=null;return r.forEach((function(e){var t=e.match(/^(\s+)\S+/);if(t){var n=t[1].length;o=o?Math.min(o,n):n}})),null!==o&&(n=r.map((function(e){return" "===e[0]?e.slice(o):e})).join("\n")),(n=n.trim()).replace(/\\n/g,"\n")}},63463:(e,t,n)=>{var i=n(12781).Stream,r=n(73837);function o(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}e.exports=o,r.inherits(o,i),o.create=function(e,t){var n=new this;for(var i in t=t||{})n[i]=t[i];n.source=e;var r=e.emit;return e.emit=function(){return n._handleEmit(arguments),r.apply(e,arguments)},e.on("error",(function(){})),n.pauseStream&&e.pause(),n},Object.defineProperty(o.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),o.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},o.prototype.resume=function(){this._released||this.release(),this.source.resume()},o.prototype.pause=function(){this.source.pause()},o.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]},o.prototype.pipe=function(){var e=i.prototype.pipe.apply(this,arguments);return this.resume(),e},o.prototype._handleEmit=function(e){this._released?this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e))},o.prototype._checkIfMaxDataSizeExceeded=function(){if(!(this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}}},38604:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.azureCoreTracing=t.AzureMonitorSymbol=void 0;var i=n(84953);t.AzureMonitorSymbol="Azure_Monitor_Tracer";var r="azure-coretracing",o=!1;t.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){if(o)return e;try{var s=n(82506),a=n(94284),c=new s.BasicTracerProvider,l=c.getTracer("applicationinsights tracer");if(e.setTracer){var d=e.setTracer;e.setTracer=function(e){var n=e.startSpan;e.startSpan=function(e,t,o){var s=n.call(this,e,t,o),a=s.end;return s.end=function(){var e=a.apply(this,arguments);return i.channel.publish(r,s),e},s},e[t.AzureMonitorSymbol]=!0,d.call(this,e)},a.trace.getSpan(a.context.active()),e.setTracer(l)}else{var u=a.trace.setGlobalTracerProvider;a.trace.setGlobalTracerProvider=function(e){var n=e.getTracer;return e.getTracer=function(e,o){var s=n.call(this,e,o);if(!s[t.AzureMonitorSymbol]){var a=s.startSpan;s.startSpan=function(e,t,n){var o=a.call(this,e,t,n),s=o.end;return o.end=function(){var e=s.apply(this,arguments);return i.channel.publish(r,o),e},o},s[t.AzureMonitorSymbol]=!0}return s},u.call(this,e)},c.register(),a.trace.getSpan(a.context.active());var p=n(30874),h=n(87913);p.registerInstrumentations({instrumentations:[h.createAzureSdkInstrumentation()]})}o=!0}catch(e){}return e},publisherName:r},t.enable=function(){i.channel.registerMonkeyPatch("@azure/core-tracing",t.azureCoreTracing)}},58859:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.bunyan=void 0;var i=n(84953);t.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){var t=e.prototype._emit;return e.prototype._emit=function(e,n){var r=t.apply(this,arguments);if(!n){var o=r;o||(o=t.call(this,e,!0)),i.channel.publish("bunyan",{level:e.level,result:o})}return r},e}},t.enable=function(){i.channel.registerMonkeyPatch("bunyan",t.bunyan)}},92495:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.console=void 0;var i=n(84953),r=n(12781);t.console={versionSpecifier:">= 4.0.0",patch:function(e){var t=new r.Writable,n=new r.Writable;t.write=function(e){if(!e)return!0;var t=e.toString();return i.channel.publish("console",{message:t}),!0},n.write=function(e){if(!e)return!0;var t=e.toString();return i.channel.publish("console",{message:t,stderr:!0}),!0};for(var o=new e.Console(t,n),s=function(t){var n=e[t];n&&(e[t]=function(){if(o[t])try{o[t].apply(o,arguments)}catch(e){}return n.apply(e,arguments)})},a=0,c=["log","info","warn","error","dir","time","timeEnd","trace","assert"];a<c.length;a++)s(c[a]);return e}},t.enable=function(){i.channel.registerMonkeyPatch("console",t.console),n(96206)}},4106:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.tedious=t.pgPool=t.pg=t.winston=t.redis=t.mysql=t.mongodb=t.mongodbCore=t.console=t.bunyan=t.azuresdk=void 0;var i=n(38604);t.azuresdk=i;var r=n(58859);t.bunyan=r;var o=n(92495);t.console=o;var s=n(72028);t.mongodbCore=s;var a=n(88436);t.mongodb=a;var c=n(98002);t.mysql=c;var l=n(89024);t.pgPool=l;var d=n(48060);t.pg=d;var u=n(14487);t.redis=u;var p=n(66661);t.tedious=p;var h=n(14650);t.winston=h,t.enable=function(){r.enable(),o.enable(),s.enable(),a.enable(),c.enable(),d.enable(),l.enable(),u.enable(),h.enable(),i.enable(),p.enable()}},72028:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mongoCore=void 0;var i=n(84953);t.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var e=t.apply(this,arguments),n=this.s.pool.write;this.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=i.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var r=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=i.channel.bindToContext(arguments[1])),r.apply(this,arguments)},e},e}},t.enable=function(){i.channel.registerMonkeyPatch("mongodb-core",t.mongoCore)}},88436:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mongo330=t.mongo3=t.mongo2=void 0;var r=n(84953);t.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:function(e){var t=e.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext((function(e){return e()}))}}}),n={};return t.on("started",(function(e){n[e.requestId]||(n[e.requestId]=i(i({},e),{time:new Date}))})),t.on("succeeded",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})):r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),t.on("failed",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})):r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),e}},t.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:function(e){var t=e.instrument(),n={},o={};return t.on("started",(function(e){n[e.requestId]||(o[e.requestId]=r.channel.bindToContext((function(e){return e()})),n[e.requestId]=i(i({},e),{time:new Date}))})),t.on("succeeded",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete o[e.requestId])})),t.on("failed",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete o[e.requestId])})),e}},t.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:function(e){!function(e){var t=e.Server.prototype.connect;e.Server.prototype.connect=function(){var e=t.apply(this,arguments),n=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=r.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var i=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=r.channel.bindToContext(arguments[1])),i.apply(this,arguments)},e}}(e);var t=e.instrument(),n={},i={};return t.on("started",(function(e){n[e.requestId]||(i[e.requestId]=r.channel.bindToContext((function(e){return e()})),n[e.requestId]=e)})),t.on("succeeded",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete i[e.requestId])})),t.on("failed",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete i[e.requestId])})),e}},t.enable=function(){r.channel.registerMonkeyPatch("mongodb",t.mongo2),r.channel.registerMonkeyPatch("mongodb",t.mongo3),r.channel.registerMonkeyPatch("mongodb",t.mongo330)}},98002:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mysql=void 0;var i=n(84953),r=n(71017);t.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(e,t){var o=function(e,t){return function(t,n){var r=e[t];r&&(e[t]=function(){for(var e=arguments.length-1,t=arguments.length-1;t>=0;--t){if("function"==typeof arguments[t]){e=t;break}if(void 0!==arguments[t])break}var o=arguments[e],s={result:null,startTime:null,startDate:null};"function"==typeof o&&(n?(s.startTime=process.hrtime(),s.startDate=new Date,arguments[e]=i.channel.bindToContext(n(s,o))):arguments[e]=i.channel.bindToContext(o));var a=r.apply(this,arguments);return s.result=a,a})}},s=function(e,t){return o(e.prototype)},a=n(54694)(r.dirname(t)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach((function(e){return s(a)(e)})),o(a)("createQuery",(function(e,t){return function(n){var r=process.hrtime(e.startTime),o=1e3*r[0]+r[1]/1e6|0;i.channel.publish("mysql",{query:e.result,callbackArgs:arguments,err:n,duration:o,time:e.startDate}),t.apply(this,arguments)}}));var c=n(80420)(r.dirname(t)+"/lib/Pool");return["_enqueueCallback"].forEach((function(e){return s(c)(e)})),e}},t.enable=function(){i.channel.registerMonkeyPatch("mysql",t.mysql)}},89024:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.postgresPool1=void 0;var i=n(84953);t.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:function(e){var t=e.prototype.connect;return e.prototype.connect=function(e){return e&&(arguments[0]=i.channel.bindToContext(e)),t.apply(this,arguments)},e}},t.enable=function(){i.channel.registerMonkeyPatch("pg-pool",t.postgresPool1)}},48060:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.postgres7=t.postgres6=void 0;var i=n(84953),r=n(82361),o="postgres";t.postgres6={versionSpecifier:"6.*",patch:function(e,t){var n=e.Client.prototype.query,s="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,t,a){var c,l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},d=process.hrtime();function u(e){e&&e[s]&&(e=e[s]);var t=i.channel.bindToContext((function(t,n){var s=process.hrtime(d);if(l.result=n&&{rowCount:n.rowCount,command:n.command},l.error=t,l.duration=Math.ceil(1e3*s[0]+s[1]/1e6),i.channel.publish(o,l),t){if(e)return e.apply(this,arguments);c&&c instanceof r.EventEmitter&&c.emit("error",t)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(t,s,{value:e}),t}catch(t){return e}}try{"string"==typeof e?t instanceof Array?(l.query.preparable={text:e,args:t},a=u(a)):(l.query.text=e,a?a=u(a):t=u(t)):("string"==typeof e.name?l.query.plan=e.name:e.values instanceof Array?l.query.preparable={text:e.text,args:e.values}:l.query.text=e.text,a?a=u(a):t?t=u(t):e.callback=u(e.callback))}catch(e){return n.apply(this,arguments)}return arguments[0]=e,arguments[1]=t,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,c=n.apply(this,arguments)},e}},t.postgres7={versionSpecifier:">=7.* <=8.*",patch:function(e,t){var n=e.Client.prototype.query,s="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,t,a){var c,l=this,d=!!a,u={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},p=process.hrtime();function h(e){e&&e[s]&&(e=e[s]);var t=i.channel.bindToContext((function(t,n){var s=process.hrtime(p);if(u.result=n&&{rowCount:n.rowCount,command:n.command},u.error=t,u.duration=Math.ceil(1e3*s[0]+s[1]/1e6),i.channel.publish(o,u),t){if(e)return e.apply(this,arguments);c&&c instanceof r.EventEmitter&&c.emit("error",t)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(t,s,{value:e}),t}catch(t){return e}}try{"string"==typeof e?t instanceof Array?(u.query.preparable={text:e,args:t},a=(d="function"==typeof a)?h(a):a):(u.query.text=e,a?a=(d="function"==typeof a)?h(a):a:t=(d="function"==typeof t)?h(t):t):("string"==typeof e.name?u.query.plan=e.name:e.values instanceof Array?u.query.preparable={text:e.text,args:e.values}:u.query.text=e.text,a?(d="function"==typeof a,a=h(a)):t?t=(d="function"==typeof t)?h(t):t:(d="function"==typeof e.callback,e.callback=d?h(e.callback):e.callback))}catch(e){return n.apply(this,arguments)}return arguments[0]=e,arguments[1]=t,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,c=n.apply(this,arguments),d?c:c.then((function(e){return h()(void 0,e),new l._Promise((function(t,n){t(e)}))})).catch((function(e){return h()(e,void 0),new l._Promise((function(t,n){n(e)}))}))},e},publisherName:o},t.enable=function(){i.channel.registerMonkeyPatch("pg",t.postgres6),i.channel.registerMonkeyPatch("pg",t.postgres7)}},14487:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.redis=void 0;var i=n(84953);t.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var t=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(e){if(e){var n=e.callback;if(!n||!n.pubsubBound){var r=this.address,o=process.hrtime(),s=new Date;e.callback=i.channel.bindToContext((function(t,a){var c=process.hrtime(o),l=1e3*c[0]+c[1]/1e6|0;i.channel.publish("redis",{duration:l,address:r,commandObj:e,err:t,result:a,time:s}),"function"==typeof n&&n.apply(this,arguments)})),e.callback.pubsubBound=!0}}return t.call(this,e)},e}},t.enable=function(){i.channel.registerMonkeyPatch("redis",t.redis)}},66661:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.tedious=void 0;var r=n(84953);t.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:function(e){var t=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){var e,n,o,s=arguments[0];arguments[0].callback=(e=s.callback,n=process.hrtime(),o={query:{},database:{host:null,port:null},result:null,error:null,duration:0},r.channel.bindToContext((function(t,s,a){var c=process.hrtime(n);o=i(i({},o),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!t&&{rowCount:s,rows:a},query:{text:this.parametersByName.statement.value},error:t,duration:Math.ceil(1e3*c[0]+c[1]/1e6)}),r.channel.publish("tedious",o),e.call(this,t,s,a)}))),t.apply(this,arguments)},e}},t.enable=function(){r.channel.registerMonkeyPatch("tedious",t.tedious)}},14650:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.winston2=t.winston3=void 0;var s=n(84953);t.winston3={versionSpecifier:"3.x",patch:function(e){var t=function(e){function t(t,n){var i=e.call(this,n)||this;return i.winston=t,i}return r(t,e),t.prototype.log=function(e,t){var n=e.message,i=e.level,r=e.meta,a=o(e,["message","level","meta"]);i="function"==typeof Symbol.for?e[Symbol.for("level")]:i,n=e instanceof Error?e:n;var c=function(e,t){return null!=e.config.npm.levels[t]?"npm":null!=e.config.syslog.levels[t]?"syslog":"unknown"}(this.winston,i);for(var l in r=r||{},a)a.hasOwnProperty(l)&&(r[l]=a[l]);s.channel.publish("winston",{message:n,level:i,levelKind:c,meta:r}),t()},t}(e.Transport);function n(){var n,i=e.config.npm.levels;for(var r in arguments&&arguments[0]&&arguments[0].levels&&(i=arguments[0].levels),i)i.hasOwnProperty(r)&&(n=void 0===n||i[r]>i[n]?r:n);this.add(new t(e,{level:n}))}var i=e.createLogger;e.createLogger=function(){var r,o=e.config.npm.levels;for(var s in arguments&&arguments[0]&&arguments[0].levels&&(o=arguments[0].levels),o)o.hasOwnProperty(s)&&(r=void 0===r||o[s]>o[r]?s:r);var a=i.apply(this,arguments);a.add(new t(e,{level:r}));var c=a.configure;return a.configure=function(){c.apply(this,arguments),n.apply(this,arguments)},a};var a=e.configure;return e.configure=function(){a.apply(this,arguments),n.apply(this,arguments)},e.add(new t(e)),e}},t.winston2={versionSpecifier:"2.x",patch:function(e){var t,n=e.Logger.prototype.log,i=function(n,i,r){var o;return o=t===e.config.npm.levels?"npm":t===e.config.syslog.levels?"syslog":"unknown",s.channel.publish("winston",{level:n,message:i,meta:r,levelKind:o}),i};return e.Logger.prototype.log=function(){return t=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==i&&(this.filters=this.filters.filter((function(e){return e!==i})),this.filters.push(i)):this.filters=[i],n.apply(this,arguments)},e}},t.enable=function(){s.channel.registerMonkeyPatch("winston",t.winston2),s.channel.registerMonkeyPatch("winston",t.winston3)}},54694:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=54694,e.exports=t},80420:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=80420,e.exports=t},84953:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.channel=t.ContextPreservingEventEmitter=t.trueFilter=t.makePatchingRequire=void 0;var i=n(37424),r=n(37424);Object.defineProperty(t,"makePatchingRequire",{enumerable:!0,get:function(){return r.makePatchingRequire}}),t.trueFilter=function(e){return!0};var o=function(){function e(){this.version=n(130).i8,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.modulesPatched=[],this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(e){var t=this.subscribers[e];return!!t&&t.some((function(e){var t=e.filter;return!t||t(!1)}))},e.prototype.publish=function(e,t){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var i={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,n.forEach((function(e){var t=e.listener,n=e.filter;try{n&&n(!0)&&t(i)}catch(e){}})),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(e,n,i,r){void 0===i&&(i=t.trueFilter),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:n,filter:i,patchCallback:r});var o=this.checkIfModuleIsAlreadyPatched(e);o&&r&&r(o.name,o.version)},e.prototype.unsubscribe=function(e,n,i){void 0===i&&(i=t.trueFilter);var r=this.subscribers[e];if(r)for(var o=0;o<r.length;++o)if(r[o].listener===n&&r[o].filter===i)return r.splice(o,1),!0;return!1},e.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(e){return e},Object.getOwnPropertyNames(this.knownPatches).forEach((function(t){return delete e.knownPatches[t]}))},e.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},e.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(t(n))}},e.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},e.prototype.getPatchesObject=function(){return this.knownPatches},e.prototype.addPatchedModule=function(e,t){for(var n=0,i=this.modulesPatched;n<i.length;n++)if(i[n].name===e)return;this.modulesPatched.push({name:e,version:t});var r=this.subscribers[e];r&&r.forEach((function(n){n.patchCallback&&n.patchCallback(e,t)}))},e.prototype.checkIfModuleIsAlreadyPatched=function(e){for(var t=0,n=this.modulesPatched;t<n.length;t++){var i=n[t];if(i.name===e)return i}return null},e}();t.ContextPreservingEventEmitter=o,global.diagnosticsSource||(global.diagnosticsSource=new o,n(98188).prototype.require=i.makePatchingRequire(global.diagnosticsSource.getPatchesObject())),t.channel=global.diagnosticsSource},37424:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePatchingRequire=void 0;var i=n(71017),r=n(36625),o=n(84953),s=n(98188),a=Object.keys(process.binding("natives")),c=s.prototype.require;t.makePatchingRequire=function(e){var t={};return function(n){var l=c.apply(this,arguments);if(e[n]){var d=s._resolveFilename(n,this);if(t.hasOwnProperty(d))return t[d];var u=void 0;if(a.indexOf(n)<0)try{u=c.call(this,i.join(n,"package.json")).version}catch(e){return l}else u=process.version.substring(1);var p=u.indexOf("-");p>=0&&(u=u.substring(0,p));for(var h=l,f=0,m=e[n];f<m.length;f++){var g=m[f];if(r.satisfies(u,g.versionSpecifier)&&(h=g.patch(h,d),o.channel)){var v=g.publisherName||n;o.channel.addPatchedModule(v,u)}}return t[d]=h}return l}}},69867:(e,t,n)=>{"use strict";var i=n(76372),r=i.wrap,o=i.unwrap,s="wrap@before";function a(e,t,n){var i=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:i,writable:!0,value:n})}function c(e,t){var n;return n=e._events&&e._events[t],Array.isArray(n)||(n=n?[n]:[]),n}function l(e,t){if(e){var n=e;if("function"==typeof e)n=t(e);else if(Array.isArray(e)){n=[];for(var i=0;i<e.length;i++)n[i]=t(e[i])}return n}}e.exports=function(e,t,n){if(!(e&&e.on&&e.addListener&&e.removeListener&&e.emit))throw new Error("can only wrap real EEs");if(!t)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function i(e){return function(t,n){var o=c(this,t).slice();try{var a=e.call(this,t,n);return function(e,t,n){var i=c(e,t).filter((function(e){return-1===n.indexOf(e)}));i.length>0&&function(e,t){for(var n=t.length,i=0;i<n;i++){var r=t[i],o=e[s];if("function"==typeof o)o(r);else if(Array.isArray(o))for(var a=o.length,c=0;c<a;c++)o[c](r)}}(e,i)}(this,t,o),a}finally{this.on.__wrapped||r(this,"on",i),this.addListener.__wrapped||r(this,"addListener",i)}}}e[s]?"function"==typeof e[s]?a(e,s,[e[s],t]):Array.isArray(e[s])&&e[s].push(t):a(e,s,t),e.__wrapped||(r(e,"addListener",i),r(e,"on",i),r(e,"emit",(function(e){return function(t){if(!this._events||!this._events[t])return e.apply(this,arguments);var i=this._events[t];r(this,"removeListener",(function(e){return function(){this._events[t]=i;try{return e.apply(this,arguments)}finally{i=this._events[t],this._events[t]=l(i,n)}}}));try{return this._events[t]=l(i,n),e.apply(this,arguments)}finally{o(this,"removeListener"),this._events[t]=i}}})),a(e,"__unwrap",(function(){o(e,"addListener"),o(e,"on"),o(e,"emit"),delete e[s],delete e.__wrapped})),a(e,"__wrapped",!0))}},35769:(e,t,n)=>{"use strict";var i=n(4914);function r(e){return(e||"").toString().trim().replace(/^latin[\-_]?(\d+)$/i,"ISO-8859-$1").replace(/^win(?:dows)?[\-_]?(\d+)$/i,"WINDOWS-$1").replace(/^utf[\-_]?(\d+)$/i,"UTF-$1").replace(/^ks_c_5601\-1987$/i,"CP949").replace(/^us[\-_]?ascii$/i,"ASCII").toUpperCase()}e.exports.O=function(e,t,n){var o;if(n=r(n||"UTF-8"),t=r(t||"UTF-8"),e=e||"","UTF-8"!==n&&"string"==typeof e&&(e=Buffer.from(e,"binary")),n===t)o="string"==typeof e?Buffer.from(e):e;else try{o=function(e,t,n){return"UTF-8"===t?i.decode(e,n):"UTF-8"===n?i.encode(e,t):i.encode(i.decode(e,n),t)}(e,t,n)}catch(t){console.error(t),o=e}return"string"==typeof o&&(o=Buffer.from(o,"utf-8")),o}},64063:e=>{"use strict";var t=Array.isArray,n=Object.keys,i=Object.prototype.hasOwnProperty;e.exports=function e(r,o){if(r===o)return!0;if(r&&o&&"object"==typeof r&&"object"==typeof o){var s,a,c,l=t(r),d=t(o);if(l&&d){if((a=r.length)!=o.length)return!1;for(s=a;0!=s--;)if(!e(r[s],o[s]))return!1;return!0}if(l!=d)return!1;var u=r instanceof Date,p=o instanceof Date;if(u!=p)return!1;if(u&&p)return r.getTime()==o.getTime();var h=r instanceof RegExp,f=o instanceof RegExp;if(h!=f)return!1;if(h&&f)return r.toString()==o.toString();var m=n(r);if((a=m.length)!==n(o).length)return!1;for(s=a;0!=s--;)if(!i.call(o,m[s]))return!1;for(s=a;0!=s--;)if(!e(r[c=m[s]],o[c]))return!1;return!0}return r!=r&&o!=o}},22261:(e,t,n)=>{var i;e.exports=function(){if(!i){try{i=n(15158)("follow-redirects")}catch(e){}"function"!=typeof i&&(i=function(){})}i.apply(null,arguments)}},30938:(e,t,n)=>{var i=n(57310),r=i.URL,o=n(13685),s=n(95687),a=n(12781).Writable,c=n(39491),l=n(22261),d=["abort","aborted","connect","error","socket","timeout"],u=Object.create(null);d.forEach((function(e){u[e]=function(t,n,i){this._redirectable.emit(e,t,n,i)}}));var p=S("ERR_INVALID_URL","Invalid URL",TypeError),h=S("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),f=S("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),m=S("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),g=S("ERR_STREAM_WRITE_AFTER_END","write after end");function v(e,t){a.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var n=this;this._onNativeResponse=function(e){n._processResponse(e)},this._performRequest()}function y(e){var t={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(e).forEach((function(o){var s=o+":",a=n[s]=e[o],d=t[o]=Object.create(a);Object.defineProperties(d,{request:{value:function(e,o,a){if(k(e)){var d;try{d=w(new r(e))}catch(t){d=i.parse(e)}if(!k(d.protocol))throw new p({input:e});e=d}else r&&e instanceof r?e=w(e):(a=o,o=e,e={protocol:s});return E(o)&&(a=o,o=null),(o=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,o)).nativeProtocols=n,k(o.host)||k(o.hostname)||(o.hostname="::1"),c.equal(o.protocol,s,"protocol mismatch"),l("options",o),new v(o,a)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,n){var i=d.request(e,t,n);return i.end(),i},configurable:!0,enumerable:!0,writable:!0}})})),t}function b(){}function w(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return""!==e.port&&(t.port=Number(e.port)),t}function _(e,t){var n;for(var i in t)e.test(i)&&(n=t[i],delete t[i]);return null==n?void 0:String(n).trim()}function S(e,t,n){function i(n){Error.captureStackTrace(this,this.constructor),Object.assign(this,n||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return i.prototype=new(n||Error),i.prototype.constructor=i,i.prototype.name="Error ["+e+"]",i}function C(e){for(var t of d)e.removeListener(t,u[t]);e.on("error",b),e.abort()}function k(e){return"string"==typeof e||e instanceof String}function E(e){return"function"==typeof e}v.prototype=Object.create(a.prototype),v.prototype.abort=function(){C(this._currentRequest),this.emit("abort")},v.prototype.write=function(e,t,n){if(this._ending)throw new g;if(!(k(e)||"object"==typeof(i=e)&&"length"in i))throw new TypeError("data should be a string, Buffer or Uint8Array");var i;E(t)&&(n=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,n)):(this.emit("error",new m),this.abort()):n&&n()},v.prototype.end=function(e,t,n){if(E(e)?(n=e,e=t=null):E(t)&&(n=t,t=null),e){var i=this,r=this._currentRequest;this.write(e,t,(function(){i._ended=!0,r.end(null,null,n)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,n)},v.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},v.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},v.prototype.setTimeout=function(e,t){var n=this;function i(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function r(t){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout((function(){n.emit("timeout"),o()}),e),i(t)}function o(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",o),n.removeListener("error",o),n.removeListener("response",o),t&&n.removeListener("timeout",t),n.socket||n._currentRequest.removeListener("socket",r)}return t&&this.on("timeout",t),this.socket?r(this.socket):this._currentRequest.once("socket",r),this.on("socket",i),this.on("abort",o),this.on("error",o),this.on("response",o),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){v.prototype[e]=function(t,n){return this._currentRequest[e](t,n)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(v.prototype,e,{get:function(){return this._currentRequest[e]}})})),v.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},v.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(t){if(this._options.agents){var n=e.slice(0,-1);this._options.agent=this._options.agents[n]}var r=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var o of(r._redirectable=this,d))r.on(o,u[o]);if(this._currentUrl=/^\//.test(this._options.path)?i.format(this._options):this._options.path,this._isRedirect){var s=0,a=this,c=this._requestBodyBuffers;!function e(t){if(r===a._currentRequest)if(t)a.emit("error",t);else if(s<c.length){var n=c[s++];r.finished||r.write(n.data,n.encoding,e)}else a._ended&&r.end()}()}}else this.emit("error",new TypeError("Unsupported protocol "+e))},v.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var n=e.headers.location;if(!n||!1===this._options.followRedirects||t<300||t>=400)return e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),void(this._requestBodyBuffers=[]);if(C(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)this.emit("error",new f);else{var r,o=this._options.beforeRedirect;o&&(r=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var s=this._options.method;((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],_(/^content-/i,this._options.headers));var a,d=_(/^host$/i,this._options.headers),u=i.parse(this._currentUrl),p=d||u.host,m=/^\w+:/.test(n)?this._currentUrl:i.format(Object.assign(u,{host:p}));try{a=i.resolve(m,n)}catch(e){return void this.emit("error",new h({cause:e}))}l("redirecting to",a),this._isRedirect=!0;var g=i.parse(a);if(Object.assign(this._options,g),(g.protocol!==u.protocol&&"https:"!==g.protocol||g.host!==p&&!function(e,t){c(k(e)&&k(t));var n=e.length-t.length-1;return n>0&&"."===e[n]&&e.endsWith(t)}(g.host,p))&&_(/^(?:authorization|cookie)$/i,this._options.headers),E(o)){var v={headers:e.headers,statusCode:t},y={url:m,method:s,headers:r};try{o(this._options,v,y)}catch(e){return void this.emit("error",e)}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(e){this.emit("error",new h({cause:e}))}}},e.exports=y({http:o,https:s}),e.exports.wrap=y},18972:(e,t,n)=>{e.exports=n(73837).format},62308:(e,t,n)=>{"use strict";const i=n(20077),r=n(47065)(65536);e.exports=function(e,t,n){const o=n.overwrite,s=n.errorOnExist,a=n.preserveTimestamps;if(i.existsSync(t)){if(!o){if(s)throw new Error(`${t} already exists`);return}i.unlinkSync(t)}const c=i.openSync(e,"r"),l=i.fstatSync(c),d=i.openSync(t,"w",l.mode);let u=1,p=0;for(;u>0;)u=i.readSync(c,r,0,65536,p),i.writeSync(d,r,0,u),p+=u;a&&i.futimesSync(d,l.atime,l.mtime),i.closeSync(c),i.closeSync(d)}},55302:(e,t,n)=>{"use strict";const i=n(20077),r=n(71017),o=n(62308),s=n(11381);e.exports=function e(t,n,a){("function"==typeof a||a instanceof RegExp)&&(a={filter:a}),(a=a||{}).recursive=!!a.recursive,a.clobber=!("clobber"in a)||!!a.clobber,a.overwrite="overwrite"in a?!!a.overwrite:a.clobber,a.dereference="dereference"in a&&!!a.dereference,a.preserveTimestamps="preserveTimestamps"in a&&!!a.preserveTimestamps,a.filter=a.filter||function(){return!0},a.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const c=a.recursive&&!a.dereference?i.lstatSync(t):i.statSync(t),l=r.dirname(n),d=i.existsSync(l);let u=!1;if(a.filter instanceof RegExp?(console.warn("Warning: fs-extra: Passing a RegExp filter is deprecated, use a function"),u=a.filter.test(t)):"function"==typeof a.filter&&(u=a.filter(t,n)),c.isFile()&&u)d||s.mkdirsSync(l),o(t,n,{overwrite:a.overwrite,errorOnExist:a.errorOnExist,preserveTimestamps:a.preserveTimestamps});else if(c.isDirectory()&&u)i.existsSync(n)||s.mkdirsSync(n),i.readdirSync(t).forEach((i=>{const o=a;o.recursive=!0,e(r.join(t,i),r.join(n,i),o)}));else if(a.recursive&&c.isSymbolicLink()&&u){const e=i.readlinkSync(t);i.symlinkSync(e,n)}}},68690:(e,t,n)=>{e.exports={copySync:n(55302)}},67189:(e,t,n)=>{"use strict";const i=n(20077),r=n(71017),o=n(84117),s=n(11381),a=n(99257).pathExists;e.exports=function(e,t,n,c){"function"!=typeof n||c?("function"==typeof n||n instanceof RegExp)&&(n={filter:n}):(c=n,n={}),c=c||function(){},(n=n||{}).preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const l=process.cwd();if(r.resolve(l,e)===r.resolve(l,t))return c(new Error("Source and destination must not be the same."));i.lstat(e,((i,l)=>{if(i)return c(i);let d=null;if(l.isDirectory()){const e=t.split(r.sep);e.pop(),d=e.join(r.sep)}else d=r.dirname(t);a(d,((i,r)=>i?c(i):r?o(e,t,n,c):void s.mkdirs(d,(i=>{if(i)return c(i);o(e,t,n,c)}))))}))}},66464:(e,t,n)=>{const i=n(38981).E;e.exports={copy:i(n(67189))}},84117:(e,t,n)=>{var i=n(20077),r=n(71017),o=n(80318);e.exports=function(e,t,n,s){s||(s=n,n={});var a=process.cwd(),c=r.resolve(a,e),l=r.resolve(a,t),d=n.filter,u=n.transform,p=n.overwrite;void 0===p&&(p=n.clobber),void 0===p&&(p=!0);var h=n.errorOnExist,f=n.dereference,m=!0===n.preserveTimestamps,g=0,v=0,y=0,b=!1;function w(e){if(g++,d)if(d instanceof RegExp){if(console.warn("Warning: fs-extra: Passing a RegExp filter is deprecated, use a function"),!d.test(e))return T(!0)}else if("function"==typeof d&&!d(e,t))return T(!0);return function(e){var t=f?i.stat:i.lstat;y++,t(e,(function(t,n){if(t)return x(t);var o,s,d={name:e,mode:n.mode,mtime:n.mtime,atime:n.atime,stats:n};if(!n.isDirectory())return n.isFile()||n.isCharacterDevice()||n.isBlockDevice()?function(e){var t=e.name.replace(c,l.replace("$","$$$$"));E(t,(function(n){n?_(e,t):p?S(t,(function(){_(e,t)})):h?x(new Error(t+" already exists")):T()}))}(d):n.isSymbolicLink()?function(e){var t=e.replace(c,l);i.readlink(e,(function(e,n){if(e)return x(e);!function(e,t){f&&(e=r.resolve(a,e)),E(t,(function(n){if(n)return k(e,t);i.readlink(t,(function(n,i){return n?x(n):(f&&(i=r.resolve(a,i)),i===e?T():S(t,(function(){k(e,t)})))}))}))}(n,t)}))}(e):void 0;E(s=(o=d).name.replace(c,l.replace("$","$$$$")),(function(e){if(e)return function(e,t){i.mkdir(t,e.mode,(function(n){if(n)return x(n);i.chmod(t,e.mode,(function(t){if(t)return x(t);C(e.name)}))}))}(o,s);C(o.name)}))}))}(e)}function _(e,t){var n=i.createReadStream(e.name),r=i.createWriteStream(t,{mode:e.mode});n.on("error",x),r.on("error",x),u?u(n,r,e):r.on("open",(function(){n.pipe(r)})),r.once("close",(function(){i.chmod(t,e.mode,(function(n){if(n)return x(n);m?o.utimesMillis(t,e.atime,e.mtime,(function(e){return e?x(e):T()})):T()}))}))}function S(e,t){i.unlink(e,(function(e){return e?x(e):t()}))}function C(e){i.readdir(e,(function(t,n){return t?x(t):(n.forEach((function(t){w(r.join(e,t))})),T())}))}function k(e,t){i.symlink(e,t,(function(e){return e?x(e):T()}))}function E(e,t){i.lstat(e,(function(e){return e&&"ENOENT"===e.code?t(!0):t(!1)}))}function x(e){if(!b&&void 0!==s)return b=!0,s(e)}function T(e){if(e||y--,v++,g===v&&0===y&&void 0!==s)return s(null)}w(c)}},15590:(e,t,n)=>{"use strict";const i=n(38981).E,r=n(57147),o=n(71017),s=n(11381),a=n(54542),c=i((function(e,t){t=t||function(){},r.readdir(e,((n,i)=>{if(n)return s.mkdirs(e,t);i=i.map((t=>o.join(e,t))),function e(){const n=i.pop();if(!n)return t();a.remove(n,(n=>{if(n)return t(n);e()}))}()}))}));function l(e){let t;try{t=r.readdirSync(e)}catch(t){return s.mkdirsSync(e)}t.forEach((t=>{t=o.join(e,t),a.removeSync(t)}))}e.exports={emptyDirSync:l,emptydirSync:l,emptyDir:c,emptydir:c}},36530:(e,t,n)=>{"use strict";const i=n(38981).E,r=n(71017),o=n(20077),s=n(11381),a=n(99257).pathExists;e.exports={createFile:i((function(e,t){function n(){o.writeFile(e,"",(e=>{if(e)return t(e);t()}))}o.stat(e,((i,o)=>{if(!i&&o.isFile())return t();const c=r.dirname(e);a(c,((e,i)=>e?t(e):i?n():void s.mkdirs(c,(e=>{if(e)return t(e);n()}))))}))})),createFileSync:function(e){let t;try{t=o.statSync(e)}catch(e){}if(t&&t.isFile())return;const n=r.dirname(e);o.existsSync(n)||s.mkdirsSync(n),o.writeFileSync(e,"")}}},21720:(e,t,n)=>{"use strict";const i=n(36530),r=n(54147),o=n(83635);e.exports={createFile:i.createFile,createFileSync:i.createFileSync,ensureFile:i.createFile,ensureFileSync:i.createFileSync,createLink:r.createLink,createLinkSync:r.createLinkSync,ensureLink:r.createLink,ensureLinkSync:r.createLinkSync,createSymlink:o.createSymlink,createSymlinkSync:o.createSymlinkSync,ensureSymlink:o.createSymlink,ensureSymlinkSync:o.createSymlinkSync}},54147:(e,t,n)=>{"use strict";const i=n(38981).E,r=n(71017),o=n(20077),s=n(11381),a=n(99257).pathExists;e.exports={createLink:i((function(e,t,n){function i(e,t){o.link(e,t,(e=>{if(e)return n(e);n(null)}))}a(t,((c,l)=>c?n(c):l?n(null):void o.lstat(e,((o,c)=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),n(o);const l=r.dirname(t);a(l,((r,o)=>r?n(r):o?i(e,t):void s.mkdirs(l,(r=>{if(r)return n(r);i(e,t)}))))}))))})),createLinkSync:function(e,t,n){if(o.existsSync(t))return;try{o.lstatSync(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const i=r.dirname(t);return o.existsSync(i)||s.mkdirsSync(i),o.linkSync(e,t)}}},6072:(e,t,n)=>{"use strict";const i=n(71017),r=n(20077),o=n(99257).pathExists;e.exports={symlinkPaths:function(e,t,n){if(i.isAbsolute(e))return r.lstat(e,((t,i)=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:e})));{const s=i.dirname(t),a=i.join(s,e);return o(a,((t,o)=>t?n(t):o?n(null,{toCwd:a,toDst:e}):r.lstat(e,((t,r)=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:i.relative(s,e)})))))}},symlinkPathsSync:function(e,t){let n;if(i.isAbsolute(e)){if(n=r.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const o=i.dirname(t),s=i.join(o,e);if(n=r.existsSync(s),n)return{toCwd:s,toDst:e};if(n=r.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:i.relative(o,e)}}}}},89259:(e,t,n)=>{"use strict";const i=n(20077);e.exports={symlinkType:function(e,t,n){if(n="function"==typeof t?t:n,t="function"!=typeof t&&t)return n(null,t);i.lstat(e,((e,i)=>{if(e)return n(null,"file");t=i&&i.isDirectory()?"dir":"file",n(null,t)}))},symlinkTypeSync:function(e,t){let n;if(t)return t;try{n=i.lstatSync(e)}catch(e){return"file"}return n&&n.isDirectory()?"dir":"file"}}},83635:(e,t,n)=>{"use strict";const i=n(38981).E,r=n(71017),o=n(20077),s=n(11381),a=s.mkdirs,c=s.mkdirsSync,l=n(6072),d=l.symlinkPaths,u=l.symlinkPathsSync,p=n(89259),h=p.symlinkType,f=p.symlinkTypeSync,m=n(99257).pathExists;e.exports={createSymlink:i((function(e,t,n,i){i="function"==typeof n?n:i,n="function"!=typeof n&&n,m(t,((s,c)=>s?i(s):c?i(null):void d(e,t,((s,c)=>{if(s)return i(s);e=c.toDst,h(c.toCwd,n,((n,s)=>{if(n)return i(n);const c=r.dirname(t);m(c,((n,r)=>n?i(n):r?o.symlink(e,t,s,i):void a(c,(n=>{if(n)return i(n);o.symlink(e,t,s,i)}))))}))}))))})),createSymlinkSync:function(e,t,n,i){if(i="function"==typeof n?n:i,n="function"!=typeof n&&n,o.existsSync(t))return;const s=u(e,t);e=s.toDst,n=f(s.toCwd,n);const a=r.dirname(t);return o.existsSync(a)||c(a),o.symlinkSync(e,t,n)}}},67749:(e,t,n)=>{const i=n(38981).E,r=n(20077),o=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((e=>"function"==typeof r[e]));Object.keys(r).forEach((e=>{t[e]=r[e]})),o.forEach((e=>{t[e]=i(r[e])})),t.exists=function(e,t){return"function"==typeof t?r.exists(e,t):new Promise((t=>r.exists(e,t)))},t.read=function(e,t,n,i,o,s){return"function"==typeof s?r.read(e,t,n,i,o,s):new Promise(((s,a)=>{r.read(e,t,n,i,o,((e,t,n)=>{if(e)return a(e);s({bytesRead:t,buffer:n})}))}))},t.write=function(e,t,n,i,o,s){return"function"==typeof arguments[arguments.length-1]?r.write(e,t,n,i,o,s):new Promise("string"==typeof t?(o,s)=>{r.write(e,t,n,i,((e,t,n)=>{if(e)return s(e);o({bytesWritten:t,buffer:n})}))}:(s,a)=>{r.write(e,t,n,i,o,((e,t,n)=>{if(e)return a(e);s({bytesWritten:t,buffer:n})}))})}},55674:(e,t,n)=>{"use strict";const i=n(43678),r={};i(r,n(67749)),i(r,n(66464)),i(r,n(68690)),i(r,n(11381)),i(r,n(54542)),i(r,n(46573)),i(r,n(80530)),i(r,n(34026)),i(r,n(15590)),i(r,n(21720)),i(r,n(21315)),i(r,n(99257)),e.exports=r},46573:(e,t,n)=>{"use strict";const i=n(38981).E,r=n(7183);r.outputJson=i(n(43508)),r.outputJsonSync=n(39578),r.outputJSON=r.outputJson,r.outputJSONSync=r.outputJsonSync,r.writeJSON=r.writeJson,r.writeJSONSync=r.writeJsonSync,r.readJSON=r.readJson,r.readJSONSync=r.readJsonSync,e.exports=r},7183:(e,t,n)=>{"use strict";const i=n(38981).E,r=n(96813);e.exports={readJson:i(r.readFile),readJsonSync:r.readFileSync,writeJson:i(r.writeFile),writeJsonSync:r.writeFileSync}},39578:(e,t,n)=>{"use strict";const i=n(20077),r=n(71017),o=n(11381),s=n(7183);e.exports=function(e,t,n){const a=r.dirname(e);i.existsSync(a)||o.mkdirsSync(a),s.writeJsonSync(e,t,n)}},43508:(e,t,n)=>{"use strict";const i=n(71017),r=n(11381),o=n(99257).pathExists,s=n(7183);e.exports=function(e,t,n,a){"function"==typeof n&&(a=n,n={});const c=i.dirname(e);o(c,((i,o)=>i?a(i):o?s.writeJson(e,t,n,a):void r.mkdirs(c,(i=>{if(i)return a(i);s.writeJson(e,t,n,a)}))))}},11381:(e,t,n)=>{"use strict";const i=(0,n(38981).E)(n(34887)),r=n(61452);e.exports={mkdirs:i,mkdirsSync:r,mkdirp:i,mkdirpSync:r,ensureDir:i,ensureDirSync:r}},61452:(e,t,n)=>{"use strict";const i=n(20077),r=n(71017),o=n(62660).invalidWin32Path,s=parseInt("0777",8);e.exports=function e(t,n,a){n&&"object"==typeof n||(n={mode:n});let c=n.mode;const l=n.fs||i;if("win32"===process.platform&&o(t)){const e=new Error(t+" contains invalid WIN32 path characters.");throw e.code="EINVAL",e}void 0===c&&(c=s&~process.umask()),a||(a=null),t=r.resolve(t);try{l.mkdirSync(t,c),a=a||t}catch(i){if("ENOENT"===i.code){if(r.dirname(t)===t)throw i;a=e(r.dirname(t),n,a),e(t,n,a)}else{let e;try{e=l.statSync(t)}catch(e){throw i}if(!e.isDirectory())throw i}}return a}},34887:(e,t,n)=>{"use strict";const i=n(20077),r=n(71017),o=n(62660).invalidWin32Path,s=parseInt("0777",8);e.exports=function e(t,n,a,c){if("function"==typeof n?(a=n,n={}):n&&"object"==typeof n||(n={mode:n}),"win32"===process.platform&&o(t)){const e=new Error(t+" contains invalid WIN32 path characters.");return e.code="EINVAL",a(e)}let l=n.mode;const d=n.fs||i;void 0===l&&(l=s&~process.umask()),c||(c=null),a=a||function(){},t=r.resolve(t),d.mkdir(t,l,(i=>{if(!i)return a(null,c=c||t);if("ENOENT"===i.code){if(r.dirname(t)===t)return a(i);e(r.dirname(t),n,((i,r)=>{i?a(i,r):e(t,n,a,r)}))}else d.stat(t,((e,t)=>{e||!t.isDirectory()?a(i,c):a(null,c)}))}))}},62660:(e,t,n)=>{"use strict";const i=n(71017);function r(e){return(e=i.normalize(i.resolve(e)).split(i.sep)).length>0?e[0]:null}const o=/[<>:"|?*]/;e.exports={getRootPath:r,invalidWin32Path:function(e){const t=r(e);return e=e.replace(t,""),o.test(e)}}},34026:(e,t,n)=>{"use strict";const i=n(20077),r=n(71017),o=n(68690).copySync,s=n(54542).removeSync,a=n(11381).mkdirsSync,c=n(47065);function l(e,t,n){return i.statSync(e).isDirectory()?function(e,t,n){const i={overwrite:!1};function r(){return o(e,t,i),s(e)}n?(s(t),r()):r()}(e,t,n):function(e,t,n){const r=c(65536),o=n?"w":"wx",s=i.openSync(e,"r"),a=i.fstatSync(s),l=i.openSync(t,o,a.mode);let d=1,u=0;for(;d>0;)d=i.readSync(s,r,0,65536,u),i.writeSync(l,r,0,d),u+=d;return i.closeSync(s),i.closeSync(l),i.unlinkSync(e)}(e,t,n)}e.exports={moveSync:function e(t,n,o){const c=(o=o||{}).overwrite||o.clobber||!1;if(t=r.resolve(t),n=r.resolve(n),t===n)return i.accessSync(t);if(function(e,t){try{return i.statSync(e).isDirectory()&&e!==t&&t.indexOf(e)>-1&&t.split(r.dirname(e)+r.sep)[1].split(r.sep)[0]===r.basename(e)}catch(e){return!1}}(t,n))throw new Error(`Cannot move '${t}' into itself '${n}'.`);a(r.dirname(n)),function(){if(c)try{return i.renameSync(t,n)}catch(i){if("ENOTEMPTY"===i.code||"EEXIST"===i.code||"EPERM"===i.code)return s(n),o.overwrite=!1,e(t,n,o);if("EXDEV"!==i.code)throw i;return l(t,n,c)}else try{return i.linkSync(t,n),i.unlinkSync(t)}catch(e){if("EXDEV"===e.code||"EISDIR"===e.code||"EPERM"===e.code||"ENOTSUP"===e.code)return l(t,n,c);throw e}}()}}},80530:(e,t,n)=>{"use strict";const i=n(38981).E,r=n(20077),o=n(84117),s=n(71017),a=n(54542).remove,c=n(11381).mkdirs;function l(e,t,n,i){r.stat(e,((o,s)=>{if(o)return i(o);s.isDirectory()?d(e,t,n,i):function(e,t,n,i){const o=n?"w":"wx",s=r.createReadStream(e),a=r.createWriteStream(t,{flags:o});function c(){r.unlink(e,i)}s.on("error",(o=>{s.destroy(),a.destroy(),a.removeListener("close",c),r.unlink(t,(()=>{"EISDIR"===o.code||"EPERM"===o.code?d(e,t,n,i):i(o)}))})),a.on("error",(e=>{s.destroy(),a.destroy(),a.removeListener("close",c),i(e)})),a.once("close",c),s.pipe(a)}(e,t,n,i)}))}function d(e,t,n,i){const r={overwrite:!1};function s(){o(e,t,r,(t=>{if(t)return i(t);a(e,i)}))}n?a(t,(e=>{if(e)return i(e);s()})):s()}e.exports={move:i((function e(t,n,i,o){"function"==typeof i&&(o=i,i={});const d=i.overwrite||i.clobber||!1;!function(e,t,n){r.stat(e,((i,r)=>{if(i)return n(i);if(r.isDirectory()){const i=t.split(s.dirname(e)+s.sep)[1];if(i){const r=i.split(s.sep)[0];return n(null,!!r&&(e!==t&&t.indexOf(e)>-1&&r===s.basename(e)))}return n(null,!1)}return n(null,!1)}))}(t,n,((u,p)=>u?o(u):p?o(new Error(`Cannot move '${t}' to a subdirectory of itself, '${n}'.`)):void c(s.dirname(n),(c=>{if(c)return o(c);s.resolve(t)===s.resolve(n)?r.access(t,o):d?r.rename(t,n,(r=>{if(!r)return o();if("ENOTEMPTY"!==r.code&&"EEXIST"!==r.code){if("EPERM"!==r.code)return"EXDEV"!==r.code?o(r):void l(t,n,d,o);setTimeout((()=>{a(n,(r=>{if(r)return o(r);i.overwrite=!1,e(t,n,i,o)}))}),200)}else a(n,(r=>{if(r)return o(r);i.overwrite=!1,e(t,n,i,o)}))})):r.link(t,n,(e=>e?"EXDEV"===e.code||"EISDIR"===e.code||"EPERM"===e.code||"ENOTSUP"===e.code?l(t,n,d,o):o(e):r.unlink(t,o)))}))))}))}},21315:(e,t,n)=>{"use strict";const i=n(38981).E,r=n(20077),o=n(71017),s=n(11381),a=n(99257).pathExists;e.exports={outputFile:i((function(e,t,n,i){"function"==typeof n&&(i=n,n="utf8");const c=o.dirname(e);a(c,((o,a)=>o?i(o):a?r.writeFile(e,t,n,i):void s.mkdirs(c,(o=>{if(o)return i(o);r.writeFile(e,t,n,i)}))))})),outputFileSync:function(e,t,n){const i=o.dirname(e);if(r.existsSync(i))return r.writeFileSync.apply(r,arguments);s.mkdirsSync(i),r.writeFileSync.apply(r,arguments)}}},99257:(e,t,n)=>{"use strict";const i=n(38981).p,r=n(67749);e.exports={pathExists:i((function(e){return r.access(e).then((()=>!0)).catch((()=>!1))})),pathExistsSync:r.existsSync}},54542:(e,t,n)=>{"use strict";const i=n(38981).E,r=n(48157);e.exports={remove:i(r),removeSync:r.sync}},48157:(e,t,n)=>{"use strict";const i=n(20077),r=n(71017),o=n(39491),s="win32"===process.platform;function a(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((t=>{e[t]=e[t]||i[t],e[t+="Sync"]=e[t]||i[t]})),e.maxBusyTries=e.maxBusyTries||3}function c(e,t,n){let i=0;"function"==typeof t&&(n=t,t={}),o(e,"rimraf: missing path"),o.equal(typeof e,"string","rimraf: path should be a string"),o.equal(typeof n,"function","rimraf: callback function required"),o(t,"rimraf: invalid options argument provided"),o.equal(typeof t,"object","rimraf: options should be object"),a(t),l(e,t,(function r(o){if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&i<t.maxBusyTries)return i++,setTimeout((()=>l(e,t,r)),100*i);"ENOENT"===o.code&&(o=null)}n(o)}))}function l(e,t,n){o(e),o(t),o("function"==typeof n),t.lstat(e,((i,r)=>i&&"ENOENT"===i.code?n(null):i&&"EPERM"===i.code&&s?d(e,t,i,n):r&&r.isDirectory()?p(e,t,i,n):void t.unlink(e,(i=>{if(i){if("ENOENT"===i.code)return n(null);if("EPERM"===i.code)return s?d(e,t,i,n):p(e,t,i,n);if("EISDIR"===i.code)return p(e,t,i,n)}return n(i)}))))}function d(e,t,n,i){o(e),o(t),o("function"==typeof i),n&&o(n instanceof Error),t.chmod(e,438,(r=>{r?i("ENOENT"===r.code?null:n):t.stat(e,((r,o)=>{r?i("ENOENT"===r.code?null:n):o.isDirectory()?p(e,t,n,i):t.unlink(e,i)}))}))}function u(e,t,n){let i;o(e),o(t),n&&o(n instanceof Error);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw n}try{i=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw n}i.isDirectory()?f(e,t,n):t.unlinkSync(e)}function p(e,t,n,i){o(e),o(t),n&&o(n instanceof Error),o("function"==typeof i),t.rmdir(e,(s=>{!s||"ENOTEMPTY"!==s.code&&"EEXIST"!==s.code&&"EPERM"!==s.code?s&&"ENOTDIR"===s.code?i(n):i(s):function(e,t,n){o(e),o(t),o("function"==typeof n),t.readdir(e,((i,o)=>{if(i)return n(i);let s,a=o.length;if(0===a)return t.rmdir(e,n);o.forEach((i=>{c(r.join(e,i),t,(i=>{if(!s)return i?n(s=i):void(0==--a&&t.rmdir(e,n))}))}))}))}(e,t,i)}))}function h(e,t){let n;a(t=t||{}),o(e,"rimraf: missing path"),o.equal(typeof e,"string","rimraf: path should be a string"),o(t,"rimraf: missing options"),o.equal(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&s&&u(e,t,n)}try{n&&n.isDirectory()?f(e,t,null):t.unlinkSync(e)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return s?u(e,t,n):f(e,t,n);if("EISDIR"!==n.code)throw n;f(e,t,n)}}function f(e,t,n){o(e),o(t),n&&o(n instanceof Error);try{t.rmdirSync(e)}catch(i){if("ENOTDIR"===i.code)throw n;if("ENOTEMPTY"===i.code||"EEXIST"===i.code||"EPERM"===i.code)!function(e,t){o(e),o(t),t.readdirSync(e).forEach((n=>h(r.join(e,n),t)));const n=s?100:1;let i=0;for(;;){let r=!0;try{const n=t.rmdirSync(e,t);return r=!1,n}finally{if(++i<n&&r)continue}}}(e,t);else if("ENOENT"!==i.code)throw i}}e.exports=c,c.sync=h},43678:e=>{"use strict";e.exports=function(){const e=[].slice.call(arguments).filter((e=>e)),t=e.shift();return e.forEach((e=>{Object.keys(e).forEach((n=>{t[n]=e[n]}))})),t}},47065:e=>{e.exports=function(e){if("function"==typeof Buffer.allocUnsafe)try{return Buffer.allocUnsafe(e)}catch(t){return new Buffer(e)}return new Buffer(e)}},80318:(e,t,n)=>{"use strict";const i=n(20077),r=n(22037),o=n(71017);e.exports={hasMillisRes:function(e){let t=o.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=o.join(r.tmpdir(),t);const n=new Date(1435410243862);i.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",(r=>{if(r)return e(r);i.open(t,"r+",((r,o)=>{if(r)return e(r);i.futimes(o,n,n,(n=>{if(n)return e(n);i.close(o,(n=>{if(n)return e(n);i.stat(t,((t,n)=>{if(t)return e(t);e(null,n.mtime>1435410243e3)}))}))}))}))}))},hasMillisResSync:function(){let e=o.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=o.join(r.tmpdir(),e);const t=new Date(1435410243862);i.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");const n=i.openSync(e,"r+");return i.futimesSync(n,t,t),i.closeSync(n),i.statSync(e).mtime>1435410243e3},timeRemoveMillis:function(e){if("number"==typeof e)return 1e3*Math.floor(e/1e3);if(e instanceof Date)return new Date(1e3*Math.floor(e.getTime()/1e3));throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")},utimesMillis:function(e,t,n,r){i.open(e,"r+",((e,o)=>{if(e)return r(e);i.futimes(o,t,n,(e=>{i.close(o,(t=>{r&&r(e||t)}))}))}))}}},37334:(e,t,n)=>{e.exports=d,d.realpath=d,d.sync=u,d.realpathSync=u,d.monkeypatch=function(){i.realpath=d,i.realpathSync=u},d.unmonkeypatch=function(){i.realpath=r,i.realpathSync=o};var i=n(57147),r=i.realpath,o=i.realpathSync,s=process.version,a=/^v[0-5]\./.test(s),c=n(47059);function l(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function d(e,t,n){if(a)return r(e,t,n);"function"==typeof t&&(n=t,t=null),r(e,t,(function(i,r){l(i)?c.realpath(e,t,n):n(i,r)}))}function u(e,t){if(a)return o(e,t);try{return o(e,t)}catch(n){if(l(n))return c.realpathSync(e,t);throw n}}},47059:(e,t,n)=>{var i=n(71017),r="win32"===process.platform,o=n(57147),s=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);if(i.normalize,r)var a=/(.*?)(?:[\/\\]+|$)/g;else a=/(.*?)(?:[\/]+|$)/g;if(r)var c=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else c=/^[\/]*/;t.realpathSync=function(e,t){if(e=i.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var n,s,l,d,u=e,p={},h={};function f(){var t=c.exec(e);n=t[0].length,s=t[0],l=t[0],d="",r&&!h[l]&&(o.lstatSync(l),h[l]=!0)}for(f();n<e.length;){a.lastIndex=n;var m=a.exec(e);if(d=s,s+=m[0],l=d+m[1],n=a.lastIndex,!(h[l]||t&&t[l]===l)){var g;if(t&&Object.prototype.hasOwnProperty.call(t,l))g=t[l];else{var v=o.lstatSync(l);if(!v.isSymbolicLink()){h[l]=!0,t&&(t[l]=l);continue}var y=null;if(!r){var b=v.dev.toString(32)+":"+v.ino.toString(32);p.hasOwnProperty(b)&&(y=p[b])}null===y&&(o.statSync(l),y=o.readlinkSync(l)),g=i.resolve(d,y),t&&(t[l]=g),r||(p[b]=y)}e=i.resolve(g,e.slice(n)),f()}}return t&&(t[u]=e),e},t.realpath=function(e,t,n){if("function"!=typeof n&&(n=function(e){return"function"==typeof e?e:function(){var e;if(s){var t=new Error;e=function(e){e&&(t.message=e.message,n(e=t))}}else e=n;return e;function n(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}(t),t=null),e=i.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(n.bind(null,null,t[e]));var l,d,u,p,h=e,f={},m={};function g(){var t=c.exec(e);l=t[0].length,d=t[0],u=t[0],p="",r&&!m[u]?o.lstat(u,(function(e){if(e)return n(e);m[u]=!0,v()})):process.nextTick(v)}function v(){if(l>=e.length)return t&&(t[h]=e),n(null,e);a.lastIndex=l;var i=a.exec(e);return p=d,d+=i[0],u=p+i[1],l=a.lastIndex,m[u]||t&&t[u]===u?process.nextTick(v):t&&Object.prototype.hasOwnProperty.call(t,u)?w(t[u]):o.lstat(u,y)}function y(e,i){if(e)return n(e);if(!i.isSymbolicLink())return m[u]=!0,t&&(t[u]=u),process.nextTick(v);if(!r){var s=i.dev.toString(32)+":"+i.ino.toString(32);if(f.hasOwnProperty(s))return b(null,f[s],u)}o.stat(u,(function(e){if(e)return n(e);o.readlink(u,(function(e,t){r||(f[s]=t),b(e,t)}))}))}function b(e,r,o){if(e)return n(e);var s=i.resolve(p,r);t&&(t[o]=s),w(s)}function w(t){e=i.resolve(t,e.slice(l)),g()}g()}},66772:(e,t,n)=>{function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.setopts=function(e,t,n){if(n||(n={}),n.matchBase&&-1===t.indexOf("/")){if(n.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!n.silent,e.pattern=t,e.strict=!1!==n.strict,e.realpath=!!n.realpath,e.realpathCache=n.realpathCache||Object.create(null),e.follow=!!n.follow,e.dot=!!n.dot,e.mark=!!n.mark,e.nodir=!!n.nodir,e.nodir&&(e.mark=!0),e.sync=!!n.sync,e.nounique=!!n.nounique,e.nonull=!!n.nonull,e.nosort=!!n.nosort,e.nocase=!!n.nocase,e.stat=!!n.stat,e.noprocess=!!n.noprocess,e.absolute=!!n.absolute,e.fs=n.fs||r,e.maxLength=n.maxLength||1/0,e.cache=n.cache||Object.create(null),e.statCache=n.statCache||Object.create(null),e.symlinks=n.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(d))}(e,n),e.changedCwd=!1;var s=process.cwd();i(n,"cwd")?(e.cwd=o.resolve(n.cwd),e.changedCwd=e.cwd!==s):e.cwd=s,e.root=n.root||o.resolve(e.cwd,"/"),e.root=o.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=a(e.cwd)?e.cwd:u(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,e.minimatch=new c(t,n),e.options=e.minimatch.options},t.ownProp=i,t.makeAbs=u,t.finish=function(e){for(var t=e.nounique,n=t?[]:Object.create(null),i=0,r=e.matches.length;i<r;i++){var o=e.matches[i];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);t?n.push.apply(n,s):s.forEach((function(e){n[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[i];t?n.push(a):n[a]=!0}}if(t||(n=Object.keys(n)),e.nosort||(n=n.sort(l)),e.mark){for(i=0;i<n.length;i++)n[i]=e._mark(n[i]);e.nodir&&(n=n.filter((function(t){var n=!/\/$/.test(t),i=e.cache[t]||e.cache[u(e,t)];return n&&i&&(n="DIR"!==i&&!Array.isArray(i)),n})))}e.ignore.length&&(n=n.filter((function(t){return!p(e,t)}))),e.found=n},t.mark=function(e,t){var n=u(e,t),i=e.cache[n],r=t;if(i){var o="DIR"===i||Array.isArray(i),s="/"===t.slice(-1);if(o&&!s?r+="/":!o&&s&&(r=r.slice(0,-1)),r!==t){var a=u(e,r);e.statCache[a]=e.statCache[n],e.cache[a]=e.cache[n]}}return r},t.isIgnored=p,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var r=n(57147),o=n(71017),s=n(91171),a=n(64095),c=s.Minimatch;function l(e,t){return e.localeCompare(t,"en")}function d(e){var t=null;if("/**"===e.slice(-3)){var n=e.replace(/(\/\*\*)+$/,"");t=new c(n,{dot:!0})}return{matcher:new c(e,{dot:!0}),gmatcher:t}}function u(e,t){var n=t;return n="/"===t.charAt(0)?o.join(e.root,t):a(t)||""===t?t:e.changedCwd?o.resolve(e.cwd,t):o.resolve(t),"win32"===process.platform&&(n=n.replace(/\\/g,"/")),n}function p(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}},12884:(e,t,n)=>{e.exports=y;var i=n(37334),r=n(91171),o=(r.Minimatch,n(94378)),s=n(82361).EventEmitter,a=n(71017),c=n(39491),l=n(64095),d=n(14751),u=n(66772),p=u.setopts,h=u.ownProp,f=n(67844),m=(n(73837),u.childrenIgnored),g=u.isIgnored,v=n(30778);function y(e,t,n){if("function"==typeof t&&(n=t,t={}),t||(t={}),t.sync){if(n)throw new TypeError("callback provided to sync glob");return d(e,t)}return new w(e,t,n)}y.sync=d;var b=y.GlobSync=d.GlobSync;function w(e,t,n){if("function"==typeof t&&(n=t,t=null),t&&t.sync){if(n)throw new TypeError("callback provided to sync glob");return new b(e,t)}if(!(this instanceof w))return new w(e,t,n);p(this,e,t),this._didRealPath=!1;var i=this.minimatch.set.length;this.matches=new Array(i),"function"==typeof n&&(n=v(n),this.on("error",n),this.on("end",(function(e){n(null,e)})));var r=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===i)return a();for(var o=!0,s=0;s<i;s++)this._process(this.minimatch.set[s],s,!1,a);function a(){--r._processing,r._processing<=0&&(o?process.nextTick((function(){r._finish()})):r._finish())}o=!1}y.glob=y,y.hasMagic=function(e,t){var n=function(e,t){if(null===t||"object"!=typeof t)return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}({},t);n.noprocess=!0;var i=new w(e,n).minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var r=0;r<i[0].length;r++)if("string"!=typeof i[0][r])return!0;return!1},y.Glob=w,o(w,s),w.prototype._finish=function(){if(c(this instanceof w),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();u.finish(this),this.emit("end",this.found)}},w.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,n=0;n<this.matches.length;n++)this._realpathSet(n,i)}function i(){0==--e&&t._finish()}},w.prototype._realpathSet=function(e,t){var n=this.matches[e];if(!n)return t();var r=Object.keys(n),o=this,s=r.length;if(0===s)return t();var a=this.matches[e]=Object.create(null);r.forEach((function(n,r){n=o._makeAbs(n),i.realpath(n,o.realpathCache,(function(i,r){i?"stat"===i.syscall?a[n]=!0:o.emit("error",i):a[r]=!0,0==--s&&(o.matches[e]=a,t())}))}))},w.prototype._mark=function(e){return u.mark(this,e)},w.prototype._makeAbs=function(e){return u.makeAbs(this,e)},w.prototype.abort=function(){this.aborted=!0,this.emit("abort")},w.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},w.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var n=e[t];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var i=this._processQueue.slice(0);for(this._processQueue.length=0,t=0;t<i.length;t++){var r=i[t];this._processing--,this._process(r[0],r[1],r[2],r[3])}}}},w.prototype._process=function(e,t,n,i){if(c(this instanceof w),c("function"==typeof i),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,n,i]);else{for(var o,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t,i);case 0:o=null;break;default:o=e.slice(0,s).join("/")}var a,d=e.slice(s);null===o?a=".":l(o)||l(e.join("/"))?(o&&l(o)||(o="/"+o),a=o):a=o;var u=this._makeAbs(a);if(m(this,a))return i();d[0]===r.GLOBSTAR?this._processGlobStar(o,a,u,d,t,n,i):this._processReaddir(o,a,u,d,t,n,i)}},w.prototype._processReaddir=function(e,t,n,i,r,o,s){var a=this;this._readdir(n,o,(function(c,l){return a._processReaddir2(e,t,n,i,r,o,l,s)}))},w.prototype._processReaddir2=function(e,t,n,i,r,o,s,c){if(!s)return c();for(var l=i[0],d=!!this.minimatch.negate,u=l._glob,p=this.dot||"."===u.charAt(0),h=[],f=0;f<s.length;f++)("."!==(g=s[f]).charAt(0)||p)&&(d&&!e?!g.match(l):g.match(l))&&h.push(g);var m=h.length;if(0===m)return c();if(1===i.length&&!this.mark&&!this.stat){for(this.matches[r]||(this.matches[r]=Object.create(null)),f=0;f<m;f++){var g=h[f];e&&(g="/"!==e?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=a.join(this.root,g)),this._emitMatch(r,g)}return c()}for(i.shift(),f=0;f<m;f++)g=h[f],e&&(g="/"!==e?e+"/"+g:e+g),this._process([g].concat(i),r,o,c);c()},w.prototype._emitMatch=function(e,t){if(!this.aborted&&!g(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var n=l(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var i=this.cache[n];if("DIR"===i||Array.isArray(i))return}this.matches[e][t]=!0;var r=this.statCache[n];r&&this.emit("stat",t,r),this.emit("match",t)}}},w.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var n=this,i=f("lstat\0"+e,(function(i,r){if(i&&"ENOENT"===i.code)return t();var o=r&&r.isSymbolicLink();n.symlinks[e]=o,o||!r||r.isDirectory()?n._readdir(e,!1,t):(n.cache[e]="FILE",t())}));i&&n.fs.lstat(e,i)}},w.prototype._readdir=function(e,t,n){if(!this.aborted&&(n=f("readdir\0"+e+"\0"+t,n))){if(t&&!h(this.symlinks,e))return this._readdirInGlobStar(e,n);if(h(this.cache,e)){var i=this.cache[e];if(!i||"FILE"===i)return n();if(Array.isArray(i))return n(null,i)}this.fs.readdir(e,function(e,t,n){return function(i,r){i?e._readdirError(t,i,n):e._readdirEntries(t,r,n)}}(this,e,n))}},w.prototype._readdirEntries=function(e,t,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var i=0;i<t.length;i++){var r=t[i];r="/"===e?e+r:e+"/"+r,this.cache[r]=!0}return this.cache[e]=t,n(null,t)}},w.prototype._readdirError=function(e,t,n){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var i=this._makeAbs(e);if(this.cache[i]="FILE",i===this.cwdAbs){var r=new Error(t.code+" invalid cwd "+this.cwd);r.path=this.cwd,r.code=t.code,this.emit("error",r),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return n()}},w.prototype._processGlobStar=function(e,t,n,i,r,o,s){var a=this;this._readdir(n,o,(function(c,l){a._processGlobStar2(e,t,n,i,r,o,l,s)}))},w.prototype._processGlobStar2=function(e,t,n,i,r,o,s,a){if(!s)return a();var c=i.slice(1),l=e?[e]:[],d=l.concat(c);this._process(d,r,!1,a);var u=this.symlinks[n],p=s.length;if(u&&o)return a();for(var h=0;h<p;h++)if("."!==s[h].charAt(0)||this.dot){var f=l.concat(s[h],c);this._process(f,r,!0,a);var m=l.concat(s[h],i);this._process(m,r,!0,a)}a()},w.prototype._processSimple=function(e,t,n){var i=this;this._stat(e,(function(r,o){i._processSimple2(e,t,r,o,n)}))},w.prototype._processSimple2=function(e,t,n,i,r){if(this.matches[t]||(this.matches[t]=Object.create(null)),!i)return r();if(e&&l(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=a.join(this.root,e):(e=a.resolve(this.root,e),o&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),r()},w.prototype._stat=function(e,t){var n=this._makeAbs(e),i="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&h(this.cache,n)){var r=this.cache[n];if(Array.isArray(r)&&(r="DIR"),!i||"DIR"===r)return t(null,r);if(i&&"FILE"===r)return t()}var o=this.statCache[n];if(void 0!==o){if(!1===o)return t(null,o);var s=o.isDirectory()?"DIR":"FILE";return i&&"FILE"===s?t():t(null,s,o)}var a=this,c=f("stat\0"+n,(function(i,r){if(r&&r.isSymbolicLink())return a.fs.stat(n,(function(i,o){i?a._stat2(e,n,null,r,t):a._stat2(e,n,i,o,t)}));a._stat2(e,n,i,r,t)}));c&&a.fs.lstat(n,c)},w.prototype._stat2=function(e,t,n,i,r){if(n&&("ENOENT"===n.code||"ENOTDIR"===n.code))return this.statCache[t]=!1,r();var o="/"===e.slice(-1);if(this.statCache[t]=i,"/"===t.slice(-1)&&i&&!i.isDirectory())return r(null,!1,i);var s=!0;return i&&(s=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,o&&"FILE"===s?r():r(null,s,i)}},14751:(e,t,n)=>{e.exports=h,h.GlobSync=f;var i=n(37334),r=n(91171),o=(r.Minimatch,n(12884).Glob,n(73837),n(71017)),s=n(39491),a=n(64095),c=n(66772),l=c.setopts,d=c.ownProp,u=c.childrenIgnored,p=c.isIgnored;function h(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new f(e,t).found}function f(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof f))return new f(e,t);if(l(this,e,t),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var i=0;i<n;i++)this._process(this.minimatch.set[i],i,!1);this._finish()}f.prototype._finish=function(){if(s(this instanceof f),this.realpath){var e=this;this.matches.forEach((function(t,n){var r=e.matches[n]=Object.create(null);for(var o in t)try{o=e._makeAbs(o),r[i.realpathSync(o,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;r[e._makeAbs(o)]=!0}}))}c.finish(this)},f.prototype._process=function(e,t,n){s(this instanceof f);for(var i,o=0;"string"==typeof e[o];)o++;switch(o){case e.length:return void this._processSimple(e.join("/"),t);case 0:i=null;break;default:i=e.slice(0,o).join("/")}var c,l=e.slice(o);null===i?c=".":a(i)||a(e.join("/"))?(i&&a(i)||(i="/"+i),c=i):c=i;var d=this._makeAbs(c);u(this,c)||(l[0]===r.GLOBSTAR?this._processGlobStar(i,c,d,l,t,n):this._processReaddir(i,c,d,l,t,n))},f.prototype._processReaddir=function(e,t,n,i,r,s){var a=this._readdir(n,s);if(a){for(var c=i[0],l=!!this.minimatch.negate,d=c._glob,u=this.dot||"."===d.charAt(0),p=[],h=0;h<a.length;h++)("."!==(g=a[h]).charAt(0)||u)&&(l&&!e?!g.match(c):g.match(c))&&p.push(g);var f=p.length;if(0!==f)if(1!==i.length||this.mark||this.stat)for(i.shift(),h=0;h<f;h++){var m;g=p[h],m=e?[e,g]:[g],this._process(m.concat(i),r,s)}else{this.matches[r]||(this.matches[r]=Object.create(null));for(h=0;h<f;h++){var g=p[h];e&&(g="/"!==e.slice(-1)?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=o.join(this.root,g)),this._emitMatch(r,g)}}}},f.prototype._emitMatch=function(e,t){if(!p(this,t)){var n=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var i=this.cache[n];if("DIR"===i||Array.isArray(i))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},f.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,n;try{n=this.fs.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var i=n&&n.isSymbolicLink();return this.symlinks[e]=i,i||!n||n.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},f.prototype._readdir=function(e,t){if(t&&!d(this.symlinks,e))return this._readdirInGlobStar(e);if(d(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},f.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,t},f.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);throw i.path=this.cwd,i.code=t.code,i}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},f.prototype._processGlobStar=function(e,t,n,i,r,o){var s=this._readdir(n,o);if(s){var a=i.slice(1),c=e?[e]:[],l=c.concat(a);this._process(l,r,!1);var d=s.length;if(!this.symlinks[n]||!o)for(var u=0;u<d;u++)if("."!==s[u].charAt(0)||this.dot){var p=c.concat(s[u],a);this._process(p,r,!0);var h=c.concat(s[u],i);this._process(h,r,!0)}}},f.prototype._processSimple=function(e,t){var n=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),n){if(e&&a(e)&&!this.nomount){var i=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=o.join(this.root,e):(e=o.resolve(this.root,e),i&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},f.prototype._stat=function(e){var t=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&d(this.cache,t)){var i=this.cache[t];if(Array.isArray(i)&&(i="DIR"),!n||"DIR"===i)return i;if(n&&"FILE"===i)return!1}var r=this.statCache[t];if(!r){var o;try{o=this.fs.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(o&&o.isSymbolicLink())try{r=this.fs.statSync(t)}catch(e){r=o}else r=o}return this.statCache[t]=r,i=!0,r&&(i=r.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||i,(!n||"FILE"!==i)&&i},f.prototype._mark=function(e){return c.mark(this,e)},f.prototype._makeAbs=function(e){return c.makeAbs(this,e)}},66458:e=>{"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var n={__proto__:t(e)};else n=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})),n};var t=Object.getPrototypeOf||function(e){return e.__proto__}},20077:(e,t,n)=>{var i,r,o=n(57147),s=n(72161),a=n(78520),c=n(66458),l=n(73837);function d(e,t){Object.defineProperty(e,i,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(i=Symbol.for("graceful-fs.queue"),r=Symbol.for("graceful-fs.previous")):(i="___graceful-fs.queue",r="___graceful-fs.previous");var u,p=function(){};if(l.debuglog?p=l.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(p=function(){var e=l.format.apply(l,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!o[i]){var h=global[i]||[];d(o,h),o.close=function(e){function t(t,n){return e.call(o,t,(function(e){e||g(),"function"==typeof n&&n.apply(this,arguments)}))}return Object.defineProperty(t,r,{value:e}),t}(o.close),o.closeSync=function(e){function t(t){e.apply(o,arguments),g()}return Object.defineProperty(t,r,{value:e}),t}(o.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){p(o[i]),n(39491).equal(o[i].length,0)}))}function f(e){s(e),e.gracefulify=f,e.createReadStream=function(t,n){return new e.ReadStream(t,n)},e.createWriteStream=function(t,n){return new e.WriteStream(t,n)};var t=e.readFile;e.readFile=function(e,n,i){return"function"==typeof n&&(i=n,n=null),function e(n,i,r,o){return t(n,i,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?"function"==typeof r&&r.apply(this,arguments):m([e,[n,i,r],t,o||Date.now(),Date.now()])}))}(e,n,i)};var n=e.writeFile;e.writeFile=function(e,t,i,r){return"function"==typeof i&&(r=i,i=null),function e(t,i,r,o,s){return n(t,i,r,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof o&&o.apply(this,arguments):m([e,[t,i,r,o],n,s||Date.now(),Date.now()])}))}(e,t,i,r)};var i=e.appendFile;i&&(e.appendFile=function(e,t,n,r){return"function"==typeof n&&(r=n,n=null),function e(t,n,r,o,s){return i(t,n,r,(function(i){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?"function"==typeof o&&o.apply(this,arguments):m([e,[t,n,r,o],i,s||Date.now(),Date.now()])}))}(e,t,n,r)});var r=e.copyFile;r&&(e.copyFile=function(e,t,n,i){return"function"==typeof n&&(i=n,n=0),function e(t,n,i,o,s){return r(t,n,i,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof o&&o.apply(this,arguments):m([e,[t,n,i,o],r,s||Date.now(),Date.now()])}))}(e,t,n,i)});var o=e.readdir;e.readdir=function(e,t,n){"function"==typeof t&&(n=t,t=null);var i=c.test(process.version)?function(e,t,n,i){return o(e,r(e,t,n,i))}:function(e,t,n,i){return o(e,t,r(e,t,n,i))};return i(e,t,n);function r(e,t,n,r){return function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?(s&&s.sort&&s.sort(),"function"==typeof n&&n.call(this,o,s)):m([i,[e,t,n],o,r||Date.now(),Date.now()])}}};var c=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var l=a(e);g=l.ReadStream,v=l.WriteStream}var d=e.ReadStream;d&&(g.prototype=Object.create(d.prototype),g.prototype.open=function(){var e=this;b(e.path,e.flags,e.mode,(function(t,n){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n),e.read())}))});var u=e.WriteStream;u&&(v.prototype=Object.create(u.prototype),v.prototype.open=function(){var e=this;b(e.path,e.flags,e.mode,(function(t,n){t?(e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return g},set:function(e){g=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return v},set:function(e){v=e},enumerable:!0,configurable:!0});var p=g;Object.defineProperty(e,"FileReadStream",{get:function(){return p},set:function(e){p=e},enumerable:!0,configurable:!0});var h=v;function g(e,t){return this instanceof g?(d.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}function v(e,t){return this instanceof v?(u.apply(this,arguments),this):v.apply(Object.create(v.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return h},set:function(e){h=e},enumerable:!0,configurable:!0});var y=e.open;function b(e,t,n,i){return"function"==typeof n&&(i=n,n=null),function e(t,n,i,r,o){return y(t,n,i,(function(s,a){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?"function"==typeof r&&r.apply(this,arguments):m([e,[t,n,i,r],s,o||Date.now(),Date.now()])}))}(e,t,n,i)}return e.open=b,e}function m(e){p("ENQUEUE",e[0].name,e[1]),o[i].push(e),v()}function g(){for(var e=Date.now(),t=0;t<o[i].length;++t)o[i][t].length>2&&(o[i][t][3]=e,o[i][t][4]=e);v()}function v(){if(clearTimeout(u),u=void 0,0!==o[i].length){var e=o[i].shift(),t=e[0],n=e[1],r=e[2],s=e[3],a=e[4];if(void 0===s)p("RETRY",t.name,n),t.apply(null,n);else if(Date.now()-s>=6e4){p("TIMEOUT",t.name,n);var c=n.pop();"function"==typeof c&&c.call(null,r)}else{var l=Date.now()-a,d=Math.max(a-s,1);l>=Math.min(1.2*d,100)?(p("RETRY",t.name,n),t.apply(null,n.concat([s]))):o[i].push(e)}void 0===u&&(u=setTimeout(v,0))}}global[i]||d(global,o[i]),e.exports=f(c(o)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!o.__patched&&(e.exports=f(o),o.__patched=!0)},78520:(e,t,n)=>{var i=n(12781).Stream;e.exports=function(e){return{ReadStream:function t(n,r){if(!(this instanceof t))return new t(n,r);i.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,r=r||{};for(var s=Object.keys(r),a=0,c=s.length;a<c;a++){var l=s[a];this[l]=r[l]}if(this.encoding&&this.setEncoding(this.encoding),void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}null===this.fd?e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return o.emit("error",e),void(o.readable=!1);o.fd=t,o.emit("open",t),o._read()})):process.nextTick((function(){o._read()}))},WriteStream:function t(n,r){if(!(this instanceof t))return new t(n,r);i.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,r=r||{};for(var o=Object.keys(r),s=0,a=o.length;s<a;s++){var c=o[s];this[c]=r[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},72161:(e,t,n)=>{var i=n(22057),r=process.cwd,o=null,s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return o||(o=r.call(process)),o};try{process.cwd()}catch(e){}if("function"==typeof process.chdir){var a=process.chdir;process.chdir=function(e){o=null,a.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,a)}e.exports=function(e){function t(t){return t?function(n,i,r){return t.call(e,n,i,(function(e){l(e)&&(e=null),r&&r.apply(this,arguments)}))}:t}function n(t){return t?function(n,i){try{return t.call(e,n,i)}catch(e){if(!l(e))throw e}}:t}function r(t){return t?function(n,i,r,o){return t.call(e,n,i,r,(function(e){l(e)&&(e=null),o&&o.apply(this,arguments)}))}:t}function o(t){return t?function(n,i,r){try{return t.call(e,n,i,r)}catch(e){if(!l(e))throw e}}:t}function a(t){return t?function(n,i,r){function o(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),r&&r.apply(this,arguments)}return"function"==typeof i&&(r=i,i=null),i?t.call(e,n,i,o):t.call(e,n,o)}:t}function c(t){return t?function(n,i){var r=i?t.call(e,n,i):t.call(e,n);return r&&(r.uid<0&&(r.uid+=4294967296),r.gid<0&&(r.gid+=4294967296)),r}:t}function l(e){return!e||"ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code)}var d;i.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,n,r){e.open(t,i.O_WRONLY|i.O_SYMLINK,n,(function(t,i){t?r&&r(t):e.fchmod(i,n,(function(t){e.close(i,(function(e){r&&r(t||e)}))}))}))},e.lchmodSync=function(t,n){var r,o=e.openSync(t,i.O_WRONLY|i.O_SYMLINK,n),s=!0;try{r=e.fchmodSync(o,n),s=!1}finally{if(s)try{e.closeSync(o)}catch(e){}else e.closeSync(o)}return r}}(e),e.lutimes||function(e){i.hasOwnProperty("O_SYMLINK")&&e.futimes?(e.lutimes=function(t,n,r,o){e.open(t,i.O_SYMLINK,(function(t,i){t?o&&o(t):e.futimes(i,n,r,(function(t){e.close(i,(function(e){o&&o(t||e)}))}))}))},e.lutimesSync=function(t,n,r){var o,s=e.openSync(t,i.O_SYMLINK),a=!0;try{o=e.futimesSync(s,n,r),a=!1}finally{if(a)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return o}):e.futimes&&(e.lutimes=function(e,t,n,i){i&&process.nextTick(i)},e.lutimesSync=function(){})}(e),e.chown=r(e.chown),e.fchown=r(e.fchown),e.lchown=r(e.lchown),e.chmod=t(e.chmod),e.fchmod=t(e.fchmod),e.lchmod=t(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=n(e.chmodSync),e.fchmodSync=n(e.fchmodSync),e.lchmodSync=n(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=c(e.statSync),e.fstatSync=c(e.fstatSync),e.lstatSync=c(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(e,t,n){n&&process.nextTick(n)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(e,t,n,i){i&&process.nextTick(i)},e.lchownSync=function(){}),"win32"===s&&(e.rename="function"!=typeof e.rename?e.rename:function(t){function n(n,i,r){var o=Date.now(),s=0;t(n,i,(function a(c){if(c&&("EACCES"===c.code||"EPERM"===c.code)&&Date.now()-o<6e4)return setTimeout((function(){e.stat(i,(function(e,o){e&&"ENOENT"===e.code?t(n,i,a):r(c)}))}),s),void(s<100&&(s+=10));r&&r(c)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(n,t),n}(e.rename)),e.read="function"!=typeof e.read?e.read:function(t){function n(n,i,r,o,s,a){var c;if(a&&"function"==typeof a){var l=0;c=function(d,u,p){if(d&&"EAGAIN"===d.code&&l<10)return l++,t.call(e,n,i,r,o,s,c);a.apply(this,arguments)}}return t.call(e,n,i,r,o,s,c)}return Object.setPrototypeOf&&Object.setPrototypeOf(n,t),n}(e.read),e.readSync="function"!=typeof e.readSync?e.readSync:(d=e.readSync,function(t,n,i,r,o){for(var s=0;;)try{return d.call(e,t,n,i,r,o)}catch(e){if("EAGAIN"===e.code&&s<10){s++;continue}throw e}})}},86560:e=>{"use strict";e.exports=(e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":1===e.length?"-":"--",i=t.indexOf(n+e),r=t.indexOf("--");return-1!==i&&(-1===r||i<r)}},39146:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(41808)),s=r(n(24404)),a=r(n(57310)),c=r(n(39491)),l=r(n(15158)),d=n(88054),u=r(n(59829)),p=l.default("https-proxy-agent:agent");class h extends d.Agent{constructor(e){let t;if(t="string"==typeof e?a.default.parse(e):e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");p("creating new HttpsProxyAgent instance: %o",t),super(t);const n=Object.assign({},t);var i;this.secureProxy=t.secureProxy||"string"==typeof(i=n.protocol)&&/^https:?$/i.test(i),n.host=n.hostname||n.host,"string"==typeof n.port&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,t){return i(this,void 0,void 0,(function*(){const{proxy:n,secureProxy:i}=this;let r;i?(p("Creating `tls.Socket`: %o",n),r=s.default.connect(n)):(p("Creating `net.Socket`: %o",n),r=o.default.connect(n));const a=Object.assign({},n.headers);let l=`CONNECT ${t.host}:${t.port} HTTP/1.1\r\n`;n.auth&&(a["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:d,port:h,secureEndpoint:m}=t;(function(e,t){return Boolean(!t&&80===e||t&&443===e)})(h,m)||(d+=`:${h}`),a.Host=d,a.Connection="close";for(const e of Object.keys(a))l+=`${e}: ${a[e]}\r\n`;const g=u.default(r);r.write(`${l}\r\n`);const{statusCode:v,buffered:y}=yield g;if(200===v){if(e.once("socket",f),t.secureEndpoint){p("Upgrading socket connection to TLS");const e=t.servername||t.host;return s.default.connect(Object.assign(Object.assign({},function(e,...t){const n={};let i;for(i in e)t.includes(i)||(n[i]=e[i]);return n}(t,"host","hostname","path","port")),{socket:r,servername:e}))}return r}r.destroy();const b=new o.default.Socket({writable:!1});return b.readable=!0,e.once("socket",(e=>{p("replaying proxy buffer for failed request"),c.default(e.listenerCount("data")>0),e.push(y),e.push(null)})),b}))}}function f(e){e.resume()}t.default=h},26018:function(e,t,n){"use strict";const i=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(39146));function r(e){return new i.default(e)}!function(e){e.HttpsProxyAgent=i.default,e.prototype=i.default.prototype}(r||(r={})),e.exports=r},59829:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(15158)).default("https-proxy-agent:parse-proxy-response");t.default=function(e){return new Promise(((t,n)=>{let i=0;const o=[];function s(){const n=e.read();n?function(e){o.push(e),i+=e.length;const n=Buffer.concat(o,i);if(-1===n.indexOf("\r\n\r\n"))return r("have not received end of HTTP headers yet..."),void s();const a=n.toString("ascii",0,n.indexOf("\r\n")),c=+a.split(" ")[1];r("got proxy server response: %o",a),t({statusCode:c,buffered:n})}(n):e.once("readable",s)}function a(e){r("onclose had error %o",e)}function c(){r("onend")}e.on("error",(function t(i){e.removeListener("end",c),e.removeListener("error",t),e.removeListener("close",a),e.removeListener("readable",s),r("onerror %o",i),n(i)})),e.on("close",a),e.on("end",c),s()}))}},60688:(e,t,n)=>{"use strict";var i=n(2399).Buffer;t._dbcs=d;for(var r=-1,o=-2,s=-10,a=-1e3,c=new Array(256),l=0;l<256;l++)c[l]=r;function d(e,t){if(this.encodingName=e.encodingName,!e)throw new Error("DBCS codec is called without the data.");if(!e.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var n=e.table();this.decodeTables=[],this.decodeTables[0]=c.slice(0),this.decodeTableSeq=[];for(var i=0;i<n.length;i++)this._addDecodeChunk(n[i]);if("function"==typeof e.gb18030){this.gb18030=e.gb18030();var s=this.decodeTables.length;this.decodeTables.push(c.slice(0));var l=this.decodeTables.length;this.decodeTables.push(c.slice(0));var d=this.decodeTables[0];for(i=129;i<=254;i++)for(var u=this.decodeTables[a-d[i]],p=48;p<=57;p++){if(u[p]===r)u[p]=a-s;else if(u[p]>a)throw new Error("gb18030 decode tables conflict at byte 2");for(var h=this.decodeTables[a-u[p]],f=129;f<=254;f++){if(h[f]===r)h[f]=a-l;else{if(h[f]===a-l)continue;if(h[f]>a)throw new Error("gb18030 decode tables conflict at byte 3")}for(var m=this.decodeTables[a-h[f]],g=48;g<=57;g++)m[g]===r&&(m[g]=o)}}}this.defaultCharUnicode=t.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var v={};if(e.encodeSkipVals)for(i=0;i<e.encodeSkipVals.length;i++){var y=e.encodeSkipVals[i];if("number"==typeof y)v[y]=!0;else for(p=y.from;p<=y.to;p++)v[p]=!0}if(this._fillEncodeTable(0,0,v),e.encodeAdd)for(var b in e.encodeAdd)Object.prototype.hasOwnProperty.call(e.encodeAdd,b)&&this._setEncodeChar(b.charCodeAt(0),e.encodeAdd[b]);this.defCharSB=this.encodeTable[0][t.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===r&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===r&&(this.defCharSB="?".charCodeAt(0))}function u(e,t){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=t.encodeTable,this.encodeTableSeq=t.encodeTableSeq,this.defaultCharSingleByte=t.defCharSB,this.gb18030=t.gb18030}function p(e,t){this.nodeIdx=0,this.prevBytes=[],this.decodeTables=t.decodeTables,this.decodeTableSeq=t.decodeTableSeq,this.defaultCharUnicode=t.defaultCharUnicode,this.gb18030=t.gb18030}function h(e,t){if(e[0]>t)return-1;for(var n=0,i=e.length;n<i-1;){var r=n+(i-n+1>>1);e[r]<=t?n=r:i=r}return n}d.prototype.encoder=u,d.prototype.decoder=p,d.prototype._getDecodeTrieNode=function(e){for(var t=[];e>0;e>>>=8)t.push(255&e);0==t.length&&t.push(0);for(var n=this.decodeTables[0],i=t.length-1;i>0;i--){var o=n[t[i]];if(o==r)n[t[i]]=a-this.decodeTables.length,this.decodeTables.push(n=c.slice(0));else{if(!(o<=a))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+e.toString(16));n=this.decodeTables[a-o]}}return n},d.prototype._addDecodeChunk=function(e){var t=parseInt(e[0],16),n=this._getDecodeTrieNode(t);t&=255;for(var i=1;i<e.length;i++){var r=e[i];if("string"==typeof r)for(var o=0;o<r.length;){var a=r.charCodeAt(o++);if(55296<=a&&a<56320){var c=r.charCodeAt(o++);if(!(56320<=c&&c<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+e[0]);n[t++]=65536+1024*(a-55296)+(c-56320)}else if(4080<a&&a<=4095){for(var l=4095-a+2,d=[],u=0;u<l;u++)d.push(r.charCodeAt(o++));n[t++]=s-this.decodeTableSeq.length,this.decodeTableSeq.push(d)}else n[t++]=a}else{if("number"!=typeof r)throw new Error("Incorrect type '"+typeof r+"' given in "+this.encodingName+" at chunk "+e[0]);var p=n[t-1]+1;for(o=0;o<r;o++)n[t++]=p++}}if(t>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+e[0]+": too long"+t)},d.prototype._getEncodeBucket=function(e){var t=e>>8;return void 0===this.encodeTable[t]&&(this.encodeTable[t]=c.slice(0)),this.encodeTable[t]},d.prototype._setEncodeChar=function(e,t){var n=this._getEncodeBucket(e),i=255&e;n[i]<=s?this.encodeTableSeq[s-n[i]][-1]=t:n[i]==r&&(n[i]=t)},d.prototype._setEncodeSequence=function(e,t){var n,i=e[0],o=this._getEncodeBucket(i),a=255&i;o[a]<=s?n=this.encodeTableSeq[s-o[a]]:(n={},o[a]!==r&&(n[-1]=o[a]),o[a]=s-this.encodeTableSeq.length,this.encodeTableSeq.push(n));for(var c=1;c<e.length-1;c++){var l=n[i];"object"==typeof l?n=l:(n=n[i]={},void 0!==l&&(n[-1]=l))}n[i=e[e.length-1]]=t},d.prototype._fillEncodeTable=function(e,t,n){for(var i=this.decodeTables[e],r=!1,o={},c=0;c<256;c++){var l=i[c],d=t+c;if(!n[d])if(l>=0)this._setEncodeChar(l,d),r=!0;else if(l<=a){var u=a-l;if(!o[u]){var p=d<<8>>>0;this._fillEncodeTable(u,p,n)?r=!0:o[u]=!0}}else l<=s&&(this._setEncodeSequence(this.decodeTableSeq[s-l],d),r=!0)}return r},u.prototype.write=function(e){for(var t=i.alloc(e.length*(this.gb18030?4:3)),n=this.leadSurrogate,o=this.seqObj,a=-1,c=0,l=0;;){if(-1===a){if(c==e.length)break;var d=e.charCodeAt(c++)}else d=a,a=-1;if(55296<=d&&d<57344)if(d<56320){if(-1===n){n=d;continue}n=d,d=r}else-1!==n?(d=65536+1024*(n-55296)+(d-56320),n=-1):d=r;else-1!==n&&(a=d,d=r,n=-1);var u=r;if(void 0!==o&&d!=r){var p=o[d];if("object"==typeof p){o=p;continue}"number"==typeof p?u=p:null==p&&void 0!==(p=o[-1])&&(u=p,a=d),o=void 0}else if(d>=0){var f=this.encodeTable[d>>8];if(void 0!==f&&(u=f[255&d]),u<=s){o=this.encodeTableSeq[s-u];continue}if(u==r&&this.gb18030){var m=h(this.gb18030.uChars,d);if(-1!=m){u=this.gb18030.gbChars[m]+(d-this.gb18030.uChars[m]),t[l++]=129+Math.floor(u/12600),u%=12600,t[l++]=48+Math.floor(u/1260),u%=1260,t[l++]=129+Math.floor(u/10),u%=10,t[l++]=48+u;continue}}}u===r&&(u=this.defaultCharSingleByte),u<256?t[l++]=u:u<65536?(t[l++]=u>>8,t[l++]=255&u):u<16777216?(t[l++]=u>>16,t[l++]=u>>8&255,t[l++]=255&u):(t[l++]=u>>>24,t[l++]=u>>>16&255,t[l++]=u>>>8&255,t[l++]=255&u)}return this.seqObj=o,this.leadSurrogate=n,t.slice(0,l)},u.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var e=i.alloc(10),t=0;if(this.seqObj){var n=this.seqObj[-1];void 0!==n&&(n<256?e[t++]=n:(e[t++]=n>>8,e[t++]=255&n)),this.seqObj=void 0}return-1!==this.leadSurrogate&&(e[t++]=this.defaultCharSingleByte,this.leadSurrogate=-1),e.slice(0,t)}},u.prototype.findIdx=h,p.prototype.write=function(e){for(var t=i.alloc(2*e.length),n=this.nodeIdx,c=this.prevBytes,l=this.prevBytes.length,d=-this.prevBytes.length,u=0,p=0;u<e.length;u++){var f,m=u>=0?e[u]:c[u+l];if((f=this.decodeTables[n][m])>=0);else if(f===r)f=this.defaultCharUnicode.charCodeAt(0),u=d;else if(f===o){if(u>=3)var g=12600*(e[u-3]-129)+1260*(e[u-2]-48)+10*(e[u-1]-129)+(m-48);else g=12600*(c[u-3+l]-129)+1260*((u-2>=0?e[u-2]:c[u-2+l])-48)+10*((u-1>=0?e[u-1]:c[u-1+l])-129)+(m-48);var v=h(this.gb18030.gbChars,g);f=this.gb18030.uChars[v]+g-this.gb18030.gbChars[v]}else{if(f<=a){n=a-f;continue}if(!(f<=s))throw new Error("iconv-lite internal error: invalid decoding table value "+f+" at "+n+"/"+m);for(var y=this.decodeTableSeq[s-f],b=0;b<y.length-1;b++)f=y[b],t[p++]=255&f,t[p++]=f>>8;f=y[y.length-1]}if(f>=65536){var w=55296|(f-=65536)>>10;t[p++]=255&w,t[p++]=w>>8,f=56320|1023&f}t[p++]=255&f,t[p++]=f>>8,n=0,d=u+1}return this.nodeIdx=n,this.prevBytes=d>=0?Array.prototype.slice.call(e,d):c.slice(d+l).concat(Array.prototype.slice.call(e)),t.slice(0,p).toString("ucs2")},p.prototype.end=function(){for(var e="";this.prevBytes.length>0;){e+=this.defaultCharUnicode;var t=this.prevBytes.slice(1);this.prevBytes=[],this.nodeIdx=0,t.length>0&&(e+=this.write(t))}return this.prevBytes=[],this.nodeIdx=0,e}},55990:(e,t,n)=>{"use strict";e.exports={shiftjis:{type:"_dbcs",table:function(){return n(27014)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return n(31532)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return n(13336)}},gbk:{type:"_dbcs",table:function(){return n(13336).concat(n(44346))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return n(13336).concat(n(44346))},gb18030:function(){return n(36258)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return n(77348)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return n(74284)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return n(74284).concat(n(63480))},encodeSkipVals:[36457,36463,36478,36523,36532,36557,36560,36695,36713,36718,36811,36862,36973,36986,37060,37084,37105,37311,37551,37552,37553,37554,37585,37959,38090,38361,38652,39285,39798,39800,39803,39878,39902,39916,39926,40002,40019,40034,40040,40043,40055,40124,40125,40144,40279,40282,40388,40431,40443,40617,40687,40701,40800,40907,41079,41180,41183,36812,37576,38468,38637,41636,41637,41639,41638,41676,41678]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},46934:(e,t,n)=>{"use strict";for(var i=[n(1025),n(17688),n(91279),n(20758),n(59068),n(20288),n(67018),n(60688),n(55990)],r=0;r<i.length;r++){var o=i[r];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}},1025:(e,t,n)=>{"use strict";var i=n(2399).Buffer;function r(e,t){this.enc=e.encodingName,this.bomAware=e.bomAware,"base64"===this.enc?this.encoder=c:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=l,""!==i.from("eda0bdedb2a9","hex").toString()&&(this.decoder=d,this.defaultCharUnicode=t.defaultCharUnicode))}e.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:r},r.prototype.encoder=a,r.prototype.decoder=s;var o=n(71576).StringDecoder;function s(e,t){this.decoder=new o(t.enc)}function a(e,t){this.enc=t.enc}function c(e,t){this.prevStr=""}function l(e,t){}function d(e,t){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=t.defaultCharUnicode}o.prototype.end||(o.prototype.end=function(){}),s.prototype.write=function(e){return i.isBuffer(e)||(e=i.from(e)),this.decoder.write(e)},s.prototype.end=function(){return this.decoder.end()},a.prototype.write=function(e){return i.from(e,this.enc)},a.prototype.end=function(){},c.prototype.write=function(e){var t=(e=this.prevStr+e).length-e.length%4;return this.prevStr=e.slice(t),e=e.slice(0,t),i.from(e,"base64")},c.prototype.end=function(){return i.from(this.prevStr,"base64")},l.prototype.write=function(e){for(var t=i.alloc(3*e.length),n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=192+(o>>>6),t[n++]=128+(63&o)):(t[n++]=224+(o>>>12),t[n++]=128+(o>>>6&63),t[n++]=128+(63&o))}return t.slice(0,n)},l.prototype.end=function(){},d.prototype.write=function(e){for(var t=this.acc,n=this.contBytes,i=this.accBytes,r="",o=0;o<e.length;o++){var s=e[o];128!=(192&s)?(n>0&&(r+=this.defaultCharUnicode,n=0),s<128?r+=String.fromCharCode(s):s<224?(t=31&s,n=1,i=1):s<240?(t=15&s,n=2,i=1):r+=this.defaultCharUnicode):n>0?(t=t<<6|63&s,i++,0==--n&&(r+=2===i&&t<128&&t>0||3===i&&t<2048?this.defaultCharUnicode:String.fromCharCode(t))):r+=this.defaultCharUnicode}return this.acc=t,this.contBytes=n,this.accBytes=i,r},d.prototype.end=function(){var e=0;return this.contBytes>0&&(e+=this.defaultCharUnicode),e}},59068:(e,t,n)=>{"use strict";var i=n(2399).Buffer;function r(e,t){if(!e)throw new Error("SBCS codec is called without the data.");if(!e.chars||128!==e.chars.length&&256!==e.chars.length)throw new Error("Encoding '"+e.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===e.chars.length){for(var n="",r=0;r<128;r++)n+=String.fromCharCode(r);e.chars=n+e.chars}this.decodeBuf=i.from(e.chars,"ucs2");var o=i.alloc(65536,t.defaultCharSingleByte.charCodeAt(0));for(r=0;r<e.chars.length;r++)o[e.chars.charCodeAt(r)]=r;this.encodeBuf=o}function o(e,t){this.encodeBuf=t.encodeBuf}function s(e,t){this.decodeBuf=t.decodeBuf}t._sbcs=r,r.prototype.encoder=o,r.prototype.decoder=s,o.prototype.write=function(e){for(var t=i.alloc(e.length),n=0;n<e.length;n++)t[n]=this.encodeBuf[e.charCodeAt(n)];return t},o.prototype.end=function(){},s.prototype.write=function(e){for(var t=this.decodeBuf,n=i.alloc(2*e.length),r=0,o=0,s=0;s<e.length;s++)r=2*e[s],n[o=2*s]=t[r],n[o+1]=t[r+1];return n.toString("ucs2")},s.prototype.end=function(){}},67018:e=>{"use strict";e.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},20288:e=>{"use strict";e.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},cp720:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},91279:(e,t,n)=>{"use strict";var i=n(2399).Buffer;function r(){}function o(){}function s(){this.overflowByte=-1}function a(e,t){this.iconv=t}function c(e,t){void 0===(e=e||{}).addBOM&&(e.addBOM=!0),this.encoder=t.iconv.getEncoder("utf-16le",e)}function l(e,t){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=e||{},this.iconv=t.iconv}function d(e,t){var n=[],i=0,r=0,o=0;e:for(var s=0;s<e.length;s++)for(var a=e[s],c=0;c<a.length;c++)if(n.push(a[c]),2===n.length){if(0===i){if(255===n[0]&&254===n[1])return"utf-16le";if(254===n[0]&&255===n[1])return"utf-16be"}if(0===n[0]&&0!==n[1]&&o++,0!==n[0]&&0===n[1]&&r++,n.length=0,++i>=100)break e}return o>r?"utf-16be":o<r?"utf-16le":t||"utf-16le"}t.utf16be=r,r.prototype.encoder=o,r.prototype.decoder=s,r.prototype.bomAware=!0,o.prototype.write=function(e){for(var t=i.from(e,"ucs2"),n=0;n<t.length;n+=2){var r=t[n];t[n]=t[n+1],t[n+1]=r}return t},o.prototype.end=function(){},s.prototype.write=function(e){if(0==e.length)return"";var t=i.alloc(e.length+1),n=0,r=0;for(-1!==this.overflowByte&&(t[0]=e[0],t[1]=this.overflowByte,n=1,r=2);n<e.length-1;n+=2,r+=2)t[r]=e[n+1],t[r+1]=e[n];return this.overflowByte=n==e.length-1?e[e.length-1]:-1,t.slice(0,r).toString("ucs2")},s.prototype.end=function(){this.overflowByte=-1},t.utf16=a,a.prototype.encoder=c,a.prototype.decoder=l,c.prototype.write=function(e){return this.encoder.write(e)},c.prototype.end=function(){return this.encoder.end()},l.prototype.write=function(e){if(!this.decoder){if(this.initialBufs.push(e),this.initialBufsLen+=e.length,this.initialBufsLen<16)return"";var t=d(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);for(var n="",i=0;i<this.initialBufs.length;i++)n+=this.decoder.write(this.initialBufs[i]);return this.initialBufs.length=this.initialBufsLen=0,n}return this.decoder.write(e)},l.prototype.end=function(){if(!this.decoder){var e=d(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(e,this.options);for(var t="",n=0;n<this.initialBufs.length;n++)t+=this.decoder.write(this.initialBufs[n]);var i=this.decoder.end();return i&&(t+=i),this.initialBufs.length=this.initialBufsLen=0,t}return this.decoder.end()}},17688:(e,t,n)=>{"use strict";var i=n(2399).Buffer;function r(e,t){this.iconv=t,this.bomAware=!0,this.isLE=e.isLE}function o(e,t){this.isLE=t.isLE,this.highSurrogate=0}function s(e,t){this.isLE=t.isLE,this.badChar=t.iconv.defaultCharUnicode.charCodeAt(0),this.overflow=[]}function a(e,t,n,i){if((n<0||n>1114111)&&(n=i),n>=65536){var r=55296|(n-=65536)>>10;e[t++]=255&r,e[t++]=r>>8,n=56320|1023&n}return e[t++]=255&n,e[t++]=n>>8,t}function c(e,t){this.iconv=t}function l(e,t){void 0===(e=e||{}).addBOM&&(e.addBOM=!0),this.encoder=t.iconv.getEncoder(e.defaultEncoding||"utf-32le",e)}function d(e,t){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=e||{},this.iconv=t.iconv}function u(e,t){var n=[],i=0,r=0,o=0,s=0,a=0;e:for(var c=0;c<e.length;c++)for(var l=e[c],d=0;d<l.length;d++)if(n.push(l[d]),4===n.length){if(0===i){if(255===n[0]&&254===n[1]&&0===n[2]&&0===n[3])return"utf-32le";if(0===n[0]&&0===n[1]&&254===n[2]&&255===n[3])return"utf-32be"}if((0!==n[0]||n[1]>16)&&o++,(0!==n[3]||n[2]>16)&&r++,0!==n[0]||0!==n[1]||0===n[2]&&0===n[3]||a++,0===n[0]&&0===n[1]||0!==n[2]||0!==n[3]||s++,n.length=0,++i>=100)break e}return a-o>s-r?"utf-32be":a-o<s-r?"utf-32le":t||"utf-32le"}t._utf32=r,t.utf32le={type:"_utf32",isLE:!0},t.utf32be={type:"_utf32",isLE:!1},t.ucs4le="utf32le",t.ucs4be="utf32be",r.prototype.encoder=o,r.prototype.decoder=s,o.prototype.write=function(e){for(var t=i.from(e,"ucs2"),n=i.alloc(2*t.length),r=this.isLE?n.writeUInt32LE:n.writeUInt32BE,o=0,s=0;s<t.length;s+=2){var a=t.readUInt16LE(s),c=55296<=a&&a<56320,l=56320<=a&&a<57344;if(this.highSurrogate){if(!c&&l){var d=65536+(this.highSurrogate-55296<<10|a-56320);r.call(n,d,o),o+=4,this.highSurrogate=0;continue}r.call(n,this.highSurrogate,o),o+=4}c?this.highSurrogate=a:(r.call(n,a,o),o+=4,this.highSurrogate=0)}return o<n.length&&(n=n.slice(0,o)),n},o.prototype.end=function(){if(this.highSurrogate){var e=i.alloc(4);return this.isLE?e.writeUInt32LE(this.highSurrogate,0):e.writeUInt32BE(this.highSurrogate,0),this.highSurrogate=0,e}},s.prototype.write=function(e){if(0===e.length)return"";var t=0,n=0,r=i.alloc(e.length+4),o=0,s=this.isLE,c=this.overflow,l=this.badChar;if(c.length>0){for(;t<e.length&&c.length<4;t++)c.push(e[t]);4===c.length&&(n=s?c[t]|c[t+1]<<8|c[t+2]<<16|c[t+3]<<24:c[t+3]|c[t+2]<<8|c[t+1]<<16|c[t]<<24,c.length=0,o=a(r,o,n,l))}for(;t<e.length-3;t+=4)o=a(r,o,n=s?e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24:e[t+3]|e[t+2]<<8|e[t+1]<<16|e[t]<<24,l);for(;t<e.length;t++)c.push(e[t]);return r.slice(0,o).toString("ucs2")},s.prototype.end=function(){this.overflow.length=0},t.utf32=c,t.ucs4="utf32",c.prototype.encoder=l,c.prototype.decoder=d,l.prototype.write=function(e){return this.encoder.write(e)},l.prototype.end=function(){return this.encoder.end()},d.prototype.write=function(e){if(!this.decoder){if(this.initialBufs.push(e),this.initialBufsLen+=e.length,this.initialBufsLen<32)return"";var t=u(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);for(var n="",i=0;i<this.initialBufs.length;i++)n+=this.decoder.write(this.initialBufs[i]);return this.initialBufs.length=this.initialBufsLen=0,n}return this.decoder.write(e)},d.prototype.end=function(){if(!this.decoder){var e=u(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(e,this.options);for(var t="",n=0;n<this.initialBufs.length;n++)t+=this.decoder.write(this.initialBufs[n]);var i=this.decoder.end();return i&&(t+=i),this.initialBufs.length=this.initialBufsLen=0,t}return this.decoder.end()}},20758:(e,t,n)=>{"use strict";var i=n(2399).Buffer;function r(e,t){this.iconv=t}t.utf7=r,t.unicode11utf7="utf7",r.prototype.encoder=s,r.prototype.decoder=a,r.prototype.bomAware=!0;var o=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function s(e,t){this.iconv=t.iconv}function a(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}s.prototype.write=function(e){return i.from(e.replace(o,function(e){return"+"+("+"===e?"":this.iconv.encode(e,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},s.prototype.end=function(){};for(var c=/[A-Za-z0-9\/+]/,l=[],d=0;d<256;d++)l[d]=c.test(String.fromCharCode(d));var u="+".charCodeAt(0),p="-".charCodeAt(0),h="&".charCodeAt(0);function f(e,t){this.iconv=t}function m(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=i.alloc(6),this.base64AccumIdx=0}function g(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}a.prototype.write=function(e){for(var t="",n=0,r=this.inBase64,o=this.base64Accum,s=0;s<e.length;s++)if(r){if(!l[e[s]]){if(s==n&&e[s]==p)t+="+";else{var a=o+this.iconv.decode(e.slice(n,s),"ascii");t+=this.iconv.decode(i.from(a,"base64"),"utf16-be")}e[s]!=p&&s--,n=s+1,r=!1,o=""}}else e[s]==u&&(t+=this.iconv.decode(e.slice(n,s),"ascii"),n=s+1,r=!0);if(r){var c=(a=o+this.iconv.decode(e.slice(n),"ascii")).length-a.length%8;o=a.slice(c),a=a.slice(0,c),t+=this.iconv.decode(i.from(a,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=r,this.base64Accum=o,t},a.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(i.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e},t.utf7imap=f,f.prototype.encoder=m,f.prototype.decoder=g,f.prototype.bomAware=!0,m.prototype.write=function(e){for(var t=this.inBase64,n=this.base64Accum,r=this.base64AccumIdx,o=i.alloc(5*e.length+10),s=0,a=0;a<e.length;a++){var c=e.charCodeAt(a);32<=c&&c<=126?(t&&(r>0&&(s+=o.write(n.slice(0,r).toString("base64").replace(/\//g,",").replace(/=+$/,""),s),r=0),o[s++]=p,t=!1),t||(o[s++]=c,c===h&&(o[s++]=p))):(t||(o[s++]=h,t=!0),t&&(n[r++]=c>>8,n[r++]=255&c,r==n.length&&(s+=o.write(n.toString("base64").replace(/\//g,","),s),r=0)))}return this.inBase64=t,this.base64AccumIdx=r,o.slice(0,s)},m.prototype.end=function(){var e=i.alloc(10),t=0;return this.inBase64&&(this.base64AccumIdx>0&&(t+=e.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),t),this.base64AccumIdx=0),e[t++]=p,this.inBase64=!1),e.slice(0,t)};var v=l.slice();v[",".charCodeAt(0)]=!0,g.prototype.write=function(e){for(var t="",n=0,r=this.inBase64,o=this.base64Accum,s=0;s<e.length;s++)if(r){if(!v[e[s]]){if(s==n&&e[s]==p)t+="&";else{var a=o+this.iconv.decode(e.slice(n,s),"ascii").replace(/,/g,"/");t+=this.iconv.decode(i.from(a,"base64"),"utf16-be")}e[s]!=p&&s--,n=s+1,r=!1,o=""}}else e[s]==h&&(t+=this.iconv.decode(e.slice(n,s),"ascii"),n=s+1,r=!0);if(r){var c=(a=o+this.iconv.decode(e.slice(n),"ascii").replace(/,/g,"/")).length-a.length%8;o=a.slice(c),a=a.slice(0,c),t+=this.iconv.decode(i.from(a,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=r,this.base64Accum=o,t},g.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(i.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e}},65395:(e,t)=>{"use strict";function n(e,t){this.encoder=e,this.addBOM=!0}function i(e,t){this.decoder=e,this.pass=!1,this.options=t||{}}t.PrependBOM=n,n.prototype.write=function(e){return this.addBOM&&(e="\ufeff"+e,this.addBOM=!1),this.encoder.write(e)},n.prototype.end=function(){return this.encoder.end()},t.StripBOM=i,i.prototype.write=function(e){var t=this.decoder.write(e);return this.pass||!t||("\ufeff"===t[0]&&(t=t.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0),t},i.prototype.end=function(){return this.decoder.end()}},4914:(e,t,n)=>{"use strict";var i,r=n(2399).Buffer,o=n(65395),s=e.exports;s.encodings=null,s.defaultCharUnicode="",s.defaultCharSingleByte="?",s.encode=function(e,t,n){e=""+(e||"");var i=s.getEncoder(t,n),o=i.write(e),a=i.end();return a&&a.length>0?r.concat([o,a]):o},s.decode=function(e,t,n){"string"==typeof e&&(s.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),s.skipDecodeWarning=!0),e=r.from(""+(e||""),"binary"));var i=s.getDecoder(t,n),o=i.write(e),a=i.end();return a?o+a:o},s.encodingExists=function(e){try{return s.getCodec(e),!0}catch(e){return!1}},s.toEncoding=s.encode,s.fromEncoding=s.decode,s._codecDataCache={},s.getCodec=function(e){s.encodings||(s.encodings=n(46934));for(var t=s._canonicalizeEncoding(e),i={};;){var r=s._codecDataCache[t];if(r)return r;var o=s.encodings[t];switch(typeof o){case"string":t=o;break;case"object":for(var a in o)i[a]=o[a];i.encodingName||(i.encodingName=t),t=o.type;break;case"function":return i.encodingName||(i.encodingName=t),r=new o(i,s),s._codecDataCache[i.encodingName]=r,r;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+t+"')")}}},s._canonicalizeEncoding=function(e){return(""+e).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},s.getEncoder=function(e,t){var n=s.getCodec(e),i=new n.encoder(t,n);return n.bomAware&&t&&t.addBOM&&(i=new o.PrependBOM(i,t)),i},s.getDecoder=function(e,t){var n=s.getCodec(e),i=new n.decoder(t,n);return!n.bomAware||t&&!1===t.stripBOM||(i=new o.StripBOM(i,t)),i},s.enableStreamingAPI=function(e){if(!s.supportsStreams){var t=n(38044)(e);s.IconvLiteEncoderStream=t.IconvLiteEncoderStream,s.IconvLiteDecoderStream=t.IconvLiteDecoderStream,s.encodeStream=function(e,t){return new s.IconvLiteEncoderStream(s.getEncoder(e,t),t)},s.decodeStream=function(e,t){return new s.IconvLiteDecoderStream(s.getDecoder(e,t),t)},s.supportsStreams=!0}};try{i=n(12781)}catch(e){}i&&i.Transform?s.enableStreamingAPI(i):s.encodeStream=s.decodeStream=function(){throw new Error("iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.")}},38044:(e,t,n)=>{"use strict";var i=n(2399).Buffer;e.exports=function(e){var t=e.Transform;function n(e,n){this.conv=e,(n=n||{}).decodeStrings=!1,t.call(this,n)}function r(e,n){this.conv=e,(n=n||{}).encoding=this.encoding="utf8",t.call(this,n)}return n.prototype=Object.create(t.prototype,{constructor:{value:n}}),n.prototype._transform=function(e,t,n){if("string"!=typeof e)return n(new Error("Iconv encoding stream needs strings as its input."));try{var i=this.conv.write(e);i&&i.length&&this.push(i),n()}catch(e){n(e)}},n.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t),e()}catch(t){e(t)}},n.prototype.collect=function(e){var t=[];return this.on("error",e),this.on("data",(function(e){t.push(e)})),this.on("end",(function(){e(null,i.concat(t))})),this},r.prototype=Object.create(t.prototype,{constructor:{value:r}}),r.prototype._transform=function(e,t,n){if(!(i.isBuffer(e)||e instanceof Uint8Array))return n(new Error("Iconv decoding stream needs buffers as its input."));try{var r=this.conv.write(e);r&&r.length&&this.push(r,this.encoding),n()}catch(e){n(e)}},r.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t,this.encoding),e()}catch(t){e(t)}},r.prototype.collect=function(e){var t="";return this.on("error",e),this.on("data",(function(e){t+=e})),this.on("end",(function(){e(null,t)})),this},{IconvLiteEncoderStream:n,IconvLiteDecoderStream:r}}},67844:(e,t,n)=>{var i=n(52479),r=Object.create(null),o=n(30778);e.exports=i((function(e,t){return r[e]?(r[e].push(t),null):(r[e]=[t],function(e){return o((function t(){var n=r[e],i=n.length,o=function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i]=e[i];return n}(arguments);try{for(var s=0;s<i;s++)n[s].apply(null,o)}finally{n.length>i?(n.splice(0,i),process.nextTick((function(){t.apply(null,o)}))):delete r[e]}}))}(e))}))},94378:(e,t,n)=>{try{var i=n(73837);if("function"!=typeof i.inherits)throw"";e.exports=i.inherits}catch(t){e.exports=n(35717)}},35717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},99934:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createTaggedDecorator=t.tagProperty=t.tagParameter=t.decorate=void 0;var s=o(n(16674)),a=o(n(6867)),c=n(72707);function l(e,t,n,i){!function(e){if(void 0!==e)throw new Error(s.INVALID_DECORATOR_OPERATION)}(t),u(a.TAGGED,e,n.toString(),i)}function d(e,t,n){if(void 0!==e.prototype)throw new Error(s.INVALID_DECORATOR_OPERATION);u(a.TAGGED_PROP,e.constructor,t,n)}function u(e,t,n,i){var r=function(e){var t=[];if(Array.isArray(e)){t=e;var n=(0,c.getFirstArrayDuplicate)(t.map((function(e){return e.key})));if(void 0!==n)throw new Error(s.DUPLICATED_METADATA+" "+n.toString())}else t=[e];return t}(i),o={};Reflect.hasOwnMetadata(e,t)&&(o=Reflect.getMetadata(e,t));var a=o[n];if(void 0===a)a=[];else for(var l=function(e){if(r.some((function(t){return t.key===e.key})))throw new Error(s.DUPLICATED_METADATA+" "+e.key.toString())},d=0,u=a;d<u.length;d++)l(u[d]);a.push.apply(a,r),o[n]=a,Reflect.defineMetadata(e,o,t)}function p(e,t){Reflect.decorate(e,t)}function h(e,t){return function(n,i){t(n,i,e)}}t.tagParameter=l,t.tagProperty=d,t.createTaggedDecorator=function(e){return function(t,n,i){"number"==typeof i?l(t,n,i,e):d(t,n,e)}},t.decorate=function(e,t,n){"number"==typeof n?p([h(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):p([e],t)}},5744:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.inject=void 0;var s=o(n(6867)),a=(0,n(69568).injectBase)(s.INJECT_TAG);t.inject=a},69568:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectBase=void 0;var i=n(16674),r=n(47738),o=n(99934);t.injectBase=function(e){return function(t){return function(n,s,a){if(void 0===t){var c="function"==typeof n?n.name:n.constructor.name;throw new Error((0,i.UNDEFINED_INJECT_ANNOTATION)(c))}return(0,o.createTaggedDecorator)(new r.Metadata(e,t))(n,s,a)}}}},64315:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.injectable=void 0;var s=o(n(16674)),a=o(n(6867));t.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(a.PARAM_TYPES,e))throw new Error(s.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(a.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(a.PARAM_TYPES,t,e),e}}},33695:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LazyServiceIdentifer=void 0;var n=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();t.LazyServiceIdentifer=n},71693:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.multiInject=void 0;var s=o(n(6867)),a=(0,n(69568).injectBase)(s.MULTI_INJECT_TAG);t.multiInject=a},38085:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.named=void 0;var s=o(n(6867)),a=n(47738),c=n(99934);t.named=function(e){return(0,c.createTaggedDecorator)(new a.Metadata(s.NAMED_TAG,e))}},6515:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.optional=void 0;var s=o(n(6867)),a=n(47738),c=n(99934);t.optional=function(){return(0,c.createTaggedDecorator)(new a.Metadata(s.OPTIONAL_TAG,!0))}},7014:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.postConstruct=void 0;var s=o(n(16674)),a=o(n(6867)),c=(0,n(85197).propertyEventDecorator)(a.POST_CONSTRUCT,s.MULTIPLE_POST_CONSTRUCT_METHODS);t.postConstruct=c},8822:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.preDestroy=void 0;var s=o(n(16674)),a=o(n(6867)),c=(0,n(85197).propertyEventDecorator)(a.PRE_DESTROY,s.MULTIPLE_PRE_DESTROY_METHODS);t.preDestroy=c},85197:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.propertyEventDecorator=void 0;var i=n(47738);t.propertyEventDecorator=function(e,t){return function(){return function(n,r){var o=new i.Metadata(e,r);if(Reflect.hasOwnMetadata(e,n.constructor))throw new Error(t);Reflect.defineMetadata(e,o,n.constructor)}}}},32052:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagged=void 0;var i=n(47738),r=n(99934);t.tagged=function(e,t){return(0,r.createTaggedDecorator)(new i.Metadata(e,t))}},55638:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.targetName=void 0;var s=o(n(6867)),a=n(47738),c=n(99934);t.targetName=function(e){return function(t,n,i){var r=new a.Metadata(s.NAME_TAG,e);(0,c.tagParameter)(t,n,i,r)}}},86757:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.unmanaged=void 0;var s=o(n(6867)),a=n(47738),c=n(99934);t.unmanaged=function(){return function(e,t,n){var i=new a.Metadata(s.UNMANAGED_TAG,!0);(0,c.tagParameter)(e,t,n,i)}}},44290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Binding=void 0;var i=n(28421),r=n(37791),o=function(){function e(e,t){this.id=(0,r.id)(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=i.BindingTypeEnum.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===i.BindingScopeEnum.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.onDeactivation=this.onDeactivation,t.cache=this.cache,t},e}();t.Binding=o},23184:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingCount=void 0,t.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},16674:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STACK_OVERFLOW=t.CIRCULAR_DEPENDENCY_IN_FACTORY=t.ON_DEACTIVATION_ERROR=t.PRE_DESTROY_ERROR=t.POST_CONSTRUCT_ERROR=t.ASYNC_UNBIND_REQUIRED=t.MULTIPLE_POST_CONSTRUCT_METHODS=t.MULTIPLE_PRE_DESTROY_METHODS=t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=t.ARGUMENTS_LENGTH_MISMATCH=t.INVALID_DECORATOR_OPERATION=t.INVALID_TO_SELF_VALUE=t.LAZY_IN_SYNC=t.INVALID_FUNCTION_BINDING=t.INVALID_MIDDLEWARE_RETURN=t.NO_MORE_SNAPSHOTS_AVAILABLE=t.INVALID_BINDING_TYPE=t.NOT_IMPLEMENTED=t.CIRCULAR_DEPENDENCY=t.UNDEFINED_INJECT_ANNOTATION=t.MISSING_INJECT_ANNOTATION=t.MISSING_INJECTABLE_ANNOTATION=t.NOT_REGISTERED=t.CANNOT_UNBIND=t.AMBIGUOUS_MATCH=t.KEY_NOT_FOUND=t.NULL_ARGUMENT=t.DUPLICATED_METADATA=t.DUPLICATED_INJECTABLE_DECORATOR=void 0,t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",t.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",t.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",t.UNDEFINED_INJECT_ANNOTATION=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",t.LAZY_IN_SYNC=function(e){return"You are attempting to construct '"+e+"' in a synchronous way\n but it has asynchronous dependencies."},t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",t.ARGUMENTS_LENGTH_MISMATCH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",t.MULTIPLE_PRE_DESTROY_METHODS="Cannot apply @preDestroy decorator multiple times in the same class",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",t.ASYNC_UNBIND_REQUIRED="Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)",t.POST_CONSTRUCT_ERROR=function(e,t){return"@postConstruct error in class "+e+": "+t},t.PRE_DESTROY_ERROR=function(e,t){return"@preDestroy error in class "+e+": "+t},t.ON_DEACTIVATION_ERROR=function(e,t){return"onDeactivation() error in class "+e+": "+t},t.CIRCULAR_DEPENDENCY_IN_FACTORY=function(e,t){return"It looks like there is a circular dependency in one of the '"+e+"' bindings. Please investigate bindings withservice identifier '"+t+"'."},t.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=void 0,t.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},t.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},t.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},6867:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NON_CUSTOM_TAG_KEYS=t.PRE_DESTROY=t.POST_CONSTRUCT=t.DESIGN_PARAM_TYPES=t.PARAM_TYPES=t.TAGGED_PROP=t.TAGGED=t.MULTI_INJECT_TAG=t.INJECT_TAG=t.OPTIONAL_TAG=t.UNMANAGED_TAG=t.NAME_TAG=t.NAMED_TAG=void 0,t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct",t.PRE_DESTROY="pre_destroy",t.NON_CUSTOM_TAG_KEYS=[t.INJECT_TAG,t.MULTI_INJECT_TAG,t.NAME_TAG,t.UNMANAGED_TAG,t.NAMED_TAG,t.OPTIONAL_TAG]},51389:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},l=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;var d=n(44290),u=s(n(16674)),p=n(28421),h=s(n(6867)),f=n(51377),m=n(86311),g=n(31927),v=n(51860),y=n(87331),b=n(37791),w=n(55800),_=n(85700),S=n(80175),C=n(9229),k=function(){function e(e){var t=e||{};if("object"!=typeof t)throw new Error(""+u.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=p.BindingScopeEnum.Transient;else if(t.defaultScope!==p.BindingScopeEnum.Singleton&&t.defaultScope!==p.BindingScopeEnum.Transient&&t.defaultScope!==p.BindingScopeEnum.Request)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=(0,b.id)(),this._bindingDictionary=new S.Lookup,this._snapshots=[],this._middleware=null,this._activations=new S.Lookup,this._deactivations=new S.Lookup,this.parent=null,this._metadataReader=new f.MetadataReader,this._moduleActivationStore=new C.ModuleActivationStore}return e.merge=function(t,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var o=new e,s=l([t,n],i,!0).map((function(e){return(0,m.getBindingDictionary)(e)})),a=(0,m.getBindingDictionary)(o);return s.forEach((function(e){var t;t=a,e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))})),o},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),i=0,r=e;i<r.length;i++){var o=r[i],s=n(o.id);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction,s.unbindAsyncFunction,s.onActivationFunction,s.onDeactivationFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(this,void 0,void 0,(function(){var t,n,i,r,o;return c(this,(function(s){switch(s.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,i=e,s.label=1;case 1:return n<i.length?(r=i[n],o=t(r.id),[4,r.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction,o.unbindAsyncFunction,o.onActivationFunction,o.onDeactivationFunction)]):[3,4];case 2:s.sent(),s.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(t){var n=e._removeModuleBindings(t.id);e._deactivateSingletons(n),e._removeModuleHandlers(t.id)}))},e.prototype.unloadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(this,void 0,void 0,(function(){var t,n,i,r;return c(this,(function(o){switch(o.label){case 0:t=0,n=e,o.label=1;case 1:return t<n.length?(i=n[t],r=this._removeModuleBindings(i.id),[4,this._deactivateSingletonsAsync(r)]):[3,4];case 2:o.sent(),this._removeModuleHandlers(i.id),o.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e.prototype.bind=function(e){var t=this.options.defaultScope||p.BindingScopeEnum.Transient,n=new d.Binding(e,t);return this._bindingDictionary.add(e,n),new v.BindingToSyntax(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.rebindAsync=function(e){return a(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.unbindAsync(e)];case 1:return t.sent(),[2,this.bind(e)]}}))}))},e.prototype.unbind=function(e){if(this._bindingDictionary.hasKey(e)){var t=this._bindingDictionary.get(e);this._deactivateSingletons(t)}this._removeServiceFromDictionary(e)},e.prototype.unbindAsync=function(e){return a(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(e)?(t=this._bindingDictionary.get(e),[4,this._deactivateSingletonsAsync(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(e),[2]}}))}))},e.prototype.unbindAll=function(){var e=this;this._bindingDictionary.traverse((function(t,n){e._deactivateSingletons(n)})),this._bindingDictionary=new S.Lookup},e.prototype.unbindAllAsync=function(){return a(this,void 0,void 0,(function(){var e,t=this;return c(this,(function(n){switch(n.label){case 0:return e=[],this._bindingDictionary.traverse((function(n,i){e.push(t._deactivateSingletonsAsync(i))})),[4,Promise.all(e)];case 1:return n.sent(),this._bindingDictionary=new S.Lookup,[2]}}))}))},e.prototype.onActivation=function(e,t){this._activations.add(e,t)},e.prototype.onDeactivation=function(e,t){this._deactivations.add(e,t)},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isCurrentBound=function(e){return this._bindingDictionary.hasKey(e)},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,h.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,n){var i=!1;if(this._bindingDictionary.hasKey(e)){var r=this._bindingDictionary.get(e),o=(0,m.createMockRequest)(this,e,t,n);i=r.some((function(e){return e.constraint(o)}))}return!i&&this.parent&&(i=this.parent.isBoundTagged(e,t,n)),i},e.prototype.snapshot=function(){this._snapshots.push(_.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(u.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){var t=this._getNotAllArgs(e,!1);return this._getButThrowIfAsync(t)},e.prototype.getAsync=function(e){return a(this,void 0,void 0,(function(){var t;return c(this,(function(n){return t=this._getNotAllArgs(e,!1),[2,this._get(t)]}))}))},e.prototype.getTagged=function(e,t,n){var i=this._getNotAllArgs(e,!1,t,n);return this._getButThrowIfAsync(i)},e.prototype.getTaggedAsync=function(e,t,n){return a(this,void 0,void 0,(function(){var i;return c(this,(function(r){return i=this._getNotAllArgs(e,!1,t,n),[2,this._get(i)]}))}))},e.prototype.getNamed=function(e,t){return this.getTagged(e,h.NAMED_TAG,t)},e.prototype.getNamedAsync=function(e,t){return this.getTaggedAsync(e,h.NAMED_TAG,t)},e.prototype.getAll=function(e){var t=this._getAllArgs(e);return this._getButThrowIfAsync(t)},e.prototype.getAllAsync=function(e){var t=this._getAllArgs(e);return this._getAll(t)},e.prototype.getAllTagged=function(e,t,n){var i=this._getNotAllArgs(e,!0,t,n);return this._getButThrowIfAsync(i)},e.prototype.getAllTaggedAsync=function(e,t,n){var i=this._getNotAllArgs(e,!0,t,n);return this._getAll(i)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,h.NAMED_TAG,t)},e.prototype.getAllNamedAsync=function(e,t){return this.getAllTaggedAsync(e,h.NAMED_TAG,t)},e.prototype.resolve=function(e){var t=this.isBound(e);t||this.bind(e).toSelf();var n=this.get(e);return t||this.unbind(e),n},e.prototype._preDestroy=function(e,t){if(Reflect.hasMetadata(h.PRE_DESTROY,e))return t[Reflect.getMetadata(h.PRE_DESTROY,e).value]()},e.prototype._removeModuleHandlers=function(e){var t=this._moduleActivationStore.remove(e);this._activations.removeIntersection(t.onActivations),this._deactivations.removeIntersection(t.onDeactivations)},e.prototype._removeModuleBindings=function(e){return this._bindingDictionary.removeByCondition((function(t){return t.moduleId===e}))},e.prototype._deactivate=function(e,t){var n=this,i=Object.getPrototypeOf(t).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){var r=this._deactivateContainer(t,this._deactivations.get(e.serviceIdentifier).values());if((0,y.isPromise)(r))return this._handleDeactivationError(r.then((function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,i)})),i)}var o=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,t,i);if((0,y.isPromise)(o))return this._handleDeactivationError(o,i)}catch(e){throw new Error(u.ON_DEACTIVATION_ERROR(i.name,e.message))}},e.prototype._handleDeactivationError=function(e,t){return a(this,void 0,void 0,(function(){var n;return c(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return i.sent(),[3,3];case 2:throw n=i.sent(),new Error(u.ON_DEACTIVATION_ERROR(t.name,n.message));case 3:return[2]}}))}))},e.prototype._deactivateContainer=function(e,t){for(var n=this,i=t.next();i.value;){var r=i.value(e);if((0,y.isPromise)(r))return r.then((function(){return n._deactivateContainerAsync(e,t)}));i=t.next()}},e.prototype._deactivateContainerAsync=function(e,t){return a(this,void 0,void 0,(function(){var n;return c(this,(function(i){switch(i.label){case 0:n=t.next(),i.label=1;case 1:return n.value?[4,n.value(e)]:[3,3];case 2:return i.sent(),n=t.next(),[3,1];case 3:return[2]}}))}))},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(i){var r=e.rebind(i);return t(r,n),r}},i=function(t){return function(n,i){e._moduleActivationStore.addActivation(t,n,i),e.onActivation(n,i)}},r=function(t){return function(n,i){e._moduleActivationStore.addDeactivation(t,n,i),e.onDeactivation(n,i)}};return function(o){return{bindFunction:(s=o,function(n){var i=e.bind(n);return t(i,s),i}),isboundFunction:function(t){return e.isBound(t)},onActivationFunction:i(o),onDeactivationFunction:r(o),rebindFunction:n(o),unbindFunction:function(t){return e.unbind(t)},unbindAsyncFunction:function(t){return e.unbindAsync(t)}};var s}},e.prototype._getAll=function(e){return Promise.all(this._get(e))},e.prototype._get=function(e){var t=i(i({},e),{contextInterceptor:function(e){return e},targetType:p.TargetTypeEnum.Variable});if(this._middleware){var n=this._middleware(t);if(null==n)throw new Error(u.INVALID_MIDDLEWARE_RETURN);return n}return this._planAndResolve()(t)},e.prototype._getButThrowIfAsync=function(e){var t=this._get(e);if((0,y.isPromiseOrContainsPromise)(t))throw new Error(u.LAZY_IN_SYNC(e.serviceIdentifier));return t},e.prototype._getAllArgs=function(e){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e}},e.prototype._getNotAllArgs=function(e,t,n,i){return{avoidConstraints:!1,isMultiInject:t,serviceIdentifier:e,key:n,value:i}},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=(0,m.plan)(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return n=t.contextInterceptor(n),(0,g.resolve)(n)}},e.prototype._deactivateIfSingleton=function(e){var t=this;if(e.activated)return(0,y.isPromise)(e.cache)?e.cache.then((function(n){return t._deactivate(e,n)})):this._deactivate(e,e.cache)},e.prototype._deactivateSingletons=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t],r=this._deactivateIfSingleton(i);if((0,y.isPromise)(r))throw new Error(u.ASYNC_UNBIND_REQUIRED)}},e.prototype._deactivateSingletonsAsync=function(e){return a(this,void 0,void 0,(function(){var t=this;return c(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return t._deactivateIfSingleton(e)})))];case 1:return n.sent(),[2]}}))}))},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(e,t,n){return this.parent?this._deactivate.bind(this.parent)(e,t):this._bindingDeactivationAndPreDestroy(e,t,n)},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(e,t,n){return a(this,void 0,void 0,(function(){return c(this,(function(i){switch(i.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(e,t)]:[3,2];case 1:return i.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(e,t,n)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))},e.prototype._removeServiceFromDictionary=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(u.CANNOT_UNBIND+" "+(0,w.getServiceIdentifierAsString)(e))}},e.prototype._bindingDeactivationAndPreDestroy=function(e,t,n){var i=this;if("function"==typeof e.onDeactivation){var r=e.onDeactivation(t);if((0,y.isPromise)(r))return r.then((function(){return i._preDestroy(n,t)}))}return this._preDestroy(n,t)},e.prototype._bindingDeactivationAndPreDestroyAsync=function(e,t,n){return a(this,void 0,void 0,(function(){return c(this,(function(i){switch(i.label){case 0:return"function"!=typeof e.onDeactivation?[3,2]:[4,e.onDeactivation(t)];case 1:i.sent(),i.label=2;case 2:return[4,this._preDestroy(n,t)];case 3:return i.sent(),[2]}}))}))},e}();t.Container=k},33244:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncContainerModule=t.ContainerModule=void 0;var i=n(37791);t.ContainerModule=function(e){this.id=(0,i.id)(),this.registry=e};t.AsyncContainerModule=function(e){this.id=(0,i.id)(),this.registry=e}},85700:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerSnapshot=void 0;var n=function(){function e(){}return e.of=function(t,n,i,r,o){var s=new e;return s.bindings=t,s.middleware=n,s.deactivations=r,s.activations=i,s.moduleActivationStore=o,s},e}();t.ContainerSnapshot=n},80175:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Lookup=void 0;var s=o(n(16674)),a=n(14192),c=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(s.NULL_ARGUMENT);if(null==t)throw new Error(s.NULL_ARGUMENT);var n=this._map.get(e);void 0!==n?n.push(t):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(s.NULL_ARGUMENT);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(s.KEY_NOT_FOUND)},e.prototype.remove=function(e){if(null==e)throw new Error(s.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(s.KEY_NOT_FOUND)},e.prototype.removeIntersection=function(e){var t=this;this.traverse((function(n,i){var r=e.hasKey(n)?e.get(n):void 0;if(void 0!==r){var o=i.filter((function(e){return!r.some((function(t){return e===t}))}));t._setValue(n,o)}}))},e.prototype.removeByCondition=function(e){var t=this,n=[];return this._map.forEach((function(i,r){for(var o=[],s=0,a=i;s<a.length;s++){var c=a[s];e(c)?n.push(c):o.push(c)}t._setValue(r,o)})),n},e.prototype.hasKey=function(e){if(null==e)throw new Error(s.NULL_ARGUMENT);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,(0,a.isClonable)(e)?e.clone():e)}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e.prototype._setValue=function(e,t){t.length>0?this._map.set(e,t):this._map.delete(e)},e}();t.Lookup=c},9229:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleActivationStore=void 0;var i=n(80175),r=function(){function e(){this._map=new Map}return e.prototype.remove=function(e){if(this._map.has(e)){var t=this._map.get(e);return this._map.delete(e),t}return this._getEmptyHandlersStore()},e.prototype.addDeactivation=function(e,t,n){this._getModuleActivationHandlers(e).onDeactivations.add(t,n)},e.prototype.addActivation=function(e,t,n){this._getModuleActivationHandlers(e).onActivations.add(t,n)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){t._map.set(n,{onActivations:e.onActivations.clone(),onDeactivations:e.onDeactivations.clone()})})),t},e.prototype._getModuleActivationHandlers=function(e){var t=this._map.get(e);return void 0===t&&(t=this._getEmptyHandlersStore(),this._map.set(e,t)),t},e.prototype._getEmptyHandlersStore=function(){return{onActivations:new i.Lookup,onDeactivations:new i.Lookup}},e}();t.ModuleActivationStore=r},87405:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.interfaces=void 0,n||(n={}),t.interfaces=n},86700:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=t.getServiceIdentifierAsString=t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=t.decorate=t.interfaces=t.id=t.MetadataReader=t.preDestroy=t.postConstruct=t.targetName=t.multiInject=t.unmanaged=t.optional=t.LazyServiceIdentifer=t.inject=t.named=t.tagged=t.injectable=t.createTaggedDecorator=t.ContainerModule=t.AsyncContainerModule=t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=t.Container=t.METADATA_KEY=void 0;var s=o(n(6867));t.METADATA_KEY=s;var a=n(51389);Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return a.Container}});var c=n(28421);Object.defineProperty(t,"BindingScopeEnum",{enumerable:!0,get:function(){return c.BindingScopeEnum}}),Object.defineProperty(t,"BindingTypeEnum",{enumerable:!0,get:function(){return c.BindingTypeEnum}}),Object.defineProperty(t,"TargetTypeEnum",{enumerable:!0,get:function(){return c.TargetTypeEnum}});var l=n(33244);Object.defineProperty(t,"AsyncContainerModule",{enumerable:!0,get:function(){return l.AsyncContainerModule}}),Object.defineProperty(t,"ContainerModule",{enumerable:!0,get:function(){return l.ContainerModule}});var d=n(99934);Object.defineProperty(t,"createTaggedDecorator",{enumerable:!0,get:function(){return d.createTaggedDecorator}});var u=n(64315);Object.defineProperty(t,"injectable",{enumerable:!0,get:function(){return u.injectable}});var p=n(32052);Object.defineProperty(t,"tagged",{enumerable:!0,get:function(){return p.tagged}});var h=n(38085);Object.defineProperty(t,"named",{enumerable:!0,get:function(){return h.named}});var f=n(5744);Object.defineProperty(t,"inject",{enumerable:!0,get:function(){return f.inject}});var m=n(33695);Object.defineProperty(t,"LazyServiceIdentifer",{enumerable:!0,get:function(){return m.LazyServiceIdentifer}});var g=n(6515);Object.defineProperty(t,"optional",{enumerable:!0,get:function(){return g.optional}});var v=n(86757);Object.defineProperty(t,"unmanaged",{enumerable:!0,get:function(){return v.unmanaged}});var y=n(71693);Object.defineProperty(t,"multiInject",{enumerable:!0,get:function(){return y.multiInject}});var b=n(55638);Object.defineProperty(t,"targetName",{enumerable:!0,get:function(){return b.targetName}});var w=n(7014);Object.defineProperty(t,"postConstruct",{enumerable:!0,get:function(){return w.postConstruct}});var _=n(8822);Object.defineProperty(t,"preDestroy",{enumerable:!0,get:function(){return _.preDestroy}});var S=n(51377);Object.defineProperty(t,"MetadataReader",{enumerable:!0,get:function(){return S.MetadataReader}});var C=n(37791);Object.defineProperty(t,"id",{enumerable:!0,get:function(){return C.id}});var k=n(87405);Object.defineProperty(t,"interfaces",{enumerable:!0,get:function(){return k.interfaces}});var E=n(99934);Object.defineProperty(t,"decorate",{enumerable:!0,get:function(){return E.decorate}});var x=n(80758);Object.defineProperty(t,"traverseAncerstors",{enumerable:!0,get:function(){return x.traverseAncerstors}}),Object.defineProperty(t,"taggedConstraint",{enumerable:!0,get:function(){return x.taggedConstraint}}),Object.defineProperty(t,"namedConstraint",{enumerable:!0,get:function(){return x.namedConstraint}}),Object.defineProperty(t,"typeConstraint",{enumerable:!0,get:function(){return x.typeConstraint}});var T=n(55800);Object.defineProperty(t,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return T.getServiceIdentifierAsString}});var P=n(70600);Object.defineProperty(t,"multiBindToService",{enumerable:!0,get:function(){return P.multiBindToService}})},95228:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;var i=n(37791),r=function(){function e(e){this.id=(0,i.id)(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}();t.Context=r},47738:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var s=o(n(6867)),a=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===s.NAMED_TAG?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},e}();t.Metadata=a},51377:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataReader=void 0;var s=o(n(6867)),a=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(s.PARAM_TYPES,e),userGeneratedMetadata:Reflect.getMetadata(s.TAGGED,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(s.TAGGED_PROP,e)||[]},e}();t.MetadataReader=a},55314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plan=void 0;t.Plan=function(e,t){this.parentContext=e,this.rootRequest=t}},86311:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getBindingDictionary=t.createMockRequest=t.plan=void 0;var s=n(23184),a=o(n(16674)),c=n(28421),l=o(n(6867)),d=n(85265),u=n(55800),p=n(95228),h=n(47738),f=n(55314),m=n(6e3),g=n(6748),v=n(18924);function y(e){return e._bindingDictionary}function b(e,t,n,i,r){var o,c=_(n.container,r.serviceIdentifier);return c.length===s.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof r.serviceIdentifier&&e.getConstructorMetadata(r.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(r.serviceIdentifier).toSelf(),c=_(n.container,r.serviceIdentifier)),o=t?c:c.filter((function(e){var t=new g.Request(e.serviceIdentifier,n,i,e,r);return e.constraint(t)})),function(e,t,n,i){switch(t.length){case s.BindingCount.NoBindingsAvailable:if(n.isOptional())return t;var r=(0,u.getServiceIdentifierAsString)(e),o=a.NOT_REGISTERED;throw o+=(0,u.listMetadataForTarget)(r,n),o+=(0,u.listRegisteredBindingsForServiceIdentifier)(i,r,_),new Error(o);case s.BindingCount.OnlyOneBindingAvailable:return t;case s.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return t;throw r=(0,u.getServiceIdentifierAsString)(e),o=a.AMBIGUOUS_MATCH+" "+r,o+=(0,u.listRegisteredBindingsForServiceIdentifier)(i,r,_),new Error(o)}}(r.serviceIdentifier,o,r,n.container),o}function w(e,t,n,i,r,o){var s,l;if(null===r){s=b(e,t,i,null,o),l=new g.Request(n,i,null,s,o);var d=new f.Plan(i,l);i.addPlan(d)}else s=b(e,t,i,r,o),l=r.addChildRequest(o.serviceIdentifier,s,o);s.forEach((function(t){var n=null;if(o.isArray())n=l.addChildRequest(t.serviceIdentifier,t,o);else{if(t.cache)return;n=l}if(t.type===c.BindingTypeEnum.Instance&&null!==t.implementationType){var r=(0,m.getDependencies)(e,t.implementationType);if(!i.container.options.skipBaseClassChecks){var s=(0,m.getBaseClassDependencyCount)(e,t.implementationType);if(r.length<s){var d=a.ARGUMENTS_LENGTH_MISMATCH((0,m.getFunctionName)(t.implementationType));throw new Error(d)}}r.forEach((function(t){w(e,!1,t.serviceIdentifier,i,n,t)}))}}))}function _(e,t){var n=[],i=y(e);return i.hasKey(t)?n=i.get(t):null!==e.parent&&(n=_(e.parent,t)),n}t.getBindingDictionary=y,t.plan=function(e,t,n,i,r,o,s,a){void 0===a&&(a=!1);var c=new p.Context(t),f=function(e,t,n,i,r,o){var s=e?l.MULTI_INJECT_TAG:l.INJECT_TAG,a=new h.Metadata(s,n),c=new v.Target(t,"",n,a);if(void 0!==r){var d=new h.Metadata(r,o);c.metadata.push(d)}return c}(n,i,r,0,o,s);try{return w(e,a,r,c,null,f),c}catch(e){throw(0,d.isStackOverflowExeption)(e)&&(0,u.circularDependencyToException)(c.plan.rootRequest),e}},t.createMockRequest=function(e,t,n,i){var r=new v.Target(c.TargetTypeEnum.Variable,"",t,new h.Metadata(n,i)),o=new p.Context(e);return new g.Request(t,o,null,[],r)}},88460:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryableString=void 0;var n=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}();t.QueryableString=n},6e3:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionName=t.getBaseClassDependencyCount=t.getDependencies=void 0;var a=n(33695),c=o(n(16674)),l=n(28421),d=o(n(6867)),u=n(55800);Object.defineProperty(t,"getFunctionName",{enumerable:!0,get:function(){return u.getFunctionName}});var p=n(18924);function h(e,t,n,i){var r=e.getConstructorMetadata(n),o=r.compilerGeneratedMetadata;if(void 0===o){var a=c.MISSING_INJECTABLE_ANNOTATION+" "+t+".";throw new Error(a)}var l=r.userGeneratedMetadata,d=Object.keys(l),u=0===n.length&&d.length>0,p=d.length>n.length,h=function(e,t,n,i,r){for(var o=[],s=0;s<r;s++){var a=f(s,e,t,n,i);null!==a&&o.push(a)}return o}(i,t,o,l,u||p?d.length:n.length),m=g(e,n,t);return s(s([],h,!0),m,!0)}function f(e,t,n,i,r){var o=r[e.toString()]||[],s=v(o),d=!0!==s.unmanaged,u=i[e];if((u=s.inject||s.multiInject||u)instanceof a.LazyServiceIdentifer&&(u=u.unwrap()),d){if(!t&&(u===Object||u===Function||void 0===u)){var h=c.MISSING_INJECT_ANNOTATION+" argument "+e+" in class "+n+".";throw new Error(h)}var f=new p.Target(l.TargetTypeEnum.ConstructorArgument,s.targetName,u);return f.metadata=o,f}return null}function m(e,t,n,i){var r=e||t;if(void 0===r){var o=c.MISSING_INJECTABLE_ANNOTATION+" for property "+String(n)+" in class "+i+".";throw new Error(o)}return r}function g(e,t,n){for(var i=e.getPropertiesMetadata(t),r=[],o=Object.getOwnPropertySymbols(i),a=0,c=Object.keys(i).concat(o);a<c.length;a++){var d=c[a],u=i[d],h=v(u),f=h.targetName||d,y=m(h.inject,h.multiInject,d,n),b=new p.Target(l.TargetTypeEnum.ClassProperty,f,y);b.metadata=u,r.push(b)}var w=Object.getPrototypeOf(t.prototype).constructor;if(w!==Object){var _=g(e,w,n);r=s(s([],r,!0),_,!0)}return r}function v(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[d.INJECT_TAG],multiInject:t[d.MULTI_INJECT_TAG],targetName:t[d.NAME_TAG],unmanaged:t[d.UNMANAGED_TAG]}}t.getDependencies=function(e,t){return h(e,(0,u.getFunctionName)(t),t,!1)},t.getBaseClassDependencyCount=function e(t,n){var i=Object.getPrototypeOf(n.prototype).constructor;if(i!==Object){var r=h(t,(0,u.getFunctionName)(i),i,!0),o=r.map((function(e){return e.metadata.filter((function(e){return e.key===d.UNMANAGED_TAG}))})),s=[].concat.apply([],o).length,a=r.length-s;return a>0?a:e(t,i)}return 0}},6748:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;var i=n(37791),r=function(){function e(e,t,n,r,o){this.id=(0,i.id)(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,i){var r=new e(t,this.parentContext,this,n,i);return this.childRequests.push(r),r},e}();t.Request=r},18924:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Target=void 0;var s=o(n(6867)),a=n(37791),c=n(55800),l=n(47738),d=n(88460),u=function(){function e(e,t,n,i){this.id=(0,a.id)(),this.type=e,this.serviceIdentifier=n;var r="symbol"==typeof t?(0,c.getSymbolDescription)(t):t;this.name=new d.QueryableString(r||""),this.identifier=t,this.metadata=new Array;var o=null;"string"==typeof i?o=new l.Metadata(s.NAMED_TAG,i):i instanceof l.Metadata&&(o=i),null!==o&&this.metadata.push(o)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++)if(n[t].key===e)return!0;return!1},e.prototype.isArray=function(){return this.hasTag(s.MULTI_INJECT_TAG)},e.prototype.matchesArray=function(e){return this.matchesTag(s.MULTI_INJECT_TAG)(e)},e.prototype.isNamed=function(){return this.hasTag(s.NAMED_TAG)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return s.NON_CUSTOM_TAG_KEYS.every((function(t){return e.key!==t}))}))},e.prototype.isOptional=function(){return this.matchesTag(s.OPTIONAL_TAG)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===s.NAMED_TAG}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return s.NON_CUSTOM_TAG_KEYS.every((function(t){return e.key!==t}))})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(s.NAMED_TAG)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var i=0,r=t.metadata;i<r.length;i++){var o=r[i];if(o.key===e&&o.value===n)return!0}return!1}},e}();t.Target=u},52279:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},l=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveInstance=void 0;var d=n(16674),u=n(28421),p=s(n(6867)),h=n(87331);function f(e){var t,n=new((t=e.constr).bind.apply(t,l([void 0],e.constructorInjections,!1)));return e.propertyRequests.forEach((function(t,i){var r=t.target.identifier,o=e.propertyInjections[i];n[r]=o})),n}function m(e){return a(this,void 0,void 0,(function(){var t,n,i,r;return c(this,(function(o){for(t=[],n=0,i=e;n<i.length;n++)r=i[n],Array.isArray(r)?t.push(Promise.all(r)):t.push(r);return[2,Promise.all(t)]}))}))}function g(e,t){var n=function(e,t){var n,i;if(Reflect.hasMetadata(p.POST_CONSTRUCT,e)){var r=Reflect.getMetadata(p.POST_CONSTRUCT,e);try{return null===(i=(n=t)[r.value])||void 0===i?void 0:i.call(n)}catch(t){throw new Error((0,d.POST_CONSTRUCT_ERROR)(e.name,t.message))}}}(e,t);return(0,h.isPromise)(n)?n.then((function(){return t})):t}t.resolveInstance=function(e,t,n,r){!function(e,t){e.scope!==u.BindingScopeEnum.Singleton&&function(e,t){var n="Class cannot be instantiated in "+(e.scope===u.BindingScopeEnum.Request?"request":"transient")+" scope.";if("function"==typeof e.onDeactivation)throw new Error((0,d.ON_DEACTIVATION_ERROR)(t.name,n));if(Reflect.hasMetadata(p.PRE_DESTROY,t))throw new Error((0,d.PRE_DESTROY_ERROR)(t.name,n))}(e,t)}(e,t);var o=function(e,t,n){var r;if(t.length>0){var o=function(e,t){return e.reduce((function(e,n){var i=t(n);return n.target.type===u.TargetTypeEnum.ConstructorArgument?e.constructorInjections.push(i):(e.propertyRequests.push(n),e.propertyInjections.push(i)),e.isAsync||(e.isAsync=(0,h.isPromiseOrContainsPromise)(i)),e}),{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}(t,n),s=i(i({},o),{constr:e});r=o.isAsync?function(e){return a(this,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:return[4,m(e.constructorInjections)];case 1:return t=r.sent(),[4,m(e.propertyInjections)];case 2:return n=r.sent(),[2,f(i(i({},e),{constructorInjections:t,propertyInjections:n}))]}}))}))}(s):f(s)}else r=new e;return r}(t,n,r);return(0,h.isPromise)(o)?o.then((function(e){return g(t,e)})):g(t,o)}},31927:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=void 0;var c=o(n(16674)),l=n(28421),d=n(86311),u=n(73380),p=n(87331),h=n(70600),f=n(85265),m=n(52279),g=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,i=t.childRequests,r=t.target&&t.target.isArray(),o=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(r&&o)return i.map((function(t){return g(e)(t)}));if(!t.target.isOptional()||0!==n.length){var s=n[0];return v(e,t,s)}}},v=function(e,t,n){return function(e,t,n){var i=(0,u.tryGetFromScope)(e,t);return null!==i||(i=n(),(0,u.saveToScope)(e,t,i)),i}(e,n,(function(){var i=function(e,t,n){var i,r=t.childRequests;switch((0,h.ensureFullyBound)(n),n.type){case l.BindingTypeEnum.ConstantValue:case l.BindingTypeEnum.Function:i=n.cache;break;case l.BindingTypeEnum.Constructor:i=n.implementationType;break;case l.BindingTypeEnum.Instance:i=(0,m.resolveInstance)(n,n.implementationType,r,g(e));break;default:i=function(e,t){var n=(0,h.getFactoryDetails)(e);return(0,f.tryAndThrowErrorIfStackOverflow)((function(){return n.factory.bind(e)(t)}),(function(){return new Error(c.CIRCULAR_DEPENDENCY_IN_FACTORY(n.factoryType,t.currentRequest.serviceIdentifier.toString()))}))}(n,t.parentContext)}return i}(e,t,n);return(0,p.isPromise)(i)?i.then((function(e){return y(t,n,e)})):y(t,n,i)}))};function y(e,t,n){var i,r=b(e.parentContext,t,n),o=C(e.parentContext.container),s=o.next();do{i=s.value;var a=e.parentContext,c=e.serviceIdentifier,l=S(i,c);r=(0,p.isPromise)(r)?_(l,a,r):w(l,a,r),s=o.next()}while(!0!==s.done&&!(0,d.getBindingDictionary)(i).hasKey(e.serviceIdentifier));return r}var b=function(e,t,n){return"function"==typeof t.onActivation?t.onActivation(e,n):n},w=function(e,t,n){for(var i=e.next();!i.done;){if(n=i.value(t,n),(0,p.isPromise)(n))return _(e,t,n);i=e.next()}return n},_=function(e,t,n){return s(void 0,void 0,void 0,(function(){var i,r;return a(this,(function(o){switch(o.label){case 0:return[4,n];case 1:i=o.sent(),r=e.next(),o.label=2;case 2:return r.done?[3,4]:[4,r.value(t,i)];case 3:return i=o.sent(),r=e.next(),[3,2];case 4:return[2,i]}}))}))},S=function(e,t){var n=e._activations;return n.hasKey(t)?n.get(t).values():[].values()},C=function(e){for(var t=[e],n=e.parent;null!==n;)t.push(n),n=n.parent;return{next:function(){var e=t.pop();return void 0!==e?{done:!1,value:e}:{done:!0,value:void 0}}}};t.resolve=function(e){return g(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}},73380:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.saveToScope=t.tryGetFromScope=void 0;var o=n(86700),s=n(87331);t.tryGetFromScope=function(e,t){return t.scope===o.BindingScopeEnum.Singleton&&t.activated?t.cache:t.scope===o.BindingScopeEnum.Request&&e.has(t.id)?e.get(t.id):null},t.saveToScope=function(e,t,n){t.scope===o.BindingScopeEnum.Singleton&&c(t,n),t.scope===o.BindingScopeEnum.Request&&a(e,t,n)};var a=function(e,t,n){e.has(t.id)||e.set(t.id,n)},c=function(e,t){e.cache=t,e.activated=!0,(0,s.isPromise)(t)&&l(e,t)},l=function(e,t){return i(void 0,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t];case 1:return n=r.sent(),e.cache=n,[3,3];case 2:throw i=r.sent(),e.cache=null,e.activated=!1,i;case 3:return[2]}}))}))}},83366:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInSyntax=void 0;var i=n(28421),r=n(71325),o=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=i.BindingScopeEnum.Request,new r.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=i.BindingScopeEnum.Singleton,new r.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=i.BindingScopeEnum.Transient,new r.BindingWhenOnSyntax(this._binding)},e}();t.BindingInSyntax=o},99812:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInWhenOnSyntax=void 0;var i=n(83366),r=n(51811),o=n(98370),s=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding),this._bindingInSyntax=new i.BindingInSyntax(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}();t.BindingInWhenOnSyntax=s},51811:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingOnSyntax=void 0;var i=n(98370),r=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new i.BindingWhenSyntax(this._binding)},e.prototype.onDeactivation=function(e){return this._binding.onDeactivation=e,new i.BindingWhenSyntax(this._binding)},e}();t.BindingOnSyntax=r},51860:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BindingToSyntax=void 0;var s=o(n(16674)),a=n(28421),c=n(99812),l=n(71325),d=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=a.BindingTypeEnum.Instance,this._binding.implementationType=e,new c.BindingInWhenOnSyntax(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+s.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=a.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=a.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=a.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new c.BindingInWhenOnSyntax(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=a.BindingTypeEnum.Constructor,this._binding.implementationType=e,this._binding.scope=a.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=a.BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=a.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error(s.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=a.BindingTypeEnum.Function,this._binding.scope=a.BindingScopeEnum.Singleton,t},e.prototype.toAutoFactory=function(e){return this._binding.type=a.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=a.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)},e.prototype.toAutoNamedFactory=function(e){return this._binding.type=a.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(n){return t.container.getNamed(e,n)}},new l.BindingWhenOnSyntax(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=a.BindingTypeEnum.Provider,this._binding.provider=e,this._binding.scope=a.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}();t.BindingToSyntax=d},71325:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenOnSyntax=void 0;var i=n(51811),r=n(98370),o=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new r.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}();t.BindingWhenOnSyntax=o},98370:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenSyntax=void 0;var i=n(51811),r=n(80758),o=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new i.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=(0,r.namedConstraint)(e),new i.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e&&null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new i.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=(0,r.taggedConstraint)(e)(t),new i.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return null!==t&&(0,r.typeConstraint)(e)(t.parentRequest)},new i.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return null!==t&&(0,r.namedConstraint)(e)(t.parentRequest)},new i.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&(0,r.taggedConstraint)(e)(t)(n.parentRequest)},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&(0,r.traverseAncerstors)(t,(0,r.typeConstraint)(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&!(0,r.traverseAncerstors)(t,(0,r.typeConstraint)(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&(0,r.traverseAncerstors)(t,(0,r.namedConstraint)(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&!(0,r.traverseAncerstors)(t,(0,r.namedConstraint)(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&(0,r.traverseAncerstors)(n,(0,r.taggedConstraint)(e)(t))},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&!(0,r.traverseAncerstors)(n,(0,r.taggedConstraint)(e)(t))},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&(0,r.traverseAncerstors)(t,e)},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&!(0,r.traverseAncerstors)(t,e)},new i.BindingOnSyntax(this._binding)},e}();t.BindingWhenSyntax=o},80758:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=void 0;var s=o(n(6867)),a=n(47738),c=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||c(n,t))};t.traverseAncerstors=c;var l=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new a.Metadata(e,t),n}};t.taggedConstraint=l;var d=l(s.NAMED_TAG);t.namedConstraint=d,t.typeConstraint=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var i=t.bindings[0].implementationType;return e===i}return!1}}},87331:(e,t)=>{"use strict";function n(e){return("object"==typeof e&&null!==e||"function"==typeof e)&&"function"==typeof e.then}Object.defineProperty(t,"__esModule",{value:!0}),t.isPromiseOrContainsPromise=t.isPromise=void 0,t.isPromise=n,t.isPromiseOrContainsPromise=function(e){return!!n(e)||Array.isArray(e)&&e.some(n)}},70600:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getFactoryDetails=t.ensureFullyBound=t.multiBindToService=void 0;var s=n(86700),a=o(n(16674)),c=n(28421),l=n(82938);t.multiBindToService=function(e){return function(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.forEach((function(n){return e.bind(n).toService(t)}))}}},t.ensureFullyBound=function(e){var t=null;switch(e.type){case c.BindingTypeEnum.ConstantValue:case c.BindingTypeEnum.Function:t=e.cache;break;case c.BindingTypeEnum.Constructor:case c.BindingTypeEnum.Instance:t=e.implementationType;break;case c.BindingTypeEnum.DynamicValue:t=e.dynamicValue;break;case c.BindingTypeEnum.Provider:t=e.provider;break;case c.BindingTypeEnum.Factory:t=e.factory}if(null===t){var n=(0,s.getServiceIdentifierAsString)(e.serviceIdentifier);throw new Error(a.INVALID_BINDING_TYPE+" "+n)}},t.getFactoryDetails=function(e){switch(e.type){case c.BindingTypeEnum.Factory:return{factory:e.factory,factoryType:l.FactoryType.Factory};case c.BindingTypeEnum.Provider:return{factory:e.provider,factoryType:l.FactoryType.Provider};case c.BindingTypeEnum.DynamicValue:return{factory:e.dynamicValue,factoryType:l.FactoryType.DynamicValue};default:throw new Error("Unexpected factory type "+e.type)}}},14192:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isClonable=void 0,t.isClonable=function(e){return"object"==typeof e&&null!==e&&"clone"in e&&"function"==typeof e.clone}},85265:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.tryAndThrowErrorIfStackOverflow=t.isStackOverflowExeption=void 0;var s=o(n(16674));function a(e){return e instanceof RangeError||e.message===s.STACK_OVERFLOW}t.isStackOverflowExeption=a,t.tryAndThrowErrorIfStackOverflow=function(e,t){try{return e()}catch(e){throw a(e)&&(e=t()),e}}},82938:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.FactoryType=void 0,(n=t.FactoryType||(t.FactoryType={})).DynamicValue="toDynamicValue",n.Factory="toFactory",n.Provider="toProvider"},37791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.id=void 0;var n=0;t.id=function(){return n++}},72707:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstArrayDuplicate=void 0,t.getFirstArrayDuplicate=function(e){for(var t=new Set,n=0,i=e;n<i.length;n++){var r=i[n];if(t.has(r))return r;t.add(r)}}},55800:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getSymbolDescription=t.circularDependencyToException=t.listMetadataForTarget=t.listRegisteredBindingsForServiceIdentifier=t.getServiceIdentifierAsString=t.getFunctionName=void 0;var s=o(n(16674));function a(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function c(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||c(e.parentRequest,t))}function l(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}t.getServiceIdentifierAsString=a,t.listRegisteredBindingsForServiceIdentifier=function(e,t,n){var i="",r=n(e,t);return 0!==r.length&&(i="\nRegistered bindings:",r.forEach((function(e){var t="Object";null!==e.implementationType&&(t=l(e.implementationType)),i=i+"\n "+t,e.constraint.metaData&&(i=i+" - "+e.constraint.metaData)}))),i},t.circularDependencyToException=function e(t){t.childRequests.forEach((function(t){if(c(t,t.serviceIdentifier)){var n=function(e){return function e(t,n){void 0===n&&(n=[]);var i=a(t.serviceIdentifier);return n.push(i),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(t);throw new Error(s.CIRCULAR_DEPENDENCY+" "+n)}e(t)}))},t.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){var n="",i=t.getNamedTag(),r=t.getCustomTags();return null!==i&&(n+=i.toString()+"\n"),null!==r&&r.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e},t.getFunctionName=l,t.getSymbolDescription=function(e){return e.toString().slice(7,-1)}},47030:(e,t,n)=>{"use strict";e.exports=n(8777)},96813:(e,t,n)=>{var i;try{i=n(20077)}catch(e){i=n(57147)}function r(e,t){var n,i="\n";return"object"==typeof t&&null!==t&&(t.spaces&&(n=t.spaces),t.EOL&&(i=t.EOL)),JSON.stringify(e,t?t.replacer:null,n).replace(/\n/g,i)+i}function o(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}var s={readFile:function(e,t,n){null==n&&(n=t,t={}),"string"==typeof t&&(t={encoding:t});var r=(t=t||{}).fs||i,s=!0;"throws"in t&&(s=t.throws),r.readFile(e,t,(function(i,r){if(i)return n(i);var a;r=o(r);try{a=JSON.parse(r,t?t.reviver:null)}catch(t){return s?(t.message=e+": "+t.message,n(t)):n(null,null)}n(null,a)}))},readFileSync:function(e,t){"string"==typeof(t=t||{})&&(t={encoding:t});var n=t.fs||i,r=!0;"throws"in t&&(r=t.throws);try{var s=n.readFileSync(e,t);return s=o(s),JSON.parse(s,t.reviver)}catch(t){if(r)throw t.message=e+": "+t.message,t;return null}},writeFile:function(e,t,n,o){null==o&&(o=n,n={});var s=(n=n||{}).fs||i,a="";try{a=r(t,n)}catch(e){return void(o&&o(e,null))}s.writeFile(e,a,n,o)},writeFileSync:function(e,t,n){var o=(n=n||{}).fs||i,s=r(t,n);return o.writeFileSync(e,s,n)}};e.exports=s},18552:(e,t,n)=>{var i=n(10852)(n(55639),"DataView");e.exports=i},1989:(e,t,n)=>{var i=n(51789),r=n(80401),o=n(57667),s=n(21327),a=n(81866);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}c.prototype.clear=i,c.prototype.delete=r,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},38407:(e,t,n)=>{var i=n(27040),r=n(14125),o=n(82117),s=n(67518),a=n(54705);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}c.prototype.clear=i,c.prototype.delete=r,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},57071:(e,t,n)=>{var i=n(10852)(n(55639),"Map");e.exports=i},83369:(e,t,n)=>{var i=n(24785),r=n(11285),o=n(96e3),s=n(49916),a=n(95265);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}c.prototype.clear=i,c.prototype.delete=r,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},53818:(e,t,n)=>{var i=n(10852)(n(55639),"Promise");e.exports=i},58525:(e,t,n)=>{var i=n(10852)(n(55639),"Set");e.exports=i},46384:(e,t,n)=>{var i=n(38407),r=n(37465),o=n(63779),s=n(67599),a=n(44758),c=n(34309);function l(e){var t=this.__data__=new i(e);this.size=t.size}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=s,l.prototype.has=a,l.prototype.set=c,e.exports=l},62705:(e,t,n)=>{var i=n(55639).Symbol;e.exports=i},11149:(e,t,n)=>{var i=n(55639).Uint8Array;e.exports=i},70577:(e,t,n)=>{var i=n(10852)(n(55639),"WeakMap");e.exports=i},77412:e=>{e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}},34963:e=>{e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var s=e[n];t(s,n,e)&&(o[r++]=s)}return o}},14636:(e,t,n)=>{var i=n(22545),r=n(35694),o=n(1469),s=n(44144),a=n(65776),c=n(36719),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),d=!n&&r(e),u=!n&&!d&&s(e),p=!n&&!d&&!u&&c(e),h=n||d||u||p,f=h?i(e.length,String):[],m=f.length;for(var g in e)!t&&!l.call(e,g)||h&&("length"==g||u&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,m))||f.push(g);return f}},29932:e=>{e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}},62488:e=>{e.exports=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}},34865:(e,t,n)=>{var i=n(89465),r=n(77813),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var s=e[t];o.call(e,t)&&r(s,n)&&(void 0!==n||t in e)||i(e,t,n)}},18470:(e,t,n)=>{var i=n(77813);e.exports=function(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}},44037:(e,t,n)=>{var i=n(98363),r=n(3674);e.exports=function(e,t){return e&&i(t,r(t),e)}},63886:(e,t,n)=>{var i=n(98363),r=n(81704);e.exports=function(e,t){return e&&i(t,r(t),e)}},89465:(e,t,n)=>{var i=n(38777);e.exports=function(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},85990:(e,t,n)=>{var i=n(46384),r=n(77412),o=n(34865),s=n(44037),a=n(63886),c=n(64626),l=n(278),d=n(18805),u=n(1911),p=n(58234),h=n(46904),f=n(64160),m=n(43824),g=n(29148),v=n(38517),y=n(1469),b=n(44144),w=n(56688),_=n(13218),S=n(72928),C=n(3674),k=n(81704),E="[object Arguments]",x="[object Function]",T="[object Object]",P={};P[E]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P[T]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P[x]=P["[object WeakMap]"]=!1,e.exports=function e(t,n,I,D,R,O){var A,N=1&n,M=2&n,L=4&n;if(I&&(A=R?I(t,D,R,O):I(t)),void 0!==A)return A;if(!_(t))return t;var j=y(t);if(j){if(A=m(t),!N)return l(t,A)}else{var F=f(t),U=F==x||"[object GeneratorFunction]"==F;if(b(t))return c(t,N);if(F==T||F==E||U&&!R){if(A=M||U?{}:v(t),!N)return M?u(t,a(A,t)):d(t,s(A,t))}else{if(!P[F])return R?t:{};A=g(t,F,N)}}O||(O=new i);var q=O.get(t);if(q)return q;O.set(t,A),S(t)?t.forEach((function(i){A.add(e(i,n,I,i,t,O))})):w(t)&&t.forEach((function(i,r){A.set(r,e(i,n,I,r,t,O))}));var K=j?void 0:(L?M?h:p:M?k:C)(t);return r(K||t,(function(i,r){K&&(i=t[r=i]),o(A,r,e(i,n,I,r,t,O))})),A}},3118:(e,t,n)=>{var i=n(13218),r=Object.create,o=function(){function e(){}return function(t){if(!i(t))return{};if(r)return r(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},68866:(e,t,n)=>{var i=n(62488),r=n(1469);e.exports=function(e,t,n){var o=t(e);return r(e)?o:i(o,n(e))}},44239:(e,t,n)=>{var i=n(62705),r=n(89607),o=n(2333),s=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?r(e):o(e)}},9454:(e,t,n)=>{var i=n(44239),r=n(37005);e.exports=function(e){return r(e)&&"[object Arguments]"==i(e)}},25588:(e,t,n)=>{var i=n(64160),r=n(37005);e.exports=function(e){return r(e)&&"[object Map]"==i(e)}},28458:(e,t,n)=>{var i=n(23560),r=n(15346),o=n(13218),s=n(80346),a=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,d=c.toString,u=l.hasOwnProperty,p=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||r(e))&&(i(e)?p:a).test(s(e))}},11800:(e,t,n)=>{var i=n(64160),r=n(37005);e.exports=function(e){return r(e)&&"[object Set]"==i(e)}},38749:(e,t,n)=>{var i=n(44239),r=n(41780),o=n(37005),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&r(e.length)&&!!s[i(e)]}},280:(e,t,n)=>{var i=n(25726),r=n(86916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return r(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},10313:(e,t,n)=>{var i=n(13218),r=n(25726),o=n(33498),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return o(e);var t=r(e),n=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&n.push(a);return n}},22545:e=>{e.exports=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}},80531:(e,t,n)=>{var i=n(62705),r=n(29932),o=n(1469),s=n(33448),a=i?i.prototype:void 0,c=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return r(t,e)+"";if(s(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},27561:(e,t,n)=>{var i=n(67990),r=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(r,""):e}},7518:e=>{e.exports=function(e){return function(t){return e(t)}}},74318:(e,t,n)=>{var i=n(11149);e.exports=function(e){var t=new e.constructor(e.byteLength);return new i(t).set(new i(e)),t}},64626:(e,t,n)=>{e=n.nmd(e);var i=n(55639),r=t&&!t.nodeType&&t,o=r&&e&&!e.nodeType&&e,s=o&&o.exports===r?i.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,i=a?a(n):new e.constructor(n);return e.copy(i),i}},57157:(e,t,n)=>{var i=n(74318);e.exports=function(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},93147:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},40419:(e,t,n)=>{var i=n(62705),r=i?i.prototype:void 0,o=r?r.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},77133:(e,t,n)=>{var i=n(74318);e.exports=function(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},278:e=>{e.exports=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}},98363:(e,t,n)=>{var i=n(34865),r=n(89465);e.exports=function(e,t,n,o){var s=!n;n||(n={});for(var a=-1,c=t.length;++a<c;){var l=t[a],d=o?o(n[l],e[l],l,n,e):void 0;void 0===d&&(d=e[l]),s?r(n,l,d):i(n,l,d)}return n}},18805:(e,t,n)=>{var i=n(98363),r=n(99551);e.exports=function(e,t){return i(e,r(e),t)}},1911:(e,t,n)=>{var i=n(98363),r=n(51442);e.exports=function(e,t){return i(e,r(e),t)}},14429:(e,t,n)=>{var i=n(55639)["__core-js_shared__"];e.exports=i},38777:(e,t,n)=>{var i=n(10852),r=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=r},31957:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},58234:(e,t,n)=>{var i=n(68866),r=n(99551),o=n(3674);e.exports=function(e){return i(e,o,r)}},46904:(e,t,n)=>{var i=n(68866),r=n(51442),o=n(81704);e.exports=function(e){return i(e,o,r)}},45050:(e,t,n)=>{var i=n(37019);e.exports=function(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}},10852:(e,t,n)=>{var i=n(28458),r=n(47801);e.exports=function(e,t){var n=r(e,t);return i(n)?n:void 0}},85924:(e,t,n)=>{var i=n(5569)(Object.getPrototypeOf,Object);e.exports=i},89607:(e,t,n)=>{var i=n(62705),r=Object.prototype,o=r.hasOwnProperty,s=r.toString,a=i?i.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var i=!0}catch(e){}var r=s.call(e);return i&&(t?e[a]=n:delete e[a]),r}},99551:(e,t,n)=>{var i=n(34963),r=n(70479),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),i(s(e),(function(t){return o.call(e,t)})))}:r;e.exports=a},51442:(e,t,n)=>{var i=n(62488),r=n(85924),o=n(99551),s=n(70479),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)i(t,o(e)),e=r(e);return t}:s;e.exports=a},64160:(e,t,n)=>{var i=n(18552),r=n(57071),o=n(53818),s=n(58525),a=n(70577),c=n(44239),l=n(80346),d="[object Map]",u="[object Promise]",p="[object Set]",h="[object WeakMap]",f="[object DataView]",m=l(i),g=l(r),v=l(o),y=l(s),b=l(a),w=c;(i&&w(new i(new ArrayBuffer(1)))!=f||r&&w(new r)!=d||o&&w(o.resolve())!=u||s&&w(new s)!=p||a&&w(new a)!=h)&&(w=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,i=n?l(n):"";if(i)switch(i){case m:return f;case g:return d;case v:return u;case y:return p;case b:return h}return t}),e.exports=w},47801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},51789:(e,t,n)=>{var i=n(94536);e.exports=function(){this.__data__=i?i(null):{},this.size=0}},80401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},57667:(e,t,n)=>{var i=n(94536),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(i){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(t,e)?t[e]:void 0}},21327:(e,t,n)=>{var i=n(94536),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return i?void 0!==t[e]:r.call(t,e)}},81866:(e,t,n)=>{var i=n(94536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?"__lodash_hash_undefined__":t,this}},43824:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,i=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(i.index=e.index,i.input=e.input),i}},29148:(e,t,n)=>{var i=n(74318),r=n(57157),o=n(93147),s=n(40419),a=n(77133);e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return i(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return r(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,n);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return o(e);case"[object Symbol]":return s(e)}}},38517:(e,t,n)=>{var i=n(3118),r=n(85924),o=n(25726);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:i(r(e))}},65776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var i=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&t.test(e))&&e>-1&&e%1==0&&e<n}},37019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},15346:(e,t,n)=>{var i,r=n(14429),o=(i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";e.exports=function(e){return!!o&&o in e}},25726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},27040:e=>{e.exports=function(){this.__data__=[],this.size=0}},14125:(e,t,n)=>{var i=n(18470),r=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=i(t,e);return!(n<0||(n==t.length-1?t.pop():r.call(t,n,1),--this.size,0))}},82117:(e,t,n)=>{var i=n(18470);e.exports=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]}},67518:(e,t,n)=>{var i=n(18470);e.exports=function(e){return i(this.__data__,e)>-1}},54705:(e,t,n)=>{var i=n(18470);e.exports=function(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}},24785:(e,t,n)=>{var i=n(1989),r=n(38407),o=n(57071);e.exports=function(){this.size=0,this.__data__={hash:new i,map:new(o||r),string:new i}}},11285:(e,t,n)=>{var i=n(45050);e.exports=function(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}},96e3:(e,t,n)=>{var i=n(45050);e.exports=function(e){return i(this,e).get(e)}},49916:(e,t,n)=>{var i=n(45050);e.exports=function(e){return i(this,e).has(e)}},95265:(e,t,n)=>{var i=n(45050);e.exports=function(e,t){var n=i(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}},94536:(e,t,n)=>{var i=n(10852)(Object,"create");e.exports=i},86916:(e,t,n)=>{var i=n(5569)(Object.keys,Object);e.exports=i},33498:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},31167:(e,t,n)=>{e=n.nmd(e);var i=n(31957),r=t&&!t.nodeType&&t,o=r&&e&&!e.nodeType&&e,s=o&&o.exports===r&&i.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},55639:(e,t,n)=>{var i=n(31957),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();e.exports=o},37465:(e,t,n)=>{var i=n(38407);e.exports=function(){this.__data__=new i,this.size=0}},63779:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},67599:e=>{e.exports=function(e){return this.__data__.get(e)}},44758:e=>{e.exports=function(e){return this.__data__.has(e)}},34309:(e,t,n)=>{var i=n(38407),r=n(57071),o=n(83369);e.exports=function(e,t){var n=this.__data__;if(n instanceof i){var s=n.__data__;if(!r||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},80346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},67990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},50361:(e,t,n)=>{var i=n(85990);e.exports=function(e){return i(e,5)}},23279:(e,t,n)=>{var i=n(13218),r=n(7771),o=n(14841),s=Math.max,a=Math.min;e.exports=function(e,t,n){var c,l,d,u,p,h,f=0,m=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=c,i=l;return c=l=void 0,f=t,u=e.apply(i,n)}function b(e){var n=e-h;return void 0===h||n>=t||n<0||g&&e-f>=d}function w(){var e=r();if(b(e))return _(e);p=setTimeout(w,function(e){var n=t-(e-h);return g?a(n,d-(e-f)):n}(e))}function _(e){return p=void 0,v&&c?y(e):(c=l=void 0,u)}function S(){var e=r(),n=b(e);if(c=arguments,l=this,h=e,n){if(void 0===p)return function(e){return f=e,p=setTimeout(w,t),m?y(e):u}(h);if(g)return clearTimeout(p),p=setTimeout(w,t),y(h)}return void 0===p&&(p=setTimeout(w,t)),u}return t=o(t)||0,i(n)&&(m=!!n.leading,d=(g="maxWait"in n)?s(o(n.maxWait)||0,t):d,v="trailing"in n?!!n.trailing:v),S.cancel=function(){void 0!==p&&clearTimeout(p),f=0,c=h=l=p=void 0},S.flush=function(){return void 0===p?u:_(r())},S}},77813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},3522:(e,t,n)=>{var i=n(79833),r=/[\\^$.*+?()[\]{}|]/g,o=RegExp(r.source);e.exports=function(e){return(e=i(e))&&o.test(e)?e.replace(r,"\\$&"):e}},35694:(e,t,n)=>{var i=n(9454),r=n(37005),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,c=i(function(){return arguments}())?i:function(e){return r(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},1469:e=>{var t=Array.isArray;e.exports=t},98612:(e,t,n)=>{var i=n(23560),r=n(41780);e.exports=function(e){return null!=e&&r(e.length)&&!i(e)}},44144:(e,t,n)=>{e=n.nmd(e);var i=n(55639),r=n(95062),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o?i.Buffer:void 0,c=(a?a.isBuffer:void 0)||r;e.exports=c},23560:(e,t,n)=>{var i=n(44239),r=n(13218);e.exports=function(e){if(!r(e))return!1;var t=i(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},41780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},56688:(e,t,n)=>{var i=n(25588),r=n(7518),o=n(31167),s=o&&o.isMap,a=s?r(s):i;e.exports=a},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},72928:(e,t,n)=>{var i=n(11800),r=n(7518),o=n(31167),s=o&&o.isSet,a=s?r(s):i;e.exports=a},33448:(e,t,n)=>{var i=n(44239),r=n(37005);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==i(e)}},36719:(e,t,n)=>{var i=n(38749),r=n(7518),o=n(31167),s=o&&o.isTypedArray,a=s?r(s):i;e.exports=a},3674:(e,t,n)=>{var i=n(14636),r=n(280),o=n(98612);e.exports=function(e){return o(e)?i(e):r(e)}},81704:(e,t,n)=>{var i=n(14636),r=n(10313),o=n(98612);e.exports=function(e){return o(e)?i(e,!0):r(e)}},7771:(e,t,n)=>{var i=n(55639);e.exports=function(){return i.Date.now()}},70479:e=>{e.exports=function(){return[]}},95062:e=>{e.exports=function(){return!1}},14841:(e,t,n)=>{var i=n(27561),r=n(13218),o=n(33448),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=a.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):s.test(e)?NaN:+e}},79833:(e,t,n)=>{var i=n(80531);e.exports=function(e){return null==e?"":i(e)}},55234:(e,t,n)=>{e.exports=n(53765)},80983:(e,t,n)=>{"use strict";var i,r,o,s=n(55234),a=n(71017).extname,c=/^\s*([^;\s]*)(?:;|\s|$)/,l=/^text\//i;function d(e){if(!e||"string"!=typeof e)return!1;var t=c.exec(e),n=t&&s[t[1].toLowerCase()];return n&&n.charset?n.charset:!(!t||!l.test(t[1]))&&"UTF-8"}t.charset=d,t.charsets={lookup:d},t.contentType=function(e){if(!e||"string"!=typeof e)return!1;var n=-1===e.indexOf("/")?t.lookup(e):e;if(!n)return!1;if(-1===n.indexOf("charset")){var i=t.charset(n);i&&(n+="; charset="+i.toLowerCase())}return n},t.extension=function(e){if(!e||"string"!=typeof e)return!1;var n=c.exec(e),i=n&&t.extensions[n[1].toLowerCase()];return!(!i||!i.length)&&i[0]},t.extensions=Object.create(null),t.lookup=function(e){if(!e||"string"!=typeof e)return!1;var n=a("x."+e).toLowerCase().substr(1);return n&&t.types[n]||!1},t.types=Object.create(null),i=t.extensions,r=t.types,o=["nginx","apache",void 0,"iana"],Object.keys(s).forEach((function(e){var t=s[e],n=t.extensions;if(n&&n.length){i[e]=n;for(var a=0;a<n.length;a++){var c=n[a];if(r[c]){var l=o.indexOf(s[r[c]].source),d=o.indexOf(t.source);if("application/octet-stream"!==r[c]&&(l>d||l===d&&"application/"===r[c].substr(0,12)))continue}r[c]=e}}}))},91171:(e,t,n)=>{e.exports=p,p.Minimatch=h;var i=function(){try{return n(71017)}catch(e){}}()||{sep:"/"};p.sep=i.sep;var r=p.GLOBSTAR=h.GLOBSTAR={},o=n(3644),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",c=a+"*?",l="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{}),d=/\/+/;function u(e,t){t=t||{};var n={};return Object.keys(e).forEach((function(t){n[t]=e[t]})),Object.keys(t).forEach((function(e){n[e]=t[e]})),n}function p(e,t,n){return m(t),n||(n={}),!(!n.nocomment&&"#"===t.charAt(0))&&new h(t,n).match(e)}function h(e,t){if(!(this instanceof h))return new h(e,t);m(e),t||(t={}),e=e.trim(),t.allowWindowsEscape||"/"===i.sep||(e=e.split(i.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}function f(e,t){return t||(t=this instanceof h?this.options:{}),e=void 0===e?this.pattern:e,m(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:o(e)}p.filter=function(e,t){return t=t||{},function(n,i,r){return p(n,e,t)}},p.defaults=function(e){if(!e||"object"!=typeof e||!Object.keys(e).length)return p;var t=p,n=function(n,i,r){return t(n,i,u(e,r))};return(n.Minimatch=function(n,i){return new t.Minimatch(n,u(e,i))}).defaults=function(n){return t.defaults(u(e,n)).Minimatch},n.filter=function(n,i){return t.filter(n,u(e,i))},n.defaults=function(n){return t.defaults(u(e,n))},n.makeRe=function(n,i){return t.makeRe(n,u(e,i))},n.braceExpand=function(n,i){return t.braceExpand(n,u(e,i))},n.match=function(n,i,r){return t.match(n,i,u(e,r))},n},h.defaults=function(e){return p.defaults(e).Minimatch},h.prototype.debug=function(){},h.prototype.make=function(){var e=this.pattern,t=this.options;if(t.nocomment||"#"!==e.charAt(0))if(e){this.parseNegate();var n=this.globSet=this.braceExpand();t.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,n),n=this.globParts=n.map((function(e){return e.split(d)})),this.debug(this.pattern,n),n=n.map((function(e,t,n){return e.map(this.parse,this)}),this),this.debug(this.pattern,n),n=n.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,n),this.set=n}else this.empty=!0;else this.comment=!0},h.prototype.parseNegate=function(){var e=this.pattern,t=!1,n=0;if(!this.options.nonegate){for(var i=0,r=e.length;i<r&&"!"===e.charAt(i);i++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}},p.braceExpand=function(e,t){return f(e,t)},h.prototype.braceExpand=f;var m=function(e){if("string"!=typeof e)throw new TypeError("invalid pattern");if(e.length>65536)throw new TypeError("pattern is too long")};h.prototype.parse=function(e,t){m(e);var n=this.options;if("**"===e){if(!n.noglobstar)return r;e="*"}if(""===e)return"";var i,o="",d=!!n.nocase,u=!1,p=[],h=[],f=!1,v=-1,y=-1,b="."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",w=this;function _(){if(i){switch(i){case"*":o+=c,d=!0;break;case"?":o+=a,d=!0;break;default:o+="\\"+i}w.debug("clearStateChar %j %j",i,o),i=!1}}for(var S,C=0,k=e.length;C<k&&(S=e.charAt(C));C++)if(this.debug("%s\t%s %s %j",e,C,o,S),u&&l[S])o+="\\"+S,u=!1;else switch(S){case"/":return!1;case"\\":_(),u=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,C,o,S),f){this.debug("  in class"),"!"===S&&C===y+1&&(S="^"),o+=S;continue}w.debug("call clearStateChar %j",i),_(),i=S,n.noext&&_();continue;case"(":if(f){o+="(";continue}if(!i){o+="\\(";continue}p.push({type:i,start:C-1,reStart:o.length,open:s[i].open,close:s[i].close}),o+="!"===i?"(?:(?!(?:":"(?:",this.debug("plType %j %j",i,o),i=!1;continue;case")":if(f||!p.length){o+="\\)";continue}_(),d=!0;var E=p.pop();o+=E.close,"!"===E.type&&h.push(E),E.reEnd=o.length;continue;case"|":if(f||!p.length||u){o+="\\|",u=!1;continue}_(),o+="|";continue;case"[":if(_(),f){o+="\\"+S;continue}f=!0,y=C,v=o.length,o+=S;continue;case"]":if(C===y+1||!f){o+="\\"+S,u=!1;continue}var x=e.substring(y+1,C);try{RegExp("["+x+"]")}catch(e){var T=this.parse(x,g);o=o.substr(0,v)+"\\["+T[0]+"\\]",d=d||T[1],f=!1;continue}d=!0,f=!1,o+=S;continue;default:_(),u?u=!1:!l[S]||"^"===S&&f||(o+="\\"),o+=S}for(f&&(x=e.substr(y+1),T=this.parse(x,g),o=o.substr(0,v)+"\\["+T[0],d=d||T[1]),E=p.pop();E;E=p.pop()){var P=o.slice(E.reStart+E.open.length);this.debug("setting tail",o,E),P=P.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,n){return n||(n="\\"),t+t+n+"|"})),this.debug("tail=%j\n   %s",P,P,E,o);var I="*"===E.type?c:"?"===E.type?a:"\\"+E.type;d=!0,o=o.slice(0,E.reStart)+I+"\\("+P}_(),u&&(o+="\\\\");var D=!1;switch(o.charAt(0)){case"[":case".":case"(":D=!0}for(var R=h.length-1;R>-1;R--){var O=h[R],A=o.slice(0,O.reStart),N=o.slice(O.reStart,O.reEnd-8),M=o.slice(O.reEnd-8,O.reEnd),L=o.slice(O.reEnd);M+=L;var j=A.split("(").length-1,F=L;for(C=0;C<j;C++)F=F.replace(/\)[+*?]?/,"");var U="";""===(L=F)&&t!==g&&(U="$"),o=A+N+L+U+M}if(""!==o&&d&&(o="(?=.)"+o),D&&(o=b+o),t===g)return[o,d];if(!d)return e.replace(/\\(.)/g,"$1");var q=n.nocase?"i":"";try{var K=new RegExp("^"+o+"$",q)}catch(e){return new RegExp("$.")}return K._glob=e,K._src=o,K};var g={};p.makeRe=function(e,t){return new h(e,t||{}).makeRe()},h.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,n=t.noglobstar?c:t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",i=t.nocase?"i":"",o=e.map((function(e){return e.map((function(e){return e===r?n:"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e._src})).join("\\/")})).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,i)}catch(e){this.regexp=!1}return this.regexp},p.match=function(e,t,n){var i=new h(t,n=n||{});return e=e.filter((function(e){return i.match(e)})),i.options.nonull&&!e.length&&e.push(t),e},h.prototype.match=function(e,t){if(void 0===t&&(t=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var n=this.options;"/"!==i.sep&&(e=e.split(i.sep).join("/")),e=e.split(d),this.debug(this.pattern,"split",e);var r,o,s=this.set;for(this.debug(this.pattern,"set",s),o=e.length-1;o>=0&&!(r=e[o]);o--);for(o=0;o<s.length;o++){var a=s[o],c=e;if(n.matchBase&&1===a.length&&(c=[r]),this.matchOne(c,a,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate},h.prototype.matchOne=function(e,t,n){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var l,d=t[s],u=e[o];if(this.debug(t,d,u),!1===d)return!1;if(d===r){this.debug("GLOBSTAR",[t,d,u]);var p=o,h=s+1;if(h===c){for(this.debug("** at the end");o<a;o++)if("."===e[o]||".."===e[o]||!i.dot&&"."===e[o].charAt(0))return!1;return!0}for(;p<a;){var f=e[p];if(this.debug("\nglobstar while",e,p,t,h,f),this.matchOne(e.slice(p),t.slice(h),n))return this.debug("globstar found match!",p,a,f),!0;if("."===f||".."===f||!i.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,p,t,h);break}this.debug("globstar swallow a segment, and continue"),p++}return!(!n||(this.debug("\n>>> no match, partial?",e,p,t,h),p!==a))}if("string"==typeof d?(l=u===d,this.debug("string match",d,u,l)):(l=u.match(d),this.debug("pattern match",d,u,l)),!l)return!1}if(o===a&&s===c)return!0;if(o===a)return n;if(s===c)return o===a-1&&""===e[o];throw new Error("wtf?")}},96562:e=>{"use strict";function t(e){return"number"==typeof e||!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}function n(e,t){return"constructor"===t&&"function"==typeof e[t]||"__proto__"===t}e.exports=function(e,i){i||(i={});var r={bools:{},strings:{},unknownFn:null};"function"==typeof i.unknown&&(r.unknownFn=i.unknown),"boolean"==typeof i.boolean&&i.boolean?r.allBools=!0:[].concat(i.boolean).filter(Boolean).forEach((function(e){r.bools[e]=!0}));var o={};function s(e){return o[e].some((function(e){return r.bools[e]}))}Object.keys(i.alias||{}).forEach((function(e){o[e]=[].concat(i.alias[e]),o[e].forEach((function(t){o[t]=[e].concat(o[e].filter((function(e){return t!==e})))}))})),[].concat(i.string).filter(Boolean).forEach((function(e){r.strings[e]=!0,o[e]&&[].concat(o[e]).forEach((function(e){r.strings[e]=!0}))}));var a=i.default||{},c={_:[]};function l(e,t,i){for(var o=e,s=0;s<t.length-1;s++){var a=t[s];if(n(o,a))return;void 0===o[a]&&(o[a]={}),o[a]!==Object.prototype&&o[a]!==Number.prototype&&o[a]!==String.prototype||(o[a]={}),o[a]===Array.prototype&&(o[a]=[]),o=o[a]}var c=t[t.length-1];n(o,c)||(o!==Object.prototype&&o!==Number.prototype&&o!==String.prototype||(o={}),o===Array.prototype&&(o=[]),void 0===o[c]||r.bools[c]||"boolean"==typeof o[c]?o[c]=i:Array.isArray(o[c])?o[c].push(i):o[c]=[o[c],i])}function d(e,n,i){if(!i||!r.unknownFn||function(e,t){return r.allBools&&/^--[^=]+$/.test(t)||r.strings[e]||r.bools[e]||o[e]}(e,i)||!1!==r.unknownFn(i)){var s=!r.strings[e]&&t(n)?Number(n):n;l(c,e.split("."),s),(o[e]||[]).forEach((function(e){l(c,e.split("."),s)}))}}Object.keys(r.bools).forEach((function(e){d(e,void 0!==a[e]&&a[e])}));var u=[];-1!==e.indexOf("--")&&(u=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var p=0;p<e.length;p++){var h,f,m=e[p];if(/^--.+=/.test(m)){var g=m.match(/^--([^=]+)=([\s\S]*)$/);h=g[1];var v=g[2];r.bools[h]&&(v="false"!==v),d(h,v,m)}else if(/^--no-.+/.test(m))d(h=m.match(/^--no-(.+)/)[1],!1,m);else if(/^--.+/.test(m))h=m.match(/^--(.+)/)[1],void 0===(f=e[p+1])||/^(-|--)[^-]/.test(f)||r.bools[h]||r.allBools||o[h]&&s(h)?/^(true|false)$/.test(f)?(d(h,"true"===f,m),p+=1):d(h,!r.strings[h]||"",m):(d(h,f,m),p+=1);else if(/^-[^-]+/.test(m)){for(var y=m.slice(1,-1).split(""),b=!1,w=0;w<y.length;w++)if("-"!==(f=m.slice(w+2))){if(/[A-Za-z]/.test(y[w])&&"="===f[0]){d(y[w],f.slice(1),m),b=!0;break}if(/[A-Za-z]/.test(y[w])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(f)){d(y[w],f,m),b=!0;break}if(y[w+1]&&y[w+1].match(/\W/)){d(y[w],m.slice(w+2),m),b=!0;break}d(y[w],!r.strings[y[w]]||"",m)}else d(y[w],f,m);h=m.slice(-1)[0],b||"-"===h||(!e[p+1]||/^(-|--)[^-]/.test(e[p+1])||r.bools[h]||o[h]&&s(h)?e[p+1]&&/^(true|false)$/.test(e[p+1])?(d(h,"true"===e[p+1],m),p+=1):d(h,!r.strings[h]||"",m):(d(h,e[p+1],m),p+=1))}else if(r.unknownFn&&!1===r.unknownFn(m)||c._.push(r.strings._||!t(m)?m:Number(m)),i.stopEarly){c._.push.apply(c._,e.slice(p+1));break}}return Object.keys(a).forEach((function(e){var t,n,i;t=c,n=e.split("."),i=t,n.slice(0,-1).forEach((function(e){i=i[e]||{}})),n[n.length-1]in i||(l(c,e.split("."),a[e]),(o[e]||[]).forEach((function(t){l(c,t.split("."),a[e])})))})),i["--"]?c["--"]=u.slice():u.forEach((function(e){c._.push(e)})),c}},57824:e=>{var t=1e3,n=60*t,i=60*n,r=24*i;function o(e,t,n,i){var r=t>=1.5*n;return Math.round(e/n)+" "+i+(r?"s":"")}e.exports=function(e,s){s=s||{};var a,c,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*r;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===l&&isFinite(e))return s.long?(a=e,(c=Math.abs(a))>=r?o(a,c,r,"day"):c>=i?o(a,c,i,"hour"):c>=n?o(a,c,n,"minute"):c>=t?o(a,c,t,"second"):a+" ms"):function(e){var o=Math.abs(e);return o>=r?Math.round(e/r)+"d":o>=i?Math.round(e/i)+"h":o>=n?Math.round(e/n)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},31515:(e,t,n)=>{"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(12781)),o=i(n(13685)),s=i(n(57310)),a=i(n(74831)),c=i(n(95687)),l=i(n(59796));const d=r.Readable,u=Symbol("buffer"),p=Symbol("type");class h{constructor(){this[p]="";const e=arguments[0],t=arguments[1],n=[];let i=0;if(e){const t=e,r=Number(t.length);for(let e=0;e<r;e++){const r=t[e];let o;o=r instanceof Buffer?r:ArrayBuffer.isView(r)?Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof ArrayBuffer?Buffer.from(r):r instanceof h?r[u]:Buffer.from("string"==typeof r?r:String(r)),i+=o.length,n.push(o)}}this[u]=Buffer.concat(n);let r=t&&void 0!==t.type&&String(t.type).toLowerCase();r&&!/[^\u0020-\u007E]/.test(r)&&(this[p]=r)}get size(){return this[u].length}get type(){return this[p]}text(){return Promise.resolve(this[u].toString())}arrayBuffer(){const e=this[u],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new d;return e._read=function(){},e.push(this[u]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],n=arguments[1];let i,r;i=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),r=void 0===n?e:n<0?Math.max(e+n,0):Math.min(n,e);const o=Math.max(r-i,0),s=this[u].slice(i,i+o),a=new h([],{type:arguments[2]});return a[u]=s,a}}function f(e,t,n){Error.call(this,e),this.message=e,this.type=t,n&&(this.code=this.errno=n.code),Error.captureStackTrace(this,this.constructor)}let m;Object.defineProperties(h.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(h.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f.prototype.name="FetchError";try{m=n(35769).O}catch(e){}const g=Symbol("Body internals"),v=r.PassThrough;function y(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.size;let o=void 0===i?0:i;var s=n.timeout;let a=void 0===s?0:s;null==e?e=null:w(e)?e=Buffer.from(e.toString()):_(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof r||(e=Buffer.from(String(e)))),this[g]={body:e,disturbed:!1,error:null},this.size=o,this.timeout=a,e instanceof r&&e.on("error",(function(e){const n="AbortError"===e.name?e:new f(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[g].error=n}))}function b(){var e=this;if(this[g].disturbed)return y.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[g].disturbed=!0,this[g].error)return y.Promise.reject(this[g].error);let t=this.body;if(null===t)return y.Promise.resolve(Buffer.alloc(0));if(_(t)&&(t=t.stream()),Buffer.isBuffer(t))return y.Promise.resolve(t);if(!(t instanceof r))return y.Promise.resolve(Buffer.alloc(0));let n=[],i=0,o=!1;return new y.Promise((function(r,s){let a;e.timeout&&(a=setTimeout((function(){o=!0,s(new f(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),t.on("error",(function(t){"AbortError"===t.name?(o=!0,s(t)):s(new f(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),t.on("data",(function(t){if(!o&&null!==t){if(e.size&&i+t.length>e.size)return o=!0,void s(new f(`content size at ${e.url} over limit: ${e.size}`,"max-size"));i+=t.length,n.push(t)}})),t.on("end",(function(){if(!o){clearTimeout(a);try{r(Buffer.concat(n,i))}catch(t){s(new f(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}}))}))}function w(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function _(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function S(e){let t,n,i=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof r&&"function"!=typeof i.getBoundary&&(t=new v,n=new v,i.pipe(t),i.pipe(n),e[g].body=t,i=n),i}function C(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":w(e)?"application/x-www-form-urlencoded;charset=UTF-8":_(e)?e.type||null:Buffer.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?`multipart/form-data;boundary=${e.getBoundary()}`:e instanceof r?null:"text/plain;charset=UTF-8"}function k(e){const t=e.body;return null===t?0:_(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}y.prototype={get body(){return this[g].body},get bodyUsed(){return this[g].disturbed},arrayBuffer(){return b.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return b.call(this).then((function(t){return Object.assign(new h([],{type:e.toLowerCase()}),{[u]:t})}))},json(){var e=this;return b.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(t){return y.Promise.reject(new f(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}}))},text(){return b.call(this).then((function(e){return e.toString()}))},buffer(){return b.call(this)},textConverted(){var e=this;return b.call(this).then((function(t){return function(e,t){if("function"!=typeof m)throw new Error("The package `encoding` must be installed to use the textConverted() function");const n=t.get("content-type");let i,r,o="utf-8";return n&&(i=/charset=([^;]*)/i.exec(n)),r=e.slice(0,1024).toString(),!i&&r&&(i=/<meta.+?charset=(['"])(.+?)\1/i.exec(r)),!i&&r&&(i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(r),i||(i=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(r),i&&i.pop()),i&&(i=/charset=(.*)/i.exec(i.pop()))),!i&&r&&(i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(r)),i&&(o=i.pop(),"gb2312"!==o&&"gbk"!==o||(o="gb18030")),m(e,"UTF-8",o).toString()}(t,e.headers)}))}},Object.defineProperties(y.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),y.mixIn=function(e){for(const t of Object.getOwnPropertyNames(y.prototype))if(!(t in e)){const n=Object.getOwnPropertyDescriptor(y.prototype,t);Object.defineProperty(e,t,n)}},y.Promise=global.Promise;const E=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,x=/[^\t\x20-\x7e\x80-\xff]/;function T(e){if(e=`${e}`,E.test(e)||""===e)throw new TypeError(`${e} is not a legal HTTP header name`)}function P(e){if(e=`${e}`,x.test(e))throw new TypeError(`${e} is not a legal HTTP header value`)}function I(e,t){t=t.toLowerCase();for(const n in e)if(n.toLowerCase()===t)return n}const D=Symbol("map");class R{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[D]=Object.create(null),e instanceof R){const t=e.raw(),n=Object.keys(t);for(const e of n)for(const n of t[e])this.append(e,n)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const n=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");n.push(Array.from(t))}for(const e of n){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const n=e[t];this.append(t,n)}}}}get(e){T(e=`${e}`);const t=I(this[D],e);return void 0===t?null:this[D][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=O(this),i=0;for(;i<n.length;){var r=n[i];const o=r[0],s=r[1];e.call(t,s,o,this),n=O(this),i++}}set(e,t){t=`${t}`,T(e=`${e}`),P(t);const n=I(this[D],e);this[D][void 0!==n?n:e]=[t]}append(e,t){t=`${t}`,T(e=`${e}`),P(t);const n=I(this[D],e);void 0!==n?this[D][n].push(t):this[D][e]=[t]}has(e){return T(e=`${e}`),void 0!==I(this[D],e)}delete(e){T(e=`${e}`);const t=I(this[D],e);void 0!==t&&delete this[D][t]}raw(){return this[D]}keys(){return N(this,"key")}values(){return N(this,"value")}[Symbol.iterator](){return N(this,"key+value")}}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";return Object.keys(e[D]).sort().map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[D][t].join(", ")}:function(t){return[t.toLowerCase(),e[D][t].join(", ")]})}R.prototype.entries=R.prototype[Symbol.iterator],Object.defineProperty(R.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(R.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const A=Symbol("internal");function N(e,t){const n=Object.create(M);return n[A]={target:e,kind:t,index:0},n}const M=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==M)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[A];const t=e.target,n=e.kind,i=e.index,r=O(t,n);return i>=r.length?{value:void 0,done:!0}:(this[A].index=i+1,{value:r[i],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function L(e){const t=Object.assign({__proto__:null},e[D]),n=I(e[D],"Host");return void 0!==n&&(t[n]=t[n][0]),t}Object.defineProperty(M,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const j=Symbol("Response internals"),F=o.STATUS_CODES;class U{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y.call(this,e,t);const n=t.status||200,i=new R(t.headers);if(null!=e&&!i.has("Content-Type")){const t=C(e);t&&i.append("Content-Type",t)}this[j]={url:t.url,status:n,statusText:t.statusText||F[n],headers:i,counter:t.counter}}get url(){return this[j].url||""}get status(){return this[j].status}get ok(){return this[j].status>=200&&this[j].status<300}get redirected(){return this[j].counter>0}get statusText(){return this[j].statusText}get headers(){return this[j].headers}clone(){return new U(S(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}y.mixIn(U.prototype),Object.defineProperties(U.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(U.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const q=Symbol("Request internals"),K=s.URL||a.URL,V=s.parse,W=s.format;function $(e){return/^[a-zA-Z][a-zA-Z\d+\-.]*:/.exec(e)&&(e=new K(e).toString()),V(e)}const B="destroy"in r.Readable.prototype;function H(e){return"object"==typeof e&&"object"==typeof e[q]}class z{constructor(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};H(e)?t=$(e.url):(t=e&&e.href?$(e.href):$(`${e}`),e={});let i=n.method||e.method||"GET";if(i=i.toUpperCase(),(null!=n.body||H(e)&&null!==e.body)&&("GET"===i||"HEAD"===i))throw new TypeError("Request with GET/HEAD method cannot have body");let r=null!=n.body?n.body:H(e)&&null!==e.body?S(e):null;y.call(this,r,{timeout:n.timeout||e.timeout||0,size:n.size||e.size||0});const o=new R(n.headers||e.headers||{});if(null!=r&&!o.has("Content-Type")){const e=C(r);e&&o.append("Content-Type",e)}let s=H(e)?e.signal:null;if("signal"in n&&(s=n.signal),null!=s&&!function(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}(s))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[q]={method:i,redirect:n.redirect||e.redirect||"follow",headers:o,parsedURL:t,signal:s},this.follow=void 0!==n.follow?n.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==n.compress?n.compress:void 0===e.compress||e.compress,this.counter=n.counter||e.counter||0,this.agent=n.agent||e.agent}get method(){return this[q].method}get url(){return W(this[q].parsedURL)}get headers(){return this[q].headers}get redirect(){return this[q].redirect}get signal(){return this[q].signal}clone(){return new z(this)}}function J(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}y.mixIn(z.prototype),Object.defineProperty(z.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(z.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),J.prototype=Object.create(Error.prototype),J.prototype.constructor=J,J.prototype.name="AbortError";const G=s.URL||a.URL,Y=r.PassThrough;function Q(e,t){if(!Q.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return y.Promise=Q.Promise,new Q.Promise((function(n,i){const s=new z(e,t),a=function(e){const t=e[q].parsedURL,n=new R(e[q].headers);if(n.has("Accept")||n.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof r.Readable&&!B)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let i=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(i="0"),null!=e.body){const t=k(e);"number"==typeof t&&(i=String(t))}i&&n.set("Content-Length",i),n.has("User-Agent")||n.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip,deflate");let o=e.agent;return"function"==typeof o&&(o=o(t)),n.has("Connection")||o||n.set("Connection","close"),Object.assign({},t,{method:e.method,headers:L(n),agent:o})}(s),d=("https:"===a.protocol?c:o).request,u=s.signal;let p=null;const h=function(){let e=new J("The user aborted a request.");i(e),s.body&&s.body instanceof r.Readable&&s.body.destroy(e),p&&p.body&&p.body.emit("error",e)};if(u&&u.aborted)return void h();const m=function(){h(),y()},g=d(a);let v;function y(){g.abort(),u&&u.removeEventListener("abort",m),clearTimeout(v)}u&&u.addEventListener("abort",m),s.timeout&&g.once("socket",(function(e){v=setTimeout((function(){i(new f(`network timeout at: ${s.url}`,"request-timeout")),y()}),s.timeout)})),g.on("error",(function(e){i(new f(`request to ${s.url} failed, reason: ${e.message}`,"system",e)),y()})),g.on("response",(function(e){clearTimeout(v);const t=function(e){const t=new R;for(const n of Object.keys(e))if(!E.test(n))if(Array.isArray(e[n]))for(const i of e[n])x.test(i)||(void 0===t[D][n]?t[D][n]=[i]:t[D][n].push(i));else x.test(e[n])||(t[D][n]=[e[n]]);return t}(e.headers);if(Q.isRedirect(e.statusCode)){const r=t.get("Location");let o=null;try{o=null===r?null:new G(r,s.url).toString()}catch(e){if("manual"!==s.redirect)return i(new f(`uri requested responds with an invalid redirect URL: ${r}`,"invalid-redirect")),void y()}switch(s.redirect){case"error":return i(new f(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),void y();case"manual":if(null!==o)try{t.set("Location",o)}catch(e){i(e)}break;case"follow":if(null===o)break;if(s.counter>=s.follow)return i(new f(`maximum redirect reached at: ${s.url}`,"max-redirect")),void y();const r={headers:new R(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:s.body,signal:s.signal,timeout:s.timeout,size:s.size};if(!function(e,t){const n=new G(t).hostname,i=new G(e).hostname;return n===i||"."===n[n.length-i.length-1]&&n.endsWith(i)}(s.url,o))for(const e of["authorization","www-authenticate","cookie","cookie2"])r.headers.delete(e);return 303!==e.statusCode&&s.body&&null===k(s)?(i(new f("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void y()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==s.method)||(r.method="GET",r.body=void 0,r.headers.delete("content-length")),n(Q(new z(o,r))),void y())}}e.once("end",(function(){u&&u.removeEventListener("abort",m)}));let r=e.pipe(new Y);const o={url:s.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:s.size,timeout:s.timeout,counter:s.counter},a=t.get("Content-Encoding");if(!s.compress||"HEAD"===s.method||null===a||204===e.statusCode||304===e.statusCode)return p=new U(r,o),void n(p);const c={flush:l.Z_SYNC_FLUSH,finishFlush:l.Z_SYNC_FLUSH};if("gzip"==a||"x-gzip"==a)return r=r.pipe(l.createGunzip(c)),p=new U(r,o),void n(p);if("deflate"!=a&&"x-deflate"!=a){if("br"==a&&"function"==typeof l.createBrotliDecompress)return r=r.pipe(l.createBrotliDecompress()),p=new U(r,o),void n(p);p=new U(r,o),n(p)}else e.pipe(new Y).once("data",(function(e){r=8==(15&e[0])?r.pipe(l.createInflate()):r.pipe(l.createInflateRaw()),p=new U(r,o),n(p)}))})),function(e,t){const n=t.body;null===n?e.end():_(n)?n.stream().pipe(e):Buffer.isBuffer(n)?(e.write(n),e.end()):n.pipe(e)}(g,s)}))}Q.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},Q.Promise=global.Promise,e.exports=t=Q,Object.defineProperty(t,"__esModule",{value:!0}),t.default=t,t.Headers=R,t.Request=z,t.Response=U,t.FetchError=f},5658:(e,t,n)=>{"use strict";var i=n(85477),r=n(1907),o={TRANSITIONAL:0,NONTRANSITIONAL:1};function s(e){return e.split("\0").map((function(e){return e.normalize("NFC")})).join("\0")}function a(e){for(var t=0,n=r.length-1;t<=n;){var i=Math.floor((t+n)/2),o=r[i];if(o[0][0]<=e&&o[0][1]>=e)return o;o[0][0]>e?n=i-1:t=i+1}return null}var c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function l(e){return e.replace(c,"_").length}var d=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E4-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2D]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDE2C-\uDE37\uDEDF-\uDEEA\uDF01-\uDF03\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDE30-\uDE40\uDEAB-\uDEB7]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF51-\uDF7E\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD83A[\uDCD0-\uDCD6]|\uDB40[\uDD00-\uDDEF]/;function u(e,t){"xn--"===e.substr(0,4)&&(e=i.toUnicode(e),o.NONTRANSITIONAL);var n=!1;(s(e)!==e||"-"===e[3]&&"-"===e[4]||"-"===e[0]||"-"===e[e.length-1]||-1!==e.indexOf(".")||0===e.search(d))&&(n=!0);for(var r=l(e),c=0;c<r;++c){var u=a(e.codePointAt(c));if(p===o.TRANSITIONAL&&"valid"!==u[1]||p===o.NONTRANSITIONAL&&"valid"!==u[1]&&"deviation"!==u[1]){n=!0;break}}return{label:e,error:n}}function p(e,t,n){var i=function(e,t,n){for(var i=!1,r="",s=l(e),c=0;c<s;++c){var d=e.codePointAt(c),u=a(d);switch(u[1]){case"disallowed":i=!0,r+=String.fromCodePoint(d);break;case"ignored":break;case"mapped":r+=String.fromCodePoint.apply(String,u[2]);break;case"deviation":n===o.TRANSITIONAL?r+=String.fromCodePoint.apply(String,u[2]):r+=String.fromCodePoint(d);break;case"valid":r+=String.fromCodePoint(d);break;case"disallowed_STD3_mapped":t?(i=!0,r+=String.fromCodePoint(d)):r+=String.fromCodePoint.apply(String,u[2]);break;case"disallowed_STD3_valid":t&&(i=!0),r+=String.fromCodePoint(d)}}return{string:r,error:i}}(e,t,n);i.string=s(i.string);for(var r=i.string.split("."),c=0;c<r.length;++c)try{var d=u(r[c]);r[c]=d.label,i.error=i.error||d.error}catch(e){i.error=!0}return{string:r.join("."),error:i.error}}e.exports.toASCII=function(e,t,n,r){var o=p(e,t,n),s=o.string.split(".");if(s=s.map((function(e){try{return i.toASCII(e)}catch(t){return o.error=!0,e}})),r){var a=s.slice(0,s.length-1).join(".").length;(a.length>253||0===a.length)&&(o.error=!0);for(var c=0;c<s.length;++c)if(s.length>63||0===s.length){o.error=!0;break}}return o.error?null:s.join(".")},e.exports.toUnicode=function(e,t){var n=p(e,t,o.NONTRANSITIONAL);return{domain:n.string,error:n.error}},e.exports.PROCESSING_OPTIONS=o},28808:e=>{"use strict";var t={};function n(e){return e<0?-1:1}function i(e,t){t.unsigned||--e;const i=t.unsigned?0:-Math.pow(2,e),r=Math.pow(2,e)-1,o=t.moduloBitLength?Math.pow(2,t.moduloBitLength):Math.pow(2,e),s=t.moduloBitLength?Math.pow(2,t.moduloBitLength-1):Math.pow(2,e-1);return function(e,a){a||(a={});let c=+e;if(a.enforceRange){if(!Number.isFinite(c))throw new TypeError("Argument is not a finite number");if(c=n(c)*Math.floor(Math.abs(c)),c<i||c>r)throw new TypeError("Argument is not in byte range");return c}if(!isNaN(c)&&a.clamp)return c=function(e){return e%1==.5&&0==(1&e)?Math.floor(e):Math.round(e)}(c),c<i&&(c=i),c>r&&(c=r),c;if(!Number.isFinite(c)||0===c)return 0;if(c=n(c)*Math.floor(Math.abs(c)),c%=o,!t.unsigned&&c>=s)return c-o;if(t.unsigned)if(c<0)c+=o;else if(-0===c)return 0;return c}}e.exports=t,t.void=function(){},t.boolean=function(e){return!!e},t.byte=i(8,{unsigned:!1}),t.octet=i(8,{unsigned:!0}),t.short=i(16,{unsigned:!1}),t["unsigned short"]=i(16,{unsigned:!0}),t.long=i(32,{unsigned:!1}),t["unsigned long"]=i(32,{unsigned:!0}),t["long long"]=i(32,{unsigned:!1,moduloBitLength:64}),t["unsigned long long"]=i(32,{unsigned:!0,moduloBitLength:64}),t.double=function(e){const t=+e;if(!Number.isFinite(t))throw new TypeError("Argument is not a finite floating-point value");return t},t["unrestricted double"]=function(e){const t=+e;if(isNaN(t))throw new TypeError("Argument is NaN");return t},t.float=t.double,t["unrestricted float"]=t["unrestricted double"],t.DOMString=function(e,t){return t||(t={}),t.treatNullAsEmptyString&&null===e?"":String(e)},t.ByteString=function(e,t){const n=String(e);let i;for(let e=0;void 0!==(i=n.codePointAt(e));++e)if(i>255)throw new TypeError("Argument is not a valid bytestring");return n},t.USVString=function(e){const t=String(e),n=t.length,i=[];for(let e=0;e<n;++e){const r=t.charCodeAt(e);if(r<55296||r>57343)i.push(String.fromCodePoint(r));else if(56320<=r&&r<=57343)i.push(String.fromCodePoint(65533));else if(e===n-1)i.push(String.fromCodePoint(65533));else{const n=t.charCodeAt(e+1);if(56320<=n&&n<=57343){const t=1023&r,o=1023&n;i.push(String.fromCodePoint(65536+1024*t+o)),++e}else i.push(String.fromCodePoint(65533))}}return i.join("")},t.Date=function(e,t){if(!(e instanceof Date))throw new TypeError("Argument is not a Date object");if(!isNaN(e))return e},t.RegExp=function(e,t){return e instanceof RegExp||(e=new RegExp(e)),e}},1167:(e,t,n)=>{"use strict";const i=n(70024);t.implementation=class{constructor(e){const t=e[0],n=e[1];let r=null;if(void 0!==n&&(r=i.basicURLParse(n),"failure"===r))throw new TypeError("Invalid base URL");const o=i.basicURLParse(t,{baseURL:r});if("failure"===o)throw new TypeError("Invalid URL");this._url=o}get href(){return i.serializeURL(this._url)}set href(e){const t=i.basicURLParse(e);if("failure"===t)throw new TypeError("Invalid URL");this._url=t}get origin(){return i.serializeURLOrigin(this._url)}get protocol(){return this._url.scheme+":"}set protocol(e){i.basicURLParse(e+":",{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(e){i.cannotHaveAUsernamePasswordPort(this._url)||i.setTheUsername(this._url,e)}get password(){return this._url.password}set password(e){i.cannotHaveAUsernamePasswordPort(this._url)||i.setThePassword(this._url,e)}get host(){const e=this._url;return null===e.host?"":null===e.port?i.serializeHost(e.host):i.serializeHost(e.host)+":"+i.serializeInteger(e.port)}set host(e){this._url.cannotBeABaseURL||i.basicURLParse(e,{url:this._url,stateOverride:"host"})}get hostname(){return null===this._url.host?"":i.serializeHost(this._url.host)}set hostname(e){this._url.cannotBeABaseURL||i.basicURLParse(e,{url:this._url,stateOverride:"hostname"})}get port(){return null===this._url.port?"":i.serializeInteger(this._url.port)}set port(e){i.cannotHaveAUsernamePasswordPort(this._url)||(""===e?this._url.port=null:i.basicURLParse(e,{url:this._url,stateOverride:"port"}))}get pathname(){return this._url.cannotBeABaseURL?this._url.path[0]:0===this._url.path.length?"":"/"+this._url.path.join("/")}set pathname(e){this._url.cannotBeABaseURL||(this._url.path=[],i.basicURLParse(e,{url:this._url,stateOverride:"path start"}))}get search(){return null===this._url.query||""===this._url.query?"":"?"+this._url.query}set search(e){const t=this._url;if(""===e)return void(t.query=null);const n="?"===e[0]?e.substring(1):e;t.query="",i.basicURLParse(n,{url:t,stateOverride:"query"})}get hash(){return null===this._url.fragment||""===this._url.fragment?"":"#"+this._url.fragment}set hash(e){if(""===e)return void(this._url.fragment=null);const t="#"===e[0]?e.substring(1):e;this._url.fragment="",i.basicURLParse(t,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}},29221:(e,t,n)=>{"use strict";const i=n(28808),r=n(32625),o=n(1167),s=r.implSymbol;function a(t){if(!this||this[s]||!(this instanceof a))throw new TypeError("Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");if(arguments.length<1)throw new TypeError("Failed to construct 'URL': 1 argument required, but only "+arguments.length+" present.");const n=[];for(let e=0;e<arguments.length&&e<2;++e)n[e]=arguments[e];n[0]=i.USVString(n[0]),void 0!==n[1]&&(n[1]=i.USVString(n[1])),e.exports.setup(this,n)}a.prototype.toJSON=function(){if(!this||!e.exports.is(this))throw new TypeError("Illegal invocation");const t=[];for(let e=0;e<arguments.length&&e<0;++e)t[e]=arguments[e];return this[s].toJSON.apply(this[s],t)},Object.defineProperty(a.prototype,"href",{get(){return this[s].href},set(e){e=i.USVString(e),this[s].href=e},enumerable:!0,configurable:!0}),a.prototype.toString=function(){if(!this||!e.exports.is(this))throw new TypeError("Illegal invocation");return this.href},Object.defineProperty(a.prototype,"origin",{get(){return this[s].origin},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"protocol",{get(){return this[s].protocol},set(e){e=i.USVString(e),this[s].protocol=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"username",{get(){return this[s].username},set(e){e=i.USVString(e),this[s].username=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"password",{get(){return this[s].password},set(e){e=i.USVString(e),this[s].password=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"host",{get(){return this[s].host},set(e){e=i.USVString(e),this[s].host=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hostname",{get(){return this[s].hostname},set(e){e=i.USVString(e),this[s].hostname=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"port",{get(){return this[s].port},set(e){e=i.USVString(e),this[s].port=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pathname",{get(){return this[s].pathname},set(e){e=i.USVString(e),this[s].pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"search",{get(){return this[s].search},set(e){e=i.USVString(e),this[s].search=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hash",{get(){return this[s].hash},set(e){e=i.USVString(e),this[s].hash=e},enumerable:!0,configurable:!0}),e.exports={is:e=>!!e&&e[s]instanceof o.implementation,create(e,t){let n=Object.create(a.prototype);return this.setup(n,e,t),n},setup(e,t,n){n||(n={}),n.wrapper=e,e[s]=new o.implementation(t,n),e[s][r.wrapperSymbol]=e},interface:a,expose:{Window:{URL:a},Worker:{URL:a}}}},74831:(e,t,n)=>{"use strict";t.URL=n(29221).interface,t.serializeURL=n(70024).serializeURL,t.serializeURLOrigin=n(70024).serializeURLOrigin,t.basicURLParse=n(70024).basicURLParse,t.setTheUsername=n(70024).setTheUsername,t.setThePassword=n(70024).setThePassword,t.serializeHost=n(70024).serializeHost,t.serializeInteger=n(70024).serializeInteger,t.parseURL=n(70024).parseURL},70024:(e,t,n)=>{"use strict";const i=n(85477),r=n(5658),o={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},s=Symbol("failure");function a(e){return i.ucs2.decode(e).length}function c(e,t){const n=e[t];return isNaN(n)?void 0:String.fromCodePoint(n)}function l(e){return e>=48&&e<=57}function d(e){return e>=65&&e<=90||e>=97&&e<=122}function u(e){return l(e)||e>=65&&e<=70||e>=97&&e<=102}function p(e){return"."===e||"%2e"===e.toLowerCase()}function h(e){return 2===e.length&&d(e.codePointAt(0))&&(":"===e[1]||"|"===e[1])}function f(e){return void 0!==o[e]}function m(e){return f(e.scheme)}function g(e){let t=e.toString(16).toUpperCase();return 1===t.length&&(t="0"+t),"%"+t}function v(e){return e<=31||e>126}const y=new Set([32,34,35,60,62,63,96,123,125]);function b(e){return v(e)||y.has(e)}const w=new Set([47,58,59,61,64,91,92,93,94,124]);function _(e){return b(e)||w.has(e)}function S(e,t){const n=String.fromCodePoint(e);return t(e)?function(e){const t=new Buffer(e);let n="";for(let e=0;e<t.length;++e)n+=g(t[e]);return n}(n):n}function C(e){let t=10;return e.length>=2&&"0"===e.charAt(0)&&"x"===e.charAt(1).toLowerCase()?(e=e.substring(2),t=16):e.length>=2&&"0"===e.charAt(0)&&(e=e.substring(1),t=8),""===e?0:(10===t?/[^0-9]/:16===t?/[^0-9A-Fa-f]/:/[^0-7]/).test(e)?s:parseInt(e,t)}function k(e,t){if("["===e[0])return"]"!==e[e.length-1]?s:function(e){const t=[0,0,0,0,0,0,0,0];let n=0,r=null,o=0;if(58===(e=i.ucs2.decode(e))[o]){if(58!==e[o+1])return s;o+=2,++n,r=n}for(;o<e.length;){if(8===n)return s;if(58===e[o]){if(null!==r)return s;++o,++n,r=n;continue}let i=0,a=0;for(;a<4&&u(e[o]);)i=16*i+parseInt(c(e,o),16),++o,++a;if(46===e[o]){if(0===a)return s;if(o-=a,n>6)return s;let i=0;for(;void 0!==e[o];){let r=null;if(i>0){if(!(46===e[o]&&i<4))return s;++o}if(!l(e[o]))return s;for(;l(e[o]);){const t=parseInt(c(e,o));if(null===r)r=t;else{if(0===r)return s;r=10*r+t}if(r>255)return s;++o}t[n]=256*t[n]+r,++i,2!==i&&4!==i||++n}if(4!==i)return s;break}if(58===e[o]){if(++o,void 0===e[o])return s}else if(void 0!==e[o])return s;t[n]=i,++n}if(null!==r){let e=n-r;for(n=7;0!==n&&e>0;){const i=t[r+e-1];t[r+e-1]=t[n],t[n]=i,--n,--e}}else if(null===r&&8!==n)return s;return t}(e.substring(1,e.length-1));if(!t)return function(e){if(-1!==e.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|\?|@|\[|\\|\]/))return s;let t="";const n=i.ucs2.decode(e);for(let e=0;e<n.length;++e)t+=S(n[e],v);return t}(e);const n=function(e){const t=new Buffer(e),n=[];for(let e=0;e<t.length;++e)37!==t[e]?n.push(t[e]):37===t[e]&&u(t[e+1])&&u(t[e+2])?(n.push(parseInt(t.slice(e+1,e+3).toString(),16)),e+=2):n.push(t[e]);return new Buffer(n).toString()}(e),o=r.toASCII(n,!1,r.PROCESSING_OPTIONS.NONTRANSITIONAL,!1);if(null===o)return s;if(-1!==o.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|%|\/|:|\?|@|\[|\\|\]/))return s;const a=function(e){const t=e.split(".");if(""===t[t.length-1]&&t.length>1&&t.pop(),t.length>4)return e;const n=[];for(const i of t){if(""===i)return e;const t=C(i);if(t===s)return e;n.push(t)}for(let e=0;e<n.length-1;++e)if(n[e]>255)return s;if(n[n.length-1]>=Math.pow(256,5-n.length))return s;let i=n.pop(),r=0;for(const e of n)i+=e*Math.pow(256,3-r),++r;return i}(o);return"number"==typeof a||a===s?a:o}function E(e){return"number"==typeof e?function(e){let t="",n=e;for(let e=1;e<=4;++e)t=String(n%256)+t,4!==e&&(t="."+t),n=Math.floor(n/256);return t}(e):e instanceof Array?"["+function(e){let t="";const n=function(e){let t=null,n=1,i=null,r=0;for(let o=0;o<e.length;++o)0!==e[o]?(r>n&&(t=i,n=r),i=null,r=0):(null===i&&(i=o),++r);return r>n&&(t=i,n=r),{idx:t,len:n}}(e).idx;let i=!1;for(let r=0;r<=7;++r)i&&0===e[r]||(i&&(i=!1),n!==r?(t+=e[r].toString(16),7!==r&&(t+=":")):(t+=0===r?"::":":",i=!0));return t}(e)+"]":e}function x(e){const t=e.path;var n;0!==t.length&&("file"===e.scheme&&1===t.length&&(n=t[0],/^[A-Za-z]:$/.test(n))||t.pop())}function T(e){return""!==e.username||""!==e.password}function P(e,t,n,r,o){if(this.pointer=0,this.input=e,this.base=t||null,this.encodingOverride=n||"utf-8",this.stateOverride=o,this.url=r,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,cannotBeABaseURL:!1};const e=function(e){return e.replace(/^[\u0000-\u001F\u0020]+|[\u0000-\u001F\u0020]+$/g,"")}(this.input);e!==this.input&&(this.parseError=!0),this.input=e}const a=function(e){return e.replace(/\u0009|\u000A|\u000D/g,"")}(this.input);for(a!==this.input&&(this.parseError=!0),this.input=a,this.state=o||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=i.ucs2.decode(this.input);this.pointer<=this.input.length;++this.pointer){const e=this.input[this.pointer],t=isNaN(e)?void 0:String.fromCodePoint(e),n=this["parse "+this.state](e,t);if(!n)break;if(n===s){this.failure=!0;break}}}P.prototype["parse scheme start"]=function(e,t){if(d(e))this.buffer+=t.toLowerCase(),this.state="scheme";else{if(this.stateOverride)return this.parseError=!0,s;this.state="no scheme",--this.pointer}return!0},P.prototype["parse scheme"]=function(e,t){if(function(e){return d(e)||l(e)}(e)||43===e||45===e||46===e)this.buffer+=t.toLowerCase();else if(58===e){if(this.stateOverride){if(m(this.url)&&!f(this.buffer))return!1;if(!m(this.url)&&f(this.buffer))return!1;if((T(this.url)||null!==this.url.port)&&"file"===this.buffer)return!1;if("file"===this.url.scheme&&(""===this.url.host||null===this.url.host))return!1}if(this.url.scheme=this.buffer,this.buffer="",this.stateOverride)return!1;"file"===this.url.scheme?(47===this.input[this.pointer+1]&&47===this.input[this.pointer+2]||(this.parseError=!0),this.state="file"):m(this.url)&&null!==this.base&&this.base.scheme===this.url.scheme?this.state="special relative or authority":m(this.url)?this.state="special authority slashes":47===this.input[this.pointer+1]?(this.state="path or authority",++this.pointer):(this.url.cannotBeABaseURL=!0,this.url.path.push(""),this.state="cannot-be-a-base-URL path")}else{if(this.stateOverride)return this.parseError=!0,s;this.buffer="",this.state="no scheme",this.pointer=-1}return!0},P.prototype["parse no scheme"]=function(e){return null===this.base||this.base.cannotBeABaseURL&&35!==e?s:(this.base.cannotBeABaseURL&&35===e?(this.url.scheme=this.base.scheme,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.url.cannotBeABaseURL=!0,this.state="fragment"):"file"===this.base.scheme?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)},P.prototype["parse special relative or authority"]=function(e){return 47===e&&47===this.input[this.pointer+1]?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0},P.prototype["parse path or authority"]=function(e){return 47===e?this.state="authority":(this.state="path",--this.pointer),!0},P.prototype["parse relative"]=function(e){return this.url.scheme=this.base.scheme,isNaN(e)?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query):47===e?this.state="relative slash":63===e?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):35===e?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):m(this.url)&&92===e?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(0,this.base.path.length-1),this.state="path",--this.pointer),!0},P.prototype["parse relative slash"]=function(e){return!m(this.url)||47!==e&&92!==e?47===e?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer):(92===e&&(this.parseError=!0),this.state="special authority ignore slashes"),!0},P.prototype["parse special authority slashes"]=function(e){return 47===e&&47===this.input[this.pointer+1]?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0},P.prototype["parse special authority ignore slashes"]=function(e){return 47!==e&&92!==e?(this.state="authority",--this.pointer):this.parseError=!0,!0},P.prototype["parse authority"]=function(e,t){if(64===e){this.parseError=!0,this.atFlag&&(this.buffer="%40"+this.buffer),this.atFlag=!0;const e=a(this.buffer);for(let t=0;t<e;++t){const e=this.buffer.codePointAt(t);if(58===e&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}const n=S(e,_);this.passwordTokenSeenFlag?this.url.password+=n:this.url.username+=n}this.buffer=""}else if(isNaN(e)||47===e||63===e||35===e||m(this.url)&&92===e){if(this.atFlag&&""===this.buffer)return this.parseError=!0,s;this.pointer-=a(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=t;return!0},P.prototype["parse hostname"]=P.prototype["parse host"]=function(e,t){if(this.stateOverride&&"file"===this.url.scheme)--this.pointer,this.state="file host";else if(58!==e||this.arrFlag)if(isNaN(e)||47===e||63===e||35===e||m(this.url)&&92===e){if(--this.pointer,m(this.url)&&""===this.buffer)return this.parseError=!0,s;if(this.stateOverride&&""===this.buffer&&(T(this.url)||null!==this.url.port))return this.parseError=!0,!1;const e=k(this.buffer,m(this.url));if(e===s)return s;if(this.url.host=e,this.buffer="",this.state="path start",this.stateOverride)return!1}else 91===e?this.arrFlag=!0:93===e&&(this.arrFlag=!1),this.buffer+=t;else{if(""===this.buffer)return this.parseError=!0,s;const e=k(this.buffer,m(this.url));if(e===s)return s;if(this.url.host=e,this.buffer="",this.state="port","hostname"===this.stateOverride)return!1}return!0},P.prototype["parse port"]=function(e,t){if(l(e))this.buffer+=t;else{if(!(isNaN(e)||47===e||63===e||35===e||m(this.url)&&92===e||this.stateOverride))return this.parseError=!0,s;if(""!==this.buffer){const e=parseInt(this.buffer);if(e>Math.pow(2,16)-1)return this.parseError=!0,s;this.url.port=e===(n=this.url.scheme,o[n])?null:e,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}var n;return!0};const I=new Set([47,92,63,35]);P.prototype["parse file"]=function(e){var t,n;return this.url.scheme="file",47===e||92===e?(92===e&&(this.parseError=!0),this.state="file slash"):null!==this.base&&"file"===this.base.scheme?isNaN(e)?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query):63===e?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):35===e?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):(this.input.length-this.pointer-1==0||(t=e,n=this.input[this.pointer+1],!d(t)||58!==n&&124!==n)||this.input.length-this.pointer-1>=2&&!I.has(this.input[this.pointer+2])?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),x(this.url)):this.parseError=!0,this.state="path",--this.pointer):(this.state="path",--this.pointer),!0},P.prototype["parse file slash"]=function(e){var t;return 47===e||92===e?(92===e&&(this.parseError=!0),this.state="file host"):(null!==this.base&&"file"===this.base.scheme&&(2===(t=this.base.path[0]).length&&d(t.codePointAt(0))&&":"===t[1]?this.url.path.push(this.base.path[0]):this.url.host=this.base.host),this.state="path",--this.pointer),!0},P.prototype["parse file host"]=function(e,t){if(isNaN(e)||47===e||92===e||63===e||35===e)if(--this.pointer,!this.stateOverride&&h(this.buffer))this.parseError=!0,this.state="path";else if(""===this.buffer){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let e=k(this.buffer,m(this.url));if(e===s)return s;if("localhost"===e&&(e=""),this.url.host=e,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=t;return!0},P.prototype["parse path start"]=function(e){return m(this.url)?(92===e&&(this.parseError=!0),this.state="path",47!==e&&92!==e&&--this.pointer):this.stateOverride||63!==e?this.stateOverride||35!==e?void 0!==e&&(this.state="path",47!==e&&--this.pointer):(this.url.fragment="",this.state="fragment"):(this.url.query="",this.state="query"),!0},P.prototype["parse path"]=function(e){if(isNaN(e)||47===e||m(this.url)&&92===e||!this.stateOverride&&(63===e||35===e)){if(m(this.url)&&92===e&&(this.parseError=!0),".."===(t=(t=this.buffer).toLowerCase())||"%2e."===t||".%2e"===t||"%2e%2e"===t?(x(this.url),47===e||m(this.url)&&92===e||this.url.path.push("")):!p(this.buffer)||47===e||m(this.url)&&92===e?p(this.buffer)||("file"===this.url.scheme&&0===this.url.path.length&&h(this.buffer)&&(""!==this.url.host&&null!==this.url.host&&(this.parseError=!0,this.url.host=""),this.buffer=this.buffer[0]+":"),this.url.path.push(this.buffer)):this.url.path.push(""),this.buffer="","file"===this.url.scheme&&(void 0===e||63===e||35===e))for(;this.url.path.length>1&&""===this.url.path[0];)this.parseError=!0,this.url.path.shift();63===e&&(this.url.query="",this.state="query"),35===e&&(this.url.fragment="",this.state="fragment")}else 37!==e||u(this.input[this.pointer+1])&&u(this.input[this.pointer+2])||(this.parseError=!0),this.buffer+=S(e,b);var t;return!0},P.prototype["parse cannot-be-a-base-URL path"]=function(e){return 63===e?(this.url.query="",this.state="query"):35===e?(this.url.fragment="",this.state="fragment"):(isNaN(e)||37===e||(this.parseError=!0),37!==e||u(this.input[this.pointer+1])&&u(this.input[this.pointer+2])||(this.parseError=!0),isNaN(e)||(this.url.path[0]=this.url.path[0]+S(e,v))),!0},P.prototype["parse query"]=function(e,t){if(isNaN(e)||!this.stateOverride&&35===e){m(this.url)&&"ws"!==this.url.scheme&&"wss"!==this.url.scheme||(this.encodingOverride="utf-8");const t=new Buffer(this.buffer);for(let e=0;e<t.length;++e)t[e]<33||t[e]>126||34===t[e]||35===t[e]||60===t[e]||62===t[e]?this.url.query+=g(t[e]):this.url.query+=String.fromCodePoint(t[e]);this.buffer="",35===e&&(this.url.fragment="",this.state="fragment")}else 37!==e||u(this.input[this.pointer+1])&&u(this.input[this.pointer+2])||(this.parseError=!0),this.buffer+=t;return!0},P.prototype["parse fragment"]=function(e){return isNaN(e)||(0===e?this.parseError=!0:(37!==e||u(this.input[this.pointer+1])&&u(this.input[this.pointer+2])||(this.parseError=!0),this.url.fragment+=S(e,v))),!0},e.exports.serializeURL=function(e,t){let n=e.scheme+":";if(null!==e.host?(n+="//",""===e.username&&""===e.password||(n+=e.username,""!==e.password&&(n+=":"+e.password),n+="@"),n+=E(e.host),null!==e.port&&(n+=":"+e.port)):null===e.host&&"file"===e.scheme&&(n+="//"),e.cannotBeABaseURL)n+=e.path[0];else for(const t of e.path)n+="/"+t;return null!==e.query&&(n+="?"+e.query),t||null===e.fragment||(n+="#"+e.fragment),n},e.exports.serializeURLOrigin=function(t){switch(t.scheme){case"blob":try{return e.exports.serializeURLOrigin(e.exports.parseURL(t.path[0]))}catch(e){return"null"}case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(e){let t=e.scheme+"://";return t+=E(e.host),null!==e.port&&(t+=":"+e.port),t}({scheme:t.scheme,host:t.host,port:t.port});case"file":return"file://";default:return"null"}},e.exports.basicURLParse=function(e,t){void 0===t&&(t={});const n=new P(e,t.baseURL,t.encodingOverride,t.url,t.stateOverride);return n.failure?"failure":n.url},e.exports.setTheUsername=function(e,t){e.username="";const n=i.ucs2.decode(t);for(let t=0;t<n.length;++t)e.username+=S(n[t],_)},e.exports.setThePassword=function(e,t){e.password="";const n=i.ucs2.decode(t);for(let t=0;t<n.length;++t)e.password+=S(n[t],_)},e.exports.serializeHost=E,e.exports.cannotHaveAUsernamePasswordPort=function(e){return null===e.host||""===e.host||e.cannotBeABaseURL||"file"===e.scheme},e.exports.serializeInteger=function(e){return String(e)},e.exports.parseURL=function(t,n){return void 0===n&&(n={}),e.exports.basicURLParse(t,{baseURL:n.baseURL,encodingOverride:n.encodingOverride})}},32625:e=>{"use strict";e.exports.mixin=function(e,t){const n=Object.getOwnPropertyNames(t);for(let i=0;i<n.length;++i)Object.defineProperty(e,n[i],Object.getOwnPropertyDescriptor(t,n[i]))},e.exports.wrapperSymbol=Symbol("wrapper"),e.exports.implSymbol=Symbol("impl"),e.exports.wrapperForImpl=function(t){return t[e.exports.wrapperSymbol]},e.exports.implForWrapper=function(t){return t[e.exports.implSymbol]}},19516:(e,t,n)=>{"function"==typeof process.addon?e.exports=process.addon.bind(process):e.exports=n(7524)},7524:(e,t,n)=>{var i=n(57147),r=n(71017),o=n(22037),s=require,a=process.config&&process.config.variables||{},c=!!process.env.PREBUILDS_ONLY,l=process.versions.modules,d=process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":process.versions&&process.versions.nw?"node-webkit":"node",u=process.env.npm_config_arch||o.arch(),p=process.env.npm_config_platform||o.platform(),h=process.env.LIBC||(function(e){return"linux"===e&&i.existsSync("/etc/alpine-release")}(p)?"musl":"glibc"),f=process.env.ARM_VERSION||("arm64"===u?"8":a.arm_version)||"",m=(process.versions.uv||"").split(".")[0];function g(e){return s(g.resolve(e))}function v(e){try{return i.readdirSync(e)}catch(e){return[]}}function y(e,t){var n=v(e).filter(t);return n[0]&&r.join(e,n[0])}function b(e){return/\.node$/.test(e)}function w(e){var t=e.split("-");if(2===t.length){var n=t[0],i=t[1].split("+");if(n&&i.length&&i.every(Boolean))return{name:e,platform:n,architectures:i}}}function _(e,t){return function(n){return null!=n&&n.platform===e&&n.architectures.includes(t)}}function S(e,t){return e.architectures.length-t.architectures.length}function C(e){var t=e.split("."),n={file:e,specificity:0};if("node"===t.pop()){for(var i=0;i<t.length;i++){var r=t[i];if("node"===r||"electron"===r||"node-webkit"===r)n.runtime=r;else if("napi"===r)n.napi=!0;else if("abi"===r.slice(0,3))n.abi=r.slice(3);else if("uv"===r.slice(0,2))n.uv=r.slice(2);else if("armv"===r.slice(0,4))n.armv=r.slice(4);else{if("glibc"!==r&&"musl"!==r)continue;n.libc=r}n.specificity++}return n}}function k(e,t){return function(n){return!(null==n||n.runtime!==e&&!function(e){return"node"===e.runtime&&e.napi}(n)||n.abi!==t&&!n.napi||n.uv&&n.uv!==m||n.armv&&n.armv!==f||n.libc&&n.libc!==h)}}function E(e){return function(t,n){return t.runtime!==n.runtime?t.runtime===e?-1:1:t.abi!==n.abi?t.abi?-1:1:t.specificity!==n.specificity?t.specificity>n.specificity?-1:1:0}}e.exports=g,g.resolve=g.path=function(e){e=r.resolve(e||".");try{var t=s(r.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}if(!c){var n=y(r.join(e,"build/Release"),b);if(n)return n;var i=y(r.join(e,"build/Debug"),b);if(i)return i}var o=x(e);if(o)return o;var a=x(r.dirname(process.execPath));if(a)return a;var g=["platform="+p,"arch="+u,"runtime="+d,"abi="+l,"uv="+m,f?"armv="+f:"","libc="+h,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ");throw new Error("No native build was found for "+g+"\n    loaded from: "+e+"\n");function x(e){var t=v(r.join(e,"prebuilds")).map(w).filter(_(p,u)).sort(S)[0];if(t){var n=r.join(e,"prebuilds",t.name),i=v(n).map(C).filter(k(d,l)).sort(E(d))[0];return i?r.join(n,i.file):void 0}}},g.parseTags=C,g.matchTags=k,g.compareTags=E,g.parseTuple=w,g.matchTuple=_,g.compareTuples=S},30778:(e,t,n)=>{var i=n(52479);function r(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=i(r),e.exports.strict=i(o),r.proto=r((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},55339:e=>{"use strict";var t="win32"===process.platform,n=t?/[^:]\\$/:/.\/$/;e.exports=function(){var e;return e=t?process.env.TEMP||process.env.TMP||(process.env.SystemRoot||process.env.windir)+"\\temp":process.env.TMPDIR||process.env.TMP||process.env.TEMP||"/tmp",n.test(e)&&(e=e.slice(0,-1)),e}},64095:e=>{"use strict";function t(e){return"/"===e.charAt(0)}function n(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),n=t[1]||"",i=Boolean(n&&":"!==n.charAt(1));return Boolean(t[2]||i)}e.exports="win32"===process.platform?n:t,e.exports.posix=t,e.exports.win32=n},95987:(e,t,n)=>{"use strict";String.prototype.startsWith||(String.prototype.startsWith=function(e){return this.substring(0,e.length)===e});var i=n(43422);e.exports=function(e,t,n){var r,o,s;if("function"==typeof t&&(n=t,t=void 0),"function"!=typeof n)return r=i,o=e,s=t,new Promise((function(e,t){r(o,s,(function(n,i){if(n)return t(n);e(i)}))}));i(e,t,n)}},57378:(e,t,n)=>{"use strict";var i=n(32081).spawn;e.exports=function(e,t,n,r){"function"==typeof n&&(r=n,n=void 0);var o=!1,s=i(e,t,n),a="",c="";s.stdout.on("data",(function(e){a+=e.toString()})),s.stderr.on("data",(function(e){c+=e.toString()})),s.on("error",(function(e){o||(o=!0,r(new Error(e)))})),s.on("close",(function(e){if(!o){if(o=!0,c=function(e){if(e)return(e=(e=e.trim()).replace(/your \d+x\d+ screen size is bogus\. expect trouble/gi,"")).trim()}(c))return r(new Error(c));r(null,a,e)}}))}},38886:(e,t,n)=>{"use strict";var i=n(22037),r={ps:()=>n(85964),wmic:()=>n(60008)},o=i.platform();o.startsWith("win")&&(o="win");var s={darwin:"ps",sunos:"ps",freebsd:"ps",netbsd:"ps",win:"wmic",linux:"ps",aix:"ps"}[o];e.exports=function(e){void 0===s&&e(new Error(i.platform()+" is not supported yet, please open an issue (https://github.com/simonepri/pidtree)")),r[s]()(e)}},43422:(e,t,n)=>{"use strict";var i=n(38886);e.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),"object"!=typeof t&&(t={}),e=parseInt(e,10),isNaN(e)||e<-1?n(new TypeError("The pid provided is invalid")):i((function(i,r){if(i)n(i);else if(-1!==e){for(var o,s=0;s<r.length;s++){if(r[s][1]===e){o=t.advanced?{ppid:r[s][0],pid:e}:e;break}r[s][0]===e&&(o=t.advanced?{pid:e}:e)}if(o){for(var a={};r.length>0;){var c=r.pop();a[c[0]]?a[c[0]].push(c[1]):a[c[0]]=[c[1]]}for(var l=0,d=[o];l<d.length;){var u=t.advanced?d[l++].pid:d[l++];if(a[u]){for(var p=a[u].length,h=0;h<p;h++)d.push(t.advanced?{ppid:u,pid:a[u][h]}:a[u][h]);delete a[u]}}t.root||d.shift(),n(null,d)}else n(new Error("No matching pid found"))}else{for(var f=0;f<r.length;f++)r[f]=t.advanced?{ppid:r[f][0],pid:r[f][1]}:r[f]=r[f][1];n(null,r)}}))}},85964:(e,t,n)=>{"use strict";var i=n(22037),r=n(57378);e.exports=function(e){r("ps",["-A","-o","ppid,pid"],(function(t,n,r){if(t)return e(t);if(0!==r)return e(new Error("pidtree ps command exited with code "+r));try{n=n.split(i.EOL);for(var o=[],s=1;s<n.length;s++)n[s]=n[s].trim(),n[s]&&(n[s]=n[s].split(/\s+/),n[s][0]=parseInt(n[s][0],10),n[s][1]=parseInt(n[s][1],10),o.push(n[s]));e(null,o)}catch(t){e(t)}}))}},60008:(e,t,n)=>{"use strict";var i=n(22037),r=n(57378);e.exports=function(e){r("wmic",["PROCESS","get","ParentProcessId,ProcessId"],{windowsHide:!0,windowsVerbatimArguments:!0},(function(t,n,r){if(t)e(t);else if(0===r)try{n=n.split(i.EOL);for(var o=[],s=1;s<n.length;s++)n[s]=n[s].trim(),n[s]&&(n[s]=n[s].split(/\s+/),n[s][0]=parseInt(n[s][0],10),n[s][1]=parseInt(n[s][1],10),o.push(n[s]));e(null,o)}catch(t){e(t)}else e(new Error("pidtree wmic command exited with code "+r))}))}},57129:(e,t)=>{"use strict";var n=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function r(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var i,o,s=[];for(o in"string"!=typeof t&&(t="?"),e)if(n.call(e,o)){if((i=e[o])||null!=i&&!isNaN(i)||(i=""),o=r(o),i=r(i),null===o||null===i)continue;s.push(o+"="+i)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var o=i(t[1]),s=i(t[2]);null===o||null===s||o in r||(r[o]=s)}return r}},28660:()=>{var e;!function(e){!function(t){var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=r(e);function r(e,t){return function(n,i){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:i}),t&&t(n,i)}}void 0===n.Reflect?n.Reflect=e:i=r(n.Reflect,i),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,c={create:o?function(){return M(Object.create(null))}:s?function(){return M({__proto__:null})}:function(){return M({})},has:a?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:a?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},l=Object.getPrototypeOf(Function),d="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,u=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[r]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var i=this._keys.length,r=n+1;r<i;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,i)},t.prototype.values=function(){return new n(this._keys,this._values,o)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[r]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function i(e,t){return e}function o(e,t){return t}function s(e,t){return[e,t]}}():Map,p=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new u}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[r]=function(){return this.keys()},e}():Set,h=new(d||"function"!=typeof WeakMap?function(){var e=16,n=c.create(),i=r();return function(){function e(){this._key=r()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e}();function r(){var e;do{e="@@WeakMap@@"+a()}while(c.has(n,e));return n[e]=!0,e}function o(e,n){if(!t.call(e,i)){if(!n)return;Object.defineProperty(e,i,{value:c.create()})}return e[i]}function s(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function a(){var t,n=(t=e,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t));n[6]=79&n[6]|64,n[8]=191&n[8]|128;for(var i="",r=0;r<e;++r){var o=n[r];4!==r&&6!==r&&8!==r||(i+="-"),o<16&&(i+="0"),i+=o.toString(16).toLowerCase()}return i}}():WeakMap);function f(e,t,n){var i=h.get(e);if(C(i)){if(!n)return;i=new u,h.set(e,i)}var r=i.get(t);if(C(r)){if(!n)return;r=new u,i.set(t,r)}return r}function m(e,t,n){if(g(e,t,n))return!0;var i=N(t);return!k(i)&&m(e,i,n)}function g(e,t,n){var i=f(t,n,!1);return!C(i)&&!!i.has(e)}function v(e,t,n){if(g(e,t,n))return y(e,t,n);var i=N(t);return k(i)?void 0:v(e,i,n)}function y(e,t,n){var i=f(t,n,!1);if(!C(i))return i.get(e)}function b(e,t,n,i){f(n,i,!0).set(e,t)}function w(e,t){var n=_(e,t),i=N(e);if(null===i)return n;var r=w(i,t);if(r.length<=0)return n;if(n.length<=0)return r;for(var o=new p,s=[],a=0,c=n;a<c.length;a++){var l=c[a];o.has(l)||(o.add(l),s.push(l))}for(var d=0,u=r;d<u.length;d++)l=u[d],o.has(l)||(o.add(l),s.push(l));return s}function _(e,t){var n=[],i=f(e,t,!1);if(C(i))return n;for(var o=function(e){var t=R(e,r);if(!I(t))throw new TypeError;var n=t.call(e);if(!E(n))throw new TypeError;return n}(i.keys()),s=0;;){var a=O(o);if(!a)return n.length=s,n;var c=a.value;try{n[s]=c}catch(e){try{A(o)}finally{throw e}}s++}}function S(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function C(e){return void 0===e}function k(e){return null===e}function E(e){return"object"==typeof e?null!==e:"function"==typeof e}function x(e,t){switch(S(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",r=R(e,i);if(void 0!==r){var o=r.call(e,n);if(E(o))throw new TypeError;return o}return function(e,t){if("string"===t){var n=e.toString;if(I(n)&&!E(r=n.call(e)))return r;if(I(i=e.valueOf)&&!E(r=i.call(e)))return r}else{var i;if(I(i=e.valueOf)&&!E(r=i.call(e)))return r;var r,o=e.toString;if(I(o)&&!E(r=o.call(e)))return r}throw new TypeError}(e,"default"===n?"number":n)}function T(e){var t=x(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function P(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function I(e){return"function"==typeof e}function D(e){return"function"==typeof e}function R(e,t){var n=e[t];if(null!=n){if(!I(n))throw new TypeError;return n}}function O(e){var t=e.next();return!t.done&&t}function A(e){var t=e.return;t&&t.call(e)}function N(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===l)return t;if(t!==l)return t;var n=e.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return t;var r=i.constructor;return"function"!=typeof r||r===e?t:r}function M(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,i){if(C(n)){if(!P(e))throw new TypeError;if(!D(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var i=(0,e[n])(t);if(!C(i)&&!k(i)){if(!D(i))throw new TypeError;t=i}}return t}(e,t)}if(!P(e))throw new TypeError;if(!E(t))throw new TypeError;if(!E(i)&&!C(i)&&!k(i))throw new TypeError;return k(i)&&(i=void 0),function(e,t,n,i){for(var r=e.length-1;r>=0;--r){var o=(0,e[r])(t,n,i);if(!C(o)&&!k(o)){if(!E(o))throw new TypeError;i=o}}return i}(e,t,n=T(n),i)})),e("metadata",(function(e,t){return function(n,i){if(!E(n))throw new TypeError;if(!C(i)&&!function(e){switch(S(e)){case 3:case 4:return!0;default:return!1}}(i))throw new TypeError;b(e,t,n,i)}})),e("defineMetadata",(function(e,t,n,i){if(!E(n))throw new TypeError;return C(i)||(i=T(i)),b(e,t,n,i)})),e("hasMetadata",(function(e,t,n){if(!E(t))throw new TypeError;return C(n)||(n=T(n)),m(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!E(t))throw new TypeError;return C(n)||(n=T(n)),g(e,t,n)})),e("getMetadata",(function(e,t,n){if(!E(t))throw new TypeError;return C(n)||(n=T(n)),v(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!E(t))throw new TypeError;return C(n)||(n=T(n)),y(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!E(e))throw new TypeError;return C(t)||(t=T(t)),w(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!E(e))throw new TypeError;return C(t)||(t=T(t)),_(e,t)})),e("deleteMetadata",(function(e,t,n){if(!E(t))throw new TypeError;C(n)||(n=T(n));var i=f(t,n,!1);if(C(i))return!1;if(!i.delete(e))return!1;if(i.size>0)return!0;var r=h.get(t);return r.delete(n),r.size>0||h.delete(t),!0}))}(i)}()}(e||(e={}))},47418:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},32099:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(32967);t.Observable=i.Observable},26765:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(32967);t.ReplaySubject=i.ReplaySubject},95100:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(32099))},37875:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(26765))},32967:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ArgumentOutOfRangeError:()=>_e,AsyncSubject:()=>re,BehaviorSubject:()=>L,ConnectableObservable:()=>O,EMPTY:()=>W,EmptyError:()=>Se,GroupedObservable:()=>N,NEVER:()=>mt,Notification:()=>Z,NotificationKind:()=>H,ObjectUnsubscribedError:()=>E,Observable:()=>C,ReplaySubject:()=>ne,Scheduler:()=>U,Subject:()=>P,Subscriber:()=>g,Subscription:()=>h,TimeoutError:()=>Ce,UnsubscriptionError:()=>p,VirtualAction:()=>ye,VirtualTimeScheduler:()=>ve,animationFrame:()=>ge,animationFrameScheduler:()=>me,asap:()=>ue,asapScheduler:()=>de,async:()=>he,asyncScheduler:()=>pe,bindCallback:()=>Te,bindNodeCallback:()=>De,combineLatest:()=>We,concat:()=>tt,config:()=>a,defer:()=>nt,empty:()=>$,forkJoin:()=>it,from:()=>ze,fromEvent:()=>ot,fromEventPattern:()=>at,generate:()=>ct,identity:()=>w,iif:()=>dt,interval:()=>pt,isObservable:()=>we,merge:()=>ft,never:()=>gt,noop:()=>be,observable:()=>b,of:()=>Y,onErrorResumeNext:()=>vt,pairs:()=>yt,partition:()=>kt,pipe:()=>_,queue:()=>V,queueScheduler:()=>K,race:()=>Et,range:()=>Pt,scheduled:()=>He,throwError:()=>Q,timer:()=>Dt,using:()=>Ot,zip:()=>At});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e){return"function"==typeof e}var s=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,s=e},get useDeprecatedSynchronousErrorHandling(){return s}};function c(e){setTimeout((function(){throw e}),0)}var l={closed:!0,next:function(e){},error:function(e){if(a.useDeprecatedSynchronousErrorHandling)throw e;c(e)},complete:function(){}},d=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function u(e){return null!==e&&"object"==typeof e}var p=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),h=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,i=n._parentOrParents,r=n._ctorUnsubscribe,s=n._unsubscribe,a=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof e)i.remove(this);else if(null!==i)for(var c=0;c<i.length;++c)i[c].remove(this);if(o(s)){r&&(this._unsubscribe=void 0);try{s.call(this)}catch(e){t=e instanceof p?f(e.errors):[e]}}if(d(a)){c=-1;for(var l=a.length;++c<l;){var h=a[c];if(u(h))try{h.unsubscribe()}catch(e){t=t||[],e instanceof p?t=t.concat(f(e.errors)):t.push(e)}}}if(t)throw new p(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var i=n;(n=new e)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function f(e){return e.reduce((function(e,t){return e.concat(t instanceof p?t.errors:t)}),[])}var m=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),g=function(e){function t(n,i,r){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=l;break;case 1:if(!n){o.destination=l;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new v(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new v(o,n,i,r)}return o}return r(t,e),t.prototype[m]=function(){return this},t.create=function(e,n,i){var r=new t(e,n,i);return r.syncErrorThrowable=!1,r},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(h),v=function(e){function t(t,n,i,r){var s,a=e.call(this)||this;a._parentSubscriber=t;var c=a;return o(n)?s=n:n&&(s=n.next,i=n.error,r=n.complete,n!==l&&(o((c=Object.create(n)).unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(a))),a._context=c,a._next=s,a._error=i,a._complete=r,a}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):c(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;c(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw e;c(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(c(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(g);function y(e){for(;e;){var t=e,n=t.closed,i=t.destination,r=t.isStopped;if(n||r)return!1;e=i&&i instanceof g?i:null}return!0}var b=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function w(e){return e}function _(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return S(e)}function S(e){return 0===e.length?w:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var C=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var i=this.operator,r=function(e,t,n){if(e){if(e instanceof g)return e;if(e[m])return e[m]()}return e||t||n?new g(e,t,n):new g(l)}(e,t,n);if(i?r.add(i.call(r,this.source)):r.add(this.source||a.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),a.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),y(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=k(t))((function(t,i){var r;r=n.subscribe((function(t){try{e(t)}catch(e){i(e),r&&r.unsubscribe()}}),i,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[b]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:S(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=k(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function k(e){if(e||(e=a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var E=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),x=function(e){function t(t,n){var i=e.call(this)||this;return i.subject=t,i.subscriber=n,i.closed=!1,i}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(h),T=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return r(t,e),t}(g),P=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r(t,e),t.prototype[m]=function(){return new T(this)},t.prototype.lift=function(e){var t=new I(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new E;if(!this.isStopped)for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].next(e)},t.prototype.error=function(e){if(this.closed)throw new E;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new E;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),i=0;i<t;i++)n[i].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new E;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new E;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new x(this,e))},t.prototype.asObservable=function(){var e=new C;return e.source=this,e},t.create=function(e,t){return new I(e,t)},t}(C),I=function(e){function t(t,n){var i=e.call(this)||this;return i.destination=t,i.source=n,i}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):h.EMPTY},t}(P),D=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var i=new R(e,n),r=t.subscribe(i);return i.closed||(i.connection=n.connect()),r},e}(),R=function(e){function t(t,n){var i=e.call(this,t)||this;return i.connectable=n,i}return r(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,i=e._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null},t}(g),O=function(e){function t(t,n){var i=e.call(this)||this;return i.source=t,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return r(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new h).add(this.source.subscribe(new A(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e},t.prototype.refCount=function(){return(e=this).lift(new D(e));var e},t}(C),A=function(e){function t(t,n){var i=e.call(this,t)||this;return i.connectable=n,i}return r(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(T),N=function(e){function t(t,n,i){var r=e.call(this)||this;return r.key=t,r.groupSubject=n,r.refCountSubscription=i,r}return r(t,e),t.prototype._subscribe=function(e){var t=new h,n=this.refCountSubscription,i=this.groupSubject;return n&&!n.closed&&t.add(new M(n)),t.add(i.subscribe(e)),t},t}(C),M=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return r(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(h),L=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return r(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new E;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(P),j=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return r(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,i=void 0;try{this.work(e)}catch(e){n=!0,i=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),i},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return r(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(h)),F=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return r(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,i){return void 0===i&&(i=0),null!==i&&i>0||null===i&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,i):t.flush(this)},t}(j),U=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),q=function(e){function t(n,i){void 0===i&&(i=U.now);var r=e.call(this,n,(function(){return t.delegate&&t.delegate!==r?t.delegate.now():i()}))||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}return r(t,e),t.prototype.schedule=function(n,i,r){return void 0===i&&(i=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,i,r):e.prototype.schedule.call(this,n,i,r)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(U),K=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(q))(F),V=K,W=new C((function(e){return e.complete()}));function $(e){return e?function(e){return new C((function(t){return e.schedule((function(){return t.complete()}))}))}(e):W}function B(e){return e&&"function"==typeof e.schedule}var H,z=function(e){return function(t){for(var n=0,i=e.length;n<i&&!t.closed;n++)t.next(e[n]);t.complete()}};function J(e,t){return new C((function(n){var i=new h,r=0;return i.add(t.schedule((function(){r!==e.length?(n.next(e[r++]),n.closed||i.add(this.schedule())):n.complete()}))),i}))}function G(e,t){return t?J(e,t):new C(z(e))}function Y(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return B(n)?(e.pop(),J(e,n)):G(e)}function Q(e,t){return new C(t?function(n){return t.schedule(X,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function X(e){var t=e.error;e.subscriber.error(t)}H||(H={});var Z=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return Y(this.value);case"E":return Q(this.error);case"C":return $()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),ee=function(e){function t(t,n,i){void 0===i&&(i=0);var r=e.call(this,t)||this;return r.scheduler=n,r.delay=i,r}return r(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new te(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Z.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Z.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Z.createComplete()),this.unsubscribe()},t}(g),te=function(){return function(e,t){this.notification=e,this.destination=t}}(),ne=function(e){function t(t,n,i){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this)||this;return r.scheduler=i,r._events=[],r._infiniteTimeWindow=!1,r._bufferSize=t<1?1:t,r._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(r._infiniteTimeWindow=!0,r.next=r.nextInfiniteTimeWindow):r.next=r.nextTimeWindow,r}return r(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new ie(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,o=i.length;if(this.closed)throw new E;if(this.isStopped||this.hasError?t=h.EMPTY:(this.observers.push(e),t=new x(this,e)),r&&e.add(e=new ee(e,r)),n)for(var s=0;s<o&&!e.closed;s++)e.next(i[s]);else for(s=0;s<o&&!e.closed;s++)e.next(i[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||V).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,i=this._events,r=i.length,o=0;o<r&&!(e-i[o].time<n);)o++;return r>t&&(o=Math.max(o,r-t)),o>0&&i.splice(0,o),i},t}(P),ie=function(){return function(e,t){this.time=e,this.value=t}}(),re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return r(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),h.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),h.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(P),oe=1,se=function(){return Promise.resolve()}(),ae={};function ce(e){return e in ae&&(delete ae[e],!0)}var le=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return r(t,e),t.prototype.requestAsyncId=function(t,n,i){return void 0===i&&(i=0),null!==i&&i>0?e.prototype.requestAsyncId.call(this,t,n,i):(t.actions.push(this),t.scheduled||(t.scheduled=(r=t.flush.bind(t,null),o=oe++,ae[o]=!0,se.then((function(){return ce(o)&&r()})),o)));var r,o},t.prototype.recycleAsyncId=function(t,n,i){if(void 0===i&&(i=0),null!==i&&i>0||null===i&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,i);0===t.actions.length&&(ce(n),t.scheduled=void 0)},t}(j),de=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,i=-1,r=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++i<r&&(e=n.shift()));if(this.active=!1,t){for(;++i<r&&(e=n.shift());)e.unsubscribe();throw t}},t}(q))(le),ue=de,pe=new q(j),he=pe,fe=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return r(t,e),t.prototype.requestAsyncId=function(t,n,i){return void 0===i&&(i=0),null!==i&&i>0?e.prototype.requestAsyncId.call(this,t,n,i):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,i){if(void 0===i&&(i=0),null!==i&&i>0||null===i&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,i);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(j),me=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,i=-1,r=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++i<r&&(e=n.shift()));if(this.active=!1,t){for(;++i<r&&(e=n.shift());)e.unsubscribe();throw t}},t}(q))(fe),ge=me,ve=function(e){function t(t,n){void 0===t&&(t=ye),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this,t,(function(){return i.frame}))||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return r(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,i=this.maxFrames;(t=n[0])&&t.delay<=i&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(q),ye=function(e){function t(t,n,i){void 0===i&&(i=t.index+=1);var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.index=i,r.active=!0,r.index=t.index=i,r}return r(t,e),t.prototype.schedule=function(n,i){if(void 0===i&&(i=0),!this.id)return e.prototype.schedule.call(this,n,i);this.active=!1;var r=new t(this.scheduler,this.work);return this.add(r),r.schedule(n,i)},t.prototype.requestAsyncId=function(e,n,i){void 0===i&&(i=0),this.delay=e.frame+i;var r=e.actions;return r.push(this),r.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(j);function be(){}function we(e){return!!e&&(e instanceof C||"function"==typeof e.lift&&"function"==typeof e.subscribe)}var _e=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),Se=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Ce=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}();function ke(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Ee(e,t))}}var Ee=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new xe(e,this.project,this.thisArg))},e}(),xe=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.project=n,r.count=0,r.thisArg=i||r,r}return r(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(g);function Te(e,t,n){if(t){if(!B(t))return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return Te(e,n).apply(void 0,i).pipe(ke((function(e){return d(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r,o=this,s={context:o,subject:r,callbackFunc:e,scheduler:n};return new C((function(i){if(n){var a={args:t,subscriber:i,params:s};return n.schedule(Pe,0,a)}if(!r){r=new re;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.next(e.length<=1?e[0]:e),r.complete()}]))}catch(e){y(r)?r.error(e):console.warn(e)}}return r.subscribe(i)}))}}function Pe(e){var t=this,n=e.args,i=e.subscriber,r=e.params,o=r.callbackFunc,s=r.context,a=r.scheduler,c=r.subject;if(!c){c=r.subject=new re;try{o.apply(s,n.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e.length<=1?e[0]:e;t.add(a.schedule(Ie,0,{value:i,subject:c}))}]))}catch(e){c.error(e)}}this.add(c.subscribe(i))}function Ie(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function De(e,t,n){if(t){if(!B(t))return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return De(e,n).apply(void 0,i).pipe(ke((function(e){return d(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new C((function(i){var o=r.context,s=r.subject;if(n)return n.schedule(Re,0,{params:r,subscriber:i,context:o});if(!s){s=r.subject=new re;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift();n?s.error(n):(s.next(e.length<=1?e[0]:e),s.complete())}]))}catch(e){y(s)?s.error(e):console.warn(e)}}return s.subscribe(i)}))}}function Re(e){var t=this,n=e.params,i=e.subscriber,r=e.context,o=n.callbackFunc,s=n.args,a=n.scheduler,c=n.subject;if(!c){c=n.subject=new re;try{o.apply(r,s.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e.shift();if(i)t.add(a.schedule(Ae,0,{err:i,subject:c}));else{var r=e.length<=1?e[0]:e;t.add(a.schedule(Oe,0,{value:r,subject:c}))}}]))}catch(e){this.add(a.schedule(Ae,0,{err:e,subject:c}))}}this.add(c.subscribe(i))}function Oe(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function Ae(e){var t=e.err;e.subject.error(t)}var Ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.notifyNext=function(e,t,n,i,r){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(g),Me=function(e){function t(t,n,i){var r=e.call(this)||this;return r.parent=t,r.outerValue=n,r.outerIndex=i,r.index=0,r}return r(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(g);function Le(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var je=Le(),Fe=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e},Ue=n(70336),qe=function(e){if(e&&"function"==typeof e[b])return i=e,function(e){var t=i[b]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Fe(e))return z(e);if((0,Ue.t)(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,c),e};if(e&&"function"==typeof e[je])return t=e,function(e){for(var n=t[je]();;){var i=void 0;try{i=n.next()}catch(t){return e.error(t),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,i,r=u(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Ke(e,t,n,i,r){if(void 0===r&&(r=new Me(e,n,i)),!r.closed)return t instanceof C?t.subscribe(r):qe(t)(r)}var Ve={};function We(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=void 0,i=void 0;return B(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&d(e[0])&&(e=e[0]),G(e,i).lift(new $e(n))}var $e=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Be(e,this.resultSelector))},e}(),Be=function(e){function t(t,n){var i=e.call(this,t)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return r(t,e),t.prototype._next=function(e){this.values.push(Ve),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var i=e[n];this.add(Ke(this,i,void 0,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n){var i=this.values,r=i[n],o=this.toRespond?r===Ve?--this.toRespond:this.toRespond:0;i[n]=t,0===o&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Ne);function He(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[b]}(e))return function(e,t){return new C((function(n){var i=new h;return i.add(t.schedule((function(){var r=e[b]();i.add(r.subscribe({next:function(e){i.add(t.schedule((function(){return n.next(e)})))},error:function(e){i.add(t.schedule((function(){return n.error(e)})))},complete:function(){i.add(t.schedule((function(){return n.complete()})))}}))}))),i}))}(e,t);if((0,Ue.t)(e))return function(e,t){return new C((function(n){var i=new h;return i.add(t.schedule((function(){return e.then((function(e){i.add(t.schedule((function(){n.next(e),i.add(t.schedule((function(){return n.complete()})))})))}),(function(e){i.add(t.schedule((function(){return n.error(e)})))}))}))),i}))}(e,t);if(Fe(e))return J(e,t);if(function(e){return e&&"function"==typeof e[je]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new C((function(n){var i,r=new h;return r.add((function(){i&&"function"==typeof i.return&&i.return()})),r.add(t.schedule((function(){i=e[je](),r.add(t.schedule((function(){if(!n.closed){var e,t;try{var r=i.next();e=r.value,t=r.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),r}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function ze(e,t){return t?He(e,t):e instanceof C?e:new C(qe(e))}var Je=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return r(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(g),Ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(g);function Ye(e,t){if(!t.closed){if(e instanceof C)return e.subscribe(t);var n;try{n=qe(e)(t)}catch(e){t.error(e)}return n}}function Qe(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(i){return i.pipe(Qe((function(n,i){return ze(e(n,i)).pipe(ke((function(e,r){return t(n,e,i,r)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new Xe(e,n))})}var Xe=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new Ze(e,this.project,this.concurrent))},e}(),Ze=function(e){function t(t,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY);var r=e.call(this,t)||this;return r.project=n,r.concurrent=i,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return r(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new Je(this),n=this.destination;n.add(t);var i=Ye(e,t);i!==t&&n.add(i)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(Ge);function et(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Qe(w,e)}function tt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return et(1)(Y.apply(void 0,e))}function nt(e){return new C((function(t){var n;try{n=e()}catch(e){return void t.error(e)}return(n?ze(n):$()).subscribe(t)}))}function it(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(d(n))return rt(n,null);if(u(n)&&Object.getPrototypeOf(n)===Object.prototype){var i=Object.keys(n);return rt(i.map((function(e){return n[e]})),i)}}if("function"==typeof e[e.length-1]){var r=e.pop();return rt(e=1===e.length&&d(e[0])?e[0]:e,null).pipe(ke((function(e){return r.apply(void 0,e)})))}return rt(e,null)}function rt(e,t){return new C((function(n){var i=e.length;if(0!==i)for(var r=new Array(i),o=0,s=0,a=function(a){var c=ze(e[a]),l=!1;n.add(c.subscribe({next:function(e){l||(l=!0,s++),r[a]=e},error:function(e){return n.error(e)},complete:function(){++o!==i&&l||(s===i&&n.next(t?t.reduce((function(e,t,n){return e[t]=r[n],e}),{}):r),n.complete())}}))},c=0;c<i;c++)a(c);else n.complete()}))}function ot(e,t,n,i){return o(n)&&(i=n,n=void 0),i?ot(e,t,n).pipe(ke((function(e){return d(e)?i.apply(void 0,e):i(e)}))):new C((function(i){st(e,t,(function(e){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(e)}),i,n)}))}function st(e,t,n,i,r){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var s=e;e.addEventListener(t,n,r),o=function(){return s.removeEventListener(t,n,r)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var a=e;e.on(t,n),o=function(){return a.off(t,n)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){var c=e;e.addListener(t,n),o=function(){return c.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,d=e.length;l<d;l++)st(e[l],t,n,i,r)}i.add(o)}function at(e,t,n){return n?at(e,t).pipe(ke((function(e){return d(e)?n.apply(void 0,e):n(e)}))):new C((function(n){var i,r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{i=e(r)}catch(e){return void n.error(e)}if(o(t))return function(){return t(r,i)}}))}function ct(e,t,n,i,r){var o,s;if(1==arguments.length){var a=e;s=a.initialState,t=a.condition,n=a.iterate,o=a.resultSelector||w,r=a.scheduler}else void 0===i||B(i)?(s=e,o=w,r=i):(s=e,o=i);return new C((function(e){var i=s;if(r)return r.schedule(lt,0,{subscriber:e,iterate:n,condition:t,resultSelector:o,state:i});for(;;){if(t){var a=void 0;try{a=t(i)}catch(t){return void e.error(t)}if(!a){e.complete();break}}var c=void 0;try{c=o(i)}catch(t){return void e.error(t)}if(e.next(c),e.closed)break;try{i=n(i)}catch(t){return void e.error(t)}}}))}function lt(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var i=void 0;try{i=n(e.state)}catch(e){return void t.error(e)}if(!i)return void t.complete();if(t.closed)return}var r;try{r=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(r),!t.closed))return this.schedule(e)}}function dt(e,t,n){return void 0===t&&(t=W),void 0===n&&(n=W),nt((function(){return e()?t:n}))}function ut(e){return!d(e)&&e-parseFloat(e)+1>=0}function pt(e,t){return void 0===e&&(e=0),void 0===t&&(t=he),(!ut(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=he),new C((function(n){return n.add(t.schedule(ht,e,{subscriber:n,counter:0,period:e})),n}))}function ht(e){var t=e.subscriber,n=e.counter,i=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:i},i)}function ft(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,i=null,r=e[e.length-1];return B(r)?(i=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof r&&(n=e.pop()),null===i&&1===e.length&&e[0]instanceof C?e[0]:et(n)(G(e,i))}var mt=new C(be);function gt(){return mt}function vt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return W;var n=e[0],i=e.slice(1);return 1===e.length&&d(n)?vt.apply(void 0,n):new C((function(e){var t=function(){return e.add(vt.apply(void 0,i).subscribe(e))};return ze(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function yt(e,t){return new C(t?function(n){var i=Object.keys(e),r=new h;return r.add(t.schedule(bt,0,{keys:i,index:0,subscriber:n,subscription:r,obj:e})),r}:function(t){for(var n=Object.keys(e),i=0;i<n.length&&!t.closed;i++){var r=n[i];e.hasOwnProperty(r)&&t.next([r,e[r]])}t.complete()})}function bt(e){var t=e.keys,n=e.index,i=e.subscriber,r=e.subscription,o=e.obj;if(!i.closed)if(n<t.length){var s=t[n];i.next([s,o[s]]),r.add(this.schedule({keys:t,index:n+1,subscriber:i,subscription:r,obj:o}))}else i.complete()}function wt(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}function _t(e,t){return function(n){return n.lift(new St(e,t))}}var St=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Ct(e,this.predicate,this.thisArg))},e}(),Ct=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.predicate=n,r.thisArg=i,r.count=0,r}return r(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(g);function kt(e,t,n){return[_t(t,n)(new C(qe(e))),_t(wt(t,n))(new C(qe(e)))]}function Et(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!d(e[0]))return e[0];e=e[0]}return G(e,void 0).lift(new xt)}var xt=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Tt(e))},e}(),Tt=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var i=Ke(this,e[n],void 0,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==n){var r=this.subscriptions[i];r.unsubscribe(),this.remove(r)}this.subscriptions=null}this.destination.next(t)},t}(Ne);function Pt(e,t,n){return void 0===e&&(e=0),new C((function(i){void 0===t&&(t=e,e=0);var r=0,o=e;if(n)return n.schedule(It,0,{index:r,count:t,start:e,subscriber:i});for(;;){if(r++>=t){i.complete();break}if(i.next(o++),i.closed)break}}))}function It(e){var t=e.start,n=e.index,i=e.count,r=e.subscriber;n>=i?r.complete():(r.next(t),r.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}function Dt(e,t,n){void 0===e&&(e=0);var i=-1;return ut(t)?i=Number(t)<1?1:Number(t):B(t)&&(n=t),B(n)||(n=he),new C((function(t){var r=ut(e)?e:+e-n.now();return n.schedule(Rt,r,{index:0,period:i,subscriber:t})}))}function Rt(e){var t=e.index,n=e.period,i=e.subscriber;if(i.next(t),!i.closed){if(-1===n)return i.complete();e.index=t+1,this.schedule(e,n)}}function Ot(e,t){return new C((function(n){var i,r;try{i=e()}catch(e){return void n.error(e)}try{r=t(i)}catch(e){return void n.error(e)}var o=(r?ze(r):W).subscribe(n);return function(){o.unsubscribe(),i&&i.unsubscribe()}}))}function At(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),G(e,void 0).lift(new Nt(n))}var Nt=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Mt(e,this.resultSelector))},e}(),Mt=function(e){function t(t,n,i){void 0===i&&(i=Object.create(null));var r=e.call(this,t)||this;return r.resultSelector=n,r.iterators=[],r.active=0,r.resultSelector="function"==typeof n?n:void 0,r}return r(t,e),t.prototype._next=function(e){var t=this.iterators;d(e)?t.push(new jt(e)):"function"==typeof e[je]?t.push(new Lt(e[je]())):t.push(new Ft(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var i=e[n];i.stillUnsubscribed?this.destination.add(i.subscribe()):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,i=0;i<t;i++)if("function"==typeof(s=e[i]).hasValue&&!s.hasValue())return;var r=!1,o=[];for(i=0;i<t;i++){var s,a=(s=e[i]).next();if(s.hasCompleted()&&(r=!0),a.done)return void n.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),r&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(g),Lt=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},e}(),jt=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[je]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),Ft=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.parent=n,r.observable=i,r.stillUnsubscribed=!0,r.buffer=[],r.isComplete=!1,r}return r(t,e),t.prototype[je]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return Ye(this.observable,new Je(this))},t}(Ge)},70336:(e,t,n)=>{"use strict";function i(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:()=>i})},2399:(e,t,n)=>{"use strict";var i,r=n(14300),o=r.Buffer,s={};for(i in r)r.hasOwnProperty(i)&&"SlowBuffer"!==i&&"Buffer"!==i&&(s[i]=r[i]);var a=s.Buffer={};for(i in o)o.hasOwnProperty(i)&&"allocUnsafe"!==i&&"allocUnsafeSlow"!==i&&(a[i]=o[i]);if(s.Buffer.prototype=o.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return o(e,t,n)}),a.alloc||(a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var i=o(e);return t&&0!==t.length?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i}),!s.kStringMaxLength)try{s.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),e.exports=s},36625:(e,t)=>{var n;t=e.exports=X,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var i=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,o=i-6,s=t.re=[],a=t.safeRe=[],c=t.src=[],l=0,d="[a-zA-Z0-9-]",u=[["\\s",1],["\\d",i],[d,o]];function p(e){for(var t=0;t<u.length;t++){var n=u[t][0],i=u[t][1];e=e.split(n+"*").join(n+"{0,"+i+"}").split(n+"+").join(n+"{1,"+i+"}")}return e}var h=l++;c[h]="0|[1-9]\\d*";var f=l++;c[f]="\\d+";var m=l++;c[m]="\\d*[a-zA-Z-]"+d+"*";var g=l++;c[g]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var v=l++;c[v]="("+c[f]+")\\.("+c[f]+")\\.("+c[f]+")";var y=l++;c[y]="(?:"+c[h]+"|"+c[m]+")";var b=l++;c[b]="(?:"+c[f]+"|"+c[m]+")";var w=l++;c[w]="(?:-("+c[y]+"(?:\\."+c[y]+")*))";var _=l++;c[_]="(?:-?("+c[b]+"(?:\\."+c[b]+")*))";var S=l++;c[S]=d+"+";var C=l++;c[C]="(?:\\+("+c[S]+"(?:\\."+c[S]+")*))";var k=l++,E="v?"+c[g]+c[w]+"?"+c[C]+"?";c[k]="^"+E+"$";var x="[v=\\s]*"+c[v]+c[_]+"?"+c[C]+"?",T=l++;c[T]="^"+x+"$";var P=l++;c[P]="((?:<|>)?=?)";var I=l++;c[I]=c[f]+"|x|X|\\*";var D=l++;c[D]=c[h]+"|x|X|\\*";var R=l++;c[R]="[v=\\s]*("+c[D]+")(?:\\.("+c[D]+")(?:\\.("+c[D]+")(?:"+c[w]+")?"+c[C]+"?)?)?";var O=l++;c[O]="[v=\\s]*("+c[I]+")(?:\\.("+c[I]+")(?:\\.("+c[I]+")(?:"+c[_]+")?"+c[C]+"?)?)?";var A=l++;c[A]="^"+c[P]+"\\s*"+c[R]+"$";var N=l++;c[N]="^"+c[P]+"\\s*"+c[O]+"$";var M=l++;c[M]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var L=l++;c[L]="(?:~>?)";var j=l++;c[j]="(\\s*)"+c[L]+"\\s+",s[j]=new RegExp(c[j],"g"),a[j]=new RegExp(p(c[j]),"g");var F=l++;c[F]="^"+c[L]+c[R]+"$";var U=l++;c[U]="^"+c[L]+c[O]+"$";var q=l++;c[q]="(?:\\^)";var K=l++;c[K]="(\\s*)"+c[q]+"\\s+",s[K]=new RegExp(c[K],"g"),a[K]=new RegExp(p(c[K]),"g");var V=l++;c[V]="^"+c[q]+c[R]+"$";var W=l++;c[W]="^"+c[q]+c[O]+"$";var $=l++;c[$]="^"+c[P]+"\\s*("+x+")$|^$";var B=l++;c[B]="^"+c[P]+"\\s*("+E+")$|^$";var H=l++;c[H]="(\\s*)"+c[P]+"\\s*("+x+"|"+c[R]+")",s[H]=new RegExp(c[H],"g"),a[H]=new RegExp(p(c[H]),"g");var z=l++;c[z]="^\\s*("+c[R]+")\\s+-\\s+("+c[R]+")\\s*$";var J=l++;c[J]="^\\s*("+c[O]+")\\s+-\\s+("+c[O]+")\\s*$";var G=l++;c[G]="(<|>)?=?\\s*\\*";for(var Y=0;Y<35;Y++)n(Y,c[Y]),s[Y]||(s[Y]=new RegExp(c[Y]),a[Y]=new RegExp(p(c[Y])));function Q(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof X)return e;if("string"!=typeof e)return null;if(e.length>i)return null;if(!(t.loose?a[T]:a[k]).test(e))return null;try{return new X(e,t)}catch(e){return null}}function X(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof X){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>i)throw new TypeError("version is longer than "+i+" characters");if(!(this instanceof X))return new X(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?a[T]:a[k]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=Q,t.valid=function(e,t){var n=Q(e,t);return n?n.version:null},t.clean=function(e,t){var n=Q(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=X,X.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},X.prototype.toString=function(){return this.version},X.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof X||(e=new X(e,this.options)),this.compareMain(e)||this.comparePre(e)},X.prototype.compareMain=function(e){return e instanceof X||(e=new X(e,this.options)),ee(this.major,e.major)||ee(this.minor,e.minor)||ee(this.patch,e.patch)},X.prototype.comparePre=function(e){if(e instanceof X||(e=new X(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var i=this.prerelease[t],r=e.prerelease[t];if(n("prerelease compare",t,i,r),void 0===i&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===i)return-1;if(i!==r)return ee(i,r)}while(++t)},X.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,i){"string"==typeof n&&(i=n,n=void 0);try{return new X(e,n).inc(t,i).version}catch(e){return null}},t.diff=function(e,t){if(re(e,t))return null;var n=Q(e),i=Q(t),r="";if(n.prerelease.length||i.prerelease.length){r="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==i[s])return r+s;return o},t.compareIdentifiers=ee;var Z=/^[0-9]+$/;function ee(e,t){var n=Z.test(e),i=Z.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1}function te(e,t,n){return new X(e,n).compare(new X(t,n))}function ne(e,t,n){return te(e,t,n)>0}function ie(e,t,n){return te(e,t,n)<0}function re(e,t,n){return 0===te(e,t,n)}function oe(e,t,n){return 0!==te(e,t,n)}function se(e,t,n){return te(e,t,n)>=0}function ae(e,t,n){return te(e,t,n)<=0}function ce(e,t,n,i){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return re(e,n,i);case"!=":return oe(e,n,i);case">":return ne(e,n,i);case">=":return se(e,n,i);case"<":return ie(e,n,i);case"<=":return ae(e,n,i);default:throw new TypeError("Invalid operator: "+t)}}function le(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof le){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof le))return new le(e,t);e=e.trim().split(/\s+/).join(" "),n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===de?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return ee(t,e)},t.major=function(e,t){return new X(e,t).major},t.minor=function(e,t){return new X(e,t).minor},t.patch=function(e,t){return new X(e,t).patch},t.compare=te,t.compareLoose=function(e,t){return te(e,t,!0)},t.rcompare=function(e,t,n){return te(t,e,n)},t.sort=function(e,n){return e.sort((function(e,i){return t.compare(e,i,n)}))},t.rsort=function(e,n){return e.sort((function(e,i){return t.rcompare(e,i,n)}))},t.gt=ne,t.lt=ie,t.eq=re,t.neq=oe,t.gte=se,t.lte=ae,t.cmp=ce,t.Comparator=le;var de={};function ue(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ue)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ue(e.raw,t);if(e instanceof le)return new ue(e.value,t);if(!(this instanceof ue))return new ue(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}function pe(e){return!e||"x"===e.toLowerCase()||"*"===e}function he(e,t,n,i,r,o,s,a,c,l,d,u,p){return((t=pe(n)?"":pe(i)?">="+n+".0.0":pe(r)?">="+n+"."+i+".0":">="+t)+" "+(a=pe(c)?"":pe(l)?"<"+(+c+1)+".0.0":pe(d)?"<"+c+"."+(+l+1)+".0":u?"<="+c+"."+l+"."+d+"-"+u:"<="+a)).trim()}function fe(e,t,i){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!i.includePrerelease){for(r=0;r<e.length;r++)if(n(e[r].semver),e[r].semver!==de&&e[r].semver.prerelease.length>0){var o=e[r].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function me(e,t,n){try{t=new ue(t,n)}catch(e){return!1}return t.test(e)}function ge(e,t,n,i){var r,o,s,a,c;switch(e=new X(e,i),t=new ue(t,i),n){case">":r=ne,o=ae,s=ie,a=">",c=">=";break;case"<":r=ie,o=se,s=ne,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(me(e,t,i))return!1;for(var l=0;l<t.set.length;++l){var d=t.set[l],u=null,p=null;if(d.forEach((function(e){e.semver===de&&(e=new le(">=0.0.0")),u=u||e,p=p||e,r(e.semver,u.semver,i)?u=e:s(e.semver,p.semver,i)&&(p=e)})),u.operator===a||u.operator===c)return!1;if((!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}le.prototype.parse=function(e){var t=this.options.loose?a[$]:a[B],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new X(n[2],this.options.loose):this.semver=de},le.prototype.toString=function(){return this.value},le.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===de||("string"==typeof e&&(e=new X(e,this.options)),ce(e,this.operator,this.semver,this.options))},le.prototype.intersects=function(e,t){if(!(e instanceof le))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new ue(e.value,t),me(this.value,n,t);if(""===e.operator)return n=new ue(this.value,t),me(e.semver,n,t);var i=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ce(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ce(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return i||r||o&&s||a||c},t.Range=ue,ue.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ue.prototype.toString=function(){return this.range},ue.prototype.parseRange=function(e){var t=this.options.loose,i=t?a[J]:a[z];e=e.replace(i,he),n("hyphen replace",e),e=e.replace(a[H],"$1$2$3"),n("comparator trim",e,a[H]),e=(e=e.replace(a[j],"$1~")).replace(a[K],"$1^");var r=t?a[$]:a[B],o=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var i=t.loose?a[W]:a[V];return e.replace(i,(function(t,i,r,o,s){var a;return n("caret",e,t,i,r,o,s),pe(i)?a="":pe(r)?a=">="+i+".0.0 <"+(+i+1)+".0.0":pe(o)?a="0"===i?">="+i+"."+r+".0 <"+i+"."+(+r+1)+".0":">="+i+"."+r+".0 <"+(+i+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===i?"0"===r?">="+i+"."+r+"."+o+"-"+s+" <"+i+"."+r+"."+(+o+1):">="+i+"."+r+"."+o+"-"+s+" <"+i+"."+(+r+1)+".0":">="+i+"."+r+"."+o+"-"+s+" <"+(+i+1)+".0.0"):(n("no pr"),a="0"===i?"0"===r?">="+i+"."+r+"."+o+" <"+i+"."+r+"."+(+o+1):">="+i+"."+r+"."+o+" <"+i+"."+(+r+1)+".0":">="+i+"."+r+"."+o+" <"+(+i+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var i=t.loose?a[U]:a[F];return e.replace(i,(function(t,i,r,o,s){var a;return n("tilde",e,t,i,r,o,s),pe(i)?a="":pe(r)?a=">="+i+".0.0 <"+(+i+1)+".0.0":pe(o)?a=">="+i+"."+r+".0 <"+i+"."+(+r+1)+".0":s?(n("replaceTilde pr",s),a=">="+i+"."+r+"."+o+"-"+s+" <"+i+"."+(+r+1)+".0"):a=">="+i+"."+r+"."+o+" <"+i+"."+(+r+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var i=t.loose?a[N]:a[A];return e.replace(i,(function(t,i,r,o,s,a){n("xRange",e,t,i,r,o,s,a);var c=pe(r),l=c||pe(o),d=l||pe(s);return"="===i&&d&&(i=""),c?t=">"===i||"<"===i?"<0.0.0":"*":i&&d?(l&&(o=0),s=0,">"===i?(i=">=",l?(r=+r+1,o=0,s=0):(o=+o+1,s=0)):"<="===i&&(i="<",l?r=+r+1:o=+o+1),t=i+r+"."+o+"."+s):l?t=">="+r+".0.0 <"+(+r+1)+".0.0":d&&(t=">="+r+"."+o+".0 <"+r+"."+(+o+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(a[G],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(e){return!!e.match(r)}))),o.map((function(e){return new le(e,this.options)}),this)},ue.prototype.intersects=function(e,t){if(!(e instanceof ue))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new ue(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ue.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new X(e,this.options));for(var t=0;t<this.set.length;t++)if(fe(this.set[t],e,this.options))return!0;return!1},t.satisfies=me,t.maxSatisfying=function(e,t,n){var i=null,r=null;try{var o=new ue(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(i&&-1!==r.compare(e)||(r=new X(i=e,n)))})),i},t.minSatisfying=function(e,t,n){var i=null,r=null;try{var o=new ue(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(i&&1!==r.compare(e)||(r=new X(i=e,n)))})),i},t.minVersion=function(e,t){e=new ue(e,t);var n=new X("0.0.0");if(e.test(n))return n;if(n=new X("0.0.0-0"),e.test(n))return n;n=null;for(var i=0;i<e.set.length;++i)e.set[i].forEach((function(e){var t=new X(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!ne(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return n&&e.test(n)?n:null},t.validRange=function(e,t){try{return new ue(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return ge(e,t,"<",n)},t.gtr=function(e,t,n){return ge(e,t,">",n)},t.outside=ge,t.prerelease=function(e,t){var n=Q(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new ue(e,n),t=new ue(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof X)return e;if("string"!=typeof e)return null;var t=e.match(a[M]);return null==t?null:Q(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},76372:e=>{"use strict";function t(e){return"function"==typeof e}var n=console.error.bind(console);function i(e,t,n){var i=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:i,writable:!0,value:n})}function r(e){e&&e.logger&&(t(e.logger)?n=e.logger:n("new logger isn't a function, not replacing"))}function o(e,r,o){if(e&&e[r]){if(!o)return n("no wrapper function"),void n((new Error).stack);if(t(e[r])&&t(o)){var s=e[r],a=o(s,r);return i(a,"__original",s),i(a,"__unwrap",(function(){e[r]===a&&i(e,r,s)})),i(a,"__wrapped",!0),i(e,r,a),a}n("original object and wrapper must be functions")}else n("no original function "+r+" to wrap")}function s(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void n("no original to unwrap to -- has "+t+" already been unwrapped?"):(n("no function to unwrap."),void n((new Error).stack))}r.wrap=o,r.massWrap=function(e,t,i){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){o(e,t,i)}))})):n("must provide one or more functions to wrap on modules")},r.unwrap=s,r.massUnwrap=function(e,t){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){s(e,t)}))})):n("must provide one or more functions to unwrap on modules")},e.exports=r},60465:e=>{e.exports=function(e,t){var n=[];n.push(function(e){try{return Error.prototype.toString.call(e)}catch(e){try{return"<error: "+e+">"}catch(e){return"<error>"}}}(e));for(var i=0;i<t.length;i++){var r,o=t[i];try{r=o.toString()}catch(e){try{r="<error: "+e+">"}catch(e){r="<error>"}}n.push("    at "+r)}return n.join("\n")}},92512:(e,t,n)=>{if(global._stackChain){if(global._stackChain.version!==n(32301).i8)throw new Error("Conflicting version of stack-chain found");e.exports=global._stackChain}else e.exports=global._stackChain=n(87898)},87898:(e,t,n)=>{var i=n(60465);function r(){this.extend=new a,this.filter=new a,this.format=new c,this.version=n(32301).i8}var o=!1;r.prototype.callSite=function e(t){t||(t={}),o=!0;var n={};Error.captureStackTrace(n,e);var i=n.stack;return o=!1,i=i.slice(t.slice||0),t.extend&&(i=this.extend._modify(n,i)),t.filter&&(i=this.filter._modify(n,i)),i};var s=new r;function a(){this._modifiers=[]}function c(){this._formater=i,this._previous=void 0}a.prototype._modify=function(e,t){for(var n=0,i=this._modifiers.length;n<i;n++)t=this._modifiers[n](e,t);return t},a.prototype.attach=function(e){this._modifiers.push(e)},a.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return-1!==t&&(this._modifiers.splice(t,1),!0)},c.prototype.replace=function(e){e?this._formater=e:this.restore()},c.prototype.restore=function(){this._formater=i,this._previous=void 0},c.prototype._backup=function(){this._previous=this._formater},c.prototype._roolback=function(){this._previous===i?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&s.format.replace(Error.prepareStackTrace);var l=!1;function d(e,t){if(o)return t;if(l)return i(e,t);var n=t.concat();n=s.extend._modify(e,n),n=(n=s.filter._modify(e,n)).slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&void 0===Object.getOwnPropertyDescriptor(e,"callSite")&&(e.callSite={original:t,mutated:n}),l=!0;var r=s.format._formater(e,n);return l=!1,r}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return d},set:function(e){e===d?s.format._roolback():(s.format._backup(),s.format.replace(e))}}),Object.defineProperty(Error.prototype,"callSite",{get:function(){return this.stack,this.callSite},set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0}),e.exports=s},77911:(e,t)=>{function n(e){for(var t in e)this[t]=e[t]}t.get=function(e){var n=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var i={},r=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t},Error.captureStackTrace(i,e||t.get);var o=i.stack;return Error.prepareStackTrace=r,Error.stackTraceLimit=n,o},t.parse=function(e){if(!e.stack)return[];var t=this;return e.stack.split("\n").slice(1).map((function(e){if(e.match(/^\s*[-]{4,}$/))return t._createParsedCallSite({fileName:e,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var n=e.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(n){var i=null,r=null,o=null,s=null,a=null,c="native"===n[5];if(n[1]){var l=(o=n[1]).lastIndexOf(".");if("."==o[l-1]&&l--,l>0){i=o.substr(0,l),r=o.substr(l+1);var d=i.indexOf(".Module");d>0&&(o=o.substr(d+1),i=i.substr(0,d))}s=null}r&&(s=i,a=r),"<anonymous>"===r&&(a=null,o=null);var u={fileName:n[2]||null,lineNumber:parseInt(n[3],10)||null,functionName:o,typeName:s,methodName:a,columnNumber:parseInt(n[4],10)||null,native:c};return t._createParsedCallSite(u)}})).filter((function(e){return!!e}))},["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"].forEach((function(e){n.prototype[e]=null,n.prototype["get"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),["topLevel","eval","native","constructor"].forEach((function(e){n.prototype[e]=!1,n.prototype["is"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),t._createParsedCallSite=function(e){return new n(e)}},44110:(e,t,n)=>{"use strict";const i=n(33406),r=n(49598),o=e.exports=(e,t)=>{const n={...t,block:!0,line:!0};return i(r(e,n),n)};o.block=(e,t)=>{const n={...t,block:!0};return i(r(e,n),n)},o.line=(e,t)=>{const n={...t,line:!0};return i(r(e,n),n)},o.first=(e,t)=>{const n={...t,block:!0,line:!0,first:!0};return i(r(e,n),n)},o.parse=r},50985:e=>{"use strict";class t{constructor(e){this.type=e.type,e.value&&(this.value=e.value),e.match&&(this.match=e.match),this.newline=e.newline||""}get protected(){return Boolean(this.match)&&"!"===this.match[1]}}e.exports={Node:t,Block:class extends t{constructor(e){super(e),this.nodes=e.nodes||[]}push(e){this.nodes.push(e)}get protected(){return this.nodes.length>0&&!0===this.nodes[0].protected}}}},33406:e=>{"use strict";e.exports=(e,t={})=>{const n=!0===t.safe||!0===t.keepProtected;let i=!1;const r=(e,o)=>{let s,a,c="";for(const o of e.nodes)switch(o.type){case"block":if(t.first&&!0===i){c+=r(o,e);break}if(!0===t.preserveNewlines){s=r(o,e),a=s.split("\n"),c+="\n".repeat(a.length-1);break}if(!0===n&&!0===o.protected){c+=r(o,e);break}i=!0;break;case"line":if(t.first&&!0===i){c+=o.value;break}!0===n&&!0===o.protected&&(c+=o.value),i=!0;break;default:c+=o.value||""}return c};return r(e)}},38657:(e,t)=>{"use strict";t.javascript={BLOCK_OPEN_REGEX:/^\/\*\*?(!?)/,BLOCK_CLOSE_REGEX:/^\*\/(\n?)/,LINE_REGEX:/^\/\/(!?).*/}},49598:(e,t,n)=>{"use strict";const{Node:i,Block:r}=n(50985),o=n(38657),s=/^\\./,a=/^(['"`])((?:\\.|[^\1])+?)(\1)/,c=/^\r*\n/;e.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");const n=new r({type:"root",nodes:[]}),l=[n],d=(t.language||"javascript").toLowerCase(),u=o[d];if(void 0===u)throw new Error(`Language "${d}" is not supported by strip-comments`);const{LINE_REGEX:p,BLOCK_OPEN_REGEX:h,BLOCK_CLOSE_REGEX:f}=u;let m,g,v=n,y=e,b=!1;[h,f].filter(Boolean).every((e=>'^"""'===e.source))&&(b=!0);const w=(e=y[0]||"")=>(y=y.slice(e.length),e),_=(e,t="text")=>{const n=e.exec(y);if(n)return w(n[0]),{type:t,value:n[0],match:n}},S=e=>{g&&"text"===g.type&&"text"===e.type?g.value+=e.value:(v.push(e),e.nodes&&(l.push(e),v=e),g=e)},C=()=>{if("root"===v.type)throw new SyntaxError("Unclosed block comment");l.pop(),v=l[l.length-1]};for(;""!==y;)(m=_(s,"text"))?S(new i(m)):"block"===v.type||g&&/\w$/.test(g.value)||b&&y.startsWith('"""')||!(m=_(a,"text"))?(m=_(c,"newline"))?S(new i(m)):!h||!t.block||b&&"block"===v.type||!(m=_(h,"open"))?f&&"block"===v.type&&t.block&&(m=_(f,"close"))?(m.newline=m.match[1]||"",S(new i(m)),C()):p&&"block"!==v.type&&t.line&&(m=_(p,"line"))||(m=_(/^[a-zABD-Z0-9\t ]+/,"text"))?S(new i(m)):S(new i({type:"text",value:w(y[0])})):(S(new r({type:"block"})),S(new i(m))):S(new i(m));return n}},92130:(e,t,n)=>{"use strict";const i=n(22037),r=n(86560),o=process.env;let s;function a(e){const t=function(e){if(!1===s)return 0;if(r("color=16m")||r("color=full")||r("color=truecolor"))return 3;if(r("color=256"))return 2;if(e&&!e.isTTY&&!0!==s)return 0;const t=s?1:0;if("win32"===process.platform){const e=i.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((e=>e in o))||"codeship"===o.CI_NAME?1:t;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:(o.TERM,t)}(e);return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(t)}r("no-color")||r("no-colors")||r("color=false")?s=!1:(r("color")||r("colors")||r("color=true")||r("color=always"))&&(s=!0),"FORCE_COLOR"in o&&(s=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},14802:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(26363);t.ExperimentationService=i.ExperimentationService},26363:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(34067),r=n(44234),o=n(15975);class s extends o.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],null!=e.refetchInterval?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new i.TasApiFeatureProvider(new r.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}t.ExperimentationService=s,s.REFRESH_RATE_IN_MINUTES=30},15975:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(23663),r=n(73334);class o extends i.ExperimentationServiceBase{constructor(e,t,n,i,o,s,a){if(super(e,i,o,s,a),this.telemetry=e,this.filterProviders=t,this.refreshRateMs=n,this.assignmentContextTelemetryPropertyName=i,this.telemetryEventName=o,this.storageKey=s,this.storage=a,n<1e3&&0!==n)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new r.PollingService(n),this.pollingService.OnPollTick((async()=>{await super.getFeaturesAsync()})))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let t=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),t}return await super.getFeaturesAsync(e)}}t.ExperimentationServiceAutoPolling=o},23663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(17002);t.ExperimentationServiceBase=class{constructor(e,t,n,r,o){this.telemetry=e,this.assignmentContextTelemetryPropertyName=t,this.telemetryEventName=n,this.storageKey=r,this.storage=o,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(o=new i.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise(((e,t)=>{this.resolveInitialFetchPromise=e}))}get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}async getFeaturesAsync(e=!1){if(null!=this.fetchPromise){try{await this.fetchPromise}catch(e){}return this.features}if(!this.featureProviders||0===this.featureProviders.length)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map((async e=>await e.getFeatures())));const t=await this.fetchPromise;this.updateFeatures(t,e)}catch(e){}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,t=!1){let n={features:[],assignmentContext:"",configs:[]};for(let t of e){for(let e of t.features)n.features.includes(e)||n.features.push(e);for(let e of t.configs){const t=n.configs.find((t=>t.Id===e.Id));t?t.Parameters=Object.assign(Object.assign({},t.Parameters),e.Parameters):n.configs.push(e)}n.assignmentContext+=t.assignmentContext}!t&&this.featuresConsumed||(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),void 0!==e&&void 0===e.configs&&(e.configs=[])),0===this.features.features.length&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){const t=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),t.features.includes(e)}getTreatmentVariable(e,t){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${t}`),null===(n=this.features.configs.find((t=>t.Id===e)))||void 0===n?void 0:n.Parameters[t]}async getTreatmentVariableAsync(e,t,n){if(n){const n=this.featuresConsumed,i=this.getTreatmentVariable(e,t);if(void 0!==i)return i;this.featuresConsumed=n}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,t)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(null!=e&&null!=this.featureProviders)for(let t of e)this.featureProviders.push(t)}}},60069:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFeatureProvider=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}}},94e3:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(60069);class r extends i.BaseFeatureProvider{constructor(e,t){super(e),this.telemetry=e,this.filterProviders=t,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let t of this.filterProviders){let n=t.getFilters();for(let t of n.keys()){let i=n.get(t);e.set(t,i)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;const t=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",t]])),this.cachedTelemetryEvents.push(e)}}t.FilteredFeatureProvider=r},34067:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(94e3);t.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";const r="ErrorType";class o extends i.FilteredFeatureProvider{constructor(e,t,n){super(t,n),this.httpClient=e,this.telemetry=t,this.filterProviders=n}async fetch(){let e,n=this.getFilters(),i={};for(let e of n.keys()){const t=n.get(e);i[e]=t}try{e=await this.httpClient.get({headers:i})}catch(e){const n=e,i=new Map;n.response?i.set(r,"ServerError"):n.request?i.set(r,"NoResponse"):i.set(r,"GenericError"),this.telemetry.postEvent(t.TASAPI_FETCHERROR_EVENTNAME,i)}if(!e)throw Error(t.TASAPI_FETCHERROR_EVENTNAME);n.keys.length>0&&this.PostEventToTelemetry(i);let o=e.data,s=o.Configs,a=[];for(let e of s)if(e.Parameters)for(let t of Object.keys(e.Parameters)){const n=t+(e.Parameters[t]?"":"cf");a.includes(n)||a.push(n)}return{features:a,assignmentContext:o.AssignmentContext,configs:s}}}t.TasApiFeatureProvider=o},44234:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9669);t.AxiosHttpClient=class{constructor(e){this.endpoint=e}get(e){return i.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}}},17002:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryKeyValueStorage=class{constructor(){this.storage=new Map}async getValue(e,t){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(t||void 0)}setValue(e,t){this.storage.set(e,t)}}},73334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PollingService=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),null!=this.onTick&&(e&&this.onTick().then((()=>{})).catch((()=>{})),this.intervalHandle=setInterval((async()=>{await this.onTick()}),this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}},36276:(e,t,n)=>{var i=n(57147),r=n(71017),o=n(6113),s=n(55339),a=n(22057),c=s(),l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",d=/XXXXXX/,u=a.O_CREAT|a.O_EXCL|a.O_RDWR,p=[],h=!1;function f(e){var t=[],n=null;try{n=o.randomBytes(e)}catch(t){n=o.pseudoRandomBytes(e)}for(var i=0;i<e;i++)t.push(l[n[i]%l.length]);return t.join("")}function m(e,t){if("function"==typeof e){var n=e;e=t||{},t=n}else void 0===e&&(e={});return[e,t]}function g(e){if(e.name)return r.join(e.dir||c,e.name);if(e.template)return e.template.replace(d,f(6));var t=[e.prefix||"tmp-",process.pid,f(12),e.postfix||""].join("");return r.join(e.dir||c,t)}function v(e,t){var n=!1;return function i(){if(!n){var r=p.indexOf(i);r>=0&&p.splice(r,1),n=!0,e(t)}}}function y(){if(!h)for(var e=0,t=p.length;e<t;e++)try{p[e].call(null)}catch(e){}}var b=process.versions.node.split(".").map((function(e){return parseInt(e,10)}));0===b[0]&&(b[1]<9||9===b[1]&&b[2]<5)&&process.addListener("uncaughtException",(function(e){throw h=!0,y(),e})),process.addListener("exit",(function(e){e&&(h=!0),y()})),e.exports.tP=function(e,t){var n=m(e,t),r=n[0],o=n[1];r.postfix=void 0===r.postfix?".tmp":r.postfix,function(e,t){var n=m(e,t),r=n[0],o=n[1],s=r.tries||3;isNaN(s)||s<0?o(new Error("Invalid tries")):r.template&&!r.template.match(d)?o(new Error("Invalid template provided")):function e(){var t=g(r);i.stat(t,(function(n){if(!n)return s-- >0?e():o(new Error("Could not get a unique tmp filename, max tries reached "+t));o(null,t)}))}()}(r,(function(e,t){if(e)return o(e);i.open(t,u,r.mode||384,(function(e,n){if(e)return o(e);o(null,t,n,function(e,t,n){var r=v((function(e){try{i.closeSync(e[0])}catch(e){if(e.errno!=-a.EBADF&&e.errno!=-a.ENOENT)throw e}i.unlinkSync(e[1])}),[t,e]);return n.keep||p.unshift(r),r}(t,n,r))}))}))}},38981:(e,t)=>{"use strict";t.E=function(e){return Object.defineProperty((function(){if("function"!=typeof arguments[arguments.length-1])return new Promise(((t,n)=>{arguments[arguments.length]=(e,i)=>{if(e)return n(e);t(i)},arguments.length++,e.apply(this,arguments)}));e.apply(this,arguments)}),"name",{value:e.name})},t.p=function(e){return Object.defineProperty((function(){const t=arguments[arguments.length-1];if("function"!=typeof t)return e.apply(this,arguments);e.apply(this,arguments).then((e=>t(null,e)),t)}),"name",{value:e.name})}},84564:(e,t,n)=>{"use strict";var i=n(47418),r=n(57129),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,d=/^[a-zA-Z]:/;function u(e){return(e||"").toString().replace(o,"")}var p=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function f(e){var t,n=("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}).location||{},i={},r=typeof(e=e||n);if("blob:"===e.protocol)i=new v(unescape(e.pathname),{});else if("string"===r)for(t in i=new v(e,{}),h)delete i[t];else if("object"===r){for(t in e)t in h||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=u(e)).replace(s,""),t=t||{};var n,i=l.exec(e),r=i[1]?i[1].toLowerCase():"",o=!!i[2],a=!!i[3],c=0;return o?a?(n=i[2]+i[3]+i[4],c=i[2].length+i[3].length):(n=i[2]+i[4],c=i[2].length):a?(n=i[3]+i[4],c=i[3].length):n=i[4],"file:"===r?c>=2&&(n=n.slice(2)):m(r)?n=i[4]:r?o&&(n=n.slice(2)):c>=2&&m(t.protocol)&&(n=i[4]),{protocol:r,slashes:o||m(r),slashesCount:c,rest:n}}function v(e,t,n){if(e=(e=u(e)).replace(s,""),!(this instanceof v))return new v(e,t,n);var o,a,c,l,h,y,b=p.slice(),w=typeof t,_=this,S=0;for("object"!==w&&"string"!==w&&(n=t,t=null),n&&"function"!=typeof n&&(n=r.parse),o=!(a=g(e||"",t=f(t))).protocol&&!a.slashes,_.slashes=a.slashes||o&&t.slashes,_.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||d.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!m(_.protocol)))&&(b[3]=[/(.*)/,"pathname"]);S<b.length;S++)"function"!=typeof(l=b[S])?(c=l[0],y=l[1],c!=c?_[y]=e:"string"==typeof c?~(h="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(_[y]=e.slice(0,h),e=e.slice(h+l[2])):(_[y]=e.slice(h),e=e.slice(0,h))):(h=c.exec(e))&&(_[y]=h[1],e=e.slice(0,h.index)),_[y]=_[y]||o&&l[3]&&t[y]||"",l[4]&&(_[y]=_[y].toLowerCase())):e=l(e,_);n&&(_.query=n(_.query)),o&&t.slashes&&"/"!==_.pathname.charAt(0)&&(""!==_.pathname||""!==t.pathname)&&(_.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),i=n.length,r=n[i-1],o=!1,s=0;i--;)"."===n[i]?n.splice(i,1):".."===n[i]?(n.splice(i,1),s++):s&&(0===i&&(o=!0),n.splice(i,1),s--);return o&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(_.pathname,t.pathname)),"/"!==_.pathname.charAt(0)&&m(_.protocol)&&(_.pathname="/"+_.pathname),i(_.port,_.protocol)||(_.host=_.hostname,_.port=""),_.username=_.password="",_.auth&&(~(h=_.auth.indexOf(":"))?(_.username=_.auth.slice(0,h),_.username=encodeURIComponent(decodeURIComponent(_.username)),_.password=_.auth.slice(h+1),_.password=encodeURIComponent(decodeURIComponent(_.password))):_.username=encodeURIComponent(decodeURIComponent(_.auth)),_.auth=_.password?_.username+":"+_.password:_.username),_.origin="file:"!==_.protocol&&m(_.protocol)&&_.host?_.protocol+"//"+_.host:"null",_.href=_.toString()}v.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||r.parse)(t)),o[e]=t;break;case"port":o[e]=t,i(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,c.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";o[e]=t.charAt(0)!==s?s+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(o.username=t.slice(0,a),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(a+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<p.length;l++){var d=p[l];d[4]&&(o[d[1]]=o[d[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&m(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=r.stringify);var t,n=this,i=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var s=o+(n.protocol&&n.slashes||m(n.protocol)?"//":"");return n.username?(s+=n.username,n.password&&(s+=":"+n.password),s+="@"):n.password?(s+=":"+n.password,s+="@"):"file:"!==n.protocol&&m(n.protocol)&&!i&&"/"!==n.pathname&&(s+="@"),(":"===i[i.length-1]||c.test(n.hostname)&&!n.port)&&(i+=":"),s+=i+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(s+=n.hash),s}},v.extractProtocol=g,v.location=f,v.trimLeft=u,v.qs=r,e.exports=v},60137:e=>{"use strict";e.exports=function(e){const t=e.length;let n=0;for(;n<t;)if(0==(128&e[n]))n++;else if(192==(224&e[n])){if(n+1===t||128!=(192&e[n+1])||192==(254&e[n]))return!1;n+=2}else if(224==(240&e[n])){if(n+2>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||224===e[n]&&128==(224&e[n+1])||237===e[n]&&160==(224&e[n+1]))return!1;n+=3}else{if(240!=(248&e[n]))return!1;if(n+3>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||128!=(192&e[n+3])||240===e[n]&&128==(240&e[n+1])||244===e[n]&&e[n+1]>143||e[n]>244)return!1;n+=4}return!0}},70311:(e,t,n)=>{"use strict";try{e.exports=n(19516)(__dirname)}catch(t){e.exports=n(60137)}},45327:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var i=n||0,r=t;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},556:(e,t,n)=>{var i=n(6113);e.exports=function(){return i.randomBytes(16)}},71171:(e,t,n)=>{var i=n(556),r=n(45327);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||i)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||r(s)}},23870:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFormat=t.TraceValues=t.Trace=t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=void 0;const i=n(20839);Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return i.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return i.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return i.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return i.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return i.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return i.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return i.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return i.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return i.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return i.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return i.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return i.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return i.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return i.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return i.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return i.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return i.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return i.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return i.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return i.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return i.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return i.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return i.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return i.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return i.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return i.ParameterStructures}});const r=n(96184);Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return r.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return r.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return r.Touch}});const o=n(83911);Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return o.Disposable}});const s=n(27135);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return s.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return s.Emitter}});const a=n(13881);Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return a.CancellationToken}});const c=n(56525);Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return c.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return c.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return c.ReadableStreamMessageReader}});const l=n(96654);Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return l.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return l.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return l.WriteableStreamMessageWriter}});const d=n(61343);Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return d.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return d.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return d.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return d.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return d.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return d.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return d.Trace}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return d.TraceValues}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return d.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return d.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return d.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return d.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return d.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return d.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return d.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return d.CancellationStrategy}});const u=n(30147);t.RAL=u.default},13881:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;const i=n(30147),r=n(67574),o=n(27135);var s;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:o.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:o.Event.None}),e.is=function(t){const n=t;return n&&(n===e.None||n===e.Cancelled||r.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(s=t.CancellationToken||(t.CancellationToken={}));const a=Object.freeze((function(e,t){const n=(0,i.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}));class c{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new o.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new c),this._token}cancel(){this._token?this._token.cancel():this._token=s.Cancelled}dispose(){this._token?this._token instanceof c&&this._token.dispose():this._token=s.None}}},61343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;const i=n(30147),r=n(67574),o=n(20839),s=n(96184),a=n(27135),c=n(13881);var l,d,u,p,h,f,m,g,v,y,b,w,_,S,C;!function(e){e.type=new o.NotificationType("$/cancelRequest")}(l||(l={})),function(e){e.is=function(e){return"string"==typeof e||"number"==typeof e}}(d=t.ProgressToken||(t.ProgressToken={})),function(e){e.type=new o.NotificationType("$/progress")}(u||(u={})),t.ProgressType=class{constructor(){}},function(e){e.is=function(e){return r.func(e)}}(p||(p={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"}(h=t.Trace||(t.Trace={})),(C=t.TraceValues||(t.TraceValues={})).Off="off",C.Messages="messages",C.Compact="compact",C.Verbose="verbose",function(e){e.fromString=function(t){if(!r.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}}(h=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return r.string(t)&&"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(f=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTrace")}(m=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTrace")}(g=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(v=t.ConnectionErrors||(t.ConnectionErrors={}));class k extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,k.prototype)}}t.ConnectionError=k,function(e){e.is=function(e){const t=e;return t&&r.func(t.cancelUndispatched)}}(y=t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new c.CancellationTokenSource}),e.is=function(e){const t=e;return t&&r.func(t.createCancellationTokenSource)}}(b=t.CancellationReceiverStrategy||(t.CancellationReceiverStrategy={})),function(e){e.Message=Object.freeze({sendCancellation:(e,t)=>e.sendNotification(l.type,{id:t}),cleanup(e){}}),e.is=function(e){const t=e;return t&&r.func(t.sendCancellation)&&r.func(t.cleanup)}}(w=t.CancellationSenderStrategy||(t.CancellationSenderStrategy={})),function(e){e.Message=Object.freeze({receiver:b.Message,sender:w.Message}),e.is=function(e){const t=e;return t&&b.is(t.receiver)&&w.is(t.sender)}}(_=t.CancellationStrategy||(t.CancellationStrategy={})),(t.ConnectionOptions||(t.ConnectionOptions={})).is=function(e){const t=e;return t&&(_.is(t.cancellationStrategy)||y.is(t.connectionStrategy))},function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(S||(S={})),t.createMessageConnection=function(e,n,y,b){const w=void 0!==y?y:t.NullLogger;let C=0,E=0,x=0;const T="2.0";let P;const I=new Map;let D;const R=new Map,O=new Map;let A,N,M=new s.LinkedMap,L=new Map,j=new Set,F=new Map,U=h.Off,q=f.Text,K=S.New;const V=new a.Emitter,W=new a.Emitter,$=new a.Emitter,B=new a.Emitter,H=new a.Emitter,z=b&&b.cancellationStrategy?b.cancellationStrategy:_.Message;function J(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function G(e){}function Y(){return K===S.Listening}function Q(){return K===S.Closed}function X(){return K===S.Disposed}function Z(){K!==S.New&&K!==S.Listening||(K=S.Closed,W.fire(void 0))}function ee(){A||0===M.size||(A=(0,i.default)().timer.setImmediate((()=>{A=void 0,function(){if(0===M.size)return;const e=M.shift();try{o.Message.isRequest(e)?function(e){if(X())return;function t(t,i,r){const s={jsonrpc:T,id:e.id};t instanceof o.ResponseError?s.error=t.toJson():s.result=void 0===t?null:t,ie(s,i,r),n.write(s).catch((()=>w.error("Sending response failed.")))}function i(t,i,r){const o={jsonrpc:T,id:e.id,error:t.toJson()};ie(o,i,r),n.write(o).catch((()=>w.error("Sending response failed.")))}!function(e){if(U!==h.Off&&N)if(q===f.Text){let t;U!==h.Verbose&&U!==h.Compact||!e.params||(t=`Params: ${ne(e.params)}\n\n`),N.log(`Received request '${e.method} - (${e.id})'.`,t)}else oe("receive-request",e)}(e);const s=I.get(e.method);let a,c;s&&(a=s.type,c=s.handler);const l=Date.now();if(c||P){const s=e.id??String(Date.now()),d=z.receiver.createCancellationTokenSource(s);null!==e.id&&j.has(e.id)&&d.cancel(),null!==e.id&&F.set(s,d);try{let u;if(c)if(void 0===e.params){if(void 0!==a&&0!==a.numberOfParams)return void i(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines ${a.numberOfParams} params but received none.`),e.method,l);u=c(d.token)}else if(Array.isArray(e.params)){if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byName)return void i(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,l);u=c(...e.params,d.token)}else{if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byPosition)return void i(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,l);u=c(e.params,d.token)}else P&&(u=P(e.method,e.params,d.token));const p=u;u?p.then?p.then((n=>{F.delete(s),t(n,e.method,l)}),(t=>{F.delete(s),t instanceof o.ResponseError?i(t,e.method,l):t&&r.string(t.message)?i(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):i(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)})):(F.delete(s),t(u,e.method,l)):(F.delete(s),function(t,i,r){void 0===t&&(t=null);const o={jsonrpc:T,id:e.id,result:t};ie(o,i,r),n.write(o).catch((()=>w.error("Sending response failed.")))}(u,e.method,l))}catch(n){F.delete(s),n instanceof o.ResponseError?t(n,e.method,l):n&&r.string(n.message)?i(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${n.message}`),e.method,l):i(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else i(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}(e):o.Message.isNotification(e)?function(e){if(X())return;let t,n;if(e.method===l.type.method){const t=e.params.id;return j.delete(t),void re(e)}{const i=R.get(e.method);i&&(n=i.handler,t=i.type)}if(n||D)try{if(re(e),n)if(void 0===e.params)void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==o.ParameterStructures.byName&&w.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),n();else if(Array.isArray(e.params)){const i=e.params;e.method===u.type.method&&2===i.length&&d.is(i[0])?n({token:i[0],value:i[1]}):(void 0!==t&&(t.parameterStructures===o.ParameterStructures.byName&&w.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&w.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${i.length} arguments`)),n(...i))}else void 0!==t&&t.parameterStructures===o.ParameterStructures.byPosition&&w.error(`Notification ${e.method} defines parameters by position but received parameters by name`),n(e.params);else D&&D(e.method,e.params)}catch(t){t.message?w.error(`Notification handler '${e.method}' failed with message: ${t.message}`):w.error(`Notification handler '${e.method}' failed unexpectedly.`)}else $.fire(e)}(e):o.Message.isResponse(e)?function(e){if(!X())if(null===e.id)e.error?w.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):w.error("Received response message without id. No further error information provided.");else{const t=e.id,n=L.get(t);if(function(e,t){if(U!==h.Off&&N)if(q===f.Text){let n;if(U!==h.Verbose&&U!==h.Compact||(e.error&&e.error.data?n=`Error data: ${ne(e.error.data)}\n\n`:e.result?n=`Result: ${ne(e.result)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const i=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";N.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${i}`,n)}else N.log(`Received response ${e.id} without active response promise.`,n)}else oe("receive-response",e)}(e,n),void 0!==n){L.delete(t);try{if(e.error){const t=e.error;n.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?w.error(`Response handler '${n.method}' failed with message: ${e.message}`):w.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void w.error("Received empty message.");w.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(r.string(t.id)||r.number(t.id)){const e=t.id,n=L.get(e);n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{ee()}}()})))}e.onClose(Z),e.onError((function(e){V.fire([e,void 0,void 0])})),n.onClose(Z),n.onError((function(e){V.fire(e)}));const te=e=>{try{if(o.Message.isNotification(e)&&e.method===l.type.method){const t=e.params.id,i=J(t),r=M.get(i);if(o.Message.isRequest(r)){const o=b?.connectionStrategy,s=o&&o.cancelUndispatched?o.cancelUndispatched(r,G):void 0;if(s&&(void 0!==s.error||void 0!==s.result))return M.delete(i),F.delete(t),s.id=r.id,ie(s,e.method,Date.now()),void n.write(s).catch((()=>w.error("Sending response for canceled message failed.")))}const s=F.get(t);if(void 0!==s)return s.cancel(),void re(e);j.add(t)}!function(e,t){var n;o.Message.isRequest(t)?e.set(J(t.id),t):o.Message.isResponse(t)?e.set(null===(n=t.id)?"res-unknown-"+(++x).toString():"res-"+n.toString(),t):e.set("not-"+(++E).toString(),t)}(M,e)}finally{ee()}};function ne(e){if(null!=e)switch(U){case h.Verbose:return JSON.stringify(e,null,4);case h.Compact:return JSON.stringify(e);default:return}}function ie(e,t,n){if(U!==h.Off&&N)if(q===f.Text){let i;U!==h.Verbose&&U!==h.Compact||(e.error&&e.error.data?i=`Error data: ${ne(e.error.data)}\n\n`:e.result?i=`Result: ${ne(e.result)}\n\n`:void 0===e.error&&(i="No result returned.\n\n")),N.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,i)}else oe("send-response",e)}function re(e){if(U!==h.Off&&N&&e.method!==g.type.method)if(q===f.Text){let t;U!==h.Verbose&&U!==h.Compact||(t=e.params?`Params: ${ne(e.params)}\n\n`:"No parameters provided.\n\n"),N.log(`Received notification '${e.method}'.`,t)}else oe("receive-notification",e)}function oe(e,t){if(!N||U===h.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};N.log(n)}function se(){if(Q())throw new k(v.Closed,"Connection is closed.");if(X())throw new k(v.Disposed,"Connection is disposed.")}function ae(e){return void 0===e?null:e}function ce(e){return null===e?void 0:e}function le(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function de(e,t){switch(e){case o.ParameterStructures.auto:return le(t)?ce(t):[ae(t)];case o.ParameterStructures.byName:if(!le(t))throw new Error("Received parameters by name but param is not an object literal.");return ce(t);case o.ParameterStructures.byPosition:return[ae(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function ue(e,t){let n;const i=e.numberOfParams;switch(i){case 0:n=void 0;break;case 1:n=de(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<i;e++)n.push(ae(t[e]));if(t.length<i)for(let e=t.length;e<i;e++)n.push(null)}return n}const pe={sendNotification:(e,...t)=>{let i,s;if(se(),r.string(e)){i=e;const n=t[0];let r=0,a=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(r=1,a=n);let c=t.length;const l=c-r;switch(l){case 0:s=void 0;break;case 1:s=de(a,t[r]);break;default:if(a===o.ParameterStructures.byName)throw new Error(`Received ${l} parameters for 'by Name' notification parameter structure.`);s=t.slice(r,c).map((e=>ae(e)))}}else{const n=t;i=e.method,s=ue(e,n)}const a={jsonrpc:T,method:i,params:s};return function(e){if(U!==h.Off&&N)if(q===f.Text){let t;U!==h.Verbose&&U!==h.Compact||(t=e.params?`Params: ${ne(e.params)}\n\n`:"No parameters provided.\n\n"),N.log(`Sending notification '${e.method}'.`,t)}else oe("send-notification",e)}(a),n.write(a).catch((()=>w.error("Sending notification failed.")))},onNotification:(e,t)=>{let n;return se(),r.func(e)?D=e:t&&(r.string(e)?(n=e,R.set(e,{type:void 0,handler:t})):(n=e.method,R.set(e.method,{type:e,handler:t}))),{dispose:()=>{void 0!==n?R.delete(n):D=void 0}}},onProgress:(e,t,n)=>{if(O.has(t))throw new Error(`Progress handler for token ${t} already registered`);return O.set(t,n),{dispose:()=>{O.delete(t)}}},sendProgress:(e,t,n)=>pe.sendNotification(u.type,{token:t,value:n}),onUnhandledProgress:B.event,sendRequest:(e,...t)=>{let i,s,a;if(se(),function(){if(!Y())throw new Error("Call listen() first.")}(),r.string(e)){i=e;const n=t[0],r=t[t.length-1];let l=0,d=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(l=1,d=n);let u=t.length;c.CancellationToken.is(r)&&(u-=1,a=r);const p=u-l;switch(p){case 0:s=void 0;break;case 1:s=de(d,t[l]);break;default:if(d===o.ParameterStructures.byName)throw new Error(`Received ${p} parameters for 'by Name' request parameter structure.`);s=t.slice(l,u).map((e=>ae(e)))}}else{const n=t;i=e.method,s=ue(e,n);const r=e.numberOfParams;a=c.CancellationToken.is(n[r])?n[r]:void 0}const l=C++;let d;return a&&(d=a.onCancellationRequested((()=>{const e=z.sender.sendCancellation(pe,l);return void 0===e?(w.log(`Received no promise from cancellation strategy when cancelling id ${l}`),Promise.resolve()):e.catch((()=>{w.log(`Sending cancellation messages for id ${l} failed`)}))}))),new Promise(((e,t)=>{const r={jsonrpc:T,id:l,method:i,params:s};let a={method:i,timerStart:Date.now(),resolve:t=>{e(t),z.sender.cleanup(l),d?.dispose()},reject:e=>{t(e),z.sender.cleanup(l),d?.dispose()}};!function(e){if(U!==h.Off&&N)if(q===f.Text){let t;U!==h.Verbose&&U!==h.Compact||!e.params||(t=`Params: ${ne(e.params)}\n\n`),N.log(`Sending request '${e.method} - (${e.id})'.`,t)}else oe("send-request",e)}(r);try{n.write(r).catch((()=>w.error("Sending request failed.")))}catch(e){a.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),a=null}a&&L.set(l,a)}))},onRequest:(e,t)=>{se();let n=null;return p.is(e)?(n=void 0,P=e):r.string(e)?(n=null,void 0!==t&&(n=e,I.set(e,{handler:t,type:void 0}))):void 0!==t&&(n=e.method,I.set(e.method,{type:e,handler:t})),{dispose:()=>{null!==n&&(void 0!==n?I.delete(n):P=void 0)}}},hasPendingResponse:()=>L.size>0,trace:async(e,t,n)=>{let i=!1,o=f.Text;void 0!==n&&(r.boolean(n)?i=n:(i=n.sendNotification||!1,o=n.traceFormat||f.Text)),U=e,q=o,N=U===h.Off?void 0:t,!i||Q()||X()||await pe.sendNotification(m.type,{value:h.toString(e)})},onError:V.event,onClose:W.event,onUnhandledNotification:$.event,onDispose:H.event,end:()=>{n.end()},dispose:()=>{if(X())return;K=S.Disposed,H.fire(void 0);const t=new o.ResponseError(o.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const e of L.values())e.reject(t);L=new Map,F=new Map,j=new Set,M=new s.LinkedMap,r.func(n.dispose)&&n.dispose(),r.func(e.dispose)&&e.dispose()},listen:()=>{se(),function(){if(Y())throw new k(v.AlreadyListening,"Connection is already listening")}(),K=S.Listening,e.listen(te)},inspect:()=>{(0,i.default)().console.log("inspect")}};return pe.onNotification(g.type,(e=>{if(U===h.Off||!N)return;const t=U===h.Verbose||U===h.Compact;N.log(e.message,t?e.verbose:void 0)})),pe.onNotification(u.type,(e=>{const t=O.get(e.token);t?t(e.value):B.fire(e)})),pe}},83911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,(t.Disposable||(t.Disposable={})).create=function(e){return{dispose:e}}},27135:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const i=n(30147);!function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class r{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let i=0,r=this._callbacks.length;i<r;i++)if(this._callbacks[i]===e){if(this._contexts[i]===t)return this._callbacks.splice(i,1),void this._contexts.splice(i,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],n=this._callbacks.slice(0),r=this._contexts.slice(0);for(let o=0,s=n.length;o<s;o++)try{t.push(n[o].apply(r[o],e))}catch(e){(0,i.default)().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class o{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new r),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),i.dispose=o._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=o,o._noop=function(){}},67574:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=i,t.stringArray=function(e){return i(e)&&e.every((e=>n(e)))}},96184:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0,function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(i=t.Touch||(t.Touch={}));class r{constructor(){this[n]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=i.None){const n=this._map.get(e);if(n)return t!==i.None&&this.touch(n,t),n.value}set(e,t,n=i.None){let r=this._map.get(e);if(r)r.value=t,n!==i.None&&this.touch(r,n);else{switch(r={key:e,value:t,next:void 0,previous:void 0},n){case i.None:this.addItemLast(r);break;case i.First:this.addItemFirst(r);break;case i.Last:default:this.addItemLast(r)}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.key,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}values(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.value,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}entries(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:[t.key,t.value],done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}[(n=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===i.First||t===i.Last)if(t===i.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===i.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,n)=>{e.push([n,t])})),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}t.LinkedMap=r,t.LRUCache=class extends r{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=i.AsNew){return super.get(e,t)}peek(e){return super.get(e,i.None)}set(e,t){return super.set(e,t,i.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},75530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0,t.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(0===this._chunks.length)return;let e=0,t=0,n=0,i=0;e:for(;t<this._chunks.length;){const r=this._chunks[t];for(n=0;n<r.length;){switch(r[n]){case 13:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case 10:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}i+=r.byteLength,t++}if(4!==e)return;const r=this._read(i+n),o=new Map,s=this.toString(r,"ascii").split("\r\n");if(s.length<2)return o;for(let e=0;e<s.length-2;e++){const t=s[e],n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");const i=t.substr(0,n),r=t.substr(n+1).trim();o.set(i,r)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}const t=this.allocNative(e);let n=0;for(;e>0;){const i=this._chunks[0];if(i.byteLength>e){const r=i.slice(0,e);t.set(r,n),n+=e,this._chunks[0]=i.slice(e),this._totalLength-=e,e-=e}else t.set(i,n),n+=i.byteLength,this._chunks.shift(),this._totalLength-=i.byteLength,e-=i.byteLength}return t}}},56525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const i=n(30147),r=n(67574),o=n(27135);var s;(t.MessageReader||(t.MessageReader={})).is=function(e){let t=e;return t&&r.func(t.listen)&&r.func(t.dispose)&&r.func(t.onError)&&r.func(t.onClose)&&r.func(t.onPartialMessage)};class a{constructor(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter,this.partialMessageEmitter=new o.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${r.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=a,function(e){e.fromOptions=function(e){let t,n;const r=new Map;let o;const s=new Map;if(void 0===e||"string"==typeof e)t=e??"utf-8";else{if(t=e.charset??"utf-8",void 0!==e.contentDecoder&&(n=e.contentDecoder,r.set(n.name,n)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)r.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(o=e.contentTypeDecoder,s.set(o.name,o)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)s.set(t.name,t)}return void 0===o&&(o=(0,i.default)().applicationJson.decoder,s.set(o.name,o)),{charset:t,contentDecoder:n,contentDecoders:r,contentTypeDecoder:o,contentTypeDecoders:s}}}(s||(s={})),t.ReadableStreamMessageReader=class extends a{constructor(e,t){super(),this.readable=e,this.options=s.fromOptions(t),this.buffer=(0,i.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders();if(!e)return;const t=e.get("Content-Length");if(!t)throw new Error("Header must provide a Content-Length property.");const n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();let t;this.clearPartialMessageTimer(),this.nextMessageLength=-1,t=void 0!==this.options.contentDecoder?this.options.contentDecoder.decode(e):Promise.resolve(e),t.then((e=>{this.options.contentTypeDecoder.decode(e,this.options).then((e=>{this.callback(e)}),(e=>{this.fireError(e)}))}),(e=>{this.fireError(e)}))}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=(0,i.default)().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},96654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const i=n(30147),r=n(67574),o=n(80142),s=n(27135);var a;(t.MessageWriter||(t.MessageWriter={})).is=function(e){let t=e;return t&&r.func(t.dispose)&&r.func(t.onClose)&&r.func(t.onError)&&r.func(t.write)};class c{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${r.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=c,function(e){e.fromOptions=function(e){return void 0===e||"string"==typeof e?{charset:e??"utf-8",contentTypeEncoder:(0,i.default)().applicationJson.encoder}:{charset:e.charset??"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,i.default)().applicationJson.encoder}}}(a||(a={})),t.WriteableStreamMessageWriter=class extends c{constructor(e,t){super(),this.writable=e,this.options=a.fromOptions(t),this.errorCount=0,this.writeSemaphore=new o.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}},20839:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const i=n(67574);var r,o;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3}(r=t.ErrorCodes||(t.ErrorCodes={}));class s extends Error{constructor(e,t,n){super(t),this.code=i.number(e)?e:r.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,s.prototype)}toJson(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),e}}t.ResponseError=s;class a{constructor(e){this.kind=e}static is(e){return e===a.auto||e===a.byName||e===a.byPosition}toString(){return this.kind}}t.ParameterStructures=a,a.auto=new a("auto"),a.byPosition=new a("byPosition"),a.byName=new a("byName");class c{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return a.auto}}t.AbstractMessageSignature=c,t.RequestType0=class extends c{constructor(e){super(e,0)}},t.RequestType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType2=class extends c{constructor(e){super(e,2)}},t.RequestType3=class extends c{constructor(e){super(e,3)}},t.RequestType4=class extends c{constructor(e){super(e,4)}},t.RequestType5=class extends c{constructor(e){super(e,5)}},t.RequestType6=class extends c{constructor(e){super(e,6)}},t.RequestType7=class extends c{constructor(e){super(e,7)}},t.RequestType8=class extends c{constructor(e){super(e,8)}},t.RequestType9=class extends c{constructor(e){super(e,9)}},t.NotificationType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType0=class extends c{constructor(e){super(e,0)}},t.NotificationType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType2=class extends c{constructor(e){super(e,2)}},t.NotificationType3=class extends c{constructor(e){super(e,3)}},t.NotificationType4=class extends c{constructor(e){super(e,4)}},t.NotificationType5=class extends c{constructor(e){super(e,5)}},t.NotificationType6=class extends c{constructor(e){super(e,6)}},t.NotificationType7=class extends c{constructor(e){super(e,7)}},t.NotificationType8=class extends c{constructor(e){super(e,8)}},t.NotificationType9=class extends c{constructor(e){super(e,9)}},(o=t.Message||(t.Message={})).isRequest=function(e){const t=e;return t&&i.string(t.method)&&(i.string(t.id)||i.number(t.id))},o.isNotification=function(e){const t=e;return t&&i.string(t.method)&&void 0===e.id},o.isResponse=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(i.string(t.id)||i.number(t.id)||null===t.id)}},30147:(e,t)=>{"use strict";let n;function i(){if(void 0===n)throw new Error("No runtime abstraction layer installed");return n}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");n=e}}(i||(i={})),t.default=i},80142:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const i=n(30147);t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,i.default)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},74389:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.createServerSocketTransport=t.createClientSocketTransport=t.createServerPipeTransport=t.createClientPipeTransport=t.generateRandomPipeName=t.StreamMessageWriter=t.StreamMessageReader=t.SocketMessageWriter=t.SocketMessageReader=t.IPCMessageWriter=t.IPCMessageReader=void 0;const o=n(23034);o.default.install();const s=n(23870),a=n(71017),c=n(22037),l=n(6113),d=n(41808);r(n(23870),t);class u extends s.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose()))}listen(e){return this.process.on("message",e),s.Disposable.create((()=>this.process.off("message",e)))}}t.IPCMessageReader=u;class p extends s.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose))}write(e){try{return"function"==typeof this.process.send&&this.process.send(e,void 0,void 0,(t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0})),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.IPCMessageWriter=p;class h extends s.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,o.default)().stream.asReadableStream(e),t)}}t.SocketMessageReader=h;class f extends s.WriteableStreamMessageWriter{constructor(e,t){super((0,o.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}}t.SocketMessageWriter=f;class m extends s.ReadableStreamMessageReader{constructor(e,t){super((0,o.default)().stream.asReadableStream(e),t)}}t.StreamMessageReader=m;class g extends s.WriteableStreamMessageWriter{constructor(e,t){super((0,o.default)().stream.asWritableStream(e),t)}}t.StreamMessageWriter=g;const v=process.env.XDG_RUNTIME_DIR,y=new Map([["linux",107],["darwin",103]]);t.generateRandomPipeName=function(){const e=(0,l.randomBytes)(21).toString("hex");if("win32"===process.platform)return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;t=v?a.join(v,`vscode-ipc-${e}.sock`):a.join(c.tmpdir(),`vscode-${e}.sock`);const n=y.get(process.platform);return void 0!==n&&t.length>=n&&(0,o.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`),t},t.createClientPipeTransport=function(e,t="utf-8"){let n;const i=new Promise(((e,t)=>{n=e}));return new Promise(((r,o)=>{let s=(0,d.createServer)((e=>{s.close(),n([new h(e,t),new f(e,t)])}));s.on("error",o),s.listen(e,(()=>{s.removeListener("error",o),r({onConnected:()=>i})}))}))},t.createServerPipeTransport=function(e,t="utf-8"){const n=(0,d.createConnection)(e);return[new h(n,t),new f(n,t)]},t.createClientSocketTransport=function(e,t="utf-8"){let n;const i=new Promise(((e,t)=>{n=e}));return new Promise(((r,o)=>{const s=(0,d.createServer)((e=>{s.close(),n([new h(e,t),new f(e,t)])}));s.on("error",o),s.listen(e,"127.0.0.1",(()=>{s.removeListener("error",o),r({onConnected:()=>i})}))}))},t.createServerSocketTransport=function(e,t="utf-8"){const n=(0,d.createConnection)(e,"127.0.0.1");return[new h(n,t),new f(n,t)]},t.createMessageConnection=function(e,t,n,i){n||(n=s.NullLogger);const r=function(e){const t=e;return void 0!==t.read&&void 0!==t.addListener}(e)?new m(e):e,o=function(e){const t=e;return void 0!==t.write&&void 0!==t.addListener}(t)?new g(t):t;return s.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,s.createMessageConnection)(r,o,n,i)}},23034:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(30147),r=n(73837),o=n(83911),s=n(75530);class a extends s.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return a.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new r.TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}}a.emptyBuffer=Buffer.allocUnsafe(0);class c{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),o.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),o.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),o.Disposable.create((()=>this.stream.off("end",e)))}onData(e){return this.stream.on("data",e),o.Disposable.create((()=>this.stream.off("data",e)))}}class l{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),o.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),o.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),o.Disposable.create((()=>this.stream.off("end",e)))}write(e,t){return new Promise(((n,i)=>{const r=e=>{null==e?n():i(e)};"string"==typeof e?this.stream.write(e,t,r):this.stream.write(e,r)}))}end(){this.stream.end()}}const d=Object.freeze({messageBuffer:Object.freeze({create:e=>new a(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(e){return Promise.reject(e)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new r.TextDecoder(t.charset).decode(e)))}catch(e){return Promise.reject(e)}}})}),stream:Object.freeze({asReadableStream:e=>new c(e),asWritableStream:e=>new l(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){const i=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(i)}},setImmediate(e,...t){const n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){const i=setInterval(e,t,...n);return{dispose:()=>clearInterval(i)}}})});function u(){return d}!function(e){e.install=function(){i.default.install(d)}}(u||(u={})),t.default=u},95028:(e,t,n)=>{"use strict";e.exports=n(74389)},85734:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticPullMode=t.vsdiag=void 0,r(n(40273),t),r(n(88909),t);var o=n(92570);Object.defineProperty(t,"vsdiag",{enumerable:!0,get:function(){return o.vsdiag}}),Object.defineProperty(t,"DiagnosticPullMode",{enumerable:!0,get:function(){return o.DiagnosticPullMode}}),r(n(14384),t)},95578:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyFeature=void 0;const i=n(66828),r=n(40273),o=n(88909);class s{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,t,n){const i=this.client,o=this.middleware,s=(e,t,n)=>{const o=i.code2ProtocolConverter.asTextDocumentPositionParams(e,t);return i.sendRequest(r.CallHierarchyPrepareRequest.type,o,n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(e,n)),(e=>i.handleFailedRequest(r.CallHierarchyPrepareRequest.type,n,e,null)))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,n,s):s(e,t,n)}provideCallHierarchyIncomingCalls(e,t){const n=this.client,i=this.middleware,o=(e,t)=>{const i={item:n.code2ProtocolConverter.asCallHierarchyItem(e)};return n.sendRequest(r.CallHierarchyIncomingCallsRequest.type,i,t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asCallHierarchyIncomingCalls(e,t)),(e=>n.handleFailedRequest(r.CallHierarchyIncomingCallsRequest.type,t,e,null)))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){const n=this.client,i=this.middleware,o=(e,t)=>{const i={item:n.code2ProtocolConverter.asCallHierarchyItem(e)};return n.sendRequest(r.CallHierarchyOutgoingCallsRequest.type,i,t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(e,t)),(e=>n.handleFailedRequest(r.CallHierarchyOutgoingCallsRequest.type,t,e,null)))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,o):o(e,t)}}class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){const t=e;(0,o.ensure)((0,o.ensure)(t,"textDocument"),"callHierarchy").dynamicRegistration=!0}initialize(e,t){const[n,i]=this.getRegistration(t,e.callHierarchyProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=this._client,n=new s(t);return[i.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}}t.CallHierarchyFeature=a},14384:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProposedFeatures=t.BaseLanguageClient=t.MessageTransports=t.SuspendMode=t.State=t.CloseAction=t.ErrorAction=t.RevealOutputChannelOn=void 0;const i=n(66828),r=n(40273),o=n(10071),s=n(38785),a=n(59763),c=n(94904),l=n(41980),d=n(78071),u=n(88909),p=n(92570),h=n(30203),f=n(36495),m=n(70743),g=n(11435),v=n(96782),y=n(20122),b=n(82908),w=n(89959),_=n(42483),S=n(43051),C=n(18480),k=n(9474),E=n(27711),x=n(56426),T=n(26700),P=n(13471),I=n(44849),D=n(65338),R=n(38880),O=n(79889),A=n(10328),N=n(5941),M=n(96454),L=n(20707),j=n(750),F=n(43603),U=n(95578),q=n(79957),K=n(7606),V=n(43483),W=n(34175),$=n(45098),B=n(16190);var H,z,J,G,Y,Q,X;!function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Never=4]="Never"}(H=t.RevealOutputChannelOn||(t.RevealOutputChannelOn={})),function(e){e[e.Continue=1]="Continue",e[e.Shutdown=2]="Shutdown"}(z=t.ErrorAction||(t.ErrorAction={})),function(e){e[e.DoNotRestart=1]="DoNotRestart",e[e.Restart=2]="Restart"}(J=t.CloseAction||(t.CloseAction={})),function(e){e[e.Stopped=1]="Stopped",e[e.Starting=3]="Starting",e[e.Running=2]="Running"}(G=t.State||(t.State={})),(X=t.SuspendMode||(t.SuspendMode={})).off="off",X.on="on";class Z{constructor(e,t){this.client=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,n){return n&&n<=3?{action:z.Continue}:{action:z.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:J.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=18e4?{action:J.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:J.Restart})}}!function(e){e.Initial="initial",e.Starting="starting",e.StartFailed="startFailed",e.Running="running",e.Stopping="stopping",e.Stopped="stopped"}(Y||(Y={})),(t.MessageTransports||(t.MessageTransports={})).is=function(e){return e&&r.MessageReader.is(e.reader)&&r.MessageWriter.is(e.writer)};class ee{constructor(e,t,n){this._traceFormat=r.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new c.Semaphore(1),this._id=e,this._name=t;const i={isTrusted:!1,supportHtml:!1};void 0!==(n=n||{}).markdown&&(i.isTrusted=!0===n.markdown.isTrusted,i.supportHtml=!0===n.markdown.supportHtml),this._clientOptions={documentSelector:n.documentSelector??[],synchronize:n.synchronize??{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName??this._name,revealOutputChannelOn:n.revealOutputChannelOn??H.Error,stdioEncoding:n.stdioEncoding??"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler??this.createDefaultErrorHandler(n.connectionOptions?.maxRestartCount),middleware:n.middleware??{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions,markdown:i,diagnosticPullOptions:n.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:n.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Y.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new c.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new r.Emitter,this._stateChangeEmitter=new r.Emitter,this._trace=r.Trace.Off,this._tracer={log:(e,t)=>{a.string(e)?this.logTrace(e,t):this.logObjectTrace(e)}},this._c2p=o.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=s.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=i.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();n!==t&&this._stateChangeEmitter.fire({oldState:t,newState:n})}getPublicState(){switch(this.$state){case Y.Starting:return G.Starting;case Y.Running:return G.Running;default:return G.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...t){if(this.$state===Y.StartFailed||this.$state===Y.Stopping||this.$state===Y.Stopped)return Promise.reject(new r.ResponseError(r.ErrorCodes.ConnectionInactive,"Client is not running"));try{const n=await this.$start();return await this.forceDocumentSync(),n.sendRequest(e,...t)}catch(t){throw this.error(`Sending request ${a.string(e)?e:e.method} failed.`,t),t}}onRequest(e,t){const n="string"==typeof e?e:e.method;this._requestHandlers.set(n,t);const i=this.activeConnection();let r;return void 0!==i?(this._requestDisposables.set(n,i.onRequest(e,t)),r={dispose:()=>{const e=this._requestDisposables.get(n);void 0!==e&&(e.dispose(),this._requestDisposables.delete(n))}}):(this._pendingRequestHandlers.set(n,t),r={dispose:()=>{this._pendingRequestHandlers.delete(n);const e=this._requestDisposables.get(n);void 0!==e&&(e.dispose(),this._requestDisposables.delete(n))}}),{dispose:()=>{this._requestHandlers.delete(n),r.dispose()}}}async sendNotification(e,t){if(this.$state===Y.StartFailed||this.$state===Y.Stopping||this.$state===Y.Stopped)return Promise.reject(new r.ResponseError(r.ErrorCodes.ConnectionInactive,"Client is not running"));try{const n=await this.$start();return await this.forceDocumentSync(),n.sendNotification(e,t)}catch(t){throw this.error(`Sending notification ${a.string(e)?e:e.method} failed.`,t),t}}onNotification(e,t){const n="string"==typeof e?e:e.method;this._notificationHandlers.set(n,t);const i=this.activeConnection();let r;return void 0!==i?(this._notificationDisposables.set(n,i.onNotification(e,t)),r={dispose:()=>{const e=this._notificationDisposables.get(n);void 0!==e&&(e.dispose(),this._notificationDisposables.delete(n))}}):(this._pendingNotificationHandlers.set(n,t),r={dispose:()=>{this._pendingNotificationHandlers.delete(n);const e=this._notificationDisposables.get(n);void 0!==e&&(e.dispose(),this._notificationDisposables.delete(n))}}),{dispose:()=>{this._notificationHandlers.delete(n),r.dispose()}}}async sendProgress(e,t,n){if(this.$state===Y.StartFailed||this.$state===Y.Stopping||this.$state===Y.Stopped)return Promise.reject(new r.ResponseError(r.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,t,n)}catch(e){throw this.error(`Sending progress for token ${t} failed.`,e),e}}onProgress(e,t,n){this._progressHandlers.set(t,{type:e,handler:n});const i=this.activeConnection();let o;const s=this._clientOptions.middleware?.handleWorkDoneProgress,a=r.WorkDoneProgress.is(e)&&void 0!==s?e=>{s(t,e,(()=>n(e)))}:n;return void 0!==i?(this._progressDisposables.set(t,i.onProgress(e,t,a)),o={dispose:()=>{const e=this._progressDisposables.get(t);void 0!==e&&(e.dispose(),this._progressDisposables.delete(t))}}):(this._pendingProgressHandlers.set(t,{type:e,handler:n}),o={dispose:()=>{this._pendingProgressHandlers.delete(t);const e=this._progressDisposables.get(t);void 0!==e&&(e.dispose(),this._progressDisposables.delete(t))}}),{dispose:()=>{this._progressHandlers.delete(t),o.dispose()}}}createDefaultErrorHandler(e){if(void 0!==e&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new Z(this,e??4)}async setTrace(e){this._trace=e;const t=this.activeConnection();void 0!==t&&await t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof r.ResponseError){const t=e;return`  Message: ${t.message}\n  Code: ${t.code} ${t.data?"\n"+t.data.toString():""}`}return e instanceof Error?a.string(e.stack)?e.stack:e.message:a.string(e)?e:e.toString()}info(e,t,n=!0){this.outputChannel.appendLine(`[Info  - ${(new Date).toLocaleTimeString()}] ${e}`),null!=t&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=H.Info&&this.showNotificationMessage(r.MessageType.Info,e)}warn(e,t,n=!0){this.outputChannel.appendLine(`[Warn  - ${(new Date).toLocaleTimeString()}] ${e}`),null!=t&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=H.Warn&&this.showNotificationMessage(r.MessageType.Warning,e)}error(e,t,n=!0){this.outputChannel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${e}`),null!=t&&this.outputChannel.appendLine(this.data2String(t)),("force"===n||n&&this._clientOptions.revealOutputChannelOn<=H.Error)&&this.showNotificationMessage(r.MessageType.Error,e)}showNotificationMessage(e,t){t=t??"A request has failed. See the output for more information.",(e===r.MessageType.Error?i.window.showErrorMessage:e===r.MessageType.Warning?i.window.showWarningMessage:i.window.showInformationMessage)(t,"Go to output").then((e=>{void 0!==e&&this.outputChannel.show(!0)}))}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${(new Date).toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${(new Date).toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===Y.Initial||this.$state===Y.Stopping||this.$state===Y.Stopped}needsStop(){return this.$state===Y.Starting||this.$state===Y.Running}activeConnection(){return this.$state===Y.Running&&void 0!==this._connection?this._connection:void 0}isRunning(){return this.$state===Y.Running}async start(){if("disposing"===this._disposed||"disposed"===this._disposed)throw new Error("Client got disposed and can't be restarted.");if(this.$state===Y.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(void 0!==this._onStart)return this._onStart;const[e,t,n]=this.createOnStartPromise();this._onStart=e,void 0===this._diagnostics&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?i.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):i.languages.createDiagnosticCollection());for(const[e,t]of this._notificationHandlers)this._pendingNotificationHandlers.has(e)||this._pendingNotificationHandlers.set(e,t);for(const[e,t]of this._requestHandlers)this._pendingRequestHandlers.has(e)||this._pendingRequestHandlers.set(e,t);for(const[e,t]of this._progressHandlers)this._pendingProgressHandlers.has(e)||this._pendingProgressHandlers.set(e,t);this.$state=Y.Starting;try{const e=await this.createConnection();e.onNotification(r.LogMessageNotification.type,(e=>{switch(e.type){case r.MessageType.Error:this.error(e.message,void 0,!1);break;case r.MessageType.Warning:this.warn(e.message,void 0,!1);break;case r.MessageType.Info:this.info(e.message,void 0,!1);break;default:this.outputChannel.appendLine(e.message)}})),e.onNotification(r.ShowMessageNotification.type,(e=>{switch(e.type){case r.MessageType.Error:i.window.showErrorMessage(e.message);break;case r.MessageType.Warning:i.window.showWarningMessage(e.message);break;case r.MessageType.Info:default:i.window.showInformationMessage(e.message)}})),e.onRequest(r.ShowMessageRequest.type,(e=>{let t;switch(e.type){case r.MessageType.Error:t=i.window.showErrorMessage;break;case r.MessageType.Warning:t=i.window.showWarningMessage;break;case r.MessageType.Info:default:t=i.window.showInformationMessage}let n=e.actions||[];return t(e.message,...n)})),e.onNotification(r.TelemetryEventNotification.type,(e=>{this._telemetryEmitter.fire(e)})),e.onRequest(r.ShowDocumentRequest.type,(async e=>{const t=async e=>{const t=this.protocol2CodeConverter.asUri(e.uri);try{if(!0===e.external)return{success:await i.env.openExternal(t)};{const n={};return void 0!==e.selection&&(n.selection=this.protocol2CodeConverter.asRange(e.selection)),void 0===e.takeFocus||!1===e.takeFocus?n.preserveFocus=!0:!0===e.takeFocus&&(n.preserveFocus=!1),await i.window.showTextDocument(t,n),{success:!0}}}catch(e){return{success:!1}}},n=this._clientOptions.middleware.window?.showDocument;return void 0!==n?n(e,t):t(e)})),e.listen(),await this.initialize(e),t()}catch(e){this.$state=Y.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,e,"force"),n(e)}return this._onStart}createOnStartPromise(){let e,t;return[new Promise(((n,i)=>{e=n,t=i})),e,t]}async initialize(e){this.refreshTrace(e,!1);const t=this._clientOptions.initializationOptions,[n,o]=void 0!==this._clientOptions.workspaceFolder?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],s={processId:null,clientInfo:{name:i.env.appName,version:i.version},locale:this.getLocale(),rootPath:n||null,rootUri:n?this._c2p.asUri(i.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:a.func(t)?t():t,trace:r.Trace.toString(this._trace),workspaceFolders:o};if(this.fillInitializeParams(s),!this._clientOptions.progressOnInitialization)return this.doInitialize(e,s);{const t=l.generateUuid(),n=new d.ProgressPart(e,t);s.workDoneToken=t;try{const t=await this.doInitialize(e,s);return n.done(),t}catch(e){throw n.cancel(),e}}}async doInitialize(e,t){try{const n=await e.initialize(t);if(void 0!==n.capabilities.positionEncoding&&n.capabilities.positionEncoding!==r.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${n.capabilities.positionEncoding}) received from server ${this.name}`);let i;this._initializeResult=n,this.$state=Y.Running,a.number(n.capabilities.textDocumentSync)?i=n.capabilities.textDocumentSync===r.TextDocumentSyncKind.None?{openClose:!1,change:r.TextDocumentSyncKind.None,save:void 0}:{openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:void 0!==n.capabilities.textDocumentSync&&null!==n.capabilities.textDocumentSync&&(i=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:i}),e.onNotification(r.PublishDiagnosticsNotification.type,(e=>this.handleDiagnostics(e))),e.onRequest(r.RegistrationRequest.type,(e=>this.handleRegistrationRequest(e))),e.onRequest("client/registerFeature",(e=>this.handleRegistrationRequest(e))),e.onRequest(r.UnregistrationRequest.type,(e=>this.handleUnregistrationRequest(e))),e.onRequest("client/unregisterFeature",(e=>this.handleUnregistrationRequest(e))),e.onRequest(r.ApplyWorkspaceEditRequest.type,(e=>this.handleApplyWorkspaceEdit(e)));for(const[t,n]of this._pendingNotificationHandlers)this._notificationDisposables.set(t,e.onNotification(t,n));this._pendingNotificationHandlers.clear();for(const[t,n]of this._pendingRequestHandlers)this._requestDisposables.set(t,e.onRequest(t,n));this._pendingRequestHandlers.clear();for(const[t,n]of this._pendingProgressHandlers)this._progressDisposables.set(t,e.onProgress(n.type,t,n.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(r.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),n}catch(t){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(t)?this.initialize(e):this.stop():t instanceof r.ResponseError&&t.data&&t.data.retry?i.window.showErrorMessage(t.message,{title:"Retry",id:"retry"}).then((t=>{t&&"retry"===t.id?this.initialize(e):this.stop()})):(t&&t.message&&i.window.showErrorMessage(t.message),this.error("Server initialization failed.",t),this.stop()),t}}_clientGetRootPath(){let e=i.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,t){if(this.$state===Y.Stopped||this.$state===Y.Initial)return;if(this.$state===Y.Stopping){if(void 0!==this._onStop)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}const n=this.activeConnection();if(void 0===n||this.$state!==Y.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=Y.Stopping,this.cleanUp(e);const i=new Promise((e=>{(0,r.RAL)().timer.setTimeout(e,t)})),o=(async e=>(await e.shutdown(),await e.exit(),e))(n);return this._onStop=Promise.race([i,o]).then((e=>{if(void 0===e)throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out");e.end(),e.dispose()}),(e=>{throw this.error("Stopping server failed",e,!1),e})).finally((()=>{this.$state=Y.Stopped,"stop"===e&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()}))}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();const t=this._listeners.splice(0,this._listeners.length);for(const e of t)e.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(const e of Array.from(this._features.entries()).map((e=>e[1])).reverse())e.dispose();"stop"===e&&void 0!==this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0),void 0!==this._idleInterval&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){void 0!==this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){const t=this;async function n(e){return t._fileEvents.push(e),t._fileEventDelayer.trigger((async()=>{const e=await t.$start();await t.forceDocumentSync();const n=e.sendNotification(r.DidChangeWatchedFilesNotification.type,{changes:t._fileEvents});return t._fileEvents=[],n}))}const i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,n):n(e)).catch((e=>{t.error("Notify file events failed.",e)}))}async forceDocumentSync(){return void 0===this._didChangeTextDocumentFeature&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(r.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;const t=e.uri;"busy"===this._diagnosticQueueState.state&&this._diagnosticQueueState.document===t&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,r.RAL)().timer.setImmediate((()=>{this.workDiagnosticQueue()}))}workDiagnosticQueue(){if("busy"===this._diagnosticQueueState.state)return;const e=this._diagnosticQueue.entries().next();if(!0===e.done)return;const[t,n]=e.value;this._diagnosticQueue.delete(t);const r=new i.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:t,tokenSource:r},this._p2c.asDiagnostics(n,r.token).then((e=>{if(!r.token.isCancellationRequested){const n=this._p2c.asUri(t),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(n,e,((e,t)=>this.setDiagnostics(e,t))):this.setDiagnostics(n,e)}})).finally((()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()}))}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}async $start(){if(this.$state===Y.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();const e=this.activeConnection();if(void 0===e)throw new Error("Starting server failed");return e}async createConnection(){const e=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=function(e,t,n,i,o){let s=-1;const c=new te,l=(0,r.createProtocolConnection)(e,t,c,o);return l.onError((e=>{n(e[0],e[1],e[2])})),l.onClose(i),{get lastUsed(){return s},resetLastUsed:()=>{s=-1},listen:()=>l.listen(),sendRequest:(e,...t)=>(s=Date.now(),l.sendRequest(e,...t)),onRequest:(e,t)=>l.onRequest(e,t),hasPendingResponse:()=>l.hasPendingResponse(),sendNotification:(e,t)=>(s=Date.now(),l.sendNotification(e,t)),onNotification:(e,t)=>l.onNotification(e,t),onProgress:l.onProgress,sendProgress:l.sendProgress,trace:(e,t,n)=>{const i={sendNotification:!1,traceFormat:r.TraceFormat.Text};return void 0===n?l.trace(e,t,i):(a.boolean(n),l.trace(e,t,n))},initialize:e=>(s=Date.now(),l.sendRequest(r.InitializeRequest.type,e)),shutdown:()=>(s=Date.now(),l.sendRequest(r.ShutdownRequest.type,void 0)),exit:()=>(s=Date.now(),l.sendNotification(r.ExitNotification.type)),end:()=>l.end(),dispose:()=>l.dispose()}}(e.reader,e.writer,((e,t,n)=>{this.handleConnectionError(e,t,n)}),(()=>{this.handleConnectionClosed()}),this._clientOptions.connectionOptions),this._connection}handleConnectionClosed(){if(this.$state===Y.Stopped)return;try{void 0!==this._connection&&this._connection.dispose()}catch(e){}let e={action:J.DoNotRestart};if(this.$state!==Y.Stopping)try{e=this._clientOptions.errorHandler.closed()}catch(e){}this._connection=void 0,e.action===J.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,"force"),this.cleanUp("stop"),this.$state===Y.Starting?this.$state=Y.StartFailed:this.$state=Y.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===J.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart."),this.cleanUp("restart"),this.$state=Y.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch((e=>this.error("Restarting server failed",e,"force"))))}handleConnectionError(e,t,n){const i=this._clientOptions.errorHandler.error(e,t,n);i.action===z.Shutdown&&(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,"force"),this.stop().catch((e=>{this.error("Stopping server failed",e,!1)})))}hookConfigurationChanged(e){this._listeners.push(i.workspace.onDidChangeConfiguration((()=>{this.refreshTrace(e,!0)})))}refreshTrace(e,t=!1){const n=i.workspace.getConfiguration(this._id);let o=r.Trace.Off,s=r.TraceFormat.Text;if(n){const e=n.get("trace.server","off");"string"==typeof e?o=r.Trace.fromString(e):(o=r.Trace.fromString(n.get("trace.server.verbosity","off")),s=r.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=o,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat}).catch((e=>{this.error("Updating trace failed with error",e,!1)}))}hookFileEvents(e){let t,n=this._clientOptions.synchronize.fileEvents;n&&(t=a.array(n)?n:[n],t&&this._dynamicFeatures.get(r.DidChangeWatchedFilesNotification.type.method).registerRaw(l.generateUuid(),t))}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),u.DynamicFeature.is(e)){const t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){const t=this.getFeature(r.NotebookDocumentSyncRegistrationType.method);return void 0!==t&&t instanceof h.NotebookDocumentSyncFeature&&t.handles(e)}registerBuiltinFeatures(){this.registerFeature(new f.ConfigurationFeature(this)),this.registerFeature(new m.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new m.DidChangeTextDocumentFeature(this)),this.registerFeature(new m.WillSaveFeature(this)),this.registerFeature(new m.WillSaveWaitUntilFeature(this)),this.registerFeature(new m.DidSaveTextDocumentFeature(this)),this.registerFeature(new m.DidCloseTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new D.FileSystemWatcherFeature(this,(e=>this.notifyFileEvent(e)))),this.registerFeature(new g.CompletionItemFeature(this)),this.registerFeature(new v.HoverFeature(this)),this.registerFeature(new b.SignatureHelpFeature(this)),this.registerFeature(new y.DefinitionFeature(this)),this.registerFeature(new C.ReferencesFeature(this)),this.registerFeature(new w.DocumentHighlightFeature(this)),this.registerFeature(new _.DocumentSymbolFeature(this)),this.registerFeature(new S.WorkspaceSymbolFeature(this)),this.registerFeature(new k.CodeActionFeature(this)),this.registerFeature(new E.CodeLensFeature(this)),this.registerFeature(new x.DocumentFormattingFeature(this)),this.registerFeature(new x.DocumentRangeFormattingFeature(this)),this.registerFeature(new x.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new T.RenameFeature(this)),this.registerFeature(new P.DocumentLinkFeature(this)),this.registerFeature(new I.ExecuteCommandFeature(this)),this.registerFeature(new f.SyncConfigurationFeature(this)),this.registerFeature(new A.TypeDefinitionFeature(this)),this.registerFeature(new O.ImplementationFeature(this)),this.registerFeature(new R.ColorProviderFeature(this)),void 0===this.clientOptions.workspaceFolder&&this.registerFeature(new N.WorkspaceFoldersFeature(this)),this.registerFeature(new M.FoldingRangeFeature(this)),this.registerFeature(new L.DeclarationFeature(this)),this.registerFeature(new j.SelectionRangeFeature(this)),this.registerFeature(new F.ProgressFeature(this)),this.registerFeature(new U.CallHierarchyFeature(this)),this.registerFeature(new q.SemanticTokensFeature(this)),this.registerFeature(new V.LinkedEditingFeature(this)),this.registerFeature(new K.DidCreateFilesFeature(this)),this.registerFeature(new K.DidRenameFilesFeature(this)),this.registerFeature(new K.DidDeleteFilesFeature(this)),this.registerFeature(new K.WillCreateFilesFeature(this)),this.registerFeature(new K.WillRenameFilesFeature(this)),this.registerFeature(new K.WillDeleteFilesFeature(this)),this.registerFeature(new W.TypeHierarchyFeature(this)),this.registerFeature(new $.InlineValueFeature(this)),this.registerFeature(new B.InlayHintsFeature(this)),this.registerFeature(new p.DiagnosticFeature(this)),this.registerFeature(new h.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(Q.createAll(this))}fillInitializeParams(e){for(let t of this._features)a.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){const e={};(0,u.ensure)(e,"workspace").applyEdit=!0;const t=(0,u.ensure)((0,u.ensure)(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[r.ResourceOperationKind.Create,r.ResourceOperationKind.Rename,r.ResourceOperationKind.Delete],t.failureHandling=r.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};const n=(0,u.ensure)((0,u.ensure)(e,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[r.DiagnosticTag.Unnecessary,r.DiagnosticTag.Deprecated]},n.codeDescriptionSupport=!0,n.dataSupport=!0;const i=(0,u.ensure)(e,"window");(0,u.ensure)(i,"showMessage").messageActionItem={additionalPropertiesSupport:!0},(0,u.ensure)(i,"showDocument").support=!0;const o=(0,u.ensure)(e,"general");o.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(ee.RequestsToCancelOnContentModified)},o.regularExpressions={engine:"ECMAScript",version:"ES2020"},o.markdown={parser:"marked",version:"1.1.0"},o.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(o.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let t of this._features)t.fillClientCapabilities(e);return e}initializeFeatures(e){const t=this._clientOptions.documentSelector;for(const e of this._features)a.func(e.preInitialize)&&e.preInitialize(this._capabilities,t);for(const e of this._features)e.initialize(this._capabilities,t)}async handleRegistrationRequest(e){if(this.isRunning())for(const t of e.registrations){const e=this._dynamicFeatures.get(t.method);if(void 0===e)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Registration failed.`));const n=t.registerOptions??{};n.documentSelector=n.documentSelector??this._clientOptions.documentSelector;const i={id:t.id,registerOptions:n};try{e.register(i)}catch(e){return Promise.reject(e)}}else for(const t of e.registrations)this._ignoredRegistrations.add(t.id)}async handleUnregistrationRequest(e){for(let t of e.unregisterations){if(this._ignoredRegistrations.has(t.id))continue;const e=this._dynamicFeatures.get(t.method);if(!e)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));e.unregister(t.id)}}async handleApplyWorkspaceEdit(e){const t=e.edit,n=await this.workspaceEditLock.lock((()=>this._p2c.asWorkspaceEdit(t))),o=new Map;i.workspace.textDocuments.forEach((e=>o.set(e.uri.toString(),e)));let s=!1;if(t.documentChanges)for(const e of t.documentChanges)if(r.TextDocumentEdit.is(e)&&e.textDocument.version&&e.textDocument.version>=0){const t=o.get(e.textDocument.uri);if(t&&t.version!==e.textDocument.version){s=!0;break}}return s?Promise.resolve({applied:!1}):a.asPromise(i.workspace.applyEdit(n).then((e=>({applied:e}))))}handleFailedRequest(e,t,n,o,s=!0){if(n instanceof r.ResponseError){if(n.code===r.ErrorCodes.PendingResponseRejected||n.code===r.ErrorCodes.ConnectionInactive)return o;if(n.code===r.LSPErrorCodes.RequestCancelled||n.code===r.LSPErrorCodes.ServerCancelled){if(void 0!==t&&t.isCancellationRequested)return o;throw void 0!==n.data?new u.LSPCancellationError(n.data):new i.CancellationError}if(n.code===r.LSPErrorCodes.ContentModified){if(ee.RequestsToCancelOnContentModified.has(e.method))throw new i.CancellationError;return o}}throw this.error(`Request ${e.method} failed.`,n,s),n}}t.BaseLanguageClient=ee,ee.RequestsToCancelOnContentModified=new Set([r.SemanticTokensRequest.method,r.SemanticTokensRangeRequest.method,r.SemanticTokensDeltaRequest.method]);class te{error(e){(0,r.RAL)().console.error(e)}warn(e){(0,r.RAL)().console.warn(e)}info(e){(0,r.RAL)().console.info(e)}log(e){(0,r.RAL)().console.log(e)}}!function(e){e.createAll=function(e){return[]}}(Q=t.ProposedFeatures||(t.ProposedFeatures={}))},9474:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeActionFeature=void 0;const i=n(66828),r=n(40273),o=n(41980),s=n(88909);class a extends s.TextDocumentLanguageFeature{constructor(e){super(e,r.CodeActionRequest.type)}fillClientCapabilities(e){const t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[r.CodeActionKind.Empty,r.CodeActionKind.QuickFix,r.CodeActionKind.Refactor,r.CodeActionKind.RefactorExtract,r.CodeActionKind.RefactorInline,r.CodeActionKind.RefactorRewrite,r.CodeActionKind.Source,r.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!1}initialize(e,t){const n=this.getRegistrationOptions(t,e.codeActionProvider);n&&this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideCodeActions:(e,t,n,i)=>{const o=this._client,s=async(e,t,n,i)=>{const s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),range:o.code2ProtocolConverter.asRange(t),context:await o.code2ProtocolConverter.asCodeActionContext(n,i)};return o.sendRequest(r.CodeActionRequest.type,s,i).then((e=>i.isCancellationRequested||null==e?null:o.protocol2CodeConverter.asCodeActionResult(e,i)),(e=>o.handleFailedRequest(r.CodeActionRequest.type,i,e,null)))},a=o.middleware;return a.provideCodeActions?a.provideCodeActions(e,t,n,i,s):s(e,t,n,i)},resolveCodeAction:e.resolveProvider?(e,t)=>{const n=this._client,i=this._client.middleware,o=async(e,t)=>n.sendRequest(r.CodeActionResolveRequest.type,await n.code2ProtocolConverter.asCodeAction(e,t),t).then((i=>t.isCancellationRequested?e:n.protocol2CodeConverter.asCodeAction(i,t)),(i=>n.handleFailedRequest(r.CodeActionResolveRequest.type,t,i,e)));return i.resolveCodeAction?i.resolveCodeAction(e,t,o):o(e,t)}:void 0};return[i.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),n]}}t.CodeActionFeature=a},10071:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConverter=void 0;const i=n(66828),r=n(40273),o=n(59763),s=n(94904),a=n(81807),c=n(50583),l=n(58705),d=n(56434),u=n(25316),p=n(88714),h=n(41365),f=n(13912),m=n(91065);var g;!function(e){e.is=function(e){const t=e;return t&&!!t.inserting&&!!t.replacing}}(g||(g={})),t.createConverter=function(e){const t=e||(e=>e.toString());function n(e){return t(e)}function v(e){return{uri:t(e.uri)}}function y(e){return{uri:t(e.uri),languageId:e.languageId,version:e.version,text:e.getText()}}function b(e){switch(e){case i.TextDocumentSaveReason.Manual:return r.TextDocumentSaveReason.Manual;case i.TextDocumentSaveReason.AfterDelay:return r.TextDocumentSaveReason.AfterDelay;case i.TextDocumentSaveReason.FocusOut:return r.TextDocumentSaveReason.FocusOut}return r.TextDocumentSaveReason.Manual}function w(e){switch(e){case i.CompletionTriggerKind.TriggerCharacter:return r.CompletionTriggerKind.TriggerCharacter;case i.CompletionTriggerKind.TriggerForIncompleteCompletions:return r.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return r.CompletionTriggerKind.Invoked}}function _(e){switch(e){case i.SignatureHelpTriggerKind.Invoke:return r.SignatureHelpTriggerKind.Invoked;case i.SignatureHelpTriggerKind.TriggerCharacter:return r.SignatureHelpTriggerKind.TriggerCharacter;case i.SignatureHelpTriggerKind.ContentChange:return r.SignatureHelpTriggerKind.ContentChange}}function S(e){return{label:e.label}}function C(e){return{label:e.label,parameters:(t=e.parameters,t.map(S))};var t}function k(e){return{line:e.line,character:e.character}}function E(e){return null==e?e:{line:e.line>r.uinteger.MAX_VALUE?r.uinteger.MAX_VALUE:e.line,character:e.character>r.uinteger.MAX_VALUE?r.uinteger.MAX_VALUE:e.character}}function x(e){return null==e?e:{start:E(e.start),end:E(e.end)}}function T(e){return null==e?e:r.Location.create(n(e.uri),x(e.range))}function P(e){switch(e){case i.DiagnosticSeverity.Error:return r.DiagnosticSeverity.Error;case i.DiagnosticSeverity.Warning:return r.DiagnosticSeverity.Warning;case i.DiagnosticSeverity.Information:return r.DiagnosticSeverity.Information;case i.DiagnosticSeverity.Hint:return r.DiagnosticSeverity.Hint}}function I(e){switch(e){case i.DiagnosticTag.Unnecessary:return r.DiagnosticTag.Unnecessary;case i.DiagnosticTag.Deprecated:return r.DiagnosticTag.Deprecated;default:return}}function D(e){return{message:e.message,location:T(e.location)}}function R(e){const t=r.Diagnostic.create(x(e.range),e.message),i=e instanceof u.ProtocolDiagnostic?e:void 0;void 0!==i&&void 0!==i.data&&(t.data=i.data);const s=function(e){if(null!=e)return o.number(e)||o.string(e)?e:{value:e.value,target:n(e.target)}}(e.code);return u.DiagnosticCode.is(s)?void 0!==i&&i.hasDiagnosticCode?t.code=s:(t.code=s.value,t.codeDescription={href:s.target}):t.code=s,o.number(e.severity)&&(t.severity=P(e.severity)),Array.isArray(e.tags)&&(t.tags=function(e){if(!e)return;let t=[];for(let n of e){let e=I(n);void 0!==e&&t.push(e)}return t.length>0?t:void 0}(e.tags)),e.relatedInformation&&(t.relatedInformation=e.relatedInformation.map(D)),e.source&&(t.source=e.source),t}function O(e,t){return null==e?e:s.map(e,R,t)}function A(e){if(e===i.CompletionItemTag.Deprecated)return r.CompletionItemTag.Deprecated}function N(e){return{range:x(e.range),newText:e.newText}}function M(e){return null==e?e:e.map(N)}function L(e){return e<=i.SymbolKind.TypeParameter?e+1:r.SymbolKind.Property}function j(e){return e}function F(e){return e.map(j)}function U(e){let t=r.Command.create(e.title,e.command);return e.arguments&&(t.arguments=e.arguments),t}function q(e){const t=r.InlayHintLabelPart.create(e.value);return void 0!==e.location&&(t.location=T(e.location)),void 0!==e.command&&(t.command=U(e.command)),void 0!==e.tooltip&&(t.tooltip=K(e.tooltip)),t}function K(e){return"string"==typeof e?e:{kind:r.MarkupKind.Markdown,value:e.value}}return{asUri:n,asTextDocumentIdentifier:v,asTextDocumentItem:y,asVersionedTextDocumentIdentifier:function(e){return{uri:t(e.uri),version:e.version}},asOpenTextDocumentParams:function(e){return{textDocument:y(e)}},asChangeTextDocumentParams:function(e){if(function(e){let t=e;return!!t.uri&&!!t.version}(e))return{textDocument:{uri:t(e.uri),version:e.version},contentChanges:[{text:e.getText()}]};if(function(e){let t=e;return!!t.document&&!!t.contentChanges}(e)){let n=e.document;return{textDocument:{uri:t(n.uri),version:n.version},contentChanges:e.contentChanges.map((e=>{let t=e.range;return{range:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character}},rangeLength:e.rangeLength,text:e.text}}))}}throw Error("Unsupported text document change parameter")},asCloseTextDocumentParams:function(e){return{textDocument:v(e)}},asSaveTextDocumentParams:function(e,t=!1){let n={textDocument:v(e)};return t&&(n.text=e.getText()),n},asWillSaveTextDocumentParams:function(e){return{textDocument:v(e.document),reason:b(e.reason)}},asDidCreateFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asDidRenameFilesParams:function(e){return{files:e.files.map((e=>({oldUri:t(e.oldUri),newUri:t(e.newUri)})))}},asDidDeleteFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asWillCreateFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asWillRenameFilesParams:function(e){return{files:e.files.map((e=>({oldUri:t(e.oldUri),newUri:t(e.newUri)})))}},asWillDeleteFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asTextDocumentPositionParams:function(e,t){return{textDocument:v(e),position:k(t)}},asCompletionParams:function(e,t,n){return{textDocument:v(e),position:k(t),context:{triggerKind:w(n.triggerKind),triggerCharacter:n.triggerCharacter}}},asSignatureHelpParams:function(e,t,n){return{textDocument:v(e),position:k(t),context:{isRetrigger:n.isRetrigger,triggerCharacter:n.triggerCharacter,triggerKind:_(n.triggerKind),activeSignatureHelp:(i=n.activeSignatureHelp,void 0===i?i:{signatures:(r=i.signatures,r.map(C)),activeSignature:i.activeSignature,activeParameter:i.activeParameter})}};var i,r},asWorkerPosition:k,asRange:x,asPosition:E,asPositions:function(e,t){return s.map(e,E,t)},asLocation:T,asDiagnosticSeverity:P,asDiagnosticTag:I,asDiagnostic:R,asDiagnostics:O,asCompletionItem:function(e,t=!1){let n,s;o.string(e.label)?n=e.label:(n=e.label.label,!t||void 0===e.label.detail&&void 0===e.label.description||(s={detail:e.label.detail,description:e.label.description}));let c={label:n};void 0!==s&&(c.labelDetails=s);let l=e instanceof a.default?e:void 0;var d,u;e.detail&&(c.detail=e.detail),e.documentation&&(l&&"$string"!==l.documentationFormat?c.documentation=function(e,t){switch(e){case"$string":return t;case r.MarkupKind.PlainText:return{kind:e,value:t};case r.MarkupKind.Markdown:return{kind:e,value:t.value};default:return`Unsupported Markup content received. Kind is: ${e}`}}(l.documentationFormat,e.documentation):c.documentation=e.documentation),e.filterText&&(c.filterText=e.filterText),function(e,t){let n,o,s=r.InsertTextFormat.PlainText;t.textEdit?(n=t.textEdit.newText,o=t.textEdit.range):t.insertText instanceof i.SnippetString?(s=r.InsertTextFormat.Snippet,n=t.insertText.value):n=t.insertText,t.range&&(o=t.range),e.insertTextFormat=s,t.fromEdit&&void 0!==n&&void 0!==o?e.textEdit=function(e,t){return g.is(t)?r.InsertReplaceEdit.create(e,x(t.inserting),x(t.replacing)):{newText:e,range:x(t)}}(n,o):e.insertText=n}(c,e),o.number(e.kind)&&(c.kind=(d=e.kind,void 0!==(u=l&&l.originalItemKind)?u:d+1)),e.sortText&&(c.sortText=e.sortText),e.additionalTextEdits&&(c.additionalTextEdits=M(e.additionalTextEdits)),e.commitCharacters&&(c.commitCharacters=e.commitCharacters.slice()),e.command&&(c.command=U(e.command)),!0!==e.preselect&&!1!==e.preselect||(c.preselect=e.preselect);const p=function(e){if(void 0===e)return e;const t=[];for(let n of e){const e=A(n);void 0!==e&&t.push(e)}return t}(e.tags);if(l){if(void 0!==l.data&&(c.data=l.data),!0===l.deprecated||!1===l.deprecated){if(!0===l.deprecated&&void 0!==p&&p.length>0){const e=p.indexOf(i.CompletionItemTag.Deprecated);-1!==e&&p.splice(e,1)}c.deprecated=l.deprecated}void 0!==l.insertTextMode&&(c.insertTextMode=l.insertTextMode)}return void 0!==p&&p.length>0&&(c.tags=p),void 0===c.insertTextMode&&!0===e.keepWhitespace&&(c.insertTextMode=r.InsertTextMode.adjustIndentation),c},asTextEdit:N,asSymbolKind:L,asSymbolTag:j,asSymbolTags:F,asReferenceParams:function(e,t,n){return{textDocument:v(e),position:k(t),context:{includeDeclaration:n.includeDeclaration}}},asCodeAction:async function(e,t){let n=r.CodeAction.create(e.title);if(e instanceof d.default&&void 0!==e.data&&(n.data=e.data),void 0!==e.kind&&(n.kind=function(e){if(null!=e)return e.value}(e.kind)),void 0!==e.diagnostics&&(n.diagnostics=await O(e.diagnostics,t)),void 0!==e.edit)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return void 0!==e.command&&(n.command=U(e.command)),void 0!==e.isPreferred&&(n.isPreferred=e.isPreferred),void 0!==e.disabled&&(n.disabled={reason:e.disabled.reason}),n},asCodeActionContext:async function(e,t){if(null==e)return e;let n;return e.only&&o.string(e.only.value)&&(n=[e.only.value]),r.CodeActionContext.create(await O(e.diagnostics,t),n,function(e){switch(e){case i.CodeActionTriggerKind.Invoke:return r.CodeActionTriggerKind.Invoked;case i.CodeActionTriggerKind.Automatic:return r.CodeActionTriggerKind.Automatic;default:return}}(e.triggerKind))},asInlineValueContext:function(e){return null==e?e:r.InlineValueContext.create(e.frameId,x(e.stoppedLocation))},asCommand:U,asCodeLens:function(e){let t=r.CodeLens.create(x(e.range));return e.command&&(t.command=U(e.command)),e instanceof c.default&&e.data&&(t.data=e.data),t},asFormattingOptions:function(e,t){const n={tabSize:e.tabSize,insertSpaces:e.insertSpaces};return t.trimTrailingWhitespace&&(n.trimTrailingWhitespace=!0),t.trimFinalNewlines&&(n.trimFinalNewlines=!0),t.insertFinalNewline&&(n.insertFinalNewline=!0),n},asDocumentSymbolParams:function(e){return{textDocument:v(e)}},asCodeLensParams:function(e){return{textDocument:v(e)}},asDocumentLink:function(e){let t=r.DocumentLink.create(x(e.range));e.target&&(t.target=n(e.target)),void 0!==e.tooltip&&(t.tooltip=e.tooltip);let i=e instanceof l.default?e:void 0;return i&&i.data&&(t.data=i.data),t},asDocumentLinkParams:function(e){return{textDocument:v(e)}},asCallHierarchyItem:function(e){const t={name:e.name,kind:L(e.kind),uri:n(e.uri),range:x(e.range),selectionRange:x(e.selectionRange)};return void 0!==e.detail&&e.detail.length>0&&(t.detail=e.detail),void 0!==e.tags&&(t.tags=F(e.tags)),e instanceof p.default&&void 0!==e.data&&(t.data=e.data),t},asTypeHierarchyItem:function(e){const t={name:e.name,kind:L(e.kind),uri:n(e.uri),range:x(e.range),selectionRange:x(e.selectionRange)};return void 0!==e.detail&&e.detail.length>0&&(t.detail=e.detail),void 0!==e.tags&&(t.tags=F(e.tags)),e instanceof h.default&&void 0!==e.data&&(t.data=e.data),t},asInlayHint:function(e){const t="string"==typeof e.label?e.label:e.label.map(q),n=r.InlayHint.create(E(e.position),t);return void 0!==e.kind&&(n.kind=e.kind),void 0!==e.textEdits&&(n.textEdits=M(e.textEdits)),void 0!==e.tooltip&&(n.tooltip=K(e.tooltip)),void 0!==e.paddingLeft&&(n.paddingLeft=e.paddingLeft),void 0!==e.paddingRight&&(n.paddingRight=e.paddingRight),e instanceof m.default&&void 0!==e.data&&(n.data=e.data),n},asWorkspaceSymbol:function(e){const n=e instanceof f.default?{name:e.name,kind:L(e.kind),location:e.hasRange?T(e.location):{uri:t(e.location.uri)},data:e.data}:{name:e.name,kind:L(e.kind),location:T(e.location)};return void 0!==e.tags&&(n.tags=F(e.tags)),""!==e.containerName&&(n.containerName=e.containerName),n}}}},27711:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeLensFeature=void 0;const i=n(66828),r=n(40273),o=n(41980),s=n(88909);class a extends s.TextDocumentLanguageFeature{constructor(e){super(e,r.CodeLensRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,s.ensure)((0,s.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(r.CodeLensRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeCodeLensEmitter.fire()}));const n=this.getRegistrationOptions(t,e.codeLensProvider);n&&this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n=new i.EventEmitter,o={onDidChangeCodeLenses:n.event,provideCodeLenses:(e,t)=>{const n=this._client,i=(e,t)=>n.sendRequest(r.CodeLensRequest.type,n.code2ProtocolConverter.asCodeLensParams(e),t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asCodeLenses(e,t)),(e=>n.handleFailedRequest(r.CodeLensRequest.type,t,e,null))),o=n.middleware;return o.provideCodeLenses?o.provideCodeLenses(e,t,i):i(e,t)},resolveCodeLens:e.resolveProvider?(e,t)=>{const n=this._client,i=(e,t)=>n.sendRequest(r.CodeLensResolveRequest.type,n.code2ProtocolConverter.asCodeLens(e),t).then((i=>t.isCancellationRequested?e:n.protocol2CodeConverter.asCodeLens(i)),(i=>n.handleFailedRequest(r.CodeLensResolveRequest.type,t,i,e))),o=n.middleware;return o.resolveCodeLens?o.resolveCodeLens(e,t,i):i(e,t)}:void 0};return[i.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),o),{provider:o,onDidChangeCodeLensEmitter:n}]}}t.CodeLensFeature=a},38880:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorProviderFeature=void 0;const i=n(66828),r=n(40273),o=n(88909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.DocumentColorRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.colorProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n={provideColorPresentations:(e,t,n)=>{const i=this._client,o=(e,t,n)=>{const o={color:e,textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(t.document),range:i.code2ProtocolConverter.asRange(t.range)};return i.sendRequest(r.ColorPresentationRequest.type,o,n).then((e=>n.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(e,n)),(e=>i.handleFailedRequest(r.ColorPresentationRequest.type,n,e,null)))},s=i.middleware;return s.provideColorPresentations?s.provideColorPresentations(e,t,n,o):o(e,t,n)},provideDocumentColors:(e,t)=>{const n=this._client,i=(e,t)=>{const i={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e)};return n.sendRequest(r.DocumentColorRequest.type,i,t).then((e=>t.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(e,t)),(e=>n.handleFailedRequest(r.DocumentColorRequest.type,t,e,null)))},o=n.middleware;return o.provideDocumentColors?o.provideDocumentColors(e,t,i):i(e,t)}};return[i.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.ColorProviderFeature=s},11435:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompletionItemFeature=void 0;const i=n(66828),r=n(40273),o=n(88909),s=n(41980),a=[r.CompletionItemKind.Text,r.CompletionItemKind.Method,r.CompletionItemKind.Function,r.CompletionItemKind.Constructor,r.CompletionItemKind.Field,r.CompletionItemKind.Variable,r.CompletionItemKind.Class,r.CompletionItemKind.Interface,r.CompletionItemKind.Module,r.CompletionItemKind.Property,r.CompletionItemKind.Unit,r.CompletionItemKind.Value,r.CompletionItemKind.Enum,r.CompletionItemKind.Keyword,r.CompletionItemKind.Snippet,r.CompletionItemKind.Color,r.CompletionItemKind.File,r.CompletionItemKind.Reference,r.CompletionItemKind.Folder,r.CompletionItemKind.EnumMember,r.CompletionItemKind.Constant,r.CompletionItemKind.Struct,r.CompletionItemKind.Event,r.CompletionItemKind.Operator,r.CompletionItemKind.TypeParameter];class c extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[r.MarkupKind.Markdown,r.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[r.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[r.InsertTextMode.asIs,r.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=r.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:a},t.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(e,t){const n=this.getRegistrationOptions(t,e.completionProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e,t){this.labelDetailsSupport.set(t,!!e.completionItem?.labelDetailsSupport);const n=e.triggerCharacters??[],o=e.allCommitCharacters,s=e.documentSelector,a={provideCompletionItems:(e,t,n,i)=>{const s=this._client,a=this._client.middleware,c=(e,t,n,i)=>s.sendRequest(r.CompletionRequest.type,s.code2ProtocolConverter.asCompletionParams(e,t,n),i).then((e=>i.isCancellationRequested?null:s.protocol2CodeConverter.asCompletionResult(e,o,i)),(e=>s.handleFailedRequest(r.CompletionRequest.type,i,e,null)));return a.provideCompletionItem?a.provideCompletionItem(e,t,i,n,c):c(e,t,i,n)},resolveCompletionItem:e.resolveProvider?(e,n)=>{const i=this._client,o=this._client.middleware,s=(e,n)=>i.sendRequest(r.CompletionResolveRequest.type,i.code2ProtocolConverter.asCompletionItem(e,!!this.labelDetailsSupport.get(t)),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asCompletionItem(e)),(t=>i.handleFailedRequest(r.CompletionResolveRequest.type,n,t,e)));return o.resolveCompletionItem?o.resolveCompletionItem(e,n,s):s(e,n)}:void 0};return[i.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(s),a,...n),a]}}t.CompletionItemFeature=c},36495:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncConfigurationFeature=t.toJSONObject=t.ConfigurationFeature=void 0;const i=n(66828),r=n(40273),o=n(59763),s=n(41980),a=n(88909);function c(e){if(e){if(Array.isArray(e))return e.map(c);if("object"==typeof e){const t=Object.create(null);for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=c(e[n]));return t}}return e}t.ConfigurationFeature=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(r.ConfigurationRequest.type,((t,n)=>{let i=e=>{let t=[];for(let n of e.items){let e=void 0!==n.scopeUri&&null!==n.scopeUri?this._client.protocol2CodeConverter.asUri(n.scopeUri):void 0;t.push(this.getConfiguration(e,null!==n.section?n.section:void 0))}return t},r=e.middleware.workspace;return r&&r.configuration?r.configuration(t,n,i):i(t)}))}getConfiguration(e,t){let n=null;if(t){let r=t.lastIndexOf(".");if(-1===r)n=c(i.workspace.getConfiguration(void 0,e).get(t));else{let o=i.workspace.getConfiguration(t.substr(0,r),e);o&&(n=c(o.get(t.substr(r+1))))}}else{let t=i.workspace.getConfiguration(void 0,e);n={};for(let e of Object.keys(t))t.has(e)&&(n[e]=c(t.get(e)))}return void 0===n&&(n=null),n}dispose(){}},t.toJSONObject=c,t.SyncConfigurationFeature=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return r.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,a.ensure)((0,a.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize?.configurationSection;void 0!==e&&this.register({id:s.generateUuid(),registerOptions:{section:e}})}register(e){let t=i.workspace.onDidChangeConfiguration((t=>{this.onDidChangeConfiguration(e.registerOptions.section,t)}));this._listeners.set(e.id,t),void 0!==e.registerOptions.section&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(const e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let n;if(n=o.string(e)?[e]:e,void 0!==n&&void 0!==t&&!n.some((e=>t.affectsConfiguration(e))))return;const i=async e=>void 0===e?this._client.sendNotification(r.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(r.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(e)});let s=this._client.middleware.workspace?.didChangeConfiguration;(s?s(n,i):i(n)).catch((e=>{this._client.error(`Sending notification ${r.DidChangeConfigurationNotification.type.method} failed`,e)}))}extractSettingsInformation(e){function t(e,t){let n=e;for(let e=0;e<t.length-1;e++){let i=n[t[e]];i||(i=Object.create(null),n[t[e]]=i),n=i}return n}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,r=Object.create(null);for(let o=0;o<e.length;o++){let s=e[o],a=s.indexOf("."),l=null;if(l=a>=0?i.workspace.getConfiguration(s.substr(0,a),n).get(s.substr(a+1)):i.workspace.getConfiguration(void 0,n).get(s),l){let n=e[o].split(".");t(r,n)[n[n.length-1]]=c(l)}}return r}}},20707:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeclarationFeature=void 0;const i=n(66828),r=n(40273),o=n(88909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.DeclarationRequest.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){const[n,i]=this.getRegistration(t,e.declarationProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDeclaration:(e,t,n)=>{const i=this._client,o=(e,t,n)=>i.sendRequest(r.DeclarationRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asDeclarationResult(e,n)),(e=>i.handleFailedRequest(r.DeclarationRequest.type,n,e,null))),s=i.middleware;return s.provideDeclaration?s.provideDeclaration(e,t,n,o):o(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.DeclarationFeature=s},20122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefinitionFeature=void 0;const i=n(66828),r=n(40273),o=n(88909),s=n(41980);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.DefinitionRequest.type)}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.definitionProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDefinition:(e,t,n)=>{const i=this._client,o=(e,t,n)=>i.sendRequest(r.DefinitionRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asDefinitionResult(e,n)),(e=>i.handleFailedRequest(r.DefinitionRequest.type,n,e,null))),s=i.middleware;return s.provideDefinition?s.provideDefinition(e,t,n,o):o(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.DefinitionFeature=a},92570:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticFeature=t.DiagnosticPullMode=t.vsdiag=void 0;const i=n(91171),r=n(66828),o=n(40273),s=n(41980),a=n(88909);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}var l,d,u,p;!function(e){let t;!function(e){e.full="full",e.unChanged="unChanged"}(t=e.DocumentDiagnosticReportKind||(e.DocumentDiagnosticReportKind={}))}(l=t.vsdiag||(t.vsdiag={})),function(e){e.onType="onType",e.onSave="onSave"}(d=t.DiagnosticPullMode||(t.DiagnosticPullMode={})),function(e){e.active="open",e.reschedule="reschedule",e.outDated="drop"}(u||(u={}));class h{constructor(){this.open=new Set;const e=()=>{this.open.clear();for(const e of r.window.tabGroups.all)for(const t of e.tabs){const e=t.input;e instanceof r.TabInputText?this.open.add(e.uri.toString()):e instanceof r.TabInputTextDiff&&this.open.add(e.modified.toString())}};e(),void 0!==r.window.tabGroups.onDidChangeTabs?this.disposable=r.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}dispose(){this.disposable.dispose()}isActive(e){return e instanceof r.Uri?r.window.activeTextEditor?.document.uri===e:r.window.activeTextEditor?.document===e}isVisible(e){const t=e instanceof r.Uri?e:e.uri;return this.open.has(t.toString())}getTabResources(){const e=[];for(const t of r.window.tabGroups.all)for(const n of t.tabs){const t=n.input;t instanceof r.TabInputText?e.push(t.uri):t instanceof r.TabInputTextDiff&&e.push(t.modified)}return e}}!function(e){e[e.document=1]="document",e[e.workspace=2]="workspace"}(p||(p={}));class f{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,n){const i=e===p.document?this.documentPullStates:this.workspacePullStates,[o,s,a]=t instanceof r.Uri?[t.toString(),t,n]:[t.uri.toString(),t.uri,t.version];let c=i.get(o);return void 0===c&&(c={document:s,pulledVersion:a,resultId:void 0},i.set(o,c)),c}update(e,t,n,i){const o=e===p.document?this.documentPullStates:this.workspacePullStates,[s,a,c,l]=t instanceof r.Uri?[t.toString(),t,n,i]:[t.uri.toString(),t.uri,t.version,n];let d=o.get(s);void 0===d?(d={document:a,pulledVersion:c,resultId:l},o.set(s,d)):(d.pulledVersion=c,d.resultId=l)}unTrack(e,t){const n=t instanceof r.Uri?t.toString():t.uri.toString();(e===p.document?this.documentPullStates:this.workspacePullStates).delete(n)}tracks(e,t){const n=t instanceof r.Uri?t.toString():t.uri.toString();return(e===p.document?this.documentPullStates:this.workspacePullStates).has(n)}getResultId(e,t){const n=t instanceof r.Uri?t.toString():t.uri.toString(),i=e===p.document?this.documentPullStates:this.workspacePullStates;return i.get(n)?.resultId}getAllResultIds(){const e=[];for(let[t,n]of this.workspacePullStates)this.documentPullStates.has(t)&&(n=this.documentPullStates.get(t)),void 0!==n.resultId&&e.push({uri:t,value:n.resultId});return e}}class m{constructor(e,t,n){this.client=e,this.tabs=t,this.options=n,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new r.EventEmitter,this.provider=this.createProvider(),this.diagnostics=r.languages.createDiagnosticCollection(n.identifier),this.openRequests=new Map,this.documentStates=new f,this.workspaceErrorCounter=0}knows(e,t){return this.documentStates.tracks(e,t)}pull(e,t){if(this.isDisposed)return;const n=e instanceof r.Uri?e:e.uri;this.pullAsync(e).then((()=>{t&&t()}),(e=>{this.client.error(`Document pull failed for text document ${n.toString()}`,e,!1)}))}async pullAsync(e,t){if(this.isDisposed)return;const n=e instanceof r.Uri,i=n?e:e.uri,s=i.toString();t=n?t:e.version;const c=this.openRequests.get(s),d=n?this.documentStates.track(p.document,e,t):this.documentStates.track(p.document,e);if(void 0===c){const n=new r.CancellationTokenSource;let c,h;this.openRequests.set(s,{state:u.active,document:e,version:t,tokenSource:n});try{c=await this.provider.provideDiagnostics(e,d.resultId,n.token)??{kind:l.DocumentDiagnosticReportKind.full,items:[]}}catch(t){if(t instanceof a.LSPCancellationError&&o.DiagnosticServerCancellationData.is(t.data)&&!1===t.data.retriggerRequest&&(h={state:u.outDated,document:e}),!(void 0===h&&t instanceof r.CancellationError))throw t;h={state:u.reschedule,document:e}}if(h=h??this.openRequests.get(s),void 0===h)return this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${s}`),void this.diagnostics.delete(i);if(this.openRequests.delete(s),!this.tabs.isVisible(e))return void this.documentStates.unTrack(p.document,e);if(h.state===u.outDated)return;void 0!==c&&(c.kind===l.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,c.items),d.pulledVersion=t,d.resultId=c.resultId),h.state===u.reschedule&&this.pull(e)}else c.state===u.active?(c.tokenSource.cancel(),this.openRequests.set(s,{state:u.reschedule,document:c.document})):c.state===u.outDated&&this.openRequests.set(s,{state:u.reschedule,document:c.document})}cleanupPull(e){const t=e instanceof r.Uri?e:e.uri,n=t.toString(),i=this.openRequests.get(n);this.options.workspaceDiagnostics||this.options.interFileDependencies?void 0!==i?this.openRequests.set(n,{state:u.reschedule,document:e}):this.pull(e):(void 0!==i&&(i.state===u.active&&i.tokenSource.cancel(),this.openRequests.set(n,{state:u.outDated,document:e})),this.diagnostics.delete(t))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then((()=>{this.workspaceTimeout=(0,o.RAL)().timer.setTimeout((()=>{this.pullWorkspace()}),2e3)}),(e=>{e instanceof a.LSPCancellationError||o.DiagnosticServerCancellationData.is(e.data)||(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,o.RAL)().timer.setTimeout((()=>{this.pullWorkspace()}),2e3))}))}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;void 0!==this.workspaceCancellation&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new r.CancellationTokenSource;const e=this.documentStates.getAllResultIds().map((e=>({uri:this.client.protocol2CodeConverter.asUri(e.uri),value:e.value})));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,(e=>{if(e&&!this.isDisposed)for(const t of e.items)t.kind===l.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(p.document,t.uri)||this.diagnostics.set(t.uri,t.items)),this.documentStates.update(p.workspace,t.uri,t.version??void 0,t.resultId)}))}createProvider(){const e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(e,t,n)=>{const i=(e,t,n)=>{const i={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(e instanceof r.Uri?e:e.uri)},previousResultId:t};return!0!==this.isDisposed&&this.client.isRunning()?this.client.sendRequest(o.DocumentDiagnosticRequest.type,i,n).then((async e=>null==e||this.isDisposed||n.isCancellationRequested?{kind:l.DocumentDiagnosticReportKind.full,items:[]}:e.kind===o.DocumentDiagnosticReportKind.Full?{kind:l.DocumentDiagnosticReportKind.full,resultId:e.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(e.items,n)}:{kind:l.DocumentDiagnosticReportKind.unChanged,resultId:e.resultId}),(e=>this.client.handleFailedRequest(o.DocumentDiagnosticRequest.type,n,e,{kind:l.DocumentDiagnosticReportKind.full,items:[]}))):{kind:l.DocumentDiagnosticReportKind.full,items:[]}},s=this.client.middleware;return s.provideDiagnostics?s.provideDiagnostics(e,t,n,i):i(e,t,n)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(e,t,n)=>{const i=async e=>e.kind===o.DocumentDiagnosticReportKind.Full?{kind:l.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(e.uri),resultId:e.resultId,version:e.version,items:await this.client.protocol2CodeConverter.asDiagnostics(e.items,t)}:{kind:l.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(e.uri),resultId:e.resultId,version:e.version},r=e=>{const t=[];for(const n of e)t.push({uri:this.client.code2ProtocolConverter.asUri(n.uri),value:n.value});return t},a=(e,t)=>{const a=(0,s.generateUuid)(),c=this.client.onProgress(o.WorkspaceDiagnosticRequest.partialResult,a,(async e=>{if(null==e)return void n(null);const t={items:[]};for(const n of e.items)try{t.items.push(await i(n))}catch(e){this.client.error("Converting workspace diagnostics failed.",e)}n(t)})),l={identifier:this.options.identifier,previousResultIds:r(e),partialResultToken:a};return!0!==this.isDisposed&&this.client.isRunning()?this.client.sendRequest(o.WorkspaceDiagnosticRequest.type,l,t).then((async e=>{if(t.isCancellationRequested)return{items:[]};const r={items:[]};for(const t of e.items)r.items.push(await i(t));return c.dispose(),n(r),{items:[]}}),(e=>(c.dispose(),this.client.handleFailedRequest(o.DocumentDiagnosticRequest.type,t,e,{items:[]})))):{items:[]}},c=this.client.middleware;return c.provideWorkspaceDiagnostics?c.provideWorkspaceDiagnostics(e,t,n,a):a(e,t)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(const[e,t]of this.openRequests)t.state===u.active&&t.tokenSource.cancel(),this.openRequests.set(e,{state:u.outDated,document:t.document});this.diagnostics.dispose()}}class g{constructor(e){this.diagnosticRequestor=e,this.documents=new o.LinkedMap,this.isDisposed=!1}add(e){if(!0===this.isDisposed)return;const t=e instanceof r.Uri?e.toString():e.uri.toString();this.documents.has(t)||(this.documents.set(t,e,o.Touch.Last),this.trigger())}remove(e){const t=e instanceof r.Uri?e.toString():e.uri.toString();this.documents.has(t)&&(this.documents.delete(t),this.diagnosticRequestor.pull(e)),0===this.documents.size?this.stop():e===this.endDocument&&(this.endDocument=this.documents.last)}trigger(){!0!==this.isDisposed&&(void 0===this.intervalHandle?(this.endDocument=this.documents.last,this.intervalHandle=(0,o.RAL)().timer.setInterval((()=>{const e=this.documents.first;if(void 0!==e){const t=e instanceof r.Uri?e.toString():e.uri.toString();this.diagnosticRequestor.pull(e),this.documents.set(t,e,o.Touch.Last),e===this.endDocument&&this.stop()}}),200)):this.endDocument=this.documents.last)}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}}class v{constructor(e,t,n){const s=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},a=e.protocol2CodeConverter.asDocumentSelector(n.documentSelector),c=[],l=e=>e instanceof r.Uri?(e=>{const t=n.documentSelector;if(void 0!==s.match)return s.match(t,e);for(const n of t)if(o.TextDocumentFilter.is(n)){if("string"==typeof n)return!1;if(void 0!==n.language&&"*"!==n.language)return!1;if(void 0!==n.scheme&&"*"!==n.scheme&&n.scheme!==e.scheme)return!1;if(void 0!==n.pattern){const t=new i.Minimatch(n.pattern,{noext:!0});if(!t.makeRe())return!1;if(!t.match(e.fsPath))return!1}}return!0})(e):r.languages.match(a,e)>0&&t.isVisible(e),u=e=>e instanceof r.Uri?this.activeTextDocument?.uri.toString()===e.toString():this.activeTextDocument===e;this.diagnosticRequestor=new m(e,t,n),this.backgroundScheduler=new g(this.diagnosticRequestor);const h=e=>{l(e)&&n.interFileDependencies&&!u(e)&&this.backgroundScheduler.add(e)};this.activeTextDocument=r.window.activeTextEditor?.document,r.window.onDidChangeActiveTextEditor((e=>{const t=this.activeTextDocument;this.activeTextDocument=e?.document,void 0!==t&&h(t),void 0!==this.activeTextDocument&&this.backgroundScheduler.remove(this.activeTextDocument)}));const f=e.getFeature(o.DidOpenTextDocumentNotification.method);c.push(f.onNotificationSent((e=>{const t=e.original;l(t)&&this.diagnosticRequestor.pull(t,(()=>{h(t)}))})));const v=new Set;for(const e of r.workspace.textDocuments)l(e)&&(this.diagnosticRequestor.pull(e,(()=>{h(e)})),v.add(e.uri.toString()));if(!0===s.onTabs)for(const e of t.getTabResources())!v.has(e.toString())&&l(e)&&this.diagnosticRequestor.pull(e,(()=>{h(e)}));if(!0===s.onChange){const t=e.getFeature(o.DidChangeTextDocumentNotification.method);c.push(t.onNotificationSent((async e=>{const t=e.original.document;(void 0===s.filter||!s.filter(t,d.onType))&&this.diagnosticRequestor.knows(p.document,t)&&e.original.contentChanges.length>0&&this.diagnosticRequestor.pull(t,(()=>{this.backgroundScheduler.trigger()}))})))}if(!0===s.onSave){const t=e.getFeature(o.DidSaveTextDocumentNotification.method);c.push(t.onNotificationSent((e=>{const t=e.original;void 0!==s.filter&&s.filter(t,d.onSave)||!this.diagnosticRequestor.knows(p.document,t)||this.diagnosticRequestor.pull(e.original,(()=>{this.backgroundScheduler.trigger()}))})))}const y=e.getFeature(o.DidCloseTextDocumentNotification.method);c.push(y.onNotificationSent((e=>{const t=e.original;this.diagnosticRequestor.cleanupPull(t),this.backgroundScheduler.remove(t)}))),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event((()=>{for(const e of r.workspace.textDocuments)l(e)&&this.diagnosticRequestor.pull(e)})),!0===n.workspaceDiagnostics&&"da348dc5-c30a-4515-9d98-31ff3be38d14"!==n.identifier&&this.diagnosticRequestor.pullWorkspace(),this.disposable=r.Disposable.from(...c,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}}class y extends a.TextDocumentLanguageFeature{constructor(e){super(e,o.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let t=c(c(e,"textDocument"),"diagnostic");t.dynamicRegistration=!0,t.relatedDocumentSupport=!1,c(c(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,t){this._client.onRequest(o.DiagnosticRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeDiagnosticsEmitter.fire()}));let[n,i]=this.getRegistration(t,e.diagnosticProvider);n&&i&&this.register({id:n,registerOptions:i})}dispose(){void 0!==this.tabs&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(e){void 0===this.tabs&&(this.tabs=new h);const t=new v(this._client,this.tabs,e);return[t.disposable,t]}}t.DiagnosticFeature=y},89959:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentHighlightFeature=void 0;const i=n(66828),r=n(40273),o=n(88909),s=n(41980);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentHighlightProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDocumentHighlights:(e,t,n)=>{const i=this._client,o=(e,t,n)=>i.sendRequest(r.DocumentHighlightRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asDocumentHighlights(e,n)),(e=>i.handleFailedRequest(r.DocumentHighlightRequest.type,n,e,null))),s=i.middleware;return s.provideDocumentHighlights?s.provideDocumentHighlights(e,t,n,o):o(e,t,n)}};return[i.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.DocumentHighlightFeature=a},13471:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentLinkFeature=void 0;const i=n(66828),r=n(40273),o=n(88909),s=n(41980);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.DocumentLinkRequest.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentLinkProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDocumentLinks:(e,t)=>{const n=this._client,i=(e,t)=>n.sendRequest(r.DocumentLinkRequest.type,n.code2ProtocolConverter.asDocumentLinkParams(e),t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asDocumentLinks(e,t)),(e=>n.handleFailedRequest(r.DocumentLinkRequest.type,t,e,null))),o=n.middleware;return o.provideDocumentLinks?o.provideDocumentLinks(e,t,i):i(e,t)},resolveDocumentLink:e.resolveProvider?(e,t)=>{const n=this._client;let i=(e,t)=>n.sendRequest(r.DocumentLinkResolveRequest.type,n.code2ProtocolConverter.asDocumentLink(e),t).then((i=>t.isCancellationRequested?e:n.protocol2CodeConverter.asDocumentLink(i)),(i=>n.handleFailedRequest(r.DocumentLinkResolveRequest.type,t,i,e)));const o=n.middleware;return o.resolveDocumentLink?o.resolveDocumentLink(e,t,i):i(e,t)}:void 0};return[i.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.DocumentLinkFeature=a},42483:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentSymbolFeature=t.SupportedSymbolTags=t.SupportedSymbolKinds=void 0;const i=n(66828),r=n(40273),o=n(88909),s=n(41980);t.SupportedSymbolKinds=[r.SymbolKind.File,r.SymbolKind.Module,r.SymbolKind.Namespace,r.SymbolKind.Package,r.SymbolKind.Class,r.SymbolKind.Method,r.SymbolKind.Property,r.SymbolKind.Field,r.SymbolKind.Constructor,r.SymbolKind.Enum,r.SymbolKind.Interface,r.SymbolKind.Function,r.SymbolKind.Variable,r.SymbolKind.Constant,r.SymbolKind.String,r.SymbolKind.Number,r.SymbolKind.Boolean,r.SymbolKind.Array,r.SymbolKind.Object,r.SymbolKind.Key,r.SymbolKind.Null,r.SymbolKind.EnumMember,r.SymbolKind.Struct,r.SymbolKind.Event,r.SymbolKind.Operator,r.SymbolKind.TypeParameter],t.SupportedSymbolTags=[r.SymbolTag.Deprecated];class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.DocumentSymbolRequest.type)}fillClientCapabilities(e){let n=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"documentSymbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:t.SupportedSymbolKinds},n.hierarchicalDocumentSymbolSupport=!0,n.tagSupport={valueSet:t.SupportedSymbolTags},n.labelSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentSymbolProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDocumentSymbols:(e,t)=>{const n=this._client,i=(e,t)=>n.sendRequest(r.DocumentSymbolRequest.type,n.code2ProtocolConverter.asDocumentSymbolParams(e),t).then((async e=>{if(t.isCancellationRequested||null==e)return null;if(0===e.length)return[];{const i=e[0];return r.DocumentSymbol.is(i)?await n.protocol2CodeConverter.asDocumentSymbols(e,t):await n.protocol2CodeConverter.asSymbolInformations(e,t)}}),(e=>n.handleFailedRequest(r.DocumentSymbolRequest.type,t,e,null))),o=n.middleware;return o.provideDocumentSymbols?o.provideDocumentSymbols(e,t,i):i(e,t)}},o=void 0!==e.label?{label:e.label}:void 0;return[i.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,o),n]}}t.DocumentSymbolFeature=a},44849:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExecuteCommandFeature=void 0;const i=n(66828),r=n(40273),o=n(41980),s=n(88909);t.ExecuteCommandFeature=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return r.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:o.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){const t=this._client,n=t.middleware,o=(e,n)=>{let i={command:e,arguments:n};return t.sendRequest(r.ExecuteCommandRequest.type,i).then(void 0,(e=>t.handleFailedRequest(r.ExecuteCommandRequest.type,void 0,e,void 0)))};if(e.registerOptions.commands){const t=[];for(const r of e.registerOptions.commands)t.push(i.commands.registerCommand(r,((...e)=>n.executeCommand?n.executeCommand(r,e,o):o(r,e))));this._commands.set(e.id,t)}}unregister(e){let t=this._commands.get(e);t&&t.forEach((e=>e.dispose()))}dispose(){this._commands.forEach((e=>{e.forEach((e=>e.dispose()))})),this._commands.clear()}}},88909:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFeature=t.TextDocumentLanguageFeature=t.TextDocumentEventFeature=t.DynamicDocumentFeature=t.DynamicFeature=t.StaticFeature=t.ensure=t.LSPCancellationError=void 0;const i=n(66828),r=n(40273),o=n(59763),s=n(41980);class a extends i.CancellationError{constructor(e){super(),this.data=e}}t.LSPCancellationError=a,t.ensure=function(e,t){return void 0===e[t]&&(e[t]={}),e[t]},(t.StaticFeature||(t.StaticFeature={})).is=function(e){const t=e;return null!=t&&o.func(t.fillClientCapabilities)&&o.func(t.initialize)&&o.func(t.getState)&&o.func(t.dispose)&&(void 0===t.fillInitializeParams||o.func(t.fillInitializeParams))},(t.DynamicFeature||(t.DynamicFeature={})).is=function(e){const t=e;return null!=t&&o.func(t.fillClientCapabilities)&&o.func(t.initialize)&&o.func(t.getState)&&o.func(t.dispose)&&(void 0===t.fillInitializeParams||o.func(t.fillInitializeParams))&&o.func(t.register)&&o.func(t.unregister)&&void 0!==t.registrationType};class c{constructor(e){this._client=e}getState(){const e=this.getDocumentSelectors();let t=0;for(const n of e){t++;for(const e of i.workspace.textDocuments)if(i.languages.match(n,e)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}const n=t>0;return{kind:"document",id:this.registrationType.method,registrations:n,matches:!1}}}t.DynamicDocumentFeature=c,t.TextDocumentEventFeature=class extends c{constructor(e,t,n,r,o,s,a){super(e),this._event=t,this._type=n,this._middleware=r,this._createParams=o,this._textDocument=s,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new i.EventEmitter}static textDocumentFilter(e,t){for(const n of e)if(i.languages.match(n,t)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event((e=>{this.callback(e).catch((e=>{this._client.error(`Sending document notification ${this._type.method} failed.`,e)}))}))),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){const t=async e=>{const t=this._createParams(e);await this._client.sendNotification(this._type,t).catch(),this.notificationSent(e,this._type,t)};if(this.matches(e)){const n=this._middleware();return n?n(e,(e=>t(e))):t(e)}}matches(e){return!this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))&&(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,n){this._onNotificationSent.fire({original:e,type:t,params:n})}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(const t of this._selectors.values())if(i.languages.match(t,e)>0)return{send:e=>this.callback(e)}}},t.TextDocumentLanguageFeature=class extends c{constructor(e,t){super(e),this._registrationType=t,this._registrations=new Map}*getDocumentSelectors(){for(const e of this._registrations.values()){const t=e.data.registerOptions.documentSelector;null!==t&&(yield this._client.protocol2CodeConverter.asDocumentSelector(t))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);void 0!==t&&t.disposable.dispose()}dispose(){this._registrations.forEach((e=>{e.disposable.dispose()})),this._registrations.clear()}getRegistration(e,t){if(!t)return[void 0,void 0];if(r.TextDocumentRegistrationOptions.is(t)){const n=r.StaticRegistrationOptions.hasId(t)?t.id:s.generateUuid(),i=t.documentSelector||e;if(i)return[n,Object.assign({},t,{documentSelector:i})]}else if(o.boolean(t)&&!0===t||r.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let n=o.boolean(t)&&!0===t?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[s.generateUuid(),n]}return[void 0,void 0]}getRegistrationOptions(e,t){if(e&&t)return o.boolean(t)&&!0===t?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(const t of this._registrations.values()){let n=t.data.registerOptions.documentSelector;if(null!==n&&i.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(n),e)>0)return t.provider}}getAllProviders(){const e=[];for(const t of this._registrations.values())e.push(t.provider);return e}},t.WorkspaceFeature=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}getState(){const e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){const t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);void 0!==t&&t.disposable.dispose()}dispose(){this._registrations.forEach((e=>{e.disposable.dispose()})),this._registrations.clear()}getProviders(){const e=[];for(const t of this._registrations.values())e.push(t.provider);return e}}},7606:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WillDeleteFilesFeature=t.WillRenameFilesFeature=t.WillCreateFilesFeature=t.DidDeleteFilesFeature=t.DidRenameFilesFeature=t.DidCreateFilesFeature=void 0;const i=n(66828),r=n(91171),o=n(40273),s=n(41980);function a(e,t){return void 0===e[t]&&(e[t]={}),e[t]}function c(e,t,n){e[t]=n}class l{constructor(e,t,n,i,r){this._client=e,this._event=t,this._registrationType=n,this._clientCapability=i,this._serverCapability=r,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){const t=a(a(e,"workspace"),"fileOperations");c(t,"dynamicRegistration",!0),c(t,this._clientCapability,!0)}initialize(e){const t=e.workspace?.fileOperations,n=void 0!==t?t[this._serverCapability]:void 0;if(void 0!==n?.filters)try{this.register({id:s.generateUuid(),registerOptions:{filters:n.filters}})}catch(e){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${e}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));const t=e.registerOptions.filters.map((e=>{const t=new r.Minimatch(e.pattern.glob,l.asMinimatchOptions(e.pattern.options));if(!t.makeRe())throw new Error(`Invalid pattern ${e.pattern.glob}!`);return{scheme:e.scheme,matcher:t,kind:e.pattern.matches}}));this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),0===this._filters.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return l.getFileType(e)}async filter(e,t){const n=await Promise.all(e.files.map((async e=>{const n=t(e),r=n.fsPath.replace(/\\/g,"/");for(const e of this._filters.values())for(const t of e)if(void 0===t.scheme||t.scheme===n.scheme)if(t.matcher.match(r)){if(void 0===t.kind)return!0;const e=await this.getFileType(n);if(void 0===e)return this._client.error(`Failed to determine file type for ${n.toString()}.`),!0;if(e===i.FileType.File&&t.kind===o.FileOperationPatternKind.file||e===i.FileType.Directory&&t.kind===o.FileOperationPatternKind.folder)return!0}else if(t.kind===o.FileOperationPatternKind.folder&&await l.getFileType(n)===i.FileType.Directory&&t.matcher.match(`${r}/`))return!0;return!1}))),r=e.files.filter(((e,t)=>n[t]));return{...e,files:r}}static async getFileType(e){try{return(await i.workspace.fs.stat(e)).type}catch(e){return}}static asMinimatchOptions(e){if(void 0!==e)return!0===e.ignoreCase?{nocase:!0}:void 0}}class d extends l{constructor(e,t,n,i,r,o,s){super(e,t,n,i,r),this._notificationType=n,this._accessUri=o,this._createParams=s}async send(e){const t=await this.filter(e,this._accessUri);if(t.files.length){const e=async e=>this._client.sendNotification(this._notificationType,this._createParams(e));return this.doSend(t,e)}}}class u extends d{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){const t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);const n=await l.getFileType(e);return n&&this._fsPathFileTypes.set(t,n),n}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),0===this.filterSize()&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}}t.DidCreateFilesFeature=class extends d{constructor(e){super(e,i.workspace.onDidCreateFiles,o.DidCreateFilesNotification.type,"didCreate","didCreate",(e=>e),e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.didCreateFiles?n.didCreateFiles(e,t):t(e)}},t.DidRenameFilesFeature=class extends u{constructor(e){super(e,i.workspace.onDidRenameFiles,o.DidRenameFilesNotification.type,"didRename","didRename",(e=>e.oldUri),e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=i.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,(e=>e.oldUri)))}doSend(e,t){this.clearFileTypeCache();const n=this._client.middleware.workspace;return n?.didRenameFiles?n.didRenameFiles(e,t):t(e)}},t.DidDeleteFilesFeature=class extends u{constructor(e){super(e,i.workspace.onDidDeleteFiles,o.DidDeleteFilesNotification.type,"didDelete","didDelete",(e=>e),e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=i.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,(e=>e)))}doSend(e,t){this.clearFileTypeCache();const n=this._client.middleware.workspace;return n?.didDeleteFiles?n.didDeleteFiles(e,t):t(e)}};class p extends l{constructor(e,t,n,i,r,o,s){super(e,t,n,i,r),this._requestType=n,this._accessUri=o,this._createParams=s}async send(e){const t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){const t=await this.filter(e,this._accessUri);if(t.files.length){const e=e=>this._client.sendRequest(this._requestType,this._createParams(e),e.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,e)}}}t.WillCreateFilesFeature=class extends p{constructor(e){super(e,i.workspace.onWillCreateFiles,o.WillCreateFilesRequest.type,"willCreate","willCreate",(e=>e),e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.willCreateFiles?n.willCreateFiles(e,t):t(e)}},t.WillRenameFilesFeature=class extends p{constructor(e){super(e,i.workspace.onWillRenameFiles,o.WillRenameFilesRequest.type,"willRename","willRename",(e=>e.oldUri),e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.willRenameFiles?n.willRenameFiles(e,t):t(e)}},t.WillDeleteFilesFeature=class extends p{constructor(e){super(e,i.workspace.onWillDeleteFiles,o.WillDeleteFilesRequest.type,"willDelete","willDelete",(e=>e),e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.willDeleteFiles?n.willDeleteFiles(e,t):t(e)}}},65338:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileSystemWatcherFeature=void 0;const i=n(66828),r=n(40273),o=n(88909);t.FileSystemWatcherFeature=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return r.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,o.ensure)((0,o.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;const t=[];for(const n of e.registerOptions.watchers){const e=this._client.protocol2CodeConverter.asGlobPattern(n.globPattern);if(void 0===e)continue;let o=!0,s=!0,a=!0;void 0!==n.kind&&null!==n.kind&&(o=0!=(n.kind&r.WatchKind.Create),s=0!=(n.kind&r.WatchKind.Change),a=0!=(n.kind&r.WatchKind.Delete));const c=i.workspace.createFileSystemWatcher(e,!o,!s,!a);this.hookListeners(c,o,s,a,t),t.push(c)}this._watchers.set(e.id,t)}registerRaw(e,t){let n=[];for(let e of t)this.hookListeners(e,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,n,i,o){t&&e.onDidCreate((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:r.FileChangeType.Created})),null,o),n&&e.onDidChange((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:r.FileChangeType.Changed})),null,o),i&&e.onDidDelete((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:r.FileChangeType.Deleted})),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let e of t)e.dispose()}dispose(){this._watchers.forEach((e=>{for(let t of e)t.dispose()})),this._watchers.clear()}}},96454:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldingRangeFeature=void 0;const i=n(66828),r=n(40273),o=n(88909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0,t.foldingRangeKind={valueSet:[r.FoldingRangeKind.Comment,r.FoldingRangeKind.Imports,r.FoldingRangeKind.Region]},t.foldingRange={collapsedText:!1}}initialize(e,t){let[n,i]=this.getRegistration(t,e.foldingRangeProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n={provideFoldingRanges:(e,t,n)=>{const i=this._client,o=(e,t,n)=>{const o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e)};return i.sendRequest(r.FoldingRangeRequest.type,o,n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asFoldingRanges(e,n)),(e=>i.handleFailedRequest(r.FoldingRangeRequest.type,n,e,null)))},s=i.middleware;return s.provideFoldingRanges?s.provideFoldingRanges(e,t,n,o):o(e,0,n)}};return[i.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.FoldingRangeFeature=s},56426:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentOnTypeFormattingFeature=t.DocumentRangeFormattingFeature=t.DocumentFormattingFeature=void 0;const i=n(66828),r=n(40273),o=n(41980),s=n(88909);var a;!function(e){e.fromConfiguration=function(e){const t=i.workspace.getConfiguration("files",e);return{trimTrailingWhitespace:t.get("trimTrailingWhitespace"),trimFinalNewlines:t.get("trimFinalNewlines"),insertFinalNewline:t.get("insertFinalNewline")}}}(a||(a={}));class c extends s.TextDocumentLanguageFeature{constructor(e){super(e,r.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentFormattingProvider);n&&this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDocumentFormattingEdits:(e,t,n)=>{const i=this._client,o=(e,t,n)=>{const o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e),options:i.code2ProtocolConverter.asFormattingOptions(t,a.fromConfiguration(e))};return i.sendRequest(r.DocumentFormattingRequest.type,o,n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asTextEdits(e,n)),(e=>i.handleFailedRequest(r.DocumentFormattingRequest.type,n,e,null)))},s=i.middleware;return s.provideDocumentFormattingEdits?s.provideDocumentFormattingEdits(e,t,n,o):o(e,t,n)}};return[i.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.DocumentFormattingFeature=c;class l extends s.TextDocumentLanguageFeature{constructor(e){super(e,r.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);n&&this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDocumentRangeFormattingEdits:(e,t,n,i)=>{const o=this._client,s=(e,t,n,i)=>{const s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),range:o.code2ProtocolConverter.asRange(t),options:o.code2ProtocolConverter.asFormattingOptions(n,a.fromConfiguration(e))};return o.sendRequest(r.DocumentRangeFormattingRequest.type,s,i).then((e=>i.isCancellationRequested?null:o.protocol2CodeConverter.asTextEdits(e,i)),(e=>o.handleFailedRequest(r.DocumentRangeFormattingRequest.type,i,e,null)))},c=o.middleware;return c.provideDocumentRangeFormattingEdits?c.provideDocumentRangeFormattingEdits(e,t,n,i,s):s(e,t,n,i)}};return[i.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.DocumentRangeFormattingFeature=l;class d extends s.TextDocumentLanguageFeature{constructor(e){super(e,r.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);n&&this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideOnTypeFormattingEdits:(e,t,n,i,o)=>{const s=this._client,c=(e,t,n,i,o)=>{let c={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(e),position:s.code2ProtocolConverter.asPosition(t),ch:n,options:s.code2ProtocolConverter.asFormattingOptions(i,a.fromConfiguration(e))};return s.sendRequest(r.DocumentOnTypeFormattingRequest.type,c,o).then((e=>o.isCancellationRequested?null:s.protocol2CodeConverter.asTextEdits(e,o)),(e=>s.handleFailedRequest(r.DocumentOnTypeFormattingRequest.type,o,e,null)))},l=s.middleware;return l.provideOnTypeFormattingEdits?l.provideOnTypeFormattingEdits(e,t,n,i,o,c):c(e,t,n,i,o)}},o=e.moreTriggerCharacter||[];return[i.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,e.firstTriggerCharacter,...o),n]}}t.DocumentOnTypeFormattingFeature=d},96782:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HoverFeature=void 0;const i=n(66828),r=n(40273),o=n(88909),s=n(41980);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.HoverRequest.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[r.MarkupKind.Markdown,r.MarkupKind.PlainText]}initialize(e,t){const n=this.getRegistrationOptions(t,e.hoverProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideHover:(e,t,n)=>{const i=this._client,o=(e,t,n)=>i.sendRequest(r.HoverRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asHover(e)),(e=>i.handleFailedRequest(r.HoverRequest.type,n,e,null))),s=i.middleware;return s.provideHover?s.provideHover(e,t,n,o):o(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.HoverFeature=a},79889:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationFeature=void 0;const i=n(66828),r=n(40273),o=n(88909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.ImplementationRequest.type)}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.implementationProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n={provideImplementation:(e,t,n)=>{const i=this._client,o=(e,t,n)=>i.sendRequest(r.ImplementationRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asDefinitionResult(e,n)),(e=>i.handleFailedRequest(r.ImplementationRequest.type,n,e,null))),s=i.middleware;return s.provideImplementation?s.provideImplementation(e,t,n,o):o(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.ImplementationFeature=s},16190:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlayHintsFeature=void 0;const i=n(66828),r=n(40273),o=n(88909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.InlayHintRequest.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"inlayHint");t.dynamicRegistration=!0,t.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,o.ensure)((0,o.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,t){this._client.onRequest(r.InlayHintRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeInlayHints.fire()}));const[n,i]=this.getRegistration(t,e.inlayHintProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n=new i.EventEmitter,o={onDidChangeInlayHints:n.event,provideInlayHints:(e,t,n)=>{const i=this._client,o=async(e,t,n)=>{const o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e),range:i.code2ProtocolConverter.asRange(t)};try{const e=await i.sendRequest(r.InlayHintRequest.type,o,n);return n.isCancellationRequested?null:i.protocol2CodeConverter.asInlayHints(e,n)}catch(e){return i.handleFailedRequest(r.InlayHintRequest.type,n,e,null)}},s=i.middleware;return s.provideInlayHints?s.provideInlayHints(e,t,n,o):o(e,t,n)}};return o.resolveInlayHint=!0===e.resolveProvider?(e,t)=>{const n=this._client,i=async(e,t)=>{try{const i=await n.sendRequest(r.InlayHintResolveRequest.type,n.code2ProtocolConverter.asInlayHint(e),t);if(t.isCancellationRequested)return null;const o=n.protocol2CodeConverter.asInlayHint(i,t);return t.isCancellationRequested?null:o}catch(e){return n.handleFailedRequest(r.InlayHintResolveRequest.type,t,e,null)}},o=n.middleware;return o.resolveInlayHint?o.resolveInlayHint(e,t,i):i(e,t)}:void 0,[this.registerProvider(t,o),{provider:o,onDidChangeInlayHints:n}]}registerProvider(e,t){return i.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.InlayHintsFeature=s},45098:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValueFeature=void 0;const i=n(66828),r=n(40273),o=n(88909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.InlineValueRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,o.ensure)((0,o.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,t){this._client.onRequest(r.InlineValueRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeInlineValues.fire()}));const[n,i]=this.getRegistration(t,e.inlineValueProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n=new i.EventEmitter,o={onDidChangeInlineValues:n.event,provideInlineValues:(e,t,n,i)=>{const o=this._client,s=(e,t,n,i)=>{const s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),range:o.code2ProtocolConverter.asRange(t),context:o.code2ProtocolConverter.asInlineValueContext(n)};return o.sendRequest(r.InlineValueRequest.type,s,i).then((e=>i.isCancellationRequested?null:o.protocol2CodeConverter.asInlineValues(e,i)),(e=>o.handleFailedRequest(r.InlineValueRequest.type,i,e,null)))},a=o.middleware;return a.provideInlineValues?a.provideInlineValues(e,t,n,i,s):s(e,t,n,i)}};return[this.registerProvider(t,o),{provider:o,onDidChangeInlineValues:n}]}registerProvider(e,t){return i.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.InlineValueFeature=s},43483:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingFeature=void 0;const i=n(66828),r=n(40273),o=n(88909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"linkedEditingRange").dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.linkedEditingRangeProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n={provideLinkedEditingRanges:(e,t,n)=>{const i=this._client,o=(e,t,n)=>i.sendRequest(r.LinkedEditingRangeRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asLinkedEditingRanges(e,n)),(e=>i.handleFailedRequest(r.LinkedEditingRangeRequest.type,n,e,null))),s=i.middleware;return s.provideLinkedEditingRange?s.provideLinkedEditingRange(e,t,n,o):o(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.LinkedEditingFeature=s},30203:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookDocumentSyncFeature=void 0;const i=n(66828),r=n(91171),o=n(40273),s=n(41980),a=n(59763);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}var l,d,u,p,h;!function(e){let t;!function(t){function n(e,t){return e.map((e=>s(e,t)))}function r(e){return c(new Set,e)}function s(e,t){const n=o.NotebookCell.create(function(e){switch(e){case i.NotebookCellKind.Markup:return o.NotebookCellKind.Markup;case i.NotebookCellKind.Code:return o.NotebookCellKind.Code}}(e.kind),t.asUri(e.document.uri));return Object.keys(e.metadata).length>0&&(n.metadata=r(e.metadata)),void 0!==e.executionSummary&&a.number(e.executionSummary.executionOrder)&&a.boolean(e.executionSummary.success)&&(n.executionSummary={executionOrder:e.executionSummary.executionOrder,success:e.executionSummary.success}),n}function c(e,t){if(e.has(t))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(t)){const n=[];for(const i of t)if(null!==i&&"object"==typeof i||Array.isArray(i))n.push(c(e,i));else{if(i instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");n.push(i)}return n}{const n=Object.keys(t),i=Object.create(null);for(const r of n){const n=t[r];if(null!==n&&"object"==typeof n||Array.isArray(n))i[r]=c(e,n);else{if(n instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");i[r]=n}}return i}}t.asVersionedNotebookDocumentIdentifier=function(e,t){return{version:e.version,uri:t.asUri(e.uri)}},t.asNotebookDocument=function(e,t,i){const s=o.NotebookDocument.create(i.asUri(e.uri),e.notebookType,e.version,n(t,i));return Object.keys(e.metadata).length>0&&(s.metadata=r(e.metadata)),s},t.asNotebookCells=n,t.asMetadata=r,t.asNotebookCell=s,t.asTextContentChange=function(e,t){const n=t.asChangeTextDocumentParams(e);return{document:n.textDocument,changes:n.contentChanges}},t.asNotebookDocumentChangeEvent=function(t,n){const i=Object.create(null);if(t.metadata&&(i.metadata=e.c2p.asMetadata(t.metadata)),void 0!==t.cells){const r=Object.create(null),o=t.cells;o.structure&&(r.structure={array:{start:o.structure.array.start,deleteCount:o.structure.array.deleteCount,cells:void 0!==o.structure.array.cells?o.structure.array.cells.map((t=>e.c2p.asNotebookCell(t,n))):void 0},didOpen:void 0!==o.structure.didOpen?o.structure.didOpen.map((e=>n.asOpenTextDocumentParams(e.document).textDocument)):void 0,didClose:void 0!==o.structure.didClose?o.structure.didClose.map((e=>n.asCloseTextDocumentParams(e.document).textDocument)):void 0}),void 0!==o.data&&(r.data=o.data.map((t=>e.c2p.asNotebookCell(t,n)))),void 0!==o.textContent&&(r.textContent=o.textContent.map((t=>e.c2p.asTextContentChange(t,n)))),Object.keys(r).length>0&&(i.cells=r)}return i}}(t=e.c2p||(e.c2p={}))}(l||(l={})),function(e){function t(e,t,i=!0){return!(e.kind!==t.kind||e.document.uri.toString()!==t.document.uri.toString()||e.document.languageId!==t.document.languageId||!function(e,t){return e===t||void 0!==e&&void 0!==t&&(e.executionOrder===t.executionOrder&&e.success===t.success&&function(e,t){return e===t||void 0!==e&&void 0!==t&&(e.startTime===t.startTime&&e.endTime===t.endTime)}(e.timing,t.timing))}(e.executionSummary,t.executionSummary))&&(!i||i&&n(e.metadata,t.metadata))}function n(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;const r=Array.isArray(e),o=Array.isArray(t);if(r!==o)return!1;if(r&&o){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1}if(i(e)&&i(t)){const i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;if(i.sort(),r.sort(),!n(i,r))return!1;for(let r=0;r<i.length;r++){const o=i[r];if(!n(e[o],t[o]))return!1}return!0}return!1}function i(e){return null!==e&&"object"==typeof e}e.computeDiff=function(e,n,i){const r=e.length,o=n.length;let s=0;for(;s<o&&s<r&&t(e[s],n[s],i);)s++;if(s<o&&s<r){let a=r-1,c=o-1;for(;a>=0&&c>=0&&t(e[a],n[c],i);)a--,c--;const l=a+1-s,d=s===c+1?void 0:n.slice(s,c+1);return void 0!==d?{start:s,deleteCount:l,cells:d}:{start:s,deleteCount:l}}return s<o?{start:s,deleteCount:0,cells:n.slice(s)}:s<r?{start:s,deleteCount:r-s}:void 0},e.isObjectLiteral=i}(d||(d={})),function(e){e.matchNotebook=function(e,t){if("string"==typeof e)return"*"===e||t.notebookType===e;if(void 0!==e.notebookType&&"*"!==e.notebookType&&t.notebookType!==e.notebookType)return!1;const n=t.uri;if(void 0!==e.scheme&&"*"!==e.scheme&&n.scheme!==e.scheme)return!1;if(void 0!==e.pattern){const t=new r.Minimatch(e.pattern,{noext:!0});if(!t.makeRe())return!1;if(!t.match(n.fsPath))return!1}return!0}}(u||(u={})),function(e){function t(e,t,n,i){return void 0===t&&void 0===n?{notebook:e,language:i}:{notebook:{notebookType:e,scheme:t,pattern:n},language:i}}e.asDocumentSelector=function(e){const n=e.notebookSelector,i=[];for(const e of n){const n=("string"==typeof e.notebook?e.notebook:e.notebook?.notebookType)??"*",r="string"==typeof e.notebook?void 0:e.notebook?.scheme,o="string"==typeof e.notebook?void 0:e.notebook?.pattern;if(void 0!==e.cells)for(const s of e.cells)i.push(t(n,r,o,s.language));else i.push(t(n,r,o,void 0))}return i}}(p||(p={})),function(e){e.create=function(e){return{cells:e,uris:new Set(e.map((e=>e.document.uri.toString())))}}}(h||(h={}));class f{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(p.asDocumentSelector(t)),i.workspace.onDidOpenNotebookDocument((e=>{this.notebookDidOpen.add(e.uri.toString()),this.didOpen(e)}),void 0,this.disposables);for(const e of i.workspace.notebookDocuments)this.notebookDidOpen.add(e.uri.toString()),this.didOpen(e);i.workspace.onDidChangeNotebookDocument((e=>this.didChangeNotebookDocument(e)),void 0,this.disposables),!0===this.options.save&&i.workspace.onDidSaveNotebookDocument((e=>this.didSave(e)),void 0,this.disposables),i.workspace.onDidCloseNotebookDocument((e=>{this.didClose(e),this.notebookDidOpen.delete(e.uri.toString())}),void 0,this.disposables)}getState(){for(const e of i.workspace.notebookDocuments)if(void 0!==this.getMatchingCells(e))return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return i.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,t){if(0===i.languages.match(this.selector,t.document))return;if(!this.notebookDidOpen.has(e.uri.toString()))return;const n=this.notebookSyncInfo.get(e.uri.toString()),r=this.cellMatches(e,t);if(void 0!==n){const i=n.uris.has(t.document.uri.toString());if(r&&i||!r&&!i)return;if(r){const t=this.getMatchingCells(e);if(void 0!==t){const i=this.asNotebookDocumentChangeEvent(e,void 0,n,t);void 0!==i&&this.doSendChange(i,t).catch((()=>{}))}}}else r&&this.doSendOpen(e,[t]).catch((()=>{}))}didChangeNotebookCellTextDocument(e,t){0!==i.languages.match(this.selector,t.document)&&this.doSendChange({notebook:e,cells:{textContent:[t]}},void 0).catch((()=>{}))}didCloseNotebookCellTextDocument(e,t){const n=this.notebookSyncInfo.get(e.uri.toString());if(void 0===n)return;const i=t.document.uri,r=n.cells.findIndex((e=>e.document.uri.toString()===i.toString()));if(-1!==r)if(0===r&&1===n.cells.length)this.doSendClose(e,n.cells).catch((()=>{}));else{const t=n.cells.slice(),i=t.splice(r,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:r,deleteCount:1},didClose:i}}},t).catch((()=>{}))}}dispose(){for(const e of this.disposables)e.dispose()}didOpen(e,t=this.getMatchingCells(e),n=this.notebookSyncInfo.get(e.uri.toString())){if(void 0!==n)if(void 0!==t){const i=this.asNotebookDocumentChangeEvent(e,void 0,n,t);void 0!==i&&this.doSendChange(i,t).catch((()=>{}))}else this.doSendClose(e,[]).catch((()=>{}));else{if(void 0===t)return;this.doSendOpen(e,t).catch((()=>{}))}}didChangeNotebookDocument(e){const t=e.notebook,n=this.notebookSyncInfo.get(t.uri.toString());if(void 0===n){if(0===e.contentChanges.length)return;const i=this.getMatchingCells(t);if(void 0===i)return;this.didOpen(t,i,n)}else{const i=this.getMatchingCells(t);if(void 0===i)return void this.didClose(t,n);const r=this.asNotebookDocumentChangeEvent(e.notebook,e,n,i);void 0!==r&&this.doSendChange(r,i).catch((()=>{}))}}didSave(e){void 0!==this.notebookSyncInfo.get(e.uri.toString())&&this.doSendSave(e).catch((()=>{}))}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(void 0===t)return;const n=e.getCells().filter((e=>t.uris.has(e.document.uri.toString())));this.doSendClose(e,n).catch((()=>{}))}async sendDidOpenNotebookDocument(e){const t=this.getMatchingCells(e);if(void 0!==t)return this.doSendOpen(e,t)}async doSendOpen(e,t){const n=async(e,t)=>{const n=l.c2p.asNotebookDocument(e,t,this.client.code2ProtocolConverter),i=t.map((e=>this.client.code2ProtocolConverter.asTextDocumentItem(e.document)));try{await this.client.sendNotification(o.DidOpenNotebookDocumentNotification.type,{notebookDocument:n,cellTextDocuments:i})}catch(e){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",e),e}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),h.create(t)),void 0!==i?.didOpen?i.didOpen(e,t,n):n(e,t)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,t=this.getMatchingCells(e.notebook)){const n=async e=>{try{await this.client.sendNotification(o.DidChangeNotebookDocumentNotification.type,{notebookDocument:l.c2p.asVersionedNotebookDocumentIdentifier(e.notebook,this.client.code2ProtocolConverter),change:l.c2p.asNotebookDocumentChangeEvent(e,this.client.code2ProtocolConverter)})}catch(e){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",e),e}},i=this.client.middleware?.notebooks;return void 0!==e.cells?.structure&&this.notebookSyncInfo.set(e.notebook.uri.toString(),h.create(t??[])),void 0!==i?.didChange?i?.didChange(e,n):n(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){const t=async e=>{try{await this.client.sendNotification(o.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(e.uri)}})}catch(e){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",e),e}},n=this.client.middleware?.notebooks;return void 0!==n?.didSave?n.didSave(e,t):t(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){const n=async(e,t)=>{try{await this.client.sendNotification(o.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(e.uri)},cellTextDocuments:t.map((e=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(e.document)))})}catch(e){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",e),e}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),void 0!==i?.didClose?i.didClose(e,t,n):n(e,t)}asNotebookDocumentChangeEvent(e,t,n,i){if(void 0!==t&&t.notebook!==e)throw new Error("Notebook must be identical");const r={notebook:e};let o;if(void 0!==t?.metadata&&(r.metadata=l.c2p.asMetadata(t.metadata)),void 0!==t?.cellChanges&&t.cellChanges.length>0){const e=[];o=new Set(i.map((e=>e.document.uri.toString())));for(const n of t.cellChanges)!o.has(n.cell.document.uri.toString())||void 0===n.executionSummary&&void 0===n.metadata||e.push(n.cell);e.length>0&&(r.cells=r.cells??{},r.cells.data=e)}if((void 0!==t?.contentChanges&&t.contentChanges.length>0||void 0===t)&&void 0!==n&&void 0!==i){const e=n.cells,t=i,o=d.computeDiff(e,t,!1);let s,a;if(void 0!==o){s=void 0===o.cells?new Map:new Map(o.cells.map((e=>[e.document.uri.toString(),e]))),a=0===o.deleteCount?new Map:new Map(e.slice(o.start,o.start+o.deleteCount).map((e=>[e.document.uri.toString(),e])));for(const e of Array.from(a.keys()))s.has(e)&&(a.delete(e),s.delete(e));r.cells=r.cells??{};const t=[],n=[];if(s.size>0||a.size>0){for(const e of s.values())t.push(e);for(const e of a.values())n.push(e)}r.cells.structure={array:o,didOpen:t,didClose:n}}}return Object.keys(r).length>1?r:void 0}getMatchingCells(e,t=e.getCells()){if(void 0!==this.options.notebookSelector)for(const n of this.options.notebookSelector){if(void 0===n.notebook){if(void 0===n.cells)return;const i=this.filterCells(e,t,n.cells);return 0===i.length?void 0:i}if(u.matchNotebook(n.notebook,e))return void 0===n.cells?t:this.filterCells(e,t,n.cells)}}cellMatches(e,t){const n=this.getMatchingCells(e,[t]);return void 0!==n&&n[0]===t}filterCells(e,t,n){const i=t.filter((e=>{const t=e.document.languageId;return n.some((e=>"*"===e.language||t===e.language))}));return"function"==typeof this.client.clientOptions.notebookDocumentOptions?.filterCells?this.client.clientOptions.notebookDocumentOptions.filterCells(e,t):i}}class m{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=o.NotebookDocumentSyncRegistrationType.type,i.workspace.onDidOpenTextDocument((e=>{if(e.uri.scheme!==m.CellScheme)return;const[t,n]=this.findNotebookDocumentAndCell(e);if(void 0!==t&&void 0!==n)for(const e of this.registrations.values())e instanceof f&&e.didOpenNotebookCellTextDocument(t,n)})),i.workspace.onDidChangeTextDocument((e=>{if(0===e.contentChanges.length)return;const t=e.document;if(t.uri.scheme!==m.CellScheme)return;const[n]=this.findNotebookDocumentAndCell(t);if(void 0!==n)for(const t of this.registrations.values())t instanceof f&&t.didChangeNotebookCellTextDocument(n,e)})),i.workspace.onDidCloseTextDocument((e=>{if(e.uri.scheme!==m.CellScheme)return;const[t,n]=this.findNotebookDocumentAndCell(e);if(void 0!==t&&void 0!==n)for(const e of this.registrations.values())e instanceof f&&e.didCloseNotebookCellTextDocument(t,n)}))}getState(){if(0===this.registrations.size)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(const e of this.registrations.values()){const t=e.getState();if("document"===t.kind&&!0===t.registrations&&!0===t.matches)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){const t=c(c(e,"notebookDocument"),"synchronization");t.dynamicRegistration=!0,t.executionSummarySupport=!0}preInitialize(e){const t=e.notebookDocumentSync;void 0!==t&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(p.asDocumentSelector(t)))}initialize(e){const t=e.notebookDocumentSync;if(void 0===t)return;const n=t.id??s.generateUuid();this.register({id:n,registerOptions:t})}register(e){const t=new f(this.client,e.registerOptions);this.registrations.set(e.id,t)}unregister(e){const t=this.registrations.get(e);t&&t.dispose()}dispose(){for(const e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==m.CellScheme)return!1;if(void 0!==this.dedicatedChannel&&i.languages.match(this.dedicatedChannel,e)>0)return!0;for(const t of this.registrations.values())if(t.handles(e))return!0;return!1}getProvider(e){for(const t of this.registrations.values())if(t.handles(e.document))return t}findNotebookDocumentAndCell(e){const t=e.uri.toString();for(const e of i.workspace.notebookDocuments)for(const n of e.getCells())if(n.document.uri.toString()===t)return[e,n];return[void 0,void 0]}}t.NotebookDocumentSyncFeature=m,m.CellScheme="vscode-notebook-cell"},43603:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressFeature=void 0;const i=n(40273),r=n(78071);t.ProgressFeature=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:i.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){var t,n;(t=e,n="window",void 0===t[n]&&(t[n]=Object.create(null)),t[n]).workDoneProgress=!0}initialize(){const e=this._client,t=e=>{this.activeParts.delete(e)};e.onRequest(i.WorkDoneProgressCreateRequest.type,(e=>{this.activeParts.add(new r.ProgressPart(this._client,e.token,t))}))}dispose(){for(const e of this.activeParts)e.done();this.activeParts.clear()}}},78071:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressPart=void 0;const i=n(66828),r=n(40273),o=n(59763);t.ProgressPart=class{constructor(e,t,n){this._client=e,this._token=t,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(r.WorkDoneProgress.type,this._token,(e=>{switch(e.kind){case"begin":this.begin(e);break;case"report":this.report(e);break;case"end":this.done(),n&&n(this)}}))}begin(e){this._infinite=void 0===e.percentage,void 0!==this._lspProgressDisposable&&i.window.withProgress({location:i.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},(async(t,n)=>{if(void 0!==this._lspProgressDisposable)return this._progress=t,this._cancellationToken=n,this._tokenDisposable=this._cancellationToken.onCancellationRequested((()=>{this._client.sendNotification(r.WorkDoneProgressCancelNotification.type,{token:this._token})})),this.report(e),new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}))}report(e){if(this._infinite&&o.string(e.message))void 0!==this._progress&&this._progress.report({message:e.message});else if(o.number(e.percentage)){const t=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,t-this._reported);this._reported+=n,void 0!==this._progress&&this._progress.report({message:e.message,increment:n})}}cancel(){this.cleanup(),void 0!==this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),void 0!==this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){void 0!==this._lspProgressDisposable&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),void 0!==this._tokenDisposable&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}}},88714:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(66828);class r extends i.CallHierarchyItem{constructor(e,t,n,i,r,o,s){super(e,t,n,i,r,o),void 0!==s&&(this.data=s)}}t.default=r},56434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(66828);class r extends i.CodeAction{constructor(e,t){super(e),this.data=t}}t.default=r},50583:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(66828);class r extends i.CodeLens{constructor(e){super(e)}}t.default=r},81807:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(66828);class r extends i.CompletionItem{constructor(e){super(e)}}t.default=r},38785:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConverter=void 0;const i=n(66828),r=n(40273),o=n(59763),s=n(94904),a=n(81807),c=n(50583),l=n(58705),d=n(56434),u=n(25316),p=n(88714),h=n(41365),f=n(13912),m=n(91065),g=n(40273);var v;!function(e){e.is=function(e){let t=e;return t&&o.string(t.language)&&o.string(t.value)}}(v||(v={})),t.createConverter=function(e,t,n){const y=e||(e=>i.Uri.parse(e));function b(e){return y(e)}function w(e){let t=new u.ProtocolDiagnostic(C(e.range),e.message,E(e.severity),e.data);if(void 0!==e.code)if("string"==typeof e.code||"number"==typeof e.code)r.CodeDescription.is(e.codeDescription)?t.code={value:e.code,target:b(e.codeDescription.href)}:t.code=e.code;else if(u.DiagnosticCode.is(e.code)){t.hasDiagnosticCode=!0;const n=e.code;t.code={value:n.value,target:b(n.target)}}return e.source&&(t.source=e.source),e.relatedInformation&&(t.relatedInformation=function(e){const t=new Array(e.length);for(let n=0;n<e.length;n++){const r=e[n];t[n]=new i.DiagnosticRelatedInformation(j(r.location),r.message)}return t}(e.relatedInformation)),Array.isArray(e.tags)&&(t.tags=function(e){if(!e)return;let t=[];for(let n of e){let e=_(n);void 0!==e&&t.push(e)}return t.length>0?t:void 0}(e.tags)),t}function _(e){switch(e){case r.DiagnosticTag.Unnecessary:return i.DiagnosticTag.Unnecessary;case r.DiagnosticTag.Deprecated:return i.DiagnosticTag.Deprecated;default:return}}function S(e){return e?new i.Position(e.line,e.character):void 0}function C(e){return e?new i.Range(e.start.line,e.start.character,e.end.line,e.end.character):void 0}async function k(e,t){return s.map(e,(e=>new i.Range(e.start.line,e.start.character,e.end.line,e.end.character)),t)}function E(e){if(null==e)return i.DiagnosticSeverity.Error;switch(e){case r.DiagnosticSeverity.Error:return i.DiagnosticSeverity.Error;case r.DiagnosticSeverity.Warning:return i.DiagnosticSeverity.Warning;case r.DiagnosticSeverity.Information:return i.DiagnosticSeverity.Information;case r.DiagnosticSeverity.Hint:return i.DiagnosticSeverity.Hint}return i.DiagnosticSeverity.Error}function x(e){if(o.string(e))return e;switch(e.kind){case r.MarkupKind.Markdown:return T(e.value);case r.MarkupKind.PlainText:return e.value;default:return`Unsupported Markup content received. Kind is: ${e.kind}`}}function T(e){let o;if(void 0===e||"string"==typeof e)o=new i.MarkdownString(e);else switch(e.kind){case r.MarkupKind.Markdown:o=new i.MarkdownString(e.value);break;case r.MarkupKind.PlainText:o=new i.MarkdownString,o.appendText(e.value);break;default:o=new i.MarkdownString,o.appendText(`Unsupported Markup content received. Kind is: ${e.kind}`)}return o.isTrusted=t,o.supportHtml=n,o}function P(e){if(e===r.CompletionItemTag.Deprecated)return i.CompletionItemTag.Deprecated}function I(e,t,n,s,c,l){const d=function(e){if(null==e)return[];const t=[];for(const n of e){const e=P(n);void 0!==e&&t.push(e)}return t}(e.tags),u=function(e){return r.CompletionItemLabelDetails.is(e.labelDetails)?{label:e.label,detail:e.labelDetails.detail,description:e.labelDetails.description}:e.label}(e),p=new a.default(u);e.detail&&(p.detail=e.detail),e.documentation&&(p.documentation=x(e.documentation),p.documentationFormat=o.string(e.documentation)?"$string":e.documentation.kind),e.filterText&&(p.filterText=e.filterText);const h=function(e,t,n){const o=e.insertTextFormat??n;if(void 0!==e.textEdit||void 0!==t){const[n,a]=void 0!==e.textEdit?(s=e.textEdit,r.InsertReplaceEdit.is(s)?[{inserting:C(s.insert),replacing:C(s.replace)},s.newText]:[C(s.range),s.newText]):[t,e.textEditText??e.label];return o===r.InsertTextFormat.Snippet?{text:new i.SnippetString(a),range:n,fromEdit:!0}:{text:a,range:n,fromEdit:!0}}return e.insertText?o===r.InsertTextFormat.Snippet?{text:new i.SnippetString(e.insertText),fromEdit:!1}:{text:e.insertText,fromEdit:!1}:void 0;var s}(e,n,c);if(h&&(p.insertText=h.text,p.range=h.range,p.fromEdit=h.fromEdit),o.number(e.kind)){let[t,n]=(f=e.kind,r.CompletionItemKind.Text<=f&&f<=r.CompletionItemKind.TypeParameter?[f-1,void 0]:[i.CompletionItemKind.Text,f]);p.kind=t,n&&(p.originalItemKind=n)}var f;e.sortText&&(p.sortText=e.sortText),e.additionalTextEdits&&(p.additionalTextEdits=O(e.additionalTextEdits));const m=void 0!==e.commitCharacters?o.stringArray(e.commitCharacters)?e.commitCharacters:void 0:t;m&&(p.commitCharacters=m.slice()),e.command&&(p.command=J(e.command)),!0!==e.deprecated&&!1!==e.deprecated||(p.deprecated=e.deprecated,!0===e.deprecated&&d.push(i.CompletionItemTag.Deprecated)),!0!==e.preselect&&!1!==e.preselect||(p.preselect=e.preselect);const g=e.data??l;void 0!==g&&(p.data=g),d.length>0&&(p.tags=d);const v=e.insertTextMode??s;return void 0!==v&&(p.insertTextMode=v,v===r.InsertTextMode.asIs&&(p.keepWhitespace=!0)),p}function D(e){if(e)return new i.TextEdit(C(e.range),e.newText)}async function R(e,t){if(e)return s.map(e,D,t)}function O(e){if(!e)return;const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=D(e[n]);return t}async function A(e,t){return s.mapAsync(e,N,t)}async function N(e,t){let n=new i.SignatureInformation(e.label);return void 0!==e.documentation&&(n.documentation=x(e.documentation)),void 0!==e.parameters&&(n.parameters=await M(e.parameters,t)),void 0!==e.activeParameter&&(n.activeParameter=e.activeParameter),n}function M(e,t){return s.map(e,L,t)}function L(e){let t=new i.ParameterInformation(e.label);return e.documentation&&(t.documentation=x(e.documentation)),t}function j(e){return e?new i.Location(y(e.uri),C(e.range)):void 0}function F(e){if(!e)return;let t={targetUri:y(e.targetUri),targetRange:C(e.targetRange),originSelectionRange:C(e.originSelectionRange),targetSelectionRange:C(e.targetSelectionRange)};if(!t.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return t}async function U(e,t){if(e){if(o.array(e)){if(0===e.length)return[];if(r.LocationLink.is(e[0])){const n=e;return s.map(n,F,t)}{const n=e;return s.map(n,j,t)}}return r.LocationLink.is(e)?[F(e)]:j(e)}}function q(e){let t=new i.DocumentHighlight(C(e.range));return o.number(e.kind)&&(t.kind=K(e.kind)),t}function K(e){switch(e){case r.DocumentHighlightKind.Text:return i.DocumentHighlightKind.Text;case r.DocumentHighlightKind.Read:return i.DocumentHighlightKind.Read;case r.DocumentHighlightKind.Write:return i.DocumentHighlightKind.Write}return i.DocumentHighlightKind.Text}function V(e){return e<=r.SymbolKind.TypeParameter?e-1:i.SymbolKind.Property}function W(e){if(e===r.SymbolTag.Deprecated)return i.SymbolTag.Deprecated}function $(e){if(null==e)return;const t=[];for(const n of e){const e=W(n);void 0!==e&&t.push(e)}return 0===t.length?void 0:t}function B(e){const t=e.data,n=e.location,r=void 0===n.range||void 0!==t?new f.default(e.name,V(e.kind),e.containerName??"",void 0===n.range?y(n.uri):new i.Location(y(e.location.uri),C(n.range)),t):new i.SymbolInformation(e.name,V(e.kind),e.containerName??"",new i.Location(y(e.location.uri),C(n.range)));return z(r,e),r}function H(e){let t=new i.DocumentSymbol(e.name,e.detail||"",V(e.kind),C(e.range),C(e.selectionRange));if(z(t,e),void 0!==e.children&&e.children.length>0){let n=[];for(let t of e.children)n.push(H(t));t.children=n}return t}function z(e,t){e.tags=$(t.tags),t.deprecated&&(e.tags?e.tags.includes(i.SymbolTag.Deprecated)||(e.tags=e.tags.concat(i.SymbolTag.Deprecated)):e.tags=[i.SymbolTag.Deprecated])}function J(e){let t={title:e.title,command:e.command};return e.arguments&&(t.arguments=e.arguments),t}const G=new Map;function Y(e){if(null==e)return;let t=G.get(e);if(t)return t;let n=e.split(".");t=i.CodeActionKind.Empty;for(let e of n)t=t.append(e);return t}async function Q(e,t){if(null==e)return;let n=new d.default(e.title,e.data);return void 0!==e.kind&&(n.kind=Y(e.kind)),void 0!==e.diagnostics&&(n.diagnostics=function(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=w(e[n]);return t}(e.diagnostics)),void 0!==e.edit&&(n.edit=await Z(e.edit,t)),void 0!==e.command&&(n.command=J(e.command)),void 0!==e.isPreferred&&(n.isPreferred=e.isPreferred),void 0!==e.disabled&&(n.disabled={reason:e.disabled.reason}),n}function X(e){if(!e)return;let t=new c.default(C(e.range));return e.command&&(t.command=J(e.command)),void 0!==e.data&&null!==e.data&&(t.data=e.data),t}async function Z(e,t){if(!e)return;const n=new Map;if(void 0!==e.changeAnnotations){const i=e.changeAnnotations;await s.forEach(Object.keys(i),(e=>{const t=function(e){if(void 0!==e)return{label:e.label,needsConfirmation:!!e.needsConfirmation,description:e.description}}(i[e]);n.set(e,t)}),t)}const o=e=>void 0===e?void 0:n.get(e),a=new i.WorkspaceEdit;if(e.documentChanges){const n=e.documentChanges;await s.forEach(n,(e=>{if(r.CreateFile.is(e))a.createFile(y(e.uri),e.options,o(e.annotationId));else if(r.RenameFile.is(e))a.renameFile(y(e.oldUri),y(e.newUri),e.options,o(e.annotationId));else if(r.DeleteFile.is(e))a.deleteFile(y(e.uri),e.options,o(e.annotationId));else{if(!r.TextDocumentEdit.is(e))throw new Error(`Unknown workspace edit change received:\n${JSON.stringify(e,void 0,4)}`);{const t=y(e.textDocument.uri);for(const n of e.edits)r.AnnotatedTextEdit.is(n)?a.replace(t,C(n.range),n.newText,o(n.annotationId)):a.replace(t,C(n.range),n.newText)}}}),t)}else if(e.changes){const n=e.changes;await s.forEach(Object.keys(n),(e=>{a.set(y(e),O(n[e]))}),t)}return a}function ee(e){let t=C(e.range),n=e.target?b(e.target):void 0,i=new l.default(t,n);return void 0!==e.tooltip&&(i.tooltip=e.tooltip),void 0!==e.data&&null!==e.data&&(i.data=e.data),i}function te(e){return new i.Color(e.red,e.green,e.blue,e.alpha)}function ne(e){return new i.ColorInformation(C(e.range),te(e.color))}function ie(e){let t=new i.ColorPresentation(e.label);return t.additionalTextEdits=O(e.additionalTextEdits),e.textEdit&&(t.textEdit=D(e.textEdit)),t}function re(e){if(e)switch(e){case r.FoldingRangeKind.Comment:return i.FoldingRangeKind.Comment;case r.FoldingRangeKind.Imports:return i.FoldingRangeKind.Imports;case r.FoldingRangeKind.Region:return i.FoldingRangeKind.Region}}function oe(e){return new i.FoldingRange(e.startLine,e.endLine,re(e.kind))}function se(e){return new i.SelectionRange(C(e.range),e.parent?se(e.parent):void 0)}function ae(e){return r.InlineValueText.is(e)?new i.InlineValueText(C(e.range),e.text):r.InlineValueVariableLookup.is(e)?new i.InlineValueVariableLookup(C(e.range),e.variableName,e.caseSensitiveLookup):new i.InlineValueEvaluatableExpression(C(e.range),e.expression)}async function ce(e,t){const n="string"==typeof e.label?e.label:await s.map(e.label,le,t),i=new m.default(S(e.position),n);return void 0!==e.kind&&(i.kind=e.kind),void 0!==e.textEdits&&(i.textEdits=await R(e.textEdits,t)),void 0!==e.tooltip&&(i.tooltip=de(e.tooltip)),void 0!==e.paddingLeft&&(i.paddingLeft=e.paddingLeft),void 0!==e.paddingRight&&(i.paddingRight=e.paddingRight),void 0!==e.data&&(i.data=e.data),i}function le(e){const t=new i.InlayHintLabelPart(e.value);return void 0!==e.location&&(t.location=j(e.location)),void 0!==e.tooltip&&(t.tooltip=de(e.tooltip)),void 0!==e.command&&(t.command=J(e.command)),t}function de(e){return"string"==typeof e?e:T(e)}function ue(e){if(null===e)return;const t=new p.default(V(e.kind),e.name,e.detail||"",b(e.uri),C(e.range),C(e.selectionRange),e.data);return void 0!==e.tags&&(t.tags=$(e.tags)),t}async function pe(e,t){return new i.CallHierarchyIncomingCall(ue(e.from),await k(e.fromRanges,t))}async function he(e,t){return new i.CallHierarchyOutgoingCall(ue(e.to),await k(e.fromRanges,t))}function fe(e){return new i.SemanticTokensEdit(e.start,e.deleteCount,void 0!==e.data?new Uint32Array(e.data):void 0)}function me(e){if(null===e)return;let t=new h.default(V(e.kind),e.name,e.detail||"",b(e.uri),C(e.range),C(e.selectionRange),e.data);return void 0!==e.tags&&(t.tags=$(e.tags)),t}return G.set(r.CodeActionKind.Empty,i.CodeActionKind.Empty),G.set(r.CodeActionKind.QuickFix,i.CodeActionKind.QuickFix),G.set(r.CodeActionKind.Refactor,i.CodeActionKind.Refactor),G.set(r.CodeActionKind.RefactorExtract,i.CodeActionKind.RefactorExtract),G.set(r.CodeActionKind.RefactorInline,i.CodeActionKind.RefactorInline),G.set(r.CodeActionKind.RefactorRewrite,i.CodeActionKind.RefactorRewrite),G.set(r.CodeActionKind.Source,i.CodeActionKind.Source),G.set(r.CodeActionKind.SourceOrganizeImports,i.CodeActionKind.SourceOrganizeImports),{asUri:b,asDocumentSelector:function(e){const t=[];for(const n of e)if("string"==typeof n)t.push(n);else if(g.NotebookCellTextDocumentFilter.is(n))if("string"==typeof n.notebook)t.push({notebookType:n.notebook,language:n.language});else{const e=n.notebook.notebookType??"*";t.push({notebookType:e,scheme:n.notebook.scheme,pattern:n.notebook.pattern,language:n.language})}else g.TextDocumentFilter.is(n)&&t.push({language:n.language,scheme:n.scheme,pattern:n.pattern});return t},asDiagnostics:async function(e,t){return s.map(e,w,t)},asDiagnostic:w,asRange:C,asRanges:k,asPosition:S,asDiagnosticSeverity:E,asDiagnosticTag:_,asHover:function(e){if(e)return new i.Hover(function(e){if(o.string(e))return T(e);if(v.is(e))return T().appendCodeblock(e.value,e.language);if(Array.isArray(e)){let t=[];for(let n of e){let e=T();v.is(n)?e.appendCodeblock(n.value,n.language):e.appendMarkdown(n),t.push(e)}return t}return T(e)}(e.contents),C(e.range))},asCompletionResult:async function(e,t,n){if(!e)return;if(Array.isArray(e))return s.map(e,(e=>I(e,t)),n);const o=e,{defaultRange:a,commitCharacters:c}=function(e,t){const n=e.itemDefaults?.editRange,i=e.itemDefaults?.commitCharacters??t;return r.Range.is(n)?{defaultRange:C(n),commitCharacters:i}:void 0!==n?{defaultRange:{inserting:C(n.insert),replacing:C(n.replace)},commitCharacters:i}:{defaultRange:void 0,commitCharacters:i}}(o,t),l=await s.map(o.items,(e=>I(e,c,a,o.itemDefaults?.insertTextMode,o.itemDefaults?.insertTextFormat,o.itemDefaults?.data)),n);return new i.CompletionList(l,o.isIncomplete)},asCompletionItem:I,asTextEdit:D,asTextEdits:R,asSignatureHelp:async function(e,t){if(!e)return;let n=new i.SignatureHelp;return o.number(e.activeSignature)?n.activeSignature=e.activeSignature:n.activeSignature=0,o.number(e.activeParameter)?n.activeParameter=e.activeParameter:n.activeParameter=0,e.signatures&&(n.signatures=await A(e.signatures,t)),n},asSignatureInformations:A,asSignatureInformation:N,asParameterInformations:M,asParameterInformation:L,asDeclarationResult:async function(e,t){if(e)return U(e,t)},asDefinitionResult:async function(e,t){if(e)return U(e,t)},asLocation:j,asReferences:async function(e,t){if(e)return s.map(e,j,t)},asDocumentHighlights:async function(e,t){if(e)return s.map(e,q,t)},asDocumentHighlight:q,asDocumentHighlightKind:K,asSymbolKind:V,asSymbolTag:W,asSymbolTags:$,asSymbolInformations:async function(e,t){if(e)return s.map(e,B,t)},asSymbolInformation:B,asDocumentSymbols:async function(e,t){if(null!=e)return s.map(e,H,t)},asDocumentSymbol:H,asCommand:J,asCommands:async function(e,t){if(e)return s.map(e,J,t)},asCodeAction:Q,asCodeActionKind:Y,asCodeActionKinds:function(e){if(null!=e)return e.map((e=>Y(e)))},asCodeActionResult:function(e,t){return s.mapAsync(e,(async e=>r.Command.is(e)?J(e):Q(e,t)),t)},asCodeLens:X,asCodeLenses:async function(e,t){if(e)return s.map(e,X,t)},asWorkspaceEdit:Z,asDocumentLink:ee,asDocumentLinks:async function(e,t){if(e)return s.map(e,ee,t)},asFoldingRangeKind:re,asFoldingRange:oe,asFoldingRanges:async function(e,t){if(e)return s.map(e,oe,t)},asColor:te,asColorInformation:ne,asColorInformations:async function(e,t){if(e)return s.map(e,ne,t)},asColorPresentation:ie,asColorPresentations:async function(e,t){if(e)return s.map(e,ie,t)},asSelectionRange:se,asSelectionRanges:async function(e,t){return Array.isArray(e)?s.map(e,se,t):[]},asInlineValue:ae,asInlineValues:async function(e,t){return Array.isArray(e)?s.map(e,ae,t):[]},asInlayHint:ce,asInlayHints:async function(e,t){if(Array.isArray(e))return s.mapAsync(e,ce,t)},asSemanticTokensLegend:function(e){return e},asSemanticTokens:async function(e,t){if(null!=e)return new i.SemanticTokens(new Uint32Array(e.data),e.resultId)},asSemanticTokensEdit:fe,asSemanticTokensEdits:async function(e,t){if(null!=e)return new i.SemanticTokensEdits(e.edits.map(fe),e.resultId)},asCallHierarchyItem:ue,asCallHierarchyItems:async function(e,t){if(null!==e)return s.map(e,ue,t)},asCallHierarchyIncomingCall:pe,asCallHierarchyIncomingCalls:async function(e,t){if(null!==e)return s.mapAsync(e,pe,t)},asCallHierarchyOutgoingCall:he,asCallHierarchyOutgoingCalls:async function(e,t){if(null!==e)return s.mapAsync(e,he,t)},asLinkedEditingRanges:async function(e,t){if(null!=e)return new i.LinkedEditingRanges(await k(e.ranges,t),function(e){if(null!=e)return new RegExp(e)}(e.wordPattern))},asTypeHierarchyItem:me,asTypeHierarchyItems:async function(e,t){if(null!==e)return s.map(e,me,t)},asGlobPattern:function(e){if(o.string(e))return e;if(r.RelativePattern.is(e)){if(r.URI.is(e.baseUri))return new i.RelativePattern(b(e.baseUri),e.pattern);if(r.WorkspaceFolder.is(e.baseUri)){const t=i.workspace.getWorkspaceFolder(b(e.baseUri.uri));return void 0!==t?new i.RelativePattern(t,e.pattern):void 0}}}}}},25316:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolDiagnostic=t.DiagnosticCode=void 0;const i=n(66828),r=n(59763);(t.DiagnosticCode||(t.DiagnosticCode={})).is=function(e){const t=e;return null!=t&&(r.number(t.value)||r.string(t.value))&&r.string(t.target)};class o extends i.Diagnostic{constructor(e,t,n,i){super(e,t,n),this.data=i,this.hasDiagnosticCode=!1}}t.ProtocolDiagnostic=o},58705:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(66828);class r extends i.DocumentLink{constructor(e,t){super(e,t)}}t.default=r},91065:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(66828);class r extends i.InlayHint{constructor(e,t,n){super(e,t,n)}}t.default=r},41365:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(66828);class r extends i.TypeHierarchyItem{constructor(e,t,n,i,r,o,s){super(e,t,n,i,r,o),void 0!==s&&(this.data=s)}}t.default=r},13912:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(66828);class r extends i.SymbolInformation{constructor(e,t,n,r,o){const s=!(r instanceof i.Uri);super(e,t,n,s?r:new i.Location(r,new i.Range(0,0,0,0))),this.hasRange=s,void 0!==o&&(this.data=o)}}t.default=r},18480:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReferencesFeature=void 0;const i=n(66828),r=n(40273),o=n(88909),s=n(41980);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.ReferencesRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.referencesProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideReferences:(e,t,n,i)=>{const o=this._client,s=(e,t,n,i)=>o.sendRequest(r.ReferencesRequest.type,o.code2ProtocolConverter.asReferenceParams(e,t,n),i).then((e=>i.isCancellationRequested?null:o.protocol2CodeConverter.asReferences(e,i)),(e=>o.handleFailedRequest(r.ReferencesRequest.type,i,e,null))),a=o.middleware;return a.provideReferences?a.provideReferences(e,t,n,i,s):s(e,t,n,i)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.ReferencesFeature=a},26700:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenameFeature=void 0;const i=n(66828),r=n(40273),o=n(41980),s=n(59763),a=n(88909);class c extends a.TextDocumentLanguageFeature{constructor(e){super(e,r.RenameRequest.type)}fillClientCapabilities(e){let t=(0,a.ensure)((0,a.ensure)(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=r.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.renameProvider);n&&(s.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register({id:o.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){const t=e.documentSelector,n={provideRenameEdits:(e,t,n,i)=>{const o=this._client,s=(e,t,n,i)=>{let s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),position:o.code2ProtocolConverter.asPosition(t),newName:n};return o.sendRequest(r.RenameRequest.type,s,i).then((e=>i.isCancellationRequested?null:o.protocol2CodeConverter.asWorkspaceEdit(e,i)),(e=>o.handleFailedRequest(r.RenameRequest.type,i,e,null,!1)))},a=o.middleware;return a.provideRenameEdits?a.provideRenameEdits(e,t,n,i,s):s(e,t,n,i)},prepareRename:e.prepareProvider?(e,t,n)=>{const i=this._client,o=(e,t,n)=>{let o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e),position:i.code2ProtocolConverter.asPosition(t)};return i.sendRequest(r.PrepareRenameRequest.type,o,n).then((e=>n.isCancellationRequested?null:r.Range.is(e)?i.protocol2CodeConverter.asRange(e):this.isDefaultBehavior(e)?!0===e.defaultBehavior?null:Promise.reject(new Error("The element can't be renamed.")):e&&r.Range.is(e.range)?{range:i.protocol2CodeConverter.asRange(e.range),placeholder:e.placeholder}:Promise.reject(new Error("The element can't be renamed."))),(e=>{throw"string"==typeof e.message?new Error(e.message):new Error("The element can't be renamed.")}))},s=i.middleware;return s.prepareRename?s.prepareRename(e,t,n,o):o(e,t,n)}:void 0};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}isDefaultBehavior(e){const t=e;return t&&s.boolean(t.defaultBehavior)}}t.RenameFeature=c},750:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRangeFeature=void 0;const i=n(66828),r=n(40273),o=n(88909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.SelectionRangeRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"selectionRange").dynamicRegistration=!0}initialize(e,t){const[n,i]=this.getRegistration(t,e.selectionRangeProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n={provideSelectionRanges:(e,t,n)=>{const i=this._client,o=async(e,t,n)=>{const o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e),positions:await i.code2ProtocolConverter.asPositions(t,n)};return i.sendRequest(r.SelectionRangeRequest.type,o,n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asSelectionRanges(e,n)),(e=>i.handleFailedRequest(r.SelectionRangeRequest.type,n,e,null)))},s=i.middleware;return s.provideSelectionRanges?s.provideSelectionRanges(e,t,n,o):o(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.SelectionRangeFeature=s},79957:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensFeature=void 0;const i=n(66828),r=n(40273),o=n(88909),s=n(59763);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[r.SemanticTokenTypes.namespace,r.SemanticTokenTypes.type,r.SemanticTokenTypes.class,r.SemanticTokenTypes.enum,r.SemanticTokenTypes.interface,r.SemanticTokenTypes.struct,r.SemanticTokenTypes.typeParameter,r.SemanticTokenTypes.parameter,r.SemanticTokenTypes.variable,r.SemanticTokenTypes.property,r.SemanticTokenTypes.enumMember,r.SemanticTokenTypes.event,r.SemanticTokenTypes.function,r.SemanticTokenTypes.method,r.SemanticTokenTypes.macro,r.SemanticTokenTypes.keyword,r.SemanticTokenTypes.modifier,r.SemanticTokenTypes.comment,r.SemanticTokenTypes.string,r.SemanticTokenTypes.number,r.SemanticTokenTypes.regexp,r.SemanticTokenTypes.operator,r.SemanticTokenTypes.decorator],t.tokenModifiers=[r.SemanticTokenModifiers.declaration,r.SemanticTokenModifiers.definition,r.SemanticTokenModifiers.readonly,r.SemanticTokenModifiers.static,r.SemanticTokenModifiers.deprecated,r.SemanticTokenModifiers.abstract,r.SemanticTokenModifiers.async,r.SemanticTokenModifiers.modification,r.SemanticTokenModifiers.documentation,r.SemanticTokenModifiers.defaultLibrary],t.formats=[r.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,(0,o.ensure)((0,o.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(r.SemanticTokensRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeSemanticTokensEmitter.fire()}));const[n,i]=this.getRegistration(t,e.semanticTokensProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n=s.boolean(e.full)?e.full:void 0!==e.full,o=void 0!==e.full&&"boolean"!=typeof e.full&&!0===e.full.delta,a=new i.EventEmitter,c=n?{onDidChangeSemanticTokens:a.event,provideDocumentSemanticTokens:(e,t)=>{const n=this._client,i=n.middleware,o=(e,t)=>{const i={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e)};return n.sendRequest(r.SemanticTokensRequest.type,i,t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asSemanticTokens(e,t)),(e=>n.handleFailedRequest(r.SemanticTokensRequest.type,t,e,null)))};return i.provideDocumentSemanticTokens?i.provideDocumentSemanticTokens(e,t,o):o(e,t)},provideDocumentSemanticTokensEdits:o?(e,t,n)=>{const i=this._client,o=i.middleware,s=(e,t,n)=>{const o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e),previousResultId:t};return i.sendRequest(r.SemanticTokensDeltaRequest.type,o,n).then((async e=>n.isCancellationRequested?null:r.SemanticTokens.is(e)?await i.protocol2CodeConverter.asSemanticTokens(e,n):await i.protocol2CodeConverter.asSemanticTokensEdits(e,n)),(e=>i.handleFailedRequest(r.SemanticTokensDeltaRequest.type,n,e,null)))};return o.provideDocumentSemanticTokensEdits?o.provideDocumentSemanticTokensEdits(e,t,n,s):s(e,t,n)}:void 0}:void 0,l=!0===e.range?{provideDocumentRangeSemanticTokens:(e,t,n)=>{const i=this._client,o=i.middleware,s=(e,t,n)=>{const o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e),range:i.code2ProtocolConverter.asRange(t)};return i.sendRequest(r.SemanticTokensRangeRequest.type,o,n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asSemanticTokens(e,n)),(e=>i.handleFailedRequest(r.SemanticTokensRangeRequest.type,n,e,null)))};return o.provideDocumentRangeSemanticTokens?o.provideDocumentRangeSemanticTokens(e,t,n,s):s(e,t,n)}}:void 0,d=[],u=this._client,p=u.protocol2CodeConverter.asSemanticTokensLegend(e.legend),h=u.protocol2CodeConverter.asDocumentSelector(t);return void 0!==c&&d.push(i.languages.registerDocumentSemanticTokensProvider(h,c,p)),void 0!==l&&d.push(i.languages.registerDocumentRangeSemanticTokensProvider(h,l,p)),[new i.Disposable((()=>d.forEach((e=>e.dispose())))),{range:l,full:c,onDidChangeSemanticTokensEmitter:a}]}}t.SemanticTokensFeature=a},82908:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignatureHelpFeature=void 0;const i=n(66828),r=n(40273),o=n(88909),s=n(41980);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[r.MarkupKind.Markdown,r.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.signatureHelpProvider);n&&this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideSignatureHelp:(e,t,n,i)=>{const o=this._client,s=(e,t,n,i)=>o.sendRequest(r.SignatureHelpRequest.type,o.code2ProtocolConverter.asSignatureHelpParams(e,t,n),i).then((e=>i.isCancellationRequested?null:o.protocol2CodeConverter.asSignatureHelp(e,i)),(e=>o.handleFailedRequest(r.SignatureHelpRequest.type,i,e,null))),a=o.middleware;return a.provideSignatureHelp?a.provideSignatureHelp(e,t,i,n,s):s(e,t,i,n)}};return[this.registerProvider(e,t),t]}registerProvider(e,t){const n=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(void 0===e.retriggerCharacters){const r=e.triggerCharacters||[];return i.languages.registerSignatureHelpProvider(n,t,...r)}{const r={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return i.languages.registerSignatureHelpProvider(n,t,r)}}}t.SignatureHelpFeature=a},70743:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidSaveTextDocumentFeature=t.WillSaveWaitUntilFeature=t.WillSaveFeature=t.DidChangeTextDocumentFeature=t.DidCloseTextDocumentFeature=t.DidOpenTextDocumentFeature=void 0;const i=n(66828),r=n(40273),o=n(88909),s=n(94904),a=n(41980);class c extends o.TextDocumentEventFeature{constructor(e,t){super(e,i.workspace.onDidOpenTextDocument,r.DidOpenTextDocumentNotification.type,(()=>e.middleware.didOpen),(t=>e.code2ProtocolConverter.asOpenTextDocumentParams(t)),(e=>e),o.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){const n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:a.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return r.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;const t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);i.workspace.textDocuments.forEach((e=>{const n=e.uri.toString();if(!this._syncedDocuments.has(n)&&i.languages.match(t,e)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e)){const t=this._client.middleware,i=e=>this._client.sendNotification(this._type,this._createParams(e));(t.didOpen?t.didOpen(e,i):i(e)).catch((e=>{this._client.error(`Sending document notification ${this._type.method} failed`,e)})),this._syncedDocuments.set(n,e)}}))}notificationSent(e,t,n){super.notificationSent(e,t,n),this._syncedDocuments.set(e.uri.toString(),e)}}t.DidOpenTextDocumentFeature=c;class l extends o.TextDocumentEventFeature{constructor(e,t){super(e,i.workspace.onDidCloseTextDocument,r.DidCloseTextDocumentNotification.type,(()=>e.middleware.didClose),(t=>e.code2ProtocolConverter.asCloseTextDocumentParams(t)),(e=>e),o.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get registrationType(){return r.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:a.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e,t,n){super.notificationSent(e,t,n),this._syncedDocuments.delete(e.uri.toString())}unregister(e){const t=this._selectors.get(e);super.unregister(e);const n=this._selectors.values();this._syncedDocuments.forEach((e=>{if(i.languages.match(t,e)>0&&!this._selectorFilter(n,e)&&!this._client.hasDedicatedTextSynchronizationFeature(e)){let t=this._client.middleware,n=e=>this._client.sendNotification(this._type,this._createParams(e));this._syncedDocuments.delete(e.uri.toString()),(t.didClose?t.didClose(e,n):n(e)).catch((e=>{this._client.error(`Sending document notification ${this._type.method} failed`,e)}))}}))}}t.DidCloseTextDocumentFeature=l;class d extends o.DynamicDocumentFeature{constructor(e){super(e),this._forcingDelivery=!1,this._changeData=new Map,this._onNotificationSent=new i.EventEmitter}get registrationType(){return r.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&void 0!==n.change&&n.change!==r.TextDocumentSyncKind.None&&this.register({id:a.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=i.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}))}*getDocumentSelectors(){for(const e of this._changeData.values())yield e.documentSelector}async callback(e){if(0===e.contentChanges.length)return;const t=[];for(const n of this._changeData.values())if(i.languages.match(n.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){const i=this._client.middleware;if(n.syncKind===r.TextDocumentSyncKind.Incremental){const n=async e=>{const t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);await this._client.sendNotification(r.DidChangeTextDocumentNotification.type,t),this.notificationSent(e,r.DidChangeTextDocumentNotification.type,t)};t.push(i.didChange?i.didChange(e,(e=>n(e))):n(e))}else if(n.syncKind===r.TextDocumentSyncKind.Full){const n=async e=>{const t=async e=>{const t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document);await this._client.sendNotification(r.DidChangeTextDocumentNotification.type,t),this.notificationSent(e,r.DidChangeTextDocumentNotification.type,t)};return this._changeDelayer?(this._changeDelayer.uri!==e.document.uri.toString()&&(await this.forceDelivery(),this._changeDelayer.uri=e.document.uri.toString()),this._changeDelayer.delayer.trigger((()=>t(e)))):(this._changeDelayer={uri:e.document.uri.toString(),delayer:new s.Delayer(200)},this._changeDelayer.delayer.trigger((()=>t(e)),-1))};t.push(i.didChange?i.didChange(e,(e=>n(e))):n(e))}}return Promise.all(t).then(void 0,(e=>{throw this._client.error(`Sending document notification ${r.DidChangeTextDocumentNotification.type.method} failed`,e),e}))}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,n){this._onNotificationSent.fire({original:e,type:t,params:n})}unregister(e){this._changeData.delete(e),0===this._changeData.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){void 0!==this._changeDelayer&&this._changeDelayer.delayer.cancel(),this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async forceDelivery(){if(!this._forcingDelivery&&this._changeDelayer)try{return this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(const t of this._changeData.values())if(i.languages.match(t.documentSelector,e)>0)return{send:e=>this.callback(e)}}}t.DidChangeTextDocumentFeature=d;class u extends o.TextDocumentEventFeature{constructor(e){super(e,i.workspace.onWillSaveTextDocument,r.WillSaveTextDocumentNotification.type,(()=>e.middleware.willSave),(t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t)),(e=>e.document),((e,t)=>o.TextDocumentEventFeature.textDocumentFilter(e,t.document)))}get registrationType(){return r.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register({id:a.generateUuid(),registerOptions:{documentSelector:t}})}}t.WillSaveFeature=u;class p extends o.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return r.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register({id:a.generateUuid(),registerOptions:{documentSelector:t}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=i.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(o.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let t=this._client.middleware,n=e=>this._client.sendRequest(r.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(e)).then((async e=>{let t=await this._client.protocol2CodeConverter.asTextEdits(e);return void 0===t?[]:t}));e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}t.WillSaveWaitUntilFeature=p;class h extends o.TextDocumentEventFeature{constructor(e){super(e,i.workspace.onDidSaveTextDocument,r.DidSaveTextDocumentNotification.type,(()=>e.middleware.didSave),(t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText)),(e=>e),o.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return r.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){const n=e.resolvedTextDocumentSync;if(t&&n&&n.save){const e="boolean"==typeof n.save?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:a.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}}t.DidSaveTextDocumentFeature=h},10328:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinitionFeature=void 0;const i=n(66828),r=n(40273),o=n(88909);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.typeDefinitionProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=e.documentSelector,n={provideTypeDefinition:(e,t,n)=>{const i=this._client,o=(e,t,n)=>i.sendRequest(r.TypeDefinitionRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asDefinitionResult(e,n)),(e=>i.handleFailedRequest(r.TypeDefinitionRequest.type,n,e,null))),s=i.middleware;return s.provideTypeDefinition?s.provideTypeDefinition(e,t,n,o):o(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return i.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.TypeDefinitionFeature=s},34175:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHierarchyFeature=void 0;const i=n(66828),r=n(40273),o=n(88909);class s{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,t,n){const i=this.client,o=this.middleware,s=(e,t,n)=>{const o=i.code2ProtocolConverter.asTextDocumentPositionParams(e,t);return i.sendRequest(r.TypeHierarchyPrepareRequest.type,o,n).then((e=>n.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(e,n)),(e=>i.handleFailedRequest(r.TypeHierarchyPrepareRequest.type,n,e,null)))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,t,n,s):s(e,t,n)}provideTypeHierarchySupertypes(e,t){const n=this.client,i=this.middleware,o=(e,t)=>{const i={item:n.code2ProtocolConverter.asTypeHierarchyItem(e)};return n.sendRequest(r.TypeHierarchySupertypesRequest.type,i,t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asTypeHierarchyItems(e,t)),(e=>n.handleFailedRequest(r.TypeHierarchySupertypesRequest.type,t,e,null)))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,o):o(e,t)}provideTypeHierarchySubtypes(e,t){const n=this.client,i=this.middleware,o=(e,t)=>{const i={item:n.code2ProtocolConverter.asTypeHierarchyItem(e)};return n.sendRequest(r.TypeHierarchySubtypesRequest.type,i,t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asTypeHierarchyItems(e,t)),(e=>n.handleFailedRequest(r.TypeHierarchySubtypesRequest.type,t,e,null)))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,o):o(e,t)}}class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,r.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"typeHierarchy").dynamicRegistration=!0}initialize(e,t){const[n,i]=this.getRegistration(t,e.typeHierarchyProvider);n&&i&&this.register({id:n,registerOptions:i})}registerLanguageProvider(e){const t=this._client,n=new s(t);return[i.languages.registerTypeHierarchyProvider(t.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}}t.TypeHierarchyFeature=a},94904:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.mapAsync=t.map=t.Semaphore=t.Delayer=void 0;const i=n(40273);t.Delayer=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((e=>{this.onSuccess=e})).then((()=>{this.completionPromise=void 0,this.onSuccess=void 0;var e=this.task();return this.task=void 0,e}))),(t>=0||void 0===this.timeout)&&(this.timeout=(0,i.RAL)().timer.setTimeout((()=>{this.timeout=void 0,this.onSuccess(void 0)}),t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return void 0!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){void 0!==this.timeout&&(this.timeout.dispose(),this.timeout=void 0)}},t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,i.RAL)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};class r{constructor(e=15){this.yieldAfter=Math.max(e,15),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){const e=Date.now()-this.startTime,t=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||t<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=2*this.total}}return!1}}t.map=async function(e,t,n,o){if(0===e.length)return[];const s=new Array(e.length),a=new r(o?.yieldAfter);function c(n){a.start();for(let i=n;i<e.length;i++)if(s[i]=t(e[i]),a.shouldYield())return o?.yieldCallback&&o.yieldCallback(),i+1;return-1}let l=c(0);for(;-1!==l&&(void 0===n||!n.isCancellationRequested);)l=await new Promise((e=>{(0,i.RAL)().timer.setImmediate((()=>{e(c(l))}))}));return s},t.mapAsync=async function(e,t,n,o){if(0===e.length)return[];const s=new Array(e.length),a=new r(o?.yieldAfter);async function c(i){a.start();for(let r=i;r<e.length;r++)if(s[r]=await t(e[r],n),a.shouldYield())return o?.yieldCallback&&o.yieldCallback(),r+1;return-1}let l=await c(0);for(;-1!==l&&(void 0===n||!n.isCancellationRequested);)l=await new Promise((e=>{(0,i.RAL)().timer.setImmediate((()=>{e(c(l))}))}));return s},t.forEach=async function(e,t,n,o){if(0===e.length)return;const s=new r(o?.yieldAfter);function a(n){s.start();for(let i=n;i<e.length;i++)if(t(e[i]),s.shouldYield())return o?.yieldCallback&&o.yieldCallback(),i+1;return-1}let c=a(0);for(;-1!==c&&(void 0===n||!n.isCancellationRequested);)c=await new Promise((e=>{(0,i.RAL)().timer.setImmediate((()=>{e(a(c))}))}))}},59763:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function i(e){return"function"==typeof e}function r(e){return Array.isArray(e)}function o(e){return e&&i(e.then)}Object.defineProperty(t,"__esModule",{value:!0}),t.asPromise=t.thenable=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=i,t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=o,t.asPromise=function(e){return e instanceof Promise?e:o(e)?new Promise(((t,n)=>{e.then((e=>t(e)),(e=>n(e)))})):Promise.resolve(e)}},41980:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUuid=t.parse=t.isUUID=t.v4=t.empty=void 0;class n{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class i extends n{constructor(){super([i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-","4",i._randomHex(),i._randomHex(),i._randomHex(),"-",i._oneOf(i._timeHighBits),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return i._oneOf(i._chars)}}function r(){return new i}i._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],i._timeHighBits=["8","9","a","b"],t.empty=new n("00000000-0000-0000-0000-000000000000"),t.v4=r;const o=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function s(e){return o.test(e)}t.isUUID=s,t.parse=function(e){if(!s(e))throw new Error("invalid uuid");return new n(e)},t.generateUuid=function(){return r().asHex()}},5941:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFoldersFeature=t.arrayDiff=void 0;const i=n(41980),r=n(66828),o=n(40273);function s(e,t){if(void 0!==e)return e[t]}function a(e,t){return e.filter((e=>t.indexOf(e)<0))}t.arrayDiff=a,t.WorkspaceFoldersFeature=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return o.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){const t=r.workspace.workspaceFolders;this.initializeWithFolders(t),e.workspaceFolders=void 0===t?null:t.map((e=>this.asProtocol(e)))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){const t=this._client;t.onRequest(o.WorkspaceFoldersRequest.type,(e=>{const n=()=>{const e=r.workspace.workspaceFolders;return void 0===e?null:e.map((e=>this.asProtocol(e)))},i=t.middleware.workspace;return i&&i.workspaceFolders?i.workspaceFolders(e,n):n()}));const n=s(s(s(e,"workspace"),"workspaceFolders"),"changeNotifications");let a;"string"==typeof n?a=n:!0===n&&(a=i.generateUuid()),a&&this.register({id:a,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&&e){const n=a(this._initialFolders,e),i=a(e,this._initialFolders);(i.length>0||n.length>0)&&(t=this.doSendEvent(i,n))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&&(t=this.doSendEvent(e,[]));void 0!==t&&t.catch((e=>{this._client.error(`Sending notification ${o.DidChangeWorkspaceFoldersNotification.type.method} failed`,e)}))}doSendEvent(e,t){let n={event:{added:e.map((e=>this.asProtocol(e))),removed:t.map((e=>this.asProtocol(e)))}};return this._client.sendNotification(o.DidChangeWorkspaceFoldersNotification.type,n)}register(e){let t=e.id,n=this._client,i=r.workspace.onDidChangeWorkspaceFolders((e=>{let t=e=>this.doSendEvent(e.added,e.removed),i=n.middleware.workspace;(i&&i.didChangeWorkspaceFolders?i.didChangeWorkspaceFolders(e,t):t(e)).catch((e=>{this._client.error(`Sending notification ${o.DidChangeWorkspaceFoldersNotification.type.method} failed`,e)}))}));this._listeners.set(t,i),this.sendInitialEvent(r.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);void 0!==t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return void 0===e?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}}},43051:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceSymbolFeature=void 0;const i=n(66828),r=n(40273),o=n(88909),s=n(42483),a=n(41980);class c extends o.WorkspaceFeature{constructor(e){super(e,r.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:s.SupportedSymbolKinds},t.tagSupport={valueSet:s.SupportedSymbolTags},t.resolveSupport={properties:["location.range"]}}initialize(e){e.workspaceSymbolProvider&&this.register({id:a.generateUuid(),registerOptions:!0===e.workspaceSymbolProvider?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){const t={provideWorkspaceSymbols:(e,t)=>{const n=this._client,i=(e,t)=>n.sendRequest(r.WorkspaceSymbolRequest.type,{query:e},t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asSymbolInformations(e,t)),(e=>n.handleFailedRequest(r.WorkspaceSymbolRequest.type,t,e,null))),o=n.middleware;return o.provideWorkspaceSymbols?o.provideWorkspaceSymbols(e,t,i):i(e,t)},resolveWorkspaceSymbol:!0===e.resolveProvider?(e,t)=>{const n=this._client,i=(e,t)=>n.sendRequest(r.WorkspaceSymbolResolveRequest.type,n.code2ProtocolConverter.asWorkspaceSymbol(e),t).then((e=>t.isCancellationRequested?null:n.protocol2CodeConverter.asSymbolInformation(e)),(e=>n.handleFailedRequest(r.WorkspaceSymbolResolveRequest.type,t,e,null))),o=n.middleware;return o.resolveWorkspaceSymbol?o.resolveWorkspaceSymbol(e,t,i):i(e,t)}:void 0};return[i.languages.registerWorkspaceSymbolProvider(t),t]}}t.WorkspaceSymbolFeature=c},92850:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingMonitor=t.LanguageClient=t.TransportKind=void 0;const o=n(32081),s=n(57147),a=n(71017),c=n(26237),l=n(66828),d=n(59763),u=n(14384),p=n(10794),h=n(96560);r(n(96560),t),r(n(85734),t);const f="^1.67.0";var m,g,v,y,b,w;!function(e){e[e.stdio=0]="stdio",e[e.ipc=1]="ipc",e[e.pipe=2]="pipe",e[e.socket=3]="socket"}(m=t.TransportKind||(t.TransportKind={})),function(e){e.isSocket=function(e){const t=e;return t&&t.kind===m.socket&&d.number(t.port)}}(g||(g={})),function(e){e.is=function(e){return d.string(e.command)}}(v||(v={})),function(e){e.is=function(e){return d.string(e.module)}}(y||(y={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.writer&&void 0!==t.reader}}(b||(b={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.process&&"boolean"==typeof t.detached}}(w||(w={}));class _ extends u.BaseLanguageClient{constructor(e,t,n,i,r){let o,s,a,c,l;d.string(t)?(o=e,s=t,a=n,c=i,l=!!r):(o=e.toLowerCase(),s=e,a=t,c=n,l=i),void 0===l&&(l=!1),super(o,s,c),this._serverOptions=a,this._forceDebug=l,this._isInDebugMode=l;try{this.checkVersion()}catch(e){throw d.string(e.message)&&this.outputChannel.appendLine(e.message),e}}checkVersion(){const e=c.parse(l.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${l.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!c.satisfies(e,f))throw new Error(`The language client requires VS Code version ${f} but received version ${l.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise((e=>setTimeout(e,1e3))),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally((()=>{if(this._serverProcess){const e=this._serverProcess;this._serverProcess=void 0,void 0!==this._isDetached&&this._isDetached||this.checkProcessDied(e),this._isDetached=void 0}}))}checkProcessDied(e){e&&void 0!==e.pid&&setTimeout((()=>{try{void 0!==e.pid&&(process.kill(e.pid,0),(0,p.terminate)(e))}catch(e){}}),2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),null===e.processId&&(e.processId=process.pid)}createMessageTransports(e){function t(e,t){if(!e&&!t)return;const n=Object.create(null);return Object.keys(process.env).forEach((e=>n[e]=process.env[e])),t&&(n.ELECTRON_RUN_AS_NODE="1",n.ELECTRON_NO_ASAR="1"),e&&Object.keys(e).forEach((t=>n[t]=e[t])),n}const n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function r(e){if(null===e.stdin||null===e.stdout||null===e.stderr)throw new Error("Process created without stdio streams")}const s=this._serverOptions;if(d.func(s))return s().then((t=>{if(u.MessageTransports.is(t))return this._isDetached=!!t.detached,t;if(b.is(t))return this._isDetached=!!t.detached,{reader:new h.StreamMessageReader(t.reader),writer:new h.StreamMessageWriter(t.writer)};{let n;return w.is(t)?(n=t.process,this._isDetached=t.detached):(n=t,this._isDetached=!1),n.stderr.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),{reader:new h.StreamMessageReader(n.stdout),writer:new h.StreamMessageWriter(n.stdin)}}}));let a,c=s;return c.run||c.debug?this._forceDebug||function(){let e=process.execArgv;return!!e&&e.some((e=>n.some((t=>e.startsWith(t)))||i.some((t=>e===t))))}()?(a=c.debug,this._isInDebugMode=!0):(a=c.run,this._isInDebugMode=!1):a=s,this._getServerWorkingDir(a.options).then((n=>{if(y.is(a)&&a.module){let i=a,s=i.transport||m.stdio;if(!i.runtime){let a;return new Promise(((c,l)=>{const u=(i.args&&i.args.slice())??[];s===m.ipc?u.push("--node-ipc"):s===m.stdio?u.push("--stdio"):s===m.pipe?(a=(0,h.generateRandomPipeName)(),u.push(`--pipe=${a}`)):g.isSocket(s)&&u.push(`--socket=${s.port}`),u.push(`--clientProcessId=${process.pid.toString()}`);const p=i.options??Object.create(null);if(p.env=t(p.env,!0),p.execArgv=p.execArgv||[],p.cwd=n,p.silent=!0,s===m.ipc||s===m.stdio){const t=o.fork(i.module,u||[],p);r(t),this._serverProcess=t,t.stderr.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),s===m.ipc?(t.stdout.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),c({reader:new h.IPCMessageReader(this._serverProcess),writer:new h.IPCMessageWriter(this._serverProcess)})):c({reader:new h.StreamMessageReader(t.stdout),writer:new h.StreamMessageWriter(t.stdin)})}else s===m.pipe?(0,h.createClientPipeTransport)(a).then((t=>{const n=o.fork(i.module,u||[],p);r(n),this._serverProcess=n,n.stderr.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),n.stdout.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),t.onConnected().then((e=>{c({reader:e[0],writer:e[1]})}),l)}),l):g.isSocket(s)&&(0,h.createClientSocketTransport)(s.port).then((t=>{const n=o.fork(i.module,u||[],p);r(n),this._serverProcess=n,n.stderr.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),n.stdout.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),t.onConnected().then((e=>{c({reader:e[0],writer:e[1]})}),l)}),l)}))}{const r=[],a=i.options??Object.create(null);a.execArgv&&a.execArgv.forEach((e=>r.push(e))),r.push(i.module),i.args&&i.args.forEach((e=>r.push(e)));const c=Object.create(null);c.cwd=n,c.env=t(a.env,!1);const l=this._getRuntimePath(i.runtime,n);let u;if(s===m.ipc?(c.stdio=[null,null,null,"ipc"],r.push("--node-ipc")):s===m.stdio?r.push("--stdio"):s===m.pipe?(u=(0,h.generateRandomPipeName)(),r.push(`--pipe=${u}`)):g.isSocket(s)&&r.push(`--socket=${s.port}`),r.push(`--clientProcessId=${process.pid.toString()}`),s===m.ipc||s===m.stdio){const t=o.spawn(l,r,c);return t&&t.pid?(this._serverProcess=t,t.stderr.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),s===m.ipc?(t.stdout.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),Promise.resolve({reader:new h.IPCMessageReader(t),writer:new h.IPCMessageWriter(t)})):Promise.resolve({reader:new h.StreamMessageReader(t.stdout),writer:new h.StreamMessageWriter(t.stdin)})):S(t,`Launching server using runtime ${l} failed.`)}if(s===m.pipe)return(0,h.createClientPipeTransport)(u).then((t=>{const n=o.spawn(l,r,c);return n&&n.pid?(this._serverProcess=n,n.stderr.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),n.stdout.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),t.onConnected().then((e=>({reader:e[0],writer:e[1]})))):S(n,`Launching server using runtime ${l} failed.`)}));if(g.isSocket(s))return(0,h.createClientSocketTransport)(s.port).then((t=>{const n=o.spawn(l,r,c);return n&&n.pid?(this._serverProcess=n,n.stderr.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),n.stdout.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),t.onConnected().then((e=>({reader:e[0],writer:e[1]})))):S(n,`Launching server using runtime ${l} failed.`)}))}}else if(v.is(a)&&a.command){const t=a,i=void 0!==a.args?a.args.slice(0):[];let r;const s=a.transport;if(s===m.stdio)i.push("--stdio");else if(s===m.pipe)r=(0,h.generateRandomPipeName)(),i.push(`--pipe=${r}`);else if(g.isSocket(s))i.push(`--socket=${s.port}`);else if(s===m.ipc)throw new Error("Transport kind ipc is not support for command executable");const c=Object.assign({},t.options);if(c.cwd=c.cwd||n,void 0===s||s===m.stdio){const n=o.spawn(t.command,i,c);return n&&n.pid?(n.stderr.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),this._serverProcess=n,this._isDetached=!!c.detached,Promise.resolve({reader:new h.StreamMessageReader(n.stdout),writer:new h.StreamMessageWriter(n.stdin)})):S(n,`Launching server using command ${t.command} failed.`)}if(s===m.pipe)return(0,h.createClientPipeTransport)(r).then((n=>{const r=o.spawn(t.command,i,c);return r&&r.pid?(this._serverProcess=r,this._isDetached=!!c.detached,r.stderr.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),r.stdout.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),n.onConnected().then((e=>({reader:e[0],writer:e[1]})))):S(r,`Launching server using command ${t.command} failed.`)}));if(g.isSocket(s))return(0,h.createClientSocketTransport)(s.port).then((n=>{const r=o.spawn(t.command,i,c);return r&&r.pid?(this._serverProcess=r,this._isDetached=!!c.detached,r.stderr.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),r.stdout.on("data",(t=>this.outputChannel.append(d.string(t)?t:t.toString(e)))),n.onConnected().then((e=>({reader:e[0],writer:e[1]})))):S(r,`Launching server using command ${t.command} failed.`)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(s,null,4)))}))}_getRuntimePath(e,t){if(a.isAbsolute(e))return e;const n=this._mainGetRootPath();if(void 0!==n){const t=a.join(n,e);if(s.existsSync(t))return t}if(void 0!==t){const n=a.join(t,e);if(s.existsSync(n))return n}return e}_mainGetRootPath(){let e=l.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise((e=>{s.lstat(t,((n,i)=>{e(!n&&i.isDirectory()?t:void 0)}))})):Promise.resolve(void 0)}getLocale(){const e=process.env.VSCODE_NLS_CONFIG;if(void 0===e)return"en";let t;try{t=JSON.parse(e)}catch(e){}return void 0===t||"string"!=typeof t.locale?"en":t.locale}}function S(e,t){return null===e?Promise.reject(t):new Promise(((n,i)=>{e.on("error",(e=>{i(`${t} ${e}`)})),setImmediate((()=>i(t)))}))}t.LanguageClient=_,t.SettingMonitor=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return l.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new l.Disposable((()=>{this._client.needsStop()&&this._client.stop()}))}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,i=n?l.workspace.getConfiguration(t).get(n,!1):l.workspace.getConfiguration(t);i&&this._client.needsStart()?this._client.start().catch((e=>this._client.error("Start failed after configuration change",e,"force"))):!i&&this._client.needsStop()&&this._client.stop().catch((e=>this._client.error("Stop failed after configuration change",e,"force")))}}},10794:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.terminate=void 0;const i=n(32081),r=n(71017),o="win32"===process.platform,s="darwin"===process.platform,a="linux"===process.platform;t.terminate=function(e,t){if(o)try{let n={stdio:["pipe","pipe","ignore"]};return t&&(n.cwd=t),i.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],n),!0}catch(e){return!1}else{if(!a&&!s)return e.kill("SIGKILL"),!0;try{var n=(0,r.join)(__dirname,"terminateProcess.sh");return!i.spawnSync(n,[e.pid.toString()]).error}catch(e){return!1}}}},52847:(e,t,n)=>{"use strict";e.exports=n(92850)},89872:(e,t,n)=>{"use strict";const i=n(34411),r=Symbol("max"),o=Symbol("length"),s=Symbol("lengthCalculator"),a=Symbol("allowStale"),c=Symbol("maxAge"),l=Symbol("dispose"),d=Symbol("noDisposeOnSet"),u=Symbol("lruList"),p=Symbol("cache"),h=Symbol("updateAgeOnGet"),f=()=>1,m=(e,t,n)=>{const i=e[p].get(t);if(i){const t=i.value;if(g(e,t)){if(y(e,i),!e[a])return}else n&&(e[h]&&(i.value.now=Date.now()),e[u].unshiftNode(i));return t.value}},g=(e,t)=>{if(!t||!t.maxAge&&!e[c])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[c]&&n>e[c]},v=e=>{if(e[o]>e[r])for(let t=e[u].tail;e[o]>e[r]&&null!==t;){const n=t.prev;y(e,t),t=n}},y=(e,t)=>{if(t){const n=t.value;e[l]&&e[l](n.key,n.value),e[o]-=n.length,e[p].delete(n.key),e[u].removeNode(t)}};class b{constructor(e,t,n,i,r){this.key=e,this.value=t,this.length=n,this.now=i,this.maxAge=r||0}}const w=(e,t,n,i)=>{let r=n.value;g(e,r)&&(y(e,n),e[a]||(r=void 0)),r&&t.call(i,r.value,r.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[r]=e.max||1/0;const t=e.length||f;if(this[s]="function"!=typeof t?f:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[l]=e.dispose,this[d]=e.noDisposeOnSet||!1,this[h]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[r]=e||1/0,v(this)}get max(){return this[r]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[c]=e,v(this)}get maxAge(){return this[c]}set lengthCalculator(e){"function"!=typeof e&&(e=f),e!==this[s]&&(this[s]=e,this[o]=0,this[u].forEach((e=>{e.length=this[s](e.value,e.key),this[o]+=e.length}))),v(this)}get lengthCalculator(){return this[s]}get length(){return this[o]}get itemCount(){return this[u].length}rforEach(e,t){t=t||this;for(let n=this[u].tail;null!==n;){const i=n.prev;w(this,e,n,t),n=i}}forEach(e,t){t=t||this;for(let n=this[u].head;null!==n;){const i=n.next;w(this,e,n,t),n=i}}keys(){return this[u].toArray().map((e=>e.key))}values(){return this[u].toArray().map((e=>e.value))}reset(){this[l]&&this[u]&&this[u].length&&this[u].forEach((e=>this[l](e.key,e.value))),this[p]=new Map,this[u]=new i,this[o]=0}dump(){return this[u].map((e=>!g(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[u]}set(e,t,n){if((n=n||this[c])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const i=n?Date.now():0,a=this[s](t,e);if(this[p].has(e)){if(a>this[r])return y(this,this[p].get(e)),!1;const s=this[p].get(e).value;return this[l]&&(this[d]||this[l](e,s.value)),s.now=i,s.maxAge=n,s.value=t,this[o]+=a-s.length,s.length=a,this.get(e),v(this),!0}const h=new b(e,t,a,i,n);return h.length>this[r]?(this[l]&&this[l](e,t),!1):(this[o]+=h.length,this[u].unshift(h),this[p].set(e,this[u].head),v(this),!0)}has(e){if(!this[p].has(e))return!1;const t=this[p].get(e).value;return!g(this,t)}get(e){return m(this,e,!0)}peek(e){return m(this,e,!1)}pop(){const e=this[u].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[p].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const i=e[n],r=i.e||0;if(0===r)this.set(i.k,i.v);else{const e=r-t;e>0&&this.set(i.k,i.v,e)}}}prune(){this[p].forEach(((e,t)=>m(this,t,!1)))}}},73960:(e,t,n)=>{const i=Symbol("SemVer ANY");class r{static get ANY(){return i}constructor(e,t){if(t=o(t),e instanceof r){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),l("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===i?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new d(n[2],this.options.loose):this.semver=i}toString(){return this.value}test(e){if(l("Comparator.test",e,this.options.loose),this.semver===i||e===i)return!0;if("string"==typeof e)try{e=new d(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new u(e.value,t).test(this.value):""===e.operator?""===e.value||new u(this.value,t).test(e.semver):!((t=o(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(c(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(c(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}e.exports=r;const o=n(79157),{safeRe:s,t:a}=n(81466),c=n(80475),l=n(76583),d=n(15351),u=n(79971)},79971:(e,t,n)=>{class i{constructor(e,t){if(t=o(t),e instanceof i)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new i(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!g(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&f)|(this.options.loose&&m))+":"+e,n=r.get(t);if(n)return n;const i=this.options.loose,o=i?l[d.HYPHENRANGELOOSE]:l[d.HYPHENRANGE];e=e.replace(o,I(this.options.includePrerelease)),a("hyphen replace",e),e=e.replace(l[d.COMPARATORTRIM],u),a("comparator trim",e),e=e.replace(l[d.TILDETRIM],p),a("tilde trim",e),e=e.replace(l[d.CARETTRIM],h),a("caret trim",e);let c=e.split(" ").map((e=>b(e,this.options))).join(" ").split(/\s+/).map((e=>P(e,this.options)));i&&(c=c.filter((e=>(a("loose invalid filter",e,this.options),!!e.match(l[d.COMPARATORLOOSE]))))),a("range list",c);const v=new Map,y=c.map((e=>new s(e,this.options)));for(const e of y){if(g(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const w=[...v.values()];return r.set(t,w),w}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Range is required");return this.set.some((n=>y(n,t)&&e.set.some((e=>y(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(D(this.set[t],e,this.options))return!0;return!1}}e.exports=i;const r=new(n(89872))({max:1e3}),o=n(79157),s=n(73960),a=n(76583),c=n(15351),{safeRe:l,t:d,comparatorTrimReplace:u,tildeTrimReplace:p,caretTrimReplace:h}=n(81466),{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:m}=n(47138),g=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,y=(e,t)=>{let n=!0;const i=e.slice();let r=i.pop();for(;n&&i.length;)n=i.every((e=>r.intersects(e,t))),r=i.pop();return n},b=(e,t)=>(a("comp",e,t),e=C(e,t),a("caret",e),e=_(e,t),a("tildes",e),e=E(e,t),a("xrange",e),e=T(e,t),a("stars",e),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,_=(e,t)=>e.trim().split(/\s+/).map((e=>S(e,t))).join(" "),S=(e,t)=>{const n=t.loose?l[d.TILDELOOSE]:l[d.TILDE];return e.replace(n,((t,n,i,r,o)=>{let s;return a("tilde",e,t,n,i,r,o),w(n)?s="":w(i)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:w(r)?s=`>=${n}.${i}.0 <${n}.${+i+1}.0-0`:o?(a("replaceTilde pr",o),s=`>=${n}.${i}.${r}-${o} <${n}.${+i+1}.0-0`):s=`>=${n}.${i}.${r} <${n}.${+i+1}.0-0`,a("tilde return",s),s}))},C=(e,t)=>e.trim().split(/\s+/).map((e=>k(e,t))).join(" "),k=(e,t)=>{a("caret",e,t);const n=t.loose?l[d.CARETLOOSE]:l[d.CARET],i=t.includePrerelease?"-0":"";return e.replace(n,((t,n,r,o,s)=>{let c;return a("caret",e,t,n,r,o,s),w(n)?c="":w(r)?c=`>=${n}.0.0${i} <${+n+1}.0.0-0`:w(o)?c="0"===n?`>=${n}.${r}.0${i} <${n}.${+r+1}.0-0`:`>=${n}.${r}.0${i} <${+n+1}.0.0-0`:s?(a("replaceCaret pr",s),c="0"===n?"0"===r?`>=${n}.${r}.${o}-${s} <${n}.${r}.${+o+1}-0`:`>=${n}.${r}.${o}-${s} <${n}.${+r+1}.0-0`:`>=${n}.${r}.${o}-${s} <${+n+1}.0.0-0`):(a("no pr"),c="0"===n?"0"===r?`>=${n}.${r}.${o}${i} <${n}.${r}.${+o+1}-0`:`>=${n}.${r}.${o}${i} <${n}.${+r+1}.0-0`:`>=${n}.${r}.${o} <${+n+1}.0.0-0`),a("caret return",c),c}))},E=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map((e=>x(e,t))).join(" ")),x=(e,t)=>{e=e.trim();const n=t.loose?l[d.XRANGELOOSE]:l[d.XRANGE];return e.replace(n,((n,i,r,o,s,c)=>{a("xRange",e,n,i,r,o,s,c);const l=w(r),d=l||w(o),u=d||w(s),p=u;return"="===i&&p&&(i=""),c=t.includePrerelease?"-0":"",l?n=">"===i||"<"===i?"<0.0.0-0":"*":i&&p?(d&&(o=0),s=0,">"===i?(i=">=",d?(r=+r+1,o=0,s=0):(o=+o+1,s=0)):"<="===i&&(i="<",d?r=+r+1:o=+o+1),"<"===i&&(c="-0"),n=`${i+r}.${o}.${s}${c}`):d?n=`>=${r}.0.0${c} <${+r+1}.0.0-0`:u&&(n=`>=${r}.${o}.0${c} <${r}.${+o+1}.0-0`),a("xRange return",n),n}))},T=(e,t)=>(a("replaceStars",e,t),e.trim().replace(l[d.STAR],"")),P=(e,t)=>(a("replaceGTE0",e,t),e.trim().replace(l[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),I=e=>(t,n,i,r,o,s,a,c,l,d,u,p,h)=>`${n=w(i)?"":w(r)?`>=${i}.0.0${e?"-0":""}`:w(o)?`>=${i}.${r}.0${e?"-0":""}`:s?`>=${n}`:`>=${n}${e?"-0":""}`} ${c=w(l)?"":w(d)?`<${+l+1}.0.0-0`:w(u)?`<${l}.${+d+1}.0-0`:p?`<=${l}.${d}.${u}-${p}`:e?`<${l}.${d}.${+u+1}-0`:`<=${c}`}`.trim(),D=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(a(e[n].semver),e[n].semver!==s.ANY&&e[n].semver.prerelease.length>0){const i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}},15351:(e,t,n)=>{const i=n(76583),{MAX_LENGTH:r,MAX_SAFE_INTEGER:o}=n(47138),{safeRe:s,t:a}=n(81466),c=n(79157),{compareIdentifiers:l}=n(74089);class d{constructor(e,t){if(t=c(t),e instanceof d){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>r)throw new TypeError(`version is longer than ${r} characters`);i("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(i("SemVer.compare",this.version,this.options,e),!(e instanceof d)){if("string"==typeof e&&e===this.version)return 0;e=new d(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof d||(e=new d(e,this.options)),l(this.major,e.major)||l(this.minor,e.minor)||l(this.patch,e.patch)}comparePre(e){if(e instanceof d||(e=new d(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(i("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return l(n,r)}while(++t)}compareBuild(e){e instanceof d||(e=new d(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(i("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return l(n,r)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);if(-1===i){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let i=[t,e];!1===n&&(i=[t]),0===l(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=d},61790:(e,t,n)=>{const i=n(37376);e.exports=(e,t)=>{const n=i(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},80475:(e,t,n)=>{const i=n(65695),r=n(71012),o=n(59525),s=n(68578),a=n(13614),c=n(50160);e.exports=(e,t,n,l)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return i(e,n,l);case"!=":return r(e,n,l);case">":return o(e,n,l);case">=":return s(e,n,l);case"<":return a(e,n,l);case"<=":return c(e,n,l);default:throw new TypeError(`Invalid operator: ${t}`)}}},81312:(e,t,n)=>{const i=n(15351),r=n(37376),{safeRe:o,t:s}=n(81466);e.exports=(e,t)=>{if(e instanceof i)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=o[s.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),o[s.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;o[s.COERCERTL].lastIndex=-1}else n=e.match(o[s.COERCE]);return null===n?null:r(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)}},23209:(e,t,n)=>{const i=n(15351);e.exports=(e,t,n)=>{const r=new i(e,n),o=new i(t,n);return r.compare(o)||r.compareBuild(o)}},23266:(e,t,n)=>{const i=n(9144);e.exports=(e,t)=>i(e,t,!0)},9144:(e,t,n)=>{const i=n(15351);e.exports=(e,t,n)=>new i(e,n).compare(new i(t,n))},23224:(e,t,n)=>{const i=n(37376);e.exports=(e,t)=>{const n=i(e,null,!0),r=i(t,null,!0),o=n.compare(r);if(0===o)return null;const s=o>0,a=s?n:r,c=s?r:n,l=!!a.prerelease.length;if(c.prerelease.length&&!l)return c.patch||c.minor?a.patch?"patch":a.minor?"minor":"major":"major";const d=l?"pre":"";return n.major!==r.major?d+"major":n.minor!==r.minor?d+"minor":n.patch!==r.patch?d+"patch":"prerelease"}},65695:(e,t,n)=>{const i=n(9144);e.exports=(e,t,n)=>0===i(e,t,n)},59525:(e,t,n)=>{const i=n(9144);e.exports=(e,t,n)=>i(e,t,n)>0},68578:(e,t,n)=>{const i=n(9144);e.exports=(e,t,n)=>i(e,t,n)>=0},89210:(e,t,n)=>{const i=n(15351);e.exports=(e,t,n,r,o)=>{"string"==typeof n&&(o=r,r=n,n=void 0);try{return new i(e instanceof i?e.version:e,n).inc(t,r,o).version}catch(e){return null}}},13614:(e,t,n)=>{const i=n(9144);e.exports=(e,t,n)=>i(e,t,n)<0},50160:(e,t,n)=>{const i=n(9144);e.exports=(e,t,n)=>i(e,t,n)<=0},85850:(e,t,n)=>{const i=n(15351);e.exports=(e,t)=>new i(e,t).major},23090:(e,t,n)=>{const i=n(15351);e.exports=(e,t)=>new i(e,t).minor},71012:(e,t,n)=>{const i=n(9144);e.exports=(e,t,n)=>0!==i(e,t,n)},37376:(e,t,n)=>{const i=n(15351);e.exports=(e,t,n=!1)=>{if(e instanceof i)return e;try{return new i(e,t)}catch(e){if(!n)return null;throw e}}},50788:(e,t,n)=>{const i=n(15351);e.exports=(e,t)=>new i(e,t).patch},84987:(e,t,n)=>{const i=n(37376);e.exports=(e,t)=>{const n=i(e,t);return n&&n.prerelease.length?n.prerelease:null}},40310:(e,t,n)=>{const i=n(9144);e.exports=(e,t,n)=>i(t,e,n)},42633:(e,t,n)=>{const i=n(23209);e.exports=(e,t)=>e.sort(((e,n)=>i(n,e,t)))},79681:(e,t,n)=>{const i=n(79971);e.exports=(e,t,n)=>{try{t=new i(t,n)}catch(e){return!1}return t.test(e)}},5044:(e,t,n)=>{const i=n(23209);e.exports=(e,t)=>e.sort(((e,n)=>i(e,n,t)))},23167:(e,t,n)=>{const i=n(37376);e.exports=(e,t)=>{const n=i(e,t);return n?n.version:null}},26237:(e,t,n)=>{const i=n(81466),r=n(47138),o=n(15351),s=n(74089),a=n(37376),c=n(23167),l=n(61790),d=n(89210),u=n(23224),p=n(85850),h=n(23090),f=n(50788),m=n(84987),g=n(9144),v=n(40310),y=n(23266),b=n(23209),w=n(5044),_=n(42633),S=n(59525),C=n(13614),k=n(65695),E=n(71012),x=n(68578),T=n(50160),P=n(80475),I=n(81312),D=n(73960),R=n(79971),O=n(79681),A=n(79752),N=n(8871),M=n(42159),L=n(74128),j=n(27265),F=n(51158),U=n(46264),q=n(90422),K=n(40317),V=n(50246),W=n(69676);e.exports={parse:a,valid:c,clean:l,inc:d,diff:u,major:p,minor:h,patch:f,prerelease:m,compare:g,rcompare:v,compareLoose:y,compareBuild:b,sort:w,rsort:_,gt:S,lt:C,eq:k,neq:E,gte:x,lte:T,cmp:P,coerce:I,Comparator:D,Range:R,satisfies:O,toComparators:A,maxSatisfying:N,minSatisfying:M,minVersion:L,validRange:j,outside:F,gtr:U,ltr:q,intersects:K,simplifyRange:V,subset:W,SemVer:o,re:i.re,src:i.src,tokens:i.t,SEMVER_SPEC_VERSION:r.SEMVER_SPEC_VERSION,RELEASE_TYPES:r.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},47138:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},76583:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},74089:e=>{const t=/^[0-9]+$/,n=(e,n)=>{const i=t.test(e),r=t.test(n);return i&&r&&(e=+e,n=+n),e===n?0:i&&!r?-1:r&&!i?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},79157:e=>{const t=Object.freeze({loose:!0}),n=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:n},81466:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r}=n(47138),o=n(76583),s=(t=e.exports={}).re=[],a=t.safeRe=[],c=t.src=[],l=t.t={};let d=0;const u="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",i],[u,r]],h=(e,t,n)=>{const i=(e=>{for(const[t,n]of p)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e})(t),r=d++;o(e,r,t),l[e]=r,c[r]=t,s[r]=new RegExp(t,n?"g":void 0),a[r]=new RegExp(i,n?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${u}*`),h("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${u}+`),h("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),h("FULL",`^${c[l.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),h("LOOSE",`^${c[l.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),h("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?(?:$|[^\\d])`),h("COERCERTL",c[l.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},46264:(e,t,n)=>{const i=n(51158);e.exports=(e,t,n)=>i(e,t,">",n)},40317:(e,t,n)=>{const i=n(79971);e.exports=(e,t,n)=>(e=new i(e,n),t=new i(t,n),e.intersects(t,n))},90422:(e,t,n)=>{const i=n(51158);e.exports=(e,t,n)=>i(e,t,"<",n)},8871:(e,t,n)=>{const i=n(15351),r=n(79971);e.exports=(e,t,n)=>{let o=null,s=null,a=null;try{a=new r(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&-1!==s.compare(e)||(o=e,s=new i(o,n)))})),o}},42159:(e,t,n)=>{const i=n(15351),r=n(79971);e.exports=(e,t,n)=>{let o=null,s=null,a=null;try{a=new r(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&1!==s.compare(e)||(o=e,s=new i(o,n)))})),o}},74128:(e,t,n)=>{const i=n(15351),r=n(79971),o=n(59525);e.exports=(e,t)=>{e=new r(e,t);let n=new i("0.0.0");if(e.test(n))return n;if(n=new i("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const r=e.set[t];let s=null;r.forEach((e=>{const t=new i(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!o(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||n&&!o(n,s)||(n=s)}return n&&e.test(n)?n:null}},51158:(e,t,n)=>{const i=n(15351),r=n(73960),{ANY:o}=r,s=n(79971),a=n(79681),c=n(59525),l=n(13614),d=n(50160),u=n(68578);e.exports=(e,t,n,p)=>{let h,f,m,g,v;switch(e=new i(e,p),t=new s(t,p),n){case">":h=c,f=d,m=l,g=">",v=">=";break;case"<":h=l,f=u,m=c,g="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,p))return!1;for(let n=0;n<t.set.length;++n){const i=t.set[n];let s=null,a=null;if(i.forEach((e=>{e.semver===o&&(e=new r(">=0.0.0")),s=s||e,a=a||e,h(e.semver,s.semver,p)?s=e:m(e.semver,a.semver,p)&&(a=e)})),s.operator===g||s.operator===v)return!1;if((!a.operator||a.operator===g)&&f(e,a.semver))return!1;if(a.operator===v&&m(e,a.semver))return!1}return!0}},50246:(e,t,n)=>{const i=n(79681),r=n(9144);e.exports=(e,t,n)=>{const o=[];let s=null,a=null;const c=e.sort(((e,t)=>r(e,t,n)));for(const e of c)i(e,t,n)?(a=e,s||(s=e)):(a&&o.push([s,a]),a=null,s=null);s&&o.push([s,null]);const l=[];for(const[e,t]of o)e===t?l.push(e):t||e!==c[0]?t?e===c[0]?l.push(`<=${t}`):l.push(`${e} - ${t}`):l.push(`>=${e}`):l.push("*");const d=l.join(" || "),u="string"==typeof t.raw?t.raw:String(t);return d.length<u.length?d:t}},69676:(e,t,n)=>{const i=n(79971),r=n(73960),{ANY:o}=r,s=n(79681),a=n(9144),c=[new r(">=0.0.0-0")],l=[new r(">=0.0.0")],d=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=n.includePrerelease?c:l}if(1===t.length&&t[0].semver===o){if(n.includePrerelease)return!0;t=l}const i=new Set;let r,d,h,f,m,g,v;for(const t of e)">"===t.operator||">="===t.operator?r=u(r,t,n):"<"===t.operator||"<="===t.operator?d=p(d,t,n):i.add(t.semver);if(i.size>1)return null;if(r&&d){if(h=a(r.semver,d.semver,n),h>0)return null;if(0===h&&(">="!==r.operator||"<="!==d.operator))return null}for(const e of i){if(r&&!s(e,String(r),n))return null;if(d&&!s(e,String(d),n))return null;for(const i of t)if(!s(e,String(i),n))return!1;return!0}let y=!(!d||n.includePrerelease||!d.semver.prerelease.length)&&d.semver,b=!(!r||n.includePrerelease||!r.semver.prerelease.length)&&r.semver;y&&1===y.prerelease.length&&"<"===d.operator&&0===y.prerelease[0]&&(y=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,r)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),">"===e.operator||">="===e.operator){if(f=u(r,e,n),f===e&&f!==r)return!1}else if(">="===r.operator&&!s(r.semver,String(e),n))return!1;if(d)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if(m=p(d,e,n),m===e&&m!==d)return!1}else if("<="===d.operator&&!s(d.semver,String(e),n))return!1;if(!e.operator&&(d||r)&&0!==h)return!1}return!(r&&g&&!d&&0!==h||d&&v&&!r&&0!==h||b||y)},u=(e,t,n)=>{if(!e)return t;const i=a(e.semver,t.semver,n);return i>0?e:i<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,n)=>{if(!e)return t;const i=a(e.semver,t.semver,n);return i<0?e:i>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,n={})=>{if(e===t)return!0;e=new i(e,n),t=new i(t,n);let r=!1;e:for(const i of e.set){for(const e of t.set){const t=d(i,e,n);if(r=r||null!==t,t)continue e}if(r)return!1}return!0}},79752:(e,t,n)=>{const i=n(79971);e.exports=(e,t)=>new i(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},27265:(e,t,n)=>{const i=n(79971);e.exports=(e,t)=>{try{return new i(e,t).range||"*"}catch(e){return null}}},51661:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.LSPErrorCodes=t.createProtocolConnection=void 0,r(n(74389),t),r(n(91674),t),r(n(66140),t),r(n(10542),t);var o,s=n(73767);Object.defineProperty(t,"createProtocolConnection",{enumerable:!0,get:function(){return s.createProtocolConnection}}),(o=t.LSPErrorCodes||(t.LSPErrorCodes={})).lspReservedErrorRangeStart=-32899,o.RequestFailed=-32803,o.ServerCancelled=-32802,o.ContentModified=-32801,o.RequestCancelled=-32800,o.lspReservedErrorRangeEnd=-32800},73767:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const i=n(74389);t.createProtocolConnection=function(e,t,n,r){return i.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,i.createMessageConnection)(e,t,n,r)}},66140:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolNotificationType=t.ProtocolNotificationType0=t.ProtocolRequestType=t.ProtocolRequestType0=t.RegistrationType=void 0;const i=n(74389);t.RegistrationType=class{constructor(e){this.method=e}};class r extends i.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=r;class o extends i.RequestType{constructor(e){super(e,i.ParameterStructures.byName)}}t.ProtocolRequestType=o;class s extends i.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=s;class a extends i.NotificationType{constructor(e){super(e,i.ParameterStructures.byName)}}t.ProtocolNotificationType=a},82918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.CallHierarchyPrepareRequest=void 0;const i=n(66140);var r,o,s;(s=t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={})).method="textDocument/prepareCallHierarchy",s.type=new i.ProtocolRequestType(s.method),(o=t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={})).method="callHierarchy/incomingCalls",o.type=new i.ProtocolRequestType(o.method),(r=t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={})).method="callHierarchy/outgoingCalls",r.type=new i.ProtocolRequestType(r.method)},79891:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPresentationRequest=t.DocumentColorRequest=void 0;const i=n(66140);var r;(r=t.DocumentColorRequest||(t.DocumentColorRequest={})).method="textDocument/documentColor",r.type=new i.ProtocolRequestType(r.method),(t.ColorPresentationRequest||(t.ColorPresentationRequest={})).type=new i.ProtocolRequestType("textDocument/colorPresentation")},85934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationRequest=void 0;const i=n(66140);(t.ConfigurationRequest||(t.ConfigurationRequest={})).type=new i.ProtocolRequestType("workspace/configuration")},40764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeclarationRequest=void 0;const i=n(66140);var r;(r=t.DeclarationRequest||(t.DeclarationRequest={})).method="textDocument/declaration",r.type=new i.ProtocolRequestType(r.method)},79824:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=void 0;const i=n(74389),r=n(69533),o=n(66140);var s,a,c,l;(t.DiagnosticServerCancellationData||(t.DiagnosticServerCancellationData={})).is=function(e){const t=e;return t&&r.boolean(t.retriggerRequest)},(l=t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={})).Full="full",l.Unchanged="unchanged",(c=t.DocumentDiagnosticRequest||(t.DocumentDiagnosticRequest={})).method="textDocument/diagnostic",c.type=new o.ProtocolRequestType(c.method),c.partialResult=new i.ProgressType,(a=t.WorkspaceDiagnosticRequest||(t.WorkspaceDiagnosticRequest={})).method="workspace/diagnostic",a.type=new o.ProtocolRequestType(a.method),a.partialResult=new i.ProgressType,(s=t.DiagnosticRefreshRequest||(t.DiagnosticRefreshRequest={})).method="workspace/diagnostic/refresh",s.type=new o.ProtocolRequestType0(s.method)},37846:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.DidRenameFilesNotification=t.WillRenameFilesRequest=t.DidCreateFilesNotification=t.WillCreateFilesRequest=t.FileOperationPatternKind=void 0;const i=n(66140);var r,o,s,a,c,l,d;(d=t.FileOperationPatternKind||(t.FileOperationPatternKind={})).file="file",d.folder="folder",(l=t.WillCreateFilesRequest||(t.WillCreateFilesRequest={})).method="workspace/willCreateFiles",l.type=new i.ProtocolRequestType(l.method),(c=t.DidCreateFilesNotification||(t.DidCreateFilesNotification={})).method="workspace/didCreateFiles",c.type=new i.ProtocolNotificationType(c.method),(a=t.WillRenameFilesRequest||(t.WillRenameFilesRequest={})).method="workspace/willRenameFiles",a.type=new i.ProtocolRequestType(a.method),(s=t.DidRenameFilesNotification||(t.DidRenameFilesNotification={})).method="workspace/didRenameFiles",s.type=new i.ProtocolNotificationType(s.method),(o=t.DidDeleteFilesNotification||(t.DidDeleteFilesNotification={})).method="workspace/didDeleteFiles",o.type=new i.ProtocolNotificationType(o.method),(r=t.WillDeleteFilesRequest||(t.WillDeleteFilesRequest={})).method="workspace/willDeleteFiles",r.type=new i.ProtocolRequestType(r.method)},13394:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldingRangeRequest=void 0;const i=n(66140);var r;(r=t.FoldingRangeRequest||(t.FoldingRangeRequest={})).method="textDocument/foldingRange",r.type=new i.ProtocolRequestType(r.method)},82122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationRequest=void 0;const i=n(66140);var r;(r=t.ImplementationRequest||(t.ImplementationRequest={})).method="textDocument/implementation",r.type=new i.ProtocolRequestType(r.method)},29999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=void 0;const i=n(66140);var r,o,s;(s=t.InlayHintRequest||(t.InlayHintRequest={})).method="textDocument/inlayHint",s.type=new i.ProtocolRequestType(s.method),(o=t.InlayHintResolveRequest||(t.InlayHintResolveRequest={})).method="inlayHint/resolve",o.type=new i.ProtocolRequestType(o.method),(r=t.InlayHintRefreshRequest||(t.InlayHintRefreshRequest={})).method="workspace/inlayHint/refresh",r.type=new i.ProtocolRequestType0(r.method)},55246:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValueRefreshRequest=t.InlineValueRequest=void 0;const i=n(66140);var r,o;(o=t.InlineValueRequest||(t.InlineValueRequest={})).method="textDocument/inlineValue",o.type=new i.ProtocolRequestType(o.method),(r=t.InlineValueRefreshRequest||(t.InlineValueRefreshRequest={})).method="workspace/inlineValue/refresh",r.type=new i.ProtocolRequestType0(r.method)},10542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceSymbolRequest=t.CodeActionResolveRequest=t.CodeActionRequest=t.DocumentSymbolRequest=t.DocumentHighlightRequest=t.ReferencesRequest=t.DefinitionRequest=t.SignatureHelpRequest=t.SignatureHelpTriggerKind=t.HoverRequest=t.CompletionResolveRequest=t.CompletionRequest=t.CompletionTriggerKind=t.PublishDiagnosticsNotification=t.WatchKind=t.RelativePattern=t.FileChangeType=t.DidChangeWatchedFilesNotification=t.WillSaveTextDocumentWaitUntilRequest=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidSaveTextDocumentNotification=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.TextDocumentContentChangeEvent=t.DidOpenTextDocumentNotification=t.TextDocumentSyncKind=t.TelemetryEventNotification=t.LogMessageNotification=t.ShowMessageRequest=t.ShowMessageNotification=t.MessageType=t.DidChangeConfigurationNotification=t.ExitNotification=t.ShutdownRequest=t.InitializedNotification=t.InitializeErrorCodes=t.InitializeRequest=t.WorkDoneProgressOptions=t.TextDocumentRegistrationOptions=t.StaticRegistrationOptions=t.PositionEncodingKind=t.FailureHandlingKind=t.ResourceOperationKind=t.UnregistrationRequest=t.RegistrationRequest=t.DocumentSelector=t.NotebookCellTextDocumentFilter=t.NotebookDocumentFilter=t.TextDocumentFilter=void 0,t.TypeHierarchySubtypesRequest=t.TypeHierarchyPrepareRequest=t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.WillRenameFilesRequest=t.DidRenameFilesNotification=t.WillCreateFilesRequest=t.DidCreateFilesNotification=t.FileOperationPatternKind=t.LinkedEditingRangeRequest=t.ShowDocumentRequest=t.SemanticTokensRegistrationType=t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.TokenFormat=t.CallHierarchyPrepareRequest=t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=t.SelectionRangeRequest=t.DeclarationRequest=t.FoldingRangeRequest=t.ColorPresentationRequest=t.DocumentColorRequest=t.ConfigurationRequest=t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=t.TypeDefinitionRequest=t.ImplementationRequest=t.ApplyWorkspaceEditRequest=t.ExecuteCommandRequest=t.PrepareRenameRequest=t.RenameRequest=t.PrepareSupportDefaultBehavior=t.DocumentOnTypeFormattingRequest=t.DocumentRangeFormattingRequest=t.DocumentFormattingRequest=t.DocumentLinkResolveRequest=t.DocumentLinkRequest=t.CodeLensRefreshRequest=t.CodeLensResolveRequest=t.CodeLensRequest=t.WorkspaceSymbolResolveRequest=void 0,t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=t.InlineValueRefreshRequest=t.InlineValueRequest=t.TypeHierarchySupertypesRequest=void 0;const i=n(66140),r=n(91674),o=n(69533),s=n(82122);Object.defineProperty(t,"ImplementationRequest",{enumerable:!0,get:function(){return s.ImplementationRequest}});const a=n(71589);Object.defineProperty(t,"TypeDefinitionRequest",{enumerable:!0,get:function(){return a.TypeDefinitionRequest}});const c=n(98744);Object.defineProperty(t,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return c.WorkspaceFoldersRequest}}),Object.defineProperty(t,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return c.DidChangeWorkspaceFoldersNotification}});const l=n(85934);Object.defineProperty(t,"ConfigurationRequest",{enumerable:!0,get:function(){return l.ConfigurationRequest}});const d=n(79891);Object.defineProperty(t,"DocumentColorRequest",{enumerable:!0,get:function(){return d.DocumentColorRequest}}),Object.defineProperty(t,"ColorPresentationRequest",{enumerable:!0,get:function(){return d.ColorPresentationRequest}});const u=n(13394);Object.defineProperty(t,"FoldingRangeRequest",{enumerable:!0,get:function(){return u.FoldingRangeRequest}});const p=n(40764);Object.defineProperty(t,"DeclarationRequest",{enumerable:!0,get:function(){return p.DeclarationRequest}});const h=n(5206);Object.defineProperty(t,"SelectionRangeRequest",{enumerable:!0,get:function(){return h.SelectionRangeRequest}});const f=n(21862);Object.defineProperty(t,"WorkDoneProgress",{enumerable:!0,get:function(){return f.WorkDoneProgress}}),Object.defineProperty(t,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return f.WorkDoneProgressCreateRequest}}),Object.defineProperty(t,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return f.WorkDoneProgressCancelNotification}});const m=n(82918);Object.defineProperty(t,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return m.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(t,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return m.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(t,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return m.CallHierarchyPrepareRequest}});const g=n(39434);Object.defineProperty(t,"TokenFormat",{enumerable:!0,get:function(){return g.TokenFormat}}),Object.defineProperty(t,"SemanticTokensRequest",{enumerable:!0,get:function(){return g.SemanticTokensRequest}}),Object.defineProperty(t,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return g.SemanticTokensDeltaRequest}}),Object.defineProperty(t,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return g.SemanticTokensRangeRequest}}),Object.defineProperty(t,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return g.SemanticTokensRefreshRequest}}),Object.defineProperty(t,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return g.SemanticTokensRegistrationType}});const v=n(75726);Object.defineProperty(t,"ShowDocumentRequest",{enumerable:!0,get:function(){return v.ShowDocumentRequest}});const y=n(26305);Object.defineProperty(t,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return y.LinkedEditingRangeRequest}});const b=n(37846);Object.defineProperty(t,"FileOperationPatternKind",{enumerable:!0,get:function(){return b.FileOperationPatternKind}}),Object.defineProperty(t,"DidCreateFilesNotification",{enumerable:!0,get:function(){return b.DidCreateFilesNotification}}),Object.defineProperty(t,"WillCreateFilesRequest",{enumerable:!0,get:function(){return b.WillCreateFilesRequest}}),Object.defineProperty(t,"DidRenameFilesNotification",{enumerable:!0,get:function(){return b.DidRenameFilesNotification}}),Object.defineProperty(t,"WillRenameFilesRequest",{enumerable:!0,get:function(){return b.WillRenameFilesRequest}}),Object.defineProperty(t,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return b.DidDeleteFilesNotification}}),Object.defineProperty(t,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return b.WillDeleteFilesRequest}});const w=n(73443);Object.defineProperty(t,"UniquenessLevel",{enumerable:!0,get:function(){return w.UniquenessLevel}}),Object.defineProperty(t,"MonikerKind",{enumerable:!0,get:function(){return w.MonikerKind}}),Object.defineProperty(t,"MonikerRequest",{enumerable:!0,get:function(){return w.MonikerRequest}});const _=n(83693);Object.defineProperty(t,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return _.TypeHierarchyPrepareRequest}}),Object.defineProperty(t,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return _.TypeHierarchySubtypesRequest}}),Object.defineProperty(t,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return _.TypeHierarchySupertypesRequest}});const S=n(55246);Object.defineProperty(t,"InlineValueRequest",{enumerable:!0,get:function(){return S.InlineValueRequest}}),Object.defineProperty(t,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return S.InlineValueRefreshRequest}});const C=n(29999);Object.defineProperty(t,"InlayHintRequest",{enumerable:!0,get:function(){return C.InlayHintRequest}}),Object.defineProperty(t,"InlayHintResolveRequest",{enumerable:!0,get:function(){return C.InlayHintResolveRequest}}),Object.defineProperty(t,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return C.InlayHintRefreshRequest}});const k=n(79824);Object.defineProperty(t,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return k.DiagnosticServerCancellationData}}),Object.defineProperty(t,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return k.DocumentDiagnosticReportKind}}),Object.defineProperty(t,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return k.DocumentDiagnosticRequest}}),Object.defineProperty(t,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return k.WorkspaceDiagnosticRequest}}),Object.defineProperty(t,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return k.DiagnosticRefreshRequest}});const E=n(47169);var x,T,P,I,D,R,O,A,N,M,L,j,F,U,q,K,V,W,$,B,H,z,J,G,Y,Q,X,Z,ee,te,ne,ie,re,oe,se,ae,ce,le,de,ue,pe,he,fe,me;Object.defineProperty(t,"NotebookCellKind",{enumerable:!0,get:function(){return E.NotebookCellKind}}),Object.defineProperty(t,"ExecutionSummary",{enumerable:!0,get:function(){return E.ExecutionSummary}}),Object.defineProperty(t,"NotebookCell",{enumerable:!0,get:function(){return E.NotebookCell}}),Object.defineProperty(t,"NotebookDocument",{enumerable:!0,get:function(){return E.NotebookDocument}}),Object.defineProperty(t,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return E.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(t,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return E.DidOpenNotebookDocumentNotification}}),Object.defineProperty(t,"NotebookCellArrayChange",{enumerable:!0,get:function(){return E.NotebookCellArrayChange}}),Object.defineProperty(t,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return E.DidChangeNotebookDocumentNotification}}),Object.defineProperty(t,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return E.DidSaveNotebookDocumentNotification}}),Object.defineProperty(t,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return E.DidCloseNotebookDocumentNotification}}),function(e){e.is=function(e){const t=e;return o.string(t.language)||o.string(t.scheme)||o.string(t.pattern)}}(x=t.TextDocumentFilter||(t.TextDocumentFilter={})),function(e){e.is=function(e){const t=e;return o.objectLiteral(t)&&(o.string(t.notebookType)||o.string(t.scheme)||o.string(t.pattern))}}(T=t.NotebookDocumentFilter||(t.NotebookDocumentFilter={})),function(e){e.is=function(e){const t=e;return o.objectLiteral(t)&&(o.string(t.notebook)||T.is(t.notebook))&&(void 0===t.language||o.string(t.language))}}(P=t.NotebookCellTextDocumentFilter||(t.NotebookCellTextDocumentFilter={})),function(e){e.is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!o.string(t)&&!x.is(t)&&!P.is(t))return!1;return!0}}(I=t.DocumentSelector||(t.DocumentSelector={})),(t.RegistrationRequest||(t.RegistrationRequest={})).type=new i.ProtocolRequestType("client/registerCapability"),(t.UnregistrationRequest||(t.UnregistrationRequest={})).type=new i.ProtocolRequestType("client/unregisterCapability"),(me=t.ResourceOperationKind||(t.ResourceOperationKind={})).Create="create",me.Rename="rename",me.Delete="delete",(fe=t.FailureHandlingKind||(t.FailureHandlingKind={})).Abort="abort",fe.Transactional="transactional",fe.TextOnlyTransactional="textOnlyTransactional",fe.Undo="undo",(he=t.PositionEncodingKind||(t.PositionEncodingKind={})).UTF8="utf-8",he.UTF16="utf-16",he.UTF32="utf-32",(t.StaticRegistrationOptions||(t.StaticRegistrationOptions={})).hasId=function(e){const t=e;return t&&o.string(t.id)&&t.id.length>0},(t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={})).is=function(e){const t=e;return t&&(null===t.documentSelector||I.is(t.documentSelector))},(pe=t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={})).is=function(e){const t=e;return o.objectLiteral(t)&&(void 0===t.workDoneProgress||o.boolean(t.workDoneProgress))},pe.hasWorkDoneProgress=function(e){const t=e;return t&&o.boolean(t.workDoneProgress)},(t.InitializeRequest||(t.InitializeRequest={})).type=new i.ProtocolRequestType("initialize"),(t.InitializeErrorCodes||(t.InitializeErrorCodes={})).unknownProtocolVersion=1,(t.InitializedNotification||(t.InitializedNotification={})).type=new i.ProtocolNotificationType("initialized"),(t.ShutdownRequest||(t.ShutdownRequest={})).type=new i.ProtocolRequestType0("shutdown"),(t.ExitNotification||(t.ExitNotification={})).type=new i.ProtocolNotificationType0("exit"),(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})).type=new i.ProtocolNotificationType("workspace/didChangeConfiguration"),(ue=t.MessageType||(t.MessageType={})).Error=1,ue.Warning=2,ue.Info=3,ue.Log=4,(t.ShowMessageNotification||(t.ShowMessageNotification={})).type=new i.ProtocolNotificationType("window/showMessage"),(t.ShowMessageRequest||(t.ShowMessageRequest={})).type=new i.ProtocolRequestType("window/showMessageRequest"),(t.LogMessageNotification||(t.LogMessageNotification={})).type=new i.ProtocolNotificationType("window/logMessage"),(t.TelemetryEventNotification||(t.TelemetryEventNotification={})).type=new i.ProtocolNotificationType("telemetry/event"),(de=t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})).None=0,de.Full=1,de.Incremental=2,(le=t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})).method="textDocument/didOpen",le.type=new i.ProtocolNotificationType(le.method),(ce=t.TextDocumentContentChangeEvent||(t.TextDocumentContentChangeEvent={})).isIncremental=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},ce.isFull=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},(ae=t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})).method="textDocument/didChange",ae.type=new i.ProtocolNotificationType(ae.method),(se=t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})).method="textDocument/didClose",se.type=new i.ProtocolNotificationType(se.method),(oe=t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})).method="textDocument/didSave",oe.type=new i.ProtocolNotificationType(oe.method),(re=t.TextDocumentSaveReason||(t.TextDocumentSaveReason={})).Manual=1,re.AfterDelay=2,re.FocusOut=3,(ie=t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})).method="textDocument/willSave",ie.type=new i.ProtocolNotificationType(ie.method),(ne=t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})).method="textDocument/willSaveWaitUntil",ne.type=new i.ProtocolRequestType(ne.method),(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})).type=new i.ProtocolNotificationType("workspace/didChangeWatchedFiles"),(te=t.FileChangeType||(t.FileChangeType={})).Created=1,te.Changed=2,te.Deleted=3,(t.RelativePattern||(t.RelativePattern={})).is=function(e){const t=e;return o.objectLiteral(t)&&(r.URI.is(t.baseUri)||r.WorkspaceFolder.is(t.baseUri))&&o.string(t.pattern)},(ee=t.WatchKind||(t.WatchKind={})).Create=1,ee.Change=2,ee.Delete=4,(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})).type=new i.ProtocolNotificationType("textDocument/publishDiagnostics"),(Z=t.CompletionTriggerKind||(t.CompletionTriggerKind={})).Invoked=1,Z.TriggerCharacter=2,Z.TriggerForIncompleteCompletions=3,(X=t.CompletionRequest||(t.CompletionRequest={})).method="textDocument/completion",X.type=new i.ProtocolRequestType(X.method),(Q=t.CompletionResolveRequest||(t.CompletionResolveRequest={})).method="completionItem/resolve",Q.type=new i.ProtocolRequestType(Q.method),(Y=t.HoverRequest||(t.HoverRequest={})).method="textDocument/hover",Y.type=new i.ProtocolRequestType(Y.method),(G=t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={})).Invoked=1,G.TriggerCharacter=2,G.ContentChange=3,(J=t.SignatureHelpRequest||(t.SignatureHelpRequest={})).method="textDocument/signatureHelp",J.type=new i.ProtocolRequestType(J.method),(z=t.DefinitionRequest||(t.DefinitionRequest={})).method="textDocument/definition",z.type=new i.ProtocolRequestType(z.method),(H=t.ReferencesRequest||(t.ReferencesRequest={})).method="textDocument/references",H.type=new i.ProtocolRequestType(H.method),(B=t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})).method="textDocument/documentHighlight",B.type=new i.ProtocolRequestType(B.method),($=t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})).method="textDocument/documentSymbol",$.type=new i.ProtocolRequestType($.method),(W=t.CodeActionRequest||(t.CodeActionRequest={})).method="textDocument/codeAction",W.type=new i.ProtocolRequestType(W.method),(V=t.CodeActionResolveRequest||(t.CodeActionResolveRequest={})).method="codeAction/resolve",V.type=new i.ProtocolRequestType(V.method),(K=t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})).method="workspace/symbol",K.type=new i.ProtocolRequestType(K.method),(q=t.WorkspaceSymbolResolveRequest||(t.WorkspaceSymbolResolveRequest={})).method="workspaceSymbol/resolve",q.type=new i.ProtocolRequestType(q.method),(U=t.CodeLensRequest||(t.CodeLensRequest={})).method="textDocument/codeLens",U.type=new i.ProtocolRequestType(U.method),(F=t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})).method="codeLens/resolve",F.type=new i.ProtocolRequestType(F.method),(j=t.CodeLensRefreshRequest||(t.CodeLensRefreshRequest={})).method="workspace/codeLens/refresh",j.type=new i.ProtocolRequestType0(j.method),(L=t.DocumentLinkRequest||(t.DocumentLinkRequest={})).method="textDocument/documentLink",L.type=new i.ProtocolRequestType(L.method),(M=t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})).method="documentLink/resolve",M.type=new i.ProtocolRequestType(M.method),(N=t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})).method="textDocument/formatting",N.type=new i.ProtocolRequestType(N.method),(A=t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})).method="textDocument/rangeFormatting",A.type=new i.ProtocolRequestType(A.method),(O=t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})).method="textDocument/onTypeFormatting",O.type=new i.ProtocolRequestType(O.method),(t.PrepareSupportDefaultBehavior||(t.PrepareSupportDefaultBehavior={})).Identifier=1,(R=t.RenameRequest||(t.RenameRequest={})).method="textDocument/rename",R.type=new i.ProtocolRequestType(R.method),(D=t.PrepareRenameRequest||(t.PrepareRenameRequest={})).method="textDocument/prepareRename",D.type=new i.ProtocolRequestType(D.method),(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})).type=new i.ProtocolRequestType("workspace/executeCommand"),(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={})).type=new i.ProtocolRequestType("workspace/applyEdit")},26305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingRangeRequest=void 0;const i=n(66140);var r;(r=t.LinkedEditingRangeRequest||(t.LinkedEditingRangeRequest={})).method="textDocument/linkedEditingRange",r.type=new i.ProtocolRequestType(r.method)},73443:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=void 0;const i=n(66140);var r,o,s;(s=t.UniquenessLevel||(t.UniquenessLevel={})).document="document",s.project="project",s.group="group",s.scheme="scheme",s.global="global",(o=t.MonikerKind||(t.MonikerKind={})).$import="import",o.$export="export",o.local="local",(r=t.MonikerRequest||(t.MonikerRequest={})).method="textDocument/moniker",r.type=new i.ProtocolRequestType(r.method)},47169:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=void 0;const i=n(91674),r=n(69533),o=n(66140);var s,a,c,l,d,u,p,h,f,m;!function(e){e.Markup=1,e.Code=2,e.is=function(e){return 1===e||2===e}}(s=t.NotebookCellKind||(t.NotebookCellKind={})),function(e){e.create=function(e,t){const n={executionOrder:e};return!0!==t&&!1!==t||(n.success=t),n},e.is=function(e){const t=e;return r.objectLiteral(t)&&i.uinteger.is(t.executionOrder)&&(void 0===t.success||r.boolean(t.success))},e.equals=function(e,t){return e===t||null!=e&&null!=t&&e.executionOrder===t.executionOrder&&e.success===t.success}}(a=t.ExecutionSummary||(t.ExecutionSummary={})),function(e){function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(typeof e!=typeof n)return!1;if("object"!=typeof e)return!1;const i=Array.isArray(e),o=Array.isArray(n);if(i!==o)return!1;if(i&&o){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(!t(e[i],n[i]))return!1}if(r.objectLiteral(e)&&r.objectLiteral(n)){const i=Object.keys(e),r=Object.keys(n);if(i.length!==r.length)return!1;if(i.sort(),r.sort(),!t(i,r))return!1;for(let r=0;r<i.length;r++){const o=i[r];if(!t(e[o],n[o]))return!1}}return!0}e.create=function(e,t){return{kind:e,document:t}},e.is=function(e){const t=e;return r.objectLiteral(t)&&s.is(t.kind)&&i.DocumentUri.is(t.document)&&(void 0===t.metadata||r.objectLiteral(t.metadata))},e.diff=function(e,n){const i=new Set;return e.document!==n.document&&i.add("document"),e.kind!==n.kind&&i.add("kind"),e.executionSummary!==n.executionSummary&&i.add("executionSummary"),void 0===e.metadata&&void 0===n.metadata||t(e.metadata,n.metadata)||i.add("metadata"),void 0===e.executionSummary&&void 0===n.executionSummary||a.equals(e.executionSummary,n.executionSummary)||i.add("executionSummary"),i}}(c=t.NotebookCell||(t.NotebookCell={})),(m=t.NotebookDocument||(t.NotebookDocument={})).create=function(e,t,n,i){return{uri:e,notebookType:t,version:n,cells:i}},m.is=function(e){const t=e;return r.objectLiteral(t)&&r.string(t.uri)&&i.integer.is(t.version)&&r.typedArray(t.cells,c.is)},(f=t.NotebookDocumentSyncRegistrationType||(t.NotebookDocumentSyncRegistrationType={})).method="notebookDocument/sync",f.type=new o.RegistrationType(f.method),(h=t.DidOpenNotebookDocumentNotification||(t.DidOpenNotebookDocumentNotification={})).method="notebookDocument/didOpen",h.type=new o.ProtocolNotificationType(h.method),(p=t.NotebookCellArrayChange||(t.NotebookCellArrayChange={})).is=function(e){const t=e;return r.objectLiteral(t)&&i.uinteger.is(t.start)&&i.uinteger.is(t.deleteCount)&&(void 0===t.cells||r.typedArray(t.cells,c.is))},p.create=function(e,t,n){const i={start:e,deleteCount:t};return void 0!==n&&(i.cells=n),i},(u=t.DidChangeNotebookDocumentNotification||(t.DidChangeNotebookDocumentNotification={})).method="notebookDocument/didChange",u.type=new o.ProtocolNotificationType(u.method),(d=t.DidSaveNotebookDocumentNotification||(t.DidSaveNotebookDocumentNotification={})).method="notebookDocument/didSave",d.type=new o.ProtocolNotificationType(d.method),(l=t.DidCloseNotebookDocumentNotification||(t.DidCloseNotebookDocumentNotification={})).method="notebookDocument/didClose",l.type=new o.ProtocolNotificationType(l.method)},21862:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=void 0;const i=n(74389),r=n(66140);var o,s,a;(a=t.WorkDoneProgress||(t.WorkDoneProgress={})).type=new i.ProgressType,a.is=function(e){return e===a.type},(s=t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={})).method="window/workDoneProgress/create",s.type=new r.ProtocolRequestType(s.method),(o=t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={})).method="window/workDoneProgress/cancel",o.type=new r.ProtocolNotificationType(o.method)},5206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRangeRequest=void 0;const i=n(66140);var r;(r=t.SelectionRangeRequest||(t.SelectionRangeRequest={})).method="textDocument/selectionRange",r.type=new i.ProtocolRequestType(r.method)},39434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.SemanticTokensRegistrationType=t.TokenFormat=void 0;const i=n(66140);var r,o,s,a,c;(t.TokenFormat||(t.TokenFormat={})).Relative="relative",(c=t.SemanticTokensRegistrationType||(t.SemanticTokensRegistrationType={})).method="textDocument/semanticTokens",c.type=new i.RegistrationType(c.method),(a=t.SemanticTokensRequest||(t.SemanticTokensRequest={})).method="textDocument/semanticTokens/full",a.type=new i.ProtocolRequestType(a.method),(s=t.SemanticTokensDeltaRequest||(t.SemanticTokensDeltaRequest={})).method="textDocument/semanticTokens/full/delta",s.type=new i.ProtocolRequestType(s.method),(o=t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={})).method="textDocument/semanticTokens/range",o.type=new i.ProtocolRequestType(o.method),(r=t.SemanticTokensRefreshRequest||(t.SemanticTokensRefreshRequest={})).method="workspace/semanticTokens/refresh",r.type=new i.ProtocolRequestType0(r.method)},75726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDocumentRequest=void 0;const i=n(66140);var r;(r=t.ShowDocumentRequest||(t.ShowDocumentRequest={})).method="window/showDocument",r.type=new i.ProtocolRequestType(r.method)},71589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinitionRequest=void 0;const i=n(66140);var r;(r=t.TypeDefinitionRequest||(t.TypeDefinitionRequest={})).method="textDocument/typeDefinition",r.type=new i.ProtocolRequestType(r.method)},83693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHierarchySubtypesRequest=t.TypeHierarchySupertypesRequest=t.TypeHierarchyPrepareRequest=void 0;const i=n(66140);var r,o,s;(s=t.TypeHierarchyPrepareRequest||(t.TypeHierarchyPrepareRequest={})).method="textDocument/prepareTypeHierarchy",s.type=new i.ProtocolRequestType(s.method),(o=t.TypeHierarchySupertypesRequest||(t.TypeHierarchySupertypesRequest={})).method="typeHierarchy/supertypes",o.type=new i.ProtocolRequestType(o.method),(r=t.TypeHierarchySubtypesRequest||(t.TypeHierarchySubtypesRequest={})).method="typeHierarchy/subtypes",r.type=new i.ProtocolRequestType(r.method)},98744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=void 0;const i=n(66140);(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})).type=new i.ProtocolRequestType0("workspace/workspaceFolders"),(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={})).type=new i.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")},69533:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.objectLiteral=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=i,t.stringArray=function(e){return i(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.objectLiteral=function(e){return null!==e&&"object"==typeof e}},40273:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const o=n(95028);r(n(95028),t),r(n(51661),t),t.createProtocolConnection=function(e,t,n,i){return(0,o.createMessageConnection)(e,t,n,i)}},96560:(e,t,n)=>{"use strict";e.exports=n(40273)},91674:(e,t,n)=>{"use strict";var i,r,o,s,a,c,l,d,u,p,h,f,m,g,v,y,b,w,_,S,C,k,E,x,T,P,I,D;n.r(t),n.d(t,{AnnotatedTextEdit:()=>E,ChangeAnnotation:()=>C,ChangeAnnotationIdentifier:()=>k,CodeAction:()=>oe,CodeActionContext:()=>re,CodeActionKind:()=>ne,CodeActionTriggerKind:()=>ie,CodeDescription:()=>b,CodeLens:()=>se,Color:()=>u,ColorInformation:()=>p,ColorPresentation:()=>h,Command:()=>_,CompletionItem:()=>W,CompletionItemKind:()=>j,CompletionItemLabelDetails:()=>V,CompletionItemTag:()=>U,CompletionList:()=>$,CreateFile:()=>T,DeleteFile:()=>I,Diagnostic:()=>w,DiagnosticRelatedInformation:()=>g,DiagnosticSeverity:()=>v,DiagnosticTag:()=>y,DocumentHighlight:()=>Y,DocumentHighlightKind:()=>G,DocumentLink:()=>ce,DocumentSymbol:()=>te,DocumentUri:()=>i,EOL:()=>Ee,FoldingRange:()=>m,FoldingRangeKind:()=>f,FormattingOptions:()=>ae,Hover:()=>H,InlayHint:()=>be,InlayHintKind:()=>ve,InlayHintLabelPart:()=>ye,InlineValueContext:()=>ge,InlineValueEvaluatableExpression:()=>me,InlineValueText:()=>he,InlineValueVariableLookup:()=>fe,InsertReplaceEdit:()=>q,InsertTextFormat:()=>F,InsertTextMode:()=>K,Location:()=>l,LocationLink:()=>d,MarkedString:()=>B,MarkupContent:()=>L,MarkupKind:()=>M,OptionalVersionedTextDocumentIdentifier:()=>A,ParameterInformation:()=>z,Position:()=>a,Range:()=>c,RenameFile:()=>P,SelectionRange:()=>le,SemanticTokenModifiers:()=>ue,SemanticTokenTypes:()=>de,SemanticTokens:()=>pe,SignatureInformation:()=>J,SymbolInformation:()=>Z,SymbolKind:()=>Q,SymbolTag:()=>X,TextDocument:()=>ke,TextDocumentEdit:()=>x,TextDocumentIdentifier:()=>R,TextDocumentItem:()=>N,TextEdit:()=>S,URI:()=>r,VersionedTextDocumentIdentifier:()=>O,WorkspaceChange:()=>Ce,WorkspaceEdit:()=>D,WorkspaceFolder:()=>we,WorkspaceSymbol:()=>ee,integer:()=>o,uinteger:()=>s}),function(e){e.is=function(e){return"string"==typeof e}}(i||(i={})),function(e){e.is=function(e){return"string"==typeof e}}(r||(r={})),function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(o||(o={})),function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(s||(s={})),function(e){e.create=function(e,t){return e===Number.MAX_VALUE&&(e=s.MAX_VALUE),t===Number.MAX_VALUE&&(t=s.MAX_VALUE),{line:e,character:t}},e.is=function(e){var t=e;return xe.objectLiteral(t)&&xe.uinteger(t.line)&&xe.uinteger(t.character)}}(a||(a={})),function(e){e.create=function(e,t,n,i){if(xe.uinteger(e)&&xe.uinteger(t)&&xe.uinteger(n)&&xe.uinteger(i))return{start:a.create(e,t),end:a.create(n,i)};if(a.is(e)&&a.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments[".concat(e,", ").concat(t,", ").concat(n,", ").concat(i,"]"))},e.is=function(e){var t=e;return xe.objectLiteral(t)&&a.is(t.start)&&a.is(t.end)}}(c||(c={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return xe.defined(t)&&c.is(t.range)&&(xe.string(t.uri)||xe.undefined(t.uri))}}(l||(l={})),function(e){e.create=function(e,t,n,i){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:i}},e.is=function(e){var t=e;return xe.defined(t)&&c.is(t.targetRange)&&xe.string(t.targetUri)&&c.is(t.targetSelectionRange)&&(c.is(t.originSelectionRange)||xe.undefined(t.originSelectionRange))}}(d||(d={})),function(e){e.create=function(e,t,n,i){return{red:e,green:t,blue:n,alpha:i}},e.is=function(e){var t=e;return xe.objectLiteral(t)&&xe.numberRange(t.red,0,1)&&xe.numberRange(t.green,0,1)&&xe.numberRange(t.blue,0,1)&&xe.numberRange(t.alpha,0,1)}}(u||(u={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return xe.objectLiteral(t)&&c.is(t.range)&&u.is(t.color)}}(p||(p={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return xe.objectLiteral(t)&&xe.string(t.label)&&(xe.undefined(t.textEdit)||S.is(t))&&(xe.undefined(t.additionalTextEdits)||xe.typedArray(t.additionalTextEdits,S.is))}}(h||(h={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(f||(f={})),function(e){e.create=function(e,t,n,i,r,o){var s={startLine:e,endLine:t};return xe.defined(n)&&(s.startCharacter=n),xe.defined(i)&&(s.endCharacter=i),xe.defined(r)&&(s.kind=r),xe.defined(o)&&(s.collapsedText=o),s},e.is=function(e){var t=e;return xe.objectLiteral(t)&&xe.uinteger(t.startLine)&&xe.uinteger(t.startLine)&&(xe.undefined(t.startCharacter)||xe.uinteger(t.startCharacter))&&(xe.undefined(t.endCharacter)||xe.uinteger(t.endCharacter))&&(xe.undefined(t.kind)||xe.string(t.kind))}}(m||(m={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return xe.defined(t)&&l.is(t.location)&&xe.string(t.message)}}(g||(g={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(v||(v={})),function(e){e.Unnecessary=1,e.Deprecated=2}(y||(y={})),function(e){e.is=function(e){var t=e;return xe.objectLiteral(t)&&xe.string(t.href)}}(b||(b={})),function(e){e.create=function(e,t,n,i,r,o){var s={range:e,message:t};return xe.defined(n)&&(s.severity=n),xe.defined(i)&&(s.code=i),xe.defined(r)&&(s.source=r),xe.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t,n=e;return xe.defined(n)&&c.is(n.range)&&xe.string(n.message)&&(xe.number(n.severity)||xe.undefined(n.severity))&&(xe.integer(n.code)||xe.string(n.code)||xe.undefined(n.code))&&(xe.undefined(n.codeDescription)||xe.string(null===(t=n.codeDescription)||void 0===t?void 0:t.href))&&(xe.string(n.source)||xe.undefined(n.source))&&(xe.undefined(n.relatedInformation)||xe.typedArray(n.relatedInformation,g.is))}}(w||(w={})),function(e){e.create=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r={title:e,command:t};return xe.defined(n)&&n.length>0&&(r.arguments=n),r},e.is=function(e){var t=e;return xe.defined(t)&&xe.string(t.title)&&xe.string(t.command)}}(_||(_={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return xe.objectLiteral(t)&&xe.string(t.newText)&&c.is(t.range)}}(S||(S={})),function(e){e.create=function(e,t,n){var i={label:e};return void 0!==t&&(i.needsConfirmation=t),void 0!==n&&(i.description=n),i},e.is=function(e){var t=e;return xe.objectLiteral(t)&&xe.string(t.label)&&(xe.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(xe.string(t.description)||void 0===t.description)}}(C||(C={})),function(e){e.is=function(e){var t=e;return xe.string(t)}}(k||(k={})),function(e){e.replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},e.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},e.del=function(e,t){return{range:e,newText:"",annotationId:t}},e.is=function(e){var t=e;return S.is(t)&&(C.is(t.annotationId)||k.is(t.annotationId))}}(E||(E={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return xe.defined(t)&&A.is(t.textDocument)&&Array.isArray(t.edits)}}(x||(x={})),function(e){e.create=function(e,t,n){var i={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(i.options=t),void 0!==n&&(i.annotationId=n),i},e.is=function(e){var t=e;return t&&"create"===t.kind&&xe.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||xe.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||xe.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||k.is(t.annotationId))}}(T||(T={})),function(e){e.create=function(e,t,n,i){var r={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(r.options=n),void 0!==i&&(r.annotationId=i),r},e.is=function(e){var t=e;return t&&"rename"===t.kind&&xe.string(t.oldUri)&&xe.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||xe.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||xe.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||k.is(t.annotationId))}}(P||(P={})),function(e){e.create=function(e,t,n){var i={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(i.options=t),void 0!==n&&(i.annotationId=n),i},e.is=function(e){var t=e;return t&&"delete"===t.kind&&xe.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||xe.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||xe.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||k.is(t.annotationId))}}(I||(I={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return xe.string(e.kind)?T.is(e)||P.is(e)||I.is(e):x.is(e)})))}}(D||(D={}));var R,O,A,N,M,L,j,F,U,q,K,V,W,$,B,H,z,J,G,Y,Q,X,Z,ee,te,ne,ie,re,oe,se,ae,ce,le,de,ue,pe,he,fe,me,ge,ve,ye,be,we,_e=function(){function e(e,t){this.edits=e,this.changeAnnotations=t}return e.prototype.insert=function(e,t,n){var i,r;if(void 0===n?i=S.insert(e,t):k.is(n)?(r=n,i=E.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(n),i=E.insert(e,t,r)),this.edits.push(i),void 0!==r)return r},e.prototype.replace=function(e,t,n){var i,r;if(void 0===n?i=S.replace(e,t):k.is(n)?(r=n,i=E.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(n),i=E.replace(e,t,r)),this.edits.push(i),void 0!==r)return r},e.prototype.delete=function(e,t){var n,i;if(void 0===t?n=S.del(e):k.is(t)?(i=t,n=E.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(t),n=E.del(e,i)),this.edits.push(n),void 0!==i)return i},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),Se=function(){function e(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(e,t){var n;if(k.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw new Error("Id ".concat(n," is already in use."));if(void 0===t)throw new Error("No annotation provided for id ".concat(n));return this._annotations[n]=t,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),Ce=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Se(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach((function(e){if(x.is(e)){var n=new _e(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=n}}))):e.changes&&Object.keys(e.changes).forEach((function(n){var i=new _e(e.changes[n]);t._textEditChanges[n]=i}))):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(e){if(A.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version};if(!(i=this._textEditChanges[t.uri])){var n={textDocument:t,edits:r=[]};this._workspaceEdit.documentChanges.push(n),i=new _e(r,this._changeAnnotations),this._textEditChanges[t.uri]=i}return i}if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var i;if(!(i=this._textEditChanges[e])){var r=[];this._workspaceEdit.changes[e]=r,i=new _e(r),this._textEditChanges[e]=i}return i},e.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new Se,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var i,r,o;if(C.is(t)||k.is(t)?i=t:n=t,void 0===i?r=T.create(e,n):(o=k.is(i)?i:this._changeAnnotations.manage(i),r=T.create(e,n,o)),this._workspaceEdit.documentChanges.push(r),void 0!==o)return o},e.prototype.renameFile=function(e,t,n,i){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,o,s;if(C.is(n)||k.is(n)?r=n:i=n,void 0===r?o=P.create(e,t,i):(s=k.is(r)?r:this._changeAnnotations.manage(r),o=P.create(e,t,i,s)),this._workspaceEdit.documentChanges.push(o),void 0!==s)return s},e.prototype.deleteFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var i,r,o;if(C.is(t)||k.is(t)?i=t:n=t,void 0===i?r=I.create(e,n):(o=k.is(i)?i:this._changeAnnotations.manage(i),r=I.create(e,n,o)),this._workspaceEdit.documentChanges.push(r),void 0!==o)return o},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return xe.defined(t)&&xe.string(t.uri)}}(R||(R={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return xe.defined(t)&&xe.string(t.uri)&&xe.integer(t.version)}}(O||(O={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return xe.defined(t)&&xe.string(t.uri)&&(null===t.version||xe.integer(t.version))}}(A||(A={})),function(e){e.create=function(e,t,n,i){return{uri:e,languageId:t,version:n,text:i}},e.is=function(e){var t=e;return xe.defined(t)&&xe.string(t.uri)&&xe.string(t.languageId)&&xe.integer(t.version)&&xe.string(t.text)}}(N||(N={})),function(e){e.PlainText="plaintext",e.Markdown="markdown",e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(M||(M={})),function(e){e.is=function(e){var t=e;return xe.objectLiteral(e)&&M.is(t.kind)&&xe.string(t.value)}}(L||(L={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(j||(j={})),function(e){e.PlainText=1,e.Snippet=2}(F||(F={})),function(e){e.Deprecated=1}(U||(U={})),function(e){e.create=function(e,t,n){return{newText:e,insert:t,replace:n}},e.is=function(e){var t=e;return t&&xe.string(t.newText)&&c.is(t.insert)&&c.is(t.replace)}}(q||(q={})),function(e){e.asIs=1,e.adjustIndentation=2}(K||(K={})),function(e){e.is=function(e){var t=e;return t&&(xe.string(t.detail)||void 0===t.detail)&&(xe.string(t.description)||void 0===t.description)}}(V||(V={})),function(e){e.create=function(e){return{label:e}}}(W||(W={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}($||($={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return xe.string(t)||xe.objectLiteral(t)&&xe.string(t.language)&&xe.string(t.value)}}(B||(B={})),function(e){e.is=function(e){var t=e;return!!t&&xe.objectLiteral(t)&&(L.is(t.contents)||B.is(t.contents)||xe.typedArray(t.contents,B.is))&&(void 0===e.range||c.is(e.range))}}(H||(H={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(z||(z={})),function(e){e.create=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r={label:e};return xe.defined(t)&&(r.documentation=t),xe.defined(n)?r.parameters=n:r.parameters=[],r}}(J||(J={})),function(e){e.Text=1,e.Read=2,e.Write=3}(G||(G={})),function(e){e.create=function(e,t){var n={range:e};return xe.number(t)&&(n.kind=t),n}}(Y||(Y={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(Q||(Q={})),function(e){e.Deprecated=1}(X||(X={})),function(e){e.create=function(e,t,n,i,r){var o={name:e,kind:t,location:{uri:i,range:n}};return r&&(o.containerName=r),o}}(Z||(Z={})),function(e){e.create=function(e,t,n,i){return void 0!==i?{name:e,kind:t,location:{uri:n,range:i}}:{name:e,kind:t,location:{uri:n}}}}(ee||(ee={})),function(e){e.create=function(e,t,n,i,r,o){var s={name:e,detail:t,kind:n,range:i,selectionRange:r};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&xe.string(t.name)&&xe.number(t.kind)&&c.is(t.range)&&c.is(t.selectionRange)&&(void 0===t.detail||xe.string(t.detail))&&(void 0===t.deprecated||xe.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}}(te||(te={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(ne||(ne={})),function(e){e.Invoked=1,e.Automatic=2}(ie||(ie={})),function(e){e.create=function(e,t,n){var i={diagnostics:e};return null!=t&&(i.only=t),null!=n&&(i.triggerKind=n),i},e.is=function(e){var t=e;return xe.defined(t)&&xe.typedArray(t.diagnostics,w.is)&&(void 0===t.only||xe.typedArray(t.only,xe.string))&&(void 0===t.triggerKind||t.triggerKind===ie.Invoked||t.triggerKind===ie.Automatic)}}(re||(re={})),function(e){e.create=function(e,t,n){var i={title:e},r=!0;return"string"==typeof t?(r=!1,i.kind=t):_.is(t)?i.command=t:i.edit=t,r&&void 0!==n&&(i.kind=n),i},e.is=function(e){var t=e;return t&&xe.string(t.title)&&(void 0===t.diagnostics||xe.typedArray(t.diagnostics,w.is))&&(void 0===t.kind||xe.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||_.is(t.command))&&(void 0===t.isPreferred||xe.boolean(t.isPreferred))&&(void 0===t.edit||D.is(t.edit))}}(oe||(oe={})),function(e){e.create=function(e,t){var n={range:e};return xe.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return xe.defined(t)&&c.is(t.range)&&(xe.undefined(t.command)||_.is(t.command))}}(se||(se={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return xe.defined(t)&&xe.uinteger(t.tabSize)&&xe.boolean(t.insertSpaces)}}(ae||(ae={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return xe.defined(t)&&c.is(t.range)&&(xe.undefined(t.target)||xe.string(t.target))}}(ce||(ce={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var n=t;return xe.objectLiteral(n)&&c.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(le||(le={})),function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"}(de||(de={})),function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"}(ue||(ue={})),function(e){e.is=function(e){var t=e;return xe.objectLiteral(t)&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])}}(pe||(pe={})),function(e){e.create=function(e,t){return{range:e,text:t}},e.is=function(e){var t=e;return null!=t&&c.is(t.range)&&xe.string(t.text)}}(he||(he={})),function(e){e.create=function(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}},e.is=function(e){var t=e;return null!=t&&c.is(t.range)&&xe.boolean(t.caseSensitiveLookup)&&(xe.string(t.variableName)||void 0===t.variableName)}}(fe||(fe={})),function(e){e.create=function(e,t){return{range:e,expression:t}},e.is=function(e){var t=e;return null!=t&&c.is(t.range)&&(xe.string(t.expression)||void 0===t.expression)}}(me||(me={})),function(e){e.create=function(e,t){return{frameId:e,stoppedLocation:t}},e.is=function(e){var t=e;return xe.defined(t)&&c.is(e.stoppedLocation)}}(ge||(ge={})),function(e){e.Type=1,e.Parameter=2,e.is=function(e){return 1===e||2===e}}(ve||(ve={})),function(e){e.create=function(e){return{value:e}},e.is=function(e){var t=e;return xe.objectLiteral(t)&&(void 0===t.tooltip||xe.string(t.tooltip)||L.is(t.tooltip))&&(void 0===t.location||l.is(t.location))&&(void 0===t.command||_.is(t.command))}}(ye||(ye={})),function(e){e.create=function(e,t,n){var i={position:e,label:t};return void 0!==n&&(i.kind=n),i},e.is=function(e){var t=e;return xe.objectLiteral(t)&&a.is(t.position)&&(xe.string(t.label)||xe.typedArray(t.label,ye.is))&&(void 0===t.kind||ve.is(t.kind))&&void 0===t.textEdits||xe.typedArray(t.textEdits,S.is)&&(void 0===t.tooltip||xe.string(t.tooltip)||L.is(t.tooltip))&&(void 0===t.paddingLeft||xe.boolean(t.paddingLeft))&&(void 0===t.paddingRight||xe.boolean(t.paddingRight))}}(be||(be={})),function(e){e.is=function(e){var t=e;return xe.objectLiteral(t)&&r.is(t.uri)&&xe.string(t.name)}}(we||(we={}));var ke,Ee=["\n","\r\n","\r"];!function(e){function t(e,n){if(e.length<=1)return e;var i=e.length/2|0,r=e.slice(0,i),o=e.slice(i);t(r,n),t(o,n);for(var s=0,a=0,c=0;s<r.length&&a<o.length;){var l=n(r[s],o[a]);e[c++]=l<=0?r[s++]:o[a++]}for(;s<r.length;)e[c++]=r[s++];for(;a<o.length;)e[c++]=o[a++];return e}e.create=function(e,t,n,i){return new Te(e,t,n,i)},e.is=function(e){var t=e;return!!(xe.defined(t)&&xe.string(t.uri)&&(xe.undefined(t.languageId)||xe.string(t.languageId))&&xe.uinteger(t.lineCount)&&xe.func(t.getText)&&xe.func(t.positionAt)&&xe.func(t.offsetAt))},e.applyEdits=function(e,n){for(var i=e.getText(),r=t(n,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),o=i.length,s=r.length-1;s>=0;s--){var a=r[s],c=e.offsetAt(a.range.start),l=e.offsetAt(a.range.end);if(!(l<=o))throw new Error("Overlapping edit");i=i.substring(0,c)+a.newText+i.substring(l,i.length),o=c}return i}}(ke||(ke={}));var xe,Te=function(){function e(e,t,n,i){this._uri=e,this._languageId=t,this._version=n,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,i=0;i<t.length;i++){n&&(e.push(i),n=!1);var r=t.charAt(i);n="\r"===r||"\n"===r,"\r"===r&&i+1<t.length&&"\n"===t.charAt(i+1)&&i++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,i=t.length;if(0===i)return a.create(0,e);for(;n<i;){var r=Math.floor((n+i)/2);t[r]>e?i=r:n=r+1}var o=n-1;return a.create(o,e-t[o])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],i=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.numberRange=function(e,n,i){return"[object Number]"===t.call(e)&&n<=e&&e<=i},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(xe||(xe={}))},59035:(e,t,n)=>{"use strict";var i=n(15654);t.X7=i.getExperimentationService,i.getExperimentationServiceAsync;var r=n(22560);t.aU=r.TargetPopulation},55708:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MementoKeyValueStorage=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,t){return await this.mementoGlobalStorage.get(e)||t}setValue(e,t){this.mementoGlobalStorage.update(e,t)}}},4619:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,t){}getTreatmentVariableAsync(e,t){return Promise.resolve(void 0)}}},22560:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(66828);class r{constructor(e,t,n){this.extensionName=e,this.extensionVersion=t,this.targetPopulation=n}static trimVersionSuffix(e){return e.split(/\-[a-zA-Z0-9]+$/)[0]}getFilterValue(e){switch(e){case o.ApplicationVersion:return r.trimVersionSuffix(i.version);case o.Build:return i.env.appName;case o.ClientId:return i.env.machineId;case o.ExtensionName:return this.extensionName;case o.ExtensionVersion:return r.trimVersionSuffix(this.extensionVersion);case o.Language:return i.env.language;case o.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,t=Object.values(o);for(let n of t)e.set(n,this.getFilterValue(n));return e}}var o,s;t.VSCodeFilterProvider=r,function(e){e.Market="X-MSEdge-Market",e.CorpNet="X-FD-Corpnet",e.ApplicationVersion="X-VSCode-AppVersion",e.Build="X-VSCode-Build",e.ClientId="X-MSEdge-ClientId",e.ExtensionName="X-VSCode-ExtensionName",e.ExtensionVersion="X-VSCode-ExtensionVersion",e.Language="X-VSCode-Language",e.TargetPopulation="X-VSCode-TargetPopulation"}(o=t.Filters||(t.Filters={})),(s=t.TargetPopulation||(t.TargetPopulation={})).Team="team",s.Internal="internal",s.Insiders="insider",s.Public="public"},15654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(22560),r=n(14802),o=n(66828),s=n(55708),a=n(4619);function c(e,t,n,c,l,...d){if(!l)throw new Error("Memento storage was not provided.");const u=o.workspace.getConfiguration("telemetry");if(!(void 0===o.env.isTelemetryEnabled?u.get("enableTelemetry",!0):o.env.isTelemetryEnabled))return new a.default;const p=[new i.VSCodeFilterProvider(e,t,n),...d],h=new s.MementoKeyValueStorage(l);return new r.ExperimentationService({filterProviders:p,telemetry:c,storageKey:"VSCode.ABExp.FeatureData",keyValueStorage:h,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:"abexp.assignmentcontext",telemetryEventName:"query-expfeature",endpoint:"https://default.exp-tas.com/vscode/ab",refetchInterval:18e5})}t.getExperimentationService=c,t.getExperimentationServiceAsync=async function(e,t,n,i,r,...o){const s=c(e,t,n,i,r,...o);return await s.initializePromise,s}},52479:e=>{e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){i[e]=t[e]})),i;function i(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var i=t.apply(this,e),r=e[e.length-1];return"function"==typeof i&&i!==r&&Object.keys(r).forEach((function(e){i[e]=r[e]})),i}}},8777:(e,t,n)=>{"use strict";const i=n(88762);i.Server=n(39284),i.Receiver=n(32957),i.Sender=n(57330),e.exports=i},30977:(e,t,n)=>{"use strict";const{EMPTY_BUFFER:i}=n(41872);function r(e,t){if(0===e.length)return i;if(1===e.length)return e[0];const n=Buffer.allocUnsafe(t);for(var r=0,o=0;o<e.length;o++){const t=e[o];t.copy(n,r),r+=t.length}return n}function o(e,t,n,i,r){for(var o=0;o<r;o++)n[i+o]=e[o]^t[3&o]}function s(e,t){const n=e.length;for(var i=0;i<n;i++)e[i]^=t[3&i]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function c(e){return c.readOnly=!0,Buffer.isBuffer(e)?e:(e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=function(e){const t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength?t.slice(e.byteOffset,e.byteOffset+e.byteLength):t}(e):(t=Buffer.from(e),c.readOnly=!1),t);var t}try{const t=n(41891),i=t.BufferUtil||t;e.exports={concat:r,mask(e,t,n,r,s){s<48?o(e,t,n,r,s):i.mask(e,t,n,r,s)},toArrayBuffer:a,toBuffer:c,unmask(e,t){e.length<32?s(e,t):i.unmask(e,t)}}}catch(t){e.exports={concat:r,mask:o,toArrayBuffer:a,toBuffer:c,unmask:s}}},41872:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},10062:e=>{"use strict";class t{constructor(e,t){this.target=t,this.type=e}}class n extends t{constructor(e,t){super("message",t),this.data=e}}class i extends t{constructor(e,t,n){super("close",n),this.wasClean=n._closeFrameReceived&&n._closeFrameSent,this.reason=t,this.code=e}}class r extends t{constructor(e){super("open",e)}}class o extends t{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const s={addEventListener(e,t){function s(e){t.call(this,new n(e,this))}function a(e,n){t.call(this,new i(e,n,this))}function c(e){t.call(this,new o(e,this))}function l(){t.call(this,new r(this))}"function"==typeof t&&("message"===e?(s._listener=t,this.on(e,s)):"close"===e?(a._listener=t,this.on(e,a)):"error"===e?(c._listener=t,this.on(e,c)):"open"===e?(l._listener=t,this.on(e,l)):this.on(e,t))},removeEventListener(e,t){const n=this.listeners(e);for(var i=0;i<n.length;i++)n[i]!==t&&n[i]._listener!==t||this.removeListener(e,n[i])}};e.exports=s},51503:e=>{"use strict";const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function n(e,t,n){Object.prototype.hasOwnProperty.call(e,t)?e[t].push(n):e[t]=[n]}e.exports={format:function(e){return Object.keys(e).map((t=>{var n=e[t];return Array.isArray(n)||(n=[n]),n.map((e=>[t].concat(Object.keys(e).map((t=>{var n=e[t];return Array.isArray(n)||(n=[n]),n.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const i={};if(void 0===e||""===e)return i;for(var r,o,s={},a=!1,c=!1,l=!1,d=-1,u=-1,p=0;p<e.length;p++){const f=e.charCodeAt(p);if(void 0===r)if(-1===u&&1===t[f])-1===d&&(d=p);else if(32===f||9===f)-1===u&&-1!==d&&(u=p);else{if(59!==f&&44!==f)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===d)throw new SyntaxError(`Unexpected character at index ${p}`);-1===u&&(u=p);const t=e.slice(d,u);44===f?(n(i,t,s),s={}):r=t,d=u=-1}}else if(void 0===o)if(-1===u&&1===t[f])-1===d&&(d=p);else if(32===f||9===f)-1===u&&-1!==d&&(u=p);else if(59===f||44===f){if(-1===d)throw new SyntaxError(`Unexpected character at index ${p}`);-1===u&&(u=p),n(s,e.slice(d,u),!0),44===f&&(n(i,r,s),s={},r=void 0),d=u=-1}else{if(61!==f||-1===d||-1!==u)throw new SyntaxError(`Unexpected character at index ${p}`);o=e.slice(d,p),d=u=-1}else if(c){if(1!==t[f])throw new SyntaxError(`Unexpected character at index ${p}`);-1===d?d=p:a||(a=!0),c=!1}else if(l)if(1===t[f])-1===d&&(d=p);else if(34===f&&-1!==d)l=!1,u=p;else{if(92!==f)throw new SyntaxError(`Unexpected character at index ${p}`);c=!0}else if(34===f&&61===e.charCodeAt(p-1))l=!0;else if(-1===u&&1===t[f])-1===d&&(d=p);else if(-1===d||32!==f&&9!==f){if(59!==f&&44!==f)throw new SyntaxError(`Unexpected character at index ${p}`);if(-1===d)throw new SyntaxError(`Unexpected character at index ${p}`);-1===u&&(u=p);var h=e.slice(d,u);a&&(h=h.replace(/\\/g,""),a=!1),n(s,o,h),44===f&&(n(i,r,s),s={},r=void 0),o=void 0,d=u=-1}else-1===u&&(u=p)}if(-1===d||l)throw new SyntaxError("Unexpected end of input");-1===u&&(u=p);const f=e.slice(d,u);return void 0===r?n(i,f,{}):(void 0===o?n(s,f,!0):n(s,o,a?f.replace(/\\/g,""):f),n(i,r,s)),i}}},75196:(e,t,n)=>{"use strict";const i=n(73009),r=n(59796),o=n(30977),{kStatusCode:s,NOOP:a}=n(41872),c=Buffer.from([0,0,255,255]),l=Buffer.from([0]),d=Symbol("permessage-deflate"),u=Symbol("total-length"),p=Symbol("callback"),h=Symbol("buffers"),f=Symbol("error");let m;function g(e){this[h].push(e),this[u]+=e.length}function v(e){this[u]+=e.length,this[d]._maxPayload<1||this[u]<=this[d]._maxPayload?this[h].push(e):(this[f]=new RangeError("Max payload size exceeded"),this[f][s]=1009,this.removeListener("data",v),this.reset())}function y(e){this[d]._inflate=null,e[s]=1007,this[p](e)}e.exports=class{constructor(e,t,n){if(this._maxPayload=0|n,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!m){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;m=new i({concurrency:e})}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate&&(this._deflate.close(),this._deflate=null)}acceptAsServer(e){const t=this._options,n=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(n.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?n.client_max_window_bits=t.clientMaxWindowBits:!0!==n.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete n.client_max_window_bits,n}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{var n=e[t];if(n.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(n=n[0],"client_max_window_bits"===t){if(!0!==n){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}else if("server_max_window_bits"===t){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==n)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}e[t]=n}))})),e}decompress(e,t,n){m.push((i=>{this._decompress(e,t,((e,t)=>{i(),n(e,t)}))}))}compress(e,t,n){m.push((i=>{this._compress(e,t,((e,t)=>{i(),n(e,t)}))}))}_decompress(e,t,n){const i=this._isServer?"client":"server";if(!this._inflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?r.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=r.createInflateRaw(Object.assign({},this._options.zlibInflateOptions,{windowBits:t})),this._inflate[d]=this,this._inflate[u]=0,this._inflate[h]=[],this._inflate.on("error",y),this._inflate.on("data",v)}this._inflate[p]=n,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush((()=>{const e=this._inflate[f];if(e)return this._inflate.close(),this._inflate=null,void n(e);const r=o.concat(this._inflate[h],this._inflate[u]);t&&this.params[`${i}_no_context_takeover`]?(this._inflate.close(),this._inflate=null):(this._inflate[u]=0,this._inflate[h]=[]),n(null,r)}))}_compress(e,t,n){if(!e||0===e.length)return void process.nextTick(n,null,l);const i=this._isServer?"server":"client";if(!this._deflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?r.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=r.createDeflateRaw(Object.assign({},this._options.zlibDeflateOptions,{windowBits:t})),this._deflate[u]=0,this._deflate[h]=[],this._deflate.on("error",a),this._deflate.on("data",g)}this._deflate.write(e),this._deflate.flush(r.Z_SYNC_FLUSH,(()=>{if(this._deflate){var e=o.concat(this._deflate[h],this._deflate[u]);t&&(e=e.slice(0,e.length-4)),t&&this.params[`${i}_no_context_takeover`]?(this._deflate.close(),this._deflate=null):(this._deflate[u]=0,this._deflate[h]=[]),n(null,e)}}))}}},32957:(e,t,n)=>{"use strict";const{Writable:i}=n(12781),r=n(75196),{BINARY_TYPES:o,EMPTY_BUFFER:s,kStatusCode:a,kWebSocket:c}=n(41872),{concat:l,toArrayBuffer:d,unmask:u}=n(30977),{isValidStatusCode:p,isValidUTF8:h}=n(6746);function f(e,t,n,i){const r=new e(n?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(r,f),r[a]=i,r}e.exports=class extends i{constructor(e,t,n){super(),this._binaryType=e||o[0],this[c]=void 0,this._extensions=t||{},this._maxPayload=0|n,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,n){if(8===this._opcode&&0==this._state)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const n=this._buffers[0];e>=n.length?this._buffers.shift().copy(t,t.length-e):(n.copy(t,t.length-e,0,e),this._buffers[0]=n.slice(e)),e-=n.length}while(e>0);return t}startLoop(e){var t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,f(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[r.extensionName])return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,f(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,f(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,f(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,f(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,f(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){var t=s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&u(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[r.extensionName].decompress(e,this._fin,((e,n)=>{if(e)return t(e);if(n.length){if(this._messageLength+=n.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(f(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(n)}const i=this.dataMessage();if(i)return t(i);this.startLoop(t)}))}dataMessage(){if(this._fin){const t=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){var e;e="nodebuffer"===this._binaryType?l(n,t):"arraybuffer"===this._binaryType?d(l(n,t)):n,this.emit("message",e)}else{const e=l(n,t);if(!h(e))return this._loop=!1,f(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",e.toString())}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return f(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!p(t))return f(RangeError,`invalid status code ${t}`,!0,1002);const n=e.slice(2);if(!h(n))return f(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,n.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},57330:(e,t,n)=>{"use strict";const{randomBytes:i}=n(6113),r=n(75196),{EMPTY_BUFFER:o}=n(41872),{isValidStatusCode:s}=n(6746),{mask:a,toBuffer:c}=n(30977);class l{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const n=t.mask&&t.readOnly;var r=t.mask?6:2,o=e.length;e.length>=65536?(r+=8,o=127):e.length>125&&(r+=2,o=126);const s=Buffer.allocUnsafe(n?e.length+r:r);if(s[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(s[0]|=64),s[1]=o,126===o?s.writeUInt16BE(e.length,2):127===o&&(s.writeUInt32BE(0,2),s.writeUInt32BE(e.length,6)),!t.mask)return[s,e];const c=i(4);return s[1]|=128,s[r-4]=c[0],s[r-3]=c[1],s[r-2]=c[2],s[r-1]=c[3],n?(a(e,c,s,r,e.length),[s]):(a(e,c,e,0,e.length),[s,e])}close(e,t,n,i){var r;if(void 0===e)r=o;else{if("number"!=typeof e||!s(e))throw new TypeError("First argument must be a valid error code number");void 0===t||""===t?(r=Buffer.allocUnsafe(2)).writeUInt16BE(e,0):((r=Buffer.allocUnsafe(2+Buffer.byteLength(t))).writeUInt16BE(e,0),r.write(t,2))}this._deflating?this.enqueue([this.doClose,r,n,i]):this.doClose(r,n,i)}doClose(e,t,n){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),n)}ping(e,t,n){const i=c(e);this._deflating?this.enqueue([this.doPing,i,t,c.readOnly,n]):this.doPing(i,t,c.readOnly,n)}doPing(e,t,n,i){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:n}),i)}pong(e,t,n){const i=c(e);this._deflating?this.enqueue([this.doPong,i,t,c.readOnly,n]):this.doPong(i,t,c.readOnly,n)}doPong(e,t,n,i){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:n}),i)}send(e,t,n){const i=c(e),o=this._extensions[r.extensionName];var s=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&o&&(a=i.length>=o._threshold),this._compress=a):(a=!1,s=0),t.fin&&(this._firstFragment=!0),o){const e={fin:t.fin,rsv1:a,opcode:s,mask:t.mask,readOnly:c.readOnly};this._deflating?this.enqueue([this.dispatch,i,this._compress,e,n]):this.dispatch(i,this._compress,e,n)}else this.sendFrame(l.frame(i,{fin:t.fin,rsv1:!1,opcode:s,mask:t.mask,readOnly:c.readOnly}),n)}dispatch(e,t,n,i){if(!t)return void this.sendFrame(l.frame(e,n),i);const o=this._extensions[r.extensionName];this._deflating=!0,o.compress(e,n.fin,((e,t)=>{this._deflating=!1,n.readOnly=!1,this.sendFrame(l.frame(t,n),i),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,e[0].apply(this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=l},6746:(e,t,n)=>{"use strict";try{const e=n(70311);t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=()=>!0}t.isValidStatusCode=e=>e>=1e3&&e<=1013&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},39284:(e,t,n)=>{"use strict";const i=n(82361),r=n(6113),o=n(13685),s=n(75196),a=n(51503),c=n(88762),{GUID:l}=n(41872),d=/^[+/0-9A-Za-z]{22}==$/;function u(e){e.emit("close")}function p(){this.destroy()}function h(e,t,n,i){e.writable&&(n=n||o.STATUS_CODES[t],i=Object.assign({Connection:"close","Content-type":"text/html","Content-Length":Buffer.byteLength(n)},i),e.write(`HTTP/1.1 ${t} ${o.STATUS_CODES[t]}\r\n`+Object.keys(i).map((e=>`${e}: ${i[e]}`)).join("\r\n")+"\r\n\r\n"+n)),e.removeListener("error",p),e.destroy()}function f(e){return e.trim()}e.exports=class extends i{constructor(e,t){if(super(),null==(e=Object.assign({maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},e)).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');null!=e.port?(this._server=o.createServer(((e,t)=>{const n=o.STATUS_CODES[426];t.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),t.end(n)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server&&(this._removeListeners=function(e,t){for(const n of Object.keys(t))e.on(n,t[n]);return function(){for(const n of Object.keys(t))e.removeListener(n,t[n])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,t,n)=>{this.handleUpgrade(e,t,n,(t=>{this.emit("connection",t,e)}))}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?t.close((()=>this.emit("close"))):process.nextTick(u,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,i){t.on("error",p);const r=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),o=+e.headers["sec-websocket-version"],c={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!r||!d.test(r)||8!==o&&13!==o||!this.shouldHandle(e))return h(t,400);if(this.options.perMessageDeflate){const n=new s(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const t=a.parse(e.headers["sec-websocket-extensions"]);t[s.extensionName]&&(n.accept(t[s.extensionName]),c[s.extensionName]=n)}catch(e){return h(t,400)}}if(this.options.verifyClient){const s={origin:e.headers[8===o?"sec-websocket-origin":"origin"],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(s,((o,s,a,l)=>{if(!o)return h(t,s||401,a,l);this.completeUpgrade(r,c,e,t,n,i)}));if(!this.options.verifyClient(s))return h(t,401)}this.completeUpgrade(r,c,e,t,n,i)}completeUpgrade(e,t,n,i,o,d){if(!i.readable||!i.writable)return i.destroy();const u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${r.createHash("sha1").update(e+l).digest("base64")}`],h=new c(null);var m=n.headers["sec-websocket-protocol"];if(m&&(m=m.split(",").map(f),(m=this.options.handleProtocols?this.options.handleProtocols(m,n):m[0])&&(u.push(`Sec-WebSocket-Protocol: ${m}`),h.protocol=m)),t[s.extensionName]){const e=t[s.extensionName].params,n=a.format({[s.extensionName]:[e]});u.push(`Sec-WebSocket-Extensions: ${n}`),h._extensions=t}this.emit("headers",u,n),i.write(u.concat("\r\n").join("\r\n")),i.removeListener("error",p),h.setSocket(i,o,this.options.maxPayload),this.clients&&(this.clients.add(h),h.on("close",(()=>this.clients.delete(h)))),d(h)}}},88762:(e,t,n)=>{"use strict";const i=n(82361),r=n(6113),o=n(95687),s=n(13685),a=n(41808),c=n(24404),l=n(57310),d=n(75196),u=n(10062),p=n(51503),h=n(32957),f=n(57330),{BINARY_TYPES:m,EMPTY_BUFFER:g,GUID:v,kStatusCode:y,kWebSocket:b,NOOP:w}=n(41872),_=["CONNECTING","OPEN","CLOSING","CLOSED"],S=[8,13];class C extends i{constructor(e,t,n){super(),this.readyState=C.CONNECTING,this.protocol="",this._binaryType=m[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(n=t,t=void 0),k(this,e,t,n)):this._isServer=!0}get CONNECTING(){return C.CONNECTING}get CLOSING(){return C.CLOSING}get CLOSED(){return C.CLOSED}get OPEN(){return C.OPEN}get binaryType(){return this._binaryType}set binaryType(e){m.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:0}get extensions(){return Object.keys(this._extensions).join()}setSocket(e,t,n){const i=new h(this._binaryType,this._extensions,n);this._sender=new f(e,this._extensions),this._receiver=i,this._socket=e,i[b]=this,e[b]=this,i.on("conclude",P),i.on("drain",I),i.on("error",D),i.on("message",O),i.on("ping",A),i.on("pong",N),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",M),e.on("data",L),e.on("end",j),e.on("error",F),this.readyState=C.OPEN,this.emit("open")}emitClose(){this.readyState=C.CLOSED,this._socket?(this._extensions[d.extensionName]&&this._extensions[d.extensionName].cleanup(),this._receiver.removeAllListeners(),this.emit("close",this._closeCode,this._closeMessage)):this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==C.CLOSED){if(this.readyState===C.CONNECTING){const e="WebSocket was closed before the connection was established";return T(this,this._req,e)}this.readyState!==C.CLOSING?(this.readyState=C.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,this._closeFrameReceived&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,n){if("function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),this.readyState!==C.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} (${_[this.readyState]})`);if(n)return n(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.ping(e||g,t,n)}pong(e,t,n){if("function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),this.readyState!==C.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} (${_[this.readyState]})`);if(n)return n(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.pong(e||g,t,n)}send(e,t,n){if("function"==typeof t&&(n=t,t={}),this.readyState!==C.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} (${_[this.readyState]})`);if(n)return n(e);throw e}"number"==typeof e&&(e=e.toString());const i=Object.assign({binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[d.extensionName]||(i.compress=!1),this._sender.send(e||g,i,n)}terminate(){if(this.readyState!==C.CLOSED){if(this.readyState===C.CONNECTING){const e="WebSocket was closed before the connection was established";return T(this,this._req,e)}this._socket&&(this.readyState=C.CLOSING,this._socket.destroy())}}}function k(e,t,n,i){const a=Object.assign({protocolVersion:S[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10},i,{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0});if(!S.includes(a.protocolVersion))throw new RangeError(`Unsupported protocol version: ${a.protocolVersion} (supported versions: ${S.join(", ")})`);var c;"object"==typeof t&&void 0!==t.href?(c=t,e.url=t.href):(c=l.URL?new l.URL(t):l.parse(t),e.url=t);const u="ws+unix:"===c.protocol;if(!(c.host||u&&c.pathname))throw new Error(`Invalid URL: ${e.url}`);const h="wss:"===c.protocol||"https:"===c.protocol,f=h?443:80,m=r.randomBytes(16).toString("base64"),g=h?o.get:s.get,y=c.search?`${c.pathname||"/"}${c.search}`:c.pathname||"/";var b;if(a.createConnection=h?x:E,a.defaultPort=a.defaultPort||f,a.port=c.port||f,a.host=c.hostname.startsWith("[")?c.hostname.slice(1,-1):c.hostname,a.headers=Object.assign({"Sec-WebSocket-Version":a.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket"},a.headers),a.path=y,a.timeout=a.handshakeTimeout,a.perMessageDeflate&&(b=new d(!0!==a.perMessageDeflate?a.perMessageDeflate:{},!1,a.maxPayload),a.headers["Sec-WebSocket-Extensions"]=p.format({[d.extensionName]:b.offer()})),n&&(a.headers["Sec-WebSocket-Protocol"]=n),a.origin&&(a.protocolVersion<13?a.headers["Sec-WebSocket-Origin"]=a.origin:a.headers.Origin=a.origin),c.auth?a.auth=c.auth:(c.username||c.password)&&(a.auth=`${c.username}:${c.password}`),u){const e=y.split(":");a.socketPath=e[0],a.path=e[1]}var w=e._req=g(a);a.timeout&&w.on("timeout",(()=>{T(e,w,"Opening handshake has timed out")})),w.on("error",(t=>{e._req.aborted||(w=e._req=null,e.readyState=C.CLOSING,e.emit("error",t),e.emitClose())})),w.on("response",(r=>{const o=r.headers.location,s=r.statusCode;if(o&&a.followRedirects&&s>=300&&s<400){if(++e._redirects>a.maxRedirects)return void T(e,w,"Maximum redirects exceeded");w.abort();const r=l.URL?new l.URL(o,t):l.resolve(t,o);k(e,r,n,i)}else e.emit("unexpected-response",w,r)||T(e,w,`Unexpected server response: ${r.statusCode}`)})),w.on("upgrade",((t,i,o)=>{if(e.emit("upgrade",t),e.readyState!==C.CONNECTING)return;w=e._req=null;const s=r.createHash("sha1").update(m+v).digest("base64");if(t.headers["sec-websocket-accept"]!==s)return void T(e,i,"Invalid Sec-WebSocket-Accept header");const c=t.headers["sec-websocket-protocol"],l=(n||"").split(/, */);var u;if(!n&&c?u="Server sent a subprotocol but none was requested":n&&!c?u="Server sent no subprotocol":c&&!l.includes(c)&&(u="Server sent an invalid subprotocol"),u)T(e,i,u);else{if(c&&(e.protocol=c),b)try{const n=p.parse(t.headers["sec-websocket-extensions"]);n[d.extensionName]&&(b.accept(n[d.extensionName]),e._extensions[d.extensionName]=b)}catch(t){return void T(e,i,"Invalid Sec-WebSocket-Extensions header")}e.setSocket(i,o,a.maxPayload)}}))}function E(e){return e.protocolVersion&&(e.path=e.socketPath),a.connect(e)}function x(e){return e.path=void 0,e.servername=e.servername||e.host,c.connect(e)}function T(e,t,n){e.readyState=C.CLOSING;const i=new Error(n);Error.captureStackTrace(i,T),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",i)):(t.destroy(i),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function P(e,t){const n=this[b];n._socket.removeListener("data",L),n._socket.resume(),n._closeFrameReceived=!0,n._closeMessage=t,n._closeCode=e,1005===e?n.close():n.close(e,t)}function I(){this[b]._socket.resume()}function D(e){const t=this[b];t._socket.removeListener("data",L),t.readyState=C.CLOSING,t._closeCode=e[y],t.emit("error",e),t._socket.destroy()}function R(){this[b].emitClose()}function O(e){this[b].emit("message",e)}function A(e){const t=this[b];t.pong(e,!t._isServer,w),t.emit("ping",e)}function N(e){this[b].emit("pong",e)}function M(){const e=this[b];this.removeListener("close",M),this.removeListener("end",j),e.readyState=C.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",L),this[b]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",R),e._receiver.on("finish",R))}function L(e){this[b]._receiver.write(e)||this.pause()}function j(){const e=this[b];e.readyState=C.CLOSING,e._receiver.end(),this.end()}function F(){const e=this[b];this.removeListener("error",F),this.on("error",w),e.readyState=C.CLOSING,this.destroy()}_.forEach(((e,t)=>{C[e]=t})),["open","error","close","message"].forEach((e=>{Object.defineProperty(C.prototype,`on${e}`,{get(){const t=this.listeners(e);for(var n=0;n<t.length;n++)if(t[n]._listener)return t[n]._listener},set(t){const n=this.listeners(e);for(var i=0;i<n.length;i++)n[i]._listener&&this.removeListener(e,n[i]);this.addEventListener(e,t)}})})),C.prototype.addEventListener=u.addEventListener,C.prototype.removeEventListener=u.removeEventListener,e.exports=C},49602:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},34411:(e,t,n)=>{"use strict";function i(e){var t=this;if(t instanceof i||(t=new i),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function r(e,t,n){var i=t===e.head?new a(n,null,t,e):new a(n,t,t.next,e);return null===i.next&&(e.tail=i),null===i.prev&&(e.head=i),e.length++,i}function o(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function s(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,n,i){if(!(this instanceof a))return new a(e,t,n,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=i,i.Node=a,i.create=i,i.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},i.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},i.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},i.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},i.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)s(this,arguments[e]);return this.length},i.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},i.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},i.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,i=0;null!==n;i++)e.call(t,n.value,i,this),n=n.next},i.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,i=this.length-1;null!==n;i--)e.call(t,n.value,i,this),n=n.prev},i.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},i.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},i.prototype.map=function(e,t){t=t||this;for(var n=new i,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},i.prototype.mapReverse=function(e,t){t=t||this;for(var n=new i,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},i.prototype.reduce=function(e,t){var n,i=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,n=this.head.value}for(var r=0;null!==i;r++)n=e(n,i.value,r),i=i.next;return n},i.prototype.reduceReverse=function(e,t){var n,i=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,n=this.tail.value}for(var r=this.length-1;null!==i;r--)n=e(n,i.value,r),i=i.prev;return n},i.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},i.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},i.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new i;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,o=this.head;null!==o&&r<e;r++)o=o.next;for(;null!==o&&r<t;r++,o=o.next)n.push(o.value);return n},i.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new i;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,o=this.tail;null!==o&&r>t;r--)o=o.prev;for(;null!==o&&r>e;r--,o=o.prev)n.push(o.value);return n},i.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,o=this.head;null!==o&&i<e;i++)o=o.next;var s=[];for(i=0;o&&i<t;i++)s.push(o.value),o=this.removeNode(o);for(null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev),i=0;i<n.length;i++)o=r(this,o,n[i]);return s},i.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=t,this.tail=e,this};try{n(49602)(i)}catch(e){}},25674:e=>{"use strict";e.exports=require("./node_modules/pdfkit/js/pdfkit.standalone")},19605:e=>{"use strict";e.exports=require("@azure/functions-core")},87913:e=>{"use strict";e.exports=require("@azure/opentelemetry-instrumentation-azure-sdk")},30874:e=>{"use strict";e.exports=require("@opentelemetry/instrumentation")},32220:e=>{"use strict";e.exports=require("applicationinsights-native-metrics")},66828:e=>{"use strict";e.exports=require("vscode")},39491:e=>{"use strict";e.exports=require("assert")},50852:e=>{"use strict";e.exports=require("async_hooks")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},96206:e=>{"use strict";e.exports=require("console")},22057:e=>{"use strict";e.exports=require("constants")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},98188:e=>{"use strict";e.exports=require("module")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},39512:e=>{"use strict";e.exports=require("timers")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},36292:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FetchError:()=>h,Headers:()=>D,Request:()=>H,Response:()=>F,default:()=>Q});var i=n(12781),r=n(13685),o=n(57310),s=n(74831),a=n(95687),c=n(59796);const l=i.Readable,d=Symbol("buffer"),u=Symbol("type");class p{constructor(){this[u]="";const e=arguments[0],t=arguments[1],n=[];let i=0;if(e){const t=e,r=Number(t.length);for(let e=0;e<r;e++){const r=t[e];let o;o=r instanceof Buffer?r:ArrayBuffer.isView(r)?Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof ArrayBuffer?Buffer.from(r):r instanceof p?r[d]:Buffer.from("string"==typeof r?r:String(r)),i+=o.length,n.push(o)}}this[d]=Buffer.concat(n);let r=t&&void 0!==t.type&&String(t.type).toLowerCase();r&&!/[^\u0020-\u007E]/.test(r)&&(this[u]=r)}get size(){return this[d].length}get type(){return this[u]}text(){return Promise.resolve(this[d].toString())}arrayBuffer(){const e=this[d],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new l;return e._read=function(){},e.push(this[d]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],n=arguments[1];let i,r;i=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),r=void 0===n?e:n<0?Math.max(e+n,0):Math.min(n,e);const o=Math.max(r-i,0),s=this[d].slice(i,i+o),a=new p([],{type:arguments[2]});return a[d]=s,a}}function h(e,t,n){Error.call(this,e),this.message=e,this.type=t,n&&(this.code=this.errno=n.code),Error.captureStackTrace(this,this.constructor)}let f;Object.defineProperties(p.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(p.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),h.prototype=Object.create(Error.prototype),h.prototype.constructor=h,h.prototype.name="FetchError";try{f=require("encoding").convert}catch(e){}const m=Symbol("Body internals"),g=i.PassThrough;function v(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.size;let o=void 0===r?0:r;var s=n.timeout;let a=void 0===s?0:s;null==e?e=null:b(e)?e=Buffer.from(e.toString()):w(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof i||(e=Buffer.from(String(e)))),this[m]={body:e,disturbed:!1,error:null},this.size=o,this.timeout=a,e instanceof i&&e.on("error",(function(e){const n="AbortError"===e.name?e:new h(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[m].error=n}))}function y(){var e=this;if(this[m].disturbed)return v.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[m].disturbed=!0,this[m].error)return v.Promise.reject(this[m].error);let t=this.body;if(null===t)return v.Promise.resolve(Buffer.alloc(0));if(w(t)&&(t=t.stream()),Buffer.isBuffer(t))return v.Promise.resolve(t);if(!(t instanceof i))return v.Promise.resolve(Buffer.alloc(0));let n=[],r=0,o=!1;return new v.Promise((function(i,s){let a;e.timeout&&(a=setTimeout((function(){o=!0,s(new h(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),t.on("error",(function(t){"AbortError"===t.name?(o=!0,s(t)):s(new h(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),t.on("data",(function(t){if(!o&&null!==t){if(e.size&&r+t.length>e.size)return o=!0,void s(new h(`content size at ${e.url} over limit: ${e.size}`,"max-size"));r+=t.length,n.push(t)}})),t.on("end",(function(){if(!o){clearTimeout(a);try{i(Buffer.concat(n,r))}catch(t){s(new h(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}}))}))}function b(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function w(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function _(e){let t,n,r=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return r instanceof i&&"function"!=typeof r.getBoundary&&(t=new g,n=new g,r.pipe(t),r.pipe(n),e[m].body=t,r=n),r}function S(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":b(e)?"application/x-www-form-urlencoded;charset=UTF-8":w(e)?e.type||null:Buffer.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?`multipart/form-data;boundary=${e.getBoundary()}`:e instanceof i?null:"text/plain;charset=UTF-8"}function C(e){const t=e.body;return null===t?0:w(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}v.prototype={get body(){return this[m].body},get bodyUsed(){return this[m].disturbed},arrayBuffer(){return y.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return y.call(this).then((function(t){return Object.assign(new p([],{type:e.toLowerCase()}),{[d]:t})}))},json(){var e=this;return y.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(t){return v.Promise.reject(new h(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}}))},text(){return y.call(this).then((function(e){return e.toString()}))},buffer(){return y.call(this)},textConverted(){var e=this;return y.call(this).then((function(t){return function(e,t){if("function"!=typeof f)throw new Error("The package `encoding` must be installed to use the textConverted() function");const n=t.get("content-type");let i,r,o="utf-8";return n&&(i=/charset=([^;]*)/i.exec(n)),r=e.slice(0,1024).toString(),!i&&r&&(i=/<meta.+?charset=(['"])(.+?)\1/i.exec(r)),!i&&r&&(i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(r),i||(i=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(r),i&&i.pop()),i&&(i=/charset=(.*)/i.exec(i.pop()))),!i&&r&&(i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(r)),i&&(o=i.pop(),"gb2312"!==o&&"gbk"!==o||(o="gb18030")),f(e,"UTF-8",o).toString()}(t,e.headers)}))}},Object.defineProperties(v.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),v.mixIn=function(e){for(const t of Object.getOwnPropertyNames(v.prototype))if(!(t in e)){const n=Object.getOwnPropertyDescriptor(v.prototype,t);Object.defineProperty(e,t,n)}},v.Promise=global.Promise;const k=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,E=/[^\t\x20-\x7e\x80-\xff]/;function x(e){if(e=`${e}`,k.test(e)||""===e)throw new TypeError(`${e} is not a legal HTTP header name`)}function T(e){if(e=`${e}`,E.test(e))throw new TypeError(`${e} is not a legal HTTP header value`)}function P(e,t){t=t.toLowerCase();for(const n in e)if(n.toLowerCase()===t)return n}const I=Symbol("map");class D{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[I]=Object.create(null),e instanceof D){const t=e.raw(),n=Object.keys(t);for(const e of n)for(const n of t[e])this.append(e,n)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const n=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");n.push(Array.from(t))}for(const e of n){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const n=e[t];this.append(t,n)}}}}get(e){x(e=`${e}`);const t=P(this[I],e);return void 0===t?null:this[I][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=R(this),i=0;for(;i<n.length;){var r=n[i];const o=r[0],s=r[1];e.call(t,s,o,this),n=R(this),i++}}set(e,t){t=`${t}`,x(e=`${e}`),T(t);const n=P(this[I],e);this[I][void 0!==n?n:e]=[t]}append(e,t){t=`${t}`,x(e=`${e}`),T(t);const n=P(this[I],e);void 0!==n?this[I][n].push(t):this[I][e]=[t]}has(e){return x(e=`${e}`),void 0!==P(this[I],e)}delete(e){x(e=`${e}`);const t=P(this[I],e);void 0!==t&&delete this[I][t]}raw(){return this[I]}keys(){return A(this,"key")}values(){return A(this,"value")}[Symbol.iterator](){return A(this,"key+value")}}function R(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";return Object.keys(e[I]).sort().map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[I][t].join(", ")}:function(t){return[t.toLowerCase(),e[I][t].join(", ")]})}D.prototype.entries=D.prototype[Symbol.iterator],Object.defineProperty(D.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(D.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const O=Symbol("internal");function A(e,t){const n=Object.create(N);return n[O]={target:e,kind:t,index:0},n}const N=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==N)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[O];const t=e.target,n=e.kind,i=e.index,r=R(t,n);return i>=r.length?{value:void 0,done:!0}:(this[O].index=i+1,{value:r[i],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function M(e){const t=Object.assign({__proto__:null},e[I]),n=P(e[I],"Host");return void 0!==n&&(t[n]=t[n][0]),t}Object.defineProperty(N,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const L=Symbol("Response internals"),j=r.STATUS_CODES;class F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v.call(this,e,t);const n=t.status||200,i=new D(t.headers);if(null!=e&&!i.has("Content-Type")){const t=S(e);t&&i.append("Content-Type",t)}this[L]={url:t.url,status:n,statusText:t.statusText||j[n],headers:i,counter:t.counter}}get url(){return this[L].url||""}get status(){return this[L].status}get ok(){return this[L].status>=200&&this[L].status<300}get redirected(){return this[L].counter>0}get statusText(){return this[L].statusText}get headers(){return this[L].headers}clone(){return new F(_(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}v.mixIn(F.prototype),Object.defineProperties(F.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(F.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const U=Symbol("Request internals"),q=o.URL||s.URL,K=o.parse,V=o.format;function W(e){return/^[a-zA-Z][a-zA-Z\d+\-.]*:/.exec(e)&&(e=new q(e).toString()),K(e)}const $="destroy"in i.Readable.prototype;function B(e){return"object"==typeof e&&"object"==typeof e[U]}class H{constructor(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};B(e)?t=W(e.url):(t=e&&e.href?W(e.href):W(`${e}`),e={});let i=n.method||e.method||"GET";if(i=i.toUpperCase(),(null!=n.body||B(e)&&null!==e.body)&&("GET"===i||"HEAD"===i))throw new TypeError("Request with GET/HEAD method cannot have body");let r=null!=n.body?n.body:B(e)&&null!==e.body?_(e):null;v.call(this,r,{timeout:n.timeout||e.timeout||0,size:n.size||e.size||0});const o=new D(n.headers||e.headers||{});if(null!=r&&!o.has("Content-Type")){const e=S(r);e&&o.append("Content-Type",e)}let s=B(e)?e.signal:null;if("signal"in n&&(s=n.signal),null!=s&&!function(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}(s))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[U]={method:i,redirect:n.redirect||e.redirect||"follow",headers:o,parsedURL:t,signal:s},this.follow=void 0!==n.follow?n.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==n.compress?n.compress:void 0===e.compress||e.compress,this.counter=n.counter||e.counter||0,this.agent=n.agent||e.agent}get method(){return this[U].method}get url(){return V(this[U].parsedURL)}get headers(){return this[U].headers}get redirect(){return this[U].redirect}get signal(){return this[U].signal}clone(){return new H(this)}}function z(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}v.mixIn(H.prototype),Object.defineProperty(H.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(H.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),z.prototype=Object.create(Error.prototype),z.prototype.constructor=z,z.prototype.name="AbortError";const J=o.URL||s.URL,G=i.PassThrough;function Y(e,t){if(!Y.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return v.Promise=Y.Promise,new Y.Promise((function(n,o){const s=new H(e,t),l=function(e){const t=e[U].parsedURL,n=new D(e[U].headers);if(n.has("Accept")||n.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof i.Readable&&!$)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let r=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(r="0"),null!=e.body){const t=C(e);"number"==typeof t&&(r=String(t))}r&&n.set("Content-Length",r),n.has("User-Agent")||n.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip,deflate");let o=e.agent;return"function"==typeof o&&(o=o(t)),n.has("Connection")||o||n.set("Connection","close"),Object.assign({},t,{method:e.method,headers:M(n),agent:o})}(s),d=("https:"===l.protocol?a:r).request,u=s.signal;let p=null;const f=function(){let e=new z("The user aborted a request.");o(e),s.body&&s.body instanceof i.Readable&&s.body.destroy(e),p&&p.body&&p.body.emit("error",e)};if(u&&u.aborted)return void f();const m=function(){f(),y()},g=d(l);let v;function y(){g.abort(),u&&u.removeEventListener("abort",m),clearTimeout(v)}u&&u.addEventListener("abort",m),s.timeout&&g.once("socket",(function(e){v=setTimeout((function(){o(new h(`network timeout at: ${s.url}`,"request-timeout")),y()}),s.timeout)})),g.on("error",(function(e){o(new h(`request to ${s.url} failed, reason: ${e.message}`,"system",e)),y()})),g.on("response",(function(e){clearTimeout(v);const t=function(e){const t=new D;for(const n of Object.keys(e))if(!k.test(n))if(Array.isArray(e[n]))for(const i of e[n])E.test(i)||(void 0===t[I][n]?t[I][n]=[i]:t[I][n].push(i));else E.test(e[n])||(t[I][n]=[e[n]]);return t}(e.headers);if(Y.isRedirect(e.statusCode)){const i=t.get("Location");let r=null;try{r=null===i?null:new J(i,s.url).toString()}catch(e){if("manual"!==s.redirect)return o(new h(`uri requested responds with an invalid redirect URL: ${i}`,"invalid-redirect")),void y()}switch(s.redirect){case"error":return o(new h(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),void y();case"manual":if(null!==r)try{t.set("Location",r)}catch(e){o(e)}break;case"follow":if(null===r)break;if(s.counter>=s.follow)return o(new h(`maximum redirect reached at: ${s.url}`,"max-redirect")),void y();const i={headers:new D(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:s.body,signal:s.signal,timeout:s.timeout,size:s.size};if(!function(e,t){const n=new J(t).hostname,i=new J(e).hostname;return n===i||"."===n[n.length-i.length-1]&&n.endsWith(i)}(s.url,r))for(const e of["authorization","www-authenticate","cookie","cookie2"])i.headers.delete(e);return 303!==e.statusCode&&s.body&&null===C(s)?(o(new h("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void y()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==s.method)||(i.method="GET",i.body=void 0,i.headers.delete("content-length")),n(Y(new H(r,i))),void y())}}e.once("end",(function(){u&&u.removeEventListener("abort",m)}));let i=e.pipe(new G);const r={url:s.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:s.size,timeout:s.timeout,counter:s.counter},a=t.get("Content-Encoding");if(!s.compress||"HEAD"===s.method||null===a||204===e.statusCode||304===e.statusCode)return p=new F(i,r),void n(p);const l={flush:c.Z_SYNC_FLUSH,finishFlush:c.Z_SYNC_FLUSH};if("gzip"==a||"x-gzip"==a)return i=i.pipe(c.createGunzip(l)),p=new F(i,r),void n(p);if("deflate"!=a&&"x-deflate"!=a){if("br"==a&&"function"==typeof c.createBrotliDecompress)return i=i.pipe(c.createBrotliDecompress()),p=new F(i,r),void n(p);p=new F(i,r),n(p)}else e.pipe(new G).once("data",(function(e){i=8==(15&e[0])?i.pipe(c.createInflate()):i.pipe(c.createInflateRaw()),p=new F(i,r),n(p)}))})),function(e,t){const n=t.body;null===n?e.end():w(n)?n.stream().pipe(e):Buffer.isBuffer(n)?(e.write(n),e.end()):n.pipe(e)}(g,s)}))}Y.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},Y.Promise=global.Promise;const Q=Y},26157:e=>{"use strict";e.exports={i8:"1.7.6"}},130:e=>{"use strict";e.exports={i8:"1.1.0"}},63480:e=>{"use strict";e.exports=JSON.parse('[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]')},13336:e=>{"use strict";e.exports=JSON.parse('[["0","\\u0000",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]')},77348:e=>{"use strict";e.exports=JSON.parse('[["0","\\u0000",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]')},74284:e=>{"use strict";e.exports=JSON.parse('[["0","\\u0000",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]')},31532:e=>{"use strict";e.exports=JSON.parse('[["0","\\u0000",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]')},36258:e=>{"use strict";e.exports=JSON.parse('{"uChars":[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],"gbChars":[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189000]}')},44346:e=>{"use strict";e.exports=JSON.parse('[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93],["8135f437",""]]')},27014:e=>{"use strict";e.exports=JSON.parse('[["0","\\u0000",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]')},53765:e=>{"use strict";e.exports=JSON.parse('{"application/1d-interleaved-parityfec":{"source":"iana"},"application/3gpdash-qoe-report+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/3gpp-ims+xml":{"source":"iana","compressible":true},"application/3gpphal+json":{"source":"iana","compressible":true},"application/3gpphalforms+json":{"source":"iana","compressible":true},"application/a2l":{"source":"iana"},"application/ace+cbor":{"source":"iana"},"application/activemessage":{"source":"iana"},"application/activity+json":{"source":"iana","compressible":true},"application/alto-costmap+json":{"source":"iana","compressible":true},"application/alto-costmapfilter+json":{"source":"iana","compressible":true},"application/alto-directory+json":{"source":"iana","compressible":true},"application/alto-endpointcost+json":{"source":"iana","compressible":true},"application/alto-endpointcostparams+json":{"source":"iana","compressible":true},"application/alto-endpointprop+json":{"source":"iana","compressible":true},"application/alto-endpointpropparams+json":{"source":"iana","compressible":true},"application/alto-error+json":{"source":"iana","compressible":true},"application/alto-networkmap+json":{"source":"iana","compressible":true},"application/alto-networkmapfilter+json":{"source":"iana","compressible":true},"application/alto-updatestreamcontrol+json":{"source":"iana","compressible":true},"application/alto-updatestreamparams+json":{"source":"iana","compressible":true},"application/aml":{"source":"iana"},"application/andrew-inset":{"source":"iana","extensions":["ez"]},"application/applefile":{"source":"iana"},"application/applixware":{"source":"apache","extensions":["aw"]},"application/at+jwt":{"source":"iana"},"application/atf":{"source":"iana"},"application/atfx":{"source":"iana"},"application/atom+xml":{"source":"iana","compressible":true,"extensions":["atom"]},"application/atomcat+xml":{"source":"iana","compressible":true,"extensions":["atomcat"]},"application/atomdeleted+xml":{"source":"iana","compressible":true,"extensions":["atomdeleted"]},"application/atomicmail":{"source":"iana"},"application/atomsvc+xml":{"source":"iana","compressible":true,"extensions":["atomsvc"]},"application/atsc-dwd+xml":{"source":"iana","compressible":true,"extensions":["dwd"]},"application/atsc-dynamic-event-message":{"source":"iana"},"application/atsc-held+xml":{"source":"iana","compressible":true,"extensions":["held"]},"application/atsc-rdt+json":{"source":"iana","compressible":true},"application/atsc-rsat+xml":{"source":"iana","compressible":true,"extensions":["rsat"]},"application/atxml":{"source":"iana"},"application/auth-policy+xml":{"source":"iana","compressible":true},"application/bacnet-xdd+zip":{"source":"iana","compressible":false},"application/batch-smtp":{"source":"iana"},"application/bdoc":{"compressible":false,"extensions":["bdoc"]},"application/beep+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/calendar+json":{"source":"iana","compressible":true},"application/calendar+xml":{"source":"iana","compressible":true,"extensions":["xcs"]},"application/call-completion":{"source":"iana"},"application/cals-1840":{"source":"iana"},"application/captive+json":{"source":"iana","compressible":true},"application/cbor":{"source":"iana"},"application/cbor-seq":{"source":"iana"},"application/cccex":{"source":"iana"},"application/ccmp+xml":{"source":"iana","compressible":true},"application/ccxml+xml":{"source":"iana","compressible":true,"extensions":["ccxml"]},"application/cdfx+xml":{"source":"iana","compressible":true,"extensions":["cdfx"]},"application/cdmi-capability":{"source":"iana","extensions":["cdmia"]},"application/cdmi-container":{"source":"iana","extensions":["cdmic"]},"application/cdmi-domain":{"source":"iana","extensions":["cdmid"]},"application/cdmi-object":{"source":"iana","extensions":["cdmio"]},"application/cdmi-queue":{"source":"iana","extensions":["cdmiq"]},"application/cdni":{"source":"iana"},"application/cea":{"source":"iana"},"application/cea-2018+xml":{"source":"iana","compressible":true},"application/cellml+xml":{"source":"iana","compressible":true},"application/cfw":{"source":"iana"},"application/city+json":{"source":"iana","compressible":true},"application/clr":{"source":"iana"},"application/clue+xml":{"source":"iana","compressible":true},"application/clue_info+xml":{"source":"iana","compressible":true},"application/cms":{"source":"iana"},"application/cnrp+xml":{"source":"iana","compressible":true},"application/coap-group+json":{"source":"iana","compressible":true},"application/coap-payload":{"source":"iana"},"application/commonground":{"source":"iana"},"application/conference-info+xml":{"source":"iana","compressible":true},"application/cose":{"source":"iana"},"application/cose-key":{"source":"iana"},"application/cose-key-set":{"source":"iana"},"application/cpl+xml":{"source":"iana","compressible":true,"extensions":["cpl"]},"application/csrattrs":{"source":"iana"},"application/csta+xml":{"source":"iana","compressible":true},"application/cstadata+xml":{"source":"iana","compressible":true},"application/csvm+json":{"source":"iana","compressible":true},"application/cu-seeme":{"source":"apache","extensions":["cu"]},"application/cwt":{"source":"iana"},"application/cybercash":{"source":"iana"},"application/dart":{"compressible":true},"application/dash+xml":{"source":"iana","compressible":true,"extensions":["mpd"]},"application/dash-patch+xml":{"source":"iana","compressible":true,"extensions":["mpp"]},"application/dashdelta":{"source":"iana"},"application/davmount+xml":{"source":"iana","compressible":true,"extensions":["davmount"]},"application/dca-rft":{"source":"iana"},"application/dcd":{"source":"iana"},"application/dec-dx":{"source":"iana"},"application/dialog-info+xml":{"source":"iana","compressible":true},"application/dicom":{"source":"iana"},"application/dicom+json":{"source":"iana","compressible":true},"application/dicom+xml":{"source":"iana","compressible":true},"application/dii":{"source":"iana"},"application/dit":{"source":"iana"},"application/dns":{"source":"iana"},"application/dns+json":{"source":"iana","compressible":true},"application/dns-message":{"source":"iana"},"application/docbook+xml":{"source":"apache","compressible":true,"extensions":["dbk"]},"application/dots+cbor":{"source":"iana"},"application/dskpp+xml":{"source":"iana","compressible":true},"application/dssc+der":{"source":"iana","extensions":["dssc"]},"application/dssc+xml":{"source":"iana","compressible":true,"extensions":["xdssc"]},"application/dvcs":{"source":"iana"},"application/ecmascript":{"source":"iana","compressible":true,"extensions":["es","ecma"]},"application/edi-consent":{"source":"iana"},"application/edi-x12":{"source":"iana","compressible":false},"application/edifact":{"source":"iana","compressible":false},"application/efi":{"source":"iana"},"application/elm+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/elm+xml":{"source":"iana","compressible":true},"application/emergencycalldata.cap+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/emergencycalldata.comment+xml":{"source":"iana","compressible":true},"application/emergencycalldata.control+xml":{"source":"iana","compressible":true},"application/emergencycalldata.deviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.ecall.msd":{"source":"iana"},"application/emergencycalldata.providerinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.serviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.subscriberinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.veds+xml":{"source":"iana","compressible":true},"application/emma+xml":{"source":"iana","compressible":true,"extensions":["emma"]},"application/emotionml+xml":{"source":"iana","compressible":true,"extensions":["emotionml"]},"application/encaprtp":{"source":"iana"},"application/epp+xml":{"source":"iana","compressible":true},"application/epub+zip":{"source":"iana","compressible":false,"extensions":["epub"]},"application/eshop":{"source":"iana"},"application/exi":{"source":"iana","extensions":["exi"]},"application/expect-ct-report+json":{"source":"iana","compressible":true},"application/express":{"source":"iana","extensions":["exp"]},"application/fastinfoset":{"source":"iana"},"application/fastsoap":{"source":"iana"},"application/fdt+xml":{"source":"iana","compressible":true,"extensions":["fdt"]},"application/fhir+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/fhir+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/fido.trusted-apps+json":{"compressible":true},"application/fits":{"source":"iana"},"application/flexfec":{"source":"iana"},"application/font-sfnt":{"source":"iana"},"application/font-tdpfr":{"source":"iana","extensions":["pfr"]},"application/font-woff":{"source":"iana","compressible":false},"application/framework-attributes+xml":{"source":"iana","compressible":true},"application/geo+json":{"source":"iana","compressible":true,"extensions":["geojson"]},"application/geo+json-seq":{"source":"iana"},"application/geopackage+sqlite3":{"source":"iana"},"application/geoxacml+xml":{"source":"iana","compressible":true},"application/gltf-buffer":{"source":"iana"},"application/gml+xml":{"source":"iana","compressible":true,"extensions":["gml"]},"application/gpx+xml":{"source":"apache","compressible":true,"extensions":["gpx"]},"application/gxf":{"source":"apache","extensions":["gxf"]},"application/gzip":{"source":"iana","compressible":false,"extensions":["gz"]},"application/h224":{"source":"iana"},"application/held+xml":{"source":"iana","compressible":true},"application/hjson":{"extensions":["hjson"]},"application/http":{"source":"iana"},"application/hyperstudio":{"source":"iana","extensions":["stk"]},"application/ibe-key-request+xml":{"source":"iana","compressible":true},"application/ibe-pkg-reply+xml":{"source":"iana","compressible":true},"application/ibe-pp-data":{"source":"iana"},"application/iges":{"source":"iana"},"application/im-iscomposing+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/index":{"source":"iana"},"application/index.cmd":{"source":"iana"},"application/index.obj":{"source":"iana"},"application/index.response":{"source":"iana"},"application/index.vnd":{"source":"iana"},"application/inkml+xml":{"source":"iana","compressible":true,"extensions":["ink","inkml"]},"application/iotp":{"source":"iana"},"application/ipfix":{"source":"iana","extensions":["ipfix"]},"application/ipp":{"source":"iana"},"application/isup":{"source":"iana"},"application/its+xml":{"source":"iana","compressible":true,"extensions":["its"]},"application/java-archive":{"source":"apache","compressible":false,"extensions":["jar","war","ear"]},"application/java-serialized-object":{"source":"apache","compressible":false,"extensions":["ser"]},"application/java-vm":{"source":"apache","compressible":false,"extensions":["class"]},"application/javascript":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["js","mjs"]},"application/jf2feed+json":{"source":"iana","compressible":true},"application/jose":{"source":"iana"},"application/jose+json":{"source":"iana","compressible":true},"application/jrd+json":{"source":"iana","compressible":true},"application/jscalendar+json":{"source":"iana","compressible":true},"application/json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["json","map"]},"application/json-patch+json":{"source":"iana","compressible":true},"application/json-seq":{"source":"iana"},"application/json5":{"extensions":["json5"]},"application/jsonml+json":{"source":"apache","compressible":true,"extensions":["jsonml"]},"application/jwk+json":{"source":"iana","compressible":true},"application/jwk-set+json":{"source":"iana","compressible":true},"application/jwt":{"source":"iana"},"application/kpml-request+xml":{"source":"iana","compressible":true},"application/kpml-response+xml":{"source":"iana","compressible":true},"application/ld+json":{"source":"iana","compressible":true,"extensions":["jsonld"]},"application/lgr+xml":{"source":"iana","compressible":true,"extensions":["lgr"]},"application/link-format":{"source":"iana"},"application/load-control+xml":{"source":"iana","compressible":true},"application/lost+xml":{"source":"iana","compressible":true,"extensions":["lostxml"]},"application/lostsync+xml":{"source":"iana","compressible":true},"application/lpf+zip":{"source":"iana","compressible":false},"application/lxf":{"source":"iana"},"application/mac-binhex40":{"source":"iana","extensions":["hqx"]},"application/mac-compactpro":{"source":"apache","extensions":["cpt"]},"application/macwriteii":{"source":"iana"},"application/mads+xml":{"source":"iana","compressible":true,"extensions":["mads"]},"application/manifest+json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["webmanifest"]},"application/marc":{"source":"iana","extensions":["mrc"]},"application/marcxml+xml":{"source":"iana","compressible":true,"extensions":["mrcx"]},"application/mathematica":{"source":"iana","extensions":["ma","nb","mb"]},"application/mathml+xml":{"source":"iana","compressible":true,"extensions":["mathml"]},"application/mathml-content+xml":{"source":"iana","compressible":true},"application/mathml-presentation+xml":{"source":"iana","compressible":true},"application/mbms-associated-procedure-description+xml":{"source":"iana","compressible":true},"application/mbms-deregister+xml":{"source":"iana","compressible":true},"application/mbms-envelope+xml":{"source":"iana","compressible":true},"application/mbms-msk+xml":{"source":"iana","compressible":true},"application/mbms-msk-response+xml":{"source":"iana","compressible":true},"application/mbms-protection-description+xml":{"source":"iana","compressible":true},"application/mbms-reception-report+xml":{"source":"iana","compressible":true},"application/mbms-register+xml":{"source":"iana","compressible":true},"application/mbms-register-response+xml":{"source":"iana","compressible":true},"application/mbms-schedule+xml":{"source":"iana","compressible":true},"application/mbms-user-service-description+xml":{"source":"iana","compressible":true},"application/mbox":{"source":"iana","extensions":["mbox"]},"application/media-policy-dataset+xml":{"source":"iana","compressible":true,"extensions":["mpf"]},"application/media_control+xml":{"source":"iana","compressible":true},"application/mediaservercontrol+xml":{"source":"iana","compressible":true,"extensions":["mscml"]},"application/merge-patch+json":{"source":"iana","compressible":true},"application/metalink+xml":{"source":"apache","compressible":true,"extensions":["metalink"]},"application/metalink4+xml":{"source":"iana","compressible":true,"extensions":["meta4"]},"application/mets+xml":{"source":"iana","compressible":true,"extensions":["mets"]},"application/mf4":{"source":"iana"},"application/mikey":{"source":"iana"},"application/mipc":{"source":"iana"},"application/missing-blocks+cbor-seq":{"source":"iana"},"application/mmt-aei+xml":{"source":"iana","compressible":true,"extensions":["maei"]},"application/mmt-usd+xml":{"source":"iana","compressible":true,"extensions":["musd"]},"application/mods+xml":{"source":"iana","compressible":true,"extensions":["mods"]},"application/moss-keys":{"source":"iana"},"application/moss-signature":{"source":"iana"},"application/mosskey-data":{"source":"iana"},"application/mosskey-request":{"source":"iana"},"application/mp21":{"source":"iana","extensions":["m21","mp21"]},"application/mp4":{"source":"iana","extensions":["mp4s","m4p"]},"application/mpeg4-generic":{"source":"iana"},"application/mpeg4-iod":{"source":"iana"},"application/mpeg4-iod-xmt":{"source":"iana"},"application/mrb-consumer+xml":{"source":"iana","compressible":true},"application/mrb-publish+xml":{"source":"iana","compressible":true},"application/msc-ivr+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msc-mixer+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msword":{"source":"iana","compressible":false,"extensions":["doc","dot"]},"application/mud+json":{"source":"iana","compressible":true},"application/multipart-core":{"source":"iana"},"application/mxf":{"source":"iana","extensions":["mxf"]},"application/n-quads":{"source":"iana","extensions":["nq"]},"application/n-triples":{"source":"iana","extensions":["nt"]},"application/nasdata":{"source":"iana"},"application/news-checkgroups":{"source":"iana","charset":"US-ASCII"},"application/news-groupinfo":{"source":"iana","charset":"US-ASCII"},"application/news-transmission":{"source":"iana"},"application/nlsml+xml":{"source":"iana","compressible":true},"application/node":{"source":"iana","extensions":["cjs"]},"application/nss":{"source":"iana"},"application/oauth-authz-req+jwt":{"source":"iana"},"application/oblivious-dns-message":{"source":"iana"},"application/ocsp-request":{"source":"iana"},"application/ocsp-response":{"source":"iana"},"application/octet-stream":{"source":"iana","compressible":false,"extensions":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{"source":"iana","extensions":["oda"]},"application/odm+xml":{"source":"iana","compressible":true},"application/odx":{"source":"iana"},"application/oebps-package+xml":{"source":"iana","compressible":true,"extensions":["opf"]},"application/ogg":{"source":"iana","compressible":false,"extensions":["ogx"]},"application/omdoc+xml":{"source":"apache","compressible":true,"extensions":["omdoc"]},"application/onenote":{"source":"apache","extensions":["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{"source":"iana","compressible":true},"application/oscore":{"source":"iana"},"application/oxps":{"source":"iana","extensions":["oxps"]},"application/p21":{"source":"iana"},"application/p21+zip":{"source":"iana","compressible":false},"application/p2p-overlay+xml":{"source":"iana","compressible":true,"extensions":["relo"]},"application/parityfec":{"source":"iana"},"application/passport":{"source":"iana"},"application/patch-ops-error+xml":{"source":"iana","compressible":true,"extensions":["xer"]},"application/pdf":{"source":"iana","compressible":false,"extensions":["pdf"]},"application/pdx":{"source":"iana"},"application/pem-certificate-chain":{"source":"iana"},"application/pgp-encrypted":{"source":"iana","compressible":false,"extensions":["pgp"]},"application/pgp-keys":{"source":"iana","extensions":["asc"]},"application/pgp-signature":{"source":"iana","extensions":["asc","sig"]},"application/pics-rules":{"source":"apache","extensions":["prf"]},"application/pidf+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pidf-diff+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pkcs10":{"source":"iana","extensions":["p10"]},"application/pkcs12":{"source":"iana"},"application/pkcs7-mime":{"source":"iana","extensions":["p7m","p7c"]},"application/pkcs7-signature":{"source":"iana","extensions":["p7s"]},"application/pkcs8":{"source":"iana","extensions":["p8"]},"application/pkcs8-encrypted":{"source":"iana"},"application/pkix-attr-cert":{"source":"iana","extensions":["ac"]},"application/pkix-cert":{"source":"iana","extensions":["cer"]},"application/pkix-crl":{"source":"iana","extensions":["crl"]},"application/pkix-pkipath":{"source":"iana","extensions":["pkipath"]},"application/pkixcmp":{"source":"iana","extensions":["pki"]},"application/pls+xml":{"source":"iana","compressible":true,"extensions":["pls"]},"application/poc-settings+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/postscript":{"source":"iana","compressible":true,"extensions":["ai","eps","ps"]},"application/ppsp-tracker+json":{"source":"iana","compressible":true},"application/problem+json":{"source":"iana","compressible":true},"application/problem+xml":{"source":"iana","compressible":true},"application/provenance+xml":{"source":"iana","compressible":true,"extensions":["provx"]},"application/prs.alvestrand.titrax-sheet":{"source":"iana"},"application/prs.cww":{"source":"iana","extensions":["cww"]},"application/prs.cyn":{"source":"iana","charset":"7-BIT"},"application/prs.hpub+zip":{"source":"iana","compressible":false},"application/prs.nprend":{"source":"iana"},"application/prs.plucker":{"source":"iana"},"application/prs.rdf-xml-crypt":{"source":"iana"},"application/prs.xsf+xml":{"source":"iana","compressible":true},"application/pskc+xml":{"source":"iana","compressible":true,"extensions":["pskcxml"]},"application/pvd+json":{"source":"iana","compressible":true},"application/qsig":{"source":"iana"},"application/raml+yaml":{"compressible":true,"extensions":["raml"]},"application/raptorfec":{"source":"iana"},"application/rdap+json":{"source":"iana","compressible":true},"application/rdf+xml":{"source":"iana","compressible":true,"extensions":["rdf","owl"]},"application/reginfo+xml":{"source":"iana","compressible":true,"extensions":["rif"]},"application/relax-ng-compact-syntax":{"source":"iana","extensions":["rnc"]},"application/remote-printing":{"source":"iana"},"application/reputon+json":{"source":"iana","compressible":true},"application/resource-lists+xml":{"source":"iana","compressible":true,"extensions":["rl"]},"application/resource-lists-diff+xml":{"source":"iana","compressible":true,"extensions":["rld"]},"application/rfc+xml":{"source":"iana","compressible":true},"application/riscos":{"source":"iana"},"application/rlmi+xml":{"source":"iana","compressible":true},"application/rls-services+xml":{"source":"iana","compressible":true,"extensions":["rs"]},"application/route-apd+xml":{"source":"iana","compressible":true,"extensions":["rapd"]},"application/route-s-tsid+xml":{"source":"iana","compressible":true,"extensions":["sls"]},"application/route-usd+xml":{"source":"iana","compressible":true,"extensions":["rusd"]},"application/rpki-ghostbusters":{"source":"iana","extensions":["gbr"]},"application/rpki-manifest":{"source":"iana","extensions":["mft"]},"application/rpki-publication":{"source":"iana"},"application/rpki-roa":{"source":"iana","extensions":["roa"]},"application/rpki-updown":{"source":"iana"},"application/rsd+xml":{"source":"apache","compressible":true,"extensions":["rsd"]},"application/rss+xml":{"source":"apache","compressible":true,"extensions":["rss"]},"application/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"application/rtploopback":{"source":"iana"},"application/rtx":{"source":"iana"},"application/samlassertion+xml":{"source":"iana","compressible":true},"application/samlmetadata+xml":{"source":"iana","compressible":true},"application/sarif+json":{"source":"iana","compressible":true},"application/sarif-external-properties+json":{"source":"iana","compressible":true},"application/sbe":{"source":"iana"},"application/sbml+xml":{"source":"iana","compressible":true,"extensions":["sbml"]},"application/scaip+xml":{"source":"iana","compressible":true},"application/scim+json":{"source":"iana","compressible":true},"application/scvp-cv-request":{"source":"iana","extensions":["scq"]},"application/scvp-cv-response":{"source":"iana","extensions":["scs"]},"application/scvp-vp-request":{"source":"iana","extensions":["spq"]},"application/scvp-vp-response":{"source":"iana","extensions":["spp"]},"application/sdp":{"source":"iana","extensions":["sdp"]},"application/secevent+jwt":{"source":"iana"},"application/senml+cbor":{"source":"iana"},"application/senml+json":{"source":"iana","compressible":true},"application/senml+xml":{"source":"iana","compressible":true,"extensions":["senmlx"]},"application/senml-etch+cbor":{"source":"iana"},"application/senml-etch+json":{"source":"iana","compressible":true},"application/senml-exi":{"source":"iana"},"application/sensml+cbor":{"source":"iana"},"application/sensml+json":{"source":"iana","compressible":true},"application/sensml+xml":{"source":"iana","compressible":true,"extensions":["sensmlx"]},"application/sensml-exi":{"source":"iana"},"application/sep+xml":{"source":"iana","compressible":true},"application/sep-exi":{"source":"iana"},"application/session-info":{"source":"iana"},"application/set-payment":{"source":"iana"},"application/set-payment-initiation":{"source":"iana","extensions":["setpay"]},"application/set-registration":{"source":"iana"},"application/set-registration-initiation":{"source":"iana","extensions":["setreg"]},"application/sgml":{"source":"iana"},"application/sgml-open-catalog":{"source":"iana"},"application/shf+xml":{"source":"iana","compressible":true,"extensions":["shf"]},"application/sieve":{"source":"iana","extensions":["siv","sieve"]},"application/simple-filter+xml":{"source":"iana","compressible":true},"application/simple-message-summary":{"source":"iana"},"application/simplesymbolcontainer":{"source":"iana"},"application/sipc":{"source":"iana"},"application/slate":{"source":"iana"},"application/smil":{"source":"iana"},"application/smil+xml":{"source":"iana","compressible":true,"extensions":["smi","smil"]},"application/smpte336m":{"source":"iana"},"application/soap+fastinfoset":{"source":"iana"},"application/soap+xml":{"source":"iana","compressible":true},"application/sparql-query":{"source":"iana","extensions":["rq"]},"application/sparql-results+xml":{"source":"iana","compressible":true,"extensions":["srx"]},"application/spdx+json":{"source":"iana","compressible":true},"application/spirits-event+xml":{"source":"iana","compressible":true},"application/sql":{"source":"iana"},"application/srgs":{"source":"iana","extensions":["gram"]},"application/srgs+xml":{"source":"iana","compressible":true,"extensions":["grxml"]},"application/sru+xml":{"source":"iana","compressible":true,"extensions":["sru"]},"application/ssdl+xml":{"source":"apache","compressible":true,"extensions":["ssdl"]},"application/ssml+xml":{"source":"iana","compressible":true,"extensions":["ssml"]},"application/stix+json":{"source":"iana","compressible":true},"application/swid+xml":{"source":"iana","compressible":true,"extensions":["swidtag"]},"application/tamp-apex-update":{"source":"iana"},"application/tamp-apex-update-confirm":{"source":"iana"},"application/tamp-community-update":{"source":"iana"},"application/tamp-community-update-confirm":{"source":"iana"},"application/tamp-error":{"source":"iana"},"application/tamp-sequence-adjust":{"source":"iana"},"application/tamp-sequence-adjust-confirm":{"source":"iana"},"application/tamp-status-query":{"source":"iana"},"application/tamp-status-response":{"source":"iana"},"application/tamp-update":{"source":"iana"},"application/tamp-update-confirm":{"source":"iana"},"application/tar":{"compressible":true},"application/taxii+json":{"source":"iana","compressible":true},"application/td+json":{"source":"iana","compressible":true},"application/tei+xml":{"source":"iana","compressible":true,"extensions":["tei","teicorpus"]},"application/tetra_isi":{"source":"iana"},"application/thraud+xml":{"source":"iana","compressible":true,"extensions":["tfi"]},"application/timestamp-query":{"source":"iana"},"application/timestamp-reply":{"source":"iana"},"application/timestamped-data":{"source":"iana","extensions":["tsd"]},"application/tlsrpt+gzip":{"source":"iana"},"application/tlsrpt+json":{"source":"iana","compressible":true},"application/tnauthlist":{"source":"iana"},"application/token-introspection+jwt":{"source":"iana"},"application/toml":{"compressible":true,"extensions":["toml"]},"application/trickle-ice-sdpfrag":{"source":"iana"},"application/trig":{"source":"iana","extensions":["trig"]},"application/ttml+xml":{"source":"iana","compressible":true,"extensions":["ttml"]},"application/tve-trigger":{"source":"iana"},"application/tzif":{"source":"iana"},"application/tzif-leap":{"source":"iana"},"application/ubjson":{"compressible":false,"extensions":["ubj"]},"application/ulpfec":{"source":"iana"},"application/urc-grpsheet+xml":{"source":"iana","compressible":true},"application/urc-ressheet+xml":{"source":"iana","compressible":true,"extensions":["rsheet"]},"application/urc-targetdesc+xml":{"source":"iana","compressible":true,"extensions":["td"]},"application/urc-uisocketdesc+xml":{"source":"iana","compressible":true},"application/vcard+json":{"source":"iana","compressible":true},"application/vcard+xml":{"source":"iana","compressible":true},"application/vemmi":{"source":"iana"},"application/vividence.scriptfile":{"source":"apache"},"application/vnd.1000minds.decision-model+xml":{"source":"iana","compressible":true,"extensions":["1km"]},"application/vnd.3gpp-prose+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-prose-pc3ch+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-v2x-local-service-information":{"source":"iana"},"application/vnd.3gpp.5gnas":{"source":"iana"},"application/vnd.3gpp.access-transfer-events+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.bsf+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gmop+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gtpc":{"source":"iana"},"application/vnd.3gpp.interworking-data":{"source":"iana"},"application/vnd.3gpp.lpp":{"source":"iana"},"application/vnd.3gpp.mc-signalling-ear":{"source":"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-payload":{"source":"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-signalling":{"source":"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-floor-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-signed+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-init-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-transmission-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mid-call+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ngap":{"source":"iana"},"application/vnd.3gpp.pfcp":{"source":"iana"},"application/vnd.3gpp.pic-bw-large":{"source":"iana","extensions":["plb"]},"application/vnd.3gpp.pic-bw-small":{"source":"iana","extensions":["psb"]},"application/vnd.3gpp.pic-bw-var":{"source":"iana","extensions":["pvb"]},"application/vnd.3gpp.s1ap":{"source":"iana"},"application/vnd.3gpp.sms":{"source":"iana"},"application/vnd.3gpp.sms+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-ext+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.state-and-event-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ussd+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.bcmcsinfo+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.sms":{"source":"iana"},"application/vnd.3gpp2.tcap":{"source":"iana","extensions":["tcap"]},"application/vnd.3lightssoftware.imagescal":{"source":"iana"},"application/vnd.3m.post-it-notes":{"source":"iana","extensions":["pwn"]},"application/vnd.accpac.simply.aso":{"source":"iana","extensions":["aso"]},"application/vnd.accpac.simply.imp":{"source":"iana","extensions":["imp"]},"application/vnd.acucobol":{"source":"iana","extensions":["acu"]},"application/vnd.acucorp":{"source":"iana","extensions":["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{"source":"apache","compressible":false,"extensions":["air"]},"application/vnd.adobe.flash.movie":{"source":"iana"},"application/vnd.adobe.formscentral.fcdt":{"source":"iana","extensions":["fcdt"]},"application/vnd.adobe.fxp":{"source":"iana","extensions":["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{"source":"iana"},"application/vnd.adobe.xdp+xml":{"source":"iana","compressible":true,"extensions":["xdp"]},"application/vnd.adobe.xfdf":{"source":"iana","extensions":["xfdf"]},"application/vnd.aether.imp":{"source":"iana"},"application/vnd.afpc.afplinedata":{"source":"iana"},"application/vnd.afpc.afplinedata-pagedef":{"source":"iana"},"application/vnd.afpc.cmoca-cmresource":{"source":"iana"},"application/vnd.afpc.foca-charset":{"source":"iana"},"application/vnd.afpc.foca-codedfont":{"source":"iana"},"application/vnd.afpc.foca-codepage":{"source":"iana"},"application/vnd.afpc.modca":{"source":"iana"},"application/vnd.afpc.modca-cmtable":{"source":"iana"},"application/vnd.afpc.modca-formdef":{"source":"iana"},"application/vnd.afpc.modca-mediummap":{"source":"iana"},"application/vnd.afpc.modca-objectcontainer":{"source":"iana"},"application/vnd.afpc.modca-overlay":{"source":"iana"},"application/vnd.afpc.modca-pagesegment":{"source":"iana"},"application/vnd.age":{"source":"iana","extensions":["age"]},"application/vnd.ah-barcode":{"source":"iana"},"application/vnd.ahead.space":{"source":"iana","extensions":["ahead"]},"application/vnd.airzip.filesecure.azf":{"source":"iana","extensions":["azf"]},"application/vnd.airzip.filesecure.azs":{"source":"iana","extensions":["azs"]},"application/vnd.amadeus+json":{"source":"iana","compressible":true},"application/vnd.amazon.ebook":{"source":"apache","extensions":["azw"]},"application/vnd.amazon.mobi8-ebook":{"source":"iana"},"application/vnd.americandynamics.acc":{"source":"iana","extensions":["acc"]},"application/vnd.amiga.ami":{"source":"iana","extensions":["ami"]},"application/vnd.amundsen.maze+xml":{"source":"iana","compressible":true},"application/vnd.android.ota":{"source":"iana"},"application/vnd.android.package-archive":{"source":"apache","compressible":false,"extensions":["apk"]},"application/vnd.anki":{"source":"iana"},"application/vnd.anser-web-certificate-issue-initiation":{"source":"iana","extensions":["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{"source":"apache","extensions":["fti"]},"application/vnd.antix.game-component":{"source":"iana","extensions":["atx"]},"application/vnd.apache.arrow.file":{"source":"iana"},"application/vnd.apache.arrow.stream":{"source":"iana"},"application/vnd.apache.thrift.binary":{"source":"iana"},"application/vnd.apache.thrift.compact":{"source":"iana"},"application/vnd.apache.thrift.json":{"source":"iana"},"application/vnd.api+json":{"source":"iana","compressible":true},"application/vnd.aplextor.warrp+json":{"source":"iana","compressible":true},"application/vnd.apothekende.reservation+json":{"source":"iana","compressible":true},"application/vnd.apple.installer+xml":{"source":"iana","compressible":true,"extensions":["mpkg"]},"application/vnd.apple.keynote":{"source":"iana","extensions":["key"]},"application/vnd.apple.mpegurl":{"source":"iana","extensions":["m3u8"]},"application/vnd.apple.numbers":{"source":"iana","extensions":["numbers"]},"application/vnd.apple.pages":{"source":"iana","extensions":["pages"]},"application/vnd.apple.pkpass":{"compressible":false,"extensions":["pkpass"]},"application/vnd.arastra.swi":{"source":"iana"},"application/vnd.aristanetworks.swi":{"source":"iana","extensions":["swi"]},"application/vnd.artisan+json":{"source":"iana","compressible":true},"application/vnd.artsquare":{"source":"iana"},"application/vnd.astraea-software.iota":{"source":"iana","extensions":["iota"]},"application/vnd.audiograph":{"source":"iana","extensions":["aep"]},"application/vnd.autopackage":{"source":"iana"},"application/vnd.avalon+json":{"source":"iana","compressible":true},"application/vnd.avistar+xml":{"source":"iana","compressible":true},"application/vnd.balsamiq.bmml+xml":{"source":"iana","compressible":true,"extensions":["bmml"]},"application/vnd.balsamiq.bmpr":{"source":"iana"},"application/vnd.banana-accounting":{"source":"iana"},"application/vnd.bbf.usp.error":{"source":"iana"},"application/vnd.bbf.usp.msg":{"source":"iana"},"application/vnd.bbf.usp.msg+json":{"source":"iana","compressible":true},"application/vnd.bekitzur-stech+json":{"source":"iana","compressible":true},"application/vnd.bint.med-content":{"source":"iana"},"application/vnd.biopax.rdf+xml":{"source":"iana","compressible":true},"application/vnd.blink-idb-value-wrapper":{"source":"iana"},"application/vnd.blueice.multipass":{"source":"iana","extensions":["mpm"]},"application/vnd.bluetooth.ep.oob":{"source":"iana"},"application/vnd.bluetooth.le.oob":{"source":"iana"},"application/vnd.bmi":{"source":"iana","extensions":["bmi"]},"application/vnd.bpf":{"source":"iana"},"application/vnd.bpf3":{"source":"iana"},"application/vnd.businessobjects":{"source":"iana","extensions":["rep"]},"application/vnd.byu.uapi+json":{"source":"iana","compressible":true},"application/vnd.cab-jscript":{"source":"iana"},"application/vnd.canon-cpdl":{"source":"iana"},"application/vnd.canon-lips":{"source":"iana"},"application/vnd.capasystems-pg+json":{"source":"iana","compressible":true},"application/vnd.cendio.thinlinc.clientconf":{"source":"iana"},"application/vnd.century-systems.tcp_stream":{"source":"iana"},"application/vnd.chemdraw+xml":{"source":"iana","compressible":true,"extensions":["cdxml"]},"application/vnd.chess-pgn":{"source":"iana"},"application/vnd.chipnuts.karaoke-mmd":{"source":"iana","extensions":["mmd"]},"application/vnd.ciedi":{"source":"iana"},"application/vnd.cinderella":{"source":"iana","extensions":["cdy"]},"application/vnd.cirpack.isdn-ext":{"source":"iana"},"application/vnd.citationstyles.style+xml":{"source":"iana","compressible":true,"extensions":["csl"]},"application/vnd.claymore":{"source":"iana","extensions":["cla"]},"application/vnd.cloanto.rp9":{"source":"iana","extensions":["rp9"]},"application/vnd.clonk.c4group":{"source":"iana","extensions":["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{"source":"iana","extensions":["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{"source":"iana","extensions":["c11amz"]},"application/vnd.coffeescript":{"source":"iana"},"application/vnd.collabio.xodocuments.document":{"source":"iana"},"application/vnd.collabio.xodocuments.document-template":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation-template":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{"source":"iana"},"application/vnd.collection+json":{"source":"iana","compressible":true},"application/vnd.collection.doc+json":{"source":"iana","compressible":true},"application/vnd.collection.next+json":{"source":"iana","compressible":true},"application/vnd.comicbook+zip":{"source":"iana","compressible":false},"application/vnd.comicbook-rar":{"source":"iana"},"application/vnd.commerce-battelle":{"source":"iana"},"application/vnd.commonspace":{"source":"iana","extensions":["csp"]},"application/vnd.contact.cmsg":{"source":"iana","extensions":["cdbcmsg"]},"application/vnd.coreos.ignition+json":{"source":"iana","compressible":true},"application/vnd.cosmocaller":{"source":"iana","extensions":["cmc"]},"application/vnd.crick.clicker":{"source":"iana","extensions":["clkx"]},"application/vnd.crick.clicker.keyboard":{"source":"iana","extensions":["clkk"]},"application/vnd.crick.clicker.palette":{"source":"iana","extensions":["clkp"]},"application/vnd.crick.clicker.template":{"source":"iana","extensions":["clkt"]},"application/vnd.crick.clicker.wordbank":{"source":"iana","extensions":["clkw"]},"application/vnd.criticaltools.wbs+xml":{"source":"iana","compressible":true,"extensions":["wbs"]},"application/vnd.cryptii.pipe+json":{"source":"iana","compressible":true},"application/vnd.crypto-shade-file":{"source":"iana"},"application/vnd.cryptomator.encrypted":{"source":"iana"},"application/vnd.cryptomator.vault":{"source":"iana"},"application/vnd.ctc-posml":{"source":"iana","extensions":["pml"]},"application/vnd.ctct.ws+xml":{"source":"iana","compressible":true},"application/vnd.cups-pdf":{"source":"iana"},"application/vnd.cups-postscript":{"source":"iana"},"application/vnd.cups-ppd":{"source":"iana","extensions":["ppd"]},"application/vnd.cups-raster":{"source":"iana"},"application/vnd.cups-raw":{"source":"iana"},"application/vnd.curl":{"source":"iana"},"application/vnd.curl.car":{"source":"apache","extensions":["car"]},"application/vnd.curl.pcurl":{"source":"apache","extensions":["pcurl"]},"application/vnd.cyan.dean.root+xml":{"source":"iana","compressible":true},"application/vnd.cybank":{"source":"iana"},"application/vnd.cyclonedx+json":{"source":"iana","compressible":true},"application/vnd.cyclonedx+xml":{"source":"iana","compressible":true},"application/vnd.d2l.coursepackage1p0+zip":{"source":"iana","compressible":false},"application/vnd.d3m-dataset":{"source":"iana"},"application/vnd.d3m-problem":{"source":"iana"},"application/vnd.dart":{"source":"iana","compressible":true,"extensions":["dart"]},"application/vnd.data-vision.rdz":{"source":"iana","extensions":["rdz"]},"application/vnd.datapackage+json":{"source":"iana","compressible":true},"application/vnd.dataresource+json":{"source":"iana","compressible":true},"application/vnd.dbf":{"source":"iana","extensions":["dbf"]},"application/vnd.debian.binary-package":{"source":"iana"},"application/vnd.dece.data":{"source":"iana","extensions":["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{"source":"iana","compressible":true,"extensions":["uvt","uvvt"]},"application/vnd.dece.unspecified":{"source":"iana","extensions":["uvx","uvvx"]},"application/vnd.dece.zip":{"source":"iana","extensions":["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{"source":"iana","extensions":["fe_launch"]},"application/vnd.desmume.movie":{"source":"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{"source":"iana"},"application/vnd.dm.delegation+xml":{"source":"iana","compressible":true},"application/vnd.dna":{"source":"iana","extensions":["dna"]},"application/vnd.document+json":{"source":"iana","compressible":true},"application/vnd.dolby.mlp":{"source":"apache","extensions":["mlp"]},"application/vnd.dolby.mobile.1":{"source":"iana"},"application/vnd.dolby.mobile.2":{"source":"iana"},"application/vnd.doremir.scorecloud-binary-document":{"source":"iana"},"application/vnd.dpgraph":{"source":"iana","extensions":["dpg"]},"application/vnd.dreamfactory":{"source":"iana","extensions":["dfac"]},"application/vnd.drive+json":{"source":"iana","compressible":true},"application/vnd.ds-keypoint":{"source":"apache","extensions":["kpxx"]},"application/vnd.dtg.local":{"source":"iana"},"application/vnd.dtg.local.flash":{"source":"iana"},"application/vnd.dtg.local.html":{"source":"iana"},"application/vnd.dvb.ait":{"source":"iana","extensions":["ait"]},"application/vnd.dvb.dvbisl+xml":{"source":"iana","compressible":true},"application/vnd.dvb.dvbj":{"source":"iana"},"application/vnd.dvb.esgcontainer":{"source":"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess2":{"source":"iana"},"application/vnd.dvb.ipdcesgpdd":{"source":"iana"},"application/vnd.dvb.ipdcroaming":{"source":"iana"},"application/vnd.dvb.iptv.alfec-base":{"source":"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{"source":"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-container+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-generic+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-msglist+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-request+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-response+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-init+xml":{"source":"iana","compressible":true},"application/vnd.dvb.pfr":{"source":"iana"},"application/vnd.dvb.service":{"source":"iana","extensions":["svc"]},"application/vnd.dxr":{"source":"iana"},"application/vnd.dynageo":{"source":"iana","extensions":["geo"]},"application/vnd.dzr":{"source":"iana"},"application/vnd.easykaraoke.cdgdownload":{"source":"iana"},"application/vnd.ecdis-update":{"source":"iana"},"application/vnd.ecip.rlp":{"source":"iana"},"application/vnd.eclipse.ditto+json":{"source":"iana","compressible":true},"application/vnd.ecowin.chart":{"source":"iana","extensions":["mag"]},"application/vnd.ecowin.filerequest":{"source":"iana"},"application/vnd.ecowin.fileupdate":{"source":"iana"},"application/vnd.ecowin.series":{"source":"iana"},"application/vnd.ecowin.seriesrequest":{"source":"iana"},"application/vnd.ecowin.seriesupdate":{"source":"iana"},"application/vnd.efi.img":{"source":"iana"},"application/vnd.efi.iso":{"source":"iana"},"application/vnd.emclient.accessrequest+xml":{"source":"iana","compressible":true},"application/vnd.enliven":{"source":"iana","extensions":["nml"]},"application/vnd.enphase.envoy":{"source":"iana"},"application/vnd.eprints.data+xml":{"source":"iana","compressible":true},"application/vnd.epson.esf":{"source":"iana","extensions":["esf"]},"application/vnd.epson.msf":{"source":"iana","extensions":["msf"]},"application/vnd.epson.quickanime":{"source":"iana","extensions":["qam"]},"application/vnd.epson.salt":{"source":"iana","extensions":["slt"]},"application/vnd.epson.ssf":{"source":"iana","extensions":["ssf"]},"application/vnd.ericsson.quickcall":{"source":"iana"},"application/vnd.espass-espass+zip":{"source":"iana","compressible":false},"application/vnd.eszigno3+xml":{"source":"iana","compressible":true,"extensions":["es3","et3"]},"application/vnd.etsi.aoc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.asic-e+zip":{"source":"iana","compressible":false},"application/vnd.etsi.asic-s+zip":{"source":"iana","compressible":false},"application/vnd.etsi.cug+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvcommand+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-bc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-cod+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-npvr+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvservice+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsync+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvueprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mcid+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mheg5":{"source":"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{"source":"iana","compressible":true},"application/vnd.etsi.pstn+xml":{"source":"iana","compressible":true},"application/vnd.etsi.sci+xml":{"source":"iana","compressible":true},"application/vnd.etsi.simservs+xml":{"source":"iana","compressible":true},"application/vnd.etsi.timestamp-token":{"source":"iana"},"application/vnd.etsi.tsl+xml":{"source":"iana","compressible":true},"application/vnd.etsi.tsl.der":{"source":"iana"},"application/vnd.eu.kasparian.car+json":{"source":"iana","compressible":true},"application/vnd.eudora.data":{"source":"iana"},"application/vnd.evolv.ecig.profile":{"source":"iana"},"application/vnd.evolv.ecig.settings":{"source":"iana"},"application/vnd.evolv.ecig.theme":{"source":"iana"},"application/vnd.exstream-empower+zip":{"source":"iana","compressible":false},"application/vnd.exstream-package":{"source":"iana"},"application/vnd.ezpix-album":{"source":"iana","extensions":["ez2"]},"application/vnd.ezpix-package":{"source":"iana","extensions":["ez3"]},"application/vnd.f-secure.mobile":{"source":"iana"},"application/vnd.familysearch.gedcom+zip":{"source":"iana","compressible":false},"application/vnd.fastcopy-disk-image":{"source":"iana"},"application/vnd.fdf":{"source":"iana","extensions":["fdf"]},"application/vnd.fdsn.mseed":{"source":"iana","extensions":["mseed"]},"application/vnd.fdsn.seed":{"source":"iana","extensions":["seed","dataless"]},"application/vnd.ffsns":{"source":"iana"},"application/vnd.ficlab.flb+zip":{"source":"iana","compressible":false},"application/vnd.filmit.zfc":{"source":"iana"},"application/vnd.fints":{"source":"iana"},"application/vnd.firemonkeys.cloudcell":{"source":"iana"},"application/vnd.flographit":{"source":"iana","extensions":["gph"]},"application/vnd.fluxtime.clip":{"source":"iana","extensions":["ftc"]},"application/vnd.font-fontforge-sfd":{"source":"iana"},"application/vnd.framemaker":{"source":"iana","extensions":["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{"source":"iana","extensions":["fnc"]},"application/vnd.frogans.ltf":{"source":"iana","extensions":["ltf"]},"application/vnd.fsc.weblaunch":{"source":"iana","extensions":["fsc"]},"application/vnd.fujifilm.fb.docuworks":{"source":"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{"source":"iana"},"application/vnd.fujifilm.fb.docuworks.container":{"source":"iana"},"application/vnd.fujifilm.fb.jfi+xml":{"source":"iana","compressible":true},"application/vnd.fujitsu.oasys":{"source":"iana","extensions":["oas"]},"application/vnd.fujitsu.oasys2":{"source":"iana","extensions":["oa2"]},"application/vnd.fujitsu.oasys3":{"source":"iana","extensions":["oa3"]},"application/vnd.fujitsu.oasysgp":{"source":"iana","extensions":["fg5"]},"application/vnd.fujitsu.oasysprs":{"source":"iana","extensions":["bh2"]},"application/vnd.fujixerox.art-ex":{"source":"iana"},"application/vnd.fujixerox.art4":{"source":"iana"},"application/vnd.fujixerox.ddd":{"source":"iana","extensions":["ddd"]},"application/vnd.fujixerox.docuworks":{"source":"iana","extensions":["xdw"]},"application/vnd.fujixerox.docuworks.binder":{"source":"iana","extensions":["xbd"]},"application/vnd.fujixerox.docuworks.container":{"source":"iana"},"application/vnd.fujixerox.hbpl":{"source":"iana"},"application/vnd.fut-misnet":{"source":"iana"},"application/vnd.futoin+cbor":{"source":"iana"},"application/vnd.futoin+json":{"source":"iana","compressible":true},"application/vnd.fuzzysheet":{"source":"iana","extensions":["fzs"]},"application/vnd.genomatix.tuxedo":{"source":"iana","extensions":["txd"]},"application/vnd.gentics.grd+json":{"source":"iana","compressible":true},"application/vnd.geo+json":{"source":"iana","compressible":true},"application/vnd.geocube+xml":{"source":"iana","compressible":true},"application/vnd.geogebra.file":{"source":"iana","extensions":["ggb"]},"application/vnd.geogebra.slides":{"source":"iana"},"application/vnd.geogebra.tool":{"source":"iana","extensions":["ggt"]},"application/vnd.geometry-explorer":{"source":"iana","extensions":["gex","gre"]},"application/vnd.geonext":{"source":"iana","extensions":["gxt"]},"application/vnd.geoplan":{"source":"iana","extensions":["g2w"]},"application/vnd.geospace":{"source":"iana","extensions":["g3w"]},"application/vnd.gerber":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt-response":{"source":"iana"},"application/vnd.gmx":{"source":"iana","extensions":["gmx"]},"application/vnd.google-apps.document":{"compressible":false,"extensions":["gdoc"]},"application/vnd.google-apps.presentation":{"compressible":false,"extensions":["gslides"]},"application/vnd.google-apps.spreadsheet":{"compressible":false,"extensions":["gsheet"]},"application/vnd.google-earth.kml+xml":{"source":"iana","compressible":true,"extensions":["kml"]},"application/vnd.google-earth.kmz":{"source":"iana","compressible":false,"extensions":["kmz"]},"application/vnd.gov.sk.e-form+xml":{"source":"iana","compressible":true},"application/vnd.gov.sk.e-form+zip":{"source":"iana","compressible":false},"application/vnd.gov.sk.xmldatacontainer+xml":{"source":"iana","compressible":true},"application/vnd.grafeq":{"source":"iana","extensions":["gqf","gqs"]},"application/vnd.gridmp":{"source":"iana"},"application/vnd.groove-account":{"source":"iana","extensions":["gac"]},"application/vnd.groove-help":{"source":"iana","extensions":["ghf"]},"application/vnd.groove-identity-message":{"source":"iana","extensions":["gim"]},"application/vnd.groove-injector":{"source":"iana","extensions":["grv"]},"application/vnd.groove-tool-message":{"source":"iana","extensions":["gtm"]},"application/vnd.groove-tool-template":{"source":"iana","extensions":["tpl"]},"application/vnd.groove-vcard":{"source":"iana","extensions":["vcg"]},"application/vnd.hal+json":{"source":"iana","compressible":true},"application/vnd.hal+xml":{"source":"iana","compressible":true,"extensions":["hal"]},"application/vnd.handheld-entertainment+xml":{"source":"iana","compressible":true,"extensions":["zmm"]},"application/vnd.hbci":{"source":"iana","extensions":["hbci"]},"application/vnd.hc+json":{"source":"iana","compressible":true},"application/vnd.hcl-bireports":{"source":"iana"},"application/vnd.hdt":{"source":"iana"},"application/vnd.heroku+json":{"source":"iana","compressible":true},"application/vnd.hhe.lesson-player":{"source":"iana","extensions":["les"]},"application/vnd.hl7cda+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.hl7v2+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.hp-hpgl":{"source":"iana","extensions":["hpgl"]},"application/vnd.hp-hpid":{"source":"iana","extensions":["hpid"]},"application/vnd.hp-hps":{"source":"iana","extensions":["hps"]},"application/vnd.hp-jlyt":{"source":"iana","extensions":["jlt"]},"application/vnd.hp-pcl":{"source":"iana","extensions":["pcl"]},"application/vnd.hp-pclxl":{"source":"iana","extensions":["pclxl"]},"application/vnd.httphone":{"source":"iana"},"application/vnd.hydrostatix.sof-data":{"source":"iana","extensions":["sfd-hdstx"]},"application/vnd.hyper+json":{"source":"iana","compressible":true},"application/vnd.hyper-item+json":{"source":"iana","compressible":true},"application/vnd.hyperdrive+json":{"source":"iana","compressible":true},"application/vnd.hzn-3d-crossword":{"source":"iana"},"application/vnd.ibm.afplinedata":{"source":"iana"},"application/vnd.ibm.electronic-media":{"source":"iana"},"application/vnd.ibm.minipay":{"source":"iana","extensions":["mpy"]},"application/vnd.ibm.modcap":{"source":"iana","extensions":["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{"source":"iana","extensions":["irm"]},"application/vnd.ibm.secure-container":{"source":"iana","extensions":["sc"]},"application/vnd.iccprofile":{"source":"iana","extensions":["icc","icm"]},"application/vnd.ieee.1905":{"source":"iana"},"application/vnd.igloader":{"source":"iana","extensions":["igl"]},"application/vnd.imagemeter.folder+zip":{"source":"iana","compressible":false},"application/vnd.imagemeter.image+zip":{"source":"iana","compressible":false},"application/vnd.immervision-ivp":{"source":"iana","extensions":["ivp"]},"application/vnd.immervision-ivu":{"source":"iana","extensions":["ivu"]},"application/vnd.ims.imsccv1p1":{"source":"iana"},"application/vnd.ims.imsccv1p2":{"source":"iana"},"application/vnd.ims.imsccv1p3":{"source":"iana"},"application/vnd.ims.lis.v2.result+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy.id+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings.simple+json":{"source":"iana","compressible":true},"application/vnd.informedcontrol.rms+xml":{"source":"iana","compressible":true},"application/vnd.informix-visionary":{"source":"iana"},"application/vnd.infotech.project":{"source":"iana"},"application/vnd.infotech.project+xml":{"source":"iana","compressible":true},"application/vnd.innopath.wamp.notification":{"source":"iana"},"application/vnd.insors.igm":{"source":"iana","extensions":["igm"]},"application/vnd.intercon.formnet":{"source":"iana","extensions":["xpw","xpx"]},"application/vnd.intergeo":{"source":"iana","extensions":["i2g"]},"application/vnd.intertrust.digibox":{"source":"iana"},"application/vnd.intertrust.nncp":{"source":"iana"},"application/vnd.intu.qbo":{"source":"iana","extensions":["qbo"]},"application/vnd.intu.qfx":{"source":"iana","extensions":["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.conceptitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.knowledgeitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsmessage+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.packageitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.planningitem+xml":{"source":"iana","compressible":true},"application/vnd.ipunplugged.rcprofile":{"source":"iana","extensions":["rcprofile"]},"application/vnd.irepository.package+xml":{"source":"iana","compressible":true,"extensions":["irp"]},"application/vnd.is-xpr":{"source":"iana","extensions":["xpr"]},"application/vnd.isac.fcs":{"source":"iana","extensions":["fcs"]},"application/vnd.iso11783-10+zip":{"source":"iana","compressible":false},"application/vnd.jam":{"source":"iana","extensions":["jam"]},"application/vnd.japannet-directory-service":{"source":"iana"},"application/vnd.japannet-jpnstore-wakeup":{"source":"iana"},"application/vnd.japannet-payment-wakeup":{"source":"iana"},"application/vnd.japannet-registration":{"source":"iana"},"application/vnd.japannet-registration-wakeup":{"source":"iana"},"application/vnd.japannet-setstore-wakeup":{"source":"iana"},"application/vnd.japannet-verification":{"source":"iana"},"application/vnd.japannet-verification-wakeup":{"source":"iana"},"application/vnd.jcp.javame.midlet-rms":{"source":"iana","extensions":["rms"]},"application/vnd.jisp":{"source":"iana","extensions":["jisp"]},"application/vnd.joost.joda-archive":{"source":"iana","extensions":["joda"]},"application/vnd.jsk.isdn-ngn":{"source":"iana"},"application/vnd.kahootz":{"source":"iana","extensions":["ktz","ktr"]},"application/vnd.kde.karbon":{"source":"iana","extensions":["karbon"]},"application/vnd.kde.kchart":{"source":"iana","extensions":["chrt"]},"application/vnd.kde.kformula":{"source":"iana","extensions":["kfo"]},"application/vnd.kde.kivio":{"source":"iana","extensions":["flw"]},"application/vnd.kde.kontour":{"source":"iana","extensions":["kon"]},"application/vnd.kde.kpresenter":{"source":"iana","extensions":["kpr","kpt"]},"application/vnd.kde.kspread":{"source":"iana","extensions":["ksp"]},"application/vnd.kde.kword":{"source":"iana","extensions":["kwd","kwt"]},"application/vnd.kenameaapp":{"source":"iana","extensions":["htke"]},"application/vnd.kidspiration":{"source":"iana","extensions":["kia"]},"application/vnd.kinar":{"source":"iana","extensions":["kne","knp"]},"application/vnd.koan":{"source":"iana","extensions":["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{"source":"iana","extensions":["sse"]},"application/vnd.las":{"source":"iana"},"application/vnd.las.las+json":{"source":"iana","compressible":true},"application/vnd.las.las+xml":{"source":"iana","compressible":true,"extensions":["lasxml"]},"application/vnd.laszip":{"source":"iana"},"application/vnd.leap+json":{"source":"iana","compressible":true},"application/vnd.liberty-request+xml":{"source":"iana","compressible":true},"application/vnd.llamagraphics.life-balance.desktop":{"source":"iana","extensions":["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{"source":"iana","compressible":true,"extensions":["lbe"]},"application/vnd.logipipe.circuit+zip":{"source":"iana","compressible":false},"application/vnd.loom":{"source":"iana"},"application/vnd.lotus-1-2-3":{"source":"iana","extensions":["123"]},"application/vnd.lotus-approach":{"source":"iana","extensions":["apr"]},"application/vnd.lotus-freelance":{"source":"iana","extensions":["pre"]},"application/vnd.lotus-notes":{"source":"iana","extensions":["nsf"]},"application/vnd.lotus-organizer":{"source":"iana","extensions":["org"]},"application/vnd.lotus-screencam":{"source":"iana","extensions":["scm"]},"application/vnd.lotus-wordpro":{"source":"iana","extensions":["lwp"]},"application/vnd.macports.portpkg":{"source":"iana","extensions":["portpkg"]},"application/vnd.mapbox-vector-tile":{"source":"iana","extensions":["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.conftoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.license+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.mdcf":{"source":"iana"},"application/vnd.mason+json":{"source":"iana","compressible":true},"application/vnd.maxar.archive.3tz+zip":{"source":"iana","compressible":false},"application/vnd.maxmind.maxmind-db":{"source":"iana"},"application/vnd.mcd":{"source":"iana","extensions":["mcd"]},"application/vnd.medcalcdata":{"source":"iana","extensions":["mc1"]},"application/vnd.mediastation.cdkey":{"source":"iana","extensions":["cdkey"]},"application/vnd.meridian-slingshot":{"source":"iana"},"application/vnd.mfer":{"source":"iana","extensions":["mwf"]},"application/vnd.mfmp":{"source":"iana","extensions":["mfm"]},"application/vnd.micro+json":{"source":"iana","compressible":true},"application/vnd.micrografx.flo":{"source":"iana","extensions":["flo"]},"application/vnd.micrografx.igx":{"source":"iana","extensions":["igx"]},"application/vnd.microsoft.portable-executable":{"source":"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{"source":"iana"},"application/vnd.miele+json":{"source":"iana","compressible":true},"application/vnd.mif":{"source":"iana","extensions":["mif"]},"application/vnd.minisoft-hp3000-save":{"source":"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{"source":"iana"},"application/vnd.mobius.daf":{"source":"iana","extensions":["daf"]},"application/vnd.mobius.dis":{"source":"iana","extensions":["dis"]},"application/vnd.mobius.mbk":{"source":"iana","extensions":["mbk"]},"application/vnd.mobius.mqy":{"source":"iana","extensions":["mqy"]},"application/vnd.mobius.msl":{"source":"iana","extensions":["msl"]},"application/vnd.mobius.plc":{"source":"iana","extensions":["plc"]},"application/vnd.mobius.txf":{"source":"iana","extensions":["txf"]},"application/vnd.mophun.application":{"source":"iana","extensions":["mpn"]},"application/vnd.mophun.certificate":{"source":"iana","extensions":["mpc"]},"application/vnd.motorola.flexsuite":{"source":"iana"},"application/vnd.motorola.flexsuite.adsi":{"source":"iana"},"application/vnd.motorola.flexsuite.fis":{"source":"iana"},"application/vnd.motorola.flexsuite.gotap":{"source":"iana"},"application/vnd.motorola.flexsuite.kmr":{"source":"iana"},"application/vnd.motorola.flexsuite.ttc":{"source":"iana"},"application/vnd.motorola.flexsuite.wem":{"source":"iana"},"application/vnd.motorola.iprm":{"source":"iana"},"application/vnd.mozilla.xul+xml":{"source":"iana","compressible":true,"extensions":["xul"]},"application/vnd.ms-3mfdocument":{"source":"iana"},"application/vnd.ms-artgalry":{"source":"iana","extensions":["cil"]},"application/vnd.ms-asf":{"source":"iana"},"application/vnd.ms-cab-compressed":{"source":"iana","extensions":["cab"]},"application/vnd.ms-color.iccprofile":{"source":"apache"},"application/vnd.ms-excel":{"source":"iana","compressible":false,"extensions":["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{"source":"iana","extensions":["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{"source":"iana","extensions":["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{"source":"iana","extensions":["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{"source":"iana","extensions":["xltm"]},"application/vnd.ms-fontobject":{"source":"iana","compressible":true,"extensions":["eot"]},"application/vnd.ms-htmlhelp":{"source":"iana","extensions":["chm"]},"application/vnd.ms-ims":{"source":"iana","extensions":["ims"]},"application/vnd.ms-lrm":{"source":"iana","extensions":["lrm"]},"application/vnd.ms-office.activex+xml":{"source":"iana","compressible":true},"application/vnd.ms-officetheme":{"source":"iana","extensions":["thmx"]},"application/vnd.ms-opentype":{"source":"apache","compressible":true},"application/vnd.ms-outlook":{"compressible":false,"extensions":["msg"]},"application/vnd.ms-package.obfuscated-opentype":{"source":"apache"},"application/vnd.ms-pki.seccat":{"source":"apache","extensions":["cat"]},"application/vnd.ms-pki.stl":{"source":"apache","extensions":["stl"]},"application/vnd.ms-playready.initiator+xml":{"source":"iana","compressible":true},"application/vnd.ms-powerpoint":{"source":"iana","compressible":false,"extensions":["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{"source":"iana","extensions":["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{"source":"iana","extensions":["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{"source":"iana","extensions":["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{"source":"iana","extensions":["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{"source":"iana","extensions":["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{"source":"iana","compressible":true},"application/vnd.ms-printing.printticket+xml":{"source":"apache","compressible":true},"application/vnd.ms-printschematicket+xml":{"source":"iana","compressible":true},"application/vnd.ms-project":{"source":"iana","extensions":["mpp","mpt"]},"application/vnd.ms-tnef":{"source":"iana"},"application/vnd.ms-windows.devicepairing":{"source":"iana"},"application/vnd.ms-windows.nwprinting.oob":{"source":"iana"},"application/vnd.ms-windows.printerpairing":{"source":"iana"},"application/vnd.ms-windows.wsd.oob":{"source":"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.lic-resp":{"source":"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.meter-resp":{"source":"iana"},"application/vnd.ms-word.document.macroenabled.12":{"source":"iana","extensions":["docm"]},"application/vnd.ms-word.template.macroenabled.12":{"source":"iana","extensions":["dotm"]},"application/vnd.ms-works":{"source":"iana","extensions":["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{"source":"iana","extensions":["wpl"]},"application/vnd.ms-xpsdocument":{"source":"iana","compressible":false,"extensions":["xps"]},"application/vnd.msa-disk-image":{"source":"iana"},"application/vnd.mseq":{"source":"iana","extensions":["mseq"]},"application/vnd.msign":{"source":"iana"},"application/vnd.multiad.creator":{"source":"iana"},"application/vnd.multiad.creator.cif":{"source":"iana"},"application/vnd.music-niff":{"source":"iana"},"application/vnd.musician":{"source":"iana","extensions":["mus"]},"application/vnd.muvee.style":{"source":"iana","extensions":["msty"]},"application/vnd.mynfc":{"source":"iana","extensions":["taglet"]},"application/vnd.nacamar.ybrid+json":{"source":"iana","compressible":true},"application/vnd.ncd.control":{"source":"iana"},"application/vnd.ncd.reference":{"source":"iana"},"application/vnd.nearst.inv+json":{"source":"iana","compressible":true},"application/vnd.nebumind.line":{"source":"iana"},"application/vnd.nervana":{"source":"iana"},"application/vnd.netfpx":{"source":"iana"},"application/vnd.neurolanguage.nlu":{"source":"iana","extensions":["nlu"]},"application/vnd.nimn":{"source":"iana"},"application/vnd.nintendo.nitro.rom":{"source":"iana"},"application/vnd.nintendo.snes.rom":{"source":"iana"},"application/vnd.nitf":{"source":"iana","extensions":["ntf","nitf"]},"application/vnd.noblenet-directory":{"source":"iana","extensions":["nnd"]},"application/vnd.noblenet-sealer":{"source":"iana","extensions":["nns"]},"application/vnd.noblenet-web":{"source":"iana","extensions":["nnw"]},"application/vnd.nokia.catalogs":{"source":"iana"},"application/vnd.nokia.conml+wbxml":{"source":"iana"},"application/vnd.nokia.conml+xml":{"source":"iana","compressible":true},"application/vnd.nokia.iptv.config+xml":{"source":"iana","compressible":true},"application/vnd.nokia.isds-radio-presets":{"source":"iana"},"application/vnd.nokia.landmark+wbxml":{"source":"iana"},"application/vnd.nokia.landmark+xml":{"source":"iana","compressible":true},"application/vnd.nokia.landmarkcollection+xml":{"source":"iana","compressible":true},"application/vnd.nokia.n-gage.ac+xml":{"source":"iana","compressible":true,"extensions":["ac"]},"application/vnd.nokia.n-gage.data":{"source":"iana","extensions":["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{"source":"iana","extensions":["n-gage"]},"application/vnd.nokia.ncd":{"source":"iana"},"application/vnd.nokia.pcd+wbxml":{"source":"iana"},"application/vnd.nokia.pcd+xml":{"source":"iana","compressible":true},"application/vnd.nokia.radio-preset":{"source":"iana","extensions":["rpst"]},"application/vnd.nokia.radio-presets":{"source":"iana","extensions":["rpss"]},"application/vnd.novadigm.edm":{"source":"iana","extensions":["edm"]},"application/vnd.novadigm.edx":{"source":"iana","extensions":["edx"]},"application/vnd.novadigm.ext":{"source":"iana","extensions":["ext"]},"application/vnd.ntt-local.content-share":{"source":"iana"},"application/vnd.ntt-local.file-transfer":{"source":"iana"},"application/vnd.ntt-local.ogw_remote-access":{"source":"iana"},"application/vnd.ntt-local.sip-ta_remote":{"source":"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{"source":"iana"},"application/vnd.oasis.opendocument.chart":{"source":"iana","extensions":["odc"]},"application/vnd.oasis.opendocument.chart-template":{"source":"iana","extensions":["otc"]},"application/vnd.oasis.opendocument.database":{"source":"iana","extensions":["odb"]},"application/vnd.oasis.opendocument.formula":{"source":"iana","extensions":["odf"]},"application/vnd.oasis.opendocument.formula-template":{"source":"iana","extensions":["odft"]},"application/vnd.oasis.opendocument.graphics":{"source":"iana","compressible":false,"extensions":["odg"]},"application/vnd.oasis.opendocument.graphics-template":{"source":"iana","extensions":["otg"]},"application/vnd.oasis.opendocument.image":{"source":"iana","extensions":["odi"]},"application/vnd.oasis.opendocument.image-template":{"source":"iana","extensions":["oti"]},"application/vnd.oasis.opendocument.presentation":{"source":"iana","compressible":false,"extensions":["odp"]},"application/vnd.oasis.opendocument.presentation-template":{"source":"iana","extensions":["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{"source":"iana","compressible":false,"extensions":["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{"source":"iana","extensions":["ots"]},"application/vnd.oasis.opendocument.text":{"source":"iana","compressible":false,"extensions":["odt"]},"application/vnd.oasis.opendocument.text-master":{"source":"iana","extensions":["odm"]},"application/vnd.oasis.opendocument.text-template":{"source":"iana","extensions":["ott"]},"application/vnd.oasis.opendocument.text-web":{"source":"iana","extensions":["oth"]},"application/vnd.obn":{"source":"iana"},"application/vnd.ocf+cbor":{"source":"iana"},"application/vnd.oci.image.manifest.v1+json":{"source":"iana","compressible":true},"application/vnd.oftn.l10n+json":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessdownload+xml":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessstreaming+xml":{"source":"iana","compressible":true},"application/vnd.oipf.cspg-hexbinary":{"source":"iana"},"application/vnd.oipf.dae.svg+xml":{"source":"iana","compressible":true},"application/vnd.oipf.dae.xhtml+xml":{"source":"iana","compressible":true},"application/vnd.oipf.mippvcontrolmessage+xml":{"source":"iana","compressible":true},"application/vnd.oipf.pae.gem":{"source":"iana"},"application/vnd.oipf.spdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.oipf.spdlist+xml":{"source":"iana","compressible":true},"application/vnd.oipf.ueprofile+xml":{"source":"iana","compressible":true},"application/vnd.oipf.userprofile+xml":{"source":"iana","compressible":true},"application/vnd.olpc-sugar":{"source":"iana","extensions":["xo"]},"application/vnd.oma-scws-config":{"source":"iana"},"application/vnd.oma-scws-http-request":{"source":"iana"},"application/vnd.oma-scws-http-response":{"source":"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.drm-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.imd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.ltkm":{"source":"iana"},"application/vnd.oma.bcast.notification+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.provisioningtrigger":{"source":"iana"},"application/vnd.oma.bcast.sgboot":{"source":"iana"},"application/vnd.oma.bcast.sgdd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sgdu":{"source":"iana"},"application/vnd.oma.bcast.simple-symbol-container":{"source":"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sprov+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.stkm":{"source":"iana"},"application/vnd.oma.cab-address-book+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-feature-handler+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-pcc+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-subs-invite+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-user-prefs+xml":{"source":"iana","compressible":true},"application/vnd.oma.dcd":{"source":"iana"},"application/vnd.oma.dcdc":{"source":"iana"},"application/vnd.oma.dd2+xml":{"source":"iana","compressible":true,"extensions":["dd2"]},"application/vnd.oma.drm.risd+xml":{"source":"iana","compressible":true},"application/vnd.oma.group-usage-list+xml":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+cbor":{"source":"iana"},"application/vnd.oma.lwm2m+json":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+tlv":{"source":"iana"},"application/vnd.oma.pal+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.detailed-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.final-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.groups+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.invocation-descriptor+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.optimized-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.push":{"source":"iana"},"application/vnd.oma.scidm.messages+xml":{"source":"iana","compressible":true},"application/vnd.oma.xcap-directory+xml":{"source":"iana","compressible":true},"application/vnd.omads-email+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-file+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-folder+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omaloc-supl-init":{"source":"iana"},"application/vnd.onepager":{"source":"iana"},"application/vnd.onepagertamp":{"source":"iana"},"application/vnd.onepagertamx":{"source":"iana"},"application/vnd.onepagertat":{"source":"iana"},"application/vnd.onepagertatp":{"source":"iana"},"application/vnd.onepagertatx":{"source":"iana"},"application/vnd.openblox.game+xml":{"source":"iana","compressible":true,"extensions":["obgx"]},"application/vnd.openblox.game-binary":{"source":"iana"},"application/vnd.openeye.oeb":{"source":"iana"},"application/vnd.openofficeorg.extension":{"source":"apache","extensions":["oxt"]},"application/vnd.openstreetmap.data+xml":{"source":"iana","compressible":true,"extensions":["osm"]},"application/vnd.opentimestamps.ots":{"source":"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawing+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{"source":"iana","compressible":false,"extensions":["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slide":{"source":"iana","extensions":["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{"source":"iana","extensions":["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.template":{"source":"iana","extensions":["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"source":"iana","compressible":false,"extensions":["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{"source":"iana","extensions":["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.theme+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.vmldrawing":{"source":"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"source":"iana","compressible":false,"extensions":["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{"source":"iana","extensions":["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.core-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.relationships+xml":{"source":"iana","compressible":true},"application/vnd.oracle.resource+json":{"source":"iana","compressible":true},"application/vnd.orange.indata":{"source":"iana"},"application/vnd.osa.netdeploy":{"source":"iana"},"application/vnd.osgeo.mapguide.package":{"source":"iana","extensions":["mgp"]},"application/vnd.osgi.bundle":{"source":"iana"},"application/vnd.osgi.dp":{"source":"iana","extensions":["dp"]},"application/vnd.osgi.subsystem":{"source":"iana","extensions":["esa"]},"application/vnd.otps.ct-kip+xml":{"source":"iana","compressible":true},"application/vnd.oxli.countgraph":{"source":"iana"},"application/vnd.pagerduty+json":{"source":"iana","compressible":true},"application/vnd.palm":{"source":"iana","extensions":["pdb","pqa","oprc"]},"application/vnd.panoply":{"source":"iana"},"application/vnd.paos.xml":{"source":"iana"},"application/vnd.patentdive":{"source":"iana"},"application/vnd.patientecommsdoc":{"source":"iana"},"application/vnd.pawaafile":{"source":"iana","extensions":["paw"]},"application/vnd.pcos":{"source":"iana"},"application/vnd.pg.format":{"source":"iana","extensions":["str"]},"application/vnd.pg.osasli":{"source":"iana","extensions":["ei6"]},"application/vnd.piaccess.application-licence":{"source":"iana"},"application/vnd.picsel":{"source":"iana","extensions":["efif"]},"application/vnd.pmi.widget":{"source":"iana","extensions":["wg"]},"application/vnd.poc.group-advertisement+xml":{"source":"iana","compressible":true},"application/vnd.pocketlearn":{"source":"iana","extensions":["plf"]},"application/vnd.powerbuilder6":{"source":"iana","extensions":["pbd"]},"application/vnd.powerbuilder6-s":{"source":"iana"},"application/vnd.powerbuilder7":{"source":"iana"},"application/vnd.powerbuilder7-s":{"source":"iana"},"application/vnd.powerbuilder75":{"source":"iana"},"application/vnd.powerbuilder75-s":{"source":"iana"},"application/vnd.preminet":{"source":"iana"},"application/vnd.previewsystems.box":{"source":"iana","extensions":["box"]},"application/vnd.proteus.magazine":{"source":"iana","extensions":["mgz"]},"application/vnd.psfs":{"source":"iana"},"application/vnd.publishare-delta-tree":{"source":"iana","extensions":["qps"]},"application/vnd.pvi.ptid1":{"source":"iana","extensions":["ptid"]},"application/vnd.pwg-multiplexed":{"source":"iana"},"application/vnd.pwg-xhtml-print+xml":{"source":"iana","compressible":true},"application/vnd.qualcomm.brew-app-res":{"source":"iana"},"application/vnd.quarantainenet":{"source":"iana"},"application/vnd.quark.quarkxpress":{"source":"iana","extensions":["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{"source":"iana"},"application/vnd.radisys.moml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conn+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-stream+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-base+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-detect+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-group+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-speech+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-transform+xml":{"source":"iana","compressible":true},"application/vnd.rainstor.data":{"source":"iana"},"application/vnd.rapid":{"source":"iana"},"application/vnd.rar":{"source":"iana","extensions":["rar"]},"application/vnd.realvnc.bed":{"source":"iana","extensions":["bed"]},"application/vnd.recordare.musicxml":{"source":"iana","extensions":["mxl"]},"application/vnd.recordare.musicxml+xml":{"source":"iana","compressible":true,"extensions":["musicxml"]},"application/vnd.renlearn.rlprint":{"source":"iana"},"application/vnd.resilient.logic":{"source":"iana"},"application/vnd.restful+json":{"source":"iana","compressible":true},"application/vnd.rig.cryptonote":{"source":"iana","extensions":["cryptonote"]},"application/vnd.rim.cod":{"source":"apache","extensions":["cod"]},"application/vnd.rn-realmedia":{"source":"apache","extensions":["rm"]},"application/vnd.rn-realmedia-vbr":{"source":"apache","extensions":["rmvb"]},"application/vnd.route66.link66+xml":{"source":"iana","compressible":true,"extensions":["link66"]},"application/vnd.rs-274x":{"source":"iana"},"application/vnd.ruckus.download":{"source":"iana"},"application/vnd.s3sms":{"source":"iana"},"application/vnd.sailingtracker.track":{"source":"iana","extensions":["st"]},"application/vnd.sar":{"source":"iana"},"application/vnd.sbm.cid":{"source":"iana"},"application/vnd.sbm.mid2":{"source":"iana"},"application/vnd.scribus":{"source":"iana"},"application/vnd.sealed.3df":{"source":"iana"},"application/vnd.sealed.csf":{"source":"iana"},"application/vnd.sealed.doc":{"source":"iana"},"application/vnd.sealed.eml":{"source":"iana"},"application/vnd.sealed.mht":{"source":"iana"},"application/vnd.sealed.net":{"source":"iana"},"application/vnd.sealed.ppt":{"source":"iana"},"application/vnd.sealed.tiff":{"source":"iana"},"application/vnd.sealed.xls":{"source":"iana"},"application/vnd.sealedmedia.softseal.html":{"source":"iana"},"application/vnd.sealedmedia.softseal.pdf":{"source":"iana"},"application/vnd.seemail":{"source":"iana","extensions":["see"]},"application/vnd.seis+json":{"source":"iana","compressible":true},"application/vnd.sema":{"source":"iana","extensions":["sema"]},"application/vnd.semd":{"source":"iana","extensions":["semd"]},"application/vnd.semf":{"source":"iana","extensions":["semf"]},"application/vnd.shade-save-file":{"source":"iana"},"application/vnd.shana.informed.formdata":{"source":"iana","extensions":["ifm"]},"application/vnd.shana.informed.formtemplate":{"source":"iana","extensions":["itp"]},"application/vnd.shana.informed.interchange":{"source":"iana","extensions":["iif"]},"application/vnd.shana.informed.package":{"source":"iana","extensions":["ipk"]},"application/vnd.shootproof+json":{"source":"iana","compressible":true},"application/vnd.shopkick+json":{"source":"iana","compressible":true},"application/vnd.shp":{"source":"iana"},"application/vnd.shx":{"source":"iana"},"application/vnd.sigrok.session":{"source":"iana"},"application/vnd.simtech-mindmapper":{"source":"iana","extensions":["twd","twds"]},"application/vnd.siren+json":{"source":"iana","compressible":true},"application/vnd.smaf":{"source":"iana","extensions":["mmf"]},"application/vnd.smart.notebook":{"source":"iana"},"application/vnd.smart.teacher":{"source":"iana","extensions":["teacher"]},"application/vnd.snesdev-page-table":{"source":"iana"},"application/vnd.software602.filler.form+xml":{"source":"iana","compressible":true,"extensions":["fo"]},"application/vnd.software602.filler.form-xml-zip":{"source":"iana"},"application/vnd.solent.sdkm+xml":{"source":"iana","compressible":true,"extensions":["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{"source":"iana","extensions":["dxp"]},"application/vnd.spotfire.sfs":{"source":"iana","extensions":["sfs"]},"application/vnd.sqlite3":{"source":"iana"},"application/vnd.sss-cod":{"source":"iana"},"application/vnd.sss-dtf":{"source":"iana"},"application/vnd.sss-ntf":{"source":"iana"},"application/vnd.stardivision.calc":{"source":"apache","extensions":["sdc"]},"application/vnd.stardivision.draw":{"source":"apache","extensions":["sda"]},"application/vnd.stardivision.impress":{"source":"apache","extensions":["sdd"]},"application/vnd.stardivision.math":{"source":"apache","extensions":["smf"]},"application/vnd.stardivision.writer":{"source":"apache","extensions":["sdw","vor"]},"application/vnd.stardivision.writer-global":{"source":"apache","extensions":["sgl"]},"application/vnd.stepmania.package":{"source":"iana","extensions":["smzip"]},"application/vnd.stepmania.stepchart":{"source":"iana","extensions":["sm"]},"application/vnd.street-stream":{"source":"iana"},"application/vnd.sun.wadl+xml":{"source":"iana","compressible":true,"extensions":["wadl"]},"application/vnd.sun.xml.calc":{"source":"apache","extensions":["sxc"]},"application/vnd.sun.xml.calc.template":{"source":"apache","extensions":["stc"]},"application/vnd.sun.xml.draw":{"source":"apache","extensions":["sxd"]},"application/vnd.sun.xml.draw.template":{"source":"apache","extensions":["std"]},"application/vnd.sun.xml.impress":{"source":"apache","extensions":["sxi"]},"application/vnd.sun.xml.impress.template":{"source":"apache","extensions":["sti"]},"application/vnd.sun.xml.math":{"source":"apache","extensions":["sxm"]},"application/vnd.sun.xml.writer":{"source":"apache","extensions":["sxw"]},"application/vnd.sun.xml.writer.global":{"source":"apache","extensions":["sxg"]},"application/vnd.sun.xml.writer.template":{"source":"apache","extensions":["stw"]},"application/vnd.sus-calendar":{"source":"iana","extensions":["sus","susp"]},"application/vnd.svd":{"source":"iana","extensions":["svd"]},"application/vnd.swiftview-ics":{"source":"iana"},"application/vnd.sycle+xml":{"source":"iana","compressible":true},"application/vnd.syft+json":{"source":"iana","compressible":true},"application/vnd.symbian.install":{"source":"apache","extensions":["sis","sisx"]},"application/vnd.syncml+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xsm"]},"application/vnd.syncml.dm+wbxml":{"source":"iana","charset":"UTF-8","extensions":["bdm"]},"application/vnd.syncml.dm+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xdm"]},"application/vnd.syncml.dm.notification":{"source":"iana"},"application/vnd.syncml.dmddf+wbxml":{"source":"iana"},"application/vnd.syncml.dmddf+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{"source":"iana"},"application/vnd.syncml.dmtnds+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.syncml.ds.notification":{"source":"iana"},"application/vnd.tableschema+json":{"source":"iana","compressible":true},"application/vnd.tao.intent-module-archive":{"source":"iana","extensions":["tao"]},"application/vnd.tcpdump.pcap":{"source":"iana","extensions":["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{"source":"iana","compressible":true},"application/vnd.tmd.mediaflex.api+xml":{"source":"iana","compressible":true},"application/vnd.tml":{"source":"iana"},"application/vnd.tmobile-livetv":{"source":"iana","extensions":["tmo"]},"application/vnd.tri.onesource":{"source":"iana"},"application/vnd.trid.tpt":{"source":"iana","extensions":["tpt"]},"application/vnd.triscape.mxs":{"source":"iana","extensions":["mxs"]},"application/vnd.trueapp":{"source":"iana","extensions":["tra"]},"application/vnd.truedoc":{"source":"iana"},"application/vnd.ubisoft.webplayer":{"source":"iana"},"application/vnd.ufdl":{"source":"iana","extensions":["ufd","ufdl"]},"application/vnd.uiq.theme":{"source":"iana","extensions":["utz"]},"application/vnd.umajin":{"source":"iana","extensions":["umj"]},"application/vnd.unity":{"source":"iana","extensions":["unityweb"]},"application/vnd.uoml+xml":{"source":"iana","compressible":true,"extensions":["uoml"]},"application/vnd.uplanet.alert":{"source":"iana"},"application/vnd.uplanet.alert-wbxml":{"source":"iana"},"application/vnd.uplanet.bearer-choice":{"source":"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{"source":"iana"},"application/vnd.uplanet.cacheop":{"source":"iana"},"application/vnd.uplanet.cacheop-wbxml":{"source":"iana"},"application/vnd.uplanet.channel":{"source":"iana"},"application/vnd.uplanet.channel-wbxml":{"source":"iana"},"application/vnd.uplanet.list":{"source":"iana"},"application/vnd.uplanet.list-wbxml":{"source":"iana"},"application/vnd.uplanet.listcmd":{"source":"iana"},"application/vnd.uplanet.listcmd-wbxml":{"source":"iana"},"application/vnd.uplanet.signal":{"source":"iana"},"application/vnd.uri-map":{"source":"iana"},"application/vnd.valve.source.material":{"source":"iana"},"application/vnd.vcx":{"source":"iana","extensions":["vcx"]},"application/vnd.vd-study":{"source":"iana"},"application/vnd.vectorworks":{"source":"iana"},"application/vnd.vel+json":{"source":"iana","compressible":true},"application/vnd.verimatrix.vcas":{"source":"iana"},"application/vnd.veritone.aion+json":{"source":"iana","compressible":true},"application/vnd.veryant.thin":{"source":"iana"},"application/vnd.ves.encrypted":{"source":"iana"},"application/vnd.vidsoft.vidconference":{"source":"iana"},"application/vnd.visio":{"source":"iana","extensions":["vsd","vst","vss","vsw"]},"application/vnd.visionary":{"source":"iana","extensions":["vis"]},"application/vnd.vividence.scriptfile":{"source":"iana"},"application/vnd.vsf":{"source":"iana","extensions":["vsf"]},"application/vnd.wap.sic":{"source":"iana"},"application/vnd.wap.slc":{"source":"iana"},"application/vnd.wap.wbxml":{"source":"iana","charset":"UTF-8","extensions":["wbxml"]},"application/vnd.wap.wmlc":{"source":"iana","extensions":["wmlc"]},"application/vnd.wap.wmlscriptc":{"source":"iana","extensions":["wmlsc"]},"application/vnd.webturbo":{"source":"iana","extensions":["wtb"]},"application/vnd.wfa.dpp":{"source":"iana"},"application/vnd.wfa.p2p":{"source":"iana"},"application/vnd.wfa.wsc":{"source":"iana"},"application/vnd.windows.devicepairing":{"source":"iana"},"application/vnd.wmc":{"source":"iana"},"application/vnd.wmf.bootstrap":{"source":"iana"},"application/vnd.wolfram.mathematica":{"source":"iana"},"application/vnd.wolfram.mathematica.package":{"source":"iana"},"application/vnd.wolfram.player":{"source":"iana","extensions":["nbp"]},"application/vnd.wordperfect":{"source":"iana","extensions":["wpd"]},"application/vnd.wqd":{"source":"iana","extensions":["wqd"]},"application/vnd.wrq-hp3000-labelled":{"source":"iana"},"application/vnd.wt.stf":{"source":"iana","extensions":["stf"]},"application/vnd.wv.csp+wbxml":{"source":"iana"},"application/vnd.wv.csp+xml":{"source":"iana","compressible":true},"application/vnd.wv.ssp+xml":{"source":"iana","compressible":true},"application/vnd.xacml+json":{"source":"iana","compressible":true},"application/vnd.xara":{"source":"iana","extensions":["xar"]},"application/vnd.xfdl":{"source":"iana","extensions":["xfdl"]},"application/vnd.xfdl.webform":{"source":"iana"},"application/vnd.xmi+xml":{"source":"iana","compressible":true},"application/vnd.xmpie.cpkg":{"source":"iana"},"application/vnd.xmpie.dpkg":{"source":"iana"},"application/vnd.xmpie.plan":{"source":"iana"},"application/vnd.xmpie.ppkg":{"source":"iana"},"application/vnd.xmpie.xlim":{"source":"iana"},"application/vnd.yamaha.hv-dic":{"source":"iana","extensions":["hvd"]},"application/vnd.yamaha.hv-script":{"source":"iana","extensions":["hvs"]},"application/vnd.yamaha.hv-voice":{"source":"iana","extensions":["hvp"]},"application/vnd.yamaha.openscoreformat":{"source":"iana","extensions":["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{"source":"iana","compressible":true,"extensions":["osfpvg"]},"application/vnd.yamaha.remote-setup":{"source":"iana"},"application/vnd.yamaha.smaf-audio":{"source":"iana","extensions":["saf"]},"application/vnd.yamaha.smaf-phrase":{"source":"iana","extensions":["spf"]},"application/vnd.yamaha.through-ngn":{"source":"iana"},"application/vnd.yamaha.tunnel-udpencap":{"source":"iana"},"application/vnd.yaoweme":{"source":"iana"},"application/vnd.yellowriver-custom-menu":{"source":"iana","extensions":["cmp"]},"application/vnd.youtube.yt":{"source":"iana"},"application/vnd.zul":{"source":"iana","extensions":["zir","zirz"]},"application/vnd.zzazz.deck+xml":{"source":"iana","compressible":true,"extensions":["zaz"]},"application/voicexml+xml":{"source":"iana","compressible":true,"extensions":["vxml"]},"application/voucher-cms+json":{"source":"iana","compressible":true},"application/vq-rtcpxr":{"source":"iana"},"application/wasm":{"source":"iana","compressible":true,"extensions":["wasm"]},"application/watcherinfo+xml":{"source":"iana","compressible":true,"extensions":["wif"]},"application/webpush-options+json":{"source":"iana","compressible":true},"application/whoispp-query":{"source":"iana"},"application/whoispp-response":{"source":"iana"},"application/widget":{"source":"iana","extensions":["wgt"]},"application/winhlp":{"source":"apache","extensions":["hlp"]},"application/wita":{"source":"iana"},"application/wordperfect5.1":{"source":"iana"},"application/wsdl+xml":{"source":"iana","compressible":true,"extensions":["wsdl"]},"application/wspolicy+xml":{"source":"iana","compressible":true,"extensions":["wspolicy"]},"application/x-7z-compressed":{"source":"apache","compressible":false,"extensions":["7z"]},"application/x-abiword":{"source":"apache","extensions":["abw"]},"application/x-ace-compressed":{"source":"apache","extensions":["ace"]},"application/x-amf":{"source":"apache"},"application/x-apple-diskimage":{"source":"apache","extensions":["dmg"]},"application/x-arj":{"compressible":false,"extensions":["arj"]},"application/x-authorware-bin":{"source":"apache","extensions":["aab","x32","u32","vox"]},"application/x-authorware-map":{"source":"apache","extensions":["aam"]},"application/x-authorware-seg":{"source":"apache","extensions":["aas"]},"application/x-bcpio":{"source":"apache","extensions":["bcpio"]},"application/x-bdoc":{"compressible":false,"extensions":["bdoc"]},"application/x-bittorrent":{"source":"apache","extensions":["torrent"]},"application/x-blorb":{"source":"apache","extensions":["blb","blorb"]},"application/x-bzip":{"source":"apache","compressible":false,"extensions":["bz"]},"application/x-bzip2":{"source":"apache","compressible":false,"extensions":["bz2","boz"]},"application/x-cbr":{"source":"apache","extensions":["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{"source":"apache","extensions":["vcd"]},"application/x-cfs-compressed":{"source":"apache","extensions":["cfs"]},"application/x-chat":{"source":"apache","extensions":["chat"]},"application/x-chess-pgn":{"source":"apache","extensions":["pgn"]},"application/x-chrome-extension":{"extensions":["crx"]},"application/x-cocoa":{"source":"nginx","extensions":["cco"]},"application/x-compress":{"source":"apache"},"application/x-conference":{"source":"apache","extensions":["nsc"]},"application/x-cpio":{"source":"apache","extensions":["cpio"]},"application/x-csh":{"source":"apache","extensions":["csh"]},"application/x-deb":{"compressible":false},"application/x-debian-package":{"source":"apache","extensions":["deb","udeb"]},"application/x-dgc-compressed":{"source":"apache","extensions":["dgc"]},"application/x-director":{"source":"apache","extensions":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{"source":"apache","extensions":["wad"]},"application/x-dtbncx+xml":{"source":"apache","compressible":true,"extensions":["ncx"]},"application/x-dtbook+xml":{"source":"apache","compressible":true,"extensions":["dtb"]},"application/x-dtbresource+xml":{"source":"apache","compressible":true,"extensions":["res"]},"application/x-dvi":{"source":"apache","compressible":false,"extensions":["dvi"]},"application/x-envoy":{"source":"apache","extensions":["evy"]},"application/x-eva":{"source":"apache","extensions":["eva"]},"application/x-font-bdf":{"source":"apache","extensions":["bdf"]},"application/x-font-dos":{"source":"apache"},"application/x-font-framemaker":{"source":"apache"},"application/x-font-ghostscript":{"source":"apache","extensions":["gsf"]},"application/x-font-libgrx":{"source":"apache"},"application/x-font-linux-psf":{"source":"apache","extensions":["psf"]},"application/x-font-pcf":{"source":"apache","extensions":["pcf"]},"application/x-font-snf":{"source":"apache","extensions":["snf"]},"application/x-font-speedo":{"source":"apache"},"application/x-font-sunos-news":{"source":"apache"},"application/x-font-type1":{"source":"apache","extensions":["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{"source":"apache"},"application/x-freearc":{"source":"apache","extensions":["arc"]},"application/x-futuresplash":{"source":"apache","extensions":["spl"]},"application/x-gca-compressed":{"source":"apache","extensions":["gca"]},"application/x-glulx":{"source":"apache","extensions":["ulx"]},"application/x-gnumeric":{"source":"apache","extensions":["gnumeric"]},"application/x-gramps-xml":{"source":"apache","extensions":["gramps"]},"application/x-gtar":{"source":"apache","extensions":["gtar"]},"application/x-gzip":{"source":"apache"},"application/x-hdf":{"source":"apache","extensions":["hdf"]},"application/x-httpd-php":{"compressible":true,"extensions":["php"]},"application/x-install-instructions":{"source":"apache","extensions":["install"]},"application/x-iso9660-image":{"source":"apache","extensions":["iso"]},"application/x-iwork-keynote-sffkey":{"extensions":["key"]},"application/x-iwork-numbers-sffnumbers":{"extensions":["numbers"]},"application/x-iwork-pages-sffpages":{"extensions":["pages"]},"application/x-java-archive-diff":{"source":"nginx","extensions":["jardiff"]},"application/x-java-jnlp-file":{"source":"apache","compressible":false,"extensions":["jnlp"]},"application/x-javascript":{"compressible":true},"application/x-keepass2":{"extensions":["kdbx"]},"application/x-latex":{"source":"apache","compressible":false,"extensions":["latex"]},"application/x-lua-bytecode":{"extensions":["luac"]},"application/x-lzh-compressed":{"source":"apache","extensions":["lzh","lha"]},"application/x-makeself":{"source":"nginx","extensions":["run"]},"application/x-mie":{"source":"apache","extensions":["mie"]},"application/x-mobipocket-ebook":{"source":"apache","extensions":["prc","mobi"]},"application/x-mpegurl":{"compressible":false},"application/x-ms-application":{"source":"apache","extensions":["application"]},"application/x-ms-shortcut":{"source":"apache","extensions":["lnk"]},"application/x-ms-wmd":{"source":"apache","extensions":["wmd"]},"application/x-ms-wmz":{"source":"apache","extensions":["wmz"]},"application/x-ms-xbap":{"source":"apache","extensions":["xbap"]},"application/x-msaccess":{"source":"apache","extensions":["mdb"]},"application/x-msbinder":{"source":"apache","extensions":["obd"]},"application/x-mscardfile":{"source":"apache","extensions":["crd"]},"application/x-msclip":{"source":"apache","extensions":["clp"]},"application/x-msdos-program":{"extensions":["exe"]},"application/x-msdownload":{"source":"apache","extensions":["exe","dll","com","bat","msi"]},"application/x-msmediaview":{"source":"apache","extensions":["mvb","m13","m14"]},"application/x-msmetafile":{"source":"apache","extensions":["wmf","wmz","emf","emz"]},"application/x-msmoney":{"source":"apache","extensions":["mny"]},"application/x-mspublisher":{"source":"apache","extensions":["pub"]},"application/x-msschedule":{"source":"apache","extensions":["scd"]},"application/x-msterminal":{"source":"apache","extensions":["trm"]},"application/x-mswrite":{"source":"apache","extensions":["wri"]},"application/x-netcdf":{"source":"apache","extensions":["nc","cdf"]},"application/x-ns-proxy-autoconfig":{"compressible":true,"extensions":["pac"]},"application/x-nzb":{"source":"apache","extensions":["nzb"]},"application/x-perl":{"source":"nginx","extensions":["pl","pm"]},"application/x-pilot":{"source":"nginx","extensions":["prc","pdb"]},"application/x-pkcs12":{"source":"apache","compressible":false,"extensions":["p12","pfx"]},"application/x-pkcs7-certificates":{"source":"apache","extensions":["p7b","spc"]},"application/x-pkcs7-certreqresp":{"source":"apache","extensions":["p7r"]},"application/x-pki-message":{"source":"iana"},"application/x-rar-compressed":{"source":"apache","compressible":false,"extensions":["rar"]},"application/x-redhat-package-manager":{"source":"nginx","extensions":["rpm"]},"application/x-research-info-systems":{"source":"apache","extensions":["ris"]},"application/x-sea":{"source":"nginx","extensions":["sea"]},"application/x-sh":{"source":"apache","compressible":true,"extensions":["sh"]},"application/x-shar":{"source":"apache","extensions":["shar"]},"application/x-shockwave-flash":{"source":"apache","compressible":false,"extensions":["swf"]},"application/x-silverlight-app":{"source":"apache","extensions":["xap"]},"application/x-sql":{"source":"apache","extensions":["sql"]},"application/x-stuffit":{"source":"apache","compressible":false,"extensions":["sit"]},"application/x-stuffitx":{"source":"apache","extensions":["sitx"]},"application/x-subrip":{"source":"apache","extensions":["srt"]},"application/x-sv4cpio":{"source":"apache","extensions":["sv4cpio"]},"application/x-sv4crc":{"source":"apache","extensions":["sv4crc"]},"application/x-t3vm-image":{"source":"apache","extensions":["t3"]},"application/x-tads":{"source":"apache","extensions":["gam"]},"application/x-tar":{"source":"apache","compressible":true,"extensions":["tar"]},"application/x-tcl":{"source":"apache","extensions":["tcl","tk"]},"application/x-tex":{"source":"apache","extensions":["tex"]},"application/x-tex-tfm":{"source":"apache","extensions":["tfm"]},"application/x-texinfo":{"source":"apache","extensions":["texinfo","texi"]},"application/x-tgif":{"source":"apache","extensions":["obj"]},"application/x-ustar":{"source":"apache","extensions":["ustar"]},"application/x-virtualbox-hdd":{"compressible":true,"extensions":["hdd"]},"application/x-virtualbox-ova":{"compressible":true,"extensions":["ova"]},"application/x-virtualbox-ovf":{"compressible":true,"extensions":["ovf"]},"application/x-virtualbox-vbox":{"compressible":true,"extensions":["vbox"]},"application/x-virtualbox-vbox-extpack":{"compressible":false,"extensions":["vbox-extpack"]},"application/x-virtualbox-vdi":{"compressible":true,"extensions":["vdi"]},"application/x-virtualbox-vhd":{"compressible":true,"extensions":["vhd"]},"application/x-virtualbox-vmdk":{"compressible":true,"extensions":["vmdk"]},"application/x-wais-source":{"source":"apache","extensions":["src"]},"application/x-web-app-manifest+json":{"compressible":true,"extensions":["webapp"]},"application/x-www-form-urlencoded":{"source":"iana","compressible":true},"application/x-x509-ca-cert":{"source":"iana","extensions":["der","crt","pem"]},"application/x-x509-ca-ra-cert":{"source":"iana"},"application/x-x509-next-ca-cert":{"source":"iana"},"application/x-xfig":{"source":"apache","extensions":["fig"]},"application/x-xliff+xml":{"source":"apache","compressible":true,"extensions":["xlf"]},"application/x-xpinstall":{"source":"apache","compressible":false,"extensions":["xpi"]},"application/x-xz":{"source":"apache","extensions":["xz"]},"application/x-zmachine":{"source":"apache","extensions":["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{"source":"iana"},"application/xacml+xml":{"source":"iana","compressible":true},"application/xaml+xml":{"source":"apache","compressible":true,"extensions":["xaml"]},"application/xcap-att+xml":{"source":"iana","compressible":true,"extensions":["xav"]},"application/xcap-caps+xml":{"source":"iana","compressible":true,"extensions":["xca"]},"application/xcap-diff+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/xcap-el+xml":{"source":"iana","compressible":true,"extensions":["xel"]},"application/xcap-error+xml":{"source":"iana","compressible":true},"application/xcap-ns+xml":{"source":"iana","compressible":true,"extensions":["xns"]},"application/xcon-conference-info+xml":{"source":"iana","compressible":true},"application/xcon-conference-info-diff+xml":{"source":"iana","compressible":true},"application/xenc+xml":{"source":"iana","compressible":true,"extensions":["xenc"]},"application/xhtml+xml":{"source":"iana","compressible":true,"extensions":["xhtml","xht"]},"application/xhtml-voice+xml":{"source":"apache","compressible":true},"application/xliff+xml":{"source":"iana","compressible":true,"extensions":["xlf"]},"application/xml":{"source":"iana","compressible":true,"extensions":["xml","xsl","xsd","rng"]},"application/xml-dtd":{"source":"iana","compressible":true,"extensions":["dtd"]},"application/xml-external-parsed-entity":{"source":"iana"},"application/xml-patch+xml":{"source":"iana","compressible":true},"application/xmpp+xml":{"source":"iana","compressible":true},"application/xop+xml":{"source":"iana","compressible":true,"extensions":["xop"]},"application/xproc+xml":{"source":"apache","compressible":true,"extensions":["xpl"]},"application/xslt+xml":{"source":"iana","compressible":true,"extensions":["xsl","xslt"]},"application/xspf+xml":{"source":"apache","compressible":true,"extensions":["xspf"]},"application/xv+xml":{"source":"iana","compressible":true,"extensions":["mxml","xhvml","xvml","xvm"]},"application/yang":{"source":"iana","extensions":["yang"]},"application/yang-data+json":{"source":"iana","compressible":true},"application/yang-data+xml":{"source":"iana","compressible":true},"application/yang-patch+json":{"source":"iana","compressible":true},"application/yang-patch+xml":{"source":"iana","compressible":true},"application/yin+xml":{"source":"iana","compressible":true,"extensions":["yin"]},"application/zip":{"source":"iana","compressible":false,"extensions":["zip"]},"application/zlib":{"source":"iana"},"application/zstd":{"source":"iana"},"audio/1d-interleaved-parityfec":{"source":"iana"},"audio/32kadpcm":{"source":"iana"},"audio/3gpp":{"source":"iana","compressible":false,"extensions":["3gpp"]},"audio/3gpp2":{"source":"iana"},"audio/aac":{"source":"iana"},"audio/ac3":{"source":"iana"},"audio/adpcm":{"source":"apache","extensions":["adp"]},"audio/amr":{"source":"iana","extensions":["amr"]},"audio/amr-wb":{"source":"iana"},"audio/amr-wb+":{"source":"iana"},"audio/aptx":{"source":"iana"},"audio/asc":{"source":"iana"},"audio/atrac-advanced-lossless":{"source":"iana"},"audio/atrac-x":{"source":"iana"},"audio/atrac3":{"source":"iana"},"audio/basic":{"source":"iana","compressible":false,"extensions":["au","snd"]},"audio/bv16":{"source":"iana"},"audio/bv32":{"source":"iana"},"audio/clearmode":{"source":"iana"},"audio/cn":{"source":"iana"},"audio/dat12":{"source":"iana"},"audio/dls":{"source":"iana"},"audio/dsr-es201108":{"source":"iana"},"audio/dsr-es202050":{"source":"iana"},"audio/dsr-es202211":{"source":"iana"},"audio/dsr-es202212":{"source":"iana"},"audio/dv":{"source":"iana"},"audio/dvi4":{"source":"iana"},"audio/eac3":{"source":"iana"},"audio/encaprtp":{"source":"iana"},"audio/evrc":{"source":"iana"},"audio/evrc-qcp":{"source":"iana"},"audio/evrc0":{"source":"iana"},"audio/evrc1":{"source":"iana"},"audio/evrcb":{"source":"iana"},"audio/evrcb0":{"source":"iana"},"audio/evrcb1":{"source":"iana"},"audio/evrcnw":{"source":"iana"},"audio/evrcnw0":{"source":"iana"},"audio/evrcnw1":{"source":"iana"},"audio/evrcwb":{"source":"iana"},"audio/evrcwb0":{"source":"iana"},"audio/evrcwb1":{"source":"iana"},"audio/evs":{"source":"iana"},"audio/flexfec":{"source":"iana"},"audio/fwdred":{"source":"iana"},"audio/g711-0":{"source":"iana"},"audio/g719":{"source":"iana"},"audio/g722":{"source":"iana"},"audio/g7221":{"source":"iana"},"audio/g723":{"source":"iana"},"audio/g726-16":{"source":"iana"},"audio/g726-24":{"source":"iana"},"audio/g726-32":{"source":"iana"},"audio/g726-40":{"source":"iana"},"audio/g728":{"source":"iana"},"audio/g729":{"source":"iana"},"audio/g7291":{"source":"iana"},"audio/g729d":{"source":"iana"},"audio/g729e":{"source":"iana"},"audio/gsm":{"source":"iana"},"audio/gsm-efr":{"source":"iana"},"audio/gsm-hr-08":{"source":"iana"},"audio/ilbc":{"source":"iana"},"audio/ip-mr_v2.5":{"source":"iana"},"audio/isac":{"source":"apache"},"audio/l16":{"source":"iana"},"audio/l20":{"source":"iana"},"audio/l24":{"source":"iana","compressible":false},"audio/l8":{"source":"iana"},"audio/lpc":{"source":"iana"},"audio/melp":{"source":"iana"},"audio/melp1200":{"source":"iana"},"audio/melp2400":{"source":"iana"},"audio/melp600":{"source":"iana"},"audio/mhas":{"source":"iana"},"audio/midi":{"source":"apache","extensions":["mid","midi","kar","rmi"]},"audio/mobile-xmf":{"source":"iana","extensions":["mxmf"]},"audio/mp3":{"compressible":false,"extensions":["mp3"]},"audio/mp4":{"source":"iana","compressible":false,"extensions":["m4a","mp4a"]},"audio/mp4a-latm":{"source":"iana"},"audio/mpa":{"source":"iana"},"audio/mpa-robust":{"source":"iana"},"audio/mpeg":{"source":"iana","compressible":false,"extensions":["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{"source":"iana"},"audio/musepack":{"source":"apache"},"audio/ogg":{"source":"iana","compressible":false,"extensions":["oga","ogg","spx","opus"]},"audio/opus":{"source":"iana"},"audio/parityfec":{"source":"iana"},"audio/pcma":{"source":"iana"},"audio/pcma-wb":{"source":"iana"},"audio/pcmu":{"source":"iana"},"audio/pcmu-wb":{"source":"iana"},"audio/prs.sid":{"source":"iana"},"audio/qcelp":{"source":"iana"},"audio/raptorfec":{"source":"iana"},"audio/red":{"source":"iana"},"audio/rtp-enc-aescm128":{"source":"iana"},"audio/rtp-midi":{"source":"iana"},"audio/rtploopback":{"source":"iana"},"audio/rtx":{"source":"iana"},"audio/s3m":{"source":"apache","extensions":["s3m"]},"audio/scip":{"source":"iana"},"audio/silk":{"source":"apache","extensions":["sil"]},"audio/smv":{"source":"iana"},"audio/smv-qcp":{"source":"iana"},"audio/smv0":{"source":"iana"},"audio/sofa":{"source":"iana"},"audio/sp-midi":{"source":"iana"},"audio/speex":{"source":"iana"},"audio/t140c":{"source":"iana"},"audio/t38":{"source":"iana"},"audio/telephone-event":{"source":"iana"},"audio/tetra_acelp":{"source":"iana"},"audio/tetra_acelp_bb":{"source":"iana"},"audio/tone":{"source":"iana"},"audio/tsvcis":{"source":"iana"},"audio/uemclip":{"source":"iana"},"audio/ulpfec":{"source":"iana"},"audio/usac":{"source":"iana"},"audio/vdvi":{"source":"iana"},"audio/vmr-wb":{"source":"iana"},"audio/vnd.3gpp.iufp":{"source":"iana"},"audio/vnd.4sb":{"source":"iana"},"audio/vnd.audiokoz":{"source":"iana"},"audio/vnd.celp":{"source":"iana"},"audio/vnd.cisco.nse":{"source":"iana"},"audio/vnd.cmles.radio-events":{"source":"iana"},"audio/vnd.cns.anp1":{"source":"iana"},"audio/vnd.cns.inf1":{"source":"iana"},"audio/vnd.dece.audio":{"source":"iana","extensions":["uva","uvva"]},"audio/vnd.digital-winds":{"source":"iana","extensions":["eol"]},"audio/vnd.dlna.adts":{"source":"iana"},"audio/vnd.dolby.heaac.1":{"source":"iana"},"audio/vnd.dolby.heaac.2":{"source":"iana"},"audio/vnd.dolby.mlp":{"source":"iana"},"audio/vnd.dolby.mps":{"source":"iana"},"audio/vnd.dolby.pl2":{"source":"iana"},"audio/vnd.dolby.pl2x":{"source":"iana"},"audio/vnd.dolby.pl2z":{"source":"iana"},"audio/vnd.dolby.pulse.1":{"source":"iana"},"audio/vnd.dra":{"source":"iana","extensions":["dra"]},"audio/vnd.dts":{"source":"iana","extensions":["dts"]},"audio/vnd.dts.hd":{"source":"iana","extensions":["dtshd"]},"audio/vnd.dts.uhd":{"source":"iana"},"audio/vnd.dvb.file":{"source":"iana"},"audio/vnd.everad.plj":{"source":"iana"},"audio/vnd.hns.audio":{"source":"iana"},"audio/vnd.lucent.voice":{"source":"iana","extensions":["lvp"]},"audio/vnd.ms-playready.media.pya":{"source":"iana","extensions":["pya"]},"audio/vnd.nokia.mobile-xmf":{"source":"iana"},"audio/vnd.nortel.vbk":{"source":"iana"},"audio/vnd.nuera.ecelp4800":{"source":"iana","extensions":["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{"source":"iana","extensions":["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{"source":"iana","extensions":["ecelp9600"]},"audio/vnd.octel.sbc":{"source":"iana"},"audio/vnd.presonus.multitrack":{"source":"iana"},"audio/vnd.qcelp":{"source":"iana"},"audio/vnd.rhetorex.32kadpcm":{"source":"iana"},"audio/vnd.rip":{"source":"iana","extensions":["rip"]},"audio/vnd.rn-realaudio":{"compressible":false},"audio/vnd.sealedmedia.softseal.mpeg":{"source":"iana"},"audio/vnd.vmx.cvsd":{"source":"iana"},"audio/vnd.wave":{"compressible":false},"audio/vorbis":{"source":"iana","compressible":false},"audio/vorbis-config":{"source":"iana"},"audio/wav":{"compressible":false,"extensions":["wav"]},"audio/wave":{"compressible":false,"extensions":["wav"]},"audio/webm":{"source":"apache","compressible":false,"extensions":["weba"]},"audio/x-aac":{"source":"apache","compressible":false,"extensions":["aac"]},"audio/x-aiff":{"source":"apache","extensions":["aif","aiff","aifc"]},"audio/x-caf":{"source":"apache","compressible":false,"extensions":["caf"]},"audio/x-flac":{"source":"apache","extensions":["flac"]},"audio/x-m4a":{"source":"nginx","extensions":["m4a"]},"audio/x-matroska":{"source":"apache","extensions":["mka"]},"audio/x-mpegurl":{"source":"apache","extensions":["m3u"]},"audio/x-ms-wax":{"source":"apache","extensions":["wax"]},"audio/x-ms-wma":{"source":"apache","extensions":["wma"]},"audio/x-pn-realaudio":{"source":"apache","extensions":["ram","ra"]},"audio/x-pn-realaudio-plugin":{"source":"apache","extensions":["rmp"]},"audio/x-realaudio":{"source":"nginx","extensions":["ra"]},"audio/x-tta":{"source":"apache"},"audio/x-wav":{"source":"apache","extensions":["wav"]},"audio/xm":{"source":"apache","extensions":["xm"]},"chemical/x-cdx":{"source":"apache","extensions":["cdx"]},"chemical/x-cif":{"source":"apache","extensions":["cif"]},"chemical/x-cmdf":{"source":"apache","extensions":["cmdf"]},"chemical/x-cml":{"source":"apache","extensions":["cml"]},"chemical/x-csml":{"source":"apache","extensions":["csml"]},"chemical/x-pdb":{"source":"apache"},"chemical/x-xyz":{"source":"apache","extensions":["xyz"]},"font/collection":{"source":"iana","extensions":["ttc"]},"font/otf":{"source":"iana","compressible":true,"extensions":["otf"]},"font/sfnt":{"source":"iana"},"font/ttf":{"source":"iana","compressible":true,"extensions":["ttf"]},"font/woff":{"source":"iana","extensions":["woff"]},"font/woff2":{"source":"iana","extensions":["woff2"]},"image/aces":{"source":"iana","extensions":["exr"]},"image/apng":{"compressible":false,"extensions":["apng"]},"image/avci":{"source":"iana","extensions":["avci"]},"image/avcs":{"source":"iana","extensions":["avcs"]},"image/avif":{"source":"iana","compressible":false,"extensions":["avif"]},"image/bmp":{"source":"iana","compressible":true,"extensions":["bmp"]},"image/cgm":{"source":"iana","extensions":["cgm"]},"image/dicom-rle":{"source":"iana","extensions":["drle"]},"image/emf":{"source":"iana","extensions":["emf"]},"image/fits":{"source":"iana","extensions":["fits"]},"image/g3fax":{"source":"iana","extensions":["g3"]},"image/gif":{"source":"iana","compressible":false,"extensions":["gif"]},"image/heic":{"source":"iana","extensions":["heic"]},"image/heic-sequence":{"source":"iana","extensions":["heics"]},"image/heif":{"source":"iana","extensions":["heif"]},"image/heif-sequence":{"source":"iana","extensions":["heifs"]},"image/hej2k":{"source":"iana","extensions":["hej2"]},"image/hsj2":{"source":"iana","extensions":["hsj2"]},"image/ief":{"source":"iana","extensions":["ief"]},"image/jls":{"source":"iana","extensions":["jls"]},"image/jp2":{"source":"iana","compressible":false,"extensions":["jp2","jpg2"]},"image/jpeg":{"source":"iana","compressible":false,"extensions":["jpeg","jpg","jpe"]},"image/jph":{"source":"iana","extensions":["jph"]},"image/jphc":{"source":"iana","extensions":["jhc"]},"image/jpm":{"source":"iana","compressible":false,"extensions":["jpm"]},"image/jpx":{"source":"iana","compressible":false,"extensions":["jpx","jpf"]},"image/jxr":{"source":"iana","extensions":["jxr"]},"image/jxra":{"source":"iana","extensions":["jxra"]},"image/jxrs":{"source":"iana","extensions":["jxrs"]},"image/jxs":{"source":"iana","extensions":["jxs"]},"image/jxsc":{"source":"iana","extensions":["jxsc"]},"image/jxsi":{"source":"iana","extensions":["jxsi"]},"image/jxss":{"source":"iana","extensions":["jxss"]},"image/ktx":{"source":"iana","extensions":["ktx"]},"image/ktx2":{"source":"iana","extensions":["ktx2"]},"image/naplps":{"source":"iana"},"image/pjpeg":{"compressible":false},"image/png":{"source":"iana","compressible":false,"extensions":["png"]},"image/prs.btif":{"source":"iana","extensions":["btif"]},"image/prs.pti":{"source":"iana","extensions":["pti"]},"image/pwg-raster":{"source":"iana"},"image/sgi":{"source":"apache","extensions":["sgi"]},"image/svg+xml":{"source":"iana","compressible":true,"extensions":["svg","svgz"]},"image/t38":{"source":"iana","extensions":["t38"]},"image/tiff":{"source":"iana","compressible":false,"extensions":["tif","tiff"]},"image/tiff-fx":{"source":"iana","extensions":["tfx"]},"image/vnd.adobe.photoshop":{"source":"iana","compressible":true,"extensions":["psd"]},"image/vnd.airzip.accelerator.azv":{"source":"iana","extensions":["azv"]},"image/vnd.cns.inf2":{"source":"iana"},"image/vnd.dece.graphic":{"source":"iana","extensions":["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{"source":"iana","extensions":["djvu","djv"]},"image/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"image/vnd.dwg":{"source":"iana","extensions":["dwg"]},"image/vnd.dxf":{"source":"iana","extensions":["dxf"]},"image/vnd.fastbidsheet":{"source":"iana","extensions":["fbs"]},"image/vnd.fpx":{"source":"iana","extensions":["fpx"]},"image/vnd.fst":{"source":"iana","extensions":["fst"]},"image/vnd.fujixerox.edmics-mmr":{"source":"iana","extensions":["mmr"]},"image/vnd.fujixerox.edmics-rlc":{"source":"iana","extensions":["rlc"]},"image/vnd.globalgraphics.pgb":{"source":"iana"},"image/vnd.microsoft.icon":{"source":"iana","compressible":true,"extensions":["ico"]},"image/vnd.mix":{"source":"iana"},"image/vnd.mozilla.apng":{"source":"iana"},"image/vnd.ms-dds":{"compressible":true,"extensions":["dds"]},"image/vnd.ms-modi":{"source":"iana","extensions":["mdi"]},"image/vnd.ms-photo":{"source":"apache","extensions":["wdp"]},"image/vnd.net-fpx":{"source":"iana","extensions":["npx"]},"image/vnd.pco.b16":{"source":"iana","extensions":["b16"]},"image/vnd.radiance":{"source":"iana"},"image/vnd.sealed.png":{"source":"iana"},"image/vnd.sealedmedia.softseal.gif":{"source":"iana"},"image/vnd.sealedmedia.softseal.jpg":{"source":"iana"},"image/vnd.svf":{"source":"iana"},"image/vnd.tencent.tap":{"source":"iana","extensions":["tap"]},"image/vnd.valve.source.texture":{"source":"iana","extensions":["vtf"]},"image/vnd.wap.wbmp":{"source":"iana","extensions":["wbmp"]},"image/vnd.xiff":{"source":"iana","extensions":["xif"]},"image/vnd.zbrush.pcx":{"source":"iana","extensions":["pcx"]},"image/webp":{"source":"apache","extensions":["webp"]},"image/wmf":{"source":"iana","extensions":["wmf"]},"image/x-3ds":{"source":"apache","extensions":["3ds"]},"image/x-cmu-raster":{"source":"apache","extensions":["ras"]},"image/x-cmx":{"source":"apache","extensions":["cmx"]},"image/x-freehand":{"source":"apache","extensions":["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{"source":"apache","compressible":true,"extensions":["ico"]},"image/x-jng":{"source":"nginx","extensions":["jng"]},"image/x-mrsid-image":{"source":"apache","extensions":["sid"]},"image/x-ms-bmp":{"source":"nginx","compressible":true,"extensions":["bmp"]},"image/x-pcx":{"source":"apache","extensions":["pcx"]},"image/x-pict":{"source":"apache","extensions":["pic","pct"]},"image/x-portable-anymap":{"source":"apache","extensions":["pnm"]},"image/x-portable-bitmap":{"source":"apache","extensions":["pbm"]},"image/x-portable-graymap":{"source":"apache","extensions":["pgm"]},"image/x-portable-pixmap":{"source":"apache","extensions":["ppm"]},"image/x-rgb":{"source":"apache","extensions":["rgb"]},"image/x-tga":{"source":"apache","extensions":["tga"]},"image/x-xbitmap":{"source":"apache","extensions":["xbm"]},"image/x-xcf":{"compressible":false},"image/x-xpixmap":{"source":"apache","extensions":["xpm"]},"image/x-xwindowdump":{"source":"apache","extensions":["xwd"]},"message/cpim":{"source":"iana"},"message/delivery-status":{"source":"iana"},"message/disposition-notification":{"source":"iana","extensions":["disposition-notification"]},"message/external-body":{"source":"iana"},"message/feedback-report":{"source":"iana"},"message/global":{"source":"iana","extensions":["u8msg"]},"message/global-delivery-status":{"source":"iana","extensions":["u8dsn"]},"message/global-disposition-notification":{"source":"iana","extensions":["u8mdn"]},"message/global-headers":{"source":"iana","extensions":["u8hdr"]},"message/http":{"source":"iana","compressible":false},"message/imdn+xml":{"source":"iana","compressible":true},"message/news":{"source":"iana"},"message/partial":{"source":"iana","compressible":false},"message/rfc822":{"source":"iana","compressible":true,"extensions":["eml","mime"]},"message/s-http":{"source":"iana"},"message/sip":{"source":"iana"},"message/sipfrag":{"source":"iana"},"message/tracking-status":{"source":"iana"},"message/vnd.si.simp":{"source":"iana"},"message/vnd.wfa.wsc":{"source":"iana","extensions":["wsc"]},"model/3mf":{"source":"iana","extensions":["3mf"]},"model/e57":{"source":"iana"},"model/gltf+json":{"source":"iana","compressible":true,"extensions":["gltf"]},"model/gltf-binary":{"source":"iana","compressible":true,"extensions":["glb"]},"model/iges":{"source":"iana","compressible":false,"extensions":["igs","iges"]},"model/mesh":{"source":"iana","compressible":false,"extensions":["msh","mesh","silo"]},"model/mtl":{"source":"iana","extensions":["mtl"]},"model/obj":{"source":"iana","extensions":["obj"]},"model/step":{"source":"iana"},"model/step+xml":{"source":"iana","compressible":true,"extensions":["stpx"]},"model/step+zip":{"source":"iana","compressible":false,"extensions":["stpz"]},"model/step-xml+zip":{"source":"iana","compressible":false,"extensions":["stpxz"]},"model/stl":{"source":"iana","extensions":["stl"]},"model/vnd.collada+xml":{"source":"iana","compressible":true,"extensions":["dae"]},"model/vnd.dwf":{"source":"iana","extensions":["dwf"]},"model/vnd.flatland.3dml":{"source":"iana"},"model/vnd.gdl":{"source":"iana","extensions":["gdl"]},"model/vnd.gs-gdl":{"source":"apache"},"model/vnd.gs.gdl":{"source":"iana"},"model/vnd.gtw":{"source":"iana","extensions":["gtw"]},"model/vnd.moml+xml":{"source":"iana","compressible":true},"model/vnd.mts":{"source":"iana","extensions":["mts"]},"model/vnd.opengex":{"source":"iana","extensions":["ogex"]},"model/vnd.parasolid.transmit.binary":{"source":"iana","extensions":["x_b"]},"model/vnd.parasolid.transmit.text":{"source":"iana","extensions":["x_t"]},"model/vnd.pytha.pyox":{"source":"iana"},"model/vnd.rosette.annotated-data-model":{"source":"iana"},"model/vnd.sap.vds":{"source":"iana","extensions":["vds"]},"model/vnd.usdz+zip":{"source":"iana","compressible":false,"extensions":["usdz"]},"model/vnd.valve.source.compiled-map":{"source":"iana","extensions":["bsp"]},"model/vnd.vtu":{"source":"iana","extensions":["vtu"]},"model/vrml":{"source":"iana","compressible":false,"extensions":["wrl","vrml"]},"model/x3d+binary":{"source":"apache","compressible":false,"extensions":["x3db","x3dbz"]},"model/x3d+fastinfoset":{"source":"iana","extensions":["x3db"]},"model/x3d+vrml":{"source":"apache","compressible":false,"extensions":["x3dv","x3dvz"]},"model/x3d+xml":{"source":"iana","compressible":true,"extensions":["x3d","x3dz"]},"model/x3d-vrml":{"source":"iana","extensions":["x3dv"]},"multipart/alternative":{"source":"iana","compressible":false},"multipart/appledouble":{"source":"iana"},"multipart/byteranges":{"source":"iana"},"multipart/digest":{"source":"iana"},"multipart/encrypted":{"source":"iana","compressible":false},"multipart/form-data":{"source":"iana","compressible":false},"multipart/header-set":{"source":"iana"},"multipart/mixed":{"source":"iana"},"multipart/multilingual":{"source":"iana"},"multipart/parallel":{"source":"iana"},"multipart/related":{"source":"iana","compressible":false},"multipart/report":{"source":"iana"},"multipart/signed":{"source":"iana","compressible":false},"multipart/vnd.bint.med-plus":{"source":"iana"},"multipart/voice-message":{"source":"iana"},"multipart/x-mixed-replace":{"source":"iana"},"text/1d-interleaved-parityfec":{"source":"iana"},"text/cache-manifest":{"source":"iana","compressible":true,"extensions":["appcache","manifest"]},"text/calendar":{"source":"iana","extensions":["ics","ifb"]},"text/calender":{"compressible":true},"text/cmd":{"compressible":true},"text/coffeescript":{"extensions":["coffee","litcoffee"]},"text/cql":{"source":"iana"},"text/cql-expression":{"source":"iana"},"text/cql-identifier":{"source":"iana"},"text/css":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["css"]},"text/csv":{"source":"iana","compressible":true,"extensions":["csv"]},"text/csv-schema":{"source":"iana"},"text/directory":{"source":"iana"},"text/dns":{"source":"iana"},"text/ecmascript":{"source":"iana"},"text/encaprtp":{"source":"iana"},"text/enriched":{"source":"iana"},"text/fhirpath":{"source":"iana"},"text/flexfec":{"source":"iana"},"text/fwdred":{"source":"iana"},"text/gff3":{"source":"iana"},"text/grammar-ref-list":{"source":"iana"},"text/html":{"source":"iana","compressible":true,"extensions":["html","htm","shtml"]},"text/jade":{"extensions":["jade"]},"text/javascript":{"source":"iana","compressible":true},"text/jcr-cnd":{"source":"iana"},"text/jsx":{"compressible":true,"extensions":["jsx"]},"text/less":{"compressible":true,"extensions":["less"]},"text/markdown":{"source":"iana","compressible":true,"extensions":["markdown","md"]},"text/mathml":{"source":"nginx","extensions":["mml"]},"text/mdx":{"compressible":true,"extensions":["mdx"]},"text/mizar":{"source":"iana"},"text/n3":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["n3"]},"text/parameters":{"source":"iana","charset":"UTF-8"},"text/parityfec":{"source":"iana"},"text/plain":{"source":"iana","compressible":true,"extensions":["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{"source":"iana","charset":"UTF-8"},"text/prs.fallenstein.rst":{"source":"iana"},"text/prs.lines.tag":{"source":"iana","extensions":["dsc"]},"text/prs.prop.logic":{"source":"iana"},"text/raptorfec":{"source":"iana"},"text/red":{"source":"iana"},"text/rfc822-headers":{"source":"iana"},"text/richtext":{"source":"iana","compressible":true,"extensions":["rtx"]},"text/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"text/rtp-enc-aescm128":{"source":"iana"},"text/rtploopback":{"source":"iana"},"text/rtx":{"source":"iana"},"text/sgml":{"source":"iana","extensions":["sgml","sgm"]},"text/shaclc":{"source":"iana"},"text/shex":{"source":"iana","extensions":["shex"]},"text/slim":{"extensions":["slim","slm"]},"text/spdx":{"source":"iana","extensions":["spdx"]},"text/strings":{"source":"iana"},"text/stylus":{"extensions":["stylus","styl"]},"text/t140":{"source":"iana"},"text/tab-separated-values":{"source":"iana","compressible":true,"extensions":["tsv"]},"text/troff":{"source":"iana","extensions":["t","tr","roff","man","me","ms"]},"text/turtle":{"source":"iana","charset":"UTF-8","extensions":["ttl"]},"text/ulpfec":{"source":"iana"},"text/uri-list":{"source":"iana","compressible":true,"extensions":["uri","uris","urls"]},"text/vcard":{"source":"iana","compressible":true,"extensions":["vcard"]},"text/vnd.a":{"source":"iana"},"text/vnd.abc":{"source":"iana"},"text/vnd.ascii-art":{"source":"iana"},"text/vnd.curl":{"source":"iana","extensions":["curl"]},"text/vnd.curl.dcurl":{"source":"apache","extensions":["dcurl"]},"text/vnd.curl.mcurl":{"source":"apache","extensions":["mcurl"]},"text/vnd.curl.scurl":{"source":"apache","extensions":["scurl"]},"text/vnd.debian.copyright":{"source":"iana","charset":"UTF-8"},"text/vnd.dmclientscript":{"source":"iana"},"text/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"text/vnd.esmertec.theme-descriptor":{"source":"iana","charset":"UTF-8"},"text/vnd.familysearch.gedcom":{"source":"iana","extensions":["ged"]},"text/vnd.ficlab.flt":{"source":"iana"},"text/vnd.fly":{"source":"iana","extensions":["fly"]},"text/vnd.fmi.flexstor":{"source":"iana","extensions":["flx"]},"text/vnd.gml":{"source":"iana"},"text/vnd.graphviz":{"source":"iana","extensions":["gv"]},"text/vnd.hans":{"source":"iana"},"text/vnd.hgl":{"source":"iana"},"text/vnd.in3d.3dml":{"source":"iana","extensions":["3dml"]},"text/vnd.in3d.spot":{"source":"iana","extensions":["spot"]},"text/vnd.iptc.newsml":{"source":"iana"},"text/vnd.iptc.nitf":{"source":"iana"},"text/vnd.latex-z":{"source":"iana"},"text/vnd.motorola.reflex":{"source":"iana"},"text/vnd.ms-mediapackage":{"source":"iana"},"text/vnd.net2phone.commcenter.command":{"source":"iana"},"text/vnd.radisys.msml-basic-layout":{"source":"iana"},"text/vnd.senx.warpscript":{"source":"iana"},"text/vnd.si.uricatalogue":{"source":"iana"},"text/vnd.sosi":{"source":"iana"},"text/vnd.sun.j2me.app-descriptor":{"source":"iana","charset":"UTF-8","extensions":["jad"]},"text/vnd.trolltech.linguist":{"source":"iana","charset":"UTF-8"},"text/vnd.wap.si":{"source":"iana"},"text/vnd.wap.sl":{"source":"iana"},"text/vnd.wap.wml":{"source":"iana","extensions":["wml"]},"text/vnd.wap.wmlscript":{"source":"iana","extensions":["wmls"]},"text/vtt":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["vtt"]},"text/x-asm":{"source":"apache","extensions":["s","asm"]},"text/x-c":{"source":"apache","extensions":["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{"source":"nginx","extensions":["htc"]},"text/x-fortran":{"source":"apache","extensions":["f","for","f77","f90"]},"text/x-gwt-rpc":{"compressible":true},"text/x-handlebars-template":{"extensions":["hbs"]},"text/x-java-source":{"source":"apache","extensions":["java"]},"text/x-jquery-tmpl":{"compressible":true},"text/x-lua":{"extensions":["lua"]},"text/x-markdown":{"compressible":true,"extensions":["mkd"]},"text/x-nfo":{"source":"apache","extensions":["nfo"]},"text/x-opml":{"source":"apache","extensions":["opml"]},"text/x-org":{"compressible":true,"extensions":["org"]},"text/x-pascal":{"source":"apache","extensions":["p","pas"]},"text/x-processing":{"compressible":true,"extensions":["pde"]},"text/x-sass":{"extensions":["sass"]},"text/x-scss":{"extensions":["scss"]},"text/x-setext":{"source":"apache","extensions":["etx"]},"text/x-sfv":{"source":"apache","extensions":["sfv"]},"text/x-suse-ymp":{"compressible":true,"extensions":["ymp"]},"text/x-uuencode":{"source":"apache","extensions":["uu"]},"text/x-vcalendar":{"source":"apache","extensions":["vcs"]},"text/x-vcard":{"source":"apache","extensions":["vcf"]},"text/xml":{"source":"iana","compressible":true,"extensions":["xml"]},"text/xml-external-parsed-entity":{"source":"iana"},"text/yaml":{"compressible":true,"extensions":["yaml","yml"]},"video/1d-interleaved-parityfec":{"source":"iana"},"video/3gpp":{"source":"iana","extensions":["3gp","3gpp"]},"video/3gpp-tt":{"source":"iana"},"video/3gpp2":{"source":"iana","extensions":["3g2"]},"video/av1":{"source":"iana"},"video/bmpeg":{"source":"iana"},"video/bt656":{"source":"iana"},"video/celb":{"source":"iana"},"video/dv":{"source":"iana"},"video/encaprtp":{"source":"iana"},"video/ffv1":{"source":"iana"},"video/flexfec":{"source":"iana"},"video/h261":{"source":"iana","extensions":["h261"]},"video/h263":{"source":"iana","extensions":["h263"]},"video/h263-1998":{"source":"iana"},"video/h263-2000":{"source":"iana"},"video/h264":{"source":"iana","extensions":["h264"]},"video/h264-rcdo":{"source":"iana"},"video/h264-svc":{"source":"iana"},"video/h265":{"source":"iana"},"video/iso.segment":{"source":"iana","extensions":["m4s"]},"video/jpeg":{"source":"iana","extensions":["jpgv"]},"video/jpeg2000":{"source":"iana"},"video/jpm":{"source":"apache","extensions":["jpm","jpgm"]},"video/jxsv":{"source":"iana"},"video/mj2":{"source":"iana","extensions":["mj2","mjp2"]},"video/mp1s":{"source":"iana"},"video/mp2p":{"source":"iana"},"video/mp2t":{"source":"iana","extensions":["ts"]},"video/mp4":{"source":"iana","compressible":false,"extensions":["mp4","mp4v","mpg4"]},"video/mp4v-es":{"source":"iana"},"video/mpeg":{"source":"iana","compressible":false,"extensions":["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{"source":"iana"},"video/mpv":{"source":"iana"},"video/nv":{"source":"iana"},"video/ogg":{"source":"iana","compressible":false,"extensions":["ogv"]},"video/parityfec":{"source":"iana"},"video/pointer":{"source":"iana"},"video/quicktime":{"source":"iana","compressible":false,"extensions":["qt","mov"]},"video/raptorfec":{"source":"iana"},"video/raw":{"source":"iana"},"video/rtp-enc-aescm128":{"source":"iana"},"video/rtploopback":{"source":"iana"},"video/rtx":{"source":"iana"},"video/scip":{"source":"iana"},"video/smpte291":{"source":"iana"},"video/smpte292m":{"source":"iana"},"video/ulpfec":{"source":"iana"},"video/vc1":{"source":"iana"},"video/vc2":{"source":"iana"},"video/vnd.cctv":{"source":"iana"},"video/vnd.dece.hd":{"source":"iana","extensions":["uvh","uvvh"]},"video/vnd.dece.mobile":{"source":"iana","extensions":["uvm","uvvm"]},"video/vnd.dece.mp4":{"source":"iana"},"video/vnd.dece.pd":{"source":"iana","extensions":["uvp","uvvp"]},"video/vnd.dece.sd":{"source":"iana","extensions":["uvs","uvvs"]},"video/vnd.dece.video":{"source":"iana","extensions":["uvv","uvvv"]},"video/vnd.directv.mpeg":{"source":"iana"},"video/vnd.directv.mpeg-tts":{"source":"iana"},"video/vnd.dlna.mpeg-tts":{"source":"iana"},"video/vnd.dvb.file":{"source":"iana","extensions":["dvb"]},"video/vnd.fvt":{"source":"iana","extensions":["fvt"]},"video/vnd.hns.video":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.ttsavc":{"source":"iana"},"video/vnd.iptvforum.ttsmpeg2":{"source":"iana"},"video/vnd.motorola.video":{"source":"iana"},"video/vnd.motorola.videop":{"source":"iana"},"video/vnd.mpegurl":{"source":"iana","extensions":["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{"source":"iana","extensions":["pyv"]},"video/vnd.nokia.interleaved-multimedia":{"source":"iana"},"video/vnd.nokia.mp4vr":{"source":"iana"},"video/vnd.nokia.videovoip":{"source":"iana"},"video/vnd.objectvideo":{"source":"iana"},"video/vnd.radgamettools.bink":{"source":"iana"},"video/vnd.radgamettools.smacker":{"source":"iana"},"video/vnd.sealed.mpeg1":{"source":"iana"},"video/vnd.sealed.mpeg4":{"source":"iana"},"video/vnd.sealed.swf":{"source":"iana"},"video/vnd.sealedmedia.softseal.mov":{"source":"iana"},"video/vnd.uvvu.mp4":{"source":"iana","extensions":["uvu","uvvu"]},"video/vnd.vivo":{"source":"iana","extensions":["viv"]},"video/vnd.youtube.yt":{"source":"iana"},"video/vp8":{"source":"iana"},"video/vp9":{"source":"iana"},"video/webm":{"source":"apache","compressible":false,"extensions":["webm"]},"video/x-f4v":{"source":"apache","extensions":["f4v"]},"video/x-fli":{"source":"apache","extensions":["fli"]},"video/x-flv":{"source":"apache","compressible":false,"extensions":["flv"]},"video/x-m4v":{"source":"apache","extensions":["m4v"]},"video/x-matroska":{"source":"apache","compressible":false,"extensions":["mkv","mk3d","mks"]},"video/x-mng":{"source":"apache","extensions":["mng"]},"video/x-ms-asf":{"source":"apache","extensions":["asf","asx"]},"video/x-ms-vob":{"source":"apache","extensions":["vob"]},"video/x-ms-wm":{"source":"apache","extensions":["wm"]},"video/x-ms-wmv":{"source":"apache","compressible":false,"extensions":["wmv"]},"video/x-ms-wmx":{"source":"apache","extensions":["wmx"]},"video/x-ms-wvx":{"source":"apache","extensions":["wvx"]},"video/x-msvideo":{"source":"apache","extensions":["avi"]},"video/x-sgi-movie":{"source":"apache","extensions":["movie"]},"video/x-smv":{"source":"apache","extensions":["smv"]},"x-conference/x-cooltalk":{"source":"apache","extensions":["ice"]},"x-shader/x-fragment":{"compressible":true},"x-shader/x-vertex":{"compressible":true}}')},1907:e=>{"use strict";e.exports=JSON.parse('[[[0,44],"disallowed_STD3_valid"],[[45,46],"valid"],[[47,47],"disallowed_STD3_valid"],[[48,57],"valid"],[[58,64],"disallowed_STD3_valid"],[[65,65],"mapped",[97]],[[66,66],"mapped",[98]],[[67,67],"mapped",[99]],[[68,68],"mapped",[100]],[[69,69],"mapped",[101]],[[70,70],"mapped",[102]],[[71,71],"mapped",[103]],[[72,72],"mapped",[104]],[[73,73],"mapped",[105]],[[74,74],"mapped",[106]],[[75,75],"mapped",[107]],[[76,76],"mapped",[108]],[[77,77],"mapped",[109]],[[78,78],"mapped",[110]],[[79,79],"mapped",[111]],[[80,80],"mapped",[112]],[[81,81],"mapped",[113]],[[82,82],"mapped",[114]],[[83,83],"mapped",[115]],[[84,84],"mapped",[116]],[[85,85],"mapped",[117]],[[86,86],"mapped",[118]],[[87,87],"mapped",[119]],[[88,88],"mapped",[120]],[[89,89],"mapped",[121]],[[90,90],"mapped",[122]],[[91,96],"disallowed_STD3_valid"],[[97,122],"valid"],[[123,127],"disallowed_STD3_valid"],[[128,159],"disallowed"],[[160,160],"disallowed_STD3_mapped",[32]],[[161,167],"valid",[],"NV8"],[[168,168],"disallowed_STD3_mapped",[32,776]],[[169,169],"valid",[],"NV8"],[[170,170],"mapped",[97]],[[171,172],"valid",[],"NV8"],[[173,173],"ignored"],[[174,174],"valid",[],"NV8"],[[175,175],"disallowed_STD3_mapped",[32,772]],[[176,177],"valid",[],"NV8"],[[178,178],"mapped",[50]],[[179,179],"mapped",[51]],[[180,180],"disallowed_STD3_mapped",[32,769]],[[181,181],"mapped",[956]],[[182,182],"valid",[],"NV8"],[[183,183],"valid"],[[184,184],"disallowed_STD3_mapped",[32,807]],[[185,185],"mapped",[49]],[[186,186],"mapped",[111]],[[187,187],"valid",[],"NV8"],[[188,188],"mapped",[49,8260,52]],[[189,189],"mapped",[49,8260,50]],[[190,190],"mapped",[51,8260,52]],[[191,191],"valid",[],"NV8"],[[192,192],"mapped",[224]],[[193,193],"mapped",[225]],[[194,194],"mapped",[226]],[[195,195],"mapped",[227]],[[196,196],"mapped",[228]],[[197,197],"mapped",[229]],[[198,198],"mapped",[230]],[[199,199],"mapped",[231]],[[200,200],"mapped",[232]],[[201,201],"mapped",[233]],[[202,202],"mapped",[234]],[[203,203],"mapped",[235]],[[204,204],"mapped",[236]],[[205,205],"mapped",[237]],[[206,206],"mapped",[238]],[[207,207],"mapped",[239]],[[208,208],"mapped",[240]],[[209,209],"mapped",[241]],[[210,210],"mapped",[242]],[[211,211],"mapped",[243]],[[212,212],"mapped",[244]],[[213,213],"mapped",[245]],[[214,214],"mapped",[246]],[[215,215],"valid",[],"NV8"],[[216,216],"mapped",[248]],[[217,217],"mapped",[249]],[[218,218],"mapped",[250]],[[219,219],"mapped",[251]],[[220,220],"mapped",[252]],[[221,221],"mapped",[253]],[[222,222],"mapped",[254]],[[223,223],"deviation",[115,115]],[[224,246],"valid"],[[247,247],"valid",[],"NV8"],[[248,255],"valid"],[[256,256],"mapped",[257]],[[257,257],"valid"],[[258,258],"mapped",[259]],[[259,259],"valid"],[[260,260],"mapped",[261]],[[261,261],"valid"],[[262,262],"mapped",[263]],[[263,263],"valid"],[[264,264],"mapped",[265]],[[265,265],"valid"],[[266,266],"mapped",[267]],[[267,267],"valid"],[[268,268],"mapped",[269]],[[269,269],"valid"],[[270,270],"mapped",[271]],[[271,271],"valid"],[[272,272],"mapped",[273]],[[273,273],"valid"],[[274,274],"mapped",[275]],[[275,275],"valid"],[[276,276],"mapped",[277]],[[277,277],"valid"],[[278,278],"mapped",[279]],[[279,279],"valid"],[[280,280],"mapped",[281]],[[281,281],"valid"],[[282,282],"mapped",[283]],[[283,283],"valid"],[[284,284],"mapped",[285]],[[285,285],"valid"],[[286,286],"mapped",[287]],[[287,287],"valid"],[[288,288],"mapped",[289]],[[289,289],"valid"],[[290,290],"mapped",[291]],[[291,291],"valid"],[[292,292],"mapped",[293]],[[293,293],"valid"],[[294,294],"mapped",[295]],[[295,295],"valid"],[[296,296],"mapped",[297]],[[297,297],"valid"],[[298,298],"mapped",[299]],[[299,299],"valid"],[[300,300],"mapped",[301]],[[301,301],"valid"],[[302,302],"mapped",[303]],[[303,303],"valid"],[[304,304],"mapped",[105,775]],[[305,305],"valid"],[[306,307],"mapped",[105,106]],[[308,308],"mapped",[309]],[[309,309],"valid"],[[310,310],"mapped",[311]],[[311,312],"valid"],[[313,313],"mapped",[314]],[[314,314],"valid"],[[315,315],"mapped",[316]],[[316,316],"valid"],[[317,317],"mapped",[318]],[[318,318],"valid"],[[319,320],"mapped",[108,183]],[[321,321],"mapped",[322]],[[322,322],"valid"],[[323,323],"mapped",[324]],[[324,324],"valid"],[[325,325],"mapped",[326]],[[326,326],"valid"],[[327,327],"mapped",[328]],[[328,328],"valid"],[[329,329],"mapped",[700,110]],[[330,330],"mapped",[331]],[[331,331],"valid"],[[332,332],"mapped",[333]],[[333,333],"valid"],[[334,334],"mapped",[335]],[[335,335],"valid"],[[336,336],"mapped",[337]],[[337,337],"valid"],[[338,338],"mapped",[339]],[[339,339],"valid"],[[340,340],"mapped",[341]],[[341,341],"valid"],[[342,342],"mapped",[343]],[[343,343],"valid"],[[344,344],"mapped",[345]],[[345,345],"valid"],[[346,346],"mapped",[347]],[[347,347],"valid"],[[348,348],"mapped",[349]],[[349,349],"valid"],[[350,350],"mapped",[351]],[[351,351],"valid"],[[352,352],"mapped",[353]],[[353,353],"valid"],[[354,354],"mapped",[355]],[[355,355],"valid"],[[356,356],"mapped",[357]],[[357,357],"valid"],[[358,358],"mapped",[359]],[[359,359],"valid"],[[360,360],"mapped",[361]],[[361,361],"valid"],[[362,362],"mapped",[363]],[[363,363],"valid"],[[364,364],"mapped",[365]],[[365,365],"valid"],[[366,366],"mapped",[367]],[[367,367],"valid"],[[368,368],"mapped",[369]],[[369,369],"valid"],[[370,370],"mapped",[371]],[[371,371],"valid"],[[372,372],"mapped",[373]],[[373,373],"valid"],[[374,374],"mapped",[375]],[[375,375],"valid"],[[376,376],"mapped",[255]],[[377,377],"mapped",[378]],[[378,378],"valid"],[[379,379],"mapped",[380]],[[380,380],"valid"],[[381,381],"mapped",[382]],[[382,382],"valid"],[[383,383],"mapped",[115]],[[384,384],"valid"],[[385,385],"mapped",[595]],[[386,386],"mapped",[387]],[[387,387],"valid"],[[388,388],"mapped",[389]],[[389,389],"valid"],[[390,390],"mapped",[596]],[[391,391],"mapped",[392]],[[392,392],"valid"],[[393,393],"mapped",[598]],[[394,394],"mapped",[599]],[[395,395],"mapped",[396]],[[396,397],"valid"],[[398,398],"mapped",[477]],[[399,399],"mapped",[601]],[[400,400],"mapped",[603]],[[401,401],"mapped",[402]],[[402,402],"valid"],[[403,403],"mapped",[608]],[[404,404],"mapped",[611]],[[405,405],"valid"],[[406,406],"mapped",[617]],[[407,407],"mapped",[616]],[[408,408],"mapped",[409]],[[409,411],"valid"],[[412,412],"mapped",[623]],[[413,413],"mapped",[626]],[[414,414],"valid"],[[415,415],"mapped",[629]],[[416,416],"mapped",[417]],[[417,417],"valid"],[[418,418],"mapped",[419]],[[419,419],"valid"],[[420,420],"mapped",[421]],[[421,421],"valid"],[[422,422],"mapped",[640]],[[423,423],"mapped",[424]],[[424,424],"valid"],[[425,425],"mapped",[643]],[[426,427],"valid"],[[428,428],"mapped",[429]],[[429,429],"valid"],[[430,430],"mapped",[648]],[[431,431],"mapped",[432]],[[432,432],"valid"],[[433,433],"mapped",[650]],[[434,434],"mapped",[651]],[[435,435],"mapped",[436]],[[436,436],"valid"],[[437,437],"mapped",[438]],[[438,438],"valid"],[[439,439],"mapped",[658]],[[440,440],"mapped",[441]],[[441,443],"valid"],[[444,444],"mapped",[445]],[[445,451],"valid"],[[452,454],"mapped",[100,382]],[[455,457],"mapped",[108,106]],[[458,460],"mapped",[110,106]],[[461,461],"mapped",[462]],[[462,462],"valid"],[[463,463],"mapped",[464]],[[464,464],"valid"],[[465,465],"mapped",[466]],[[466,466],"valid"],[[467,467],"mapped",[468]],[[468,468],"valid"],[[469,469],"mapped",[470]],[[470,470],"valid"],[[471,471],"mapped",[472]],[[472,472],"valid"],[[473,473],"mapped",[474]],[[474,474],"valid"],[[475,475],"mapped",[476]],[[476,477],"valid"],[[478,478],"mapped",[479]],[[479,479],"valid"],[[480,480],"mapped",[481]],[[481,481],"valid"],[[482,482],"mapped",[483]],[[483,483],"valid"],[[484,484],"mapped",[485]],[[485,485],"valid"],[[486,486],"mapped",[487]],[[487,487],"valid"],[[488,488],"mapped",[489]],[[489,489],"valid"],[[490,490],"mapped",[491]],[[491,491],"valid"],[[492,492],"mapped",[493]],[[493,493],"valid"],[[494,494],"mapped",[495]],[[495,496],"valid"],[[497,499],"mapped",[100,122]],[[500,500],"mapped",[501]],[[501,501],"valid"],[[502,502],"mapped",[405]],[[503,503],"mapped",[447]],[[504,504],"mapped",[505]],[[505,505],"valid"],[[506,506],"mapped",[507]],[[507,507],"valid"],[[508,508],"mapped",[509]],[[509,509],"valid"],[[510,510],"mapped",[511]],[[511,511],"valid"],[[512,512],"mapped",[513]],[[513,513],"valid"],[[514,514],"mapped",[515]],[[515,515],"valid"],[[516,516],"mapped",[517]],[[517,517],"valid"],[[518,518],"mapped",[519]],[[519,519],"valid"],[[520,520],"mapped",[521]],[[521,521],"valid"],[[522,522],"mapped",[523]],[[523,523],"valid"],[[524,524],"mapped",[525]],[[525,525],"valid"],[[526,526],"mapped",[527]],[[527,527],"valid"],[[528,528],"mapped",[529]],[[529,529],"valid"],[[530,530],"mapped",[531]],[[531,531],"valid"],[[532,532],"mapped",[533]],[[533,533],"valid"],[[534,534],"mapped",[535]],[[535,535],"valid"],[[536,536],"mapped",[537]],[[537,537],"valid"],[[538,538],"mapped",[539]],[[539,539],"valid"],[[540,540],"mapped",[541]],[[541,541],"valid"],[[542,542],"mapped",[543]],[[543,543],"valid"],[[544,544],"mapped",[414]],[[545,545],"valid"],[[546,546],"mapped",[547]],[[547,547],"valid"],[[548,548],"mapped",[549]],[[549,549],"valid"],[[550,550],"mapped",[551]],[[551,551],"valid"],[[552,552],"mapped",[553]],[[553,553],"valid"],[[554,554],"mapped",[555]],[[555,555],"valid"],[[556,556],"mapped",[557]],[[557,557],"valid"],[[558,558],"mapped",[559]],[[559,559],"valid"],[[560,560],"mapped",[561]],[[561,561],"valid"],[[562,562],"mapped",[563]],[[563,563],"valid"],[[564,566],"valid"],[[567,569],"valid"],[[570,570],"mapped",[11365]],[[571,571],"mapped",[572]],[[572,572],"valid"],[[573,573],"mapped",[410]],[[574,574],"mapped",[11366]],[[575,576],"valid"],[[577,577],"mapped",[578]],[[578,578],"valid"],[[579,579],"mapped",[384]],[[580,580],"mapped",[649]],[[581,581],"mapped",[652]],[[582,582],"mapped",[583]],[[583,583],"valid"],[[584,584],"mapped",[585]],[[585,585],"valid"],[[586,586],"mapped",[587]],[[587,587],"valid"],[[588,588],"mapped",[589]],[[589,589],"valid"],[[590,590],"mapped",[591]],[[591,591],"valid"],[[592,680],"valid"],[[681,685],"valid"],[[686,687],"valid"],[[688,688],"mapped",[104]],[[689,689],"mapped",[614]],[[690,690],"mapped",[106]],[[691,691],"mapped",[114]],[[692,692],"mapped",[633]],[[693,693],"mapped",[635]],[[694,694],"mapped",[641]],[[695,695],"mapped",[119]],[[696,696],"mapped",[121]],[[697,705],"valid"],[[706,709],"valid",[],"NV8"],[[710,721],"valid"],[[722,727],"valid",[],"NV8"],[[728,728],"disallowed_STD3_mapped",[32,774]],[[729,729],"disallowed_STD3_mapped",[32,775]],[[730,730],"disallowed_STD3_mapped",[32,778]],[[731,731],"disallowed_STD3_mapped",[32,808]],[[732,732],"disallowed_STD3_mapped",[32,771]],[[733,733],"disallowed_STD3_mapped",[32,779]],[[734,734],"valid",[],"NV8"],[[735,735],"valid",[],"NV8"],[[736,736],"mapped",[611]],[[737,737],"mapped",[108]],[[738,738],"mapped",[115]],[[739,739],"mapped",[120]],[[740,740],"mapped",[661]],[[741,745],"valid",[],"NV8"],[[746,747],"valid",[],"NV8"],[[748,748],"valid"],[[749,749],"valid",[],"NV8"],[[750,750],"valid"],[[751,767],"valid",[],"NV8"],[[768,831],"valid"],[[832,832],"mapped",[768]],[[833,833],"mapped",[769]],[[834,834],"valid"],[[835,835],"mapped",[787]],[[836,836],"mapped",[776,769]],[[837,837],"mapped",[953]],[[838,846],"valid"],[[847,847],"ignored"],[[848,855],"valid"],[[856,860],"valid"],[[861,863],"valid"],[[864,865],"valid"],[[866,866],"valid"],[[867,879],"valid"],[[880,880],"mapped",[881]],[[881,881],"valid"],[[882,882],"mapped",[883]],[[883,883],"valid"],[[884,884],"mapped",[697]],[[885,885],"valid"],[[886,886],"mapped",[887]],[[887,887],"valid"],[[888,889],"disallowed"],[[890,890],"disallowed_STD3_mapped",[32,953]],[[891,893],"valid"],[[894,894],"disallowed_STD3_mapped",[59]],[[895,895],"mapped",[1011]],[[896,899],"disallowed"],[[900,900],"disallowed_STD3_mapped",[32,769]],[[901,901],"disallowed_STD3_mapped",[32,776,769]],[[902,902],"mapped",[940]],[[903,903],"mapped",[183]],[[904,904],"mapped",[941]],[[905,905],"mapped",[942]],[[906,906],"mapped",[943]],[[907,907],"disallowed"],[[908,908],"mapped",[972]],[[909,909],"disallowed"],[[910,910],"mapped",[973]],[[911,911],"mapped",[974]],[[912,912],"valid"],[[913,913],"mapped",[945]],[[914,914],"mapped",[946]],[[915,915],"mapped",[947]],[[916,916],"mapped",[948]],[[917,917],"mapped",[949]],[[918,918],"mapped",[950]],[[919,919],"mapped",[951]],[[920,920],"mapped",[952]],[[921,921],"mapped",[953]],[[922,922],"mapped",[954]],[[923,923],"mapped",[955]],[[924,924],"mapped",[956]],[[925,925],"mapped",[957]],[[926,926],"mapped",[958]],[[927,927],"mapped",[959]],[[928,928],"mapped",[960]],[[929,929],"mapped",[961]],[[930,930],"disallowed"],[[931,931],"mapped",[963]],[[932,932],"mapped",[964]],[[933,933],"mapped",[965]],[[934,934],"mapped",[966]],[[935,935],"mapped",[967]],[[936,936],"mapped",[968]],[[937,937],"mapped",[969]],[[938,938],"mapped",[970]],[[939,939],"mapped",[971]],[[940,961],"valid"],[[962,962],"deviation",[963]],[[963,974],"valid"],[[975,975],"mapped",[983]],[[976,976],"mapped",[946]],[[977,977],"mapped",[952]],[[978,978],"mapped",[965]],[[979,979],"mapped",[973]],[[980,980],"mapped",[971]],[[981,981],"mapped",[966]],[[982,982],"mapped",[960]],[[983,983],"valid"],[[984,984],"mapped",[985]],[[985,985],"valid"],[[986,986],"mapped",[987]],[[987,987],"valid"],[[988,988],"mapped",[989]],[[989,989],"valid"],[[990,990],"mapped",[991]],[[991,991],"valid"],[[992,992],"mapped",[993]],[[993,993],"valid"],[[994,994],"mapped",[995]],[[995,995],"valid"],[[996,996],"mapped",[997]],[[997,997],"valid"],[[998,998],"mapped",[999]],[[999,999],"valid"],[[1000,1000],"mapped",[1001]],[[1001,1001],"valid"],[[1002,1002],"mapped",[1003]],[[1003,1003],"valid"],[[1004,1004],"mapped",[1005]],[[1005,1005],"valid"],[[1006,1006],"mapped",[1007]],[[1007,1007],"valid"],[[1008,1008],"mapped",[954]],[[1009,1009],"mapped",[961]],[[1010,1010],"mapped",[963]],[[1011,1011],"valid"],[[1012,1012],"mapped",[952]],[[1013,1013],"mapped",[949]],[[1014,1014],"valid",[],"NV8"],[[1015,1015],"mapped",[1016]],[[1016,1016],"valid"],[[1017,1017],"mapped",[963]],[[1018,1018],"mapped",[1019]],[[1019,1019],"valid"],[[1020,1020],"valid"],[[1021,1021],"mapped",[891]],[[1022,1022],"mapped",[892]],[[1023,1023],"mapped",[893]],[[1024,1024],"mapped",[1104]],[[1025,1025],"mapped",[1105]],[[1026,1026],"mapped",[1106]],[[1027,1027],"mapped",[1107]],[[1028,1028],"mapped",[1108]],[[1029,1029],"mapped",[1109]],[[1030,1030],"mapped",[1110]],[[1031,1031],"mapped",[1111]],[[1032,1032],"mapped",[1112]],[[1033,1033],"mapped",[1113]],[[1034,1034],"mapped",[1114]],[[1035,1035],"mapped",[1115]],[[1036,1036],"mapped",[1116]],[[1037,1037],"mapped",[1117]],[[1038,1038],"mapped",[1118]],[[1039,1039],"mapped",[1119]],[[1040,1040],"mapped",[1072]],[[1041,1041],"mapped",[1073]],[[1042,1042],"mapped",[1074]],[[1043,1043],"mapped",[1075]],[[1044,1044],"mapped",[1076]],[[1045,1045],"mapped",[1077]],[[1046,1046],"mapped",[1078]],[[1047,1047],"mapped",[1079]],[[1048,1048],"mapped",[1080]],[[1049,1049],"mapped",[1081]],[[1050,1050],"mapped",[1082]],[[1051,1051],"mapped",[1083]],[[1052,1052],"mapped",[1084]],[[1053,1053],"mapped",[1085]],[[1054,1054],"mapped",[1086]],[[1055,1055],"mapped",[1087]],[[1056,1056],"mapped",[1088]],[[1057,1057],"mapped",[1089]],[[1058,1058],"mapped",[1090]],[[1059,1059],"mapped",[1091]],[[1060,1060],"mapped",[1092]],[[1061,1061],"mapped",[1093]],[[1062,1062],"mapped",[1094]],[[1063,1063],"mapped",[1095]],[[1064,1064],"mapped",[1096]],[[1065,1065],"mapped",[1097]],[[1066,1066],"mapped",[1098]],[[1067,1067],"mapped",[1099]],[[1068,1068],"mapped",[1100]],[[1069,1069],"mapped",[1101]],[[1070,1070],"mapped",[1102]],[[1071,1071],"mapped",[1103]],[[1072,1103],"valid"],[[1104,1104],"valid"],[[1105,1116],"valid"],[[1117,1117],"valid"],[[1118,1119],"valid"],[[1120,1120],"mapped",[1121]],[[1121,1121],"valid"],[[1122,1122],"mapped",[1123]],[[1123,1123],"valid"],[[1124,1124],"mapped",[1125]],[[1125,1125],"valid"],[[1126,1126],"mapped",[1127]],[[1127,1127],"valid"],[[1128,1128],"mapped",[1129]],[[1129,1129],"valid"],[[1130,1130],"mapped",[1131]],[[1131,1131],"valid"],[[1132,1132],"mapped",[1133]],[[1133,1133],"valid"],[[1134,1134],"mapped",[1135]],[[1135,1135],"valid"],[[1136,1136],"mapped",[1137]],[[1137,1137],"valid"],[[1138,1138],"mapped",[1139]],[[1139,1139],"valid"],[[1140,1140],"mapped",[1141]],[[1141,1141],"valid"],[[1142,1142],"mapped",[1143]],[[1143,1143],"valid"],[[1144,1144],"mapped",[1145]],[[1145,1145],"valid"],[[1146,1146],"mapped",[1147]],[[1147,1147],"valid"],[[1148,1148],"mapped",[1149]],[[1149,1149],"valid"],[[1150,1150],"mapped",[1151]],[[1151,1151],"valid"],[[1152,1152],"mapped",[1153]],[[1153,1153],"valid"],[[1154,1154],"valid",[],"NV8"],[[1155,1158],"valid"],[[1159,1159],"valid"],[[1160,1161],"valid",[],"NV8"],[[1162,1162],"mapped",[1163]],[[1163,1163],"valid"],[[1164,1164],"mapped",[1165]],[[1165,1165],"valid"],[[1166,1166],"mapped",[1167]],[[1167,1167],"valid"],[[1168,1168],"mapped",[1169]],[[1169,1169],"valid"],[[1170,1170],"mapped",[1171]],[[1171,1171],"valid"],[[1172,1172],"mapped",[1173]],[[1173,1173],"valid"],[[1174,1174],"mapped",[1175]],[[1175,1175],"valid"],[[1176,1176],"mapped",[1177]],[[1177,1177],"valid"],[[1178,1178],"mapped",[1179]],[[1179,1179],"valid"],[[1180,1180],"mapped",[1181]],[[1181,1181],"valid"],[[1182,1182],"mapped",[1183]],[[1183,1183],"valid"],[[1184,1184],"mapped",[1185]],[[1185,1185],"valid"],[[1186,1186],"mapped",[1187]],[[1187,1187],"valid"],[[1188,1188],"mapped",[1189]],[[1189,1189],"valid"],[[1190,1190],"mapped",[1191]],[[1191,1191],"valid"],[[1192,1192],"mapped",[1193]],[[1193,1193],"valid"],[[1194,1194],"mapped",[1195]],[[1195,1195],"valid"],[[1196,1196],"mapped",[1197]],[[1197,1197],"valid"],[[1198,1198],"mapped",[1199]],[[1199,1199],"valid"],[[1200,1200],"mapped",[1201]],[[1201,1201],"valid"],[[1202,1202],"mapped",[1203]],[[1203,1203],"valid"],[[1204,1204],"mapped",[1205]],[[1205,1205],"valid"],[[1206,1206],"mapped",[1207]],[[1207,1207],"valid"],[[1208,1208],"mapped",[1209]],[[1209,1209],"valid"],[[1210,1210],"mapped",[1211]],[[1211,1211],"valid"],[[1212,1212],"mapped",[1213]],[[1213,1213],"valid"],[[1214,1214],"mapped",[1215]],[[1215,1215],"valid"],[[1216,1216],"disallowed"],[[1217,1217],"mapped",[1218]],[[1218,1218],"valid"],[[1219,1219],"mapped",[1220]],[[1220,1220],"valid"],[[1221,1221],"mapped",[1222]],[[1222,1222],"valid"],[[1223,1223],"mapped",[1224]],[[1224,1224],"valid"],[[1225,1225],"mapped",[1226]],[[1226,1226],"valid"],[[1227,1227],"mapped",[1228]],[[1228,1228],"valid"],[[1229,1229],"mapped",[1230]],[[1230,1230],"valid"],[[1231,1231],"valid"],[[1232,1232],"mapped",[1233]],[[1233,1233],"valid"],[[1234,1234],"mapped",[1235]],[[1235,1235],"valid"],[[1236,1236],"mapped",[1237]],[[1237,1237],"valid"],[[1238,1238],"mapped",[1239]],[[1239,1239],"valid"],[[1240,1240],"mapped",[1241]],[[1241,1241],"valid"],[[1242,1242],"mapped",[1243]],[[1243,1243],"valid"],[[1244,1244],"mapped",[1245]],[[1245,1245],"valid"],[[1246,1246],"mapped",[1247]],[[1247,1247],"valid"],[[1248,1248],"mapped",[1249]],[[1249,1249],"valid"],[[1250,1250],"mapped",[1251]],[[1251,1251],"valid"],[[1252,1252],"mapped",[1253]],[[1253,1253],"valid"],[[1254,1254],"mapped",[1255]],[[1255,1255],"valid"],[[1256,1256],"mapped",[1257]],[[1257,1257],"valid"],[[1258,1258],"mapped",[1259]],[[1259,1259],"valid"],[[1260,1260],"mapped",[1261]],[[1261,1261],"valid"],[[1262,1262],"mapped",[1263]],[[1263,1263],"valid"],[[1264,1264],"mapped",[1265]],[[1265,1265],"valid"],[[1266,1266],"mapped",[1267]],[[1267,1267],"valid"],[[1268,1268],"mapped",[1269]],[[1269,1269],"valid"],[[1270,1270],"mapped",[1271]],[[1271,1271],"valid"],[[1272,1272],"mapped",[1273]],[[1273,1273],"valid"],[[1274,1274],"mapped",[1275]],[[1275,1275],"valid"],[[1276,1276],"mapped",[1277]],[[1277,1277],"valid"],[[1278,1278],"mapped",[1279]],[[1279,1279],"valid"],[[1280,1280],"mapped",[1281]],[[1281,1281],"valid"],[[1282,1282],"mapped",[1283]],[[1283,1283],"valid"],[[1284,1284],"mapped",[1285]],[[1285,1285],"valid"],[[1286,1286],"mapped",[1287]],[[1287,1287],"valid"],[[1288,1288],"mapped",[1289]],[[1289,1289],"valid"],[[1290,1290],"mapped",[1291]],[[1291,1291],"valid"],[[1292,1292],"mapped",[1293]],[[1293,1293],"valid"],[[1294,1294],"mapped",[1295]],[[1295,1295],"valid"],[[1296,1296],"mapped",[1297]],[[1297,1297],"valid"],[[1298,1298],"mapped",[1299]],[[1299,1299],"valid"],[[1300,1300],"mapped",[1301]],[[1301,1301],"valid"],[[1302,1302],"mapped",[1303]],[[1303,1303],"valid"],[[1304,1304],"mapped",[1305]],[[1305,1305],"valid"],[[1306,1306],"mapped",[1307]],[[1307,1307],"valid"],[[1308,1308],"mapped",[1309]],[[1309,1309],"valid"],[[1310,1310],"mapped",[1311]],[[1311,1311],"valid"],[[1312,1312],"mapped",[1313]],[[1313,1313],"valid"],[[1314,1314],"mapped",[1315]],[[1315,1315],"valid"],[[1316,1316],"mapped",[1317]],[[1317,1317],"valid"],[[1318,1318],"mapped",[1319]],[[1319,1319],"valid"],[[1320,1320],"mapped",[1321]],[[1321,1321],"valid"],[[1322,1322],"mapped",[1323]],[[1323,1323],"valid"],[[1324,1324],"mapped",[1325]],[[1325,1325],"valid"],[[1326,1326],"mapped",[1327]],[[1327,1327],"valid"],[[1328,1328],"disallowed"],[[1329,1329],"mapped",[1377]],[[1330,1330],"mapped",[1378]],[[1331,1331],"mapped",[1379]],[[1332,1332],"mapped",[1380]],[[1333,1333],"mapped",[1381]],[[1334,1334],"mapped",[1382]],[[1335,1335],"mapped",[1383]],[[1336,1336],"mapped",[1384]],[[1337,1337],"mapped",[1385]],[[1338,1338],"mapped",[1386]],[[1339,1339],"mapped",[1387]],[[1340,1340],"mapped",[1388]],[[1341,1341],"mapped",[1389]],[[1342,1342],"mapped",[1390]],[[1343,1343],"mapped",[1391]],[[1344,1344],"mapped",[1392]],[[1345,1345],"mapped",[1393]],[[1346,1346],"mapped",[1394]],[[1347,1347],"mapped",[1395]],[[1348,1348],"mapped",[1396]],[[1349,1349],"mapped",[1397]],[[1350,1350],"mapped",[1398]],[[1351,1351],"mapped",[1399]],[[1352,1352],"mapped",[1400]],[[1353,1353],"mapped",[1401]],[[1354,1354],"mapped",[1402]],[[1355,1355],"mapped",[1403]],[[1356,1356],"mapped",[1404]],[[1357,1357],"mapped",[1405]],[[1358,1358],"mapped",[1406]],[[1359,1359],"mapped",[1407]],[[1360,1360],"mapped",[1408]],[[1361,1361],"mapped",[1409]],[[1362,1362],"mapped",[1410]],[[1363,1363],"mapped",[1411]],[[1364,1364],"mapped",[1412]],[[1365,1365],"mapped",[1413]],[[1366,1366],"mapped",[1414]],[[1367,1368],"disallowed"],[[1369,1369],"valid"],[[1370,1375],"valid",[],"NV8"],[[1376,1376],"disallowed"],[[1377,1414],"valid"],[[1415,1415],"mapped",[1381,1410]],[[1416,1416],"disallowed"],[[1417,1417],"valid",[],"NV8"],[[1418,1418],"valid",[],"NV8"],[[1419,1420],"disallowed"],[[1421,1422],"valid",[],"NV8"],[[1423,1423],"valid",[],"NV8"],[[1424,1424],"disallowed"],[[1425,1441],"valid"],[[1442,1442],"valid"],[[1443,1455],"valid"],[[1456,1465],"valid"],[[1466,1466],"valid"],[[1467,1469],"valid"],[[1470,1470],"valid",[],"NV8"],[[1471,1471],"valid"],[[1472,1472],"valid",[],"NV8"],[[1473,1474],"valid"],[[1475,1475],"valid",[],"NV8"],[[1476,1476],"valid"],[[1477,1477],"valid"],[[1478,1478],"valid",[],"NV8"],[[1479,1479],"valid"],[[1480,1487],"disallowed"],[[1488,1514],"valid"],[[1515,1519],"disallowed"],[[1520,1524],"valid"],[[1525,1535],"disallowed"],[[1536,1539],"disallowed"],[[1540,1540],"disallowed"],[[1541,1541],"disallowed"],[[1542,1546],"valid",[],"NV8"],[[1547,1547],"valid",[],"NV8"],[[1548,1548],"valid",[],"NV8"],[[1549,1551],"valid",[],"NV8"],[[1552,1557],"valid"],[[1558,1562],"valid"],[[1563,1563],"valid",[],"NV8"],[[1564,1564],"disallowed"],[[1565,1565],"disallowed"],[[1566,1566],"valid",[],"NV8"],[[1567,1567],"valid",[],"NV8"],[[1568,1568],"valid"],[[1569,1594],"valid"],[[1595,1599],"valid"],[[1600,1600],"valid",[],"NV8"],[[1601,1618],"valid"],[[1619,1621],"valid"],[[1622,1624],"valid"],[[1625,1630],"valid"],[[1631,1631],"valid"],[[1632,1641],"valid"],[[1642,1645],"valid",[],"NV8"],[[1646,1647],"valid"],[[1648,1652],"valid"],[[1653,1653],"mapped",[1575,1652]],[[1654,1654],"mapped",[1608,1652]],[[1655,1655],"mapped",[1735,1652]],[[1656,1656],"mapped",[1610,1652]],[[1657,1719],"valid"],[[1720,1721],"valid"],[[1722,1726],"valid"],[[1727,1727],"valid"],[[1728,1742],"valid"],[[1743,1743],"valid"],[[1744,1747],"valid"],[[1748,1748],"valid",[],"NV8"],[[1749,1756],"valid"],[[1757,1757],"disallowed"],[[1758,1758],"valid",[],"NV8"],[[1759,1768],"valid"],[[1769,1769],"valid",[],"NV8"],[[1770,1773],"valid"],[[1774,1775],"valid"],[[1776,1785],"valid"],[[1786,1790],"valid"],[[1791,1791],"valid"],[[1792,1805],"valid",[],"NV8"],[[1806,1806],"disallowed"],[[1807,1807],"disallowed"],[[1808,1836],"valid"],[[1837,1839],"valid"],[[1840,1866],"valid"],[[1867,1868],"disallowed"],[[1869,1871],"valid"],[[1872,1901],"valid"],[[1902,1919],"valid"],[[1920,1968],"valid"],[[1969,1969],"valid"],[[1970,1983],"disallowed"],[[1984,2037],"valid"],[[2038,2042],"valid",[],"NV8"],[[2043,2047],"disallowed"],[[2048,2093],"valid"],[[2094,2095],"disallowed"],[[2096,2110],"valid",[],"NV8"],[[2111,2111],"disallowed"],[[2112,2139],"valid"],[[2140,2141],"disallowed"],[[2142,2142],"valid",[],"NV8"],[[2143,2207],"disallowed"],[[2208,2208],"valid"],[[2209,2209],"valid"],[[2210,2220],"valid"],[[2221,2226],"valid"],[[2227,2228],"valid"],[[2229,2274],"disallowed"],[[2275,2275],"valid"],[[2276,2302],"valid"],[[2303,2303],"valid"],[[2304,2304],"valid"],[[2305,2307],"valid"],[[2308,2308],"valid"],[[2309,2361],"valid"],[[2362,2363],"valid"],[[2364,2381],"valid"],[[2382,2382],"valid"],[[2383,2383],"valid"],[[2384,2388],"valid"],[[2389,2389],"valid"],[[2390,2391],"valid"],[[2392,2392],"mapped",[2325,2364]],[[2393,2393],"mapped",[2326,2364]],[[2394,2394],"mapped",[2327,2364]],[[2395,2395],"mapped",[2332,2364]],[[2396,2396],"mapped",[2337,2364]],[[2397,2397],"mapped",[2338,2364]],[[2398,2398],"mapped",[2347,2364]],[[2399,2399],"mapped",[2351,2364]],[[2400,2403],"valid"],[[2404,2405],"valid",[],"NV8"],[[2406,2415],"valid"],[[2416,2416],"valid",[],"NV8"],[[2417,2418],"valid"],[[2419,2423],"valid"],[[2424,2424],"valid"],[[2425,2426],"valid"],[[2427,2428],"valid"],[[2429,2429],"valid"],[[2430,2431],"valid"],[[2432,2432],"valid"],[[2433,2435],"valid"],[[2436,2436],"disallowed"],[[2437,2444],"valid"],[[2445,2446],"disallowed"],[[2447,2448],"valid"],[[2449,2450],"disallowed"],[[2451,2472],"valid"],[[2473,2473],"disallowed"],[[2474,2480],"valid"],[[2481,2481],"disallowed"],[[2482,2482],"valid"],[[2483,2485],"disallowed"],[[2486,2489],"valid"],[[2490,2491],"disallowed"],[[2492,2492],"valid"],[[2493,2493],"valid"],[[2494,2500],"valid"],[[2501,2502],"disallowed"],[[2503,2504],"valid"],[[2505,2506],"disallowed"],[[2507,2509],"valid"],[[2510,2510],"valid"],[[2511,2518],"disallowed"],[[2519,2519],"valid"],[[2520,2523],"disallowed"],[[2524,2524],"mapped",[2465,2492]],[[2525,2525],"mapped",[2466,2492]],[[2526,2526],"disallowed"],[[2527,2527],"mapped",[2479,2492]],[[2528,2531],"valid"],[[2532,2533],"disallowed"],[[2534,2545],"valid"],[[2546,2554],"valid",[],"NV8"],[[2555,2555],"valid",[],"NV8"],[[2556,2560],"disallowed"],[[2561,2561],"valid"],[[2562,2562],"valid"],[[2563,2563],"valid"],[[2564,2564],"disallowed"],[[2565,2570],"valid"],[[2571,2574],"disallowed"],[[2575,2576],"valid"],[[2577,2578],"disallowed"],[[2579,2600],"valid"],[[2601,2601],"disallowed"],[[2602,2608],"valid"],[[2609,2609],"disallowed"],[[2610,2610],"valid"],[[2611,2611],"mapped",[2610,2620]],[[2612,2612],"disallowed"],[[2613,2613],"valid"],[[2614,2614],"mapped",[2616,2620]],[[2615,2615],"disallowed"],[[2616,2617],"valid"],[[2618,2619],"disallowed"],[[2620,2620],"valid"],[[2621,2621],"disallowed"],[[2622,2626],"valid"],[[2627,2630],"disallowed"],[[2631,2632],"valid"],[[2633,2634],"disallowed"],[[2635,2637],"valid"],[[2638,2640],"disallowed"],[[2641,2641],"valid"],[[2642,2648],"disallowed"],[[2649,2649],"mapped",[2582,2620]],[[2650,2650],"mapped",[2583,2620]],[[2651,2651],"mapped",[2588,2620]],[[2652,2652],"valid"],[[2653,2653],"disallowed"],[[2654,2654],"mapped",[2603,2620]],[[2655,2661],"disallowed"],[[2662,2676],"valid"],[[2677,2677],"valid"],[[2678,2688],"disallowed"],[[2689,2691],"valid"],[[2692,2692],"disallowed"],[[2693,2699],"valid"],[[2700,2700],"valid"],[[2701,2701],"valid"],[[2702,2702],"disallowed"],[[2703,2705],"valid"],[[2706,2706],"disallowed"],[[2707,2728],"valid"],[[2729,2729],"disallowed"],[[2730,2736],"valid"],[[2737,2737],"disallowed"],[[2738,2739],"valid"],[[2740,2740],"disallowed"],[[2741,2745],"valid"],[[2746,2747],"disallowed"],[[2748,2757],"valid"],[[2758,2758],"disallowed"],[[2759,2761],"valid"],[[2762,2762],"disallowed"],[[2763,2765],"valid"],[[2766,2767],"disallowed"],[[2768,2768],"valid"],[[2769,2783],"disallowed"],[[2784,2784],"valid"],[[2785,2787],"valid"],[[2788,2789],"disallowed"],[[2790,2799],"valid"],[[2800,2800],"valid",[],"NV8"],[[2801,2801],"valid",[],"NV8"],[[2802,2808],"disallowed"],[[2809,2809],"valid"],[[2810,2816],"disallowed"],[[2817,2819],"valid"],[[2820,2820],"disallowed"],[[2821,2828],"valid"],[[2829,2830],"disallowed"],[[2831,2832],"valid"],[[2833,2834],"disallowed"],[[2835,2856],"valid"],[[2857,2857],"disallowed"],[[2858,2864],"valid"],[[2865,2865],"disallowed"],[[2866,2867],"valid"],[[2868,2868],"disallowed"],[[2869,2869],"valid"],[[2870,2873],"valid"],[[2874,2875],"disallowed"],[[2876,2883],"valid"],[[2884,2884],"valid"],[[2885,2886],"disallowed"],[[2887,2888],"valid"],[[2889,2890],"disallowed"],[[2891,2893],"valid"],[[2894,2901],"disallowed"],[[2902,2903],"valid"],[[2904,2907],"disallowed"],[[2908,2908],"mapped",[2849,2876]],[[2909,2909],"mapped",[2850,2876]],[[2910,2910],"disallowed"],[[2911,2913],"valid"],[[2914,2915],"valid"],[[2916,2917],"disallowed"],[[2918,2927],"valid"],[[2928,2928],"valid",[],"NV8"],[[2929,2929],"valid"],[[2930,2935],"valid",[],"NV8"],[[2936,2945],"disallowed"],[[2946,2947],"valid"],[[2948,2948],"disallowed"],[[2949,2954],"valid"],[[2955,2957],"disallowed"],[[2958,2960],"valid"],[[2961,2961],"disallowed"],[[2962,2965],"valid"],[[2966,2968],"disallowed"],[[2969,2970],"valid"],[[2971,2971],"disallowed"],[[2972,2972],"valid"],[[2973,2973],"disallowed"],[[2974,2975],"valid"],[[2976,2978],"disallowed"],[[2979,2980],"valid"],[[2981,2983],"disallowed"],[[2984,2986],"valid"],[[2987,2989],"disallowed"],[[2990,2997],"valid"],[[2998,2998],"valid"],[[2999,3001],"valid"],[[3002,3005],"disallowed"],[[3006,3010],"valid"],[[3011,3013],"disallowed"],[[3014,3016],"valid"],[[3017,3017],"disallowed"],[[3018,3021],"valid"],[[3022,3023],"disallowed"],[[3024,3024],"valid"],[[3025,3030],"disallowed"],[[3031,3031],"valid"],[[3032,3045],"disallowed"],[[3046,3046],"valid"],[[3047,3055],"valid"],[[3056,3058],"valid",[],"NV8"],[[3059,3066],"valid",[],"NV8"],[[3067,3071],"disallowed"],[[3072,3072],"valid"],[[3073,3075],"valid"],[[3076,3076],"disallowed"],[[3077,3084],"valid"],[[3085,3085],"disallowed"],[[3086,3088],"valid"],[[3089,3089],"disallowed"],[[3090,3112],"valid"],[[3113,3113],"disallowed"],[[3114,3123],"valid"],[[3124,3124],"valid"],[[3125,3129],"valid"],[[3130,3132],"disallowed"],[[3133,3133],"valid"],[[3134,3140],"valid"],[[3141,3141],"disallowed"],[[3142,3144],"valid"],[[3145,3145],"disallowed"],[[3146,3149],"valid"],[[3150,3156],"disallowed"],[[3157,3158],"valid"],[[3159,3159],"disallowed"],[[3160,3161],"valid"],[[3162,3162],"valid"],[[3163,3167],"disallowed"],[[3168,3169],"valid"],[[3170,3171],"valid"],[[3172,3173],"disallowed"],[[3174,3183],"valid"],[[3184,3191],"disallowed"],[[3192,3199],"valid",[],"NV8"],[[3200,3200],"disallowed"],[[3201,3201],"valid"],[[3202,3203],"valid"],[[3204,3204],"disallowed"],[[3205,3212],"valid"],[[3213,3213],"disallowed"],[[3214,3216],"valid"],[[3217,3217],"disallowed"],[[3218,3240],"valid"],[[3241,3241],"disallowed"],[[3242,3251],"valid"],[[3252,3252],"disallowed"],[[3253,3257],"valid"],[[3258,3259],"disallowed"],[[3260,3261],"valid"],[[3262,3268],"valid"],[[3269,3269],"disallowed"],[[3270,3272],"valid"],[[3273,3273],"disallowed"],[[3274,3277],"valid"],[[3278,3284],"disallowed"],[[3285,3286],"valid"],[[3287,3293],"disallowed"],[[3294,3294],"valid"],[[3295,3295],"disallowed"],[[3296,3297],"valid"],[[3298,3299],"valid"],[[3300,3301],"disallowed"],[[3302,3311],"valid"],[[3312,3312],"disallowed"],[[3313,3314],"valid"],[[3315,3328],"disallowed"],[[3329,3329],"valid"],[[3330,3331],"valid"],[[3332,3332],"disallowed"],[[3333,3340],"valid"],[[3341,3341],"disallowed"],[[3342,3344],"valid"],[[3345,3345],"disallowed"],[[3346,3368],"valid"],[[3369,3369],"valid"],[[3370,3385],"valid"],[[3386,3386],"valid"],[[3387,3388],"disallowed"],[[3389,3389],"valid"],[[3390,3395],"valid"],[[3396,3396],"valid"],[[3397,3397],"disallowed"],[[3398,3400],"valid"],[[3401,3401],"disallowed"],[[3402,3405],"valid"],[[3406,3406],"valid"],[[3407,3414],"disallowed"],[[3415,3415],"valid"],[[3416,3422],"disallowed"],[[3423,3423],"valid"],[[3424,3425],"valid"],[[3426,3427],"valid"],[[3428,3429],"disallowed"],[[3430,3439],"valid"],[[3440,3445],"valid",[],"NV8"],[[3446,3448],"disallowed"],[[3449,3449],"valid",[],"NV8"],[[3450,3455],"valid"],[[3456,3457],"disallowed"],[[3458,3459],"valid"],[[3460,3460],"disallowed"],[[3461,3478],"valid"],[[3479,3481],"disallowed"],[[3482,3505],"valid"],[[3506,3506],"disallowed"],[[3507,3515],"valid"],[[3516,3516],"disallowed"],[[3517,3517],"valid"],[[3518,3519],"disallowed"],[[3520,3526],"valid"],[[3527,3529],"disallowed"],[[3530,3530],"valid"],[[3531,3534],"disallowed"],[[3535,3540],"valid"],[[3541,3541],"disallowed"],[[3542,3542],"valid"],[[3543,3543],"disallowed"],[[3544,3551],"valid"],[[3552,3557],"disallowed"],[[3558,3567],"valid"],[[3568,3569],"disallowed"],[[3570,3571],"valid"],[[3572,3572],"valid",[],"NV8"],[[3573,3584],"disallowed"],[[3585,3634],"valid"],[[3635,3635],"mapped",[3661,3634]],[[3636,3642],"valid"],[[3643,3646],"disallowed"],[[3647,3647],"valid",[],"NV8"],[[3648,3662],"valid"],[[3663,3663],"valid",[],"NV8"],[[3664,3673],"valid"],[[3674,3675],"valid",[],"NV8"],[[3676,3712],"disallowed"],[[3713,3714],"valid"],[[3715,3715],"disallowed"],[[3716,3716],"valid"],[[3717,3718],"disallowed"],[[3719,3720],"valid"],[[3721,3721],"disallowed"],[[3722,3722],"valid"],[[3723,3724],"disallowed"],[[3725,3725],"valid"],[[3726,3731],"disallowed"],[[3732,3735],"valid"],[[3736,3736],"disallowed"],[[3737,3743],"valid"],[[3744,3744],"disallowed"],[[3745,3747],"valid"],[[3748,3748],"disallowed"],[[3749,3749],"valid"],[[3750,3750],"disallowed"],[[3751,3751],"valid"],[[3752,3753],"disallowed"],[[3754,3755],"valid"],[[3756,3756],"disallowed"],[[3757,3762],"valid"],[[3763,3763],"mapped",[3789,3762]],[[3764,3769],"valid"],[[3770,3770],"disallowed"],[[3771,3773],"valid"],[[3774,3775],"disallowed"],[[3776,3780],"valid"],[[3781,3781],"disallowed"],[[3782,3782],"valid"],[[3783,3783],"disallowed"],[[3784,3789],"valid"],[[3790,3791],"disallowed"],[[3792,3801],"valid"],[[3802,3803],"disallowed"],[[3804,3804],"mapped",[3755,3737]],[[3805,3805],"mapped",[3755,3745]],[[3806,3807],"valid"],[[3808,3839],"disallowed"],[[3840,3840],"valid"],[[3841,3850],"valid",[],"NV8"],[[3851,3851],"valid"],[[3852,3852],"mapped",[3851]],[[3853,3863],"valid",[],"NV8"],[[3864,3865],"valid"],[[3866,3871],"valid",[],"NV8"],[[3872,3881],"valid"],[[3882,3892],"valid",[],"NV8"],[[3893,3893],"valid"],[[3894,3894],"valid",[],"NV8"],[[3895,3895],"valid"],[[3896,3896],"valid",[],"NV8"],[[3897,3897],"valid"],[[3898,3901],"valid",[],"NV8"],[[3902,3906],"valid"],[[3907,3907],"mapped",[3906,4023]],[[3908,3911],"valid"],[[3912,3912],"disallowed"],[[3913,3916],"valid"],[[3917,3917],"mapped",[3916,4023]],[[3918,3921],"valid"],[[3922,3922],"mapped",[3921,4023]],[[3923,3926],"valid"],[[3927,3927],"mapped",[3926,4023]],[[3928,3931],"valid"],[[3932,3932],"mapped",[3931,4023]],[[3933,3944],"valid"],[[3945,3945],"mapped",[3904,4021]],[[3946,3946],"valid"],[[3947,3948],"valid"],[[3949,3952],"disallowed"],[[3953,3954],"valid"],[[3955,3955],"mapped",[3953,3954]],[[3956,3956],"valid"],[[3957,3957],"mapped",[3953,3956]],[[3958,3958],"mapped",[4018,3968]],[[3959,3959],"mapped",[4018,3953,3968]],[[3960,3960],"mapped",[4019,3968]],[[3961,3961],"mapped",[4019,3953,3968]],[[3962,3968],"valid"],[[3969,3969],"mapped",[3953,3968]],[[3970,3972],"valid"],[[3973,3973],"valid",[],"NV8"],[[3974,3979],"valid"],[[3980,3983],"valid"],[[3984,3986],"valid"],[[3987,3987],"mapped",[3986,4023]],[[3988,3989],"valid"],[[3990,3990],"valid"],[[3991,3991],"valid"],[[3992,3992],"disallowed"],[[3993,3996],"valid"],[[3997,3997],"mapped",[3996,4023]],[[3998,4001],"valid"],[[4002,4002],"mapped",[4001,4023]],[[4003,4006],"valid"],[[4007,4007],"mapped",[4006,4023]],[[4008,4011],"valid"],[[4012,4012],"mapped",[4011,4023]],[[4013,4013],"valid"],[[4014,4016],"valid"],[[4017,4023],"valid"],[[4024,4024],"valid"],[[4025,4025],"mapped",[3984,4021]],[[4026,4028],"valid"],[[4029,4029],"disallowed"],[[4030,4037],"valid",[],"NV8"],[[4038,4038],"valid"],[[4039,4044],"valid",[],"NV8"],[[4045,4045],"disallowed"],[[4046,4046],"valid",[],"NV8"],[[4047,4047],"valid",[],"NV8"],[[4048,4049],"valid",[],"NV8"],[[4050,4052],"valid",[],"NV8"],[[4053,4056],"valid",[],"NV8"],[[4057,4058],"valid",[],"NV8"],[[4059,4095],"disallowed"],[[4096,4129],"valid"],[[4130,4130],"valid"],[[4131,4135],"valid"],[[4136,4136],"valid"],[[4137,4138],"valid"],[[4139,4139],"valid"],[[4140,4146],"valid"],[[4147,4149],"valid"],[[4150,4153],"valid"],[[4154,4159],"valid"],[[4160,4169],"valid"],[[4170,4175],"valid",[],"NV8"],[[4176,4185],"valid"],[[4186,4249],"valid"],[[4250,4253],"valid"],[[4254,4255],"valid",[],"NV8"],[[4256,4293],"disallowed"],[[4294,4294],"disallowed"],[[4295,4295],"mapped",[11559]],[[4296,4300],"disallowed"],[[4301,4301],"mapped",[11565]],[[4302,4303],"disallowed"],[[4304,4342],"valid"],[[4343,4344],"valid"],[[4345,4346],"valid"],[[4347,4347],"valid",[],"NV8"],[[4348,4348],"mapped",[4316]],[[4349,4351],"valid"],[[4352,4441],"valid",[],"NV8"],[[4442,4446],"valid",[],"NV8"],[[4447,4448],"disallowed"],[[4449,4514],"valid",[],"NV8"],[[4515,4519],"valid",[],"NV8"],[[4520,4601],"valid",[],"NV8"],[[4602,4607],"valid",[],"NV8"],[[4608,4614],"valid"],[[4615,4615],"valid"],[[4616,4678],"valid"],[[4679,4679],"valid"],[[4680,4680],"valid"],[[4681,4681],"disallowed"],[[4682,4685],"valid"],[[4686,4687],"disallowed"],[[4688,4694],"valid"],[[4695,4695],"disallowed"],[[4696,4696],"valid"],[[4697,4697],"disallowed"],[[4698,4701],"valid"],[[4702,4703],"disallowed"],[[4704,4742],"valid"],[[4743,4743],"valid"],[[4744,4744],"valid"],[[4745,4745],"disallowed"],[[4746,4749],"valid"],[[4750,4751],"disallowed"],[[4752,4782],"valid"],[[4783,4783],"valid"],[[4784,4784],"valid"],[[4785,4785],"disallowed"],[[4786,4789],"valid"],[[4790,4791],"disallowed"],[[4792,4798],"valid"],[[4799,4799],"disallowed"],[[4800,4800],"valid"],[[4801,4801],"disallowed"],[[4802,4805],"valid"],[[4806,4807],"disallowed"],[[4808,4814],"valid"],[[4815,4815],"valid"],[[4816,4822],"valid"],[[4823,4823],"disallowed"],[[4824,4846],"valid"],[[4847,4847],"valid"],[[4848,4878],"valid"],[[4879,4879],"valid"],[[4880,4880],"valid"],[[4881,4881],"disallowed"],[[4882,4885],"valid"],[[4886,4887],"disallowed"],[[4888,4894],"valid"],[[4895,4895],"valid"],[[4896,4934],"valid"],[[4935,4935],"valid"],[[4936,4954],"valid"],[[4955,4956],"disallowed"],[[4957,4958],"valid"],[[4959,4959],"valid"],[[4960,4960],"valid",[],"NV8"],[[4961,4988],"valid",[],"NV8"],[[4989,4991],"disallowed"],[[4992,5007],"valid"],[[5008,5017],"valid",[],"NV8"],[[5018,5023],"disallowed"],[[5024,5108],"valid"],[[5109,5109],"valid"],[[5110,5111],"disallowed"],[[5112,5112],"mapped",[5104]],[[5113,5113],"mapped",[5105]],[[5114,5114],"mapped",[5106]],[[5115,5115],"mapped",[5107]],[[5116,5116],"mapped",[5108]],[[5117,5117],"mapped",[5109]],[[5118,5119],"disallowed"],[[5120,5120],"valid",[],"NV8"],[[5121,5740],"valid"],[[5741,5742],"valid",[],"NV8"],[[5743,5750],"valid"],[[5751,5759],"valid"],[[5760,5760],"disallowed"],[[5761,5786],"valid"],[[5787,5788],"valid",[],"NV8"],[[5789,5791],"disallowed"],[[5792,5866],"valid"],[[5867,5872],"valid",[],"NV8"],[[5873,5880],"valid"],[[5881,5887],"disallowed"],[[5888,5900],"valid"],[[5901,5901],"disallowed"],[[5902,5908],"valid"],[[5909,5919],"disallowed"],[[5920,5940],"valid"],[[5941,5942],"valid",[],"NV8"],[[5943,5951],"disallowed"],[[5952,5971],"valid"],[[5972,5983],"disallowed"],[[5984,5996],"valid"],[[5997,5997],"disallowed"],[[5998,6000],"valid"],[[6001,6001],"disallowed"],[[6002,6003],"valid"],[[6004,6015],"disallowed"],[[6016,6067],"valid"],[[6068,6069],"disallowed"],[[6070,6099],"valid"],[[6100,6102],"valid",[],"NV8"],[[6103,6103],"valid"],[[6104,6107],"valid",[],"NV8"],[[6108,6108],"valid"],[[6109,6109],"valid"],[[6110,6111],"disallowed"],[[6112,6121],"valid"],[[6122,6127],"disallowed"],[[6128,6137],"valid",[],"NV8"],[[6138,6143],"disallowed"],[[6144,6149],"valid",[],"NV8"],[[6150,6150],"disallowed"],[[6151,6154],"valid",[],"NV8"],[[6155,6157],"ignored"],[[6158,6158],"disallowed"],[[6159,6159],"disallowed"],[[6160,6169],"valid"],[[6170,6175],"disallowed"],[[6176,6263],"valid"],[[6264,6271],"disallowed"],[[6272,6313],"valid"],[[6314,6314],"valid"],[[6315,6319],"disallowed"],[[6320,6389],"valid"],[[6390,6399],"disallowed"],[[6400,6428],"valid"],[[6429,6430],"valid"],[[6431,6431],"disallowed"],[[6432,6443],"valid"],[[6444,6447],"disallowed"],[[6448,6459],"valid"],[[6460,6463],"disallowed"],[[6464,6464],"valid",[],"NV8"],[[6465,6467],"disallowed"],[[6468,6469],"valid",[],"NV8"],[[6470,6509],"valid"],[[6510,6511],"disallowed"],[[6512,6516],"valid"],[[6517,6527],"disallowed"],[[6528,6569],"valid"],[[6570,6571],"valid"],[[6572,6575],"disallowed"],[[6576,6601],"valid"],[[6602,6607],"disallowed"],[[6608,6617],"valid"],[[6618,6618],"valid",[],"XV8"],[[6619,6621],"disallowed"],[[6622,6623],"valid",[],"NV8"],[[6624,6655],"valid",[],"NV8"],[[6656,6683],"valid"],[[6684,6685],"disallowed"],[[6686,6687],"valid",[],"NV8"],[[6688,6750],"valid"],[[6751,6751],"disallowed"],[[6752,6780],"valid"],[[6781,6782],"disallowed"],[[6783,6793],"valid"],[[6794,6799],"disallowed"],[[6800,6809],"valid"],[[6810,6815],"disallowed"],[[6816,6822],"valid",[],"NV8"],[[6823,6823],"valid"],[[6824,6829],"valid",[],"NV8"],[[6830,6831],"disallowed"],[[6832,6845],"valid"],[[6846,6846],"valid",[],"NV8"],[[6847,6911],"disallowed"],[[6912,6987],"valid"],[[6988,6991],"disallowed"],[[6992,7001],"valid"],[[7002,7018],"valid",[],"NV8"],[[7019,7027],"valid"],[[7028,7036],"valid",[],"NV8"],[[7037,7039],"disallowed"],[[7040,7082],"valid"],[[7083,7085],"valid"],[[7086,7097],"valid"],[[7098,7103],"valid"],[[7104,7155],"valid"],[[7156,7163],"disallowed"],[[7164,7167],"valid",[],"NV8"],[[7168,7223],"valid"],[[7224,7226],"disallowed"],[[7227,7231],"valid",[],"NV8"],[[7232,7241],"valid"],[[7242,7244],"disallowed"],[[7245,7293],"valid"],[[7294,7295],"valid",[],"NV8"],[[7296,7359],"disallowed"],[[7360,7367],"valid",[],"NV8"],[[7368,7375],"disallowed"],[[7376,7378],"valid"],[[7379,7379],"valid",[],"NV8"],[[7380,7410],"valid"],[[7411,7414],"valid"],[[7415,7415],"disallowed"],[[7416,7417],"valid"],[[7418,7423],"disallowed"],[[7424,7467],"valid"],[[7468,7468],"mapped",[97]],[[7469,7469],"mapped",[230]],[[7470,7470],"mapped",[98]],[[7471,7471],"valid"],[[7472,7472],"mapped",[100]],[[7473,7473],"mapped",[101]],[[7474,7474],"mapped",[477]],[[7475,7475],"mapped",[103]],[[7476,7476],"mapped",[104]],[[7477,7477],"mapped",[105]],[[7478,7478],"mapped",[106]],[[7479,7479],"mapped",[107]],[[7480,7480],"mapped",[108]],[[7481,7481],"mapped",[109]],[[7482,7482],"mapped",[110]],[[7483,7483],"valid"],[[7484,7484],"mapped",[111]],[[7485,7485],"mapped",[547]],[[7486,7486],"mapped",[112]],[[7487,7487],"mapped",[114]],[[7488,7488],"mapped",[116]],[[7489,7489],"mapped",[117]],[[7490,7490],"mapped",[119]],[[7491,7491],"mapped",[97]],[[7492,7492],"mapped",[592]],[[7493,7493],"mapped",[593]],[[7494,7494],"mapped",[7426]],[[7495,7495],"mapped",[98]],[[7496,7496],"mapped",[100]],[[7497,7497],"mapped",[101]],[[7498,7498],"mapped",[601]],[[7499,7499],"mapped",[603]],[[7500,7500],"mapped",[604]],[[7501,7501],"mapped",[103]],[[7502,7502],"valid"],[[7503,7503],"mapped",[107]],[[7504,7504],"mapped",[109]],[[7505,7505],"mapped",[331]],[[7506,7506],"mapped",[111]],[[7507,7507],"mapped",[596]],[[7508,7508],"mapped",[7446]],[[7509,7509],"mapped",[7447]],[[7510,7510],"mapped",[112]],[[7511,7511],"mapped",[116]],[[7512,7512],"mapped",[117]],[[7513,7513],"mapped",[7453]],[[7514,7514],"mapped",[623]],[[7515,7515],"mapped",[118]],[[7516,7516],"mapped",[7461]],[[7517,7517],"mapped",[946]],[[7518,7518],"mapped",[947]],[[7519,7519],"mapped",[948]],[[7520,7520],"mapped",[966]],[[7521,7521],"mapped",[967]],[[7522,7522],"mapped",[105]],[[7523,7523],"mapped",[114]],[[7524,7524],"mapped",[117]],[[7525,7525],"mapped",[118]],[[7526,7526],"mapped",[946]],[[7527,7527],"mapped",[947]],[[7528,7528],"mapped",[961]],[[7529,7529],"mapped",[966]],[[7530,7530],"mapped",[967]],[[7531,7531],"valid"],[[7532,7543],"valid"],[[7544,7544],"mapped",[1085]],[[7545,7578],"valid"],[[7579,7579],"mapped",[594]],[[7580,7580],"mapped",[99]],[[7581,7581],"mapped",[597]],[[7582,7582],"mapped",[240]],[[7583,7583],"mapped",[604]],[[7584,7584],"mapped",[102]],[[7585,7585],"mapped",[607]],[[7586,7586],"mapped",[609]],[[7587,7587],"mapped",[613]],[[7588,7588],"mapped",[616]],[[7589,7589],"mapped",[617]],[[7590,7590],"mapped",[618]],[[7591,7591],"mapped",[7547]],[[7592,7592],"mapped",[669]],[[7593,7593],"mapped",[621]],[[7594,7594],"mapped",[7557]],[[7595,7595],"mapped",[671]],[[7596,7596],"mapped",[625]],[[7597,7597],"mapped",[624]],[[7598,7598],"mapped",[626]],[[7599,7599],"mapped",[627]],[[7600,7600],"mapped",[628]],[[7601,7601],"mapped",[629]],[[7602,7602],"mapped",[632]],[[7603,7603],"mapped",[642]],[[7604,7604],"mapped",[643]],[[7605,7605],"mapped",[427]],[[7606,7606],"mapped",[649]],[[7607,7607],"mapped",[650]],[[7608,7608],"mapped",[7452]],[[7609,7609],"mapped",[651]],[[7610,7610],"mapped",[652]],[[7611,7611],"mapped",[122]],[[7612,7612],"mapped",[656]],[[7613,7613],"mapped",[657]],[[7614,7614],"mapped",[658]],[[7615,7615],"mapped",[952]],[[7616,7619],"valid"],[[7620,7626],"valid"],[[7627,7654],"valid"],[[7655,7669],"valid"],[[7670,7675],"disallowed"],[[7676,7676],"valid"],[[7677,7677],"valid"],[[7678,7679],"valid"],[[7680,7680],"mapped",[7681]],[[7681,7681],"valid"],[[7682,7682],"mapped",[7683]],[[7683,7683],"valid"],[[7684,7684],"mapped",[7685]],[[7685,7685],"valid"],[[7686,7686],"mapped",[7687]],[[7687,7687],"valid"],[[7688,7688],"mapped",[7689]],[[7689,7689],"valid"],[[7690,7690],"mapped",[7691]],[[7691,7691],"valid"],[[7692,7692],"mapped",[7693]],[[7693,7693],"valid"],[[7694,7694],"mapped",[7695]],[[7695,7695],"valid"],[[7696,7696],"mapped",[7697]],[[7697,7697],"valid"],[[7698,7698],"mapped",[7699]],[[7699,7699],"valid"],[[7700,7700],"mapped",[7701]],[[7701,7701],"valid"],[[7702,7702],"mapped",[7703]],[[7703,7703],"valid"],[[7704,7704],"mapped",[7705]],[[7705,7705],"valid"],[[7706,7706],"mapped",[7707]],[[7707,7707],"valid"],[[7708,7708],"mapped",[7709]],[[7709,7709],"valid"],[[7710,7710],"mapped",[7711]],[[7711,7711],"valid"],[[7712,7712],"mapped",[7713]],[[7713,7713],"valid"],[[7714,7714],"mapped",[7715]],[[7715,7715],"valid"],[[7716,7716],"mapped",[7717]],[[7717,7717],"valid"],[[7718,7718],"mapped",[7719]],[[7719,7719],"valid"],[[7720,7720],"mapped",[7721]],[[7721,7721],"valid"],[[7722,7722],"mapped",[7723]],[[7723,7723],"valid"],[[7724,7724],"mapped",[7725]],[[7725,7725],"valid"],[[7726,7726],"mapped",[7727]],[[7727,7727],"valid"],[[7728,7728],"mapped",[7729]],[[7729,7729],"valid"],[[7730,7730],"mapped",[7731]],[[7731,7731],"valid"],[[7732,7732],"mapped",[7733]],[[7733,7733],"valid"],[[7734,7734],"mapped",[7735]],[[7735,7735],"valid"],[[7736,7736],"mapped",[7737]],[[7737,7737],"valid"],[[7738,7738],"mapped",[7739]],[[7739,7739],"valid"],[[7740,7740],"mapped",[7741]],[[7741,7741],"valid"],[[7742,7742],"mapped",[7743]],[[7743,7743],"valid"],[[7744,7744],"mapped",[7745]],[[7745,7745],"valid"],[[7746,7746],"mapped",[7747]],[[7747,7747],"valid"],[[7748,7748],"mapped",[7749]],[[7749,7749],"valid"],[[7750,7750],"mapped",[7751]],[[7751,7751],"valid"],[[7752,7752],"mapped",[7753]],[[7753,7753],"valid"],[[7754,7754],"mapped",[7755]],[[7755,7755],"valid"],[[7756,7756],"mapped",[7757]],[[7757,7757],"valid"],[[7758,7758],"mapped",[7759]],[[7759,7759],"valid"],[[7760,7760],"mapped",[7761]],[[7761,7761],"valid"],[[7762,7762],"mapped",[7763]],[[7763,7763],"valid"],[[7764,7764],"mapped",[7765]],[[7765,7765],"valid"],[[7766,7766],"mapped",[7767]],[[7767,7767],"valid"],[[7768,7768],"mapped",[7769]],[[7769,7769],"valid"],[[7770,7770],"mapped",[7771]],[[7771,7771],"valid"],[[7772,7772],"mapped",[7773]],[[7773,7773],"valid"],[[7774,7774],"mapped",[7775]],[[7775,7775],"valid"],[[7776,7776],"mapped",[7777]],[[7777,7777],"valid"],[[7778,7778],"mapped",[7779]],[[7779,7779],"valid"],[[7780,7780],"mapped",[7781]],[[7781,7781],"valid"],[[7782,7782],"mapped",[7783]],[[7783,7783],"valid"],[[7784,7784],"mapped",[7785]],[[7785,7785],"valid"],[[7786,7786],"mapped",[7787]],[[7787,7787],"valid"],[[7788,7788],"mapped",[7789]],[[7789,7789],"valid"],[[7790,7790],"mapped",[7791]],[[7791,7791],"valid"],[[7792,7792],"mapped",[7793]],[[7793,7793],"valid"],[[7794,7794],"mapped",[7795]],[[7795,7795],"valid"],[[7796,7796],"mapped",[7797]],[[7797,7797],"valid"],[[7798,7798],"mapped",[7799]],[[7799,7799],"valid"],[[7800,7800],"mapped",[7801]],[[7801,7801],"valid"],[[7802,7802],"mapped",[7803]],[[7803,7803],"valid"],[[7804,7804],"mapped",[7805]],[[7805,7805],"valid"],[[7806,7806],"mapped",[7807]],[[7807,7807],"valid"],[[7808,7808],"mapped",[7809]],[[7809,7809],"valid"],[[7810,7810],"mapped",[7811]],[[7811,7811],"valid"],[[7812,7812],"mapped",[7813]],[[7813,7813],"valid"],[[7814,7814],"mapped",[7815]],[[7815,7815],"valid"],[[7816,7816],"mapped",[7817]],[[7817,7817],"valid"],[[7818,7818],"mapped",[7819]],[[7819,7819],"valid"],[[7820,7820],"mapped",[7821]],[[7821,7821],"valid"],[[7822,7822],"mapped",[7823]],[[7823,7823],"valid"],[[7824,7824],"mapped",[7825]],[[7825,7825],"valid"],[[7826,7826],"mapped",[7827]],[[7827,7827],"valid"],[[7828,7828],"mapped",[7829]],[[7829,7833],"valid"],[[7834,7834],"mapped",[97,702]],[[7835,7835],"mapped",[7777]],[[7836,7837],"valid"],[[7838,7838],"mapped",[115,115]],[[7839,7839],"valid"],[[7840,7840],"mapped",[7841]],[[7841,7841],"valid"],[[7842,7842],"mapped",[7843]],[[7843,7843],"valid"],[[7844,7844],"mapped",[7845]],[[7845,7845],"valid"],[[7846,7846],"mapped",[7847]],[[7847,7847],"valid"],[[7848,7848],"mapped",[7849]],[[7849,7849],"valid"],[[7850,7850],"mapped",[7851]],[[7851,7851],"valid"],[[7852,7852],"mapped",[7853]],[[7853,7853],"valid"],[[7854,7854],"mapped",[7855]],[[7855,7855],"valid"],[[7856,7856],"mapped",[7857]],[[7857,7857],"valid"],[[7858,7858],"mapped",[7859]],[[7859,7859],"valid"],[[7860,7860],"mapped",[7861]],[[7861,7861],"valid"],[[7862,7862],"mapped",[7863]],[[7863,7863],"valid"],[[7864,7864],"mapped",[7865]],[[7865,7865],"valid"],[[7866,7866],"mapped",[7867]],[[7867,7867],"valid"],[[7868,7868],"mapped",[7869]],[[7869,7869],"valid"],[[7870,7870],"mapped",[7871]],[[7871,7871],"valid"],[[7872,7872],"mapped",[7873]],[[7873,7873],"valid"],[[7874,7874],"mapped",[7875]],[[7875,7875],"valid"],[[7876,7876],"mapped",[7877]],[[7877,7877],"valid"],[[7878,7878],"mapped",[7879]],[[7879,7879],"valid"],[[7880,7880],"mapped",[7881]],[[7881,7881],"valid"],[[7882,7882],"mapped",[7883]],[[7883,7883],"valid"],[[7884,7884],"mapped",[7885]],[[7885,7885],"valid"],[[7886,7886],"mapped",[7887]],[[7887,7887],"valid"],[[7888,7888],"mapped",[7889]],[[7889,7889],"valid"],[[7890,7890],"mapped",[7891]],[[7891,7891],"valid"],[[7892,7892],"mapped",[7893]],[[7893,7893],"valid"],[[7894,7894],"mapped",[7895]],[[7895,7895],"valid"],[[7896,7896],"mapped",[7897]],[[7897,7897],"valid"],[[7898,7898],"mapped",[7899]],[[7899,7899],"valid"],[[7900,7900],"mapped",[7901]],[[7901,7901],"valid"],[[7902,7902],"mapped",[7903]],[[7903,7903],"valid"],[[7904,7904],"mapped",[7905]],[[7905,7905],"valid"],[[7906,7906],"mapped",[7907]],[[7907,7907],"valid"],[[7908,7908],"mapped",[7909]],[[7909,7909],"valid"],[[7910,7910],"mapped",[7911]],[[7911,7911],"valid"],[[7912,7912],"mapped",[7913]],[[7913,7913],"valid"],[[7914,7914],"mapped",[7915]],[[7915,7915],"valid"],[[7916,7916],"mapped",[7917]],[[7917,7917],"valid"],[[7918,7918],"mapped",[7919]],[[7919,7919],"valid"],[[7920,7920],"mapped",[7921]],[[7921,7921],"valid"],[[7922,7922],"mapped",[7923]],[[7923,7923],"valid"],[[7924,7924],"mapped",[7925]],[[7925,7925],"valid"],[[7926,7926],"mapped",[7927]],[[7927,7927],"valid"],[[7928,7928],"mapped",[7929]],[[7929,7929],"valid"],[[7930,7930],"mapped",[7931]],[[7931,7931],"valid"],[[7932,7932],"mapped",[7933]],[[7933,7933],"valid"],[[7934,7934],"mapped",[7935]],[[7935,7935],"valid"],[[7936,7943],"valid"],[[7944,7944],"mapped",[7936]],[[7945,7945],"mapped",[7937]],[[7946,7946],"mapped",[7938]],[[7947,7947],"mapped",[7939]],[[7948,7948],"mapped",[7940]],[[7949,7949],"mapped",[7941]],[[7950,7950],"mapped",[7942]],[[7951,7951],"mapped",[7943]],[[7952,7957],"valid"],[[7958,7959],"disallowed"],[[7960,7960],"mapped",[7952]],[[7961,7961],"mapped",[7953]],[[7962,7962],"mapped",[7954]],[[7963,7963],"mapped",[7955]],[[7964,7964],"mapped",[7956]],[[7965,7965],"mapped",[7957]],[[7966,7967],"disallowed"],[[7968,7975],"valid"],[[7976,7976],"mapped",[7968]],[[7977,7977],"mapped",[7969]],[[7978,7978],"mapped",[7970]],[[7979,7979],"mapped",[7971]],[[7980,7980],"mapped",[7972]],[[7981,7981],"mapped",[7973]],[[7982,7982],"mapped",[7974]],[[7983,7983],"mapped",[7975]],[[7984,7991],"valid"],[[7992,7992],"mapped",[7984]],[[7993,7993],"mapped",[7985]],[[7994,7994],"mapped",[7986]],[[7995,7995],"mapped",[7987]],[[7996,7996],"mapped",[7988]],[[7997,7997],"mapped",[7989]],[[7998,7998],"mapped",[7990]],[[7999,7999],"mapped",[7991]],[[8000,8005],"valid"],[[8006,8007],"disallowed"],[[8008,8008],"mapped",[8000]],[[8009,8009],"mapped",[8001]],[[8010,8010],"mapped",[8002]],[[8011,8011],"mapped",[8003]],[[8012,8012],"mapped",[8004]],[[8013,8013],"mapped",[8005]],[[8014,8015],"disallowed"],[[8016,8023],"valid"],[[8024,8024],"disallowed"],[[8025,8025],"mapped",[8017]],[[8026,8026],"disallowed"],[[8027,8027],"mapped",[8019]],[[8028,8028],"disallowed"],[[8029,8029],"mapped",[8021]],[[8030,8030],"disallowed"],[[8031,8031],"mapped",[8023]],[[8032,8039],"valid"],[[8040,8040],"mapped",[8032]],[[8041,8041],"mapped",[8033]],[[8042,8042],"mapped",[8034]],[[8043,8043],"mapped",[8035]],[[8044,8044],"mapped",[8036]],[[8045,8045],"mapped",[8037]],[[8046,8046],"mapped",[8038]],[[8047,8047],"mapped",[8039]],[[8048,8048],"valid"],[[8049,8049],"mapped",[940]],[[8050,8050],"valid"],[[8051,8051],"mapped",[941]],[[8052,8052],"valid"],[[8053,8053],"mapped",[942]],[[8054,8054],"valid"],[[8055,8055],"mapped",[943]],[[8056,8056],"valid"],[[8057,8057],"mapped",[972]],[[8058,8058],"valid"],[[8059,8059],"mapped",[973]],[[8060,8060],"valid"],[[8061,8061],"mapped",[974]],[[8062,8063],"disallowed"],[[8064,8064],"mapped",[7936,953]],[[8065,8065],"mapped",[7937,953]],[[8066,8066],"mapped",[7938,953]],[[8067,8067],"mapped",[7939,953]],[[8068,8068],"mapped",[7940,953]],[[8069,8069],"mapped",[7941,953]],[[8070,8070],"mapped",[7942,953]],[[8071,8071],"mapped",[7943,953]],[[8072,8072],"mapped",[7936,953]],[[8073,8073],"mapped",[7937,953]],[[8074,8074],"mapped",[7938,953]],[[8075,8075],"mapped",[7939,953]],[[8076,8076],"mapped",[7940,953]],[[8077,8077],"mapped",[7941,953]],[[8078,8078],"mapped",[7942,953]],[[8079,8079],"mapped",[7943,953]],[[8080,8080],"mapped",[7968,953]],[[8081,8081],"mapped",[7969,953]],[[8082,8082],"mapped",[7970,953]],[[8083,8083],"mapped",[7971,953]],[[8084,8084],"mapped",[7972,953]],[[8085,8085],"mapped",[7973,953]],[[8086,8086],"mapped",[7974,953]],[[8087,8087],"mapped",[7975,953]],[[8088,8088],"mapped",[7968,953]],[[8089,8089],"mapped",[7969,953]],[[8090,8090],"mapped",[7970,953]],[[8091,8091],"mapped",[7971,953]],[[8092,8092],"mapped",[7972,953]],[[8093,8093],"mapped",[7973,953]],[[8094,8094],"mapped",[7974,953]],[[8095,8095],"mapped",[7975,953]],[[8096,8096],"mapped",[8032,953]],[[8097,8097],"mapped",[8033,953]],[[8098,8098],"mapped",[8034,953]],[[8099,8099],"mapped",[8035,953]],[[8100,8100],"mapped",[8036,953]],[[8101,8101],"mapped",[8037,953]],[[8102,8102],"mapped",[8038,953]],[[8103,8103],"mapped",[8039,953]],[[8104,8104],"mapped",[8032,953]],[[8105,8105],"mapped",[8033,953]],[[8106,8106],"mapped",[8034,953]],[[8107,8107],"mapped",[8035,953]],[[8108,8108],"mapped",[8036,953]],[[8109,8109],"mapped",[8037,953]],[[8110,8110],"mapped",[8038,953]],[[8111,8111],"mapped",[8039,953]],[[8112,8113],"valid"],[[8114,8114],"mapped",[8048,953]],[[8115,8115],"mapped",[945,953]],[[8116,8116],"mapped",[940,953]],[[8117,8117],"disallowed"],[[8118,8118],"valid"],[[8119,8119],"mapped",[8118,953]],[[8120,8120],"mapped",[8112]],[[8121,8121],"mapped",[8113]],[[8122,8122],"mapped",[8048]],[[8123,8123],"mapped",[940]],[[8124,8124],"mapped",[945,953]],[[8125,8125],"disallowed_STD3_mapped",[32,787]],[[8126,8126],"mapped",[953]],[[8127,8127],"disallowed_STD3_mapped",[32,787]],[[8128,8128],"disallowed_STD3_mapped",[32,834]],[[8129,8129],"disallowed_STD3_mapped",[32,776,834]],[[8130,8130],"mapped",[8052,953]],[[8131,8131],"mapped",[951,953]],[[8132,8132],"mapped",[942,953]],[[8133,8133],"disallowed"],[[8134,8134],"valid"],[[8135,8135],"mapped",[8134,953]],[[8136,8136],"mapped",[8050]],[[8137,8137],"mapped",[941]],[[8138,8138],"mapped",[8052]],[[8139,8139],"mapped",[942]],[[8140,8140],"mapped",[951,953]],[[8141,8141],"disallowed_STD3_mapped",[32,787,768]],[[8142,8142],"disallowed_STD3_mapped",[32,787,769]],[[8143,8143],"disallowed_STD3_mapped",[32,787,834]],[[8144,8146],"valid"],[[8147,8147],"mapped",[912]],[[8148,8149],"disallowed"],[[8150,8151],"valid"],[[8152,8152],"mapped",[8144]],[[8153,8153],"mapped",[8145]],[[8154,8154],"mapped",[8054]],[[8155,8155],"mapped",[943]],[[8156,8156],"disallowed"],[[8157,8157],"disallowed_STD3_mapped",[32,788,768]],[[8158,8158],"disallowed_STD3_mapped",[32,788,769]],[[8159,8159],"disallowed_STD3_mapped",[32,788,834]],[[8160,8162],"valid"],[[8163,8163],"mapped",[944]],[[8164,8167],"valid"],[[8168,8168],"mapped",[8160]],[[8169,8169],"mapped",[8161]],[[8170,8170],"mapped",[8058]],[[8171,8171],"mapped",[973]],[[8172,8172],"mapped",[8165]],[[8173,8173],"disallowed_STD3_mapped",[32,776,768]],[[8174,8174],"disallowed_STD3_mapped",[32,776,769]],[[8175,8175],"disallowed_STD3_mapped",[96]],[[8176,8177],"disallowed"],[[8178,8178],"mapped",[8060,953]],[[8179,8179],"mapped",[969,953]],[[8180,8180],"mapped",[974,953]],[[8181,8181],"disallowed"],[[8182,8182],"valid"],[[8183,8183],"mapped",[8182,953]],[[8184,8184],"mapped",[8056]],[[8185,8185],"mapped",[972]],[[8186,8186],"mapped",[8060]],[[8187,8187],"mapped",[974]],[[8188,8188],"mapped",[969,953]],[[8189,8189],"disallowed_STD3_mapped",[32,769]],[[8190,8190],"disallowed_STD3_mapped",[32,788]],[[8191,8191],"disallowed"],[[8192,8202],"disallowed_STD3_mapped",[32]],[[8203,8203],"ignored"],[[8204,8205],"deviation",[]],[[8206,8207],"disallowed"],[[8208,8208],"valid",[],"NV8"],[[8209,8209],"mapped",[8208]],[[8210,8214],"valid",[],"NV8"],[[8215,8215],"disallowed_STD3_mapped",[32,819]],[[8216,8227],"valid",[],"NV8"],[[8228,8230],"disallowed"],[[8231,8231],"valid",[],"NV8"],[[8232,8238],"disallowed"],[[8239,8239],"disallowed_STD3_mapped",[32]],[[8240,8242],"valid",[],"NV8"],[[8243,8243],"mapped",[8242,8242]],[[8244,8244],"mapped",[8242,8242,8242]],[[8245,8245],"valid",[],"NV8"],[[8246,8246],"mapped",[8245,8245]],[[8247,8247],"mapped",[8245,8245,8245]],[[8248,8251],"valid",[],"NV8"],[[8252,8252],"disallowed_STD3_mapped",[33,33]],[[8253,8253],"valid",[],"NV8"],[[8254,8254],"disallowed_STD3_mapped",[32,773]],[[8255,8262],"valid",[],"NV8"],[[8263,8263],"disallowed_STD3_mapped",[63,63]],[[8264,8264],"disallowed_STD3_mapped",[63,33]],[[8265,8265],"disallowed_STD3_mapped",[33,63]],[[8266,8269],"valid",[],"NV8"],[[8270,8274],"valid",[],"NV8"],[[8275,8276],"valid",[],"NV8"],[[8277,8278],"valid",[],"NV8"],[[8279,8279],"mapped",[8242,8242,8242,8242]],[[8280,8286],"valid",[],"NV8"],[[8287,8287],"disallowed_STD3_mapped",[32]],[[8288,8288],"ignored"],[[8289,8291],"disallowed"],[[8292,8292],"ignored"],[[8293,8293],"disallowed"],[[8294,8297],"disallowed"],[[8298,8303],"disallowed"],[[8304,8304],"mapped",[48]],[[8305,8305],"mapped",[105]],[[8306,8307],"disallowed"],[[8308,8308],"mapped",[52]],[[8309,8309],"mapped",[53]],[[8310,8310],"mapped",[54]],[[8311,8311],"mapped",[55]],[[8312,8312],"mapped",[56]],[[8313,8313],"mapped",[57]],[[8314,8314],"disallowed_STD3_mapped",[43]],[[8315,8315],"mapped",[8722]],[[8316,8316],"disallowed_STD3_mapped",[61]],[[8317,8317],"disallowed_STD3_mapped",[40]],[[8318,8318],"disallowed_STD3_mapped",[41]],[[8319,8319],"mapped",[110]],[[8320,8320],"mapped",[48]],[[8321,8321],"mapped",[49]],[[8322,8322],"mapped",[50]],[[8323,8323],"mapped",[51]],[[8324,8324],"mapped",[52]],[[8325,8325],"mapped",[53]],[[8326,8326],"mapped",[54]],[[8327,8327],"mapped",[55]],[[8328,8328],"mapped",[56]],[[8329,8329],"mapped",[57]],[[8330,8330],"disallowed_STD3_mapped",[43]],[[8331,8331],"mapped",[8722]],[[8332,8332],"disallowed_STD3_mapped",[61]],[[8333,8333],"disallowed_STD3_mapped",[40]],[[8334,8334],"disallowed_STD3_mapped",[41]],[[8335,8335],"disallowed"],[[8336,8336],"mapped",[97]],[[8337,8337],"mapped",[101]],[[8338,8338],"mapped",[111]],[[8339,8339],"mapped",[120]],[[8340,8340],"mapped",[601]],[[8341,8341],"mapped",[104]],[[8342,8342],"mapped",[107]],[[8343,8343],"mapped",[108]],[[8344,8344],"mapped",[109]],[[8345,8345],"mapped",[110]],[[8346,8346],"mapped",[112]],[[8347,8347],"mapped",[115]],[[8348,8348],"mapped",[116]],[[8349,8351],"disallowed"],[[8352,8359],"valid",[],"NV8"],[[8360,8360],"mapped",[114,115]],[[8361,8362],"valid",[],"NV8"],[[8363,8363],"valid",[],"NV8"],[[8364,8364],"valid",[],"NV8"],[[8365,8367],"valid",[],"NV8"],[[8368,8369],"valid",[],"NV8"],[[8370,8373],"valid",[],"NV8"],[[8374,8376],"valid",[],"NV8"],[[8377,8377],"valid",[],"NV8"],[[8378,8378],"valid",[],"NV8"],[[8379,8381],"valid",[],"NV8"],[[8382,8382],"valid",[],"NV8"],[[8383,8399],"disallowed"],[[8400,8417],"valid",[],"NV8"],[[8418,8419],"valid",[],"NV8"],[[8420,8426],"valid",[],"NV8"],[[8427,8427],"valid",[],"NV8"],[[8428,8431],"valid",[],"NV8"],[[8432,8432],"valid",[],"NV8"],[[8433,8447],"disallowed"],[[8448,8448],"disallowed_STD3_mapped",[97,47,99]],[[8449,8449],"disallowed_STD3_mapped",[97,47,115]],[[8450,8450],"mapped",[99]],[[8451,8451],"mapped",[176,99]],[[8452,8452],"valid",[],"NV8"],[[8453,8453],"disallowed_STD3_mapped",[99,47,111]],[[8454,8454],"disallowed_STD3_mapped",[99,47,117]],[[8455,8455],"mapped",[603]],[[8456,8456],"valid",[],"NV8"],[[8457,8457],"mapped",[176,102]],[[8458,8458],"mapped",[103]],[[8459,8462],"mapped",[104]],[[8463,8463],"mapped",[295]],[[8464,8465],"mapped",[105]],[[8466,8467],"mapped",[108]],[[8468,8468],"valid",[],"NV8"],[[8469,8469],"mapped",[110]],[[8470,8470],"mapped",[110,111]],[[8471,8472],"valid",[],"NV8"],[[8473,8473],"mapped",[112]],[[8474,8474],"mapped",[113]],[[8475,8477],"mapped",[114]],[[8478,8479],"valid",[],"NV8"],[[8480,8480],"mapped",[115,109]],[[8481,8481],"mapped",[116,101,108]],[[8482,8482],"mapped",[116,109]],[[8483,8483],"valid",[],"NV8"],[[8484,8484],"mapped",[122]],[[8485,8485],"valid",[],"NV8"],[[8486,8486],"mapped",[969]],[[8487,8487],"valid",[],"NV8"],[[8488,8488],"mapped",[122]],[[8489,8489],"valid",[],"NV8"],[[8490,8490],"mapped",[107]],[[8491,8491],"mapped",[229]],[[8492,8492],"mapped",[98]],[[8493,8493],"mapped",[99]],[[8494,8494],"valid",[],"NV8"],[[8495,8496],"mapped",[101]],[[8497,8497],"mapped",[102]],[[8498,8498],"disallowed"],[[8499,8499],"mapped",[109]],[[8500,8500],"mapped",[111]],[[8501,8501],"mapped",[1488]],[[8502,8502],"mapped",[1489]],[[8503,8503],"mapped",[1490]],[[8504,8504],"mapped",[1491]],[[8505,8505],"mapped",[105]],[[8506,8506],"valid",[],"NV8"],[[8507,8507],"mapped",[102,97,120]],[[8508,8508],"mapped",[960]],[[8509,8510],"mapped",[947]],[[8511,8511],"mapped",[960]],[[8512,8512],"mapped",[8721]],[[8513,8516],"valid",[],"NV8"],[[8517,8518],"mapped",[100]],[[8519,8519],"mapped",[101]],[[8520,8520],"mapped",[105]],[[8521,8521],"mapped",[106]],[[8522,8523],"valid",[],"NV8"],[[8524,8524],"valid",[],"NV8"],[[8525,8525],"valid",[],"NV8"],[[8526,8526],"valid"],[[8527,8527],"valid",[],"NV8"],[[8528,8528],"mapped",[49,8260,55]],[[8529,8529],"mapped",[49,8260,57]],[[8530,8530],"mapped",[49,8260,49,48]],[[8531,8531],"mapped",[49,8260,51]],[[8532,8532],"mapped",[50,8260,51]],[[8533,8533],"mapped",[49,8260,53]],[[8534,8534],"mapped",[50,8260,53]],[[8535,8535],"mapped",[51,8260,53]],[[8536,8536],"mapped",[52,8260,53]],[[8537,8537],"mapped",[49,8260,54]],[[8538,8538],"mapped",[53,8260,54]],[[8539,8539],"mapped",[49,8260,56]],[[8540,8540],"mapped",[51,8260,56]],[[8541,8541],"mapped",[53,8260,56]],[[8542,8542],"mapped",[55,8260,56]],[[8543,8543],"mapped",[49,8260]],[[8544,8544],"mapped",[105]],[[8545,8545],"mapped",[105,105]],[[8546,8546],"mapped",[105,105,105]],[[8547,8547],"mapped",[105,118]],[[8548,8548],"mapped",[118]],[[8549,8549],"mapped",[118,105]],[[8550,8550],"mapped",[118,105,105]],[[8551,8551],"mapped",[118,105,105,105]],[[8552,8552],"mapped",[105,120]],[[8553,8553],"mapped",[120]],[[8554,8554],"mapped",[120,105]],[[8555,8555],"mapped",[120,105,105]],[[8556,8556],"mapped",[108]],[[8557,8557],"mapped",[99]],[[8558,8558],"mapped",[100]],[[8559,8559],"mapped",[109]],[[8560,8560],"mapped",[105]],[[8561,8561],"mapped",[105,105]],[[8562,8562],"mapped",[105,105,105]],[[8563,8563],"mapped",[105,118]],[[8564,8564],"mapped",[118]],[[8565,8565],"mapped",[118,105]],[[8566,8566],"mapped",[118,105,105]],[[8567,8567],"mapped",[118,105,105,105]],[[8568,8568],"mapped",[105,120]],[[8569,8569],"mapped",[120]],[[8570,8570],"mapped",[120,105]],[[8571,8571],"mapped",[120,105,105]],[[8572,8572],"mapped",[108]],[[8573,8573],"mapped",[99]],[[8574,8574],"mapped",[100]],[[8575,8575],"mapped",[109]],[[8576,8578],"valid",[],"NV8"],[[8579,8579],"disallowed"],[[8580,8580],"valid"],[[8581,8584],"valid",[],"NV8"],[[8585,8585],"mapped",[48,8260,51]],[[8586,8587],"valid",[],"NV8"],[[8588,8591],"disallowed"],[[8592,8682],"valid",[],"NV8"],[[8683,8691],"valid",[],"NV8"],[[8692,8703],"valid",[],"NV8"],[[8704,8747],"valid",[],"NV8"],[[8748,8748],"mapped",[8747,8747]],[[8749,8749],"mapped",[8747,8747,8747]],[[8750,8750],"valid",[],"NV8"],[[8751,8751],"mapped",[8750,8750]],[[8752,8752],"mapped",[8750,8750,8750]],[[8753,8799],"valid",[],"NV8"],[[8800,8800],"disallowed_STD3_valid"],[[8801,8813],"valid",[],"NV8"],[[8814,8815],"disallowed_STD3_valid"],[[8816,8945],"valid",[],"NV8"],[[8946,8959],"valid",[],"NV8"],[[8960,8960],"valid",[],"NV8"],[[8961,8961],"valid",[],"NV8"],[[8962,9000],"valid",[],"NV8"],[[9001,9001],"mapped",[12296]],[[9002,9002],"mapped",[12297]],[[9003,9082],"valid",[],"NV8"],[[9083,9083],"valid",[],"NV8"],[[9084,9084],"valid",[],"NV8"],[[9085,9114],"valid",[],"NV8"],[[9115,9166],"valid",[],"NV8"],[[9167,9168],"valid",[],"NV8"],[[9169,9179],"valid",[],"NV8"],[[9180,9191],"valid",[],"NV8"],[[9192,9192],"valid",[],"NV8"],[[9193,9203],"valid",[],"NV8"],[[9204,9210],"valid",[],"NV8"],[[9211,9215],"disallowed"],[[9216,9252],"valid",[],"NV8"],[[9253,9254],"valid",[],"NV8"],[[9255,9279],"disallowed"],[[9280,9290],"valid",[],"NV8"],[[9291,9311],"disallowed"],[[9312,9312],"mapped",[49]],[[9313,9313],"mapped",[50]],[[9314,9314],"mapped",[51]],[[9315,9315],"mapped",[52]],[[9316,9316],"mapped",[53]],[[9317,9317],"mapped",[54]],[[9318,9318],"mapped",[55]],[[9319,9319],"mapped",[56]],[[9320,9320],"mapped",[57]],[[9321,9321],"mapped",[49,48]],[[9322,9322],"mapped",[49,49]],[[9323,9323],"mapped",[49,50]],[[9324,9324],"mapped",[49,51]],[[9325,9325],"mapped",[49,52]],[[9326,9326],"mapped",[49,53]],[[9327,9327],"mapped",[49,54]],[[9328,9328],"mapped",[49,55]],[[9329,9329],"mapped",[49,56]],[[9330,9330],"mapped",[49,57]],[[9331,9331],"mapped",[50,48]],[[9332,9332],"disallowed_STD3_mapped",[40,49,41]],[[9333,9333],"disallowed_STD3_mapped",[40,50,41]],[[9334,9334],"disallowed_STD3_mapped",[40,51,41]],[[9335,9335],"disallowed_STD3_mapped",[40,52,41]],[[9336,9336],"disallowed_STD3_mapped",[40,53,41]],[[9337,9337],"disallowed_STD3_mapped",[40,54,41]],[[9338,9338],"disallowed_STD3_mapped",[40,55,41]],[[9339,9339],"disallowed_STD3_mapped",[40,56,41]],[[9340,9340],"disallowed_STD3_mapped",[40,57,41]],[[9341,9341],"disallowed_STD3_mapped",[40,49,48,41]],[[9342,9342],"disallowed_STD3_mapped",[40,49,49,41]],[[9343,9343],"disallowed_STD3_mapped",[40,49,50,41]],[[9344,9344],"disallowed_STD3_mapped",[40,49,51,41]],[[9345,9345],"disallowed_STD3_mapped",[40,49,52,41]],[[9346,9346],"disallowed_STD3_mapped",[40,49,53,41]],[[9347,9347],"disallowed_STD3_mapped",[40,49,54,41]],[[9348,9348],"disallowed_STD3_mapped",[40,49,55,41]],[[9349,9349],"disallowed_STD3_mapped",[40,49,56,41]],[[9350,9350],"disallowed_STD3_mapped",[40,49,57,41]],[[9351,9351],"disallowed_STD3_mapped",[40,50,48,41]],[[9352,9371],"disallowed"],[[9372,9372],"disallowed_STD3_mapped",[40,97,41]],[[9373,9373],"disallowed_STD3_mapped",[40,98,41]],[[9374,9374],"disallowed_STD3_mapped",[40,99,41]],[[9375,9375],"disallowed_STD3_mapped",[40,100,41]],[[9376,9376],"disallowed_STD3_mapped",[40,101,41]],[[9377,9377],"disallowed_STD3_mapped",[40,102,41]],[[9378,9378],"disallowed_STD3_mapped",[40,103,41]],[[9379,9379],"disallowed_STD3_mapped",[40,104,41]],[[9380,9380],"disallowed_STD3_mapped",[40,105,41]],[[9381,9381],"disallowed_STD3_mapped",[40,106,41]],[[9382,9382],"disallowed_STD3_mapped",[40,107,41]],[[9383,9383],"disallowed_STD3_mapped",[40,108,41]],[[9384,9384],"disallowed_STD3_mapped",[40,109,41]],[[9385,9385],"disallowed_STD3_mapped",[40,110,41]],[[9386,9386],"disallowed_STD3_mapped",[40,111,41]],[[9387,9387],"disallowed_STD3_mapped",[40,112,41]],[[9388,9388],"disallowed_STD3_mapped",[40,113,41]],[[9389,9389],"disallowed_STD3_mapped",[40,114,41]],[[9390,9390],"disallowed_STD3_mapped",[40,115,41]],[[9391,9391],"disallowed_STD3_mapped",[40,116,41]],[[9392,9392],"disallowed_STD3_mapped",[40,117,41]],[[9393,9393],"disallowed_STD3_mapped",[40,118,41]],[[9394,9394],"disallowed_STD3_mapped",[40,119,41]],[[9395,9395],"disallowed_STD3_mapped",[40,120,41]],[[9396,9396],"disallowed_STD3_mapped",[40,121,41]],[[9397,9397],"disallowed_STD3_mapped",[40,122,41]],[[9398,9398],"mapped",[97]],[[9399,9399],"mapped",[98]],[[9400,9400],"mapped",[99]],[[9401,9401],"mapped",[100]],[[9402,9402],"mapped",[101]],[[9403,9403],"mapped",[102]],[[9404,9404],"mapped",[103]],[[9405,9405],"mapped",[104]],[[9406,9406],"mapped",[105]],[[9407,9407],"mapped",[106]],[[9408,9408],"mapped",[107]],[[9409,9409],"mapped",[108]],[[9410,9410],"mapped",[109]],[[9411,9411],"mapped",[110]],[[9412,9412],"mapped",[111]],[[9413,9413],"mapped",[112]],[[9414,9414],"mapped",[113]],[[9415,9415],"mapped",[114]],[[9416,9416],"mapped",[115]],[[9417,9417],"mapped",[116]],[[9418,9418],"mapped",[117]],[[9419,9419],"mapped",[118]],[[9420,9420],"mapped",[119]],[[9421,9421],"mapped",[120]],[[9422,9422],"mapped",[121]],[[9423,9423],"mapped",[122]],[[9424,9424],"mapped",[97]],[[9425,9425],"mapped",[98]],[[9426,9426],"mapped",[99]],[[9427,9427],"mapped",[100]],[[9428,9428],"mapped",[101]],[[9429,9429],"mapped",[102]],[[9430,9430],"mapped",[103]],[[9431,9431],"mapped",[104]],[[9432,9432],"mapped",[105]],[[9433,9433],"mapped",[106]],[[9434,9434],"mapped",[107]],[[9435,9435],"mapped",[108]],[[9436,9436],"mapped",[109]],[[9437,9437],"mapped",[110]],[[9438,9438],"mapped",[111]],[[9439,9439],"mapped",[112]],[[9440,9440],"mapped",[113]],[[9441,9441],"mapped",[114]],[[9442,9442],"mapped",[115]],[[9443,9443],"mapped",[116]],[[9444,9444],"mapped",[117]],[[9445,9445],"mapped",[118]],[[9446,9446],"mapped",[119]],[[9447,9447],"mapped",[120]],[[9448,9448],"mapped",[121]],[[9449,9449],"mapped",[122]],[[9450,9450],"mapped",[48]],[[9451,9470],"valid",[],"NV8"],[[9471,9471],"valid",[],"NV8"],[[9472,9621],"valid",[],"NV8"],[[9622,9631],"valid",[],"NV8"],[[9632,9711],"valid",[],"NV8"],[[9712,9719],"valid",[],"NV8"],[[9720,9727],"valid",[],"NV8"],[[9728,9747],"valid",[],"NV8"],[[9748,9749],"valid",[],"NV8"],[[9750,9751],"valid",[],"NV8"],[[9752,9752],"valid",[],"NV8"],[[9753,9753],"valid",[],"NV8"],[[9754,9839],"valid",[],"NV8"],[[9840,9841],"valid",[],"NV8"],[[9842,9853],"valid",[],"NV8"],[[9854,9855],"valid",[],"NV8"],[[9856,9865],"valid",[],"NV8"],[[9866,9873],"valid",[],"NV8"],[[9874,9884],"valid",[],"NV8"],[[9885,9885],"valid",[],"NV8"],[[9886,9887],"valid",[],"NV8"],[[9888,9889],"valid",[],"NV8"],[[9890,9905],"valid",[],"NV8"],[[9906,9906],"valid",[],"NV8"],[[9907,9916],"valid",[],"NV8"],[[9917,9919],"valid",[],"NV8"],[[9920,9923],"valid",[],"NV8"],[[9924,9933],"valid",[],"NV8"],[[9934,9934],"valid",[],"NV8"],[[9935,9953],"valid",[],"NV8"],[[9954,9954],"valid",[],"NV8"],[[9955,9955],"valid",[],"NV8"],[[9956,9959],"valid",[],"NV8"],[[9960,9983],"valid",[],"NV8"],[[9984,9984],"valid",[],"NV8"],[[9985,9988],"valid",[],"NV8"],[[9989,9989],"valid",[],"NV8"],[[9990,9993],"valid",[],"NV8"],[[9994,9995],"valid",[],"NV8"],[[9996,10023],"valid",[],"NV8"],[[10024,10024],"valid",[],"NV8"],[[10025,10059],"valid",[],"NV8"],[[10060,10060],"valid",[],"NV8"],[[10061,10061],"valid",[],"NV8"],[[10062,10062],"valid",[],"NV8"],[[10063,10066],"valid",[],"NV8"],[[10067,10069],"valid",[],"NV8"],[[10070,10070],"valid",[],"NV8"],[[10071,10071],"valid",[],"NV8"],[[10072,10078],"valid",[],"NV8"],[[10079,10080],"valid",[],"NV8"],[[10081,10087],"valid",[],"NV8"],[[10088,10101],"valid",[],"NV8"],[[10102,10132],"valid",[],"NV8"],[[10133,10135],"valid",[],"NV8"],[[10136,10159],"valid",[],"NV8"],[[10160,10160],"valid",[],"NV8"],[[10161,10174],"valid",[],"NV8"],[[10175,10175],"valid",[],"NV8"],[[10176,10182],"valid",[],"NV8"],[[10183,10186],"valid",[],"NV8"],[[10187,10187],"valid",[],"NV8"],[[10188,10188],"valid",[],"NV8"],[[10189,10189],"valid",[],"NV8"],[[10190,10191],"valid",[],"NV8"],[[10192,10219],"valid",[],"NV8"],[[10220,10223],"valid",[],"NV8"],[[10224,10239],"valid",[],"NV8"],[[10240,10495],"valid",[],"NV8"],[[10496,10763],"valid",[],"NV8"],[[10764,10764],"mapped",[8747,8747,8747,8747]],[[10765,10867],"valid",[],"NV8"],[[10868,10868],"disallowed_STD3_mapped",[58,58,61]],[[10869,10869],"disallowed_STD3_mapped",[61,61]],[[10870,10870],"disallowed_STD3_mapped",[61,61,61]],[[10871,10971],"valid",[],"NV8"],[[10972,10972],"mapped",[10973,824]],[[10973,11007],"valid",[],"NV8"],[[11008,11021],"valid",[],"NV8"],[[11022,11027],"valid",[],"NV8"],[[11028,11034],"valid",[],"NV8"],[[11035,11039],"valid",[],"NV8"],[[11040,11043],"valid",[],"NV8"],[[11044,11084],"valid",[],"NV8"],[[11085,11087],"valid",[],"NV8"],[[11088,11092],"valid",[],"NV8"],[[11093,11097],"valid",[],"NV8"],[[11098,11123],"valid",[],"NV8"],[[11124,11125],"disallowed"],[[11126,11157],"valid",[],"NV8"],[[11158,11159],"disallowed"],[[11160,11193],"valid",[],"NV8"],[[11194,11196],"disallowed"],[[11197,11208],"valid",[],"NV8"],[[11209,11209],"disallowed"],[[11210,11217],"valid",[],"NV8"],[[11218,11243],"disallowed"],[[11244,11247],"valid",[],"NV8"],[[11248,11263],"disallowed"],[[11264,11264],"mapped",[11312]],[[11265,11265],"mapped",[11313]],[[11266,11266],"mapped",[11314]],[[11267,11267],"mapped",[11315]],[[11268,11268],"mapped",[11316]],[[11269,11269],"mapped",[11317]],[[11270,11270],"mapped",[11318]],[[11271,11271],"mapped",[11319]],[[11272,11272],"mapped",[11320]],[[11273,11273],"mapped",[11321]],[[11274,11274],"mapped",[11322]],[[11275,11275],"mapped",[11323]],[[11276,11276],"mapped",[11324]],[[11277,11277],"mapped",[11325]],[[11278,11278],"mapped",[11326]],[[11279,11279],"mapped",[11327]],[[11280,11280],"mapped",[11328]],[[11281,11281],"mapped",[11329]],[[11282,11282],"mapped",[11330]],[[11283,11283],"mapped",[11331]],[[11284,11284],"mapped",[11332]],[[11285,11285],"mapped",[11333]],[[11286,11286],"mapped",[11334]],[[11287,11287],"mapped",[11335]],[[11288,11288],"mapped",[11336]],[[11289,11289],"mapped",[11337]],[[11290,11290],"mapped",[11338]],[[11291,11291],"mapped",[11339]],[[11292,11292],"mapped",[11340]],[[11293,11293],"mapped",[11341]],[[11294,11294],"mapped",[11342]],[[11295,11295],"mapped",[11343]],[[11296,11296],"mapped",[11344]],[[11297,11297],"mapped",[11345]],[[11298,11298],"mapped",[11346]],[[11299,11299],"mapped",[11347]],[[11300,11300],"mapped",[11348]],[[11301,11301],"mapped",[11349]],[[11302,11302],"mapped",[11350]],[[11303,11303],"mapped",[11351]],[[11304,11304],"mapped",[11352]],[[11305,11305],"mapped",[11353]],[[11306,11306],"mapped",[11354]],[[11307,11307],"mapped",[11355]],[[11308,11308],"mapped",[11356]],[[11309,11309],"mapped",[11357]],[[11310,11310],"mapped",[11358]],[[11311,11311],"disallowed"],[[11312,11358],"valid"],[[11359,11359],"disallowed"],[[11360,11360],"mapped",[11361]],[[11361,11361],"valid"],[[11362,11362],"mapped",[619]],[[11363,11363],"mapped",[7549]],[[11364,11364],"mapped",[637]],[[11365,11366],"valid"],[[11367,11367],"mapped",[11368]],[[11368,11368],"valid"],[[11369,11369],"mapped",[11370]],[[11370,11370],"valid"],[[11371,11371],"mapped",[11372]],[[11372,11372],"valid"],[[11373,11373],"mapped",[593]],[[11374,11374],"mapped",[625]],[[11375,11375],"mapped",[592]],[[11376,11376],"mapped",[594]],[[11377,11377],"valid"],[[11378,11378],"mapped",[11379]],[[11379,11379],"valid"],[[11380,11380],"valid"],[[11381,11381],"mapped",[11382]],[[11382,11383],"valid"],[[11384,11387],"valid"],[[11388,11388],"mapped",[106]],[[11389,11389],"mapped",[118]],[[11390,11390],"mapped",[575]],[[11391,11391],"mapped",[576]],[[11392,11392],"mapped",[11393]],[[11393,11393],"valid"],[[11394,11394],"mapped",[11395]],[[11395,11395],"valid"],[[11396,11396],"mapped",[11397]],[[11397,11397],"valid"],[[11398,11398],"mapped",[11399]],[[11399,11399],"valid"],[[11400,11400],"mapped",[11401]],[[11401,11401],"valid"],[[11402,11402],"mapped",[11403]],[[11403,11403],"valid"],[[11404,11404],"mapped",[11405]],[[11405,11405],"valid"],[[11406,11406],"mapped",[11407]],[[11407,11407],"valid"],[[11408,11408],"mapped",[11409]],[[11409,11409],"valid"],[[11410,11410],"mapped",[11411]],[[11411,11411],"valid"],[[11412,11412],"mapped",[11413]],[[11413,11413],"valid"],[[11414,11414],"mapped",[11415]],[[11415,11415],"valid"],[[11416,11416],"mapped",[11417]],[[11417,11417],"valid"],[[11418,11418],"mapped",[11419]],[[11419,11419],"valid"],[[11420,11420],"mapped",[11421]],[[11421,11421],"valid"],[[11422,11422],"mapped",[11423]],[[11423,11423],"valid"],[[11424,11424],"mapped",[11425]],[[11425,11425],"valid"],[[11426,11426],"mapped",[11427]],[[11427,11427],"valid"],[[11428,11428],"mapped",[11429]],[[11429,11429],"valid"],[[11430,11430],"mapped",[11431]],[[11431,11431],"valid"],[[11432,11432],"mapped",[11433]],[[11433,11433],"valid"],[[11434,11434],"mapped",[11435]],[[11435,11435],"valid"],[[11436,11436],"mapped",[11437]],[[11437,11437],"valid"],[[11438,11438],"mapped",[11439]],[[11439,11439],"valid"],[[11440,11440],"mapped",[11441]],[[11441,11441],"valid"],[[11442,11442],"mapped",[11443]],[[11443,11443],"valid"],[[11444,11444],"mapped",[11445]],[[11445,11445],"valid"],[[11446,11446],"mapped",[11447]],[[11447,11447],"valid"],[[11448,11448],"mapped",[11449]],[[11449,11449],"valid"],[[11450,11450],"mapped",[11451]],[[11451,11451],"valid"],[[11452,11452],"mapped",[11453]],[[11453,11453],"valid"],[[11454,11454],"mapped",[11455]],[[11455,11455],"valid"],[[11456,11456],"mapped",[11457]],[[11457,11457],"valid"],[[11458,11458],"mapped",[11459]],[[11459,11459],"valid"],[[11460,11460],"mapped",[11461]],[[11461,11461],"valid"],[[11462,11462],"mapped",[11463]],[[11463,11463],"valid"],[[11464,11464],"mapped",[11465]],[[11465,11465],"valid"],[[11466,11466],"mapped",[11467]],[[11467,11467],"valid"],[[11468,11468],"mapped",[11469]],[[11469,11469],"valid"],[[11470,11470],"mapped",[11471]],[[11471,11471],"valid"],[[11472,11472],"mapped",[11473]],[[11473,11473],"valid"],[[11474,11474],"mapped",[11475]],[[11475,11475],"valid"],[[11476,11476],"mapped",[11477]],[[11477,11477],"valid"],[[11478,11478],"mapped",[11479]],[[11479,11479],"valid"],[[11480,11480],"mapped",[11481]],[[11481,11481],"valid"],[[11482,11482],"mapped",[11483]],[[11483,11483],"valid"],[[11484,11484],"mapped",[11485]],[[11485,11485],"valid"],[[11486,11486],"mapped",[11487]],[[11487,11487],"valid"],[[11488,11488],"mapped",[11489]],[[11489,11489],"valid"],[[11490,11490],"mapped",[11491]],[[11491,11492],"valid"],[[11493,11498],"valid",[],"NV8"],[[11499,11499],"mapped",[11500]],[[11500,11500],"valid"],[[11501,11501],"mapped",[11502]],[[11502,11505],"valid"],[[11506,11506],"mapped",[11507]],[[11507,11507],"valid"],[[11508,11512],"disallowed"],[[11513,11519],"valid",[],"NV8"],[[11520,11557],"valid"],[[11558,11558],"disallowed"],[[11559,11559],"valid"],[[11560,11564],"disallowed"],[[11565,11565],"valid"],[[11566,11567],"disallowed"],[[11568,11621],"valid"],[[11622,11623],"valid"],[[11624,11630],"disallowed"],[[11631,11631],"mapped",[11617]],[[11632,11632],"valid",[],"NV8"],[[11633,11646],"disallowed"],[[11647,11647],"valid"],[[11648,11670],"valid"],[[11671,11679],"disallowed"],[[11680,11686],"valid"],[[11687,11687],"disallowed"],[[11688,11694],"valid"],[[11695,11695],"disallowed"],[[11696,11702],"valid"],[[11703,11703],"disallowed"],[[11704,11710],"valid"],[[11711,11711],"disallowed"],[[11712,11718],"valid"],[[11719,11719],"disallowed"],[[11720,11726],"valid"],[[11727,11727],"disallowed"],[[11728,11734],"valid"],[[11735,11735],"disallowed"],[[11736,11742],"valid"],[[11743,11743],"disallowed"],[[11744,11775],"valid"],[[11776,11799],"valid",[],"NV8"],[[11800,11803],"valid",[],"NV8"],[[11804,11805],"valid",[],"NV8"],[[11806,11822],"valid",[],"NV8"],[[11823,11823],"valid"],[[11824,11824],"valid",[],"NV8"],[[11825,11825],"valid",[],"NV8"],[[11826,11835],"valid",[],"NV8"],[[11836,11842],"valid",[],"NV8"],[[11843,11903],"disallowed"],[[11904,11929],"valid",[],"NV8"],[[11930,11930],"disallowed"],[[11931,11934],"valid",[],"NV8"],[[11935,11935],"mapped",[27597]],[[11936,12018],"valid",[],"NV8"],[[12019,12019],"mapped",[40863]],[[12020,12031],"disallowed"],[[12032,12032],"mapped",[19968]],[[12033,12033],"mapped",[20008]],[[12034,12034],"mapped",[20022]],[[12035,12035],"mapped",[20031]],[[12036,12036],"mapped",[20057]],[[12037,12037],"mapped",[20101]],[[12038,12038],"mapped",[20108]],[[12039,12039],"mapped",[20128]],[[12040,12040],"mapped",[20154]],[[12041,12041],"mapped",[20799]],[[12042,12042],"mapped",[20837]],[[12043,12043],"mapped",[20843]],[[12044,12044],"mapped",[20866]],[[12045,12045],"mapped",[20886]],[[12046,12046],"mapped",[20907]],[[12047,12047],"mapped",[20960]],[[12048,12048],"mapped",[20981]],[[12049,12049],"mapped",[20992]],[[12050,12050],"mapped",[21147]],[[12051,12051],"mapped",[21241]],[[12052,12052],"mapped",[21269]],[[12053,12053],"mapped",[21274]],[[12054,12054],"mapped",[21304]],[[12055,12055],"mapped",[21313]],[[12056,12056],"mapped",[21340]],[[12057,12057],"mapped",[21353]],[[12058,12058],"mapped",[21378]],[[12059,12059],"mapped",[21430]],[[12060,12060],"mapped",[21448]],[[12061,12061],"mapped",[21475]],[[12062,12062],"mapped",[22231]],[[12063,12063],"mapped",[22303]],[[12064,12064],"mapped",[22763]],[[12065,12065],"mapped",[22786]],[[12066,12066],"mapped",[22794]],[[12067,12067],"mapped",[22805]],[[12068,12068],"mapped",[22823]],[[12069,12069],"mapped",[22899]],[[12070,12070],"mapped",[23376]],[[12071,12071],"mapped",[23424]],[[12072,12072],"mapped",[23544]],[[12073,12073],"mapped",[23567]],[[12074,12074],"mapped",[23586]],[[12075,12075],"mapped",[23608]],[[12076,12076],"mapped",[23662]],[[12077,12077],"mapped",[23665]],[[12078,12078],"mapped",[24027]],[[12079,12079],"mapped",[24037]],[[12080,12080],"mapped",[24049]],[[12081,12081],"mapped",[24062]],[[12082,12082],"mapped",[24178]],[[12083,12083],"mapped",[24186]],[[12084,12084],"mapped",[24191]],[[12085,12085],"mapped",[24308]],[[12086,12086],"mapped",[24318]],[[12087,12087],"mapped",[24331]],[[12088,12088],"mapped",[24339]],[[12089,12089],"mapped",[24400]],[[12090,12090],"mapped",[24417]],[[12091,12091],"mapped",[24435]],[[12092,12092],"mapped",[24515]],[[12093,12093],"mapped",[25096]],[[12094,12094],"mapped",[25142]],[[12095,12095],"mapped",[25163]],[[12096,12096],"mapped",[25903]],[[12097,12097],"mapped",[25908]],[[12098,12098],"mapped",[25991]],[[12099,12099],"mapped",[26007]],[[12100,12100],"mapped",[26020]],[[12101,12101],"mapped",[26041]],[[12102,12102],"mapped",[26080]],[[12103,12103],"mapped",[26085]],[[12104,12104],"mapped",[26352]],[[12105,12105],"mapped",[26376]],[[12106,12106],"mapped",[26408]],[[12107,12107],"mapped",[27424]],[[12108,12108],"mapped",[27490]],[[12109,12109],"mapped",[27513]],[[12110,12110],"mapped",[27571]],[[12111,12111],"mapped",[27595]],[[12112,12112],"mapped",[27604]],[[12113,12113],"mapped",[27611]],[[12114,12114],"mapped",[27663]],[[12115,12115],"mapped",[27668]],[[12116,12116],"mapped",[27700]],[[12117,12117],"mapped",[28779]],[[12118,12118],"mapped",[29226]],[[12119,12119],"mapped",[29238]],[[12120,12120],"mapped",[29243]],[[12121,12121],"mapped",[29247]],[[12122,12122],"mapped",[29255]],[[12123,12123],"mapped",[29273]],[[12124,12124],"mapped",[29275]],[[12125,12125],"mapped",[29356]],[[12126,12126],"mapped",[29572]],[[12127,12127],"mapped",[29577]],[[12128,12128],"mapped",[29916]],[[12129,12129],"mapped",[29926]],[[12130,12130],"mapped",[29976]],[[12131,12131],"mapped",[29983]],[[12132,12132],"mapped",[29992]],[[12133,12133],"mapped",[30000]],[[12134,12134],"mapped",[30091]],[[12135,12135],"mapped",[30098]],[[12136,12136],"mapped",[30326]],[[12137,12137],"mapped",[30333]],[[12138,12138],"mapped",[30382]],[[12139,12139],"mapped",[30399]],[[12140,12140],"mapped",[30446]],[[12141,12141],"mapped",[30683]],[[12142,12142],"mapped",[30690]],[[12143,12143],"mapped",[30707]],[[12144,12144],"mapped",[31034]],[[12145,12145],"mapped",[31160]],[[12146,12146],"mapped",[31166]],[[12147,12147],"mapped",[31348]],[[12148,12148],"mapped",[31435]],[[12149,12149],"mapped",[31481]],[[12150,12150],"mapped",[31859]],[[12151,12151],"mapped",[31992]],[[12152,12152],"mapped",[32566]],[[12153,12153],"mapped",[32593]],[[12154,12154],"mapped",[32650]],[[12155,12155],"mapped",[32701]],[[12156,12156],"mapped",[32769]],[[12157,12157],"mapped",[32780]],[[12158,12158],"mapped",[32786]],[[12159,12159],"mapped",[32819]],[[12160,12160],"mapped",[32895]],[[12161,12161],"mapped",[32905]],[[12162,12162],"mapped",[33251]],[[12163,12163],"mapped",[33258]],[[12164,12164],"mapped",[33267]],[[12165,12165],"mapped",[33276]],[[12166,12166],"mapped",[33292]],[[12167,12167],"mapped",[33307]],[[12168,12168],"mapped",[33311]],[[12169,12169],"mapped",[33390]],[[12170,12170],"mapped",[33394]],[[12171,12171],"mapped",[33400]],[[12172,12172],"mapped",[34381]],[[12173,12173],"mapped",[34411]],[[12174,12174],"mapped",[34880]],[[12175,12175],"mapped",[34892]],[[12176,12176],"mapped",[34915]],[[12177,12177],"mapped",[35198]],[[12178,12178],"mapped",[35211]],[[12179,12179],"mapped",[35282]],[[12180,12180],"mapped",[35328]],[[12181,12181],"mapped",[35895]],[[12182,12182],"mapped",[35910]],[[12183,12183],"mapped",[35925]],[[12184,12184],"mapped",[35960]],[[12185,12185],"mapped",[35997]],[[12186,12186],"mapped",[36196]],[[12187,12187],"mapped",[36208]],[[12188,12188],"mapped",[36275]],[[12189,12189],"mapped",[36523]],[[12190,12190],"mapped",[36554]],[[12191,12191],"mapped",[36763]],[[12192,12192],"mapped",[36784]],[[12193,12193],"mapped",[36789]],[[12194,12194],"mapped",[37009]],[[12195,12195],"mapped",[37193]],[[12196,12196],"mapped",[37318]],[[12197,12197],"mapped",[37324]],[[12198,12198],"mapped",[37329]],[[12199,12199],"mapped",[38263]],[[12200,12200],"mapped",[38272]],[[12201,12201],"mapped",[38428]],[[12202,12202],"mapped",[38582]],[[12203,12203],"mapped",[38585]],[[12204,12204],"mapped",[38632]],[[12205,12205],"mapped",[38737]],[[12206,12206],"mapped",[38750]],[[12207,12207],"mapped",[38754]],[[12208,12208],"mapped",[38761]],[[12209,12209],"mapped",[38859]],[[12210,12210],"mapped",[38893]],[[12211,12211],"mapped",[38899]],[[12212,12212],"mapped",[38913]],[[12213,12213],"mapped",[39080]],[[12214,12214],"mapped",[39131]],[[12215,12215],"mapped",[39135]],[[12216,12216],"mapped",[39318]],[[12217,12217],"mapped",[39321]],[[12218,12218],"mapped",[39340]],[[12219,12219],"mapped",[39592]],[[12220,12220],"mapped",[39640]],[[12221,12221],"mapped",[39647]],[[12222,12222],"mapped",[39717]],[[12223,12223],"mapped",[39727]],[[12224,12224],"mapped",[39730]],[[12225,12225],"mapped",[39740]],[[12226,12226],"mapped",[39770]],[[12227,12227],"mapped",[40165]],[[12228,12228],"mapped",[40565]],[[12229,12229],"mapped",[40575]],[[12230,12230],"mapped",[40613]],[[12231,12231],"mapped",[40635]],[[12232,12232],"mapped",[40643]],[[12233,12233],"mapped",[40653]],[[12234,12234],"mapped",[40657]],[[12235,12235],"mapped",[40697]],[[12236,12236],"mapped",[40701]],[[12237,12237],"mapped",[40718]],[[12238,12238],"mapped",[40723]],[[12239,12239],"mapped",[40736]],[[12240,12240],"mapped",[40763]],[[12241,12241],"mapped",[40778]],[[12242,12242],"mapped",[40786]],[[12243,12243],"mapped",[40845]],[[12244,12244],"mapped",[40860]],[[12245,12245],"mapped",[40864]],[[12246,12271],"disallowed"],[[12272,12283],"disallowed"],[[12284,12287],"disallowed"],[[12288,12288],"disallowed_STD3_mapped",[32]],[[12289,12289],"valid",[],"NV8"],[[12290,12290],"mapped",[46]],[[12291,12292],"valid",[],"NV8"],[[12293,12295],"valid"],[[12296,12329],"valid",[],"NV8"],[[12330,12333],"valid"],[[12334,12341],"valid",[],"NV8"],[[12342,12342],"mapped",[12306]],[[12343,12343],"valid",[],"NV8"],[[12344,12344],"mapped",[21313]],[[12345,12345],"mapped",[21316]],[[12346,12346],"mapped",[21317]],[[12347,12347],"valid",[],"NV8"],[[12348,12348],"valid"],[[12349,12349],"valid",[],"NV8"],[[12350,12350],"valid",[],"NV8"],[[12351,12351],"valid",[],"NV8"],[[12352,12352],"disallowed"],[[12353,12436],"valid"],[[12437,12438],"valid"],[[12439,12440],"disallowed"],[[12441,12442],"valid"],[[12443,12443],"disallowed_STD3_mapped",[32,12441]],[[12444,12444],"disallowed_STD3_mapped",[32,12442]],[[12445,12446],"valid"],[[12447,12447],"mapped",[12424,12426]],[[12448,12448],"valid",[],"NV8"],[[12449,12542],"valid"],[[12543,12543],"mapped",[12467,12488]],[[12544,12548],"disallowed"],[[12549,12588],"valid"],[[12589,12589],"valid"],[[12590,12592],"disallowed"],[[12593,12593],"mapped",[4352]],[[12594,12594],"mapped",[4353]],[[12595,12595],"mapped",[4522]],[[12596,12596],"mapped",[4354]],[[12597,12597],"mapped",[4524]],[[12598,12598],"mapped",[4525]],[[12599,12599],"mapped",[4355]],[[12600,12600],"mapped",[4356]],[[12601,12601],"mapped",[4357]],[[12602,12602],"mapped",[4528]],[[12603,12603],"mapped",[4529]],[[12604,12604],"mapped",[4530]],[[12605,12605],"mapped",[4531]],[[12606,12606],"mapped",[4532]],[[12607,12607],"mapped",[4533]],[[12608,12608],"mapped",[4378]],[[12609,12609],"mapped",[4358]],[[12610,12610],"mapped",[4359]],[[12611,12611],"mapped",[4360]],[[12612,12612],"mapped",[4385]],[[12613,12613],"mapped",[4361]],[[12614,12614],"mapped",[4362]],[[12615,12615],"mapped",[4363]],[[12616,12616],"mapped",[4364]],[[12617,12617],"mapped",[4365]],[[12618,12618],"mapped",[4366]],[[12619,12619],"mapped",[4367]],[[12620,12620],"mapped",[4368]],[[12621,12621],"mapped",[4369]],[[12622,12622],"mapped",[4370]],[[12623,12623],"mapped",[4449]],[[12624,12624],"mapped",[4450]],[[12625,12625],"mapped",[4451]],[[12626,12626],"mapped",[4452]],[[12627,12627],"mapped",[4453]],[[12628,12628],"mapped",[4454]],[[12629,12629],"mapped",[4455]],[[12630,12630],"mapped",[4456]],[[12631,12631],"mapped",[4457]],[[12632,12632],"mapped",[4458]],[[12633,12633],"mapped",[4459]],[[12634,12634],"mapped",[4460]],[[12635,12635],"mapped",[4461]],[[12636,12636],"mapped",[4462]],[[12637,12637],"mapped",[4463]],[[12638,12638],"mapped",[4464]],[[12639,12639],"mapped",[4465]],[[12640,12640],"mapped",[4466]],[[12641,12641],"mapped",[4467]],[[12642,12642],"mapped",[4468]],[[12643,12643],"mapped",[4469]],[[12644,12644],"disallowed"],[[12645,12645],"mapped",[4372]],[[12646,12646],"mapped",[4373]],[[12647,12647],"mapped",[4551]],[[12648,12648],"mapped",[4552]],[[12649,12649],"mapped",[4556]],[[12650,12650],"mapped",[4558]],[[12651,12651],"mapped",[4563]],[[12652,12652],"mapped",[4567]],[[12653,12653],"mapped",[4569]],[[12654,12654],"mapped",[4380]],[[12655,12655],"mapped",[4573]],[[12656,12656],"mapped",[4575]],[[12657,12657],"mapped",[4381]],[[12658,12658],"mapped",[4382]],[[12659,12659],"mapped",[4384]],[[12660,12660],"mapped",[4386]],[[12661,12661],"mapped",[4387]],[[12662,12662],"mapped",[4391]],[[12663,12663],"mapped",[4393]],[[12664,12664],"mapped",[4395]],[[12665,12665],"mapped",[4396]],[[12666,12666],"mapped",[4397]],[[12667,12667],"mapped",[4398]],[[12668,12668],"mapped",[4399]],[[12669,12669],"mapped",[4402]],[[12670,12670],"mapped",[4406]],[[12671,12671],"mapped",[4416]],[[12672,12672],"mapped",[4423]],[[12673,12673],"mapped",[4428]],[[12674,12674],"mapped",[4593]],[[12675,12675],"mapped",[4594]],[[12676,12676],"mapped",[4439]],[[12677,12677],"mapped",[4440]],[[12678,12678],"mapped",[4441]],[[12679,12679],"mapped",[4484]],[[12680,12680],"mapped",[4485]],[[12681,12681],"mapped",[4488]],[[12682,12682],"mapped",[4497]],[[12683,12683],"mapped",[4498]],[[12684,12684],"mapped",[4500]],[[12685,12685],"mapped",[4510]],[[12686,12686],"mapped",[4513]],[[12687,12687],"disallowed"],[[12688,12689],"valid",[],"NV8"],[[12690,12690],"mapped",[19968]],[[12691,12691],"mapped",[20108]],[[12692,12692],"mapped",[19977]],[[12693,12693],"mapped",[22235]],[[12694,12694],"mapped",[19978]],[[12695,12695],"mapped",[20013]],[[12696,12696],"mapped",[19979]],[[12697,12697],"mapped",[30002]],[[12698,12698],"mapped",[20057]],[[12699,12699],"mapped",[19993]],[[12700,12700],"mapped",[19969]],[[12701,12701],"mapped",[22825]],[[12702,12702],"mapped",[22320]],[[12703,12703],"mapped",[20154]],[[12704,12727],"valid"],[[12728,12730],"valid"],[[12731,12735],"disallowed"],[[12736,12751],"valid",[],"NV8"],[[12752,12771],"valid",[],"NV8"],[[12772,12783],"disallowed"],[[12784,12799],"valid"],[[12800,12800],"disallowed_STD3_mapped",[40,4352,41]],[[12801,12801],"disallowed_STD3_mapped",[40,4354,41]],[[12802,12802],"disallowed_STD3_mapped",[40,4355,41]],[[12803,12803],"disallowed_STD3_mapped",[40,4357,41]],[[12804,12804],"disallowed_STD3_mapped",[40,4358,41]],[[12805,12805],"disallowed_STD3_mapped",[40,4359,41]],[[12806,12806],"disallowed_STD3_mapped",[40,4361,41]],[[12807,12807],"disallowed_STD3_mapped",[40,4363,41]],[[12808,12808],"disallowed_STD3_mapped",[40,4364,41]],[[12809,12809],"disallowed_STD3_mapped",[40,4366,41]],[[12810,12810],"disallowed_STD3_mapped",[40,4367,41]],[[12811,12811],"disallowed_STD3_mapped",[40,4368,41]],[[12812,12812],"disallowed_STD3_mapped",[40,4369,41]],[[12813,12813],"disallowed_STD3_mapped",[40,4370,41]],[[12814,12814],"disallowed_STD3_mapped",[40,44032,41]],[[12815,12815],"disallowed_STD3_mapped",[40,45208,41]],[[12816,12816],"disallowed_STD3_mapped",[40,45796,41]],[[12817,12817],"disallowed_STD3_mapped",[40,46972,41]],[[12818,12818],"disallowed_STD3_mapped",[40,47560,41]],[[12819,12819],"disallowed_STD3_mapped",[40,48148,41]],[[12820,12820],"disallowed_STD3_mapped",[40,49324,41]],[[12821,12821],"disallowed_STD3_mapped",[40,50500,41]],[[12822,12822],"disallowed_STD3_mapped",[40,51088,41]],[[12823,12823],"disallowed_STD3_mapped",[40,52264,41]],[[12824,12824],"disallowed_STD3_mapped",[40,52852,41]],[[12825,12825],"disallowed_STD3_mapped",[40,53440,41]],[[12826,12826],"disallowed_STD3_mapped",[40,54028,41]],[[12827,12827],"disallowed_STD3_mapped",[40,54616,41]],[[12828,12828],"disallowed_STD3_mapped",[40,51452,41]],[[12829,12829],"disallowed_STD3_mapped",[40,50724,51204,41]],[[12830,12830],"disallowed_STD3_mapped",[40,50724,54980,41]],[[12831,12831],"disallowed"],[[12832,12832],"disallowed_STD3_mapped",[40,19968,41]],[[12833,12833],"disallowed_STD3_mapped",[40,20108,41]],[[12834,12834],"disallowed_STD3_mapped",[40,19977,41]],[[12835,12835],"disallowed_STD3_mapped",[40,22235,41]],[[12836,12836],"disallowed_STD3_mapped",[40,20116,41]],[[12837,12837],"disallowed_STD3_mapped",[40,20845,41]],[[12838,12838],"disallowed_STD3_mapped",[40,19971,41]],[[12839,12839],"disallowed_STD3_mapped",[40,20843,41]],[[12840,12840],"disallowed_STD3_mapped",[40,20061,41]],[[12841,12841],"disallowed_STD3_mapped",[40,21313,41]],[[12842,12842],"disallowed_STD3_mapped",[40,26376,41]],[[12843,12843],"disallowed_STD3_mapped",[40,28779,41]],[[12844,12844],"disallowed_STD3_mapped",[40,27700,41]],[[12845,12845],"disallowed_STD3_mapped",[40,26408,41]],[[12846,12846],"disallowed_STD3_mapped",[40,37329,41]],[[12847,12847],"disallowed_STD3_mapped",[40,22303,41]],[[12848,12848],"disallowed_STD3_mapped",[40,26085,41]],[[12849,12849],"disallowed_STD3_mapped",[40,26666,41]],[[12850,12850],"disallowed_STD3_mapped",[40,26377,41]],[[12851,12851],"disallowed_STD3_mapped",[40,31038,41]],[[12852,12852],"disallowed_STD3_mapped",[40,21517,41]],[[12853,12853],"disallowed_STD3_mapped",[40,29305,41]],[[12854,12854],"disallowed_STD3_mapped",[40,36001,41]],[[12855,12855],"disallowed_STD3_mapped",[40,31069,41]],[[12856,12856],"disallowed_STD3_mapped",[40,21172,41]],[[12857,12857],"disallowed_STD3_mapped",[40,20195,41]],[[12858,12858],"disallowed_STD3_mapped",[40,21628,41]],[[12859,12859],"disallowed_STD3_mapped",[40,23398,41]],[[12860,12860],"disallowed_STD3_mapped",[40,30435,41]],[[12861,12861],"disallowed_STD3_mapped",[40,20225,41]],[[12862,12862],"disallowed_STD3_mapped",[40,36039,41]],[[12863,12863],"disallowed_STD3_mapped",[40,21332,41]],[[12864,12864],"disallowed_STD3_mapped",[40,31085,41]],[[12865,12865],"disallowed_STD3_mapped",[40,20241,41]],[[12866,12866],"disallowed_STD3_mapped",[40,33258,41]],[[12867,12867],"disallowed_STD3_mapped",[40,33267,41]],[[12868,12868],"mapped",[21839]],[[12869,12869],"mapped",[24188]],[[12870,12870],"mapped",[25991]],[[12871,12871],"mapped",[31631]],[[12872,12879],"valid",[],"NV8"],[[12880,12880],"mapped",[112,116,101]],[[12881,12881],"mapped",[50,49]],[[12882,12882],"mapped",[50,50]],[[12883,12883],"mapped",[50,51]],[[12884,12884],"mapped",[50,52]],[[12885,12885],"mapped",[50,53]],[[12886,12886],"mapped",[50,54]],[[12887,12887],"mapped",[50,55]],[[12888,12888],"mapped",[50,56]],[[12889,12889],"mapped",[50,57]],[[12890,12890],"mapped",[51,48]],[[12891,12891],"mapped",[51,49]],[[12892,12892],"mapped",[51,50]],[[12893,12893],"mapped",[51,51]],[[12894,12894],"mapped",[51,52]],[[12895,12895],"mapped",[51,53]],[[12896,12896],"mapped",[4352]],[[12897,12897],"mapped",[4354]],[[12898,12898],"mapped",[4355]],[[12899,12899],"mapped",[4357]],[[12900,12900],"mapped",[4358]],[[12901,12901],"mapped",[4359]],[[12902,12902],"mapped",[4361]],[[12903,12903],"mapped",[4363]],[[12904,12904],"mapped",[4364]],[[12905,12905],"mapped",[4366]],[[12906,12906],"mapped",[4367]],[[12907,12907],"mapped",[4368]],[[12908,12908],"mapped",[4369]],[[12909,12909],"mapped",[4370]],[[12910,12910],"mapped",[44032]],[[12911,12911],"mapped",[45208]],[[12912,12912],"mapped",[45796]],[[12913,12913],"mapped",[46972]],[[12914,12914],"mapped",[47560]],[[12915,12915],"mapped",[48148]],[[12916,12916],"mapped",[49324]],[[12917,12917],"mapped",[50500]],[[12918,12918],"mapped",[51088]],[[12919,12919],"mapped",[52264]],[[12920,12920],"mapped",[52852]],[[12921,12921],"mapped",[53440]],[[12922,12922],"mapped",[54028]],[[12923,12923],"mapped",[54616]],[[12924,12924],"mapped",[52280,44256]],[[12925,12925],"mapped",[51452,51032]],[[12926,12926],"mapped",[50864]],[[12927,12927],"valid",[],"NV8"],[[12928,12928],"mapped",[19968]],[[12929,12929],"mapped",[20108]],[[12930,12930],"mapped",[19977]],[[12931,12931],"mapped",[22235]],[[12932,12932],"mapped",[20116]],[[12933,12933],"mapped",[20845]],[[12934,12934],"mapped",[19971]],[[12935,12935],"mapped",[20843]],[[12936,12936],"mapped",[20061]],[[12937,12937],"mapped",[21313]],[[12938,12938],"mapped",[26376]],[[12939,12939],"mapped",[28779]],[[12940,12940],"mapped",[27700]],[[12941,12941],"mapped",[26408]],[[12942,12942],"mapped",[37329]],[[12943,12943],"mapped",[22303]],[[12944,12944],"mapped",[26085]],[[12945,12945],"mapped",[26666]],[[12946,12946],"mapped",[26377]],[[12947,12947],"mapped",[31038]],[[12948,12948],"mapped",[21517]],[[12949,12949],"mapped",[29305]],[[12950,12950],"mapped",[36001]],[[12951,12951],"mapped",[31069]],[[12952,12952],"mapped",[21172]],[[12953,12953],"mapped",[31192]],[[12954,12954],"mapped",[30007]],[[12955,12955],"mapped",[22899]],[[12956,12956],"mapped",[36969]],[[12957,12957],"mapped",[20778]],[[12958,12958],"mapped",[21360]],[[12959,12959],"mapped",[27880]],[[12960,12960],"mapped",[38917]],[[12961,12961],"mapped",[20241]],[[12962,12962],"mapped",[20889]],[[12963,12963],"mapped",[27491]],[[12964,12964],"mapped",[19978]],[[12965,12965],"mapped",[20013]],[[12966,12966],"mapped",[19979]],[[12967,12967],"mapped",[24038]],[[12968,12968],"mapped",[21491]],[[12969,12969],"mapped",[21307]],[[12970,12970],"mapped",[23447]],[[12971,12971],"mapped",[23398]],[[12972,12972],"mapped",[30435]],[[12973,12973],"mapped",[20225]],[[12974,12974],"mapped",[36039]],[[12975,12975],"mapped",[21332]],[[12976,12976],"mapped",[22812]],[[12977,12977],"mapped",[51,54]],[[12978,12978],"mapped",[51,55]],[[12979,12979],"mapped",[51,56]],[[12980,12980],"mapped",[51,57]],[[12981,12981],"mapped",[52,48]],[[12982,12982],"mapped",[52,49]],[[12983,12983],"mapped",[52,50]],[[12984,12984],"mapped",[52,51]],[[12985,12985],"mapped",[52,52]],[[12986,12986],"mapped",[52,53]],[[12987,12987],"mapped",[52,54]],[[12988,12988],"mapped",[52,55]],[[12989,12989],"mapped",[52,56]],[[12990,12990],"mapped",[52,57]],[[12991,12991],"mapped",[53,48]],[[12992,12992],"mapped",[49,26376]],[[12993,12993],"mapped",[50,26376]],[[12994,12994],"mapped",[51,26376]],[[12995,12995],"mapped",[52,26376]],[[12996,12996],"mapped",[53,26376]],[[12997,12997],"mapped",[54,26376]],[[12998,12998],"mapped",[55,26376]],[[12999,12999],"mapped",[56,26376]],[[13000,13000],"mapped",[57,26376]],[[13001,13001],"mapped",[49,48,26376]],[[13002,13002],"mapped",[49,49,26376]],[[13003,13003],"mapped",[49,50,26376]],[[13004,13004],"mapped",[104,103]],[[13005,13005],"mapped",[101,114,103]],[[13006,13006],"mapped",[101,118]],[[13007,13007],"mapped",[108,116,100]],[[13008,13008],"mapped",[12450]],[[13009,13009],"mapped",[12452]],[[13010,13010],"mapped",[12454]],[[13011,13011],"mapped",[12456]],[[13012,13012],"mapped",[12458]],[[13013,13013],"mapped",[12459]],[[13014,13014],"mapped",[12461]],[[13015,13015],"mapped",[12463]],[[13016,13016],"mapped",[12465]],[[13017,13017],"mapped",[12467]],[[13018,13018],"mapped",[12469]],[[13019,13019],"mapped",[12471]],[[13020,13020],"mapped",[12473]],[[13021,13021],"mapped",[12475]],[[13022,13022],"mapped",[12477]],[[13023,13023],"mapped",[12479]],[[13024,13024],"mapped",[12481]],[[13025,13025],"mapped",[12484]],[[13026,13026],"mapped",[12486]],[[13027,13027],"mapped",[12488]],[[13028,13028],"mapped",[12490]],[[13029,13029],"mapped",[12491]],[[13030,13030],"mapped",[12492]],[[13031,13031],"mapped",[12493]],[[13032,13032],"mapped",[12494]],[[13033,13033],"mapped",[12495]],[[13034,13034],"mapped",[12498]],[[13035,13035],"mapped",[12501]],[[13036,13036],"mapped",[12504]],[[13037,13037],"mapped",[12507]],[[13038,13038],"mapped",[12510]],[[13039,13039],"mapped",[12511]],[[13040,13040],"mapped",[12512]],[[13041,13041],"mapped",[12513]],[[13042,13042],"mapped",[12514]],[[13043,13043],"mapped",[12516]],[[13044,13044],"mapped",[12518]],[[13045,13045],"mapped",[12520]],[[13046,13046],"mapped",[12521]],[[13047,13047],"mapped",[12522]],[[13048,13048],"mapped",[12523]],[[13049,13049],"mapped",[12524]],[[13050,13050],"mapped",[12525]],[[13051,13051],"mapped",[12527]],[[13052,13052],"mapped",[12528]],[[13053,13053],"mapped",[12529]],[[13054,13054],"mapped",[12530]],[[13055,13055],"disallowed"],[[13056,13056],"mapped",[12450,12497,12540,12488]],[[13057,13057],"mapped",[12450,12523,12501,12449]],[[13058,13058],"mapped",[12450,12531,12506,12450]],[[13059,13059],"mapped",[12450,12540,12523]],[[13060,13060],"mapped",[12452,12491,12531,12464]],[[13061,13061],"mapped",[12452,12531,12481]],[[13062,13062],"mapped",[12454,12457,12531]],[[13063,13063],"mapped",[12456,12473,12463,12540,12489]],[[13064,13064],"mapped",[12456,12540,12459,12540]],[[13065,13065],"mapped",[12458,12531,12473]],[[13066,13066],"mapped",[12458,12540,12512]],[[13067,13067],"mapped",[12459,12452,12522]],[[13068,13068],"mapped",[12459,12521,12483,12488]],[[13069,13069],"mapped",[12459,12525,12522,12540]],[[13070,13070],"mapped",[12460,12525,12531]],[[13071,13071],"mapped",[12460,12531,12510]],[[13072,13072],"mapped",[12462,12460]],[[13073,13073],"mapped",[12462,12491,12540]],[[13074,13074],"mapped",[12461,12517,12522,12540]],[[13075,13075],"mapped",[12462,12523,12480,12540]],[[13076,13076],"mapped",[12461,12525]],[[13077,13077],"mapped",[12461,12525,12464,12521,12512]],[[13078,13078],"mapped",[12461,12525,12513,12540,12488,12523]],[[13079,13079],"mapped",[12461,12525,12527,12483,12488]],[[13080,13080],"mapped",[12464,12521,12512]],[[13081,13081],"mapped",[12464,12521,12512,12488,12531]],[[13082,13082],"mapped",[12463,12523,12476,12452,12525]],[[13083,13083],"mapped",[12463,12525,12540,12493]],[[13084,13084],"mapped",[12465,12540,12473]],[[13085,13085],"mapped",[12467,12523,12490]],[[13086,13086],"mapped",[12467,12540,12509]],[[13087,13087],"mapped",[12469,12452,12463,12523]],[[13088,13088],"mapped",[12469,12531,12481,12540,12512]],[[13089,13089],"mapped",[12471,12522,12531,12464]],[[13090,13090],"mapped",[12475,12531,12481]],[[13091,13091],"mapped",[12475,12531,12488]],[[13092,13092],"mapped",[12480,12540,12473]],[[13093,13093],"mapped",[12487,12471]],[[13094,13094],"mapped",[12489,12523]],[[13095,13095],"mapped",[12488,12531]],[[13096,13096],"mapped",[12490,12494]],[[13097,13097],"mapped",[12494,12483,12488]],[[13098,13098],"mapped",[12495,12452,12484]],[[13099,13099],"mapped",[12497,12540,12475,12531,12488]],[[13100,13100],"mapped",[12497,12540,12484]],[[13101,13101],"mapped",[12496,12540,12524,12523]],[[13102,13102],"mapped",[12500,12450,12473,12488,12523]],[[13103,13103],"mapped",[12500,12463,12523]],[[13104,13104],"mapped",[12500,12467]],[[13105,13105],"mapped",[12499,12523]],[[13106,13106],"mapped",[12501,12449,12521,12483,12489]],[[13107,13107],"mapped",[12501,12451,12540,12488]],[[13108,13108],"mapped",[12502,12483,12471,12455,12523]],[[13109,13109],"mapped",[12501,12521,12531]],[[13110,13110],"mapped",[12504,12463,12479,12540,12523]],[[13111,13111],"mapped",[12506,12477]],[[13112,13112],"mapped",[12506,12491,12498]],[[13113,13113],"mapped",[12504,12523,12484]],[[13114,13114],"mapped",[12506,12531,12473]],[[13115,13115],"mapped",[12506,12540,12472]],[[13116,13116],"mapped",[12505,12540,12479]],[[13117,13117],"mapped",[12509,12452,12531,12488]],[[13118,13118],"mapped",[12508,12523,12488]],[[13119,13119],"mapped",[12507,12531]],[[13120,13120],"mapped",[12509,12531,12489]],[[13121,13121],"mapped",[12507,12540,12523]],[[13122,13122],"mapped",[12507,12540,12531]],[[13123,13123],"mapped",[12510,12452,12463,12525]],[[13124,13124],"mapped",[12510,12452,12523]],[[13125,13125],"mapped",[12510,12483,12495]],[[13126,13126],"mapped",[12510,12523,12463]],[[13127,13127],"mapped",[12510,12531,12471,12519,12531]],[[13128,13128],"mapped",[12511,12463,12525,12531]],[[13129,13129],"mapped",[12511,12522]],[[13130,13130],"mapped",[12511,12522,12496,12540,12523]],[[13131,13131],"mapped",[12513,12460]],[[13132,13132],"mapped",[12513,12460,12488,12531]],[[13133,13133],"mapped",[12513,12540,12488,12523]],[[13134,13134],"mapped",[12516,12540,12489]],[[13135,13135],"mapped",[12516,12540,12523]],[[13136,13136],"mapped",[12518,12450,12531]],[[13137,13137],"mapped",[12522,12483,12488,12523]],[[13138,13138],"mapped",[12522,12521]],[[13139,13139],"mapped",[12523,12500,12540]],[[13140,13140],"mapped",[12523,12540,12502,12523]],[[13141,13141],"mapped",[12524,12512]],[[13142,13142],"mapped",[12524,12531,12488,12466,12531]],[[13143,13143],"mapped",[12527,12483,12488]],[[13144,13144],"mapped",[48,28857]],[[13145,13145],"mapped",[49,28857]],[[13146,13146],"mapped",[50,28857]],[[13147,13147],"mapped",[51,28857]],[[13148,13148],"mapped",[52,28857]],[[13149,13149],"mapped",[53,28857]],[[13150,13150],"mapped",[54,28857]],[[13151,13151],"mapped",[55,28857]],[[13152,13152],"mapped",[56,28857]],[[13153,13153],"mapped",[57,28857]],[[13154,13154],"mapped",[49,48,28857]],[[13155,13155],"mapped",[49,49,28857]],[[13156,13156],"mapped",[49,50,28857]],[[13157,13157],"mapped",[49,51,28857]],[[13158,13158],"mapped",[49,52,28857]],[[13159,13159],"mapped",[49,53,28857]],[[13160,13160],"mapped",[49,54,28857]],[[13161,13161],"mapped",[49,55,28857]],[[13162,13162],"mapped",[49,56,28857]],[[13163,13163],"mapped",[49,57,28857]],[[13164,13164],"mapped",[50,48,28857]],[[13165,13165],"mapped",[50,49,28857]],[[13166,13166],"mapped",[50,50,28857]],[[13167,13167],"mapped",[50,51,28857]],[[13168,13168],"mapped",[50,52,28857]],[[13169,13169],"mapped",[104,112,97]],[[13170,13170],"mapped",[100,97]],[[13171,13171],"mapped",[97,117]],[[13172,13172],"mapped",[98,97,114]],[[13173,13173],"mapped",[111,118]],[[13174,13174],"mapped",[112,99]],[[13175,13175],"mapped",[100,109]],[[13176,13176],"mapped",[100,109,50]],[[13177,13177],"mapped",[100,109,51]],[[13178,13178],"mapped",[105,117]],[[13179,13179],"mapped",[24179,25104]],[[13180,13180],"mapped",[26157,21644]],[[13181,13181],"mapped",[22823,27491]],[[13182,13182],"mapped",[26126,27835]],[[13183,13183],"mapped",[26666,24335,20250,31038]],[[13184,13184],"mapped",[112,97]],[[13185,13185],"mapped",[110,97]],[[13186,13186],"mapped",[956,97]],[[13187,13187],"mapped",[109,97]],[[13188,13188],"mapped",[107,97]],[[13189,13189],"mapped",[107,98]],[[13190,13190],"mapped",[109,98]],[[13191,13191],"mapped",[103,98]],[[13192,13192],"mapped",[99,97,108]],[[13193,13193],"mapped",[107,99,97,108]],[[13194,13194],"mapped",[112,102]],[[13195,13195],"mapped",[110,102]],[[13196,13196],"mapped",[956,102]],[[13197,13197],"mapped",[956,103]],[[13198,13198],"mapped",[109,103]],[[13199,13199],"mapped",[107,103]],[[13200,13200],"mapped",[104,122]],[[13201,13201],"mapped",[107,104,122]],[[13202,13202],"mapped",[109,104,122]],[[13203,13203],"mapped",[103,104,122]],[[13204,13204],"mapped",[116,104,122]],[[13205,13205],"mapped",[956,108]],[[13206,13206],"mapped",[109,108]],[[13207,13207],"mapped",[100,108]],[[13208,13208],"mapped",[107,108]],[[13209,13209],"mapped",[102,109]],[[13210,13210],"mapped",[110,109]],[[13211,13211],"mapped",[956,109]],[[13212,13212],"mapped",[109,109]],[[13213,13213],"mapped",[99,109]],[[13214,13214],"mapped",[107,109]],[[13215,13215],"mapped",[109,109,50]],[[13216,13216],"mapped",[99,109,50]],[[13217,13217],"mapped",[109,50]],[[13218,13218],"mapped",[107,109,50]],[[13219,13219],"mapped",[109,109,51]],[[13220,13220],"mapped",[99,109,51]],[[13221,13221],"mapped",[109,51]],[[13222,13222],"mapped",[107,109,51]],[[13223,13223],"mapped",[109,8725,115]],[[13224,13224],"mapped",[109,8725,115,50]],[[13225,13225],"mapped",[112,97]],[[13226,13226],"mapped",[107,112,97]],[[13227,13227],"mapped",[109,112,97]],[[13228,13228],"mapped",[103,112,97]],[[13229,13229],"mapped",[114,97,100]],[[13230,13230],"mapped",[114,97,100,8725,115]],[[13231,13231],"mapped",[114,97,100,8725,115,50]],[[13232,13232],"mapped",[112,115]],[[13233,13233],"mapped",[110,115]],[[13234,13234],"mapped",[956,115]],[[13235,13235],"mapped",[109,115]],[[13236,13236],"mapped",[112,118]],[[13237,13237],"mapped",[110,118]],[[13238,13238],"mapped",[956,118]],[[13239,13239],"mapped",[109,118]],[[13240,13240],"mapped",[107,118]],[[13241,13241],"mapped",[109,118]],[[13242,13242],"mapped",[112,119]],[[13243,13243],"mapped",[110,119]],[[13244,13244],"mapped",[956,119]],[[13245,13245],"mapped",[109,119]],[[13246,13246],"mapped",[107,119]],[[13247,13247],"mapped",[109,119]],[[13248,13248],"mapped",[107,969]],[[13249,13249],"mapped",[109,969]],[[13250,13250],"disallowed"],[[13251,13251],"mapped",[98,113]],[[13252,13252],"mapped",[99,99]],[[13253,13253],"mapped",[99,100]],[[13254,13254],"mapped",[99,8725,107,103]],[[13255,13255],"disallowed"],[[13256,13256],"mapped",[100,98]],[[13257,13257],"mapped",[103,121]],[[13258,13258],"mapped",[104,97]],[[13259,13259],"mapped",[104,112]],[[13260,13260],"mapped",[105,110]],[[13261,13261],"mapped",[107,107]],[[13262,13262],"mapped",[107,109]],[[13263,13263],"mapped",[107,116]],[[13264,13264],"mapped",[108,109]],[[13265,13265],"mapped",[108,110]],[[13266,13266],"mapped",[108,111,103]],[[13267,13267],"mapped",[108,120]],[[13268,13268],"mapped",[109,98]],[[13269,13269],"mapped",[109,105,108]],[[13270,13270],"mapped",[109,111,108]],[[13271,13271],"mapped",[112,104]],[[13272,13272],"disallowed"],[[13273,13273],"mapped",[112,112,109]],[[13274,13274],"mapped",[112,114]],[[13275,13275],"mapped",[115,114]],[[13276,13276],"mapped",[115,118]],[[13277,13277],"mapped",[119,98]],[[13278,13278],"mapped",[118,8725,109]],[[13279,13279],"mapped",[97,8725,109]],[[13280,13280],"mapped",[49,26085]],[[13281,13281],"mapped",[50,26085]],[[13282,13282],"mapped",[51,26085]],[[13283,13283],"mapped",[52,26085]],[[13284,13284],"mapped",[53,26085]],[[13285,13285],"mapped",[54,26085]],[[13286,13286],"mapped",[55,26085]],[[13287,13287],"mapped",[56,26085]],[[13288,13288],"mapped",[57,26085]],[[13289,13289],"mapped",[49,48,26085]],[[13290,13290],"mapped",[49,49,26085]],[[13291,13291],"mapped",[49,50,26085]],[[13292,13292],"mapped",[49,51,26085]],[[13293,13293],"mapped",[49,52,26085]],[[13294,13294],"mapped",[49,53,26085]],[[13295,13295],"mapped",[49,54,26085]],[[13296,13296],"mapped",[49,55,26085]],[[13297,13297],"mapped",[49,56,26085]],[[13298,13298],"mapped",[49,57,26085]],[[13299,13299],"mapped",[50,48,26085]],[[13300,13300],"mapped",[50,49,26085]],[[13301,13301],"mapped",[50,50,26085]],[[13302,13302],"mapped",[50,51,26085]],[[13303,13303],"mapped",[50,52,26085]],[[13304,13304],"mapped",[50,53,26085]],[[13305,13305],"mapped",[50,54,26085]],[[13306,13306],"mapped",[50,55,26085]],[[13307,13307],"mapped",[50,56,26085]],[[13308,13308],"mapped",[50,57,26085]],[[13309,13309],"mapped",[51,48,26085]],[[13310,13310],"mapped",[51,49,26085]],[[13311,13311],"mapped",[103,97,108]],[[13312,19893],"valid"],[[19894,19903],"disallowed"],[[19904,19967],"valid",[],"NV8"],[[19968,40869],"valid"],[[40870,40891],"valid"],[[40892,40899],"valid"],[[40900,40907],"valid"],[[40908,40908],"valid"],[[40909,40917],"valid"],[[40918,40959],"disallowed"],[[40960,42124],"valid"],[[42125,42127],"disallowed"],[[42128,42145],"valid",[],"NV8"],[[42146,42147],"valid",[],"NV8"],[[42148,42163],"valid",[],"NV8"],[[42164,42164],"valid",[],"NV8"],[[42165,42176],"valid",[],"NV8"],[[42177,42177],"valid",[],"NV8"],[[42178,42180],"valid",[],"NV8"],[[42181,42181],"valid",[],"NV8"],[[42182,42182],"valid",[],"NV8"],[[42183,42191],"disallowed"],[[42192,42237],"valid"],[[42238,42239],"valid",[],"NV8"],[[42240,42508],"valid"],[[42509,42511],"valid",[],"NV8"],[[42512,42539],"valid"],[[42540,42559],"disallowed"],[[42560,42560],"mapped",[42561]],[[42561,42561],"valid"],[[42562,42562],"mapped",[42563]],[[42563,42563],"valid"],[[42564,42564],"mapped",[42565]],[[42565,42565],"valid"],[[42566,42566],"mapped",[42567]],[[42567,42567],"valid"],[[42568,42568],"mapped",[42569]],[[42569,42569],"valid"],[[42570,42570],"mapped",[42571]],[[42571,42571],"valid"],[[42572,42572],"mapped",[42573]],[[42573,42573],"valid"],[[42574,42574],"mapped",[42575]],[[42575,42575],"valid"],[[42576,42576],"mapped",[42577]],[[42577,42577],"valid"],[[42578,42578],"mapped",[42579]],[[42579,42579],"valid"],[[42580,42580],"mapped",[42581]],[[42581,42581],"valid"],[[42582,42582],"mapped",[42583]],[[42583,42583],"valid"],[[42584,42584],"mapped",[42585]],[[42585,42585],"valid"],[[42586,42586],"mapped",[42587]],[[42587,42587],"valid"],[[42588,42588],"mapped",[42589]],[[42589,42589],"valid"],[[42590,42590],"mapped",[42591]],[[42591,42591],"valid"],[[42592,42592],"mapped",[42593]],[[42593,42593],"valid"],[[42594,42594],"mapped",[42595]],[[42595,42595],"valid"],[[42596,42596],"mapped",[42597]],[[42597,42597],"valid"],[[42598,42598],"mapped",[42599]],[[42599,42599],"valid"],[[42600,42600],"mapped",[42601]],[[42601,42601],"valid"],[[42602,42602],"mapped",[42603]],[[42603,42603],"valid"],[[42604,42604],"mapped",[42605]],[[42605,42607],"valid"],[[42608,42611],"valid",[],"NV8"],[[42612,42619],"valid"],[[42620,42621],"valid"],[[42622,42622],"valid",[],"NV8"],[[42623,42623],"valid"],[[42624,42624],"mapped",[42625]],[[42625,42625],"valid"],[[42626,42626],"mapped",[42627]],[[42627,42627],"valid"],[[42628,42628],"mapped",[42629]],[[42629,42629],"valid"],[[42630,42630],"mapped",[42631]],[[42631,42631],"valid"],[[42632,42632],"mapped",[42633]],[[42633,42633],"valid"],[[42634,42634],"mapped",[42635]],[[42635,42635],"valid"],[[42636,42636],"mapped",[42637]],[[42637,42637],"valid"],[[42638,42638],"mapped",[42639]],[[42639,42639],"valid"],[[42640,42640],"mapped",[42641]],[[42641,42641],"valid"],[[42642,42642],"mapped",[42643]],[[42643,42643],"valid"],[[42644,42644],"mapped",[42645]],[[42645,42645],"valid"],[[42646,42646],"mapped",[42647]],[[42647,42647],"valid"],[[42648,42648],"mapped",[42649]],[[42649,42649],"valid"],[[42650,42650],"mapped",[42651]],[[42651,42651],"valid"],[[42652,42652],"mapped",[1098]],[[42653,42653],"mapped",[1100]],[[42654,42654],"valid"],[[42655,42655],"valid"],[[42656,42725],"valid"],[[42726,42735],"valid",[],"NV8"],[[42736,42737],"valid"],[[42738,42743],"valid",[],"NV8"],[[42744,42751],"disallowed"],[[42752,42774],"valid",[],"NV8"],[[42775,42778],"valid"],[[42779,42783],"valid"],[[42784,42785],"valid",[],"NV8"],[[42786,42786],"mapped",[42787]],[[42787,42787],"valid"],[[42788,42788],"mapped",[42789]],[[42789,42789],"valid"],[[42790,42790],"mapped",[42791]],[[42791,42791],"valid"],[[42792,42792],"mapped",[42793]],[[42793,42793],"valid"],[[42794,42794],"mapped",[42795]],[[42795,42795],"valid"],[[42796,42796],"mapped",[42797]],[[42797,42797],"valid"],[[42798,42798],"mapped",[42799]],[[42799,42801],"valid"],[[42802,42802],"mapped",[42803]],[[42803,42803],"valid"],[[42804,42804],"mapped",[42805]],[[42805,42805],"valid"],[[42806,42806],"mapped",[42807]],[[42807,42807],"valid"],[[42808,42808],"mapped",[42809]],[[42809,42809],"valid"],[[42810,42810],"mapped",[42811]],[[42811,42811],"valid"],[[42812,42812],"mapped",[42813]],[[42813,42813],"valid"],[[42814,42814],"mapped",[42815]],[[42815,42815],"valid"],[[42816,42816],"mapped",[42817]],[[42817,42817],"valid"],[[42818,42818],"mapped",[42819]],[[42819,42819],"valid"],[[42820,42820],"mapped",[42821]],[[42821,42821],"valid"],[[42822,42822],"mapped",[42823]],[[42823,42823],"valid"],[[42824,42824],"mapped",[42825]],[[42825,42825],"valid"],[[42826,42826],"mapped",[42827]],[[42827,42827],"valid"],[[42828,42828],"mapped",[42829]],[[42829,42829],"valid"],[[42830,42830],"mapped",[42831]],[[42831,42831],"valid"],[[42832,42832],"mapped",[42833]],[[42833,42833],"valid"],[[42834,42834],"mapped",[42835]],[[42835,42835],"valid"],[[42836,42836],"mapped",[42837]],[[42837,42837],"valid"],[[42838,42838],"mapped",[42839]],[[42839,42839],"valid"],[[42840,42840],"mapped",[42841]],[[42841,42841],"valid"],[[42842,42842],"mapped",[42843]],[[42843,42843],"valid"],[[42844,42844],"mapped",[42845]],[[42845,42845],"valid"],[[42846,42846],"mapped",[42847]],[[42847,42847],"valid"],[[42848,42848],"mapped",[42849]],[[42849,42849],"valid"],[[42850,42850],"mapped",[42851]],[[42851,42851],"valid"],[[42852,42852],"mapped",[42853]],[[42853,42853],"valid"],[[42854,42854],"mapped",[42855]],[[42855,42855],"valid"],[[42856,42856],"mapped",[42857]],[[42857,42857],"valid"],[[42858,42858],"mapped",[42859]],[[42859,42859],"valid"],[[42860,42860],"mapped",[42861]],[[42861,42861],"valid"],[[42862,42862],"mapped",[42863]],[[42863,42863],"valid"],[[42864,42864],"mapped",[42863]],[[42865,42872],"valid"],[[42873,42873],"mapped",[42874]],[[42874,42874],"valid"],[[42875,42875],"mapped",[42876]],[[42876,42876],"valid"],[[42877,42877],"mapped",[7545]],[[42878,42878],"mapped",[42879]],[[42879,42879],"valid"],[[42880,42880],"mapped",[42881]],[[42881,42881],"valid"],[[42882,42882],"mapped",[42883]],[[42883,42883],"valid"],[[42884,42884],"mapped",[42885]],[[42885,42885],"valid"],[[42886,42886],"mapped",[42887]],[[42887,42888],"valid"],[[42889,42890],"valid",[],"NV8"],[[42891,42891],"mapped",[42892]],[[42892,42892],"valid"],[[42893,42893],"mapped",[613]],[[42894,42894],"valid"],[[42895,42895],"valid"],[[42896,42896],"mapped",[42897]],[[42897,42897],"valid"],[[42898,42898],"mapped",[42899]],[[42899,42899],"valid"],[[42900,42901],"valid"],[[42902,42902],"mapped",[42903]],[[42903,42903],"valid"],[[42904,42904],"mapped",[42905]],[[42905,42905],"valid"],[[42906,42906],"mapped",[42907]],[[42907,42907],"valid"],[[42908,42908],"mapped",[42909]],[[42909,42909],"valid"],[[42910,42910],"mapped",[42911]],[[42911,42911],"valid"],[[42912,42912],"mapped",[42913]],[[42913,42913],"valid"],[[42914,42914],"mapped",[42915]],[[42915,42915],"valid"],[[42916,42916],"mapped",[42917]],[[42917,42917],"valid"],[[42918,42918],"mapped",[42919]],[[42919,42919],"valid"],[[42920,42920],"mapped",[42921]],[[42921,42921],"valid"],[[42922,42922],"mapped",[614]],[[42923,42923],"mapped",[604]],[[42924,42924],"mapped",[609]],[[42925,42925],"mapped",[620]],[[42926,42927],"disallowed"],[[42928,42928],"mapped",[670]],[[42929,42929],"mapped",[647]],[[42930,42930],"mapped",[669]],[[42931,42931],"mapped",[43859]],[[42932,42932],"mapped",[42933]],[[42933,42933],"valid"],[[42934,42934],"mapped",[42935]],[[42935,42935],"valid"],[[42936,42998],"disallowed"],[[42999,42999],"valid"],[[43000,43000],"mapped",[295]],[[43001,43001],"mapped",[339]],[[43002,43002],"valid"],[[43003,43007],"valid"],[[43008,43047],"valid"],[[43048,43051],"valid",[],"NV8"],[[43052,43055],"disallowed"],[[43056,43065],"valid",[],"NV8"],[[43066,43071],"disallowed"],[[43072,43123],"valid"],[[43124,43127],"valid",[],"NV8"],[[43128,43135],"disallowed"],[[43136,43204],"valid"],[[43205,43213],"disallowed"],[[43214,43215],"valid",[],"NV8"],[[43216,43225],"valid"],[[43226,43231],"disallowed"],[[43232,43255],"valid"],[[43256,43258],"valid",[],"NV8"],[[43259,43259],"valid"],[[43260,43260],"valid",[],"NV8"],[[43261,43261],"valid"],[[43262,43263],"disallowed"],[[43264,43309],"valid"],[[43310,43311],"valid",[],"NV8"],[[43312,43347],"valid"],[[43348,43358],"disallowed"],[[43359,43359],"valid",[],"NV8"],[[43360,43388],"valid",[],"NV8"],[[43389,43391],"disallowed"],[[43392,43456],"valid"],[[43457,43469],"valid",[],"NV8"],[[43470,43470],"disallowed"],[[43471,43481],"valid"],[[43482,43485],"disallowed"],[[43486,43487],"valid",[],"NV8"],[[43488,43518],"valid"],[[43519,43519],"disallowed"],[[43520,43574],"valid"],[[43575,43583],"disallowed"],[[43584,43597],"valid"],[[43598,43599],"disallowed"],[[43600,43609],"valid"],[[43610,43611],"disallowed"],[[43612,43615],"valid",[],"NV8"],[[43616,43638],"valid"],[[43639,43641],"valid",[],"NV8"],[[43642,43643],"valid"],[[43644,43647],"valid"],[[43648,43714],"valid"],[[43715,43738],"disallowed"],[[43739,43741],"valid"],[[43742,43743],"valid",[],"NV8"],[[43744,43759],"valid"],[[43760,43761],"valid",[],"NV8"],[[43762,43766],"valid"],[[43767,43776],"disallowed"],[[43777,43782],"valid"],[[43783,43784],"disallowed"],[[43785,43790],"valid"],[[43791,43792],"disallowed"],[[43793,43798],"valid"],[[43799,43807],"disallowed"],[[43808,43814],"valid"],[[43815,43815],"disallowed"],[[43816,43822],"valid"],[[43823,43823],"disallowed"],[[43824,43866],"valid"],[[43867,43867],"valid",[],"NV8"],[[43868,43868],"mapped",[42791]],[[43869,43869],"mapped",[43831]],[[43870,43870],"mapped",[619]],[[43871,43871],"mapped",[43858]],[[43872,43875],"valid"],[[43876,43877],"valid"],[[43878,43887],"disallowed"],[[43888,43888],"mapped",[5024]],[[43889,43889],"mapped",[5025]],[[43890,43890],"mapped",[5026]],[[43891,43891],"mapped",[5027]],[[43892,43892],"mapped",[5028]],[[43893,43893],"mapped",[5029]],[[43894,43894],"mapped",[5030]],[[43895,43895],"mapped",[5031]],[[43896,43896],"mapped",[5032]],[[43897,43897],"mapped",[5033]],[[43898,43898],"mapped",[5034]],[[43899,43899],"mapped",[5035]],[[43900,43900],"mapped",[5036]],[[43901,43901],"mapped",[5037]],[[43902,43902],"mapped",[5038]],[[43903,43903],"mapped",[5039]],[[43904,43904],"mapped",[5040]],[[43905,43905],"mapped",[5041]],[[43906,43906],"mapped",[5042]],[[43907,43907],"mapped",[5043]],[[43908,43908],"mapped",[5044]],[[43909,43909],"mapped",[5045]],[[43910,43910],"mapped",[5046]],[[43911,43911],"mapped",[5047]],[[43912,43912],"mapped",[5048]],[[43913,43913],"mapped",[5049]],[[43914,43914],"mapped",[5050]],[[43915,43915],"mapped",[5051]],[[43916,43916],"mapped",[5052]],[[43917,43917],"mapped",[5053]],[[43918,43918],"mapped",[5054]],[[43919,43919],"mapped",[5055]],[[43920,43920],"mapped",[5056]],[[43921,43921],"mapped",[5057]],[[43922,43922],"mapped",[5058]],[[43923,43923],"mapped",[5059]],[[43924,43924],"mapped",[5060]],[[43925,43925],"mapped",[5061]],[[43926,43926],"mapped",[5062]],[[43927,43927],"mapped",[5063]],[[43928,43928],"mapped",[5064]],[[43929,43929],"mapped",[5065]],[[43930,43930],"mapped",[5066]],[[43931,43931],"mapped",[5067]],[[43932,43932],"mapped",[5068]],[[43933,43933],"mapped",[5069]],[[43934,43934],"mapped",[5070]],[[43935,43935],"mapped",[5071]],[[43936,43936],"mapped",[5072]],[[43937,43937],"mapped",[5073]],[[43938,43938],"mapped",[5074]],[[43939,43939],"mapped",[5075]],[[43940,43940],"mapped",[5076]],[[43941,43941],"mapped",[5077]],[[43942,43942],"mapped",[5078]],[[43943,43943],"mapped",[5079]],[[43944,43944],"mapped",[5080]],[[43945,43945],"mapped",[5081]],[[43946,43946],"mapped",[5082]],[[43947,43947],"mapped",[5083]],[[43948,43948],"mapped",[5084]],[[43949,43949],"mapped",[5085]],[[43950,43950],"mapped",[5086]],[[43951,43951],"mapped",[5087]],[[43952,43952],"mapped",[5088]],[[43953,43953],"mapped",[5089]],[[43954,43954],"mapped",[5090]],[[43955,43955],"mapped",[5091]],[[43956,43956],"mapped",[5092]],[[43957,43957],"mapped",[5093]],[[43958,43958],"mapped",[5094]],[[43959,43959],"mapped",[5095]],[[43960,43960],"mapped",[5096]],[[43961,43961],"mapped",[5097]],[[43962,43962],"mapped",[5098]],[[43963,43963],"mapped",[5099]],[[43964,43964],"mapped",[5100]],[[43965,43965],"mapped",[5101]],[[43966,43966],"mapped",[5102]],[[43967,43967],"mapped",[5103]],[[43968,44010],"valid"],[[44011,44011],"valid",[],"NV8"],[[44012,44013],"valid"],[[44014,44015],"disallowed"],[[44016,44025],"valid"],[[44026,44031],"disallowed"],[[44032,55203],"valid"],[[55204,55215],"disallowed"],[[55216,55238],"valid",[],"NV8"],[[55239,55242],"disallowed"],[[55243,55291],"valid",[],"NV8"],[[55292,55295],"disallowed"],[[55296,57343],"disallowed"],[[57344,63743],"disallowed"],[[63744,63744],"mapped",[35912]],[[63745,63745],"mapped",[26356]],[[63746,63746],"mapped",[36554]],[[63747,63747],"mapped",[36040]],[[63748,63748],"mapped",[28369]],[[63749,63749],"mapped",[20018]],[[63750,63750],"mapped",[21477]],[[63751,63752],"mapped",[40860]],[[63753,63753],"mapped",[22865]],[[63754,63754],"mapped",[37329]],[[63755,63755],"mapped",[21895]],[[63756,63756],"mapped",[22856]],[[63757,63757],"mapped",[25078]],[[63758,63758],"mapped",[30313]],[[63759,63759],"mapped",[32645]],[[63760,63760],"mapped",[34367]],[[63761,63761],"mapped",[34746]],[[63762,63762],"mapped",[35064]],[[63763,63763],"mapped",[37007]],[[63764,63764],"mapped",[27138]],[[63765,63765],"mapped",[27931]],[[63766,63766],"mapped",[28889]],[[63767,63767],"mapped",[29662]],[[63768,63768],"mapped",[33853]],[[63769,63769],"mapped",[37226]],[[63770,63770],"mapped",[39409]],[[63771,63771],"mapped",[20098]],[[63772,63772],"mapped",[21365]],[[63773,63773],"mapped",[27396]],[[63774,63774],"mapped",[29211]],[[63775,63775],"mapped",[34349]],[[63776,63776],"mapped",[40478]],[[63777,63777],"mapped",[23888]],[[63778,63778],"mapped",[28651]],[[63779,63779],"mapped",[34253]],[[63780,63780],"mapped",[35172]],[[63781,63781],"mapped",[25289]],[[63782,63782],"mapped",[33240]],[[63783,63783],"mapped",[34847]],[[63784,63784],"mapped",[24266]],[[63785,63785],"mapped",[26391]],[[63786,63786],"mapped",[28010]],[[63787,63787],"mapped",[29436]],[[63788,63788],"mapped",[37070]],[[63789,63789],"mapped",[20358]],[[63790,63790],"mapped",[20919]],[[63791,63791],"mapped",[21214]],[[63792,63792],"mapped",[25796]],[[63793,63793],"mapped",[27347]],[[63794,63794],"mapped",[29200]],[[63795,63795],"mapped",[30439]],[[63796,63796],"mapped",[32769]],[[63797,63797],"mapped",[34310]],[[63798,63798],"mapped",[34396]],[[63799,63799],"mapped",[36335]],[[63800,63800],"mapped",[38706]],[[63801,63801],"mapped",[39791]],[[63802,63802],"mapped",[40442]],[[63803,63803],"mapped",[30860]],[[63804,63804],"mapped",[31103]],[[63805,63805],"mapped",[32160]],[[63806,63806],"mapped",[33737]],[[63807,63807],"mapped",[37636]],[[63808,63808],"mapped",[40575]],[[63809,63809],"mapped",[35542]],[[63810,63810],"mapped",[22751]],[[63811,63811],"mapped",[24324]],[[63812,63812],"mapped",[31840]],[[63813,63813],"mapped",[32894]],[[63814,63814],"mapped",[29282]],[[63815,63815],"mapped",[30922]],[[63816,63816],"mapped",[36034]],[[63817,63817],"mapped",[38647]],[[63818,63818],"mapped",[22744]],[[63819,63819],"mapped",[23650]],[[63820,63820],"mapped",[27155]],[[63821,63821],"mapped",[28122]],[[63822,63822],"mapped",[28431]],[[63823,63823],"mapped",[32047]],[[63824,63824],"mapped",[32311]],[[63825,63825],"mapped",[38475]],[[63826,63826],"mapped",[21202]],[[63827,63827],"mapped",[32907]],[[63828,63828],"mapped",[20956]],[[63829,63829],"mapped",[20940]],[[63830,63830],"mapped",[31260]],[[63831,63831],"mapped",[32190]],[[63832,63832],"mapped",[33777]],[[63833,63833],"mapped",[38517]],[[63834,63834],"mapped",[35712]],[[63835,63835],"mapped",[25295]],[[63836,63836],"mapped",[27138]],[[63837,63837],"mapped",[35582]],[[63838,63838],"mapped",[20025]],[[63839,63839],"mapped",[23527]],[[63840,63840],"mapped",[24594]],[[63841,63841],"mapped",[29575]],[[63842,63842],"mapped",[30064]],[[63843,63843],"mapped",[21271]],[[63844,63844],"mapped",[30971]],[[63845,63845],"mapped",[20415]],[[63846,63846],"mapped",[24489]],[[63847,63847],"mapped",[19981]],[[63848,63848],"mapped",[27852]],[[63849,63849],"mapped",[25976]],[[63850,63850],"mapped",[32034]],[[63851,63851],"mapped",[21443]],[[63852,63852],"mapped",[22622]],[[63853,63853],"mapped",[30465]],[[63854,63854],"mapped",[33865]],[[63855,63855],"mapped",[35498]],[[63856,63856],"mapped",[27578]],[[63857,63857],"mapped",[36784]],[[63858,63858],"mapped",[27784]],[[63859,63859],"mapped",[25342]],[[63860,63860],"mapped",[33509]],[[63861,63861],"mapped",[25504]],[[63862,63862],"mapped",[30053]],[[63863,63863],"mapped",[20142]],[[63864,63864],"mapped",[20841]],[[63865,63865],"mapped",[20937]],[[63866,63866],"mapped",[26753]],[[63867,63867],"mapped",[31975]],[[63868,63868],"mapped",[33391]],[[63869,63869],"mapped",[35538]],[[63870,63870],"mapped",[37327]],[[63871,63871],"mapped",[21237]],[[63872,63872],"mapped",[21570]],[[63873,63873],"mapped",[22899]],[[63874,63874],"mapped",[24300]],[[63875,63875],"mapped",[26053]],[[63876,63876],"mapped",[28670]],[[63877,63877],"mapped",[31018]],[[63878,63878],"mapped",[38317]],[[63879,63879],"mapped",[39530]],[[63880,63880],"mapped",[40599]],[[63881,63881],"mapped",[40654]],[[63882,63882],"mapped",[21147]],[[63883,63883],"mapped",[26310]],[[63884,63884],"mapped",[27511]],[[63885,63885],"mapped",[36706]],[[63886,63886],"mapped",[24180]],[[63887,63887],"mapped",[24976]],[[63888,63888],"mapped",[25088]],[[63889,63889],"mapped",[25754]],[[63890,63890],"mapped",[28451]],[[63891,63891],"mapped",[29001]],[[63892,63892],"mapped",[29833]],[[63893,63893],"mapped",[31178]],[[63894,63894],"mapped",[32244]],[[63895,63895],"mapped",[32879]],[[63896,63896],"mapped",[36646]],[[63897,63897],"mapped",[34030]],[[63898,63898],"mapped",[36899]],[[63899,63899],"mapped",[37706]],[[63900,63900],"mapped",[21015]],[[63901,63901],"mapped",[21155]],[[63902,63902],"mapped",[21693]],[[63903,63903],"mapped",[28872]],[[63904,63904],"mapped",[35010]],[[63905,63905],"mapped",[35498]],[[63906,63906],"mapped",[24265]],[[63907,63907],"mapped",[24565]],[[63908,63908],"mapped",[25467]],[[63909,63909],"mapped",[27566]],[[63910,63910],"mapped",[31806]],[[63911,63911],"mapped",[29557]],[[63912,63912],"mapped",[20196]],[[63913,63913],"mapped",[22265]],[[63914,63914],"mapped",[23527]],[[63915,63915],"mapped",[23994]],[[63916,63916],"mapped",[24604]],[[63917,63917],"mapped",[29618]],[[63918,63918],"mapped",[29801]],[[63919,63919],"mapped",[32666]],[[63920,63920],"mapped",[32838]],[[63921,63921],"mapped",[37428]],[[63922,63922],"mapped",[38646]],[[63923,63923],"mapped",[38728]],[[63924,63924],"mapped",[38936]],[[63925,63925],"mapped",[20363]],[[63926,63926],"mapped",[31150]],[[63927,63927],"mapped",[37300]],[[63928,63928],"mapped",[38584]],[[63929,63929],"mapped",[24801]],[[63930,63930],"mapped",[20102]],[[63931,63931],"mapped",[20698]],[[63932,63932],"mapped",[23534]],[[63933,63933],"mapped",[23615]],[[63934,63934],"mapped",[26009]],[[63935,63935],"mapped",[27138]],[[63936,63936],"mapped",[29134]],[[63937,63937],"mapped",[30274]],[[63938,63938],"mapped",[34044]],[[63939,63939],"mapped",[36988]],[[63940,63940],"mapped",[40845]],[[63941,63941],"mapped",[26248]],[[63942,63942],"mapped",[38446]],[[63943,63943],"mapped",[21129]],[[63944,63944],"mapped",[26491]],[[63945,63945],"mapped",[26611]],[[63946,63946],"mapped",[27969]],[[63947,63947],"mapped",[28316]],[[63948,63948],"mapped",[29705]],[[63949,63949],"mapped",[30041]],[[63950,63950],"mapped",[30827]],[[63951,63951],"mapped",[32016]],[[63952,63952],"mapped",[39006]],[[63953,63953],"mapped",[20845]],[[63954,63954],"mapped",[25134]],[[63955,63955],"mapped",[38520]],[[63956,63956],"mapped",[20523]],[[63957,63957],"mapped",[23833]],[[63958,63958],"mapped",[28138]],[[63959,63959],"mapped",[36650]],[[63960,63960],"mapped",[24459]],[[63961,63961],"mapped",[24900]],[[63962,63962],"mapped",[26647]],[[63963,63963],"mapped",[29575]],[[63964,63964],"mapped",[38534]],[[63965,63965],"mapped",[21033]],[[63966,63966],"mapped",[21519]],[[63967,63967],"mapped",[23653]],[[63968,63968],"mapped",[26131]],[[63969,63969],"mapped",[26446]],[[63970,63970],"mapped",[26792]],[[63971,63971],"mapped",[27877]],[[63972,63972],"mapped",[29702]],[[63973,63973],"mapped",[30178]],[[63974,63974],"mapped",[32633]],[[63975,63975],"mapped",[35023]],[[63976,63976],"mapped",[35041]],[[63977,63977],"mapped",[37324]],[[63978,63978],"mapped",[38626]],[[63979,63979],"mapped",[21311]],[[63980,63980],"mapped",[28346]],[[63981,63981],"mapped",[21533]],[[63982,63982],"mapped",[29136]],[[63983,63983],"mapped",[29848]],[[63984,63984],"mapped",[34298]],[[63985,63985],"mapped",[38563]],[[63986,63986],"mapped",[40023]],[[63987,63987],"mapped",[40607]],[[63988,63988],"mapped",[26519]],[[63989,63989],"mapped",[28107]],[[63990,63990],"mapped",[33256]],[[63991,63991],"mapped",[31435]],[[63992,63992],"mapped",[31520]],[[63993,63993],"mapped",[31890]],[[63994,63994],"mapped",[29376]],[[63995,63995],"mapped",[28825]],[[63996,63996],"mapped",[35672]],[[63997,63997],"mapped",[20160]],[[63998,63998],"mapped",[33590]],[[63999,63999],"mapped",[21050]],[[64000,64000],"mapped",[20999]],[[64001,64001],"mapped",[24230]],[[64002,64002],"mapped",[25299]],[[64003,64003],"mapped",[31958]],[[64004,64004],"mapped",[23429]],[[64005,64005],"mapped",[27934]],[[64006,64006],"mapped",[26292]],[[64007,64007],"mapped",[36667]],[[64008,64008],"mapped",[34892]],[[64009,64009],"mapped",[38477]],[[64010,64010],"mapped",[35211]],[[64011,64011],"mapped",[24275]],[[64012,64012],"mapped",[20800]],[[64013,64013],"mapped",[21952]],[[64014,64015],"valid"],[[64016,64016],"mapped",[22618]],[[64017,64017],"valid"],[[64018,64018],"mapped",[26228]],[[64019,64020],"valid"],[[64021,64021],"mapped",[20958]],[[64022,64022],"mapped",[29482]],[[64023,64023],"mapped",[30410]],[[64024,64024],"mapped",[31036]],[[64025,64025],"mapped",[31070]],[[64026,64026],"mapped",[31077]],[[64027,64027],"mapped",[31119]],[[64028,64028],"mapped",[38742]],[[64029,64029],"mapped",[31934]],[[64030,64030],"mapped",[32701]],[[64031,64031],"valid"],[[64032,64032],"mapped",[34322]],[[64033,64033],"valid"],[[64034,64034],"mapped",[35576]],[[64035,64036],"valid"],[[64037,64037],"mapped",[36920]],[[64038,64038],"mapped",[37117]],[[64039,64041],"valid"],[[64042,64042],"mapped",[39151]],[[64043,64043],"mapped",[39164]],[[64044,64044],"mapped",[39208]],[[64045,64045],"mapped",[40372]],[[64046,64046],"mapped",[37086]],[[64047,64047],"mapped",[38583]],[[64048,64048],"mapped",[20398]],[[64049,64049],"mapped",[20711]],[[64050,64050],"mapped",[20813]],[[64051,64051],"mapped",[21193]],[[64052,64052],"mapped",[21220]],[[64053,64053],"mapped",[21329]],[[64054,64054],"mapped",[21917]],[[64055,64055],"mapped",[22022]],[[64056,64056],"mapped",[22120]],[[64057,64057],"mapped",[22592]],[[64058,64058],"mapped",[22696]],[[64059,64059],"mapped",[23652]],[[64060,64060],"mapped",[23662]],[[64061,64061],"mapped",[24724]],[[64062,64062],"mapped",[24936]],[[64063,64063],"mapped",[24974]],[[64064,64064],"mapped",[25074]],[[64065,64065],"mapped",[25935]],[[64066,64066],"mapped",[26082]],[[64067,64067],"mapped",[26257]],[[64068,64068],"mapped",[26757]],[[64069,64069],"mapped",[28023]],[[64070,64070],"mapped",[28186]],[[64071,64071],"mapped",[28450]],[[64072,64072],"mapped",[29038]],[[64073,64073],"mapped",[29227]],[[64074,64074],"mapped",[29730]],[[64075,64075],"mapped",[30865]],[[64076,64076],"mapped",[31038]],[[64077,64077],"mapped",[31049]],[[64078,64078],"mapped",[31048]],[[64079,64079],"mapped",[31056]],[[64080,64080],"mapped",[31062]],[[64081,64081],"mapped",[31069]],[[64082,64082],"mapped",[31117]],[[64083,64083],"mapped",[31118]],[[64084,64084],"mapped",[31296]],[[64085,64085],"mapped",[31361]],[[64086,64086],"mapped",[31680]],[[64087,64087],"mapped",[32244]],[[64088,64088],"mapped",[32265]],[[64089,64089],"mapped",[32321]],[[64090,64090],"mapped",[32626]],[[64091,64091],"mapped",[32773]],[[64092,64092],"mapped",[33261]],[[64093,64094],"mapped",[33401]],[[64095,64095],"mapped",[33879]],[[64096,64096],"mapped",[35088]],[[64097,64097],"mapped",[35222]],[[64098,64098],"mapped",[35585]],[[64099,64099],"mapped",[35641]],[[64100,64100],"mapped",[36051]],[[64101,64101],"mapped",[36104]],[[64102,64102],"mapped",[36790]],[[64103,64103],"mapped",[36920]],[[64104,64104],"mapped",[38627]],[[64105,64105],"mapped",[38911]],[[64106,64106],"mapped",[38971]],[[64107,64107],"mapped",[24693]],[[64108,64108],"mapped",[148206]],[[64109,64109],"mapped",[33304]],[[64110,64111],"disallowed"],[[64112,64112],"mapped",[20006]],[[64113,64113],"mapped",[20917]],[[64114,64114],"mapped",[20840]],[[64115,64115],"mapped",[20352]],[[64116,64116],"mapped",[20805]],[[64117,64117],"mapped",[20864]],[[64118,64118],"mapped",[21191]],[[64119,64119],"mapped",[21242]],[[64120,64120],"mapped",[21917]],[[64121,64121],"mapped",[21845]],[[64122,64122],"mapped",[21913]],[[64123,64123],"mapped",[21986]],[[64124,64124],"mapped",[22618]],[[64125,64125],"mapped",[22707]],[[64126,64126],"mapped",[22852]],[[64127,64127],"mapped",[22868]],[[64128,64128],"mapped",[23138]],[[64129,64129],"mapped",[23336]],[[64130,64130],"mapped",[24274]],[[64131,64131],"mapped",[24281]],[[64132,64132],"mapped",[24425]],[[64133,64133],"mapped",[24493]],[[64134,64134],"mapped",[24792]],[[64135,64135],"mapped",[24910]],[[64136,64136],"mapped",[24840]],[[64137,64137],"mapped",[24974]],[[64138,64138],"mapped",[24928]],[[64139,64139],"mapped",[25074]],[[64140,64140],"mapped",[25140]],[[64141,64141],"mapped",[25540]],[[64142,64142],"mapped",[25628]],[[64143,64143],"mapped",[25682]],[[64144,64144],"mapped",[25942]],[[64145,64145],"mapped",[26228]],[[64146,64146],"mapped",[26391]],[[64147,64147],"mapped",[26395]],[[64148,64148],"mapped",[26454]],[[64149,64149],"mapped",[27513]],[[64150,64150],"mapped",[27578]],[[64151,64151],"mapped",[27969]],[[64152,64152],"mapped",[28379]],[[64153,64153],"mapped",[28363]],[[64154,64154],"mapped",[28450]],[[64155,64155],"mapped",[28702]],[[64156,64156],"mapped",[29038]],[[64157,64157],"mapped",[30631]],[[64158,64158],"mapped",[29237]],[[64159,64159],"mapped",[29359]],[[64160,64160],"mapped",[29482]],[[64161,64161],"mapped",[29809]],[[64162,64162],"mapped",[29958]],[[64163,64163],"mapped",[30011]],[[64164,64164],"mapped",[30237]],[[64165,64165],"mapped",[30239]],[[64166,64166],"mapped",[30410]],[[64167,64167],"mapped",[30427]],[[64168,64168],"mapped",[30452]],[[64169,64169],"mapped",[30538]],[[64170,64170],"mapped",[30528]],[[64171,64171],"mapped",[30924]],[[64172,64172],"mapped",[31409]],[[64173,64173],"mapped",[31680]],[[64174,64174],"mapped",[31867]],[[64175,64175],"mapped",[32091]],[[64176,64176],"mapped",[32244]],[[64177,64177],"mapped",[32574]],[[64178,64178],"mapped",[32773]],[[64179,64179],"mapped",[33618]],[[64180,64180],"mapped",[33775]],[[64181,64181],"mapped",[34681]],[[64182,64182],"mapped",[35137]],[[64183,64183],"mapped",[35206]],[[64184,64184],"mapped",[35222]],[[64185,64185],"mapped",[35519]],[[64186,64186],"mapped",[35576]],[[64187,64187],"mapped",[35531]],[[64188,64188],"mapped",[35585]],[[64189,64189],"mapped",[35582]],[[64190,64190],"mapped",[35565]],[[64191,64191],"mapped",[35641]],[[64192,64192],"mapped",[35722]],[[64193,64193],"mapped",[36104]],[[64194,64194],"mapped",[36664]],[[64195,64195],"mapped",[36978]],[[64196,64196],"mapped",[37273]],[[64197,64197],"mapped",[37494]],[[64198,64198],"mapped",[38524]],[[64199,64199],"mapped",[38627]],[[64200,64200],"mapped",[38742]],[[64201,64201],"mapped",[38875]],[[64202,64202],"mapped",[38911]],[[64203,64203],"mapped",[38923]],[[64204,64204],"mapped",[38971]],[[64205,64205],"mapped",[39698]],[[64206,64206],"mapped",[40860]],[[64207,64207],"mapped",[141386]],[[64208,64208],"mapped",[141380]],[[64209,64209],"mapped",[144341]],[[64210,64210],"mapped",[15261]],[[64211,64211],"mapped",[16408]],[[64212,64212],"mapped",[16441]],[[64213,64213],"mapped",[152137]],[[64214,64214],"mapped",[154832]],[[64215,64215],"mapped",[163539]],[[64216,64216],"mapped",[40771]],[[64217,64217],"mapped",[40846]],[[64218,64255],"disallowed"],[[64256,64256],"mapped",[102,102]],[[64257,64257],"mapped",[102,105]],[[64258,64258],"mapped",[102,108]],[[64259,64259],"mapped",[102,102,105]],[[64260,64260],"mapped",[102,102,108]],[[64261,64262],"mapped",[115,116]],[[64263,64274],"disallowed"],[[64275,64275],"mapped",[1396,1398]],[[64276,64276],"mapped",[1396,1381]],[[64277,64277],"mapped",[1396,1387]],[[64278,64278],"mapped",[1406,1398]],[[64279,64279],"mapped",[1396,1389]],[[64280,64284],"disallowed"],[[64285,64285],"mapped",[1497,1460]],[[64286,64286],"valid"],[[64287,64287],"mapped",[1522,1463]],[[64288,64288],"mapped",[1506]],[[64289,64289],"mapped",[1488]],[[64290,64290],"mapped",[1491]],[[64291,64291],"mapped",[1492]],[[64292,64292],"mapped",[1499]],[[64293,64293],"mapped",[1500]],[[64294,64294],"mapped",[1501]],[[64295,64295],"mapped",[1512]],[[64296,64296],"mapped",[1514]],[[64297,64297],"disallowed_STD3_mapped",[43]],[[64298,64298],"mapped",[1513,1473]],[[64299,64299],"mapped",[1513,1474]],[[64300,64300],"mapped",[1513,1468,1473]],[[64301,64301],"mapped",[1513,1468,1474]],[[64302,64302],"mapped",[1488,1463]],[[64303,64303],"mapped",[1488,1464]],[[64304,64304],"mapped",[1488,1468]],[[64305,64305],"mapped",[1489,1468]],[[64306,64306],"mapped",[1490,1468]],[[64307,64307],"mapped",[1491,1468]],[[64308,64308],"mapped",[1492,1468]],[[64309,64309],"mapped",[1493,1468]],[[64310,64310],"mapped",[1494,1468]],[[64311,64311],"disallowed"],[[64312,64312],"mapped",[1496,1468]],[[64313,64313],"mapped",[1497,1468]],[[64314,64314],"mapped",[1498,1468]],[[64315,64315],"mapped",[1499,1468]],[[64316,64316],"mapped",[1500,1468]],[[64317,64317],"disallowed"],[[64318,64318],"mapped",[1502,1468]],[[64319,64319],"disallowed"],[[64320,64320],"mapped",[1504,1468]],[[64321,64321],"mapped",[1505,1468]],[[64322,64322],"disallowed"],[[64323,64323],"mapped",[1507,1468]],[[64324,64324],"mapped",[1508,1468]],[[64325,64325],"disallowed"],[[64326,64326],"mapped",[1510,1468]],[[64327,64327],"mapped",[1511,1468]],[[64328,64328],"mapped",[1512,1468]],[[64329,64329],"mapped",[1513,1468]],[[64330,64330],"mapped",[1514,1468]],[[64331,64331],"mapped",[1493,1465]],[[64332,64332],"mapped",[1489,1471]],[[64333,64333],"mapped",[1499,1471]],[[64334,64334],"mapped",[1508,1471]],[[64335,64335],"mapped",[1488,1500]],[[64336,64337],"mapped",[1649]],[[64338,64341],"mapped",[1659]],[[64342,64345],"mapped",[1662]],[[64346,64349],"mapped",[1664]],[[64350,64353],"mapped",[1658]],[[64354,64357],"mapped",[1663]],[[64358,64361],"mapped",[1657]],[[64362,64365],"mapped",[1700]],[[64366,64369],"mapped",[1702]],[[64370,64373],"mapped",[1668]],[[64374,64377],"mapped",[1667]],[[64378,64381],"mapped",[1670]],[[64382,64385],"mapped",[1671]],[[64386,64387],"mapped",[1677]],[[64388,64389],"mapped",[1676]],[[64390,64391],"mapped",[1678]],[[64392,64393],"mapped",[1672]],[[64394,64395],"mapped",[1688]],[[64396,64397],"mapped",[1681]],[[64398,64401],"mapped",[1705]],[[64402,64405],"mapped",[1711]],[[64406,64409],"mapped",[1715]],[[64410,64413],"mapped",[1713]],[[64414,64415],"mapped",[1722]],[[64416,64419],"mapped",[1723]],[[64420,64421],"mapped",[1728]],[[64422,64425],"mapped",[1729]],[[64426,64429],"mapped",[1726]],[[64430,64431],"mapped",[1746]],[[64432,64433],"mapped",[1747]],[[64434,64449],"valid",[],"NV8"],[[64450,64466],"disallowed"],[[64467,64470],"mapped",[1709]],[[64471,64472],"mapped",[1735]],[[64473,64474],"mapped",[1734]],[[64475,64476],"mapped",[1736]],[[64477,64477],"mapped",[1735,1652]],[[64478,64479],"mapped",[1739]],[[64480,64481],"mapped",[1733]],[[64482,64483],"mapped",[1737]],[[64484,64487],"mapped",[1744]],[[64488,64489],"mapped",[1609]],[[64490,64491],"mapped",[1574,1575]],[[64492,64493],"mapped",[1574,1749]],[[64494,64495],"mapped",[1574,1608]],[[64496,64497],"mapped",[1574,1735]],[[64498,64499],"mapped",[1574,1734]],[[64500,64501],"mapped",[1574,1736]],[[64502,64504],"mapped",[1574,1744]],[[64505,64507],"mapped",[1574,1609]],[[64508,64511],"mapped",[1740]],[[64512,64512],"mapped",[1574,1580]],[[64513,64513],"mapped",[1574,1581]],[[64514,64514],"mapped",[1574,1605]],[[64515,64515],"mapped",[1574,1609]],[[64516,64516],"mapped",[1574,1610]],[[64517,64517],"mapped",[1576,1580]],[[64518,64518],"mapped",[1576,1581]],[[64519,64519],"mapped",[1576,1582]],[[64520,64520],"mapped",[1576,1605]],[[64521,64521],"mapped",[1576,1609]],[[64522,64522],"mapped",[1576,1610]],[[64523,64523],"mapped",[1578,1580]],[[64524,64524],"mapped",[1578,1581]],[[64525,64525],"mapped",[1578,1582]],[[64526,64526],"mapped",[1578,1605]],[[64527,64527],"mapped",[1578,1609]],[[64528,64528],"mapped",[1578,1610]],[[64529,64529],"mapped",[1579,1580]],[[64530,64530],"mapped",[1579,1605]],[[64531,64531],"mapped",[1579,1609]],[[64532,64532],"mapped",[1579,1610]],[[64533,64533],"mapped",[1580,1581]],[[64534,64534],"mapped",[1580,1605]],[[64535,64535],"mapped",[1581,1580]],[[64536,64536],"mapped",[1581,1605]],[[64537,64537],"mapped",[1582,1580]],[[64538,64538],"mapped",[1582,1581]],[[64539,64539],"mapped",[1582,1605]],[[64540,64540],"mapped",[1587,1580]],[[64541,64541],"mapped",[1587,1581]],[[64542,64542],"mapped",[1587,1582]],[[64543,64543],"mapped",[1587,1605]],[[64544,64544],"mapped",[1589,1581]],[[64545,64545],"mapped",[1589,1605]],[[64546,64546],"mapped",[1590,1580]],[[64547,64547],"mapped",[1590,1581]],[[64548,64548],"mapped",[1590,1582]],[[64549,64549],"mapped",[1590,1605]],[[64550,64550],"mapped",[1591,1581]],[[64551,64551],"mapped",[1591,1605]],[[64552,64552],"mapped",[1592,1605]],[[64553,64553],"mapped",[1593,1580]],[[64554,64554],"mapped",[1593,1605]],[[64555,64555],"mapped",[1594,1580]],[[64556,64556],"mapped",[1594,1605]],[[64557,64557],"mapped",[1601,1580]],[[64558,64558],"mapped",[1601,1581]],[[64559,64559],"mapped",[1601,1582]],[[64560,64560],"mapped",[1601,1605]],[[64561,64561],"mapped",[1601,1609]],[[64562,64562],"mapped",[1601,1610]],[[64563,64563],"mapped",[1602,1581]],[[64564,64564],"mapped",[1602,1605]],[[64565,64565],"mapped",[1602,1609]],[[64566,64566],"mapped",[1602,1610]],[[64567,64567],"mapped",[1603,1575]],[[64568,64568],"mapped",[1603,1580]],[[64569,64569],"mapped",[1603,1581]],[[64570,64570],"mapped",[1603,1582]],[[64571,64571],"mapped",[1603,1604]],[[64572,64572],"mapped",[1603,1605]],[[64573,64573],"mapped",[1603,1609]],[[64574,64574],"mapped",[1603,1610]],[[64575,64575],"mapped",[1604,1580]],[[64576,64576],"mapped",[1604,1581]],[[64577,64577],"mapped",[1604,1582]],[[64578,64578],"mapped",[1604,1605]],[[64579,64579],"mapped",[1604,1609]],[[64580,64580],"mapped",[1604,1610]],[[64581,64581],"mapped",[1605,1580]],[[64582,64582],"mapped",[1605,1581]],[[64583,64583],"mapped",[1605,1582]],[[64584,64584],"mapped",[1605,1605]],[[64585,64585],"mapped",[1605,1609]],[[64586,64586],"mapped",[1605,1610]],[[64587,64587],"mapped",[1606,1580]],[[64588,64588],"mapped",[1606,1581]],[[64589,64589],"mapped",[1606,1582]],[[64590,64590],"mapped",[1606,1605]],[[64591,64591],"mapped",[1606,1609]],[[64592,64592],"mapped",[1606,1610]],[[64593,64593],"mapped",[1607,1580]],[[64594,64594],"mapped",[1607,1605]],[[64595,64595],"mapped",[1607,1609]],[[64596,64596],"mapped",[1607,1610]],[[64597,64597],"mapped",[1610,1580]],[[64598,64598],"mapped",[1610,1581]],[[64599,64599],"mapped",[1610,1582]],[[64600,64600],"mapped",[1610,1605]],[[64601,64601],"mapped",[1610,1609]],[[64602,64602],"mapped",[1610,1610]],[[64603,64603],"mapped",[1584,1648]],[[64604,64604],"mapped",[1585,1648]],[[64605,64605],"mapped",[1609,1648]],[[64606,64606],"disallowed_STD3_mapped",[32,1612,1617]],[[64607,64607],"disallowed_STD3_mapped",[32,1613,1617]],[[64608,64608],"disallowed_STD3_mapped",[32,1614,1617]],[[64609,64609],"disallowed_STD3_mapped",[32,1615,1617]],[[64610,64610],"disallowed_STD3_mapped",[32,1616,1617]],[[64611,64611],"disallowed_STD3_mapped",[32,1617,1648]],[[64612,64612],"mapped",[1574,1585]],[[64613,64613],"mapped",[1574,1586]],[[64614,64614],"mapped",[1574,1605]],[[64615,64615],"mapped",[1574,1606]],[[64616,64616],"mapped",[1574,1609]],[[64617,64617],"mapped",[1574,1610]],[[64618,64618],"mapped",[1576,1585]],[[64619,64619],"mapped",[1576,1586]],[[64620,64620],"mapped",[1576,1605]],[[64621,64621],"mapped",[1576,1606]],[[64622,64622],"mapped",[1576,1609]],[[64623,64623],"mapped",[1576,1610]],[[64624,64624],"mapped",[1578,1585]],[[64625,64625],"mapped",[1578,1586]],[[64626,64626],"mapped",[1578,1605]],[[64627,64627],"mapped",[1578,1606]],[[64628,64628],"mapped",[1578,1609]],[[64629,64629],"mapped",[1578,1610]],[[64630,64630],"mapped",[1579,1585]],[[64631,64631],"mapped",[1579,1586]],[[64632,64632],"mapped",[1579,1605]],[[64633,64633],"mapped",[1579,1606]],[[64634,64634],"mapped",[1579,1609]],[[64635,64635],"mapped",[1579,1610]],[[64636,64636],"mapped",[1601,1609]],[[64637,64637],"mapped",[1601,1610]],[[64638,64638],"mapped",[1602,1609]],[[64639,64639],"mapped",[1602,1610]],[[64640,64640],"mapped",[1603,1575]],[[64641,64641],"mapped",[1603,1604]],[[64642,64642],"mapped",[1603,1605]],[[64643,64643],"mapped",[1603,1609]],[[64644,64644],"mapped",[1603,1610]],[[64645,64645],"mapped",[1604,1605]],[[64646,64646],"mapped",[1604,1609]],[[64647,64647],"mapped",[1604,1610]],[[64648,64648],"mapped",[1605,1575]],[[64649,64649],"mapped",[1605,1605]],[[64650,64650],"mapped",[1606,1585]],[[64651,64651],"mapped",[1606,1586]],[[64652,64652],"mapped",[1606,1605]],[[64653,64653],"mapped",[1606,1606]],[[64654,64654],"mapped",[1606,1609]],[[64655,64655],"mapped",[1606,1610]],[[64656,64656],"mapped",[1609,1648]],[[64657,64657],"mapped",[1610,1585]],[[64658,64658],"mapped",[1610,1586]],[[64659,64659],"mapped",[1610,1605]],[[64660,64660],"mapped",[1610,1606]],[[64661,64661],"mapped",[1610,1609]],[[64662,64662],"mapped",[1610,1610]],[[64663,64663],"mapped",[1574,1580]],[[64664,64664],"mapped",[1574,1581]],[[64665,64665],"mapped",[1574,1582]],[[64666,64666],"mapped",[1574,1605]],[[64667,64667],"mapped",[1574,1607]],[[64668,64668],"mapped",[1576,1580]],[[64669,64669],"mapped",[1576,1581]],[[64670,64670],"mapped",[1576,1582]],[[64671,64671],"mapped",[1576,1605]],[[64672,64672],"mapped",[1576,1607]],[[64673,64673],"mapped",[1578,1580]],[[64674,64674],"mapped",[1578,1581]],[[64675,64675],"mapped",[1578,1582]],[[64676,64676],"mapped",[1578,1605]],[[64677,64677],"mapped",[1578,1607]],[[64678,64678],"mapped",[1579,1605]],[[64679,64679],"mapped",[1580,1581]],[[64680,64680],"mapped",[1580,1605]],[[64681,64681],"mapped",[1581,1580]],[[64682,64682],"mapped",[1581,1605]],[[64683,64683],"mapped",[1582,1580]],[[64684,64684],"mapped",[1582,1605]],[[64685,64685],"mapped",[1587,1580]],[[64686,64686],"mapped",[1587,1581]],[[64687,64687],"mapped",[1587,1582]],[[64688,64688],"mapped",[1587,1605]],[[64689,64689],"mapped",[1589,1581]],[[64690,64690],"mapped",[1589,1582]],[[64691,64691],"mapped",[1589,1605]],[[64692,64692],"mapped",[1590,1580]],[[64693,64693],"mapped",[1590,1581]],[[64694,64694],"mapped",[1590,1582]],[[64695,64695],"mapped",[1590,1605]],[[64696,64696],"mapped",[1591,1581]],[[64697,64697],"mapped",[1592,1605]],[[64698,64698],"mapped",[1593,1580]],[[64699,64699],"mapped",[1593,1605]],[[64700,64700],"mapped",[1594,1580]],[[64701,64701],"mapped",[1594,1605]],[[64702,64702],"mapped",[1601,1580]],[[64703,64703],"mapped",[1601,1581]],[[64704,64704],"mapped",[1601,1582]],[[64705,64705],"mapped",[1601,1605]],[[64706,64706],"mapped",[1602,1581]],[[64707,64707],"mapped",[1602,1605]],[[64708,64708],"mapped",[1603,1580]],[[64709,64709],"mapped",[1603,1581]],[[64710,64710],"mapped",[1603,1582]],[[64711,64711],"mapped",[1603,1604]],[[64712,64712],"mapped",[1603,1605]],[[64713,64713],"mapped",[1604,1580]],[[64714,64714],"mapped",[1604,1581]],[[64715,64715],"mapped",[1604,1582]],[[64716,64716],"mapped",[1604,1605]],[[64717,64717],"mapped",[1604,1607]],[[64718,64718],"mapped",[1605,1580]],[[64719,64719],"mapped",[1605,1581]],[[64720,64720],"mapped",[1605,1582]],[[64721,64721],"mapped",[1605,1605]],[[64722,64722],"mapped",[1606,1580]],[[64723,64723],"mapped",[1606,1581]],[[64724,64724],"mapped",[1606,1582]],[[64725,64725],"mapped",[1606,1605]],[[64726,64726],"mapped",[1606,1607]],[[64727,64727],"mapped",[1607,1580]],[[64728,64728],"mapped",[1607,1605]],[[64729,64729],"mapped",[1607,1648]],[[64730,64730],"mapped",[1610,1580]],[[64731,64731],"mapped",[1610,1581]],[[64732,64732],"mapped",[1610,1582]],[[64733,64733],"mapped",[1610,1605]],[[64734,64734],"mapped",[1610,1607]],[[64735,64735],"mapped",[1574,1605]],[[64736,64736],"mapped",[1574,1607]],[[64737,64737],"mapped",[1576,1605]],[[64738,64738],"mapped",[1576,1607]],[[64739,64739],"mapped",[1578,1605]],[[64740,64740],"mapped",[1578,1607]],[[64741,64741],"mapped",[1579,1605]],[[64742,64742],"mapped",[1579,1607]],[[64743,64743],"mapped",[1587,1605]],[[64744,64744],"mapped",[1587,1607]],[[64745,64745],"mapped",[1588,1605]],[[64746,64746],"mapped",[1588,1607]],[[64747,64747],"mapped",[1603,1604]],[[64748,64748],"mapped",[1603,1605]],[[64749,64749],"mapped",[1604,1605]],[[64750,64750],"mapped",[1606,1605]],[[64751,64751],"mapped",[1606,1607]],[[64752,64752],"mapped",[1610,1605]],[[64753,64753],"mapped",[1610,1607]],[[64754,64754],"mapped",[1600,1614,1617]],[[64755,64755],"mapped",[1600,1615,1617]],[[64756,64756],"mapped",[1600,1616,1617]],[[64757,64757],"mapped",[1591,1609]],[[64758,64758],"mapped",[1591,1610]],[[64759,64759],"mapped",[1593,1609]],[[64760,64760],"mapped",[1593,1610]],[[64761,64761],"mapped",[1594,1609]],[[64762,64762],"mapped",[1594,1610]],[[64763,64763],"mapped",[1587,1609]],[[64764,64764],"mapped",[1587,1610]],[[64765,64765],"mapped",[1588,1609]],[[64766,64766],"mapped",[1588,1610]],[[64767,64767],"mapped",[1581,1609]],[[64768,64768],"mapped",[1581,1610]],[[64769,64769],"mapped",[1580,1609]],[[64770,64770],"mapped",[1580,1610]],[[64771,64771],"mapped",[1582,1609]],[[64772,64772],"mapped",[1582,1610]],[[64773,64773],"mapped",[1589,1609]],[[64774,64774],"mapped",[1589,1610]],[[64775,64775],"mapped",[1590,1609]],[[64776,64776],"mapped",[1590,1610]],[[64777,64777],"mapped",[1588,1580]],[[64778,64778],"mapped",[1588,1581]],[[64779,64779],"mapped",[1588,1582]],[[64780,64780],"mapped",[1588,1605]],[[64781,64781],"mapped",[1588,1585]],[[64782,64782],"mapped",[1587,1585]],[[64783,64783],"mapped",[1589,1585]],[[64784,64784],"mapped",[1590,1585]],[[64785,64785],"mapped",[1591,1609]],[[64786,64786],"mapped",[1591,1610]],[[64787,64787],"mapped",[1593,1609]],[[64788,64788],"mapped",[1593,1610]],[[64789,64789],"mapped",[1594,1609]],[[64790,64790],"mapped",[1594,1610]],[[64791,64791],"mapped",[1587,1609]],[[64792,64792],"mapped",[1587,1610]],[[64793,64793],"mapped",[1588,1609]],[[64794,64794],"mapped",[1588,1610]],[[64795,64795],"mapped",[1581,1609]],[[64796,64796],"mapped",[1581,1610]],[[64797,64797],"mapped",[1580,1609]],[[64798,64798],"mapped",[1580,1610]],[[64799,64799],"mapped",[1582,1609]],[[64800,64800],"mapped",[1582,1610]],[[64801,64801],"mapped",[1589,1609]],[[64802,64802],"mapped",[1589,1610]],[[64803,64803],"mapped",[1590,1609]],[[64804,64804],"mapped",[1590,1610]],[[64805,64805],"mapped",[1588,1580]],[[64806,64806],"mapped",[1588,1581]],[[64807,64807],"mapped",[1588,1582]],[[64808,64808],"mapped",[1588,1605]],[[64809,64809],"mapped",[1588,1585]],[[64810,64810],"mapped",[1587,1585]],[[64811,64811],"mapped",[1589,1585]],[[64812,64812],"mapped",[1590,1585]],[[64813,64813],"mapped",[1588,1580]],[[64814,64814],"mapped",[1588,1581]],[[64815,64815],"mapped",[1588,1582]],[[64816,64816],"mapped",[1588,1605]],[[64817,64817],"mapped",[1587,1607]],[[64818,64818],"mapped",[1588,1607]],[[64819,64819],"mapped",[1591,1605]],[[64820,64820],"mapped",[1587,1580]],[[64821,64821],"mapped",[1587,1581]],[[64822,64822],"mapped",[1587,1582]],[[64823,64823],"mapped",[1588,1580]],[[64824,64824],"mapped",[1588,1581]],[[64825,64825],"mapped",[1588,1582]],[[64826,64826],"mapped",[1591,1605]],[[64827,64827],"mapped",[1592,1605]],[[64828,64829],"mapped",[1575,1611]],[[64830,64831],"valid",[],"NV8"],[[64832,64847],"disallowed"],[[64848,64848],"mapped",[1578,1580,1605]],[[64849,64850],"mapped",[1578,1581,1580]],[[64851,64851],"mapped",[1578,1581,1605]],[[64852,64852],"mapped",[1578,1582,1605]],[[64853,64853],"mapped",[1578,1605,1580]],[[64854,64854],"mapped",[1578,1605,1581]],[[64855,64855],"mapped",[1578,1605,1582]],[[64856,64857],"mapped",[1580,1605,1581]],[[64858,64858],"mapped",[1581,1605,1610]],[[64859,64859],"mapped",[1581,1605,1609]],[[64860,64860],"mapped",[1587,1581,1580]],[[64861,64861],"mapped",[1587,1580,1581]],[[64862,64862],"mapped",[1587,1580,1609]],[[64863,64864],"mapped",[1587,1605,1581]],[[64865,64865],"mapped",[1587,1605,1580]],[[64866,64867],"mapped",[1587,1605,1605]],[[64868,64869],"mapped",[1589,1581,1581]],[[64870,64870],"mapped",[1589,1605,1605]],[[64871,64872],"mapped",[1588,1581,1605]],[[64873,64873],"mapped",[1588,1580,1610]],[[64874,64875],"mapped",[1588,1605,1582]],[[64876,64877],"mapped",[1588,1605,1605]],[[64878,64878],"mapped",[1590,1581,1609]],[[64879,64880],"mapped",[1590,1582,1605]],[[64881,64882],"mapped",[1591,1605,1581]],[[64883,64883],"mapped",[1591,1605,1605]],[[64884,64884],"mapped",[1591,1605,1610]],[[64885,64885],"mapped",[1593,1580,1605]],[[64886,64887],"mapped",[1593,1605,1605]],[[64888,64888],"mapped",[1593,1605,1609]],[[64889,64889],"mapped",[1594,1605,1605]],[[64890,64890],"mapped",[1594,1605,1610]],[[64891,64891],"mapped",[1594,1605,1609]],[[64892,64893],"mapped",[1601,1582,1605]],[[64894,64894],"mapped",[1602,1605,1581]],[[64895,64895],"mapped",[1602,1605,1605]],[[64896,64896],"mapped",[1604,1581,1605]],[[64897,64897],"mapped",[1604,1581,1610]],[[64898,64898],"mapped",[1604,1581,1609]],[[64899,64900],"mapped",[1604,1580,1580]],[[64901,64902],"mapped",[1604,1582,1605]],[[64903,64904],"mapped",[1604,1605,1581]],[[64905,64905],"mapped",[1605,1581,1580]],[[64906,64906],"mapped",[1605,1581,1605]],[[64907,64907],"mapped",[1605,1581,1610]],[[64908,64908],"mapped",[1605,1580,1581]],[[64909,64909],"mapped",[1605,1580,1605]],[[64910,64910],"mapped",[1605,1582,1580]],[[64911,64911],"mapped",[1605,1582,1605]],[[64912,64913],"disallowed"],[[64914,64914],"mapped",[1605,1580,1582]],[[64915,64915],"mapped",[1607,1605,1580]],[[64916,64916],"mapped",[1607,1605,1605]],[[64917,64917],"mapped",[1606,1581,1605]],[[64918,64918],"mapped",[1606,1581,1609]],[[64919,64920],"mapped",[1606,1580,1605]],[[64921,64921],"mapped",[1606,1580,1609]],[[64922,64922],"mapped",[1606,1605,1610]],[[64923,64923],"mapped",[1606,1605,1609]],[[64924,64925],"mapped",[1610,1605,1605]],[[64926,64926],"mapped",[1576,1582,1610]],[[64927,64927],"mapped",[1578,1580,1610]],[[64928,64928],"mapped",[1578,1580,1609]],[[64929,64929],"mapped",[1578,1582,1610]],[[64930,64930],"mapped",[1578,1582,1609]],[[64931,64931],"mapped",[1578,1605,1610]],[[64932,64932],"mapped",[1578,1605,1609]],[[64933,64933],"mapped",[1580,1605,1610]],[[64934,64934],"mapped",[1580,1581,1609]],[[64935,64935],"mapped",[1580,1605,1609]],[[64936,64936],"mapped",[1587,1582,1609]],[[64937,64937],"mapped",[1589,1581,1610]],[[64938,64938],"mapped",[1588,1581,1610]],[[64939,64939],"mapped",[1590,1581,1610]],[[64940,64940],"mapped",[1604,1580,1610]],[[64941,64941],"mapped",[1604,1605,1610]],[[64942,64942],"mapped",[1610,1581,1610]],[[64943,64943],"mapped",[1610,1580,1610]],[[64944,64944],"mapped",[1610,1605,1610]],[[64945,64945],"mapped",[1605,1605,1610]],[[64946,64946],"mapped",[1602,1605,1610]],[[64947,64947],"mapped",[1606,1581,1610]],[[64948,64948],"mapped",[1602,1605,1581]],[[64949,64949],"mapped",[1604,1581,1605]],[[64950,64950],"mapped",[1593,1605,1610]],[[64951,64951],"mapped",[1603,1605,1610]],[[64952,64952],"mapped",[1606,1580,1581]],[[64953,64953],"mapped",[1605,1582,1610]],[[64954,64954],"mapped",[1604,1580,1605]],[[64955,64955],"mapped",[1603,1605,1605]],[[64956,64956],"mapped",[1604,1580,1605]],[[64957,64957],"mapped",[1606,1580,1581]],[[64958,64958],"mapped",[1580,1581,1610]],[[64959,64959],"mapped",[1581,1580,1610]],[[64960,64960],"mapped",[1605,1580,1610]],[[64961,64961],"mapped",[1601,1605,1610]],[[64962,64962],"mapped",[1576,1581,1610]],[[64963,64963],"mapped",[1603,1605,1605]],[[64964,64964],"mapped",[1593,1580,1605]],[[64965,64965],"mapped",[1589,1605,1605]],[[64966,64966],"mapped",[1587,1582,1610]],[[64967,64967],"mapped",[1606,1580,1610]],[[64968,64975],"disallowed"],[[64976,65007],"disallowed"],[[65008,65008],"mapped",[1589,1604,1746]],[[65009,65009],"mapped",[1602,1604,1746]],[[65010,65010],"mapped",[1575,1604,1604,1607]],[[65011,65011],"mapped",[1575,1603,1576,1585]],[[65012,65012],"mapped",[1605,1581,1605,1583]],[[65013,65013],"mapped",[1589,1604,1593,1605]],[[65014,65014],"mapped",[1585,1587,1608,1604]],[[65015,65015],"mapped",[1593,1604,1610,1607]],[[65016,65016],"mapped",[1608,1587,1604,1605]],[[65017,65017],"mapped",[1589,1604,1609]],[[65018,65018],"disallowed_STD3_mapped",[1589,1604,1609,32,1575,1604,1604,1607,32,1593,1604,1610,1607,32,1608,1587,1604,1605]],[[65019,65019],"disallowed_STD3_mapped",[1580,1604,32,1580,1604,1575,1604,1607]],[[65020,65020],"mapped",[1585,1740,1575,1604]],[[65021,65021],"valid",[],"NV8"],[[65022,65023],"disallowed"],[[65024,65039],"ignored"],[[65040,65040],"disallowed_STD3_mapped",[44]],[[65041,65041],"mapped",[12289]],[[65042,65042],"disallowed"],[[65043,65043],"disallowed_STD3_mapped",[58]],[[65044,65044],"disallowed_STD3_mapped",[59]],[[65045,65045],"disallowed_STD3_mapped",[33]],[[65046,65046],"disallowed_STD3_mapped",[63]],[[65047,65047],"mapped",[12310]],[[65048,65048],"mapped",[12311]],[[65049,65049],"disallowed"],[[65050,65055],"disallowed"],[[65056,65059],"valid"],[[65060,65062],"valid"],[[65063,65069],"valid"],[[65070,65071],"valid"],[[65072,65072],"disallowed"],[[65073,65073],"mapped",[8212]],[[65074,65074],"mapped",[8211]],[[65075,65076],"disallowed_STD3_mapped",[95]],[[65077,65077],"disallowed_STD3_mapped",[40]],[[65078,65078],"disallowed_STD3_mapped",[41]],[[65079,65079],"disallowed_STD3_mapped",[123]],[[65080,65080],"disallowed_STD3_mapped",[125]],[[65081,65081],"mapped",[12308]],[[65082,65082],"mapped",[12309]],[[65083,65083],"mapped",[12304]],[[65084,65084],"mapped",[12305]],[[65085,65085],"mapped",[12298]],[[65086,65086],"mapped",[12299]],[[65087,65087],"mapped",[12296]],[[65088,65088],"mapped",[12297]],[[65089,65089],"mapped",[12300]],[[65090,65090],"mapped",[12301]],[[65091,65091],"mapped",[12302]],[[65092,65092],"mapped",[12303]],[[65093,65094],"valid",[],"NV8"],[[65095,65095],"disallowed_STD3_mapped",[91]],[[65096,65096],"disallowed_STD3_mapped",[93]],[[65097,65100],"disallowed_STD3_mapped",[32,773]],[[65101,65103],"disallowed_STD3_mapped",[95]],[[65104,65104],"disallowed_STD3_mapped",[44]],[[65105,65105],"mapped",[12289]],[[65106,65106],"disallowed"],[[65107,65107],"disallowed"],[[65108,65108],"disallowed_STD3_mapped",[59]],[[65109,65109],"disallowed_STD3_mapped",[58]],[[65110,65110],"disallowed_STD3_mapped",[63]],[[65111,65111],"disallowed_STD3_mapped",[33]],[[65112,65112],"mapped",[8212]],[[65113,65113],"disallowed_STD3_mapped",[40]],[[65114,65114],"disallowed_STD3_mapped",[41]],[[65115,65115],"disallowed_STD3_mapped",[123]],[[65116,65116],"disallowed_STD3_mapped",[125]],[[65117,65117],"mapped",[12308]],[[65118,65118],"mapped",[12309]],[[65119,65119],"disallowed_STD3_mapped",[35]],[[65120,65120],"disallowed_STD3_mapped",[38]],[[65121,65121],"disallowed_STD3_mapped",[42]],[[65122,65122],"disallowed_STD3_mapped",[43]],[[65123,65123],"mapped",[45]],[[65124,65124],"disallowed_STD3_mapped",[60]],[[65125,65125],"disallowed_STD3_mapped",[62]],[[65126,65126],"disallowed_STD3_mapped",[61]],[[65127,65127],"disallowed"],[[65128,65128],"disallowed_STD3_mapped",[92]],[[65129,65129],"disallowed_STD3_mapped",[36]],[[65130,65130],"disallowed_STD3_mapped",[37]],[[65131,65131],"disallowed_STD3_mapped",[64]],[[65132,65135],"disallowed"],[[65136,65136],"disallowed_STD3_mapped",[32,1611]],[[65137,65137],"mapped",[1600,1611]],[[65138,65138],"disallowed_STD3_mapped",[32,1612]],[[65139,65139],"valid"],[[65140,65140],"disallowed_STD3_mapped",[32,1613]],[[65141,65141],"disallowed"],[[65142,65142],"disallowed_STD3_mapped",[32,1614]],[[65143,65143],"mapped",[1600,1614]],[[65144,65144],"disallowed_STD3_mapped",[32,1615]],[[65145,65145],"mapped",[1600,1615]],[[65146,65146],"disallowed_STD3_mapped",[32,1616]],[[65147,65147],"mapped",[1600,1616]],[[65148,65148],"disallowed_STD3_mapped",[32,1617]],[[65149,65149],"mapped",[1600,1617]],[[65150,65150],"disallowed_STD3_mapped",[32,1618]],[[65151,65151],"mapped",[1600,1618]],[[65152,65152],"mapped",[1569]],[[65153,65154],"mapped",[1570]],[[65155,65156],"mapped",[1571]],[[65157,65158],"mapped",[1572]],[[65159,65160],"mapped",[1573]],[[65161,65164],"mapped",[1574]],[[65165,65166],"mapped",[1575]],[[65167,65170],"mapped",[1576]],[[65171,65172],"mapped",[1577]],[[65173,65176],"mapped",[1578]],[[65177,65180],"mapped",[1579]],[[65181,65184],"mapped",[1580]],[[65185,65188],"mapped",[1581]],[[65189,65192],"mapped",[1582]],[[65193,65194],"mapped",[1583]],[[65195,65196],"mapped",[1584]],[[65197,65198],"mapped",[1585]],[[65199,65200],"mapped",[1586]],[[65201,65204],"mapped",[1587]],[[65205,65208],"mapped",[1588]],[[65209,65212],"mapped",[1589]],[[65213,65216],"mapped",[1590]],[[65217,65220],"mapped",[1591]],[[65221,65224],"mapped",[1592]],[[65225,65228],"mapped",[1593]],[[65229,65232],"mapped",[1594]],[[65233,65236],"mapped",[1601]],[[65237,65240],"mapped",[1602]],[[65241,65244],"mapped",[1603]],[[65245,65248],"mapped",[1604]],[[65249,65252],"mapped",[1605]],[[65253,65256],"mapped",[1606]],[[65257,65260],"mapped",[1607]],[[65261,65262],"mapped",[1608]],[[65263,65264],"mapped",[1609]],[[65265,65268],"mapped",[1610]],[[65269,65270],"mapped",[1604,1570]],[[65271,65272],"mapped",[1604,1571]],[[65273,65274],"mapped",[1604,1573]],[[65275,65276],"mapped",[1604,1575]],[[65277,65278],"disallowed"],[[65279,65279],"ignored"],[[65280,65280],"disallowed"],[[65281,65281],"disallowed_STD3_mapped",[33]],[[65282,65282],"disallowed_STD3_mapped",[34]],[[65283,65283],"disallowed_STD3_mapped",[35]],[[65284,65284],"disallowed_STD3_mapped",[36]],[[65285,65285],"disallowed_STD3_mapped",[37]],[[65286,65286],"disallowed_STD3_mapped",[38]],[[65287,65287],"disallowed_STD3_mapped",[39]],[[65288,65288],"disallowed_STD3_mapped",[40]],[[65289,65289],"disallowed_STD3_mapped",[41]],[[65290,65290],"disallowed_STD3_mapped",[42]],[[65291,65291],"disallowed_STD3_mapped",[43]],[[65292,65292],"disallowed_STD3_mapped",[44]],[[65293,65293],"mapped",[45]],[[65294,65294],"mapped",[46]],[[65295,65295],"disallowed_STD3_mapped",[47]],[[65296,65296],"mapped",[48]],[[65297,65297],"mapped",[49]],[[65298,65298],"mapped",[50]],[[65299,65299],"mapped",[51]],[[65300,65300],"mapped",[52]],[[65301,65301],"mapped",[53]],[[65302,65302],"mapped",[54]],[[65303,65303],"mapped",[55]],[[65304,65304],"mapped",[56]],[[65305,65305],"mapped",[57]],[[65306,65306],"disallowed_STD3_mapped",[58]],[[65307,65307],"disallowed_STD3_mapped",[59]],[[65308,65308],"disallowed_STD3_mapped",[60]],[[65309,65309],"disallowed_STD3_mapped",[61]],[[65310,65310],"disallowed_STD3_mapped",[62]],[[65311,65311],"disallowed_STD3_mapped",[63]],[[65312,65312],"disallowed_STD3_mapped",[64]],[[65313,65313],"mapped",[97]],[[65314,65314],"mapped",[98]],[[65315,65315],"mapped",[99]],[[65316,65316],"mapped",[100]],[[65317,65317],"mapped",[101]],[[65318,65318],"mapped",[102]],[[65319,65319],"mapped",[103]],[[65320,65320],"mapped",[104]],[[65321,65321],"mapped",[105]],[[65322,65322],"mapped",[106]],[[65323,65323],"mapped",[107]],[[65324,65324],"mapped",[108]],[[65325,65325],"mapped",[109]],[[65326,65326],"mapped",[110]],[[65327,65327],"mapped",[111]],[[65328,65328],"mapped",[112]],[[65329,65329],"mapped",[113]],[[65330,65330],"mapped",[114]],[[65331,65331],"mapped",[115]],[[65332,65332],"mapped",[116]],[[65333,65333],"mapped",[117]],[[65334,65334],"mapped",[118]],[[65335,65335],"mapped",[119]],[[65336,65336],"mapped",[120]],[[65337,65337],"mapped",[121]],[[65338,65338],"mapped",[122]],[[65339,65339],"disallowed_STD3_mapped",[91]],[[65340,65340],"disallowed_STD3_mapped",[92]],[[65341,65341],"disallowed_STD3_mapped",[93]],[[65342,65342],"disallowed_STD3_mapped",[94]],[[65343,65343],"disallowed_STD3_mapped",[95]],[[65344,65344],"disallowed_STD3_mapped",[96]],[[65345,65345],"mapped",[97]],[[65346,65346],"mapped",[98]],[[65347,65347],"mapped",[99]],[[65348,65348],"mapped",[100]],[[65349,65349],"mapped",[101]],[[65350,65350],"mapped",[102]],[[65351,65351],"mapped",[103]],[[65352,65352],"mapped",[104]],[[65353,65353],"mapped",[105]],[[65354,65354],"mapped",[106]],[[65355,65355],"mapped",[107]],[[65356,65356],"mapped",[108]],[[65357,65357],"mapped",[109]],[[65358,65358],"mapped",[110]],[[65359,65359],"mapped",[111]],[[65360,65360],"mapped",[112]],[[65361,65361],"mapped",[113]],[[65362,65362],"mapped",[114]],[[65363,65363],"mapped",[115]],[[65364,65364],"mapped",[116]],[[65365,65365],"mapped",[117]],[[65366,65366],"mapped",[118]],[[65367,65367],"mapped",[119]],[[65368,65368],"mapped",[120]],[[65369,65369],"mapped",[121]],[[65370,65370],"mapped",[122]],[[65371,65371],"disallowed_STD3_mapped",[123]],[[65372,65372],"disallowed_STD3_mapped",[124]],[[65373,65373],"disallowed_STD3_mapped",[125]],[[65374,65374],"disallowed_STD3_mapped",[126]],[[65375,65375],"mapped",[10629]],[[65376,65376],"mapped",[10630]],[[65377,65377],"mapped",[46]],[[65378,65378],"mapped",[12300]],[[65379,65379],"mapped",[12301]],[[65380,65380],"mapped",[12289]],[[65381,65381],"mapped",[12539]],[[65382,65382],"mapped",[12530]],[[65383,65383],"mapped",[12449]],[[65384,65384],"mapped",[12451]],[[65385,65385],"mapped",[12453]],[[65386,65386],"mapped",[12455]],[[65387,65387],"mapped",[12457]],[[65388,65388],"mapped",[12515]],[[65389,65389],"mapped",[12517]],[[65390,65390],"mapped",[12519]],[[65391,65391],"mapped",[12483]],[[65392,65392],"mapped",[12540]],[[65393,65393],"mapped",[12450]],[[65394,65394],"mapped",[12452]],[[65395,65395],"mapped",[12454]],[[65396,65396],"mapped",[12456]],[[65397,65397],"mapped",[12458]],[[65398,65398],"mapped",[12459]],[[65399,65399],"mapped",[12461]],[[65400,65400],"mapped",[12463]],[[65401,65401],"mapped",[12465]],[[65402,65402],"mapped",[12467]],[[65403,65403],"mapped",[12469]],[[65404,65404],"mapped",[12471]],[[65405,65405],"mapped",[12473]],[[65406,65406],"mapped",[12475]],[[65407,65407],"mapped",[12477]],[[65408,65408],"mapped",[12479]],[[65409,65409],"mapped",[12481]],[[65410,65410],"mapped",[12484]],[[65411,65411],"mapped",[12486]],[[65412,65412],"mapped",[12488]],[[65413,65413],"mapped",[12490]],[[65414,65414],"mapped",[12491]],[[65415,65415],"mapped",[12492]],[[65416,65416],"mapped",[12493]],[[65417,65417],"mapped",[12494]],[[65418,65418],"mapped",[12495]],[[65419,65419],"mapped",[12498]],[[65420,65420],"mapped",[12501]],[[65421,65421],"mapped",[12504]],[[65422,65422],"mapped",[12507]],[[65423,65423],"mapped",[12510]],[[65424,65424],"mapped",[12511]],[[65425,65425],"mapped",[12512]],[[65426,65426],"mapped",[12513]],[[65427,65427],"mapped",[12514]],[[65428,65428],"mapped",[12516]],[[65429,65429],"mapped",[12518]],[[65430,65430],"mapped",[12520]],[[65431,65431],"mapped",[12521]],[[65432,65432],"mapped",[12522]],[[65433,65433],"mapped",[12523]],[[65434,65434],"mapped",[12524]],[[65435,65435],"mapped",[12525]],[[65436,65436],"mapped",[12527]],[[65437,65437],"mapped",[12531]],[[65438,65438],"mapped",[12441]],[[65439,65439],"mapped",[12442]],[[65440,65440],"disallowed"],[[65441,65441],"mapped",[4352]],[[65442,65442],"mapped",[4353]],[[65443,65443],"mapped",[4522]],[[65444,65444],"mapped",[4354]],[[65445,65445],"mapped",[4524]],[[65446,65446],"mapped",[4525]],[[65447,65447],"mapped",[4355]],[[65448,65448],"mapped",[4356]],[[65449,65449],"mapped",[4357]],[[65450,65450],"mapped",[4528]],[[65451,65451],"mapped",[4529]],[[65452,65452],"mapped",[4530]],[[65453,65453],"mapped",[4531]],[[65454,65454],"mapped",[4532]],[[65455,65455],"mapped",[4533]],[[65456,65456],"mapped",[4378]],[[65457,65457],"mapped",[4358]],[[65458,65458],"mapped",[4359]],[[65459,65459],"mapped",[4360]],[[65460,65460],"mapped",[4385]],[[65461,65461],"mapped",[4361]],[[65462,65462],"mapped",[4362]],[[65463,65463],"mapped",[4363]],[[65464,65464],"mapped",[4364]],[[65465,65465],"mapped",[4365]],[[65466,65466],"mapped",[4366]],[[65467,65467],"mapped",[4367]],[[65468,65468],"mapped",[4368]],[[65469,65469],"mapped",[4369]],[[65470,65470],"mapped",[4370]],[[65471,65473],"disallowed"],[[65474,65474],"mapped",[4449]],[[65475,65475],"mapped",[4450]],[[65476,65476],"mapped",[4451]],[[65477,65477],"mapped",[4452]],[[65478,65478],"mapped",[4453]],[[65479,65479],"mapped",[4454]],[[65480,65481],"disallowed"],[[65482,65482],"mapped",[4455]],[[65483,65483],"mapped",[4456]],[[65484,65484],"mapped",[4457]],[[65485,65485],"mapped",[4458]],[[65486,65486],"mapped",[4459]],[[65487,65487],"mapped",[4460]],[[65488,65489],"disallowed"],[[65490,65490],"mapped",[4461]],[[65491,65491],"mapped",[4462]],[[65492,65492],"mapped",[4463]],[[65493,65493],"mapped",[4464]],[[65494,65494],"mapped",[4465]],[[65495,65495],"mapped",[4466]],[[65496,65497],"disallowed"],[[65498,65498],"mapped",[4467]],[[65499,65499],"mapped",[4468]],[[65500,65500],"mapped",[4469]],[[65501,65503],"disallowed"],[[65504,65504],"mapped",[162]],[[65505,65505],"mapped",[163]],[[65506,65506],"mapped",[172]],[[65507,65507],"disallowed_STD3_mapped",[32,772]],[[65508,65508],"mapped",[166]],[[65509,65509],"mapped",[165]],[[65510,65510],"mapped",[8361]],[[65511,65511],"disallowed"],[[65512,65512],"mapped",[9474]],[[65513,65513],"mapped",[8592]],[[65514,65514],"mapped",[8593]],[[65515,65515],"mapped",[8594]],[[65516,65516],"mapped",[8595]],[[65517,65517],"mapped",[9632]],[[65518,65518],"mapped",[9675]],[[65519,65528],"disallowed"],[[65529,65531],"disallowed"],[[65532,65532],"disallowed"],[[65533,65533],"disallowed"],[[65534,65535],"disallowed"],[[65536,65547],"valid"],[[65548,65548],"disallowed"],[[65549,65574],"valid"],[[65575,65575],"disallowed"],[[65576,65594],"valid"],[[65595,65595],"disallowed"],[[65596,65597],"valid"],[[65598,65598],"disallowed"],[[65599,65613],"valid"],[[65614,65615],"disallowed"],[[65616,65629],"valid"],[[65630,65663],"disallowed"],[[65664,65786],"valid"],[[65787,65791],"disallowed"],[[65792,65794],"valid",[],"NV8"],[[65795,65798],"disallowed"],[[65799,65843],"valid",[],"NV8"],[[65844,65846],"disallowed"],[[65847,65855],"valid",[],"NV8"],[[65856,65930],"valid",[],"NV8"],[[65931,65932],"valid",[],"NV8"],[[65933,65935],"disallowed"],[[65936,65947],"valid",[],"NV8"],[[65948,65951],"disallowed"],[[65952,65952],"valid",[],"NV8"],[[65953,65999],"disallowed"],[[66000,66044],"valid",[],"NV8"],[[66045,66045],"valid"],[[66046,66175],"disallowed"],[[66176,66204],"valid"],[[66205,66207],"disallowed"],[[66208,66256],"valid"],[[66257,66271],"disallowed"],[[66272,66272],"valid"],[[66273,66299],"valid",[],"NV8"],[[66300,66303],"disallowed"],[[66304,66334],"valid"],[[66335,66335],"valid"],[[66336,66339],"valid",[],"NV8"],[[66340,66351],"disallowed"],[[66352,66368],"valid"],[[66369,66369],"valid",[],"NV8"],[[66370,66377],"valid"],[[66378,66378],"valid",[],"NV8"],[[66379,66383],"disallowed"],[[66384,66426],"valid"],[[66427,66431],"disallowed"],[[66432,66461],"valid"],[[66462,66462],"disallowed"],[[66463,66463],"valid",[],"NV8"],[[66464,66499],"valid"],[[66500,66503],"disallowed"],[[66504,66511],"valid"],[[66512,66517],"valid",[],"NV8"],[[66518,66559],"disallowed"],[[66560,66560],"mapped",[66600]],[[66561,66561],"mapped",[66601]],[[66562,66562],"mapped",[66602]],[[66563,66563],"mapped",[66603]],[[66564,66564],"mapped",[66604]],[[66565,66565],"mapped",[66605]],[[66566,66566],"mapped",[66606]],[[66567,66567],"mapped",[66607]],[[66568,66568],"mapped",[66608]],[[66569,66569],"mapped",[66609]],[[66570,66570],"mapped",[66610]],[[66571,66571],"mapped",[66611]],[[66572,66572],"mapped",[66612]],[[66573,66573],"mapped",[66613]],[[66574,66574],"mapped",[66614]],[[66575,66575],"mapped",[66615]],[[66576,66576],"mapped",[66616]],[[66577,66577],"mapped",[66617]],[[66578,66578],"mapped",[66618]],[[66579,66579],"mapped",[66619]],[[66580,66580],"mapped",[66620]],[[66581,66581],"mapped",[66621]],[[66582,66582],"mapped",[66622]],[[66583,66583],"mapped",[66623]],[[66584,66584],"mapped",[66624]],[[66585,66585],"mapped",[66625]],[[66586,66586],"mapped",[66626]],[[66587,66587],"mapped",[66627]],[[66588,66588],"mapped",[66628]],[[66589,66589],"mapped",[66629]],[[66590,66590],"mapped",[66630]],[[66591,66591],"mapped",[66631]],[[66592,66592],"mapped",[66632]],[[66593,66593],"mapped",[66633]],[[66594,66594],"mapped",[66634]],[[66595,66595],"mapped",[66635]],[[66596,66596],"mapped",[66636]],[[66597,66597],"mapped",[66637]],[[66598,66598],"mapped",[66638]],[[66599,66599],"mapped",[66639]],[[66600,66637],"valid"],[[66638,66717],"valid"],[[66718,66719],"disallowed"],[[66720,66729],"valid"],[[66730,66815],"disallowed"],[[66816,66855],"valid"],[[66856,66863],"disallowed"],[[66864,66915],"valid"],[[66916,66926],"disallowed"],[[66927,66927],"valid",[],"NV8"],[[66928,67071],"disallowed"],[[67072,67382],"valid"],[[67383,67391],"disallowed"],[[67392,67413],"valid"],[[67414,67423],"disallowed"],[[67424,67431],"valid"],[[67432,67583],"disallowed"],[[67584,67589],"valid"],[[67590,67591],"disallowed"],[[67592,67592],"valid"],[[67593,67593],"disallowed"],[[67594,67637],"valid"],[[67638,67638],"disallowed"],[[67639,67640],"valid"],[[67641,67643],"disallowed"],[[67644,67644],"valid"],[[67645,67646],"disallowed"],[[67647,67647],"valid"],[[67648,67669],"valid"],[[67670,67670],"disallowed"],[[67671,67679],"valid",[],"NV8"],[[67680,67702],"valid"],[[67703,67711],"valid",[],"NV8"],[[67712,67742],"valid"],[[67743,67750],"disallowed"],[[67751,67759],"valid",[],"NV8"],[[67760,67807],"disallowed"],[[67808,67826],"valid"],[[67827,67827],"disallowed"],[[67828,67829],"valid"],[[67830,67834],"disallowed"],[[67835,67839],"valid",[],"NV8"],[[67840,67861],"valid"],[[67862,67865],"valid",[],"NV8"],[[67866,67867],"valid",[],"NV8"],[[67868,67870],"disallowed"],[[67871,67871],"valid",[],"NV8"],[[67872,67897],"valid"],[[67898,67902],"disallowed"],[[67903,67903],"valid",[],"NV8"],[[67904,67967],"disallowed"],[[67968,68023],"valid"],[[68024,68027],"disallowed"],[[68028,68029],"valid",[],"NV8"],[[68030,68031],"valid"],[[68032,68047],"valid",[],"NV8"],[[68048,68049],"disallowed"],[[68050,68095],"valid",[],"NV8"],[[68096,68099],"valid"],[[68100,68100],"disallowed"],[[68101,68102],"valid"],[[68103,68107],"disallowed"],[[68108,68115],"valid"],[[68116,68116],"disallowed"],[[68117,68119],"valid"],[[68120,68120],"disallowed"],[[68121,68147],"valid"],[[68148,68151],"disallowed"],[[68152,68154],"valid"],[[68155,68158],"disallowed"],[[68159,68159],"valid"],[[68160,68167],"valid",[],"NV8"],[[68168,68175],"disallowed"],[[68176,68184],"valid",[],"NV8"],[[68185,68191],"disallowed"],[[68192,68220],"valid"],[[68221,68223],"valid",[],"NV8"],[[68224,68252],"valid"],[[68253,68255],"valid",[],"NV8"],[[68256,68287],"disallowed"],[[68288,68295],"valid"],[[68296,68296],"valid",[],"NV8"],[[68297,68326],"valid"],[[68327,68330],"disallowed"],[[68331,68342],"valid",[],"NV8"],[[68343,68351],"disallowed"],[[68352,68405],"valid"],[[68406,68408],"disallowed"],[[68409,68415],"valid",[],"NV8"],[[68416,68437],"valid"],[[68438,68439],"disallowed"],[[68440,68447],"valid",[],"NV8"],[[68448,68466],"valid"],[[68467,68471],"disallowed"],[[68472,68479],"valid",[],"NV8"],[[68480,68497],"valid"],[[68498,68504],"disallowed"],[[68505,68508],"valid",[],"NV8"],[[68509,68520],"disallowed"],[[68521,68527],"valid",[],"NV8"],[[68528,68607],"disallowed"],[[68608,68680],"valid"],[[68681,68735],"disallowed"],[[68736,68736],"mapped",[68800]],[[68737,68737],"mapped",[68801]],[[68738,68738],"mapped",[68802]],[[68739,68739],"mapped",[68803]],[[68740,68740],"mapped",[68804]],[[68741,68741],"mapped",[68805]],[[68742,68742],"mapped",[68806]],[[68743,68743],"mapped",[68807]],[[68744,68744],"mapped",[68808]],[[68745,68745],"mapped",[68809]],[[68746,68746],"mapped",[68810]],[[68747,68747],"mapped",[68811]],[[68748,68748],"mapped",[68812]],[[68749,68749],"mapped",[68813]],[[68750,68750],"mapped",[68814]],[[68751,68751],"mapped",[68815]],[[68752,68752],"mapped",[68816]],[[68753,68753],"mapped",[68817]],[[68754,68754],"mapped",[68818]],[[68755,68755],"mapped",[68819]],[[68756,68756],"mapped",[68820]],[[68757,68757],"mapped",[68821]],[[68758,68758],"mapped",[68822]],[[68759,68759],"mapped",[68823]],[[68760,68760],"mapped",[68824]],[[68761,68761],"mapped",[68825]],[[68762,68762],"mapped",[68826]],[[68763,68763],"mapped",[68827]],[[68764,68764],"mapped",[68828]],[[68765,68765],"mapped",[68829]],[[68766,68766],"mapped",[68830]],[[68767,68767],"mapped",[68831]],[[68768,68768],"mapped",[68832]],[[68769,68769],"mapped",[68833]],[[68770,68770],"mapped",[68834]],[[68771,68771],"mapped",[68835]],[[68772,68772],"mapped",[68836]],[[68773,68773],"mapped",[68837]],[[68774,68774],"mapped",[68838]],[[68775,68775],"mapped",[68839]],[[68776,68776],"mapped",[68840]],[[68777,68777],"mapped",[68841]],[[68778,68778],"mapped",[68842]],[[68779,68779],"mapped",[68843]],[[68780,68780],"mapped",[68844]],[[68781,68781],"mapped",[68845]],[[68782,68782],"mapped",[68846]],[[68783,68783],"mapped",[68847]],[[68784,68784],"mapped",[68848]],[[68785,68785],"mapped",[68849]],[[68786,68786],"mapped",[68850]],[[68787,68799],"disallowed"],[[68800,68850],"valid"],[[68851,68857],"disallowed"],[[68858,68863],"valid",[],"NV8"],[[68864,69215],"disallowed"],[[69216,69246],"valid",[],"NV8"],[[69247,69631],"disallowed"],[[69632,69702],"valid"],[[69703,69709],"valid",[],"NV8"],[[69710,69713],"disallowed"],[[69714,69733],"valid",[],"NV8"],[[69734,69743],"valid"],[[69744,69758],"disallowed"],[[69759,69759],"valid"],[[69760,69818],"valid"],[[69819,69820],"valid",[],"NV8"],[[69821,69821],"disallowed"],[[69822,69825],"valid",[],"NV8"],[[69826,69839],"disallowed"],[[69840,69864],"valid"],[[69865,69871],"disallowed"],[[69872,69881],"valid"],[[69882,69887],"disallowed"],[[69888,69940],"valid"],[[69941,69941],"disallowed"],[[69942,69951],"valid"],[[69952,69955],"valid",[],"NV8"],[[69956,69967],"disallowed"],[[69968,70003],"valid"],[[70004,70005],"valid",[],"NV8"],[[70006,70006],"valid"],[[70007,70015],"disallowed"],[[70016,70084],"valid"],[[70085,70088],"valid",[],"NV8"],[[70089,70089],"valid",[],"NV8"],[[70090,70092],"valid"],[[70093,70093],"valid",[],"NV8"],[[70094,70095],"disallowed"],[[70096,70105],"valid"],[[70106,70106],"valid"],[[70107,70107],"valid",[],"NV8"],[[70108,70108],"valid"],[[70109,70111],"valid",[],"NV8"],[[70112,70112],"disallowed"],[[70113,70132],"valid",[],"NV8"],[[70133,70143],"disallowed"],[[70144,70161],"valid"],[[70162,70162],"disallowed"],[[70163,70199],"valid"],[[70200,70205],"valid",[],"NV8"],[[70206,70271],"disallowed"],[[70272,70278],"valid"],[[70279,70279],"disallowed"],[[70280,70280],"valid"],[[70281,70281],"disallowed"],[[70282,70285],"valid"],[[70286,70286],"disallowed"],[[70287,70301],"valid"],[[70302,70302],"disallowed"],[[70303,70312],"valid"],[[70313,70313],"valid",[],"NV8"],[[70314,70319],"disallowed"],[[70320,70378],"valid"],[[70379,70383],"disallowed"],[[70384,70393],"valid"],[[70394,70399],"disallowed"],[[70400,70400],"valid"],[[70401,70403],"valid"],[[70404,70404],"disallowed"],[[70405,70412],"valid"],[[70413,70414],"disallowed"],[[70415,70416],"valid"],[[70417,70418],"disallowed"],[[70419,70440],"valid"],[[70441,70441],"disallowed"],[[70442,70448],"valid"],[[70449,70449],"disallowed"],[[70450,70451],"valid"],[[70452,70452],"disallowed"],[[70453,70457],"valid"],[[70458,70459],"disallowed"],[[70460,70468],"valid"],[[70469,70470],"disallowed"],[[70471,70472],"valid"],[[70473,70474],"disallowed"],[[70475,70477],"valid"],[[70478,70479],"disallowed"],[[70480,70480],"valid"],[[70481,70486],"disallowed"],[[70487,70487],"valid"],[[70488,70492],"disallowed"],[[70493,70499],"valid"],[[70500,70501],"disallowed"],[[70502,70508],"valid"],[[70509,70511],"disallowed"],[[70512,70516],"valid"],[[70517,70783],"disallowed"],[[70784,70853],"valid"],[[70854,70854],"valid",[],"NV8"],[[70855,70855],"valid"],[[70856,70863],"disallowed"],[[70864,70873],"valid"],[[70874,71039],"disallowed"],[[71040,71093],"valid"],[[71094,71095],"disallowed"],[[71096,71104],"valid"],[[71105,71113],"valid",[],"NV8"],[[71114,71127],"valid",[],"NV8"],[[71128,71133],"valid"],[[71134,71167],"disallowed"],[[71168,71232],"valid"],[[71233,71235],"valid",[],"NV8"],[[71236,71236],"valid"],[[71237,71247],"disallowed"],[[71248,71257],"valid"],[[71258,71295],"disallowed"],[[71296,71351],"valid"],[[71352,71359],"disallowed"],[[71360,71369],"valid"],[[71370,71423],"disallowed"],[[71424,71449],"valid"],[[71450,71452],"disallowed"],[[71453,71467],"valid"],[[71468,71471],"disallowed"],[[71472,71481],"valid"],[[71482,71487],"valid",[],"NV8"],[[71488,71839],"disallowed"],[[71840,71840],"mapped",[71872]],[[71841,71841],"mapped",[71873]],[[71842,71842],"mapped",[71874]],[[71843,71843],"mapped",[71875]],[[71844,71844],"mapped",[71876]],[[71845,71845],"mapped",[71877]],[[71846,71846],"mapped",[71878]],[[71847,71847],"mapped",[71879]],[[71848,71848],"mapped",[71880]],[[71849,71849],"mapped",[71881]],[[71850,71850],"mapped",[71882]],[[71851,71851],"mapped",[71883]],[[71852,71852],"mapped",[71884]],[[71853,71853],"mapped",[71885]],[[71854,71854],"mapped",[71886]],[[71855,71855],"mapped",[71887]],[[71856,71856],"mapped",[71888]],[[71857,71857],"mapped",[71889]],[[71858,71858],"mapped",[71890]],[[71859,71859],"mapped",[71891]],[[71860,71860],"mapped",[71892]],[[71861,71861],"mapped",[71893]],[[71862,71862],"mapped",[71894]],[[71863,71863],"mapped",[71895]],[[71864,71864],"mapped",[71896]],[[71865,71865],"mapped",[71897]],[[71866,71866],"mapped",[71898]],[[71867,71867],"mapped",[71899]],[[71868,71868],"mapped",[71900]],[[71869,71869],"mapped",[71901]],[[71870,71870],"mapped",[71902]],[[71871,71871],"mapped",[71903]],[[71872,71913],"valid"],[[71914,71922],"valid",[],"NV8"],[[71923,71934],"disallowed"],[[71935,71935],"valid"],[[71936,72383],"disallowed"],[[72384,72440],"valid"],[[72441,73727],"disallowed"],[[73728,74606],"valid"],[[74607,74648],"valid"],[[74649,74649],"valid"],[[74650,74751],"disallowed"],[[74752,74850],"valid",[],"NV8"],[[74851,74862],"valid",[],"NV8"],[[74863,74863],"disallowed"],[[74864,74867],"valid",[],"NV8"],[[74868,74868],"valid",[],"NV8"],[[74869,74879],"disallowed"],[[74880,75075],"valid"],[[75076,77823],"disallowed"],[[77824,78894],"valid"],[[78895,82943],"disallowed"],[[82944,83526],"valid"],[[83527,92159],"disallowed"],[[92160,92728],"valid"],[[92729,92735],"disallowed"],[[92736,92766],"valid"],[[92767,92767],"disallowed"],[[92768,92777],"valid"],[[92778,92781],"disallowed"],[[92782,92783],"valid",[],"NV8"],[[92784,92879],"disallowed"],[[92880,92909],"valid"],[[92910,92911],"disallowed"],[[92912,92916],"valid"],[[92917,92917],"valid",[],"NV8"],[[92918,92927],"disallowed"],[[92928,92982],"valid"],[[92983,92991],"valid",[],"NV8"],[[92992,92995],"valid"],[[92996,92997],"valid",[],"NV8"],[[92998,93007],"disallowed"],[[93008,93017],"valid"],[[93018,93018],"disallowed"],[[93019,93025],"valid",[],"NV8"],[[93026,93026],"disallowed"],[[93027,93047],"valid"],[[93048,93052],"disallowed"],[[93053,93071],"valid"],[[93072,93951],"disallowed"],[[93952,94020],"valid"],[[94021,94031],"disallowed"],[[94032,94078],"valid"],[[94079,94094],"disallowed"],[[94095,94111],"valid"],[[94112,110591],"disallowed"],[[110592,110593],"valid"],[[110594,113663],"disallowed"],[[113664,113770],"valid"],[[113771,113775],"disallowed"],[[113776,113788],"valid"],[[113789,113791],"disallowed"],[[113792,113800],"valid"],[[113801,113807],"disallowed"],[[113808,113817],"valid"],[[113818,113819],"disallowed"],[[113820,113820],"valid",[],"NV8"],[[113821,113822],"valid"],[[113823,113823],"valid",[],"NV8"],[[113824,113827],"ignored"],[[113828,118783],"disallowed"],[[118784,119029],"valid",[],"NV8"],[[119030,119039],"disallowed"],[[119040,119078],"valid",[],"NV8"],[[119079,119080],"disallowed"],[[119081,119081],"valid",[],"NV8"],[[119082,119133],"valid",[],"NV8"],[[119134,119134],"mapped",[119127,119141]],[[119135,119135],"mapped",[119128,119141]],[[119136,119136],"mapped",[119128,119141,119150]],[[119137,119137],"mapped",[119128,119141,119151]],[[119138,119138],"mapped",[119128,119141,119152]],[[119139,119139],"mapped",[119128,119141,119153]],[[119140,119140],"mapped",[119128,119141,119154]],[[119141,119154],"valid",[],"NV8"],[[119155,119162],"disallowed"],[[119163,119226],"valid",[],"NV8"],[[119227,119227],"mapped",[119225,119141]],[[119228,119228],"mapped",[119226,119141]],[[119229,119229],"mapped",[119225,119141,119150]],[[119230,119230],"mapped",[119226,119141,119150]],[[119231,119231],"mapped",[119225,119141,119151]],[[119232,119232],"mapped",[119226,119141,119151]],[[119233,119261],"valid",[],"NV8"],[[119262,119272],"valid",[],"NV8"],[[119273,119295],"disallowed"],[[119296,119365],"valid",[],"NV8"],[[119366,119551],"disallowed"],[[119552,119638],"valid",[],"NV8"],[[119639,119647],"disallowed"],[[119648,119665],"valid",[],"NV8"],[[119666,119807],"disallowed"],[[119808,119808],"mapped",[97]],[[119809,119809],"mapped",[98]],[[119810,119810],"mapped",[99]],[[119811,119811],"mapped",[100]],[[119812,119812],"mapped",[101]],[[119813,119813],"mapped",[102]],[[119814,119814],"mapped",[103]],[[119815,119815],"mapped",[104]],[[119816,119816],"mapped",[105]],[[119817,119817],"mapped",[106]],[[119818,119818],"mapped",[107]],[[119819,119819],"mapped",[108]],[[119820,119820],"mapped",[109]],[[119821,119821],"mapped",[110]],[[119822,119822],"mapped",[111]],[[119823,119823],"mapped",[112]],[[119824,119824],"mapped",[113]],[[119825,119825],"mapped",[114]],[[119826,119826],"mapped",[115]],[[119827,119827],"mapped",[116]],[[119828,119828],"mapped",[117]],[[119829,119829],"mapped",[118]],[[119830,119830],"mapped",[119]],[[119831,119831],"mapped",[120]],[[119832,119832],"mapped",[121]],[[119833,119833],"mapped",[122]],[[119834,119834],"mapped",[97]],[[119835,119835],"mapped",[98]],[[119836,119836],"mapped",[99]],[[119837,119837],"mapped",[100]],[[119838,119838],"mapped",[101]],[[119839,119839],"mapped",[102]],[[119840,119840],"mapped",[103]],[[119841,119841],"mapped",[104]],[[119842,119842],"mapped",[105]],[[119843,119843],"mapped",[106]],[[119844,119844],"mapped",[107]],[[119845,119845],"mapped",[108]],[[119846,119846],"mapped",[109]],[[119847,119847],"mapped",[110]],[[119848,119848],"mapped",[111]],[[119849,119849],"mapped",[112]],[[119850,119850],"mapped",[113]],[[119851,119851],"mapped",[114]],[[119852,119852],"mapped",[115]],[[119853,119853],"mapped",[116]],[[119854,119854],"mapped",[117]],[[119855,119855],"mapped",[118]],[[119856,119856],"mapped",[119]],[[119857,119857],"mapped",[120]],[[119858,119858],"mapped",[121]],[[119859,119859],"mapped",[122]],[[119860,119860],"mapped",[97]],[[119861,119861],"mapped",[98]],[[119862,119862],"mapped",[99]],[[119863,119863],"mapped",[100]],[[119864,119864],"mapped",[101]],[[119865,119865],"mapped",[102]],[[119866,119866],"mapped",[103]],[[119867,119867],"mapped",[104]],[[119868,119868],"mapped",[105]],[[119869,119869],"mapped",[106]],[[119870,119870],"mapped",[107]],[[119871,119871],"mapped",[108]],[[119872,119872],"mapped",[109]],[[119873,119873],"mapped",[110]],[[119874,119874],"mapped",[111]],[[119875,119875],"mapped",[112]],[[119876,119876],"mapped",[113]],[[119877,119877],"mapped",[114]],[[119878,119878],"mapped",[115]],[[119879,119879],"mapped",[116]],[[119880,119880],"mapped",[117]],[[119881,119881],"mapped",[118]],[[119882,119882],"mapped",[119]],[[119883,119883],"mapped",[120]],[[119884,119884],"mapped",[121]],[[119885,119885],"mapped",[122]],[[119886,119886],"mapped",[97]],[[119887,119887],"mapped",[98]],[[119888,119888],"mapped",[99]],[[119889,119889],"mapped",[100]],[[119890,119890],"mapped",[101]],[[119891,119891],"mapped",[102]],[[119892,119892],"mapped",[103]],[[119893,119893],"disallowed"],[[119894,119894],"mapped",[105]],[[119895,119895],"mapped",[106]],[[119896,119896],"mapped",[107]],[[119897,119897],"mapped",[108]],[[119898,119898],"mapped",[109]],[[119899,119899],"mapped",[110]],[[119900,119900],"mapped",[111]],[[119901,119901],"mapped",[112]],[[119902,119902],"mapped",[113]],[[119903,119903],"mapped",[114]],[[119904,119904],"mapped",[115]],[[119905,119905],"mapped",[116]],[[119906,119906],"mapped",[117]],[[119907,119907],"mapped",[118]],[[119908,119908],"mapped",[119]],[[119909,119909],"mapped",[120]],[[119910,119910],"mapped",[121]],[[119911,119911],"mapped",[122]],[[119912,119912],"mapped",[97]],[[119913,119913],"mapped",[98]],[[119914,119914],"mapped",[99]],[[119915,119915],"mapped",[100]],[[119916,119916],"mapped",[101]],[[119917,119917],"mapped",[102]],[[119918,119918],"mapped",[103]],[[119919,119919],"mapped",[104]],[[119920,119920],"mapped",[105]],[[119921,119921],"mapped",[106]],[[119922,119922],"mapped",[107]],[[119923,119923],"mapped",[108]],[[119924,119924],"mapped",[109]],[[119925,119925],"mapped",[110]],[[119926,119926],"mapped",[111]],[[119927,119927],"mapped",[112]],[[119928,119928],"mapped",[113]],[[119929,119929],"mapped",[114]],[[119930,119930],"mapped",[115]],[[119931,119931],"mapped",[116]],[[119932,119932],"mapped",[117]],[[119933,119933],"mapped",[118]],[[119934,119934],"mapped",[119]],[[119935,119935],"mapped",[120]],[[119936,119936],"mapped",[121]],[[119937,119937],"mapped",[122]],[[119938,119938],"mapped",[97]],[[119939,119939],"mapped",[98]],[[119940,119940],"mapped",[99]],[[119941,119941],"mapped",[100]],[[119942,119942],"mapped",[101]],[[119943,119943],"mapped",[102]],[[119944,119944],"mapped",[103]],[[119945,119945],"mapped",[104]],[[119946,119946],"mapped",[105]],[[119947,119947],"mapped",[106]],[[119948,119948],"mapped",[107]],[[119949,119949],"mapped",[108]],[[119950,119950],"mapped",[109]],[[119951,119951],"mapped",[110]],[[119952,119952],"mapped",[111]],[[119953,119953],"mapped",[112]],[[119954,119954],"mapped",[113]],[[119955,119955],"mapped",[114]],[[119956,119956],"mapped",[115]],[[119957,119957],"mapped",[116]],[[119958,119958],"mapped",[117]],[[119959,119959],"mapped",[118]],[[119960,119960],"mapped",[119]],[[119961,119961],"mapped",[120]],[[119962,119962],"mapped",[121]],[[119963,119963],"mapped",[122]],[[119964,119964],"mapped",[97]],[[119965,119965],"disallowed"],[[119966,119966],"mapped",[99]],[[119967,119967],"mapped",[100]],[[119968,119969],"disallowed"],[[119970,119970],"mapped",[103]],[[119971,119972],"disallowed"],[[119973,119973],"mapped",[106]],[[119974,119974],"mapped",[107]],[[119975,119976],"disallowed"],[[119977,119977],"mapped",[110]],[[119978,119978],"mapped",[111]],[[119979,119979],"mapped",[112]],[[119980,119980],"mapped",[113]],[[119981,119981],"disallowed"],[[119982,119982],"mapped",[115]],[[119983,119983],"mapped",[116]],[[119984,119984],"mapped",[117]],[[119985,119985],"mapped",[118]],[[119986,119986],"mapped",[119]],[[119987,119987],"mapped",[120]],[[119988,119988],"mapped",[121]],[[119989,119989],"mapped",[122]],[[119990,119990],"mapped",[97]],[[119991,119991],"mapped",[98]],[[119992,119992],"mapped",[99]],[[119993,119993],"mapped",[100]],[[119994,119994],"disallowed"],[[119995,119995],"mapped",[102]],[[119996,119996],"disallowed"],[[119997,119997],"mapped",[104]],[[119998,119998],"mapped",[105]],[[119999,119999],"mapped",[106]],[[120000,120000],"mapped",[107]],[[120001,120001],"mapped",[108]],[[120002,120002],"mapped",[109]],[[120003,120003],"mapped",[110]],[[120004,120004],"disallowed"],[[120005,120005],"mapped",[112]],[[120006,120006],"mapped",[113]],[[120007,120007],"mapped",[114]],[[120008,120008],"mapped",[115]],[[120009,120009],"mapped",[116]],[[120010,120010],"mapped",[117]],[[120011,120011],"mapped",[118]],[[120012,120012],"mapped",[119]],[[120013,120013],"mapped",[120]],[[120014,120014],"mapped",[121]],[[120015,120015],"mapped",[122]],[[120016,120016],"mapped",[97]],[[120017,120017],"mapped",[98]],[[120018,120018],"mapped",[99]],[[120019,120019],"mapped",[100]],[[120020,120020],"mapped",[101]],[[120021,120021],"mapped",[102]],[[120022,120022],"mapped",[103]],[[120023,120023],"mapped",[104]],[[120024,120024],"mapped",[105]],[[120025,120025],"mapped",[106]],[[120026,120026],"mapped",[107]],[[120027,120027],"mapped",[108]],[[120028,120028],"mapped",[109]],[[120029,120029],"mapped",[110]],[[120030,120030],"mapped",[111]],[[120031,120031],"mapped",[112]],[[120032,120032],"mapped",[113]],[[120033,120033],"mapped",[114]],[[120034,120034],"mapped",[115]],[[120035,120035],"mapped",[116]],[[120036,120036],"mapped",[117]],[[120037,120037],"mapped",[118]],[[120038,120038],"mapped",[119]],[[120039,120039],"mapped",[120]],[[120040,120040],"mapped",[121]],[[120041,120041],"mapped",[122]],[[120042,120042],"mapped",[97]],[[120043,120043],"mapped",[98]],[[120044,120044],"mapped",[99]],[[120045,120045],"mapped",[100]],[[120046,120046],"mapped",[101]],[[120047,120047],"mapped",[102]],[[120048,120048],"mapped",[103]],[[120049,120049],"mapped",[104]],[[120050,120050],"mapped",[105]],[[120051,120051],"mapped",[106]],[[120052,120052],"mapped",[107]],[[120053,120053],"mapped",[108]],[[120054,120054],"mapped",[109]],[[120055,120055],"mapped",[110]],[[120056,120056],"mapped",[111]],[[120057,120057],"mapped",[112]],[[120058,120058],"mapped",[113]],[[120059,120059],"mapped",[114]],[[120060,120060],"mapped",[115]],[[120061,120061],"mapped",[116]],[[120062,120062],"mapped",[117]],[[120063,120063],"mapped",[118]],[[120064,120064],"mapped",[119]],[[120065,120065],"mapped",[120]],[[120066,120066],"mapped",[121]],[[120067,120067],"mapped",[122]],[[120068,120068],"mapped",[97]],[[120069,120069],"mapped",[98]],[[120070,120070],"disallowed"],[[120071,120071],"mapped",[100]],[[120072,120072],"mapped",[101]],[[120073,120073],"mapped",[102]],[[120074,120074],"mapped",[103]],[[120075,120076],"disallowed"],[[120077,120077],"mapped",[106]],[[120078,120078],"mapped",[107]],[[120079,120079],"mapped",[108]],[[120080,120080],"mapped",[109]],[[120081,120081],"mapped",[110]],[[120082,120082],"mapped",[111]],[[120083,120083],"mapped",[112]],[[120084,120084],"mapped",[113]],[[120085,120085],"disallowed"],[[120086,120086],"mapped",[115]],[[120087,120087],"mapped",[116]],[[120088,120088],"mapped",[117]],[[120089,120089],"mapped",[118]],[[120090,120090],"mapped",[119]],[[120091,120091],"mapped",[120]],[[120092,120092],"mapped",[121]],[[120093,120093],"disallowed"],[[120094,120094],"mapped",[97]],[[120095,120095],"mapped",[98]],[[120096,120096],"mapped",[99]],[[120097,120097],"mapped",[100]],[[120098,120098],"mapped",[101]],[[120099,120099],"mapped",[102]],[[120100,120100],"mapped",[103]],[[120101,120101],"mapped",[104]],[[120102,120102],"mapped",[105]],[[120103,120103],"mapped",[106]],[[120104,120104],"mapped",[107]],[[120105,120105],"mapped",[108]],[[120106,120106],"mapped",[109]],[[120107,120107],"mapped",[110]],[[120108,120108],"mapped",[111]],[[120109,120109],"mapped",[112]],[[120110,120110],"mapped",[113]],[[120111,120111],"mapped",[114]],[[120112,120112],"mapped",[115]],[[120113,120113],"mapped",[116]],[[120114,120114],"mapped",[117]],[[120115,120115],"mapped",[118]],[[120116,120116],"mapped",[119]],[[120117,120117],"mapped",[120]],[[120118,120118],"mapped",[121]],[[120119,120119],"mapped",[122]],[[120120,120120],"mapped",[97]],[[120121,120121],"mapped",[98]],[[120122,120122],"disallowed"],[[120123,120123],"mapped",[100]],[[120124,120124],"mapped",[101]],[[120125,120125],"mapped",[102]],[[120126,120126],"mapped",[103]],[[120127,120127],"disallowed"],[[120128,120128],"mapped",[105]],[[120129,120129],"mapped",[106]],[[120130,120130],"mapped",[107]],[[120131,120131],"mapped",[108]],[[120132,120132],"mapped",[109]],[[120133,120133],"disallowed"],[[120134,120134],"mapped",[111]],[[120135,120137],"disallowed"],[[120138,120138],"mapped",[115]],[[120139,120139],"mapped",[116]],[[120140,120140],"mapped",[117]],[[120141,120141],"mapped",[118]],[[120142,120142],"mapped",[119]],[[120143,120143],"mapped",[120]],[[120144,120144],"mapped",[121]],[[120145,120145],"disallowed"],[[120146,120146],"mapped",[97]],[[120147,120147],"mapped",[98]],[[120148,120148],"mapped",[99]],[[120149,120149],"mapped",[100]],[[120150,120150],"mapped",[101]],[[120151,120151],"mapped",[102]],[[120152,120152],"mapped",[103]],[[120153,120153],"mapped",[104]],[[120154,120154],"mapped",[105]],[[120155,120155],"mapped",[106]],[[120156,120156],"mapped",[107]],[[120157,120157],"mapped",[108]],[[120158,120158],"mapped",[109]],[[120159,120159],"mapped",[110]],[[120160,120160],"mapped",[111]],[[120161,120161],"mapped",[112]],[[120162,120162],"mapped",[113]],[[120163,120163],"mapped",[114]],[[120164,120164],"mapped",[115]],[[120165,120165],"mapped",[116]],[[120166,120166],"mapped",[117]],[[120167,120167],"mapped",[118]],[[120168,120168],"mapped",[119]],[[120169,120169],"mapped",[120]],[[120170,120170],"mapped",[121]],[[120171,120171],"mapped",[122]],[[120172,120172],"mapped",[97]],[[120173,120173],"mapped",[98]],[[120174,120174],"mapped",[99]],[[120175,120175],"mapped",[100]],[[120176,120176],"mapped",[101]],[[120177,120177],"mapped",[102]],[[120178,120178],"mapped",[103]],[[120179,120179],"mapped",[104]],[[120180,120180],"mapped",[105]],[[120181,120181],"mapped",[106]],[[120182,120182],"mapped",[107]],[[120183,120183],"mapped",[108]],[[120184,120184],"mapped",[109]],[[120185,120185],"mapped",[110]],[[120186,120186],"mapped",[111]],[[120187,120187],"mapped",[112]],[[120188,120188],"mapped",[113]],[[120189,120189],"mapped",[114]],[[120190,120190],"mapped",[115]],[[120191,120191],"mapped",[116]],[[120192,120192],"mapped",[117]],[[120193,120193],"mapped",[118]],[[120194,120194],"mapped",[119]],[[120195,120195],"mapped",[120]],[[120196,120196],"mapped",[121]],[[120197,120197],"mapped",[122]],[[120198,120198],"mapped",[97]],[[120199,120199],"mapped",[98]],[[120200,120200],"mapped",[99]],[[120201,120201],"mapped",[100]],[[120202,120202],"mapped",[101]],[[120203,120203],"mapped",[102]],[[120204,120204],"mapped",[103]],[[120205,120205],"mapped",[104]],[[120206,120206],"mapped",[105]],[[120207,120207],"mapped",[106]],[[120208,120208],"mapped",[107]],[[120209,120209],"mapped",[108]],[[120210,120210],"mapped",[109]],[[120211,120211],"mapped",[110]],[[120212,120212],"mapped",[111]],[[120213,120213],"mapped",[112]],[[120214,120214],"mapped",[113]],[[120215,120215],"mapped",[114]],[[120216,120216],"mapped",[115]],[[120217,120217],"mapped",[116]],[[120218,120218],"mapped",[117]],[[120219,120219],"mapped",[118]],[[120220,120220],"mapped",[119]],[[120221,120221],"mapped",[120]],[[120222,120222],"mapped",[121]],[[120223,120223],"mapped",[122]],[[120224,120224],"mapped",[97]],[[120225,120225],"mapped",[98]],[[120226,120226],"mapped",[99]],[[120227,120227],"mapped",[100]],[[120228,120228],"mapped",[101]],[[120229,120229],"mapped",[102]],[[120230,120230],"mapped",[103]],[[120231,120231],"mapped",[104]],[[120232,120232],"mapped",[105]],[[120233,120233],"mapped",[106]],[[120234,120234],"mapped",[107]],[[120235,120235],"mapped",[108]],[[120236,120236],"mapped",[109]],[[120237,120237],"mapped",[110]],[[120238,120238],"mapped",[111]],[[120239,120239],"mapped",[112]],[[120240,120240],"mapped",[113]],[[120241,120241],"mapped",[114]],[[120242,120242],"mapped",[115]],[[120243,120243],"mapped",[116]],[[120244,120244],"mapped",[117]],[[120245,120245],"mapped",[118]],[[120246,120246],"mapped",[119]],[[120247,120247],"mapped",[120]],[[120248,120248],"mapped",[121]],[[120249,120249],"mapped",[122]],[[120250,120250],"mapped",[97]],[[120251,120251],"mapped",[98]],[[120252,120252],"mapped",[99]],[[120253,120253],"mapped",[100]],[[120254,120254],"mapped",[101]],[[120255,120255],"mapped",[102]],[[120256,120256],"mapped",[103]],[[120257,120257],"mapped",[104]],[[120258,120258],"mapped",[105]],[[120259,120259],"mapped",[106]],[[120260,120260],"mapped",[107]],[[120261,120261],"mapped",[108]],[[120262,120262],"mapped",[109]],[[120263,120263],"mapped",[110]],[[120264,120264],"mapped",[111]],[[120265,120265],"mapped",[112]],[[120266,120266],"mapped",[113]],[[120267,120267],"mapped",[114]],[[120268,120268],"mapped",[115]],[[120269,120269],"mapped",[116]],[[120270,120270],"mapped",[117]],[[120271,120271],"mapped",[118]],[[120272,120272],"mapped",[119]],[[120273,120273],"mapped",[120]],[[120274,120274],"mapped",[121]],[[120275,120275],"mapped",[122]],[[120276,120276],"mapped",[97]],[[120277,120277],"mapped",[98]],[[120278,120278],"mapped",[99]],[[120279,120279],"mapped",[100]],[[120280,120280],"mapped",[101]],[[120281,120281],"mapped",[102]],[[120282,120282],"mapped",[103]],[[120283,120283],"mapped",[104]],[[120284,120284],"mapped",[105]],[[120285,120285],"mapped",[106]],[[120286,120286],"mapped",[107]],[[120287,120287],"mapped",[108]],[[120288,120288],"mapped",[109]],[[120289,120289],"mapped",[110]],[[120290,120290],"mapped",[111]],[[120291,120291],"mapped",[112]],[[120292,120292],"mapped",[113]],[[120293,120293],"mapped",[114]],[[120294,120294],"mapped",[115]],[[120295,120295],"mapped",[116]],[[120296,120296],"mapped",[117]],[[120297,120297],"mapped",[118]],[[120298,120298],"mapped",[119]],[[120299,120299],"mapped",[120]],[[120300,120300],"mapped",[121]],[[120301,120301],"mapped",[122]],[[120302,120302],"mapped",[97]],[[120303,120303],"mapped",[98]],[[120304,120304],"mapped",[99]],[[120305,120305],"mapped",[100]],[[120306,120306],"mapped",[101]],[[120307,120307],"mapped",[102]],[[120308,120308],"mapped",[103]],[[120309,120309],"mapped",[104]],[[120310,120310],"mapped",[105]],[[120311,120311],"mapped",[106]],[[120312,120312],"mapped",[107]],[[120313,120313],"mapped",[108]],[[120314,120314],"mapped",[109]],[[120315,120315],"mapped",[110]],[[120316,120316],"mapped",[111]],[[120317,120317],"mapped",[112]],[[120318,120318],"mapped",[113]],[[120319,120319],"mapped",[114]],[[120320,120320],"mapped",[115]],[[120321,120321],"mapped",[116]],[[120322,120322],"mapped",[117]],[[120323,120323],"mapped",[118]],[[120324,120324],"mapped",[119]],[[120325,120325],"mapped",[120]],[[120326,120326],"mapped",[121]],[[120327,120327],"mapped",[122]],[[120328,120328],"mapped",[97]],[[120329,120329],"mapped",[98]],[[120330,120330],"mapped",[99]],[[120331,120331],"mapped",[100]],[[120332,120332],"mapped",[101]],[[120333,120333],"mapped",[102]],[[120334,120334],"mapped",[103]],[[120335,120335],"mapped",[104]],[[120336,120336],"mapped",[105]],[[120337,120337],"mapped",[106]],[[120338,120338],"mapped",[107]],[[120339,120339],"mapped",[108]],[[120340,120340],"mapped",[109]],[[120341,120341],"mapped",[110]],[[120342,120342],"mapped",[111]],[[120343,120343],"mapped",[112]],[[120344,120344],"mapped",[113]],[[120345,120345],"mapped",[114]],[[120346,120346],"mapped",[115]],[[120347,120347],"mapped",[116]],[[120348,120348],"mapped",[117]],[[120349,120349],"mapped",[118]],[[120350,120350],"mapped",[119]],[[120351,120351],"mapped",[120]],[[120352,120352],"mapped",[121]],[[120353,120353],"mapped",[122]],[[120354,120354],"mapped",[97]],[[120355,120355],"mapped",[98]],[[120356,120356],"mapped",[99]],[[120357,120357],"mapped",[100]],[[120358,120358],"mapped",[101]],[[120359,120359],"mapped",[102]],[[120360,120360],"mapped",[103]],[[120361,120361],"mapped",[104]],[[120362,120362],"mapped",[105]],[[120363,120363],"mapped",[106]],[[120364,120364],"mapped",[107]],[[120365,120365],"mapped",[108]],[[120366,120366],"mapped",[109]],[[120367,120367],"mapped",[110]],[[120368,120368],"mapped",[111]],[[120369,120369],"mapped",[112]],[[120370,120370],"mapped",[113]],[[120371,120371],"mapped",[114]],[[120372,120372],"mapped",[115]],[[120373,120373],"mapped",[116]],[[120374,120374],"mapped",[117]],[[120375,120375],"mapped",[118]],[[120376,120376],"mapped",[119]],[[120377,120377],"mapped",[120]],[[120378,120378],"mapped",[121]],[[120379,120379],"mapped",[122]],[[120380,120380],"mapped",[97]],[[120381,120381],"mapped",[98]],[[120382,120382],"mapped",[99]],[[120383,120383],"mapped",[100]],[[120384,120384],"mapped",[101]],[[120385,120385],"mapped",[102]],[[120386,120386],"mapped",[103]],[[120387,120387],"mapped",[104]],[[120388,120388],"mapped",[105]],[[120389,120389],"mapped",[106]],[[120390,120390],"mapped",[107]],[[120391,120391],"mapped",[108]],[[120392,120392],"mapped",[109]],[[120393,120393],"mapped",[110]],[[120394,120394],"mapped",[111]],[[120395,120395],"mapped",[112]],[[120396,120396],"mapped",[113]],[[120397,120397],"mapped",[114]],[[120398,120398],"mapped",[115]],[[120399,120399],"mapped",[116]],[[120400,120400],"mapped",[117]],[[120401,120401],"mapped",[118]],[[120402,120402],"mapped",[119]],[[120403,120403],"mapped",[120]],[[120404,120404],"mapped",[121]],[[120405,120405],"mapped",[122]],[[120406,120406],"mapped",[97]],[[120407,120407],"mapped",[98]],[[120408,120408],"mapped",[99]],[[120409,120409],"mapped",[100]],[[120410,120410],"mapped",[101]],[[120411,120411],"mapped",[102]],[[120412,120412],"mapped",[103]],[[120413,120413],"mapped",[104]],[[120414,120414],"mapped",[105]],[[120415,120415],"mapped",[106]],[[120416,120416],"mapped",[107]],[[120417,120417],"mapped",[108]],[[120418,120418],"mapped",[109]],[[120419,120419],"mapped",[110]],[[120420,120420],"mapped",[111]],[[120421,120421],"mapped",[112]],[[120422,120422],"mapped",[113]],[[120423,120423],"mapped",[114]],[[120424,120424],"mapped",[115]],[[120425,120425],"mapped",[116]],[[120426,120426],"mapped",[117]],[[120427,120427],"mapped",[118]],[[120428,120428],"mapped",[119]],[[120429,120429],"mapped",[120]],[[120430,120430],"mapped",[121]],[[120431,120431],"mapped",[122]],[[120432,120432],"mapped",[97]],[[120433,120433],"mapped",[98]],[[120434,120434],"mapped",[99]],[[120435,120435],"mapped",[100]],[[120436,120436],"mapped",[101]],[[120437,120437],"mapped",[102]],[[120438,120438],"mapped",[103]],[[120439,120439],"mapped",[104]],[[120440,120440],"mapped",[105]],[[120441,120441],"mapped",[106]],[[120442,120442],"mapped",[107]],[[120443,120443],"mapped",[108]],[[120444,120444],"mapped",[109]],[[120445,120445],"mapped",[110]],[[120446,120446],"mapped",[111]],[[120447,120447],"mapped",[112]],[[120448,120448],"mapped",[113]],[[120449,120449],"mapped",[114]],[[120450,120450],"mapped",[115]],[[120451,120451],"mapped",[116]],[[120452,120452],"mapped",[117]],[[120453,120453],"mapped",[118]],[[120454,120454],"mapped",[119]],[[120455,120455],"mapped",[120]],[[120456,120456],"mapped",[121]],[[120457,120457],"mapped",[122]],[[120458,120458],"mapped",[97]],[[120459,120459],"mapped",[98]],[[120460,120460],"mapped",[99]],[[120461,120461],"mapped",[100]],[[120462,120462],"mapped",[101]],[[120463,120463],"mapped",[102]],[[120464,120464],"mapped",[103]],[[120465,120465],"mapped",[104]],[[120466,120466],"mapped",[105]],[[120467,120467],"mapped",[106]],[[120468,120468],"mapped",[107]],[[120469,120469],"mapped",[108]],[[120470,120470],"mapped",[109]],[[120471,120471],"mapped",[110]],[[120472,120472],"mapped",[111]],[[120473,120473],"mapped",[112]],[[120474,120474],"mapped",[113]],[[120475,120475],"mapped",[114]],[[120476,120476],"mapped",[115]],[[120477,120477],"mapped",[116]],[[120478,120478],"mapped",[117]],[[120479,120479],"mapped",[118]],[[120480,120480],"mapped",[119]],[[120481,120481],"mapped",[120]],[[120482,120482],"mapped",[121]],[[120483,120483],"mapped",[122]],[[120484,120484],"mapped",[305]],[[120485,120485],"mapped",[567]],[[120486,120487],"disallowed"],[[120488,120488],"mapped",[945]],[[120489,120489],"mapped",[946]],[[120490,120490],"mapped",[947]],[[120491,120491],"mapped",[948]],[[120492,120492],"mapped",[949]],[[120493,120493],"mapped",[950]],[[120494,120494],"mapped",[951]],[[120495,120495],"mapped",[952]],[[120496,120496],"mapped",[953]],[[120497,120497],"mapped",[954]],[[120498,120498],"mapped",[955]],[[120499,120499],"mapped",[956]],[[120500,120500],"mapped",[957]],[[120501,120501],"mapped",[958]],[[120502,120502],"mapped",[959]],[[120503,120503],"mapped",[960]],[[120504,120504],"mapped",[961]],[[120505,120505],"mapped",[952]],[[120506,120506],"mapped",[963]],[[120507,120507],"mapped",[964]],[[120508,120508],"mapped",[965]],[[120509,120509],"mapped",[966]],[[120510,120510],"mapped",[967]],[[120511,120511],"mapped",[968]],[[120512,120512],"mapped",[969]],[[120513,120513],"mapped",[8711]],[[120514,120514],"mapped",[945]],[[120515,120515],"mapped",[946]],[[120516,120516],"mapped",[947]],[[120517,120517],"mapped",[948]],[[120518,120518],"mapped",[949]],[[120519,120519],"mapped",[950]],[[120520,120520],"mapped",[951]],[[120521,120521],"mapped",[952]],[[120522,120522],"mapped",[953]],[[120523,120523],"mapped",[954]],[[120524,120524],"mapped",[955]],[[120525,120525],"mapped",[956]],[[120526,120526],"mapped",[957]],[[120527,120527],"mapped",[958]],[[120528,120528],"mapped",[959]],[[120529,120529],"mapped",[960]],[[120530,120530],"mapped",[961]],[[120531,120532],"mapped",[963]],[[120533,120533],"mapped",[964]],[[120534,120534],"mapped",[965]],[[120535,120535],"mapped",[966]],[[120536,120536],"mapped",[967]],[[120537,120537],"mapped",[968]],[[120538,120538],"mapped",[969]],[[120539,120539],"mapped",[8706]],[[120540,120540],"mapped",[949]],[[120541,120541],"mapped",[952]],[[120542,120542],"mapped",[954]],[[120543,120543],"mapped",[966]],[[120544,120544],"mapped",[961]],[[120545,120545],"mapped",[960]],[[120546,120546],"mapped",[945]],[[120547,120547],"mapped",[946]],[[120548,120548],"mapped",[947]],[[120549,120549],"mapped",[948]],[[120550,120550],"mapped",[949]],[[120551,120551],"mapped",[950]],[[120552,120552],"mapped",[951]],[[120553,120553],"mapped",[952]],[[120554,120554],"mapped",[953]],[[120555,120555],"mapped",[954]],[[120556,120556],"mapped",[955]],[[120557,120557],"mapped",[956]],[[120558,120558],"mapped",[957]],[[120559,120559],"mapped",[958]],[[120560,120560],"mapped",[959]],[[120561,120561],"mapped",[960]],[[120562,120562],"mapped",[961]],[[120563,120563],"mapped",[952]],[[120564,120564],"mapped",[963]],[[120565,120565],"mapped",[964]],[[120566,120566],"mapped",[965]],[[120567,120567],"mapped",[966]],[[120568,120568],"mapped",[967]],[[120569,120569],"mapped",[968]],[[120570,120570],"mapped",[969]],[[120571,120571],"mapped",[8711]],[[120572,120572],"mapped",[945]],[[120573,120573],"mapped",[946]],[[120574,120574],"mapped",[947]],[[120575,120575],"mapped",[948]],[[120576,120576],"mapped",[949]],[[120577,120577],"mapped",[950]],[[120578,120578],"mapped",[951]],[[120579,120579],"mapped",[952]],[[120580,120580],"mapped",[953]],[[120581,120581],"mapped",[954]],[[120582,120582],"mapped",[955]],[[120583,120583],"mapped",[956]],[[120584,120584],"mapped",[957]],[[120585,120585],"mapped",[958]],[[120586,120586],"mapped",[959]],[[120587,120587],"mapped",[960]],[[120588,120588],"mapped",[961]],[[120589,120590],"mapped",[963]],[[120591,120591],"mapped",[964]],[[120592,120592],"mapped",[965]],[[120593,120593],"mapped",[966]],[[120594,120594],"mapped",[967]],[[120595,120595],"mapped",[968]],[[120596,120596],"mapped",[969]],[[120597,120597],"mapped",[8706]],[[120598,120598],"mapped",[949]],[[120599,120599],"mapped",[952]],[[120600,120600],"mapped",[954]],[[120601,120601],"mapped",[966]],[[120602,120602],"mapped",[961]],[[120603,120603],"mapped",[960]],[[120604,120604],"mapped",[945]],[[120605,120605],"mapped",[946]],[[120606,120606],"mapped",[947]],[[120607,120607],"mapped",[948]],[[120608,120608],"mapped",[949]],[[120609,120609],"mapped",[950]],[[120610,120610],"mapped",[951]],[[120611,120611],"mapped",[952]],[[120612,120612],"mapped",[953]],[[120613,120613],"mapped",[954]],[[120614,120614],"mapped",[955]],[[120615,120615],"mapped",[956]],[[120616,120616],"mapped",[957]],[[120617,120617],"mapped",[958]],[[120618,120618],"mapped",[959]],[[120619,120619],"mapped",[960]],[[120620,120620],"mapped",[961]],[[120621,120621],"mapped",[952]],[[120622,120622],"mapped",[963]],[[120623,120623],"mapped",[964]],[[120624,120624],"mapped",[965]],[[120625,120625],"mapped",[966]],[[120626,120626],"mapped",[967]],[[120627,120627],"mapped",[968]],[[120628,120628],"mapped",[969]],[[120629,120629],"mapped",[8711]],[[120630,120630],"mapped",[945]],[[120631,120631],"mapped",[946]],[[120632,120632],"mapped",[947]],[[120633,120633],"mapped",[948]],[[120634,120634],"mapped",[949]],[[120635,120635],"mapped",[950]],[[120636,120636],"mapped",[951]],[[120637,120637],"mapped",[952]],[[120638,120638],"mapped",[953]],[[120639,120639],"mapped",[954]],[[120640,120640],"mapped",[955]],[[120641,120641],"mapped",[956]],[[120642,120642],"mapped",[957]],[[120643,120643],"mapped",[958]],[[120644,120644],"mapped",[959]],[[120645,120645],"mapped",[960]],[[120646,120646],"mapped",[961]],[[120647,120648],"mapped",[963]],[[120649,120649],"mapped",[964]],[[120650,120650],"mapped",[965]],[[120651,120651],"mapped",[966]],[[120652,120652],"mapped",[967]],[[120653,120653],"mapped",[968]],[[120654,120654],"mapped",[969]],[[120655,120655],"mapped",[8706]],[[120656,120656],"mapped",[949]],[[120657,120657],"mapped",[952]],[[120658,120658],"mapped",[954]],[[120659,120659],"mapped",[966]],[[120660,120660],"mapped",[961]],[[120661,120661],"mapped",[960]],[[120662,120662],"mapped",[945]],[[120663,120663],"mapped",[946]],[[120664,120664],"mapped",[947]],[[120665,120665],"mapped",[948]],[[120666,120666],"mapped",[949]],[[120667,120667],"mapped",[950]],[[120668,120668],"mapped",[951]],[[120669,120669],"mapped",[952]],[[120670,120670],"mapped",[953]],[[120671,120671],"mapped",[954]],[[120672,120672],"mapped",[955]],[[120673,120673],"mapped",[956]],[[120674,120674],"mapped",[957]],[[120675,120675],"mapped",[958]],[[120676,120676],"mapped",[959]],[[120677,120677],"mapped",[960]],[[120678,120678],"mapped",[961]],[[120679,120679],"mapped",[952]],[[120680,120680],"mapped",[963]],[[120681,120681],"mapped",[964]],[[120682,120682],"mapped",[965]],[[120683,120683],"mapped",[966]],[[120684,120684],"mapped",[967]],[[120685,120685],"mapped",[968]],[[120686,120686],"mapped",[969]],[[120687,120687],"mapped",[8711]],[[120688,120688],"mapped",[945]],[[120689,120689],"mapped",[946]],[[120690,120690],"mapped",[947]],[[120691,120691],"mapped",[948]],[[120692,120692],"mapped",[949]],[[120693,120693],"mapped",[950]],[[120694,120694],"mapped",[951]],[[120695,120695],"mapped",[952]],[[120696,120696],"mapped",[953]],[[120697,120697],"mapped",[954]],[[120698,120698],"mapped",[955]],[[120699,120699],"mapped",[956]],[[120700,120700],"mapped",[957]],[[120701,120701],"mapped",[958]],[[120702,120702],"mapped",[959]],[[120703,120703],"mapped",[960]],[[120704,120704],"mapped",[961]],[[120705,120706],"mapped",[963]],[[120707,120707],"mapped",[964]],[[120708,120708],"mapped",[965]],[[120709,120709],"mapped",[966]],[[120710,120710],"mapped",[967]],[[120711,120711],"mapped",[968]],[[120712,120712],"mapped",[969]],[[120713,120713],"mapped",[8706]],[[120714,120714],"mapped",[949]],[[120715,120715],"mapped",[952]],[[120716,120716],"mapped",[954]],[[120717,120717],"mapped",[966]],[[120718,120718],"mapped",[961]],[[120719,120719],"mapped",[960]],[[120720,120720],"mapped",[945]],[[120721,120721],"mapped",[946]],[[120722,120722],"mapped",[947]],[[120723,120723],"mapped",[948]],[[120724,120724],"mapped",[949]],[[120725,120725],"mapped",[950]],[[120726,120726],"mapped",[951]],[[120727,120727],"mapped",[952]],[[120728,120728],"mapped",[953]],[[120729,120729],"mapped",[954]],[[120730,120730],"mapped",[955]],[[120731,120731],"mapped",[956]],[[120732,120732],"mapped",[957]],[[120733,120733],"mapped",[958]],[[120734,120734],"mapped",[959]],[[120735,120735],"mapped",[960]],[[120736,120736],"mapped",[961]],[[120737,120737],"mapped",[952]],[[120738,120738],"mapped",[963]],[[120739,120739],"mapped",[964]],[[120740,120740],"mapped",[965]],[[120741,120741],"mapped",[966]],[[120742,120742],"mapped",[967]],[[120743,120743],"mapped",[968]],[[120744,120744],"mapped",[969]],[[120745,120745],"mapped",[8711]],[[120746,120746],"mapped",[945]],[[120747,120747],"mapped",[946]],[[120748,120748],"mapped",[947]],[[120749,120749],"mapped",[948]],[[120750,120750],"mapped",[949]],[[120751,120751],"mapped",[950]],[[120752,120752],"mapped",[951]],[[120753,120753],"mapped",[952]],[[120754,120754],"mapped",[953]],[[120755,120755],"mapped",[954]],[[120756,120756],"mapped",[955]],[[120757,120757],"mapped",[956]],[[120758,120758],"mapped",[957]],[[120759,120759],"mapped",[958]],[[120760,120760],"mapped",[959]],[[120761,120761],"mapped",[960]],[[120762,120762],"mapped",[961]],[[120763,120764],"mapped",[963]],[[120765,120765],"mapped",[964]],[[120766,120766],"mapped",[965]],[[120767,120767],"mapped",[966]],[[120768,120768],"mapped",[967]],[[120769,120769],"mapped",[968]],[[120770,120770],"mapped",[969]],[[120771,120771],"mapped",[8706]],[[120772,120772],"mapped",[949]],[[120773,120773],"mapped",[952]],[[120774,120774],"mapped",[954]],[[120775,120775],"mapped",[966]],[[120776,120776],"mapped",[961]],[[120777,120777],"mapped",[960]],[[120778,120779],"mapped",[989]],[[120780,120781],"disallowed"],[[120782,120782],"mapped",[48]],[[120783,120783],"mapped",[49]],[[120784,120784],"mapped",[50]],[[120785,120785],"mapped",[51]],[[120786,120786],"mapped",[52]],[[120787,120787],"mapped",[53]],[[120788,120788],"mapped",[54]],[[120789,120789],"mapped",[55]],[[120790,120790],"mapped",[56]],[[120791,120791],"mapped",[57]],[[120792,120792],"mapped",[48]],[[120793,120793],"mapped",[49]],[[120794,120794],"mapped",[50]],[[120795,120795],"mapped",[51]],[[120796,120796],"mapped",[52]],[[120797,120797],"mapped",[53]],[[120798,120798],"mapped",[54]],[[120799,120799],"mapped",[55]],[[120800,120800],"mapped",[56]],[[120801,120801],"mapped",[57]],[[120802,120802],"mapped",[48]],[[120803,120803],"mapped",[49]],[[120804,120804],"mapped",[50]],[[120805,120805],"mapped",[51]],[[120806,120806],"mapped",[52]],[[120807,120807],"mapped",[53]],[[120808,120808],"mapped",[54]],[[120809,120809],"mapped",[55]],[[120810,120810],"mapped",[56]],[[120811,120811],"mapped",[57]],[[120812,120812],"mapped",[48]],[[120813,120813],"mapped",[49]],[[120814,120814],"mapped",[50]],[[120815,120815],"mapped",[51]],[[120816,120816],"mapped",[52]],[[120817,120817],"mapped",[53]],[[120818,120818],"mapped",[54]],[[120819,120819],"mapped",[55]],[[120820,120820],"mapped",[56]],[[120821,120821],"mapped",[57]],[[120822,120822],"mapped",[48]],[[120823,120823],"mapped",[49]],[[120824,120824],"mapped",[50]],[[120825,120825],"mapped",[51]],[[120826,120826],"mapped",[52]],[[120827,120827],"mapped",[53]],[[120828,120828],"mapped",[54]],[[120829,120829],"mapped",[55]],[[120830,120830],"mapped",[56]],[[120831,120831],"mapped",[57]],[[120832,121343],"valid",[],"NV8"],[[121344,121398],"valid"],[[121399,121402],"valid",[],"NV8"],[[121403,121452],"valid"],[[121453,121460],"valid",[],"NV8"],[[121461,121461],"valid"],[[121462,121475],"valid",[],"NV8"],[[121476,121476],"valid"],[[121477,121483],"valid",[],"NV8"],[[121484,121498],"disallowed"],[[121499,121503],"valid"],[[121504,121504],"disallowed"],[[121505,121519],"valid"],[[121520,124927],"disallowed"],[[124928,125124],"valid"],[[125125,125126],"disallowed"],[[125127,125135],"valid",[],"NV8"],[[125136,125142],"valid"],[[125143,126463],"disallowed"],[[126464,126464],"mapped",[1575]],[[126465,126465],"mapped",[1576]],[[126466,126466],"mapped",[1580]],[[126467,126467],"mapped",[1583]],[[126468,126468],"disallowed"],[[126469,126469],"mapped",[1608]],[[126470,126470],"mapped",[1586]],[[126471,126471],"mapped",[1581]],[[126472,126472],"mapped",[1591]],[[126473,126473],"mapped",[1610]],[[126474,126474],"mapped",[1603]],[[126475,126475],"mapped",[1604]],[[126476,126476],"mapped",[1605]],[[126477,126477],"mapped",[1606]],[[126478,126478],"mapped",[1587]],[[126479,126479],"mapped",[1593]],[[126480,126480],"mapped",[1601]],[[126481,126481],"mapped",[1589]],[[126482,126482],"mapped",[1602]],[[126483,126483],"mapped",[1585]],[[126484,126484],"mapped",[1588]],[[126485,126485],"mapped",[1578]],[[126486,126486],"mapped",[1579]],[[126487,126487],"mapped",[1582]],[[126488,126488],"mapped",[1584]],[[126489,126489],"mapped",[1590]],[[126490,126490],"mapped",[1592]],[[126491,126491],"mapped",[1594]],[[126492,126492],"mapped",[1646]],[[126493,126493],"mapped",[1722]],[[126494,126494],"mapped",[1697]],[[126495,126495],"mapped",[1647]],[[126496,126496],"disallowed"],[[126497,126497],"mapped",[1576]],[[126498,126498],"mapped",[1580]],[[126499,126499],"disallowed"],[[126500,126500],"mapped",[1607]],[[126501,126502],"disallowed"],[[126503,126503],"mapped",[1581]],[[126504,126504],"disallowed"],[[126505,126505],"mapped",[1610]],[[126506,126506],"mapped",[1603]],[[126507,126507],"mapped",[1604]],[[126508,126508],"mapped",[1605]],[[126509,126509],"mapped",[1606]],[[126510,126510],"mapped",[1587]],[[126511,126511],"mapped",[1593]],[[126512,126512],"mapped",[1601]],[[126513,126513],"mapped",[1589]],[[126514,126514],"mapped",[1602]],[[126515,126515],"disallowed"],[[126516,126516],"mapped",[1588]],[[126517,126517],"mapped",[1578]],[[126518,126518],"mapped",[1579]],[[126519,126519],"mapped",[1582]],[[126520,126520],"disallowed"],[[126521,126521],"mapped",[1590]],[[126522,126522],"disallowed"],[[126523,126523],"mapped",[1594]],[[126524,126529],"disallowed"],[[126530,126530],"mapped",[1580]],[[126531,126534],"disallowed"],[[126535,126535],"mapped",[1581]],[[126536,126536],"disallowed"],[[126537,126537],"mapped",[1610]],[[126538,126538],"disallowed"],[[126539,126539],"mapped",[1604]],[[126540,126540],"disallowed"],[[126541,126541],"mapped",[1606]],[[126542,126542],"mapped",[1587]],[[126543,126543],"mapped",[1593]],[[126544,126544],"disallowed"],[[126545,126545],"mapped",[1589]],[[126546,126546],"mapped",[1602]],[[126547,126547],"disallowed"],[[126548,126548],"mapped",[1588]],[[126549,126550],"disallowed"],[[126551,126551],"mapped",[1582]],[[126552,126552],"disallowed"],[[126553,126553],"mapped",[1590]],[[126554,126554],"disallowed"],[[126555,126555],"mapped",[1594]],[[126556,126556],"disallowed"],[[126557,126557],"mapped",[1722]],[[126558,126558],"disallowed"],[[126559,126559],"mapped",[1647]],[[126560,126560],"disallowed"],[[126561,126561],"mapped",[1576]],[[126562,126562],"mapped",[1580]],[[126563,126563],"disallowed"],[[126564,126564],"mapped",[1607]],[[126565,126566],"disallowed"],[[126567,126567],"mapped",[1581]],[[126568,126568],"mapped",[1591]],[[126569,126569],"mapped",[1610]],[[126570,126570],"mapped",[1603]],[[126571,126571],"disallowed"],[[126572,126572],"mapped",[1605]],[[126573,126573],"mapped",[1606]],[[126574,126574],"mapped",[1587]],[[126575,126575],"mapped",[1593]],[[126576,126576],"mapped",[1601]],[[126577,126577],"mapped",[1589]],[[126578,126578],"mapped",[1602]],[[126579,126579],"disallowed"],[[126580,126580],"mapped",[1588]],[[126581,126581],"mapped",[1578]],[[126582,126582],"mapped",[1579]],[[126583,126583],"mapped",[1582]],[[126584,126584],"disallowed"],[[126585,126585],"mapped",[1590]],[[126586,126586],"mapped",[1592]],[[126587,126587],"mapped",[1594]],[[126588,126588],"mapped",[1646]],[[126589,126589],"disallowed"],[[126590,126590],"mapped",[1697]],[[126591,126591],"disallowed"],[[126592,126592],"mapped",[1575]],[[126593,126593],"mapped",[1576]],[[126594,126594],"mapped",[1580]],[[126595,126595],"mapped",[1583]],[[126596,126596],"mapped",[1607]],[[126597,126597],"mapped",[1608]],[[126598,126598],"mapped",[1586]],[[126599,126599],"mapped",[1581]],[[126600,126600],"mapped",[1591]],[[126601,126601],"mapped",[1610]],[[126602,126602],"disallowed"],[[126603,126603],"mapped",[1604]],[[126604,126604],"mapped",[1605]],[[126605,126605],"mapped",[1606]],[[126606,126606],"mapped",[1587]],[[126607,126607],"mapped",[1593]],[[126608,126608],"mapped",[1601]],[[126609,126609],"mapped",[1589]],[[126610,126610],"mapped",[1602]],[[126611,126611],"mapped",[1585]],[[126612,126612],"mapped",[1588]],[[126613,126613],"mapped",[1578]],[[126614,126614],"mapped",[1579]],[[126615,126615],"mapped",[1582]],[[126616,126616],"mapped",[1584]],[[126617,126617],"mapped",[1590]],[[126618,126618],"mapped",[1592]],[[126619,126619],"mapped",[1594]],[[126620,126624],"disallowed"],[[126625,126625],"mapped",[1576]],[[126626,126626],"mapped",[1580]],[[126627,126627],"mapped",[1583]],[[126628,126628],"disallowed"],[[126629,126629],"mapped",[1608]],[[126630,126630],"mapped",[1586]],[[126631,126631],"mapped",[1581]],[[126632,126632],"mapped",[1591]],[[126633,126633],"mapped",[1610]],[[126634,126634],"disallowed"],[[126635,126635],"mapped",[1604]],[[126636,126636],"mapped",[1605]],[[126637,126637],"mapped",[1606]],[[126638,126638],"mapped",[1587]],[[126639,126639],"mapped",[1593]],[[126640,126640],"mapped",[1601]],[[126641,126641],"mapped",[1589]],[[126642,126642],"mapped",[1602]],[[126643,126643],"mapped",[1585]],[[126644,126644],"mapped",[1588]],[[126645,126645],"mapped",[1578]],[[126646,126646],"mapped",[1579]],[[126647,126647],"mapped",[1582]],[[126648,126648],"mapped",[1584]],[[126649,126649],"mapped",[1590]],[[126650,126650],"mapped",[1592]],[[126651,126651],"mapped",[1594]],[[126652,126703],"disallowed"],[[126704,126705],"valid",[],"NV8"],[[126706,126975],"disallowed"],[[126976,127019],"valid",[],"NV8"],[[127020,127023],"disallowed"],[[127024,127123],"valid",[],"NV8"],[[127124,127135],"disallowed"],[[127136,127150],"valid",[],"NV8"],[[127151,127152],"disallowed"],[[127153,127166],"valid",[],"NV8"],[[127167,127167],"valid",[],"NV8"],[[127168,127168],"disallowed"],[[127169,127183],"valid",[],"NV8"],[[127184,127184],"disallowed"],[[127185,127199],"valid",[],"NV8"],[[127200,127221],"valid",[],"NV8"],[[127222,127231],"disallowed"],[[127232,127232],"disallowed"],[[127233,127233],"disallowed_STD3_mapped",[48,44]],[[127234,127234],"disallowed_STD3_mapped",[49,44]],[[127235,127235],"disallowed_STD3_mapped",[50,44]],[[127236,127236],"disallowed_STD3_mapped",[51,44]],[[127237,127237],"disallowed_STD3_mapped",[52,44]],[[127238,127238],"disallowed_STD3_mapped",[53,44]],[[127239,127239],"disallowed_STD3_mapped",[54,44]],[[127240,127240],"disallowed_STD3_mapped",[55,44]],[[127241,127241],"disallowed_STD3_mapped",[56,44]],[[127242,127242],"disallowed_STD3_mapped",[57,44]],[[127243,127244],"valid",[],"NV8"],[[127245,127247],"disallowed"],[[127248,127248],"disallowed_STD3_mapped",[40,97,41]],[[127249,127249],"disallowed_STD3_mapped",[40,98,41]],[[127250,127250],"disallowed_STD3_mapped",[40,99,41]],[[127251,127251],"disallowed_STD3_mapped",[40,100,41]],[[127252,127252],"disallowed_STD3_mapped",[40,101,41]],[[127253,127253],"disallowed_STD3_mapped",[40,102,41]],[[127254,127254],"disallowed_STD3_mapped",[40,103,41]],[[127255,127255],"disallowed_STD3_mapped",[40,104,41]],[[127256,127256],"disallowed_STD3_mapped",[40,105,41]],[[127257,127257],"disallowed_STD3_mapped",[40,106,41]],[[127258,127258],"disallowed_STD3_mapped",[40,107,41]],[[127259,127259],"disallowed_STD3_mapped",[40,108,41]],[[127260,127260],"disallowed_STD3_mapped",[40,109,41]],[[127261,127261],"disallowed_STD3_mapped",[40,110,41]],[[127262,127262],"disallowed_STD3_mapped",[40,111,41]],[[127263,127263],"disallowed_STD3_mapped",[40,112,41]],[[127264,127264],"disallowed_STD3_mapped",[40,113,41]],[[127265,127265],"disallowed_STD3_mapped",[40,114,41]],[[127266,127266],"disallowed_STD3_mapped",[40,115,41]],[[127267,127267],"disallowed_STD3_mapped",[40,116,41]],[[127268,127268],"disallowed_STD3_mapped",[40,117,41]],[[127269,127269],"disallowed_STD3_mapped",[40,118,41]],[[127270,127270],"disallowed_STD3_mapped",[40,119,41]],[[127271,127271],"disallowed_STD3_mapped",[40,120,41]],[[127272,127272],"disallowed_STD3_mapped",[40,121,41]],[[127273,127273],"disallowed_STD3_mapped",[40,122,41]],[[127274,127274],"mapped",[12308,115,12309]],[[127275,127275],"mapped",[99]],[[127276,127276],"mapped",[114]],[[127277,127277],"mapped",[99,100]],[[127278,127278],"mapped",[119,122]],[[127279,127279],"disallowed"],[[127280,127280],"mapped",[97]],[[127281,127281],"mapped",[98]],[[127282,127282],"mapped",[99]],[[127283,127283],"mapped",[100]],[[127284,127284],"mapped",[101]],[[127285,127285],"mapped",[102]],[[127286,127286],"mapped",[103]],[[127287,127287],"mapped",[104]],[[127288,127288],"mapped",[105]],[[127289,127289],"mapped",[106]],[[127290,127290],"mapped",[107]],[[127291,127291],"mapped",[108]],[[127292,127292],"mapped",[109]],[[127293,127293],"mapped",[110]],[[127294,127294],"mapped",[111]],[[127295,127295],"mapped",[112]],[[127296,127296],"mapped",[113]],[[127297,127297],"mapped",[114]],[[127298,127298],"mapped",[115]],[[127299,127299],"mapped",[116]],[[127300,127300],"mapped",[117]],[[127301,127301],"mapped",[118]],[[127302,127302],"mapped",[119]],[[127303,127303],"mapped",[120]],[[127304,127304],"mapped",[121]],[[127305,127305],"mapped",[122]],[[127306,127306],"mapped",[104,118]],[[127307,127307],"mapped",[109,118]],[[127308,127308],"mapped",[115,100]],[[127309,127309],"mapped",[115,115]],[[127310,127310],"mapped",[112,112,118]],[[127311,127311],"mapped",[119,99]],[[127312,127318],"valid",[],"NV8"],[[127319,127319],"valid",[],"NV8"],[[127320,127326],"valid",[],"NV8"],[[127327,127327],"valid",[],"NV8"],[[127328,127337],"valid",[],"NV8"],[[127338,127338],"mapped",[109,99]],[[127339,127339],"mapped",[109,100]],[[127340,127343],"disallowed"],[[127344,127352],"valid",[],"NV8"],[[127353,127353],"valid",[],"NV8"],[[127354,127354],"valid",[],"NV8"],[[127355,127356],"valid",[],"NV8"],[[127357,127358],"valid",[],"NV8"],[[127359,127359],"valid",[],"NV8"],[[127360,127369],"valid",[],"NV8"],[[127370,127373],"valid",[],"NV8"],[[127374,127375],"valid",[],"NV8"],[[127376,127376],"mapped",[100,106]],[[127377,127386],"valid",[],"NV8"],[[127387,127461],"disallowed"],[[127462,127487],"valid",[],"NV8"],[[127488,127488],"mapped",[12411,12363]],[[127489,127489],"mapped",[12467,12467]],[[127490,127490],"mapped",[12469]],[[127491,127503],"disallowed"],[[127504,127504],"mapped",[25163]],[[127505,127505],"mapped",[23383]],[[127506,127506],"mapped",[21452]],[[127507,127507],"mapped",[12487]],[[127508,127508],"mapped",[20108]],[[127509,127509],"mapped",[22810]],[[127510,127510],"mapped",[35299]],[[127511,127511],"mapped",[22825]],[[127512,127512],"mapped",[20132]],[[127513,127513],"mapped",[26144]],[[127514,127514],"mapped",[28961]],[[127515,127515],"mapped",[26009]],[[127516,127516],"mapped",[21069]],[[127517,127517],"mapped",[24460]],[[127518,127518],"mapped",[20877]],[[127519,127519],"mapped",[26032]],[[127520,127520],"mapped",[21021]],[[127521,127521],"mapped",[32066]],[[127522,127522],"mapped",[29983]],[[127523,127523],"mapped",[36009]],[[127524,127524],"mapped",[22768]],[[127525,127525],"mapped",[21561]],[[127526,127526],"mapped",[28436]],[[127527,127527],"mapped",[25237]],[[127528,127528],"mapped",[25429]],[[127529,127529],"mapped",[19968]],[[127530,127530],"mapped",[19977]],[[127531,127531],"mapped",[36938]],[[127532,127532],"mapped",[24038]],[[127533,127533],"mapped",[20013]],[[127534,127534],"mapped",[21491]],[[127535,127535],"mapped",[25351]],[[127536,127536],"mapped",[36208]],[[127537,127537],"mapped",[25171]],[[127538,127538],"mapped",[31105]],[[127539,127539],"mapped",[31354]],[[127540,127540],"mapped",[21512]],[[127541,127541],"mapped",[28288]],[[127542,127542],"mapped",[26377]],[[127543,127543],"mapped",[26376]],[[127544,127544],"mapped",[30003]],[[127545,127545],"mapped",[21106]],[[127546,127546],"mapped",[21942]],[[127547,127551],"disallowed"],[[127552,127552],"mapped",[12308,26412,12309]],[[127553,127553],"mapped",[12308,19977,12309]],[[127554,127554],"mapped",[12308,20108,12309]],[[127555,127555],"mapped",[12308,23433,12309]],[[127556,127556],"mapped",[12308,28857,12309]],[[127557,127557],"mapped",[12308,25171,12309]],[[127558,127558],"mapped",[12308,30423,12309]],[[127559,127559],"mapped",[12308,21213,12309]],[[127560,127560],"mapped",[12308,25943,12309]],[[127561,127567],"disallowed"],[[127568,127568],"mapped",[24471]],[[127569,127569],"mapped",[21487]],[[127570,127743],"disallowed"],[[127744,127776],"valid",[],"NV8"],[[127777,127788],"valid",[],"NV8"],[[127789,127791],"valid",[],"NV8"],[[127792,127797],"valid",[],"NV8"],[[127798,127798],"valid",[],"NV8"],[[127799,127868],"valid",[],"NV8"],[[127869,127869],"valid",[],"NV8"],[[127870,127871],"valid",[],"NV8"],[[127872,127891],"valid",[],"NV8"],[[127892,127903],"valid",[],"NV8"],[[127904,127940],"valid",[],"NV8"],[[127941,127941],"valid",[],"NV8"],[[127942,127946],"valid",[],"NV8"],[[127947,127950],"valid",[],"NV8"],[[127951,127955],"valid",[],"NV8"],[[127956,127967],"valid",[],"NV8"],[[127968,127984],"valid",[],"NV8"],[[127985,127991],"valid",[],"NV8"],[[127992,127999],"valid",[],"NV8"],[[128000,128062],"valid",[],"NV8"],[[128063,128063],"valid",[],"NV8"],[[128064,128064],"valid",[],"NV8"],[[128065,128065],"valid",[],"NV8"],[[128066,128247],"valid",[],"NV8"],[[128248,128248],"valid",[],"NV8"],[[128249,128252],"valid",[],"NV8"],[[128253,128254],"valid",[],"NV8"],[[128255,128255],"valid",[],"NV8"],[[128256,128317],"valid",[],"NV8"],[[128318,128319],"valid",[],"NV8"],[[128320,128323],"valid",[],"NV8"],[[128324,128330],"valid",[],"NV8"],[[128331,128335],"valid",[],"NV8"],[[128336,128359],"valid",[],"NV8"],[[128360,128377],"valid",[],"NV8"],[[128378,128378],"disallowed"],[[128379,128419],"valid",[],"NV8"],[[128420,128420],"disallowed"],[[128421,128506],"valid",[],"NV8"],[[128507,128511],"valid",[],"NV8"],[[128512,128512],"valid",[],"NV8"],[[128513,128528],"valid",[],"NV8"],[[128529,128529],"valid",[],"NV8"],[[128530,128532],"valid",[],"NV8"],[[128533,128533],"valid",[],"NV8"],[[128534,128534],"valid",[],"NV8"],[[128535,128535],"valid",[],"NV8"],[[128536,128536],"valid",[],"NV8"],[[128537,128537],"valid",[],"NV8"],[[128538,128538],"valid",[],"NV8"],[[128539,128539],"valid",[],"NV8"],[[128540,128542],"valid",[],"NV8"],[[128543,128543],"valid",[],"NV8"],[[128544,128549],"valid",[],"NV8"],[[128550,128551],"valid",[],"NV8"],[[128552,128555],"valid",[],"NV8"],[[128556,128556],"valid",[],"NV8"],[[128557,128557],"valid",[],"NV8"],[[128558,128559],"valid",[],"NV8"],[[128560,128563],"valid",[],"NV8"],[[128564,128564],"valid",[],"NV8"],[[128565,128576],"valid",[],"NV8"],[[128577,128578],"valid",[],"NV8"],[[128579,128580],"valid",[],"NV8"],[[128581,128591],"valid",[],"NV8"],[[128592,128639],"valid",[],"NV8"],[[128640,128709],"valid",[],"NV8"],[[128710,128719],"valid",[],"NV8"],[[128720,128720],"valid",[],"NV8"],[[128721,128735],"disallowed"],[[128736,128748],"valid",[],"NV8"],[[128749,128751],"disallowed"],[[128752,128755],"valid",[],"NV8"],[[128756,128767],"disallowed"],[[128768,128883],"valid",[],"NV8"],[[128884,128895],"disallowed"],[[128896,128980],"valid",[],"NV8"],[[128981,129023],"disallowed"],[[129024,129035],"valid",[],"NV8"],[[129036,129039],"disallowed"],[[129040,129095],"valid",[],"NV8"],[[129096,129103],"disallowed"],[[129104,129113],"valid",[],"NV8"],[[129114,129119],"disallowed"],[[129120,129159],"valid",[],"NV8"],[[129160,129167],"disallowed"],[[129168,129197],"valid",[],"NV8"],[[129198,129295],"disallowed"],[[129296,129304],"valid",[],"NV8"],[[129305,129407],"disallowed"],[[129408,129412],"valid",[],"NV8"],[[129413,129471],"disallowed"],[[129472,129472],"valid",[],"NV8"],[[129473,131069],"disallowed"],[[131070,131071],"disallowed"],[[131072,173782],"valid"],[[173783,173823],"disallowed"],[[173824,177972],"valid"],[[177973,177983],"disallowed"],[[177984,178205],"valid"],[[178206,178207],"disallowed"],[[178208,183969],"valid"],[[183970,194559],"disallowed"],[[194560,194560],"mapped",[20029]],[[194561,194561],"mapped",[20024]],[[194562,194562],"mapped",[20033]],[[194563,194563],"mapped",[131362]],[[194564,194564],"mapped",[20320]],[[194565,194565],"mapped",[20398]],[[194566,194566],"mapped",[20411]],[[194567,194567],"mapped",[20482]],[[194568,194568],"mapped",[20602]],[[194569,194569],"mapped",[20633]],[[194570,194570],"mapped",[20711]],[[194571,194571],"mapped",[20687]],[[194572,194572],"mapped",[13470]],[[194573,194573],"mapped",[132666]],[[194574,194574],"mapped",[20813]],[[194575,194575],"mapped",[20820]],[[194576,194576],"mapped",[20836]],[[194577,194577],"mapped",[20855]],[[194578,194578],"mapped",[132380]],[[194579,194579],"mapped",[13497]],[[194580,194580],"mapped",[20839]],[[194581,194581],"mapped",[20877]],[[194582,194582],"mapped",[132427]],[[194583,194583],"mapped",[20887]],[[194584,194584],"mapped",[20900]],[[194585,194585],"mapped",[20172]],[[194586,194586],"mapped",[20908]],[[194587,194587],"mapped",[20917]],[[194588,194588],"mapped",[168415]],[[194589,194589],"mapped",[20981]],[[194590,194590],"mapped",[20995]],[[194591,194591],"mapped",[13535]],[[194592,194592],"mapped",[21051]],[[194593,194593],"mapped",[21062]],[[194594,194594],"mapped",[21106]],[[194595,194595],"mapped",[21111]],[[194596,194596],"mapped",[13589]],[[194597,194597],"mapped",[21191]],[[194598,194598],"mapped",[21193]],[[194599,194599],"mapped",[21220]],[[194600,194600],"mapped",[21242]],[[194601,194601],"mapped",[21253]],[[194602,194602],"mapped",[21254]],[[194603,194603],"mapped",[21271]],[[194604,194604],"mapped",[21321]],[[194605,194605],"mapped",[21329]],[[194606,194606],"mapped",[21338]],[[194607,194607],"mapped",[21363]],[[194608,194608],"mapped",[21373]],[[194609,194611],"mapped",[21375]],[[194612,194612],"mapped",[133676]],[[194613,194613],"mapped",[28784]],[[194614,194614],"mapped",[21450]],[[194615,194615],"mapped",[21471]],[[194616,194616],"mapped",[133987]],[[194617,194617],"mapped",[21483]],[[194618,194618],"mapped",[21489]],[[194619,194619],"mapped",[21510]],[[194620,194620],"mapped",[21662]],[[194621,194621],"mapped",[21560]],[[194622,194622],"mapped",[21576]],[[194623,194623],"mapped",[21608]],[[194624,194624],"mapped",[21666]],[[194625,194625],"mapped",[21750]],[[194626,194626],"mapped",[21776]],[[194627,194627],"mapped",[21843]],[[194628,194628],"mapped",[21859]],[[194629,194630],"mapped",[21892]],[[194631,194631],"mapped",[21913]],[[194632,194632],"mapped",[21931]],[[194633,194633],"mapped",[21939]],[[194634,194634],"mapped",[21954]],[[194635,194635],"mapped",[22294]],[[194636,194636],"mapped",[22022]],[[194637,194637],"mapped",[22295]],[[194638,194638],"mapped",[22097]],[[194639,194639],"mapped",[22132]],[[194640,194640],"mapped",[20999]],[[194641,194641],"mapped",[22766]],[[194642,194642],"mapped",[22478]],[[194643,194643],"mapped",[22516]],[[194644,194644],"mapped",[22541]],[[194645,194645],"mapped",[22411]],[[194646,194646],"mapped",[22578]],[[194647,194647],"mapped",[22577]],[[194648,194648],"mapped",[22700]],[[194649,194649],"mapped",[136420]],[[194650,194650],"mapped",[22770]],[[194651,194651],"mapped",[22775]],[[194652,194652],"mapped",[22790]],[[194653,194653],"mapped",[22810]],[[194654,194654],"mapped",[22818]],[[194655,194655],"mapped",[22882]],[[194656,194656],"mapped",[136872]],[[194657,194657],"mapped",[136938]],[[194658,194658],"mapped",[23020]],[[194659,194659],"mapped",[23067]],[[194660,194660],"mapped",[23079]],[[194661,194661],"mapped",[23000]],[[194662,194662],"mapped",[23142]],[[194663,194663],"mapped",[14062]],[[194664,194664],"disallowed"],[[194665,194665],"mapped",[23304]],[[194666,194667],"mapped",[23358]],[[194668,194668],"mapped",[137672]],[[194669,194669],"mapped",[23491]],[[194670,194670],"mapped",[23512]],[[194671,194671],"mapped",[23527]],[[194672,194672],"mapped",[23539]],[[194673,194673],"mapped",[138008]],[[194674,194674],"mapped",[23551]],[[194675,194675],"mapped",[23558]],[[194676,194676],"disallowed"],[[194677,194677],"mapped",[23586]],[[194678,194678],"mapped",[14209]],[[194679,194679],"mapped",[23648]],[[194680,194680],"mapped",[23662]],[[194681,194681],"mapped",[23744]],[[194682,194682],"mapped",[23693]],[[194683,194683],"mapped",[138724]],[[194684,194684],"mapped",[23875]],[[194685,194685],"mapped",[138726]],[[194686,194686],"mapped",[23918]],[[194687,194687],"mapped",[23915]],[[194688,194688],"mapped",[23932]],[[194689,194689],"mapped",[24033]],[[194690,194690],"mapped",[24034]],[[194691,194691],"mapped",[14383]],[[194692,194692],"mapped",[24061]],[[194693,194693],"mapped",[24104]],[[194694,194694],"mapped",[24125]],[[194695,194695],"mapped",[24169]],[[194696,194696],"mapped",[14434]],[[194697,194697],"mapped",[139651]],[[194698,194698],"mapped",[14460]],[[194699,194699],"mapped",[24240]],[[194700,194700],"mapped",[24243]],[[194701,194701],"mapped",[24246]],[[194702,194702],"mapped",[24266]],[[194703,194703],"mapped",[172946]],[[194704,194704],"mapped",[24318]],[[194705,194706],"mapped",[140081]],[[194707,194707],"mapped",[33281]],[[194708,194709],"mapped",[24354]],[[194710,194710],"mapped",[14535]],[[194711,194711],"mapped",[144056]],[[194712,194712],"mapped",[156122]],[[194713,194713],"mapped",[24418]],[[194714,194714],"mapped",[24427]],[[194715,194715],"mapped",[14563]],[[194716,194716],"mapped",[24474]],[[194717,194717],"mapped",[24525]],[[194718,194718],"mapped",[24535]],[[194719,194719],"mapped",[24569]],[[194720,194720],"mapped",[24705]],[[194721,194721],"mapped",[14650]],[[194722,194722],"mapped",[14620]],[[194723,194723],"mapped",[24724]],[[194724,194724],"mapped",[141012]],[[194725,194725],"mapped",[24775]],[[194726,194726],"mapped",[24904]],[[194727,194727],"mapped",[24908]],[[194728,194728],"mapped",[24910]],[[194729,194729],"mapped",[24908]],[[194730,194730],"mapped",[24954]],[[194731,194731],"mapped",[24974]],[[194732,194732],"mapped",[25010]],[[194733,194733],"mapped",[24996]],[[194734,194734],"mapped",[25007]],[[194735,194735],"mapped",[25054]],[[194736,194736],"mapped",[25074]],[[194737,194737],"mapped",[25078]],[[194738,194738],"mapped",[25104]],[[194739,194739],"mapped",[25115]],[[194740,194740],"mapped",[25181]],[[194741,194741],"mapped",[25265]],[[194742,194742],"mapped",[25300]],[[194743,194743],"mapped",[25424]],[[194744,194744],"mapped",[142092]],[[194745,194745],"mapped",[25405]],[[194746,194746],"mapped",[25340]],[[194747,194747],"mapped",[25448]],[[194748,194748],"mapped",[25475]],[[194749,194749],"mapped",[25572]],[[194750,194750],"mapped",[142321]],[[194751,194751],"mapped",[25634]],[[194752,194752],"mapped",[25541]],[[194753,194753],"mapped",[25513]],[[194754,194754],"mapped",[14894]],[[194755,194755],"mapped",[25705]],[[194756,194756],"mapped",[25726]],[[194757,194757],"mapped",[25757]],[[194758,194758],"mapped",[25719]],[[194759,194759],"mapped",[14956]],[[194760,194760],"mapped",[25935]],[[194761,194761],"mapped",[25964]],[[194762,194762],"mapped",[143370]],[[194763,194763],"mapped",[26083]],[[194764,194764],"mapped",[26360]],[[194765,194765],"mapped",[26185]],[[194766,194766],"mapped",[15129]],[[194767,194767],"mapped",[26257]],[[194768,194768],"mapped",[15112]],[[194769,194769],"mapped",[15076]],[[194770,194770],"mapped",[20882]],[[194771,194771],"mapped",[20885]],[[194772,194772],"mapped",[26368]],[[194773,194773],"mapped",[26268]],[[194774,194774],"mapped",[32941]],[[194775,194775],"mapped",[17369]],[[194776,194776],"mapped",[26391]],[[194777,194777],"mapped",[26395]],[[194778,194778],"mapped",[26401]],[[194779,194779],"mapped",[26462]],[[194780,194780],"mapped",[26451]],[[194781,194781],"mapped",[144323]],[[194782,194782],"mapped",[15177]],[[194783,194783],"mapped",[26618]],[[194784,194784],"mapped",[26501]],[[194785,194785],"mapped",[26706]],[[194786,194786],"mapped",[26757]],[[194787,194787],"mapped",[144493]],[[194788,194788],"mapped",[26766]],[[194789,194789],"mapped",[26655]],[[194790,194790],"mapped",[26900]],[[194791,194791],"mapped",[15261]],[[194792,194792],"mapped",[26946]],[[194793,194793],"mapped",[27043]],[[194794,194794],"mapped",[27114]],[[194795,194795],"mapped",[27304]],[[194796,194796],"mapped",[145059]],[[194797,194797],"mapped",[27355]],[[194798,194798],"mapped",[15384]],[[194799,194799],"mapped",[27425]],[[194800,194800],"mapped",[145575]],[[194801,194801],"mapped",[27476]],[[194802,194802],"mapped",[15438]],[[194803,194803],"mapped",[27506]],[[194804,194804],"mapped",[27551]],[[194805,194805],"mapped",[27578]],[[194806,194806],"mapped",[27579]],[[194807,194807],"mapped",[146061]],[[194808,194808],"mapped",[138507]],[[194809,194809],"mapped",[146170]],[[194810,194810],"mapped",[27726]],[[194811,194811],"mapped",[146620]],[[194812,194812],"mapped",[27839]],[[194813,194813],"mapped",[27853]],[[194814,194814],"mapped",[27751]],[[194815,194815],"mapped",[27926]],[[194816,194816],"mapped",[27966]],[[194817,194817],"mapped",[28023]],[[194818,194818],"mapped",[27969]],[[194819,194819],"mapped",[28009]],[[194820,194820],"mapped",[28024]],[[194821,194821],"mapped",[28037]],[[194822,194822],"mapped",[146718]],[[194823,194823],"mapped",[27956]],[[194824,194824],"mapped",[28207]],[[194825,194825],"mapped",[28270]],[[194826,194826],"mapped",[15667]],[[194827,194827],"mapped",[28363]],[[194828,194828],"mapped",[28359]],[[194829,194829],"mapped",[147153]],[[194830,194830],"mapped",[28153]],[[194831,194831],"mapped",[28526]],[[194832,194832],"mapped",[147294]],[[194833,194833],"mapped",[147342]],[[194834,194834],"mapped",[28614]],[[194835,194835],"mapped",[28729]],[[194836,194836],"mapped",[28702]],[[194837,194837],"mapped",[28699]],[[194838,194838],"mapped",[15766]],[[194839,194839],"mapped",[28746]],[[194840,194840],"mapped",[28797]],[[194841,194841],"mapped",[28791]],[[194842,194842],"mapped",[28845]],[[194843,194843],"mapped",[132389]],[[194844,194844],"mapped",[28997]],[[194845,194845],"mapped",[148067]],[[194846,194846],"mapped",[29084]],[[194847,194847],"disallowed"],[[194848,194848],"mapped",[29224]],[[194849,194849],"mapped",[29237]],[[194850,194850],"mapped",[29264]],[[194851,194851],"mapped",[149000]],[[194852,194852],"mapped",[29312]],[[194853,194853],"mapped",[29333]],[[194854,194854],"mapped",[149301]],[[194855,194855],"mapped",[149524]],[[194856,194856],"mapped",[29562]],[[194857,194857],"mapped",[29579]],[[194858,194858],"mapped",[16044]],[[194859,194859],"mapped",[29605]],[[194860,194861],"mapped",[16056]],[[194862,194862],"mapped",[29767]],[[194863,194863],"mapped",[29788]],[[194864,194864],"mapped",[29809]],[[194865,194865],"mapped",[29829]],[[194866,194866],"mapped",[29898]],[[194867,194867],"mapped",[16155]],[[194868,194868],"mapped",[29988]],[[194869,194869],"mapped",[150582]],[[194870,194870],"mapped",[30014]],[[194871,194871],"mapped",[150674]],[[194872,194872],"mapped",[30064]],[[194873,194873],"mapped",[139679]],[[194874,194874],"mapped",[30224]],[[194875,194875],"mapped",[151457]],[[194876,194876],"mapped",[151480]],[[194877,194877],"mapped",[151620]],[[194878,194878],"mapped",[16380]],[[194879,194879],"mapped",[16392]],[[194880,194880],"mapped",[30452]],[[194881,194881],"mapped",[151795]],[[194882,194882],"mapped",[151794]],[[194883,194883],"mapped",[151833]],[[194884,194884],"mapped",[151859]],[[194885,194885],"mapped",[30494]],[[194886,194887],"mapped",[30495]],[[194888,194888],"mapped",[30538]],[[194889,194889],"mapped",[16441]],[[194890,194890],"mapped",[30603]],[[194891,194891],"mapped",[16454]],[[194892,194892],"mapped",[16534]],[[194893,194893],"mapped",[152605]],[[194894,194894],"mapped",[30798]],[[194895,194895],"mapped",[30860]],[[194896,194896],"mapped",[30924]],[[194897,194897],"mapped",[16611]],[[194898,194898],"mapped",[153126]],[[194899,194899],"mapped",[31062]],[[194900,194900],"mapped",[153242]],[[194901,194901],"mapped",[153285]],[[194902,194902],"mapped",[31119]],[[194903,194903],"mapped",[31211]],[[194904,194904],"mapped",[16687]],[[194905,194905],"mapped",[31296]],[[194906,194906],"mapped",[31306]],[[194907,194907],"mapped",[31311]],[[194908,194908],"mapped",[153980]],[[194909,194910],"mapped",[154279]],[[194911,194911],"disallowed"],[[194912,194912],"mapped",[16898]],[[194913,194913],"mapped",[154539]],[[194914,194914],"mapped",[31686]],[[194915,194915],"mapped",[31689]],[[194916,194916],"mapped",[16935]],[[194917,194917],"mapped",[154752]],[[194918,194918],"mapped",[31954]],[[194919,194919],"mapped",[17056]],[[194920,194920],"mapped",[31976]],[[194921,194921],"mapped",[31971]],[[194922,194922],"mapped",[32000]],[[194923,194923],"mapped",[155526]],[[194924,194924],"mapped",[32099]],[[194925,194925],"mapped",[17153]],[[194926,194926],"mapped",[32199]],[[194927,194927],"mapped",[32258]],[[194928,194928],"mapped",[32325]],[[194929,194929],"mapped",[17204]],[[194930,194930],"mapped",[156200]],[[194931,194931],"mapped",[156231]],[[194932,194932],"mapped",[17241]],[[194933,194933],"mapped",[156377]],[[194934,194934],"mapped",[32634]],[[194935,194935],"mapped",[156478]],[[194936,194936],"mapped",[32661]],[[194937,194937],"mapped",[32762]],[[194938,194938],"mapped",[32773]],[[194939,194939],"mapped",[156890]],[[194940,194940],"mapped",[156963]],[[194941,194941],"mapped",[32864]],[[194942,194942],"mapped",[157096]],[[194943,194943],"mapped",[32880]],[[194944,194944],"mapped",[144223]],[[194945,194945],"mapped",[17365]],[[194946,194946],"mapped",[32946]],[[194947,194947],"mapped",[33027]],[[194948,194948],"mapped",[17419]],[[194949,194949],"mapped",[33086]],[[194950,194950],"mapped",[23221]],[[194951,194951],"mapped",[157607]],[[194952,194952],"mapped",[157621]],[[194953,194953],"mapped",[144275]],[[194954,194954],"mapped",[144284]],[[194955,194955],"mapped",[33281]],[[194956,194956],"mapped",[33284]],[[194957,194957],"mapped",[36766]],[[194958,194958],"mapped",[17515]],[[194959,194959],"mapped",[33425]],[[194960,194960],"mapped",[33419]],[[194961,194961],"mapped",[33437]],[[194962,194962],"mapped",[21171]],[[194963,194963],"mapped",[33457]],[[194964,194964],"mapped",[33459]],[[194965,194965],"mapped",[33469]],[[194966,194966],"mapped",[33510]],[[194967,194967],"mapped",[158524]],[[194968,194968],"mapped",[33509]],[[194969,194969],"mapped",[33565]],[[194970,194970],"mapped",[33635]],[[194971,194971],"mapped",[33709]],[[194972,194972],"mapped",[33571]],[[194973,194973],"mapped",[33725]],[[194974,194974],"mapped",[33767]],[[194975,194975],"mapped",[33879]],[[194976,194976],"mapped",[33619]],[[194977,194977],"mapped",[33738]],[[194978,194978],"mapped",[33740]],[[194979,194979],"mapped",[33756]],[[194980,194980],"mapped",[158774]],[[194981,194981],"mapped",[159083]],[[194982,194982],"mapped",[158933]],[[194983,194983],"mapped",[17707]],[[194984,194984],"mapped",[34033]],[[194985,194985],"mapped",[34035]],[[194986,194986],"mapped",[34070]],[[194987,194987],"mapped",[160714]],[[194988,194988],"mapped",[34148]],[[194989,194989],"mapped",[159532]],[[194990,194990],"mapped",[17757]],[[194991,194991],"mapped",[17761]],[[194992,194992],"mapped",[159665]],[[194993,194993],"mapped",[159954]],[[194994,194994],"mapped",[17771]],[[194995,194995],"mapped",[34384]],[[194996,194996],"mapped",[34396]],[[194997,194997],"mapped",[34407]],[[194998,194998],"mapped",[34409]],[[194999,194999],"mapped",[34473]],[[195000,195000],"mapped",[34440]],[[195001,195001],"mapped",[34574]],[[195002,195002],"mapped",[34530]],[[195003,195003],"mapped",[34681]],[[195004,195004],"mapped",[34600]],[[195005,195005],"mapped",[34667]],[[195006,195006],"mapped",[34694]],[[195007,195007],"disallowed"],[[195008,195008],"mapped",[34785]],[[195009,195009],"mapped",[34817]],[[195010,195010],"mapped",[17913]],[[195011,195011],"mapped",[34912]],[[195012,195012],"mapped",[34915]],[[195013,195013],"mapped",[161383]],[[195014,195014],"mapped",[35031]],[[195015,195015],"mapped",[35038]],[[195016,195016],"mapped",[17973]],[[195017,195017],"mapped",[35066]],[[195018,195018],"mapped",[13499]],[[195019,195019],"mapped",[161966]],[[195020,195020],"mapped",[162150]],[[195021,195021],"mapped",[18110]],[[195022,195022],"mapped",[18119]],[[195023,195023],"mapped",[35488]],[[195024,195024],"mapped",[35565]],[[195025,195025],"mapped",[35722]],[[195026,195026],"mapped",[35925]],[[195027,195027],"mapped",[162984]],[[195028,195028],"mapped",[36011]],[[195029,195029],"mapped",[36033]],[[195030,195030],"mapped",[36123]],[[195031,195031],"mapped",[36215]],[[195032,195032],"mapped",[163631]],[[195033,195033],"mapped",[133124]],[[195034,195034],"mapped",[36299]],[[195035,195035],"mapped",[36284]],[[195036,195036],"mapped",[36336]],[[195037,195037],"mapped",[133342]],[[195038,195038],"mapped",[36564]],[[195039,195039],"mapped",[36664]],[[195040,195040],"mapped",[165330]],[[195041,195041],"mapped",[165357]],[[195042,195042],"mapped",[37012]],[[195043,195043],"mapped",[37105]],[[195044,195044],"mapped",[37137]],[[195045,195045],"mapped",[165678]],[[195046,195046],"mapped",[37147]],[[195047,195047],"mapped",[37432]],[[195048,195048],"mapped",[37591]],[[195049,195049],"mapped",[37592]],[[195050,195050],"mapped",[37500]],[[195051,195051],"mapped",[37881]],[[195052,195052],"mapped",[37909]],[[195053,195053],"mapped",[166906]],[[195054,195054],"mapped",[38283]],[[195055,195055],"mapped",[18837]],[[195056,195056],"mapped",[38327]],[[195057,195057],"mapped",[167287]],[[195058,195058],"mapped",[18918]],[[195059,195059],"mapped",[38595]],[[195060,195060],"mapped",[23986]],[[195061,195061],"mapped",[38691]],[[195062,195062],"mapped",[168261]],[[195063,195063],"mapped",[168474]],[[195064,195064],"mapped",[19054]],[[195065,195065],"mapped",[19062]],[[195066,195066],"mapped",[38880]],[[195067,195067],"mapped",[168970]],[[195068,195068],"mapped",[19122]],[[195069,195069],"mapped",[169110]],[[195070,195071],"mapped",[38923]],[[195072,195072],"mapped",[38953]],[[195073,195073],"mapped",[169398]],[[195074,195074],"mapped",[39138]],[[195075,195075],"mapped",[19251]],[[195076,195076],"mapped",[39209]],[[195077,195077],"mapped",[39335]],[[195078,195078],"mapped",[39362]],[[195079,195079],"mapped",[39422]],[[195080,195080],"mapped",[19406]],[[195081,195081],"mapped",[170800]],[[195082,195082],"mapped",[39698]],[[195083,195083],"mapped",[40000]],[[195084,195084],"mapped",[40189]],[[195085,195085],"mapped",[19662]],[[195086,195086],"mapped",[19693]],[[195087,195087],"mapped",[40295]],[[195088,195088],"mapped",[172238]],[[195089,195089],"mapped",[19704]],[[195090,195090],"mapped",[172293]],[[195091,195091],"mapped",[172558]],[[195092,195092],"mapped",[172689]],[[195093,195093],"mapped",[40635]],[[195094,195094],"mapped",[19798]],[[195095,195095],"mapped",[40697]],[[195096,195096],"mapped",[40702]],[[195097,195097],"mapped",[40709]],[[195098,195098],"mapped",[40719]],[[195099,195099],"mapped",[40726]],[[195100,195100],"mapped",[40763]],[[195101,195101],"mapped",[173568]],[[195102,196605],"disallowed"],[[196606,196607],"disallowed"],[[196608,262141],"disallowed"],[[262142,262143],"disallowed"],[[262144,327677],"disallowed"],[[327678,327679],"disallowed"],[[327680,393213],"disallowed"],[[393214,393215],"disallowed"],[[393216,458749],"disallowed"],[[458750,458751],"disallowed"],[[458752,524285],"disallowed"],[[524286,524287],"disallowed"],[[524288,589821],"disallowed"],[[589822,589823],"disallowed"],[[589824,655357],"disallowed"],[[655358,655359],"disallowed"],[[655360,720893],"disallowed"],[[720894,720895],"disallowed"],[[720896,786429],"disallowed"],[[786430,786431],"disallowed"],[[786432,851965],"disallowed"],[[851966,851967],"disallowed"],[[851968,917501],"disallowed"],[[917502,917503],"disallowed"],[[917504,917504],"disallowed"],[[917505,917505],"disallowed"],[[917506,917535],"disallowed"],[[917536,917631],"disallowed"],[[917632,917759],"disallowed"],[[917760,917999],"ignored"],[[918000,983037],"disallowed"],[[983038,983039],"disallowed"],[[983040,1048573],"disallowed"],[[1048574,1048575],"disallowed"],[[1048576,1114109],"disallowed"],[[1114110,1114111],"disallowed"]]')},32301:e=>{"use strict";e.exports={i8:"1.3.7"}}},__webpack_module_cache__={},leafPrototypes,getProto,installedChunks;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var i={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var r=2&t&&e;"object"==typeof r&&!~leafPrototypes.indexOf(r);r=getProto(r))Object.getOwnPropertyNames(r).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,__webpack_require__.d(n,i),n},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>e+".node.js",__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),installedChunks={898:1},__webpack_require__.f.require=(e,t)=>{installedChunks[e]||(e=>{var t=e.modules,n=e.ids,i=e.runtime;for(var r in t)__webpack_require__.o(t,r)&&(__webpack_require__.m[r]=t[r]);i&&i(__webpack_require__);for(var o=0;o<n.length;o++)installedChunks[n[o]]=1})(require("./"+__webpack_require__.u(e)))};var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{activate:()=>AT,deactivate:()=>NT}),__webpack_require__(78190);const e={isExiting:!1},t="_builtin.JupyterServerSelectorForTesting",n="_builtin.jupyterServerUrlProvider",i="python",r="markdown",o="vscode-notebook-cell",s={language:i},a=[{scheme:"untitled",language:i},{scheme:"file",language:i},{scheme:o,language:i}],c="vscode-interactive-input",l="jupyter-notebook",d="interactive",u=[{language:i,notebookType:l},{language:i,notebookType:d},{scheme:c,language:i},{scheme:o,language:i}],p="ms-toolsai.jupyter",h="ms-toolsai.jupyter-hub",f="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",m="STANDARD_OUTPUT_CHANNEL";var g,v;!function(e){e.PythonInteractiveHelpLink="https://aka.ms/pyaiinstall",e.JupyterDataRateHelpLink="https://aka.ms/AA5ggm0"}(g||(g={})),function(e){e.JupyterServerLocalLaunch="local",e.JupyterServerRemoteLaunch="remote",e.JupyterServerUriList="jupyter.jupyterServer.uriList",e.JupyterServerRemoteLaunchUriListKey="remote-uri-list",e.JupyterServerRemoteLaunchUriSeparator="\r",e.JupyterServerRemoteLaunchNameSeparator="\n",e.JupyterServerRemoteLaunchUriEqualsDisplayName="same",e.JupyterServerRemoteLaunchService=p,e.JupyterServerUriListMax=10,e.IntellisenseTimeout=2e3}(v||(v={}));let y=!1,b=!1;function w(){return b||S()}let _=!1;function S(){return _}var C,k;!function(e){e.GeneratedThemeName="ipython-theme",e.RawPurpose="raw",e.MatplotLibDefaultParams="_VSCode_defaultMatplotlib_Params",e.MatplotLibFigureFormats="_VSCode_matplotLib_FigureFormats",e.DefaultCodeCellMarker="# %%",e.DefaultCommTarget="jupyter.widget",e.ALL_VARIABLES="ALL_VARIABLES",e.KERNEL_VARIABLES="KERNEL_VARIABLES",e.DEBUGGER_VARIABLES="DEBUGGER_VARIABLES",e.PYTHON_VARIABLES_REQUESTER="PYTHON_VARIABLES_REQUESTER",e.MULTIPLEXING_DEBUGSERVICE="MULTIPLEXING_DEBUGSERVICE",e.RUN_BY_LINE_DEBUGSERVICE="RUN_BY_LINE_DEBUGSERVICE",e.REMOTE_URI="https://remote/",e.REMOTE_URI_ID_PARAM="id",e.REMOTE_URI_HANDLE_PARAM="uriHandle",e.REMOTE_URI_EXTENSION_ID_PARAM="extensionId"}(C||(C={})),function(e){e.ImportIPython="{0}\nfrom IPython import get_ipython\n\n{1}",e.MatplotLibInit=`import matplotlib\n%matplotlib inline\n${C.MatplotLibDefaultParams} = dict(matplotlib.rcParams)\n`,e.AppendSVGFigureFormat=`import matplotlib_inline.backend_inline\n${C.MatplotLibFigureFormats} = matplotlib_inline.backend_inline.InlineBackend.instance().figure_formats\n${C.MatplotLibFigureFormats}.add('svg')\nmatplotlib_inline.backend_inline.set_matplotlib_formats(*${C.MatplotLibFigureFormats})`,e.UpdateCWDAndPath='import os as _VSCODE_os\nimport sys as _VSCODE_sys\n%cd "{0}"\nif _VSCODE_os.getcwd() not in _VSCODE_sys.path:\n    _VSCODE_sys.path.insert(0, _VSCODE_os.getcwd())\n\ndel _VSCODE_sys\ndel _VSCODE_os',e.DisableJedi="%config Completer.use_jedi = False"}(k||(k={}));const E="JUPYTER_OUTPUT_CHANNEL",x="Default Light+",T="ms-python.python",P="ms-toolsai.jupyter-renderers",I="ms-python.vscode-pylance",D=["python","html","xml","javascript","markdown","latex","shellscript","bat","powershell","kusto","ruby","sql","perl","qsharp","raw"],R=new Map([["bash","shellscript"],["c#","csharp"],["f#","fsharp"],["q#","qsharp"],["c++11","c++"],["c++12","c++"],["c++14","c++"]]),O=["python","r","julia","c++","c#","f#","q#","powershell","java","scala","haskell","bash","cling","rust","sas","sos","ocaml"];var A,N,M,L,j,F,U;!function(e){e.auto="auto",e.ui="ui",e.codelens="codelens",e.commandPalette="commandpalette"}(A||(A={})),function(e){e.RunAllCells="jupyter.runallcells",e.RunAllCellsAbove="jupyter.runallcellsabove",e.RunCellAndAllBelow="jupyter.runcellandallbelow",e.RunAllCellsAbovePalette="jupyter.runallcellsabove.palette",e.RunCellAndAllBelowPalette="jupyter.runcurrentcellandallbelow.palette",e.RunToLine="jupyter.runtoline",e.RunFromLine="jupyter.runfromline",e.RunCell="jupyter.runcell",e.RunCurrentCell="jupyter.runcurrentcell",e.RunCurrentCellAdvance="jupyter.runcurrentcelladvance",e.CreateNewInteractive="jupyter.createnewinteractive",e.ImportNotebook="jupyter.importnotebook",e.ImportNotebookFile="jupyter.importnotebookfile",e.ExportFileAsNotebook="jupyter.exportfileasnotebook",e.ExportFileAndOutputAsNotebook="jupyter.exportfileandoutputasnotebook",e.InterruptKernel="jupyter.interruptkernel",e.RestartKernel="jupyter.restartkernel",e.RestartKernelAndRunAllCells="jupyter.restartkernelandrunallcells",e.RestartKernelAndRunUpToSelectedCell="jupyter.restartkernelandrunuptoselectedcell",e.NotebookEditorRemoveAllCells="jupyter.notebookeditor.removeallcells",e.NotebookEditorRunAllCells="jupyter.notebookeditor.runallcells",e.NotebookEditorRunSelectedCell="jupyter.notebookeditor.runselectedcell",e.NotebookEditorAddCellBelow="jupyter.notebookeditor.addcellbelow",e.ExpandAllCells="jupyter.expandallcells",e.CollapseAllCells="jupyter.collapseallcells",e.ExportOutputAsNotebook="jupyter.exportoutputasnotebook",e.ExecSelectionInInteractiveWindow="jupyter.execSelectionInteractive",e.RunFileInInteractiveWindows="jupyter.runFileInteractive",e.DebugFileInInteractiveWindows="jupyter.debugFileInteractive",e.AddCellBelow="jupyter.addcellbelow",e.DebugCurrentCellPalette="jupyter.debugcurrentcell.palette",e.DebugCell="jupyter.debugcell",e.DebugStepOver="jupyter.debugstepover",e.DebugContinue="jupyter.debugcontinue",e.DebugStop="jupyter.debugstop",e.RunCurrentCellAndAddBelow="jupyter.runcurrentcellandaddbelow",e.InsertCellBelowPosition="jupyter.insertCellBelowPosition",e.InsertCellBelow="jupyter.insertCellBelow",e.InsertCellAbove="jupyter.insertCellAbove",e.DeleteCells="jupyter.deleteCells",e.SelectCell="jupyter.selectCell",e.SelectCellContents="jupyter.selectCellContents",e.ExtendSelectionByCellAbove="jupyter.extendSelectionByCellAbove",e.ExtendSelectionByCellBelow="jupyter.extendSelectionByCellBelow",e.MoveCellsUp="jupyter.moveCellsUp",e.MoveCellsDown="jupyter.moveCellsDown",e.ChangeCellToMarkdown="jupyter.changeCellToMarkdown",e.ChangeCellToCode="jupyter.changeCellToCode",e.GotoNextCellInFile="jupyter.gotoNextCellInFile",e.GotoPrevCellInFile="jupyter.gotoPrevCellInFile",e.ScrollToCell="jupyter.scrolltocell",e.CreateNewNotebook="jupyter.createnewnotebook",e.ViewJupyterOutput="jupyter.viewOutput",e.ExportAsPythonScript="jupyter.exportAsPythonScript",e.ExportToHTML="jupyter.exportToHTML",e.ExportToPDF="jupyter.exportToPDF",e.Export="jupyter.export",e.NativeNotebookExport="jupyter.notebookeditor.export",e.LatestExtension="jupyter.latestExtension",e.EnableLoadingWidgetsFrom3rdPartySource="jupyter.enableLoadingWidgetScriptsFromThirdPartySource",e.NotebookEditorExpandAllCells="jupyter.notebookeditor.expandallcells",e.NotebookEditorCollapseAllCells="jupyter.notebookeditor.collapseallcells",e.EnableDebugLogging="jupyter.enableDebugLogging",e.ResetLoggingLevel="jupyter.resetLoggingLevel",e.ShowDataViewer="jupyter.showDataViewer",e.RefreshDataViewer="jupyter.refreshDataViewer",e.ClearSavedJupyterUris="jupyter.clearSavedJupyterUris",e.OpenVariableView="jupyter.openVariableView",e.OpenOutlineView="jupyter.openOutlineView",e.InteractiveClearAll="jupyter.interactive.clearAllCells",e.InteractiveGoToCode="jupyter.interactive.goToCode",e.InteractiveCopyCell="jupyter.interactive.copyCell",e.InteractiveExportAsNotebook="jupyter.interactive.exportasnotebook",e.InteractiveExportAs="jupyter.interactive.exportas",e.RunByLine="jupyter.runByLine",e.RunAndDebugCell="jupyter.runAndDebugCell",e.RunByLineNext="jupyter.runByLineNext",e.RunByLineStop="jupyter.runByLineStop",e.ReplayPylanceLog="jupyter.replayPylanceLog",e.ReplayPylanceLogStep="jupyter.replayPylanceLogStep",e.InstallPythonExtensionViaKernelPicker="jupyter.installPythonExtensionViaKernelPicker",e.InstallPythonViaKernelPicker="jupyter.installPythonViaKernelPicker",e.ContinueEditSessionInCodespace="jupyter.continueEditSessionInCodespace"}(N||(N={})),function(e){e.DefaultDesignLenses=[N.RunCurrentCell,N.RunAllCellsAbove,N.DebugCell],e.DefaultDebuggingLenses=[N.DebugContinue,N.DebugStop,N.DebugStepOver],e.DebuggerCommands=[N.DebugContinue,N.DebugStop,N.DebugStepOver]}(M||(M={})),function(e){e.HasCodeCells="jupyter.hascodecells",e.IsInteractiveActive="jupyter.isinteractiveactive",e.OwnsSelection="jupyter.ownsSelection",e.HaveNativeCells="jupyter.havenativecells",e.HaveNative="jupyter.havenative",e.IsNativeActive="jupyter.isnativeactive",e.IsInteractiveOrNativeActive="jupyter.isinteractiveornativeactive",e.IsPythonOrNativeActive="jupyter.ispythonornativeactive",e.IsPythonOrInteractiveActive="jupyter.ispythonorinteractiveeactive",e.IsPythonOrInteractiveOrNativeActive="jupyter.ispythonorinteractiveornativeeactive",e.CanRestartNotebookKernel="jupyter.notebookeditor.canrestartNotebookkernel",e.CanInterruptNotebookKernel="jupyter.notebookeditor.canInterruptNotebookKernel",e.CanRestartInteractiveWindowKernel="jupyter.interactive.canRestartNotebookKernel",e.CanInterruptInteractiveWindowKernel="jupyter.interactive.canInterruptNotebookKernel",e.RunByLineCells="jupyter.notebookeditor.runByLineCells",e.RunByLineDocuments="jupyter.notebookeditor.runByLineDocuments",e.DebugDocuments="jupyter.notebookeditor.debugDocuments",e.IsPythonNotebook="jupyter.ispythonnotebook",e.IsJupyterKernelSelected="jupyter.kernel.isjupyter",e.IsDataViewerActive="jupyter.dataViewerActive",e.HasNativeNotebookOrInteractiveWindowOpen="jupyter.hasNativeNotebookOrInteractiveWindowOpen",e.ZmqAvailable="jupyter.zmqavailable",e.ReplayLogLoaded="jupyter.replayLogLoaded",e.KernelSource="jupyter.kernelSource"}(L||(L={})),function(e){e.PythonCellMarker=/^(#\s*%%|#\s*\<codecell\>|#\s*In\[\d*?\]|#\s*In\[ \])/,e.PythonMarkdownCellMarker=/^(#\s*%%\s*\[markdown\]|#\s*\<markdowncell\>)/,e.UrlPatternRegEx="(?<PREFIX>https?:\\/\\/)((\\(.+\\s+or\\s+(?<IP>.+)\\))|(?<LOCAL>[^\\s]+))(?<REST>:.+)",e.HttpPattern=/https?:\/\//,e.ShapeSplitterRegEx=/.*,\s*(\d+).*/,e.SvgHeightRegex=/(\<svg.*height=\")(.*?)\"/,e.SvgWidthRegex=/(\<svg.*width=\")(.*?)\"/,e.SvgSizeTagRegex=/\<svg.*tag=\"sizeTag=\{(.*),\s*(.*)\}\"/}(j||(j={})),function(e){e.ImportNotebook="DATASCIENCE.IMPORT_NOTEBOOK",e.RunCurrentCell="DATASCIENCE.RUN_CURRENT_CELL",e.RunCurrentCellAndAdvance="DATASCIENCE.RUN_CURRENT_CELL_AND_ADVANCE",e.RunAllCells="DATASCIENCE.RUN_ALL_CELLS",e.RunAllCellsAbove="DATASCIENCE.RUN_ALL_CELLS_ABOVE",e.RunCellAndAllBelow="DATASCIENCE.RUN_CELL_AND_ALL_BELOW",e.RunCurrentCellAndAddBelow="DATASCIENCE.RUN_CURRENT_CELL_AND_ADD_BELOW",e.InsertCellBelowPosition="DATASCIENCE.RUN_INSERT_CELL_BELOW_POSITION",e.InsertCellBelow="DATASCIENCE.RUN_INSERT_CELL_BELOW",e.InsertCellAbove="DATASCIENCE.RUN_INSERT_CELL_ABOVE",e.DeleteCells="DATASCIENCE.RUN_DELETE_CELLS",e.SelectCell="DATASCIENCE.RUN_SELECT_CELL",e.SelectCellContents="DATASCIENCE.RUN_SELECT_CELL_CONTENTS",e.ExtendSelectionByCellAbove="DATASCIENCE.RUN_EXTEND_SELECTION_BY_CELL_ABOVE",e.ExtendSelectionByCellBelow="DATASCIENCE.RUN_EXTEND_SELECTION_BY_CELL_BELOW",e.MoveCellsUp="DATASCIENCE.RUN_MOVE_CELLS_UP",e.MoveCellsDown="DATASCIENCE.RUN_MOVE_CELLS_DOWN",e.ChangeCellToMarkdown="DATASCIENCE.RUN_CHANGE_CELL_TO_MARKDOWN",e.ChangeCellToCode="DATASCIENCE.RUN_CHANGE_CELL_TO_CODE",e.GotoNextCellInFile="DATASCIENCE.GOTO_NEXT_CELL_IN_FILE",e.GotoPrevCellInFile="DATASCIENCE.GOTO_PREV_CELL_IN_FILE",e.RunSelectionOrLine="DATASCIENCE.RUN_SELECTION_OR_LINE",e.RunToLine="DATASCIENCE.RUN_TO_LINE",e.RunFromLine="DATASCIENCE.RUN_FROM_LINE",e.ExportPythonFileInteractive="DATASCIENCE.EXPORT_PYTHON_FILE",e.ExportPythonFileAndOutputInteractive="DATASCIENCE.EXPORT_PYTHON_FILE_AND_OUTPUT",e.ClickedExportNotebookAsQuickPick="DATASCIENCE.CLICKED_EXPORT_NOTEBOOK_AS_QUICK_PICK",e.ExportNotebookAs="DATASCIENCE.EXPORT_NOTEBOOK_AS",e.ExportNotebookAsCommand="DATASCIENCE.EXPORT_NOTEBOOK_AS_COMMAND",e.ExportNotebookAsFailed="DATASCIENCE.EXPORT_NOTEBOOK_AS_FAILED",e.StartedRemoteJupyterSessionWithBackingFile="DS_INTERNAL.JUPYTER_STARTED_SESSION_WITH_BACKING_FILE",e.ZMQSupport="DS_INTERNAL.JUPYTER_ZMQ_SUPPORT",e.ZMQSupportFailure="DS_INTERNAL.JUPYTER_ZMQ_SUPPORT_FAILURE",e.SelfCertsMessageEnabled="DATASCIENCE.SELFCERTSMESSAGEENABLED",e.SelfCertsMessageClose="DATASCIENCE.SELFCERTSMESSAGECLOSE",e.ShiftEnterBannerShown="DS_INTERNAL.SHIFTENTER_BANNER_SHOWN",e.EnableInteractiveShiftEnter="DATASCIENCE.ENABLE_INTERACTIVE_SHIFT_ENTER",e.DisableInteractiveShiftEnter="DATASCIENCE.DISABLE_INTERACTIVE_SHIFT_ENTER",e.StartShowDataViewer="DATASCIENCE.START_SHOW_DATA_EXPLORER",e.ShowDataViewer="DATASCIENCE.SHOW_DATA_EXPLORER",e.ShowDataViewerRowsLoaded="DATASCIENCE.SHOW_DATA_EXPLORER_ROWS_LOADED",e.FailedShowDataViewer="DATASCIENCE.FAILED_SHOW_DATA_EXPLORER",e.RefreshDataViewer="DATASCIENCE.REFRESH_DATA_VIEWER",e.RunFileInteractive="DATASCIENCE.RUN_FILE_INTERACTIVE",e.DebugFileInteractive="DATASCIENCE.DEBUG_FILE_INTERACTIVE",e.PandasNotInstalled="DS_INTERNAL.SHOW_DATA_NO_PANDAS",e.PandasTooOld="DS_INTERNAL.SHOW_DATA_PANDAS_TOO_OLD",e.PandasOK="DS_INTERNAL.SHOW_DATA_PANDAS_OK",e.PandasInstallCanceled="DS_INTERNAL.SHOW_DATA_PANDAS_INSTALL_CANCELED",e.DataScienceSettings="DS_INTERNAL.SETTINGS",e.VariableExplorerVariableCount="DS_INTERNAL.VARIABLE_EXPLORER_VARIABLE_COUNT",e.AddCellBelow="DATASCIENCE.ADD_CELL_BELOW",e.GetPasswordFailure="DS_INTERNAL.GET_PASSWORD_FAILURE",e.GetPasswordSuccess="DS_INTERNAL.GET_PASSWORD_SUCCESS",e.CheckPasswordJupyterHub="DS_INTERNAL.JUPYTER_HUB_PASSWORD",e.OpenPlotViewer="DATASCIENCE.OPEN_PLOT_VIEWER",e.DebugCurrentCell="DATASCIENCE.DEBUG_CURRENT_CELL",e.CodeLensAverageAcquisitionTime="DS_INTERNAL.CODE_LENS_ACQ_TIME",e.DocumentWithCodeCells="DS_INTERNAL.DOCUMENT_WITH_CODE_CELLS",e.PerceivedJupyterStartupNotebook="DS_INTERNAL.PERCEIVED_JUPYTER_STARTUP_NOTEBOOK",e.GetActivatedEnvironmentVariables="DS_INTERNAL.GET_ACTIVATED_ENV_VARIABLES",e.VariableExplorerFetchTime="DS_INTERNAL.VARIABLE_EXPLORER_FETCH_TIME",e.KernelSpec="DS_INTERNAL.JUPYTER_KERNEL_SPEC",e.CellOutputMimeType="DS_INTERNAL.CELL_OUTPUT_MIME_TYPE",e.JupyterApiUsage="DATASCIENCE.JUPYTER_API_USAGE",e.JupyterServerProviderResponseApi="DATASCIENCE.JUPYTER_SERVER_PROVIDER_RESPONSE_API",e.ExtensionCallerIdentification="DATASCIENCE.JUPYTER_EXTENSION_CALLER_IDENTIFICATION",e.JupyterKernelApiUsage="DATASCIENCE.JUPYTER_KERNEL_API_USAGE",e.JupyterKernelApiAccess="DATASCIENCE.JUPYTER_KERNEL_API_ACCESS",e.JupyterKernelStartupHook="DATASCIENCE.JUPYTER_KERNEL_STARTUP_HOOK",e.JupyterKernelSpecEnumeration="DATASCIENCE.JUPYTER_KERNEL_SPEC_FETCH_FAILURE",e.JupyterKernelHiddenViaFilter="DATASCIENCE.JUPYTER_KERNEL_HIDDEN_VIA_FILTER",e.JupyterKernelFilterUsed="DATASCIENCE.JUPYTER_KERNEL_FILTER_USED",e.DebugStepOver="DATASCIENCE.DEBUG_STEP_OVER",e.DebugContinue="DATASCIENCE.DEBUG_CONTINUE",e.DebugStop="DATASCIENCE.DEBUG_STOP",e.OpenNotebookAll="DATASCIENCE.NATIVE.OPEN_NOTEBOOK_ALL",e.UserInstalledJupyter="DATASCIENCE.USER_INSTALLED_JUPYTER",e.UserInstalledPandas="DATASCIENCE.USER_INSTALLED_PANDAS",e.UserDidNotInstallJupyter="DATASCIENCE.USER_DID_NOT_INSTALL_JUPYTER",e.UserDidNotInstallPandas="DATASCIENCE.USER_DID_NOT_INSTALL_PANDAS",e.KernelSpecLanguage="DATASCIENCE.KERNEL_SPEC_LANGUAGE",e.KernelLauncherPerf="DS_INTERNAL.KERNEL_LAUNCHER_PERF",e.AmbiguousGlobalKernelSpec="GLOBAL_PYTHON_KERNELSPEC",e.ActiveInterpreterListingPerf="DS_INTERNAL.ACTIVE_INTERPRETER_LISTING_PERF",e.PythonModuleInstall="DS_INTERNAL.PYTHON_MODULE_INSTALL",e.PythonNotInstalled="DS_INTERNAL.PYTHON_NOT_INSTALLED",e.PythonExtensionNotInstalled="DS_INTERNAL.PYTHON_EXTENSION_NOT_INSTALLED",e.PythonExtensionInstalledViaKernelPicker="DS_INTERNAL.PYTHON_EXTENSION_INSTALLED_VIA_KERNEL_PICKER",e.NewFileForInteractiveWindow="DS_INTERNAL.NEW_FILE_USED_IN_INTERACTIVE",e.CreateInteractiveWindow="DS_INTERNAL.CREATED_INTERACTIVE_WINDOW",e.IPyWidgetLoadSuccess="DS_INTERNAL.IPYWIDGET_LOAD_SUCCESS",e.IPyWidgetLoadFailure="DS_INTERNAL.IPYWIDGET_LOAD_FAILURE",e.IPyWidgetWidgetVersionNotSupportedLoadFailure="DS_INTERNAL.IPYWIDGET_WIDGET_VERSION_NOT_SUPPORTED_LOAD_FAILURE",e.IPyWidgetExtensionJsInfo="DS_INTERNAL.IPYWIDGET_EXTENSIONJS_INFO",e.IPyWidgetNbExtensionCopyTime="DS_INTERNAL.IPYWIDGET_TIME_TO_COPY_NBEXTENSIONS_DIR",e.HashedIPyWidgetNameUsed="DS_INTERNAL.IPYWIDGET_USED_BY_USER",e.VSCNotebookCellTranslationFailed="DS_INTERNAL.VSCNOTEBOOK_CELL_TRANSLATION_FAILED",e.HashedIPyWidgetScriptDiscoveryError="DS_INTERNAL.IPYWIDGET_DISCOVERY_ERRORED",e.DiscoverIPyWidgetNamesPerf="DS_INTERNAL.IPYWIDGET_DISCOVER_WIDGETS_NB_EXTENSIONS",e.IPyWidgetPromptToUseCDN="DS_INTERNAL.IPYWIDGET_PROMPT_TO_USE_CDN",e.IPyWidgetPromptToUseCDNSelection="DS_INTERNAL.IPYWIDGET_PROMPT_TO_USE_CDN_SELECTION",e.IPyWidgetOverhead="DS_INTERNAL.IPYWIDGET_OVERHEAD",e.IPyWidgetRenderFailure="DS_INTERNAL.IPYWIDGET_RENDER_FAILURE",e.IPyWidgetUnhandledMessage="DS_INTERNAL.IPYWIDGET_UNHANDLED_MESSAGE",e.RawKernelInfoResponse="DS_INTERNAL.RAWKERNEL_INFO_RESPONSE",e.RawKernelSessionStartNoIpykernel="DS_INTERNAL.RAWKERNEL_SESSION_NO_IPYKERNEL",e.RawKernelProcessLaunch="DS_INTERNAL.RAWKERNEL_PROCESS_LAUNCH",e.RawKernelSessionShutdown="DS_INTERNAL.RAWKERNEL_SESSION_SHUTDOWN",e.RawKernelSessionKernelProcessExited="DS_INTERNAL.RAWKERNEL_SESSION_KERNEL_PROCESS_EXITED",e.RawKernelSessionDisposed="DS_INTERNAL.RAWKERNEL_SESSION_DISPOSED",e.RunByLineVariableHover="DATASCIENCE.RUN_BY_LINE_VARIABLE_HOVER",e.InteractiveFileTooltipsPerf="DS_INTERNAL.INTERACTIVE_FILE_TOOLTIPS_PERF",e.NativeVariableViewLoaded="DS_INTERNAL.NATIVE_VARIABLE_VIEW_LOADED",e.NativeVariableViewMadeVisible="DS_INTERNAL.NATIVE_VARIABLE_VIEW_MADE_VISIBLE",e.NotebookStart="DATASCIENCE.NOTEBOOK_START",e.KernelStartFailureDueToMissingEnv="DATASCIENCE.KERNEL_START_FAILURE_MISSING_ENV",e.NotebookInterrupt="DATASCIENCE.NOTEBOOK_INTERRUPT",e.NotebookRestart="DATASCIENCE.NOTEBOOK_RESTART",e.SwitchKernel="DS_INTERNAL.SWITCH_KERNEL",e.KernelCount="DS_INTERNAL.KERNEL_COUNT",e.ExecuteCell="DATASCIENCE.EXECUTE_CELL",e.ResumeCellExecution="DATASCIENCE.RESUME_EXECUTE_CELL",e.CommandExecuted="DS_INTERNAL.COMMAND_EXECUTED",e.DataViewerSliceEnablementStateChanged="DATASCIENCE.DATA_VIEWER_SLICE_ENABLEMENT_STATE_CHANGED",e.DataViewerDataDimensionality="DATASCIENCE.DATA_VIEWER_DATA_DIMENSIONALITY",e.DataViewerSliceOperation="DATASCIENCE.DATA_VIEWER_SLICE_OPERATION",e.RecommendExtension="DATASCIENCE.RECOMMENT_EXTENSION",e.CreatePythonEnvironment="DATASCIENCE.CREATE_PYTHON_ENVIRONMENT",e.PythonVariableFetchingCodeFailure="DATASCIENCE.PYTHON_VARIABLE_FETCHING_CODE_FAILURE",e.InteractiveWindowDebugSetupCodeFailure="DATASCIENCE.INTERACTIVE_WINDOW_DEBUG_SETUP_CODE_FAILURE",e.KernelCrash="DATASCIENCE.KERNEL_CRASH",e.RunTest="DS_INTERNAL.RUNTEST",e.PreferredKernelExactMatch="DS_INTERNAL.PREFERRED_KERNEL_EXACT_MATCH",e.JupyterInstalled="JUPYTER_IS_INSTALLED",e.NoActiveKernelSession="DATASCIENCE.NO_ACTIVE_KERNEL_SESSION",e.DataViewerUsingInterpreter="DATAVIEWER.USING_INTERPRETER",e.DataViewerUsingKernel="DATAVIEWER.USING_KERNEL",e.DataViewerWebviewLoaded="DATAVIEWER.WEBVIEW_LOADED",e.PlotViewerWebviewLoaded="PLOTVIEWER.WEBVIEW_LOADED",e.EnterRemoteJupyterUrl="DATASCIENCE.ENTER_REMOTE_JUPYTER_URL"}(F||(F={})),function(e){e.NotebookCommand="notebook",e.ConvertCommand="nbconvert",e.KernelSpecCommand="kernelspec"}(U||(U={}));const q=Symbol("DataScienceStartupTime"),K="application/vnd.jupyter.widget-view+json",V="unknown";var W,$,B,H,z;(z=W||(W={}))[z.Error=40]="Error",z[z.Warn=30]="Warn",z[z.Info=20]="Info",z[z.Debug=10]="Debug",z[z.Trace=5]="Trace",z[z.Off=100]="Off",(H=$||($={}))[H.None=0]="None",H[H.Arguments=1]="Arguments",H[H.ReturnValue=2]="ReturnValue",H[H.BeforeCall=4]="BeforeCall",function(e){e.Green="[32m",e.Red="[31m"}(B||(B={})),new Map;class J{constructor(e,t){this._data=t,this.expiryTime=e+Date.now()}get expired(){const e=this.expiryTime<=Date.now();return e&&(this._data=void 0),e}get data(){return this.expired&&(this._data=void 0),this._data}}const G=new Map;class Y{constructor(e,t=""){this.expiryDurationMs=e,this.cacheKey=t}get hasData(){const e=G.get(this.cacheKey);return!(!e||e.expired)}get data(){if(!this.hasData)return;const e=G.get(this.cacheKey);return e?.data}set data(e){const t=new J(this.expiryDurationMs,e);G.set(this.cacheKey,t)}clear(){G.delete(this.cacheKey)}}async function Q(e){return new Promise((t=>{setTimeout((()=>t(e)),e)}))}async function X(e,t,n){return new Promise((i=>{let r;const o=setTimeout((()=>r(!1)),t),s=setInterval((()=>{e().then((e=>{e&&r(!0)})).catch((e=>r(!1)))}),n);r=e=>{clearTimeout(o),clearInterval(s),i(e)}}))}function Z(e,t,...n){const i=te(t)?void 0:t;let r;te(t)&&n.push(t);const o=setTimeout((()=>r?.(i)),e);return Promise.race([Promise.race(n).finally((()=>clearTimeout(o))),new Promise((e=>r=e))])}function ee(e){return"function"==typeof e?.then&&"function"==typeof e?.catch}function te(e){return"function"==typeof e?.then}class ne{get value(){return this._value}constructor(e=null){this.scope=e,this._resolved=!1,this._rejected=!1,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}resolve(e){this._value=e,this._resolve.apply(this.scope?this.scope:this,arguments),this._resolved=!0}reject(e){this._reject.apply(this.scope?this.scope:this,arguments),this._rejected=!0}get promise(){return this._promise}get resolved(){return this._resolved}get rejected(){return this._rejected}get completed(){return this._rejected||this._resolved}}function ie(e=null){return new ne(e)}function re(e){const t=ie();return e.then(t.resolve.bind(t)).catch(t.reject.bind(t)),t}class oe{constructor(){this.currentPromise=Promise.resolve(void 0)}async chain(e){const t=ie(),n=this.currentPromise;return this.currentPromise=this.currentPromise.then((async()=>{try{const n=await e();t.resolve(n)}catch(e){throw t.reject(e),e}})),await n,t.promise}chainFinally(e){const t=ie();return this.currentPromise=this.currentPromise.finally((()=>e().then((e=>t.resolve(e))).catch((e=>t.reject(e))))),t.promise}}class se{constructor(){this.started=(new Date).getTime()}get elapsedTime(){return(new Date).getTime()-this.started}reset(){this.started=(new Date).getTime()}}function ae(){}function ce(e){try{const t=e();ee(t)&&t.catch(ae)}catch{}}function le(e){if(!e)return!0;const t=e;return"string"==typeof t.path&&"string"==typeof t.scheme}function de(e){if(!e)return!1;const t=e;return"string"==typeof t.path&&"string"==typeof t.scheme}function ue(e){const t=de(e)?e:e.uri;return t.scheme.includes(o)||t.path.endsWith(".interactive")}function pe(){return"web"===process.platform.toString()}function he(e,t){return de(t)?t.toString():t}function fe(e,t){return e===t||!(e&&!t)&&JSON.stringify(e,he)===JSON.stringify(t,he)}const me=__webpack_require__(23279),ge=G;function ve(e){return function(t,n,i){const r=i.value,o=`Cache_Method_Output_${"constructor"in t&&t.constructor.name?t.constructor.name:""}.${n}`;i.value=async function(...t){if(w())return r.apply(this,t);const n=function(e,t){return`KeyPrefix=${e}-Args=${t.map((e=>`${JSON.stringify(e)}`)).join("-Arg-Separator-")}`}(o,t),i=ge.get(n);if(i&&!i.expired)return En(`Cached data exists ${n}`),Promise.resolve(i.data);const s=r.apply(this,t);return s.then((t=>ge.set(n,new J(e,t)))).catch(ae),s}}}function ye(e){return function(t,n,i){const r=i.value,o=`Jupyter Extension (Error in ${e||n}, method:${n}):`;i.value=function(...e){try{const t=r.apply(this,e);if(t&&"function"==typeof t.then&&"function"==typeof t.catch)return t.catch((e=>{w()||Sn(o,e)}))}catch(e){if(w())return;Sn(o,e)}}}}function be(e,t){return function(n,i,r){const o=r.value;return r.value=function(...r){const s={kind:"Class",name:n&&n.constructor?n.constructor.name:"",args:r,methodName:i,target:n},a=this;return function(e,t,n){const i=new se;try{n&&e(void 0);const t=o.apply(a,r);return ee(t)?t.then((t=>(e({elapsed:i.elapsedTime,returnValue:t}),t))).catch((t=>{e({elapsed:i.elapsedTime,err:t})})):e({elapsed:i.elapsedTime,returnValue:t}),t}catch(t){throw e({elapsed:i.elapsedTime,err:t}),t}}((t=>e(s,t)),0,t)},r}}function we(){return function(e,t,n){const i=n.value;return n.value=function(...e){if(!w())throw new Error(`Function: ${t} can only be called from test code`);return i.apply(this,e)},n}}function _e(){return function(e,t,n){const i=n.value,r=`chainedPromiseFor_${t}`;return n.value=async function(...e){let t=this[r];t=t?t.then((()=>i.apply(this,e))):i.apply(this,e),this[r]=t;const n=t.then((e=>e)).catch((e=>{throw this[r]=void 0,e}));return n.catch(ae),n},n}}function Se(e,t){if(Array.isArray(e))return e.map((e=>Se(e,t))).join(", ");if(void 0===e)return"undefined";if(null===e)return"null";try{return e&&e.path?`<Uri:${e.path}>`:JSON.stringify(e)}catch{return`<${t} cannot be serialized for logging>`}}function Ce(e){if(!e)return"";try{return e.map(((e,t)=>`Arg ${t+1}: ${Se(e,"argument")}`)).join(", ")}catch{return""}}function ke(){const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}.${String(e.getMilliseconds()).padStart(3,"0")}`}function Ee(e,t={removeEmptyEntries:!0,trim:!0}){let n=(e=e||"").split(/\r?\n/g);return t&&t.trim&&(n=n.map((e=>e.trim()))),t&&t.removeEmptyEntries&&(n=n.filter((e=>e.length>0))),n}function xe(e){return e?e.indexOf(" ")>=0&&!e.startsWith('"')&&!e.endsWith('"')?`"${e}"`:e.toString():e}function Te(e){return e?xe(e).replace(/\\/g,"/"):e}function Pe(e){return e?e.replace(/(^['"])|(['"]$)/g,""):e}function Ie(e=[]){for(;e.length;){const t=e.shift();if(t)try{t.dispose()}catch{}}}function De(e,...t){return e.replace(/{(\d+)}/g,((e,n)=>void 0===t[n]?e:t[n]))}function Re(e){return e?e.replace(/\$\([a-z0-9\-]+?\)/gi,"").trim():e||""}var Oe=__webpack_require__(66828);const Ae="en";let Ne,Me,Le=!1,je=!1,Fe=!1,Ue=!1,qe=!1,Ke=!1,Ve=!1,We=!1,$e=!1,Be=Ae,He=null;const ze="object"==typeof self?self:"object"==typeof global?global:{};let Je;void 0!==ze.vscode&&void 0!==ze.vscode.process?Je=ze.vscode.process:"undefined"!=typeof process&&(Je=process);const Ge="string"==typeof Je?.versions?.electron,Ye=Ge&&"renderer"===Je?.type;if(Ye&&Je?.sandboxed,"object"!=typeof navigator||Ye)if("object"==typeof Je){Le="win32"===Je.platform,je="darwin"===Je.platform,Fe="linux"===Je.platform,Ue=Fe&&!!Je.env.SNAP&&!!Je.env.SNAP_REVISION,Ve=Ge,$e=!!Je.env.CI||!!Je.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Ne=Ae,Be=Ae;const e=Je.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),n=t.availableLanguages["*"];Ne=t.locale,Be=n||Ae,He=t._translationsConfigFile}catch(e){}qe=!0}else console.error("Unable to resolve platform.");else Me=navigator.userAgent,Le=Me.indexOf("Windows")>=0,je=Me.indexOf("Macintosh")>=0,(Me.indexOf("Macintosh")>=0||Me.indexOf("iPad")>=0||Me.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Fe=Me.indexOf("Linux")>=0,Ke=!0,Ne=navigator.language,Be=Ne;let Qe=0;je?Qe=1:Le?Qe=3:Fe&&(Qe=2);const Xe=Le,Ze=je,et=Fe,tt=Ke,nt=(Ke&&ze.importScripts,Me),it=Be;var rt;!function(e){e.value=function(){return it},e.isDefaultVariant=function(){return 2===it.length?"en"===it:it.length>=3&&"e"===it[0]&&"n"===it[1]&&"-"===it[2]},e.isDefault=function(){return"en"===it}}(rt||(rt={})),(()=>{if("function"==typeof ze.postMessage&&!ze.importScripts){let e=[];ze.addEventListener("message",(t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=e.length;n<i;n++){const i=e[n];if(i.id===t.data.vscodeScheduleAsyncWork)return e.splice(n,1),void i.callback()}}));let t=0}})();const ot=!!(nt&&nt.indexOf("Chrome")>=0);let st;if(nt&&nt.indexOf("Firefox"),!ot&&nt&&nt.indexOf("Safari"),nt&&nt.indexOf("Edg/"),nt&&nt.indexOf("Android"),void 0!==ze.vscode&&void 0!==ze.vscode.process){const e=ze.vscode.process;st={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd:()=>e.cwd()}}else st="undefined"!=typeof process?{get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd:()=>process.env.VSCODE_CWD||process.cwd()}:{get platform(){return Xe?"win32":Ze?"darwin":"linux"},get arch(){},get env(){return{}},cwd:()=>"/"};const at=st.cwd,ct=st.env,lt=st.platform,dt=(st.arch,46),ut=47,pt=92,ht=58;class ft extends Error{constructor(e,t,n){let i;"string"==typeof t&&0===t.indexOf("not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be";const r=-1!==e.indexOf(".")?"property":"argument";let o=`The "${e}" ${r} ${i} of type ${t}`;o+=". Received type "+typeof n,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function mt(e,t){if("string"!=typeof e)throw new ft(t,"string",e)}function gt(e){return e===ut||e===pt}function vt(e){return e===ut}function yt(e){return e>=65&&e<=90||e>=97&&e<=122}function bt(e,t,n,i){let r="",o=0,s=-1,a=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else{if(i(c))break;c=ut}if(i(c)){if(s===l-1||1===a);else if(2===a){if(r.length<2||2!==o||r.charCodeAt(r.length-1)!==dt||r.charCodeAt(r.length-2)!==dt){if(r.length>2){const e=r.lastIndexOf(n);-1===e?(r="",o=0):(r=r.slice(0,e),o=r.length-1-r.lastIndexOf(n)),s=l,a=0;continue}if(0!==r.length){r="",o=0,s=l,a=0;continue}}t&&(r+=r.length>0?`${n}..`:"..",o=2)}else r.length>0?r+=`${n}${e.slice(s+1,l)}`:r=e.slice(s+1,l),o=l-s-1;s=l,a=0}else c===dt&&-1!==a?++a:a=-1}return r}function wt(e,t){if(null===t||"object"!=typeof t)throw new ft("pathObject","Object",t);const n=t.dir||t.root,i=t.base||`${t.name||""}${t.ext||""}`;return n?n===t.root?`${n}${i}`:`${n}${e}${i}`:i}const _t={resolve(...e){let t="",n="",i=!1;for(let r=e.length-1;r>=-1;r--){let o;if(r>=0){if(o=e[r],mt(o,"path"),0===o.length)continue}else 0===t.length?o=at():(o=ct[`=${t}`]||at(),(void 0===o||o.slice(0,2).toLowerCase()!==t.toLowerCase()&&o.charCodeAt(2)===pt)&&(o=`${t}\\`));const s=o.length;let a=0,c="",l=!1;const d=o.charCodeAt(0);if(1===s)gt(d)&&(a=1,l=!0);else if(gt(d))if(l=!0,gt(o.charCodeAt(1))){let e=2,t=e;for(;e<s&&!gt(o.charCodeAt(e));)e++;if(e<s&&e!==t){const n=o.slice(t,e);for(t=e;e<s&&gt(o.charCodeAt(e));)e++;if(e<s&&e!==t){for(t=e;e<s&&!gt(o.charCodeAt(e));)e++;e!==s&&e===t||(c=`\\\\${n}\\${o.slice(t,e)}`,a=e)}}}else a=1;else yt(d)&&o.charCodeAt(1)===ht&&(c=o.slice(0,2),a=2,s>2&&gt(o.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(i){if(t.length>0)break}else if(n=`${o.slice(a)}\\${n}`,i=l,l&&t.length>0)break}return n=bt(n,!i,"\\",gt),i?`${t}\\${n}`:`${t}${n}`||"."},normalize(e){mt(e,"path");const t=e.length;if(0===t)return".";let n,i=0,r=!1;const o=e.charCodeAt(0);if(1===t)return vt(o)?"\\":e;if(gt(o))if(r=!0,gt(e.charCodeAt(1))){let r=2,o=r;for(;r<t&&!gt(e.charCodeAt(r));)r++;if(r<t&&r!==o){const s=e.slice(o,r);for(o=r;r<t&&gt(e.charCodeAt(r));)r++;if(r<t&&r!==o){for(o=r;r<t&&!gt(e.charCodeAt(r));)r++;if(r===t)return`\\\\${s}\\${e.slice(o)}\\`;r!==o&&(n=`\\\\${s}\\${e.slice(o,r)}`,i=r)}}}else i=1;else yt(o)&&e.charCodeAt(1)===ht&&(n=e.slice(0,2),i=2,t>2&&gt(e.charCodeAt(2))&&(r=!0,i=3));let s=i<t?bt(e.slice(i),!r,"\\",gt):"";return 0!==s.length||r||(s="."),s.length>0&&gt(e.charCodeAt(t-1))&&(s+="\\"),void 0===n?r?`\\${s}`:s:r?`${n}\\${s}`:`${n}${s}`},isAbsolute(e){mt(e,"path");const t=e.length;if(0===t)return!1;const n=e.charCodeAt(0);return gt(n)||t>2&&yt(n)&&e.charCodeAt(1)===ht&&gt(e.charCodeAt(2))},join(...e){if(0===e.length)return".";let t,n;for(let i=0;i<e.length;++i){const r=e[i];mt(r,"path"),r.length>0&&(void 0===t?t=n=r:t+=`\\${r}`)}if(void 0===t)return".";let i=!0,r=0;if("string"==typeof n&&gt(n.charCodeAt(0))){++r;const e=n.length;e>1&&gt(n.charCodeAt(1))&&(++r,e>2&&(gt(n.charCodeAt(2))?++r:i=!1))}if(i){for(;r<t.length&&gt(t.charCodeAt(r));)r++;r>=2&&(t=`\\${t.slice(r)}`)}return _t.normalize(t)},relative(e,t){if(mt(e,"from"),mt(t,"to"),e===t)return"";const n=_t.resolve(e),i=_t.resolve(t);if(n===i)return"";if((e=n.toLowerCase())===(t=i.toLowerCase()))return"";let r=0;for(;r<e.length&&e.charCodeAt(r)===pt;)r++;let o=e.length;for(;o-1>r&&e.charCodeAt(o-1)===pt;)o--;const s=o-r;let a=0;for(;a<t.length&&t.charCodeAt(a)===pt;)a++;let c=t.length;for(;c-1>a&&t.charCodeAt(c-1)===pt;)c--;const l=c-a,d=s<l?s:l;let u=-1,p=0;for(;p<d;p++){const n=e.charCodeAt(r+p);if(n!==t.charCodeAt(a+p))break;n===pt&&(u=p)}if(p!==d){if(-1===u)return i}else{if(l>d){if(t.charCodeAt(a+p)===pt)return i.slice(a+p+1);if(2===p)return i.slice(a+p)}s>d&&(e.charCodeAt(r+p)===pt?u=p:2===p&&(u=3)),-1===u&&(u=0)}let h="";for(p=r+u+1;p<=o;++p)p!==o&&e.charCodeAt(p)!==pt||(h+=0===h.length?"..":"\\..");return a+=u,h.length>0?`${h}${i.slice(a,c)}`:(i.charCodeAt(a)===pt&&++a,i.slice(a,c))},toNamespacedPath(e){if("string"!=typeof e)return e;if(0===e.length)return"";const t=_t.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===pt){if(t.charCodeAt(1)===pt){const e=t.charCodeAt(2);if(63!==e&&e!==dt)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(yt(t.charCodeAt(0))&&t.charCodeAt(1)===ht&&t.charCodeAt(2)===pt)return`\\\\?\\${t}`;return e},dirname(e){mt(e,"path");const t=e.length;if(0===t)return".";let n=-1,i=0;const r=e.charCodeAt(0);if(1===t)return gt(r)?e:".";if(gt(r)){if(n=i=1,gt(e.charCodeAt(1))){let r=2,o=r;for(;r<t&&!gt(e.charCodeAt(r));)r++;if(r<t&&r!==o){for(o=r;r<t&&gt(e.charCodeAt(r));)r++;if(r<t&&r!==o){for(o=r;r<t&&!gt(e.charCodeAt(r));)r++;if(r===t)return e;r!==o&&(n=i=r+1)}}}}else yt(r)&&e.charCodeAt(1)===ht&&(n=t>2&&gt(e.charCodeAt(2))?3:2,i=n);let o=-1,s=!0;for(let n=t-1;n>=i;--n)if(gt(e.charCodeAt(n))){if(!s){o=n;break}}else s=!1;if(-1===o){if(-1===n)return".";o=n}return e.slice(0,o)},basename(e,t){void 0!==t&&mt(t,"ext"),mt(e,"path");let n,i=0,r=-1,o=!0;if(e.length>=2&&yt(e.charCodeAt(0))&&e.charCodeAt(1)===ht&&(i=2),void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let s=t.length-1,a=-1;for(n=e.length-1;n>=i;--n){const c=e.charCodeAt(n);if(gt(c)){if(!o){i=n+1;break}}else-1===a&&(o=!1,a=n+1),s>=0&&(c===t.charCodeAt(s)?-1==--s&&(r=n):(s=-1,r=a))}return i===r?r=a:-1===r&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=i;--n)if(gt(e.charCodeAt(n))){if(!o){i=n+1;break}}else-1===r&&(o=!1,r=n+1);return-1===r?"":e.slice(i,r)},extname(e){mt(e,"path");let t=0,n=-1,i=0,r=-1,o=!0,s=0;e.length>=2&&e.charCodeAt(1)===ht&&yt(e.charCodeAt(0))&&(t=i=2);for(let a=e.length-1;a>=t;--a){const t=e.charCodeAt(a);if(gt(t)){if(!o){i=a+1;break}}else-1===r&&(o=!1,r=a+1),t===dt?-1===n?n=a:1!==s&&(s=1):-1!==n&&(s=-1)}return-1===n||-1===r||0===s||1===s&&n===r-1&&n===i+1?"":e.slice(n,r)},format:wt.bind(null,"\\"),parse(e){mt(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const n=e.length;let i=0,r=e.charCodeAt(0);if(1===n)return gt(r)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(gt(r)){if(i=1,gt(e.charCodeAt(1))){let t=2,r=t;for(;t<n&&!gt(e.charCodeAt(t));)t++;if(t<n&&t!==r){for(r=t;t<n&&gt(e.charCodeAt(t));)t++;if(t<n&&t!==r){for(r=t;t<n&&!gt(e.charCodeAt(t));)t++;t===n?i=t:t!==r&&(i=t+1)}}}}else if(yt(r)&&e.charCodeAt(1)===ht){if(n<=2)return t.root=t.dir=e,t;if(i=2,gt(e.charCodeAt(2))){if(3===n)return t.root=t.dir=e,t;i=3}}i>0&&(t.root=e.slice(0,i));let o=-1,s=i,a=-1,c=!0,l=e.length-1,d=0;for(;l>=i;--l)if(r=e.charCodeAt(l),gt(r)){if(!c){s=l+1;break}}else-1===a&&(c=!1,a=l+1),r===dt?-1===o?o=l:1!==d&&(d=1):-1!==o&&(d=-1);return-1!==a&&(-1===o||0===d||1===d&&o===a-1&&o===s+1?t.base=t.name=e.slice(s,a):(t.name=e.slice(s,o),t.base=e.slice(s,a),t.ext=e.slice(o,a))),t.dir=s>0&&s!==i?e.slice(0,s-1):t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},St={resolve(...e){let t="",n=!1;for(let i=e.length-1;i>=-1&&!n;i--){const r=i>=0?e[i]:at();mt(r,"path"),0!==r.length&&(t=`${r}/${t}`,n=r.charCodeAt(0)===ut)}return t=bt(t,!n,"/",vt),n?`/${t}`:t.length>0?t:"."},normalize(e){if(mt(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===ut,n=e.charCodeAt(e.length-1)===ut;return 0===(e=bt(e,!t,"/",vt)).length?t?"/":n?"./":".":(n&&(e+="/"),t?`/${e}`:e)},isAbsolute:e=>(mt(e,"path"),e.length>0&&e.charCodeAt(0)===ut),join(...e){if(0===e.length)return".";let t;for(let n=0;n<e.length;++n){const i=e[n];mt(i,"path"),i.length>0&&(void 0===t?t=i:t+=`/${i}`)}return void 0===t?".":St.normalize(t)},relative(e,t){if(mt(e,"from"),mt(t,"to"),e===t)return"";if((e=St.resolve(e))===(t=St.resolve(t)))return"";const n=e.length,i=n-1,r=t.length-1,o=i<r?i:r;let s=-1,a=0;for(;a<o;a++){const n=e.charCodeAt(1+a);if(n!==t.charCodeAt(1+a))break;n===ut&&(s=a)}if(a===o)if(r>o){if(t.charCodeAt(1+a)===ut)return t.slice(1+a+1);if(0===a)return t.slice(1+a)}else i>o&&(e.charCodeAt(1+a)===ut?s=a:0===a&&(s=0));let c="";for(a=1+s+1;a<=n;++a)a!==n&&e.charCodeAt(a)!==ut||(c+=0===c.length?"..":"/..");return`${c}${t.slice(1+s)}`},toNamespacedPath:e=>e,dirname(e){if(mt(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===ut;let n=-1,i=!0;for(let t=e.length-1;t>=1;--t)if(e.charCodeAt(t)===ut){if(!i){n=t;break}}else i=!1;return-1===n?t?"/":".":t&&1===n?"//":e.slice(0,n)},basename(e,t){void 0!==t&&mt(t,"ext"),mt(e,"path");let n,i=0,r=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let s=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const c=e.charCodeAt(n);if(c===ut){if(!o){i=n+1;break}}else-1===a&&(o=!1,a=n+1),s>=0&&(c===t.charCodeAt(s)?-1==--s&&(r=n):(s=-1,r=a))}return i===r?r=a:-1===r&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===ut){if(!o){i=n+1;break}}else-1===r&&(o=!1,r=n+1);return-1===r?"":e.slice(i,r)},extname(e){mt(e,"path");let t=-1,n=0,i=-1,r=!0,o=0;for(let s=e.length-1;s>=0;--s){const a=e.charCodeAt(s);if(a!==ut)-1===i&&(r=!1,i=s+1),a===dt?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!r){n=s+1;break}}return-1===t||-1===i||0===o||1===o&&t===i-1&&t===n+1?"":e.slice(t,i)},format:wt.bind(null,"/"),parse(e){mt(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const n=e.charCodeAt(0)===ut;let i;n?(t.root="/",i=1):i=0;let r=-1,o=0,s=-1,a=!0,c=e.length-1,l=0;for(;c>=i;--c){const t=e.charCodeAt(c);if(t!==ut)-1===s&&(a=!1,s=c+1),t===dt?-1===r?r=c:1!==l&&(l=1):-1!==r&&(l=-1);else if(!a){o=c+1;break}}if(-1!==s){const i=0===o&&n?1:o;-1===r||0===l||1===l&&r===s-1&&r===o+1?t.base=t.name=e.slice(i,s):(t.name=e.slice(i,r),t.base=e.slice(i,s),t.ext=e.slice(r,s))}return o>0?t.dir=e.slice(0,o-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};St.win32=_t.win32=_t,St.posix=_t.posix=St;const Ct="win32"===lt?_t.normalize:St.normalize,kt="win32"===lt?_t.isAbsolute:St.isAbsolute,Et="win32"===lt?_t.join:St.join,xt="win32"===lt?_t.resolve:St.resolve,Tt="win32"===lt?_t.relative:St.relative,Pt="win32"===lt?_t.dirname:St.dirname,It="win32"===lt?_t.basename:St.basename,Dt="win32"===lt?_t.extname:St.extname,Rt=("win32"===lt?_t.format:St.format,"win32"===lt?_t.parse:St.parse),Ot=("win32"===lt?_t.toNamespacedPath:St.toNamespacedPath,"win32"===lt?_t.sep:St.sep),At="win32"===lt?_t.delimiter:St.delimiter;class Nt{constructor(e){this.executor=e,this._didRun=!1}hasValue(){return this._didRun}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}map(e){return new Nt((()=>e(this.getValue())))}}var Mt,Lt;function jt(e,t,n=0,i=e.length,r=0,o=t.length){for(;n<i&&r<o;n++,r++){let i=e.charCodeAt(n),o=t.charCodeAt(r);if(i<o)return-1;if(i>o)return 1}const s=i-n,a=o-r;return s<a?-1:s>a?1:0}function Ft(e,t,n=0,i=e.length,r=0,o=t.length){for(;n<i&&r<o;n++,r++){let s=e.charCodeAt(n),a=t.charCodeAt(r);if(s===a)continue;if(s>=128||a>=128)return jt(e.toLowerCase(),t.toLowerCase(),n,i,r,o);Ut(s)&&(s-=32),Ut(a)&&(a-=32);const c=s-a;if(0!==c)return c}const s=i-n,a=o-r;return s<a?-1:s>a?1:0}function Ut(e){return e>=97&&e<=122}class qt{static getInstance(e){return Mt.cache.get(Array.from(e))}static getLocales(){return Mt._locales.getValue()}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}Mt=qt,qt.ambiguousCharacterData=new Nt((()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))),qt.cache=new class{constructor(e){this.computeFn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const t=JSON.stringify(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.computeFn(e)),this.lastCache}}((e=>{function t(e){const t=new Map;for(let n=0;n<e.length;n+=2)t.set(e[n],e[n+1]);return t}function n(e,t){if(!e)return t;const n=new Map;for(const[i,r]of e)t.has(i)&&n.set(i,r);return n}const i=Mt.ambiguousCharacterData.getValue();let r,o=e.filter((e=>!e.startsWith("_")&&e in i));0===o.length&&(o=["_default"]);for(const e of o)r=n(r,t(i[e]));const s=function(e,t){const n=new Map(e);for(const[e,i]of t)n.set(e,i);return n}(t(i._common),r);return new Mt(s)})),qt._locales=new Nt((()=>Object.keys(Mt.ambiguousCharacterData.getValue()).filter((e=>!e.startsWith("_")))));class Kt{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(Kt.getRawData())),this._data}static isInvisibleCharacter(e){return Kt.getData().has(e)}static get codePoints(){return Kt.getData()}}function Vt(e){return 47===e||92===e}function Wt(e){return e.replace(/[\\/]/g,St.sep)}function $t(e,t=St.sep){if(!e)return"";const n=e.length,i=e.charCodeAt(0);if(Vt(i)){if(Vt(e.charCodeAt(1))&&!Vt(e.charCodeAt(2))){let i=3;const r=i;for(;i<n&&!Vt(e.charCodeAt(i));i++);if(r!==i&&!Vt(e.charCodeAt(i+1)))for(i+=1;i<n;i++)if(Vt(e.charCodeAt(i)))return e.slice(0,i+1).replace(/[\\/]/g,t)}return t}if(((r=i)>=65&&r<=90||r>=97&&r<=122)&&58===e.charCodeAt(1))return Vt(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);var r;let o=e.indexOf("://");if(-1!==o)for(o+=3;o<n;o++)if(Vt(e.charCodeAt(o)))return e.slice(0,o+1);return""}function Bt(e,t,n,i=Ot){if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(n){if(!function(e,t){const n=t.length;return!(t.length>e.length)&&0===Ft(e,t,0,n)}(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===i&&n--,e.charAt(n)===i}return t.charAt(t.length-1)!==i&&(t+=i),0===e.indexOf(t)}function Ht(e){return tt?e?.path||"":e?.fsPath||""}Kt._data=void 0,function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebook="vscode-notebook",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeInteractive="vscode-interactive",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls"}(Lt||(Lt={}));class zt{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:(i=this.getComparisonKey(e,n))<(r=this.getComparisonKey(t,n))?-1:i>r?1:0;var i,r}isEqual(e,t,n=!1){return e===t||!(!e||!t)&&this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,n=!1,i=(Xe?"\\":"/")){if(e.scheme===t.scheme){if(e.scheme===Lt.file)return Bt(Ht(e),Ht(t),this._ignorePathCasing(e),i)&&e.query===t.query&&(n||e.fragment===t.fragment);if(on(e.authority,t.authority))return Bt(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Oe.Uri.joinPath(e,...t)}basenameOrAuthority(e){return Xt(e)||e.authority}basename(e,t){return St.basename(e.path,t)}extname(e){return St.extname(e.path)}dirname(e){if(0===e.path.length)return e;let t;return e.scheme===Lt.file?t=Oe.Uri.file(Pt(Ht(e))).path:(t=St.dirname(e.path),e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return t=e.scheme===Lt.file?Oe.Uri.file(Ct(Ht(e))).path:St.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!on(e.authority,t.authority))return;if(e.scheme===Lt.file){const n=Tt(Ht(e),Ht(t));return Xe?Wt(n):n}let n=e.path||"/",i=t.path||"/";if(this._ignorePathCasing(e)){let e=0;for(const t=Math.min(n.length,i.length);e<t&&(n.charCodeAt(e)===i.charCodeAt(e)||n.charAt(e).toLowerCase()===i.charAt(e).toLowerCase());e++);n=i.substr(0,e)+n.substr(e)}return St.relative(n,i)}resolvePath(e,t){if(e.scheme===Lt.file){const n=Oe.Uri.file(xt(Ht(e),t));return e.with({authority:n.authority,path:n.path})}var n;return-1===(n=t).indexOf("/")&&(n=Wt(n)),/^[a-zA-Z]:(\/|$)/.test(n)&&(n="/"+n),t=n,e.with({path:St.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&"/"===e.path[0]}isEqualAuthority(e,t){return e===t||void 0!==e&&void 0!==t&&(i=t,(n=e).length===i.length&&0===Ft(n,i));var n,i}hasTrailingPathSeparator(e,t=Ot){if(e.scheme===Lt.file){const n=Ht(e);return n.length>$t(n).length&&n[n.length-1]===t}{const t=e.path;return t.length>1&&47===t.charCodeAt(t.length-1)&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Ot){return sn(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Ot){let n=!1;if(e.scheme===Lt.file){const i=Ht(e);n=void 0!==i&&i.length===$t(i).length&&i[i.length-1]===t}else{t="/";const i=e.path;n=1===i.length&&47===i.charCodeAt(i.length-1)}return n||sn(e,t)?e:e.with({path:e.path+"/"})}}const Jt=new zt((()=>!1)),Gt=(new zt((e=>e.scheme!==Lt.file||!et)),new zt((e=>!0)),Jt.isEqual.bind(Jt)),Yt=Jt.isEqualOrParent.bind(Jt),Qt=Jt.getComparisonKey.bind(Jt),Xt=(Jt.basenameOrAuthority.bind(Jt),Jt.basename.bind(Jt)),Zt=Jt.extname.bind(Jt),en=Jt.dirname.bind(Jt),tn=Jt.joinPath.bind(Jt),nn=(Jt.normalizePath.bind(Jt),Jt.relativePath.bind(Jt)),rn=Jt.resolvePath.bind(Jt),on=(Jt.isAbsolutePath.bind(Jt),Jt.isEqualAuthority.bind(Jt)),sn=Jt.hasTrailingPathSeparator.bind(Jt);var an,cn;function ln(e=process.platform){return/^win/.test(e)?cn.Windows:/^darwin/.test(e)?cn.OSX:/^linux/.test(e)?cn.Linux:cn.Unknown}function dn(e,t){return e.replace(/^~(?=$|\/|\\)/,t)}function un(e){const t=ln()===cn.Windows;if(e){const n=Ht(e);return n&&n.startsWith(Ot)&&n.length>1&&n[1]!==Ot&&t?n.slice(1):n||""}return""}function pn(e,t=[],n){let i;n=n||function(){if(!pe())return Oe.Uri.file(__webpack_require__(22037).homedir())}(),"string"==typeof e&&(i=Oe.Uri.file(e)),"string"!=typeof e&&(i=e);const r=hn(i,void 0,n),o=t.map((e=>hn(i,e.uri,n)));let s=r;return[r,...o].forEach((e=>{e.length<s.length&&(s=e)})),s}function hn(e,t,n){const i=ln()===cn.Windows;if(e&&t&&Yt(e,t,!0)){const n=nn(t,e);if(n)return i?n.replace(/\//g,"\\"):n}if(e&&n&&Yt(e,n,!0)){let t=nn(n,e);if(t)return t=i?t.replace(/\//g,"\\"):t,`~${Ot}${t}`}return un(e)}Jt.removeTrailingPathSeparator.bind(Jt),Jt.addTrailingPathSeparator.bind(Jt),function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach((e=>{const[t,i]=e.split(":");t&&i&&n.set(t,i)}));const i=t.path.substring(0,t.path.indexOf(";"));return i&&n.set(e.META_DATA_MIME,i),n}}(an||(an={})),function(e){e.Unknown="Unknown",e.Windows="Windows",e.OSX="OSX",e.Linux="Linux"}(cn||(cn={}));let fn="";const mn=$.Arguments|$.ReturnValue;let gn=[];function vn(e){return gn.push(e),{dispose:()=>{gn=gn.filter((t=>t!==e))}}}const yn=new Map([["error",W.Error],["warn",W.Warn],["info",W.Info],["debug",W.Debug],["none",W.Off],["off",W.Off],[void 0,W.Error]]);let bn=W.Debug;function wn(e){bn="number"==typeof e?e:yn.get(e)??W.Error}function _n(...e){return bn<=W.Trace?e:e.map((e=>{if(!(e instanceof Error))return e;if(!("isJupyterError"in e))return e;const t=[`${e.name}: ${e.message}`.trim()];if("kernelConnectionMetadata"in e&&e.kernelConnectionMetadata&&"object"==typeof e.kernelConnectionMetadata&&"id"in e.kernelConnectionMetadata&&(t.push(`Kernel Id = ${e.kernelConnectionMetadata.id}`),"interpreter"in e.kernelConnectionMetadata&&e.kernelConnectionMetadata.interpreter&&"object"==typeof e.kernelConnectionMetadata.interpreter&&"id"in e.kernelConnectionMetadata.interpreter&&"string"==typeof e.kernelConnectionMetadata.interpreter.id&&t.push(`Interpreter Id = ${pn(e.kernelConnectionMetadata.interpreter.id)}`)),e.stack){const n=Ee(e.stack),i=n.find((e=>0===e.indexOf("at ")));1===n.length||(1===n.length?t.push(n[0]):n.length>1&&i?.length?t.push(i):t.push(n[0]))}const n=["stack","message","name","kernelConnectionMetadata","category","exitCode","isJupyterError"];return Object.keys(e).filter((e=>-1===n.indexOf(e))).forEach((n=>t.push(`${n} = ${String(e[n]).trim()}`))),t.filter((e=>e.trim().length)).map(((e,t)=>0===t?e:`    > ${e}`)).join("\n")}))}function Sn(e,...t){bn<=W.Error&&(t=_n(...t),gn.forEach((n=>n.traceError(e,...t))))}function Cn(e,...t){bn<=W.Warn&&(t=_n(...t),gn.forEach((n=>n.traceWarn(e,...t))))}function kn(e,...t){bn<=W.Info&&gn.forEach((n=>n.traceInfo(e,...t)))}function En(e,...t){bn<=W.Trace&&gn.forEach((n=>n.traceVerbose(e,...t)))}function xn(e,...t){y&&kn(e,...t)}function Tn(e,t=mn){return On({message:e,opts:t,level:W.Trace})}function Pn(e){return On({message:e,opts:mn,level:W.Error})}const In=new WeakMap;function Dn(e){return(t,n,i)=>{In.has(t)||In.set(t,new Map);let r=In.get(t);r||In.set(t,r=new Map),r.has(n)||r.set(n,[]),r.get(n).push({parameterIndex:i,propertyOfParameterToLog:e})}}function Rn(){return(e,t,n)=>{In.has(e)||In.set(e,new Map);let i=In.get(e);i||In.set(e,i=new Map),i.has(t)||i.set(t,[]),i.get(t).push({parameterIndex:n,ignore:!0})}}function On(e){return be(((t,n)=>function(e,t,n){const i=function(e,t,n){n=function(e){let{kind:t,name:n,args:i}=e;return t&&""!==t||(t="Function"),n&&""!==n||(n="<anon>"),i||(i=[]),{kind:t,name:n,args:i,methodName:e.methodName||"",target:e.target||void 0}}(n);const i=[e.message];return i.push(`${n.kind} name = ${n.name}`.trim()),t?(i.push(`completed in ${t.elapsed}ms`),i.push(`has a ${t.returnValue?"truthy":"falsy"} return value`)):i[i.length-1]=`${i[i.length-1]} (started execution)`,(e.opts&$.Arguments)===$.Arguments&&(e.level===W.Trace?i.push(Ce(n.args.map(((e,t)=>n?function(e,t,n,i){if(function(e){if(!e)return!1;const t=e;return"string"==typeof t.path&&"string"==typeof t.scheme}(n))return An(n.path);if(!n)return n;const r=In.get(e)?.get(t),o=r?.find((e=>e.parameterIndex===i));if(!o)return"string"==typeof n?An(n):n;if("ignore"in o&&o.ignore)return"";let s=n;return"propertyOfParameterToLog"in o&&o.propertyOfParameterToLog&&(s=n[o.propertyOfParameterToLog]),"string"==typeof s?An(s):s}(n.target,n.methodName,e,t):e)))):i.push(Ce(n.args))),t&&(e.opts&$.ReturnValue)===$.ReturnValue&&i.push(`Return Value: ${Se(t.returnValue,"Return value")}`),i.join(", ")}(e,t,n);t?void 0===t.err?e.level&&e.level===W.Error||(e.level?Nn(e.level,i):Nn(W.Info,i)):Nn(W.Error,i,t.err):e.level&&e.level!==W.Error&&Nn(e.level,i)}(e,n,t)),(e.opts&$.BeforeCall)>0)}function An(e){const t=fn?e.toLowerCase().indexOf(fn):-1;return-1===t?e:`~${e.substring(t+fn.length)}`}function Nn(e,t,...n){switch(e){case W.Error:Sn(t,...n);break;case W.Warn:Cn(t,...n);break;case W.Info:kn(t,...n);break;case W.Debug:case W.Trace:En(t,...n)}}var Mn="Metadata key was used more than once in a parameter:",Ln="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",jn="named",Fn="inversify:tagged",Un="inversify:tagged_props",qn="inversify:paramtypes";function Kn(){return function(e){if(Reflect.hasOwnMetadata(qn,e))throw new Error("Cannot apply @injectable decorator multiple times.");var t=Reflect.getMetadata("design:paramtypes",e)||[];return Reflect.defineMetadata(qn,t,e),e}}var Vn=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===jn?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},e}();function Wn(e,t,n,i){var r=function(e){var t=[];if(Array.isArray(e)){var n=function(e){for(var t=new Set,n=0,i=e;n<i.length;n++){var r=i[n];if(t.has(r))return r;t.add(r)}}((t=e).map((function(e){return e.key})));if(void 0!==n)throw new Error(Mn+" "+n.toString())}else t=[e];return t}(i),o={};Reflect.hasOwnMetadata(e,t)&&(o=Reflect.getMetadata(e,t));var s=o[n];if(void 0===s)s=[];else for(var a=function(e){if(r.some((function(t){return t.key===e.key})))throw new Error(Mn+" "+e.key.toString())},c=0,l=s;c<l.length;c++)a(l[c]);s.push.apply(s,r),o[n]=s,Reflect.defineMetadata(e,o,t)}function $n(e){return function(t,n,i){"number"==typeof i?function(e,t,n,i){!function(e){if(void 0!==e)throw new Error(Ln)}(t),Wn(Fn,e,n.toString(),i)}(t,n,i,e):function(e,t,n){if(void 0!==e.prototype)throw new Error(Ln);Wn(Un,e.constructor,t,n)}(t,n,e)}}function Bn(e,t){Reflect.decorate(e,t)}function Hn(e){return function(t){return function(n,i,r){if(void 0===t){var o="function"==typeof n?n.name:n.constructor.name;throw new Error("@inject called with undefined this could mean that the class "+o+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation.")}return $n(new Vn(e,t))(n,i,r)}}}var zn=Hn("inject");const Jn=Symbol("IApplicationShell"),Gn=Symbol("ICommandManager"),Yn=Symbol("IDocumentManager"),Qn=Symbol("IWorkspaceService"),Xn=Symbol("ITerminalManager"),Zn=Symbol("IDebugManager"),ei=Symbol("IApplicationEnvironment"),ti=(Symbol("IWebviewPanelMessageListener"),Symbol("IWebviewViewMessageListener"),Symbol("IWebview"),Symbol("IWebviewView"),Symbol("IWebviewPanel"),Symbol("IWebviewPanelProvider")),ni=Symbol("IWebviewViewProvider"),ii=Symbol("ILanguageService"),ri=Symbol("IClipboard"),oi=Symbol("IVSCodeNotebook"),si=Symbol("IEncryptedStorage");var ai;!function(e){e[e.ok=0]="ok",e[e.selectAnotherInterpreter=1]="selectAnotherInterpreter",e[e.cancel=2]="cancel"}(ai||(ai={}));const ci=Symbol("JupyterServerHelper"),li=Symbol("IOldJupyterSessionManagerFactory"),di=Symbol("INotebookImporter"),ui=Symbol("INotebookExporter"),pi=Symbol("IJupyterInterpreterDependencyManager"),hi=Symbol("INbConvertInterpreterDependencyChecker"),fi=Symbol("INbConvertExportToPythonService"),mi=Symbol("IJupyterServerProvider"),gi=Symbol("IJupyterUriProviderRegistration"),vi=Symbol("IJupyterServerUriStorage"),yi=Symbol("IJupyterBackingFileCreator"),bi=Symbol("IJupyterKernelService"),wi=Symbol("IJupyterRequestAgentCreator"),_i=Symbol("IJupyterRequestCreator"),Si=Symbol("INotebookStarter"),Ci=Symbol("ILiveRemoteKernelConnectionUsageTracker"),ki=Symbol("IJupyterRemoteCachedKernelValidator"),Ei=Symbol("IJupyterServerProviderRegistry"),xi=Symbol("IsCodeSpace"),Ti=Symbol("IsDevMode"),Pi=Symbol("IsWebExtension"),Ii=Symbol("IOutputChannel"),Di=Symbol("IS_WINDOWS"),Ri=Symbol("IDisposableRegistry"),Oi=Symbol("IGlobalMemento"),Ai=Symbol("IGlobalMemento"),Ni=Symbol("IWorkspaceMemento");var Mi;!function(e){e[e.InsidersNotebookSurvey=0]="InsidersNotebookSurvey",e[e.ExperimentNotebookSurvey=1]="ExperimentNotebookSurvey"}(Mi||(Mi={}));const Li=Symbol("IPersistentStateFactory"),ji=(Symbol("IRandom"),Symbol("IConfigurationService")),Fi=Symbol("IHttpClient"),Ui=Symbol("ExtensionContext"),qi=Symbol("IExtensions"),Ki=Symbol("IBrowserService"),Vi=Symbol("IJupyterExtensionBanner"),Wi=Symbol("IFeaturesManager"),$i=Symbol("ICryptoUtils"),Bi=Symbol("IAsyncDisposableRegistry");var Hi;!function(e){e.NewJupyterSession="NewJupyterSession",e.DataViewerContribution="DataViewerContribution"}(Hi||(Hi={}));const zi=Symbol("IExperimentService"),Ji=Symbol("IDataScienceCommandListener"),Gi=Symbol("IVariableScriptGenerator"),Yi=Symbol("IDataFrameScriptGenerator");function Qi(){return $n(new Vn("optional",!0))}class Xi extends Error{constructor(e,t){super(t),this.category=e,this.isJupyterError=!0}}class Zi extends Xi{constructor(e,t,n){super(n||er(t),e),this.originalException=t,t&&(this.stack=`${new Error("").stack}\n\n${t.stack}`)}static from(e,t){return t instanceof Xi?t:new Zi(e,t)}static unwrap(e){return e?(e instanceof Zi&&e.originalException&&e.originalException instanceof Xi&&(e=e.originalException),e):e}}function er(e){return e&&e instanceof Xi?e.category:"unknown"}class tr extends Xi{constructor(e,t){super("remotejupyterserveruriprovider",t.message||t.toString()),this.serverProviderHandle=e,this.originalError=t}}var nr=__webpack_require__(98250);function ir(e,t){return`${t}${e.length>0?`?token=${e}`:""}`}const rr=86400,or=7*rr,sr=30*rr,ar=365*rr;function cr(e,t,n,i){"number"!=typeof e&&(e=e.getTime());const r=Math.round(((new Date).getTime()-e)/1e3);if(r<-30)return Oe.l10n.t("in {0}",cr((new Date).getTime()+1e3*r,!1));if(!i&&r<30)return Oe.l10n.t("now");let o;return r<60?(o=r,t?1===o?n?Oe.l10n.t("{0} second ago",o):Oe.l10n.t("{0} sec ago",o):n?Oe.l10n.t("{0} seconds ago",o):Oe.l10n.t("{0} secs ago",o):1===o?n?Oe.l10n.t("{0} second",o):Oe.l10n.t("{0} sec",o):n?Oe.l10n.t("{0} seconds",o):Oe.l10n.t("{0} secs",o)):r<3600?(o=Math.floor(r/60),t?1===o?n?Oe.l10n.t("{0} minute ago",o):Oe.l10n.t("{0} min ago",o):n?Oe.l10n.t("{0} minutes ago",o):Oe.l10n.t("{0} mins ago",o):1===o?n?Oe.l10n.t("{0} minute",o):Oe.l10n.t("{0} min",o):n?Oe.l10n.t("{0} minutes",o):Oe.l10n.t("{0} mins",o)):r<rr?(o=Math.floor(r/3600),t?1===o?n?Oe.l10n.t("{0} hour ago",o):Oe.l10n.t("{0} hr ago",o):n?Oe.l10n.t("{0} hours ago",o):Oe.l10n.t("{0} hrs ago",o):1===o?n?Oe.l10n.t("{0} hour",o):Oe.l10n.t("{0} hr",o):n?Oe.l10n.t("{0} hours",o):Oe.l10n.t("{0} hrs",o)):r<or?(o=Math.floor(r/rr),t?1===o?Oe.l10n.t("{0} day ago",o):Oe.l10n.t("{0} days ago",o):1===o?Oe.l10n.t("{0} day",o):Oe.l10n.t("{0} days",o)):r<sr?(o=Math.floor(r/or),t?1===o?n?Oe.l10n.t("{0} week ago",o):Oe.l10n.t("{0} wk ago",o):n?Oe.l10n.t("{0} weeks ago",o):Oe.l10n.t("{0} wks ago",o):1===o?n?Oe.l10n.t("{0} week",o):Oe.l10n.t("{0} wk",o):n?Oe.l10n.t("{0} weeks",o):Oe.l10n.t("{0} wks",o)):r<ar?(o=Math.floor(r/sr),t?1===o?n?Oe.l10n.t("{0} month ago",o):Oe.l10n.t("{0} mo ago",o):n?Oe.l10n.t("{0} months ago",o):Oe.l10n.t("{0} mos ago",o):1===o?n?Oe.l10n.t("{0} month",o):Oe.l10n.t("{0} mo",o):n?Oe.l10n.t("{0} months",o):Oe.l10n.t("{0} mos",o)):(o=Math.floor(r/ar),t?1===o?n?Oe.l10n.t("{0} year ago",o):Oe.l10n.t("{0} yr ago",o):n?Oe.l10n.t("{0} years ago",o):Oe.l10n.t("{0} yrs ago",o):1===o?n?Oe.l10n.t("{0} year",o):Oe.l10n.t("{0} yr",o):n?Oe.l10n.t("{0} years",o):Oe.l10n.t("{0} yrs",o))}var lr,dr,ur,pr,hr,fr,mr,gr,vr,yr,br,wr,_r,Sr,Cr,kr;!function(e){e.bannerLabelYes=Oe.l10n.t("Yes"),e.bannerLabelNo=Oe.l10n.t("No"),e.canceled=Oe.l10n.t("Canceled"),e.cancel=Oe.l10n.t("Cancel"),e.ok=Oe.l10n.t("Ok"),e.refresh=Oe.l10n.t("Refresh"),e.refreshing=Oe.l10n.t("Refreshing..."),e.install=Oe.l10n.t("Install"),e.loadingExtension=Oe.l10n.t("Jupyter Extension loading..."),e.handleExtensionActivationError=Oe.l10n.t("Extension activation failed, run the 'Developer: Toggle Developer Tools' command for more information."),e.doNotShowAgain=Oe.l10n.t("Do not show again"),e.reload=Oe.l10n.t("Reload"),e.moreInfo=Oe.l10n.t("More Info"),e.learnMore=Oe.l10n.t("Learn more"),e.and=Oe.l10n.t("and"),e.reportThisIssue=Oe.l10n.t("Report this issue"),e.clickHereForMoreInfoWithHtml=e=>Oe.l10n.t("Click <a href='{0}'>here</a> for more info.",e)}(lr||(lr={})),function(e){e.notInGroup=e=>Oe.l10n.t("User does not belong to experiment group '{0}'",e),e.inGroup=e=>Oe.l10n.t("User belongs to experiment group '{0}'",e)}(dr||(dr={})),function(e){e.jupyter=Oe.l10n.t("Jupyter")}(ur||(ur={})),function(e){e.currentWorkingDirectory="cwd:"}(pr||(pr={})),function(e){e.bannerMessage=Oe.l10n.t("Would you like shift-enter to send code to the new Interactive Window experience?")}(hr||(hr={})),function(e){e.bannerMessage=Oe.l10n.t("Can you please take a minute to tell us about your notebooks experience in VS Code?")}(fr||(fr={})),function(e){e.bannerLabelYes=Oe.l10n.t("Yes, take survey now"),e.bannerLabelNo=Oe.l10n.t("No, thanks")}(mr||(mr={})),(kr=gr||(gr={})).warnWhenSelectingKernelWithUnSupportedPythonVersion=Oe.l10n.t("The version of Python associated with the selected kernel is no longer supported. Please consider selecting a different kernel."),kr.installingPythonExtension=Oe.l10n.t("Installing Python extension and locating kernels."),kr.pythonExtensionRequired=Oe.l10n.t("The Python Extension is required to perform that task. Click Yes to open Python Extension installation page."),kr.rendererExtensionRequired=Oe.l10n.t("The Renderer Extension is required to view IPyWidgets. Click Yes to open Jupyter Notebook Renderer Extension installation page."),kr.rendererExtension1015Required=Oe.l10n.t("The installed version of the Renderer Extension is outdated and requires and update to view IPyWidgets. Click Yes to open Jupyter Notebook Renderer Extension installation page."),kr.pythonExtensionInstalled=Oe.l10n.t("Python Extension is now installed. Some features might not be available until a notebook or interactive window session is restarted."),kr.unknownPackage=Oe.l10n.t("unknown"),kr.interactiveWindowTitleFormat=e=>Oe.l10n.t("Interactive - {0}",e),kr.interactiveWindowModeBannerTitle=Oe.l10n.t({message:"Do you want to open a new Interactive Window for this file? [More Information](command:workbench.action.openSettings?%5B%22jupyter.interactiveWindowMode%22%5D).",args:[],comment:'The string "command:workbench.action.openSettings?%5B%22jupyter.interactiveWindowMode%22%5D" should not be translated. It is a command that opens the settings page with the "jupyter.interactiveWindowMode" setting selected.'}),kr.interactiveWindowModeBannerSwitchYes=Oe.l10n.t("Yes"),kr.interactiveWindowModeBannerSwitchNo=Oe.l10n.t("No"),kr.dataExplorerTitle=Oe.l10n.t("Data Viewer"),kr.badWebPanelFormatString=e=>Oe.l10n.t({message:"<html><body><h1>{0} is not a valid file name</h1></body></html>",args:[e],comment:["Only translate the text within the HTML tags"]}),kr.installingMissingDependencies=Oe.l10n.t("Installing missing dependencies"),kr.validatingKernelDependencies=Oe.l10n.t("Validating kernel dependencies"),kr.performingExport=Oe.l10n.t("Performing Export"),kr.exportNotebookToPython=Oe.l10n.t("Exporting Notebook to Python"),kr.sessionDisposed=Oe.l10n.t("Cannot execute code, session has been disposed. Please try restarting the Kernel."),kr.passwordFailure=Oe.l10n.t("Failed to connect to password protected server. Check that password is correct."),kr.incorrectPassword=Oe.l10n.t("Incorrect Password."),kr.exportDialogFilter=Oe.l10n.t("Jupyter Notebooks"),kr.exportDialogComplete=e=>Oe.l10n.t("Notebook written to {0}",e),kr.exportDialogFailed=e=>Oe.l10n.t("Failed to export notebook. {0}",e),kr.exportOpenQuestion1=Oe.l10n.t("Open in editor"),kr.runCellLensCommandTitle=Oe.l10n.t("Run Cell"),kr.importDialogTitle=Oe.l10n.t("Import Jupyter Notebook"),kr.importDialogFilter="Jupyter Notebooks",kr.notebookCheckForImportNo=Oe.l10n.t("Later"),kr.libraryRequiredToLaunchJupyterNotInstalled=e=>Oe.l10n.t("Running cells requires {0} package.",e),kr.librariesRequiredToLaunchJupyterNotInstalled=e=>Oe.l10n.t("Running cells requires {0} package.",e),kr.libraryRequiredToLaunchJupyterNotInstalledInterpreter=(e,t)=>Oe.l10n.t("Running cells with '{0}' requires the {1} package.",e,t),kr.libraryRequiredToLaunchJupyterKernelNotInstalledInterpreter=(e,t)=>Oe.l10n.t("Running cells with '{0}' requires the {1} package.",e,t),kr.libraryRequiredToLaunchJupyterKernelNotInstalledInterpreterAndRequiresUpdate=(e,t)=>Oe.l10n.t("Running cells with '{0}' requires the {1} package to be installed or requires an update.",e,t),kr.librariesRequiredToLaunchJupyterNotInstalledInterpreter=(e,t)=>Oe.l10n.t("Running cells with '{0}' requires the {1} package.",e,t),kr.installPackageInstructions=(e,t)=>Oe.l10n.t("Run the following command to install '{0}' into the Python environment. \nCommand: '{1}'",e,t),kr.pythonCondaKernelsWithoutPython=Oe.l10n.t("The Python Runtime and IPyKernel will be automatically installed upon selecting this environment."),kr.selectJupyterInterpreter=Oe.l10n.t("Select an Interpreter to start Jupyter"),kr.jupyterInstall=Oe.l10n.t("Install"),kr.currentlySelectedJupyterInterpreterForPlaceholder=e=>Oe.l10n.t("Selected Environment {0}",e),kr.jupyterNotSupported=e=>Oe.l10n.t("Jupyter cannot be started. Error attempting to locate Jupyter: {0}",e),kr.jupyterNotebookNotInstalledOrNotFound=e=>{if(e){const t=function(e){const t=e.displayName||e.envName||"",n=pn(e.uri);return t?` ${t} (${n})`:n}(e);return Oe.l10n.t("Failed to start Jupyter Server as the packages 'jupyter' and 'notebook' could not be located in the Python environment '{0}'.",t)}return Oe.l10n.t("Failed to start Jupyter Server as the packages 'jupyter' and 'notebook' could not be located in the Python environment.")},kr.jupyterNotSupportedBecauseOfEnvironment=(e,t)=>Oe.l10n.t("Activating {0} to run Jupyter failed with {1}",e,t),kr.jupyterNbConvertNotSupported=Oe.l10n.t("Jupyter nbconvert is not installed"),kr.jupyterLaunchTimedOut=Oe.l10n.t("The Jupyter notebook server failed to launch in time"),kr.jupyterLaunchNoURL=Oe.l10n.t("Failed to find the URL of the launched Jupyter notebook server"),kr.jupyterSelfCertFail=e=>Oe.l10n.t("The security certificate used by server {0} was not issued by a trusted certificate authority.\r\nThis may indicate an attempt to steal your information.\r\nDo you want to enable the Allow Unauthorized Remote Connection setting for this workspace to allow you to connect?",e),kr.jupyterExpiredCertFail=e=>Oe.l10n.t("The security certificate used by server {0} has expired.\r\nThis may indicate an attempt to steal your information.\r\nDo you want to enable the Allow Unauthorized Remote Connection setting for this workspace to allow you to connect?",e),kr.jupyterSelfCertFailErrorMessageOnly=Oe.l10n.t("The security certificate used by server was not issued by a trusted certificate authority.\r\nThis may indicate an attempt to steal your information."),kr.jupyterSelfCertExpiredErrorMessageOnly=Oe.l10n.t("The security certificate used by server has expired.\r\nThis may indicate an attempt to steal your information."),kr.jupyterSelfCertEnable=Oe.l10n.t("Yes, connect anyways"),kr.jupyterSelfCertClose=Oe.l10n.t("No, close the connection"),kr.pythonInteractiveHelpLink=Oe.l10n.t("See <https://aka.ms/pyaiinstall> for help on installing Jupyter."),kr.importingFormat=e=>Oe.l10n.t("Importing {0}",e),kr.startingJupyter=Oe.l10n.t("Starting Jupyter Server"),kr.connectingToKernel=e=>Oe.l10n.t("Connecting to kernel: {0}",e),kr.connectingToJupyter=Oe.l10n.t("Connecting to Jupyter Server"),kr.exportingFormat=e=>Oe.l10n.t("Exporting {0}",e),kr.runAllCellsLensCommandTitle=Oe.l10n.t("Run All Cells"),kr.runAllCellsAboveLensCommandTitle=Oe.l10n.t("Run Above"),kr.runCellAndAllBelowLensCommandTitle=Oe.l10n.t("Run Below"),kr.restartKernelMessage=Oe.l10n.t("Do you want to restart the Jupyter kernel? All variables will be lost."),kr.restartKernelMessageYes=Oe.l10n.t("Restart"),kr.restartKernelMessageDontAskAgain=Oe.l10n.t("Don't Ask Again"),kr.automaticallyReconnectingToAKernelProgressMessage=e=>Oe.l10n.t("Reconnecting to the kernel {0}",e),kr.restartingKernelStatus=e=>Oe.l10n.t("Restarting Kernel {0}",e),kr.interruptingKernelFailed=Oe.l10n.t("Kernel interrupt failed. Jupyter Server is hung. Please reload VS Code."),kr.sessionStartFailedWithKernel=e=>Oe.l10n.t({message:"Failed to start the Kernel '{0}'. \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),kr.failedToStartJupyter=e=>Oe.l10n.t({message:"Failed to start Jupyter in the environment '{0}'. \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),kr.failedToStartJupyterWithErrorInfo=(e,t)=>Oe.l10n.t({message:"Failed to start Jupyter in the environment '{0}'. \n{1} \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e,t],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),kr.failedToStartJupyterDueToOutdatedTraitlets=(e,t)=>Oe.l10n.t({message:"Failed to start Jupyter in the environment '{0}' possibly due to an outdated version of 'traitlets'. \n{1} \nConsider updating the 'traitlets' module to '5.1.1' or later. \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e,t],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel',"Do not translate the text 'traitlets', that is a Python module name"]}),kr.failedToStartKernel=Oe.l10n.t("Failed to start the Kernel."),kr.failedToRestartKernel=Oe.l10n.t("Failed to restart the Kernel."),kr.failedToInterruptKernel=Oe.l10n.t("Failed to interrupt the Kernel."),kr.rawKernelStartFailedDueToTimeout=e=>Oe.l10n.t({message:"Unable to start Kernel '{0}' due to a connection timeout. \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),kr.rawKernelStartFailedDueToTimeoutWaitingForPort=e=>Oe.l10n.t({message:"Unable to start Kernel '{0}' due to a timeout waiting for the ports to get used. \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),kr.viewJupyterLogForFurtherInfo=Oe.l10n.t({message:"View Jupyter [log](command:jupyter.viewOutput) for further details.",comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),kr.kernelDied=e=>Oe.l10n.t({message:"The kernel died. Error: {0}... View Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),kr.kernelDiedWithoutError=e=>Oe.l10n.t({message:"The kernel '{0}' died. Click [here](https://aka.ms/vscodeJupyterKernelCrash) for more info. View Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel',"Do not translate the link https://aka.ms/vscodeJupyterKernelCrash"]}),kr.failedToStartAnUntrustedKernelSpec=(e,t)=>Oe.l10n.t({message:"The kernel '{0}' was not started as it is located in an insecure location '{1}'.  \nClick [here](https://aka.ms/JupyterTrustedKernelPaths) for further details, optionally update the setting [jupyter.kernels.trusted](command:workbench.action.openSettings?[\"jupyter.kernels.trusted\"]) to trust the kernel.",args:[e,t],comment:['Do not translate the text "jupyter.kernels.trusted", that is a setting in VS Code','Do not translate the text command:workbench.action.openSettings?["jupyter.kernels.trusted"], that is a command Id that will be used by VS Code to open the output panel',"Do not translate the link https://aka.ms/JupyterTrustedKernelPaths"]}),kr.kernelDiedWithoutErrorAndAutoRestarting=e=>Oe.l10n.t({message:"The kernel '{0}' died and is being automatically restarted by Jupyter. Click [here](https://aka.ms/vscodeJupyterKernelCrash) for more info. View Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel',"Do not translate the link https://aka.ms/vscodeJupyterKernelCrash"]}),kr.kernelCrashedDueToCodeInCurrentOrPreviousCell=Oe.l10n.t({message:"The Kernel crashed while executing code in the the current cell or a previous cell. Please review the code in the cell(s) to identify a possible cause of the failure. Click <a href='https://aka.ms/vscodeJupyterKernelCrash'>here</a> for more info. View Jupyter [log](command:jupyter.viewOutput) for further details.",comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel',"Do not translate the link https://aka.ms/vscodeJupyterKernelCrash"]}),kr.kernelDisconnected=e=>Oe.l10n.t("Unable to connect to the kernel '{0}', please verify the Jupyter Server connection. View Jupyter [log](command:jupyter.viewOutput) for further details.",e),kr.cannotRunCellKernelIsDead=e=>Oe.l10n.t("Cannot run cells, as the kernel '{0}' is dead.",e),kr.showJupyterLogs=Oe.l10n.t("Show Jupyter Logs."),kr.restartKernel=Oe.l10n.t("Restart Kernel"),kr.reloadRequired=Oe.l10n.t("Please reload the window for new settings to take effect."),kr.restartedKernelHeader=e=>Oe.l10n.t("Restarted {0}",e),kr.connectedKernelHeader=e=>Oe.l10n.t("Connected to {0}",e),kr.restartingKernelCustomHeader=e=>Oe.l10n.t("_Restarting {0}..._",e),kr.restartingKernelHeader=Oe.l10n.t("_Restarting kernel..._"),kr.startingNewKernelHeader=Oe.l10n.t("_Connecting to kernel..._"),kr.startingNewKernelCustomHeader=e=>Oe.l10n.t("_Connecting to {0}..._",e),kr.noKernelConnected=Oe.l10n.t("No kernel connected"),kr.jupyterSelectUriCommandLabel=Oe.l10n.t("Enter the URL of the running Jupyter Server..."),kr.jupyterSelectUriInputTitle=Oe.l10n.t("Enter the URL of the running Jupyter Server"),kr.jupyterSelectUriInputPlaceholder=Oe.l10n.t("Enter the url of the running Jupyter Server"),kr.connectToToTheJupyterServer=e=>Oe.l10n.t("Connect to the Jupyter Server {0}",e),kr.enterOrSelectRemoteJupyterPlaceholder=Oe.l10n.t("Enter a remote url, or select a remote server"),kr.selectRemoteJupyterPlaceholder=Oe.l10n.t("Select a remote server"),kr.jupyterServerLastConnectionForQuickPickDescription=e=>Oe.l10n.t("Last connected {0}",cr(e,!0,!1,!1)),kr.jupyterServerNotUsedBeforeQuickPickSeparatorTitle=Oe.l10n.t("Jupyter Servers"),kr.jupyterSelectURIInvalidURI=Oe.l10n.t("Invalid URL specified"),kr.jupyterSelectURIMustBeHttpOrHttps=Oe.l10n.t("Invalid protocol in URL specified, only HTTP or HTTPS are supported."),kr.jupyterSelectLiveRemoteKernelDescription=(e,t)=>e?0===t?Oe.l10n.t("Last activity {0}",cr(e,!0,!1,!1)):1===t?Oe.l10n.t("Last activity {0}, 1 connection",cr(e,!0,!1,!1)):Oe.l10n.t("Last activity {0}, {1} connections",cr(e,!0,!1,!1),t.toString()):0===t?"":1===t?Oe.l10n.t("1 connection"):Oe.l10n.t("{1} connections",t.toString()),kr.installJupyterHub=Oe.l10n.t("Install the JupyterHub extension to connect to JupyterHub servers."),kr.useJupyterHubExtension=Oe.l10n.t("Select 'Existing JupyterHub Server...' from the Kernel Picker"),kr.useJupyterHubExtensionDetail=Oe.l10n.t("Use this option when connecting to JupyterHub servers"),kr.installJupyterHubDetail=Oe.l10n.t("Once installed, open the Kernel Picker and select 'Existing JupyterHub Server...'"),kr.jupyterSelectUserAndPasswordTitle=Oe.l10n.t("Enter your user name and password to connect to Jupyter Hub"),kr.jupyterRenameServer=Oe.l10n.t("Change Server Display Name (Leave Blank To Use URL)"),kr.jupyterServerUriDisplayNameInputPlaceholder=Oe.l10n.t("Enter a display name"),kr.jupyterSelectUserPrompt=Oe.l10n.t("Enter your user name"),kr.jupyterSelectPasswordPrompt=Oe.l10n.t("Enter your password"),kr.jupyterSelectPasswordTitle=Oe.l10n.t("Enter your password for the Jupyter Server"),kr.pythonNotInstalled=Oe.l10n.t("Python is not installed. \nPlease download and install Python in order to execute cells in this notebook. \nOnce installed please reload VS Code."),kr.pleaseReloadVSCodeOncePythonHasBeenInstalled=Oe.l10n.t("Upon installing Python please reload VS Code."),kr.jupyterNotebookFailure=e=>Oe.l10n.t("Jupyter notebook failed to launch. \r\n{0}",e),kr.remoteJupyterServerProvidedBy3rdPartyExtensionNoLongerValid=e=>Oe.l10n.t("The remote Jupyter Server contributed by the extension '{0}' is no longer available.",e),kr.remoteJupyterConnectionFailedWithServerWithError=(e,t)=>Oe.l10n.t("Failed to connect to the remote Jupyter Server '{0}'. Verify the server is running and reachable. ({1}).",e,t),kr.remoteJupyterConnectionFailedWithServer=e=>Oe.l10n.t("Failed to connect to the remote Jupyter Server '{0}'. Verify the server is running and reachable.",e),kr.remoteJupyterConnectionFailedWithoutServerWithError=e=>Oe.l10n.t("Connection failure. Verify the server is running and reachable. ({0}).",e),kr.remoteJupyterConnectionFailedWithoutServerWithErrorWeb=e=>Oe.l10n.t("Connection failure. Verify the server is running and reachable from a browser. ({0}). \nWhen connecting from vscode.dev Jupyter servers must be started with specific options to connect. \nClick [here](https://aka.ms/vscjremoteweb) for more information.",e),kr.removeRemoteJupyterConnectionButtonText=Oe.l10n.t("Forget Connection"),kr.jupyterNotebookRemoteConnectFailedWeb=e=>Oe.l10n.t("Failed to connect to remote Jupyter Server.\r\nCheck that the Jupyter Server URL can be reached from a browser.\r\n{0}. Click [here](https://aka.ms/vscjremoteweb) for more information.",e),kr.packageNotInstalledWindowsLongPathNotEnabledError=(e,t)=>Oe.l10n.t("Support for Windows Long Path has not been enabled, hence the package {0} could not be installed into the Python Environment '{1}'.\nPlease ensure that support for Windows Long Path is enabled.\nSee [here](https://pip.pypa.io/warnings/enable-long-paths) for more information.",e,t),kr.changeRemoteJupyterConnectionButtonText=Oe.l10n.t("Manage Connections"),kr.rawConnectionBrokenError=Oe.l10n.t("Direct kernel connection broken"),kr.jupyterServerCrashed=e=>Oe.l10n.t("Jupyter Server crashed. Unable to connect. \r\nError code from Jupyter: {0}",e.toString()),kr.jupyterKernelSpecModuleNotFound=e=>Oe.l10n.t("'Kernelspec' module not installed in the selected interpreter ({0}).\n Please re-install or update 'jupyter'.",e),kr.interruptKernelStatus=Oe.l10n.t("Interrupting Jupyter Kernel"),kr.exportPythonQuickPickLabel=Oe.l10n.t("Python Script"),kr.exportHTMLQuickPickLabel=Oe.l10n.t("HTML"),kr.exportPDFQuickPickLabel=Oe.l10n.t("PDF"),kr.restartKernelAfterInterruptMessage=Oe.l10n.t("Interrupting the kernel timed out. Do you want to restart the kernel instead? All variables will be lost."),kr.documentMismatch=e=>Oe.l10n.t("Cannot run cells, duplicate documents for {0} found.",e),kr.jupyterGetVariablesBadResults=Oe.l10n.t("Failed to fetch variable info from the Jupyter Server."),Oe.l10n.t("Failure to create an 'Interactive' window. Try reinstalling the Python Extension."),kr.jupyterGetVariablesExecutionError=e=>Oe.l10n.t("Failure during variable extraction: \r\n{0}",e),kr.selectKernel=Oe.l10n.t("Change Kernel"),kr.selectDifferentKernel=Oe.l10n.t("Select a different Kernel"),kr.kernelFilterPlaceholder=Oe.l10n.t("Choose the kernels that are available in the kernel picker."),kr.recommendedItemCategoryInQuickPick=Oe.l10n.t("Recommended"),kr.selectedKernelCategoryInQuickPick=Oe.l10n.t("Selected"),kr.createPythonEnvironmentInQuickPick=Oe.l10n.t("Create Python Environment"),kr.createPythonEnvironmentInQuickPickTooltip=Oe.l10n.t("Create an isolated Python Environment per workspace folder"),kr.selectDifferentJupyterInterpreter=Oe.l10n.t("Change Interpreter"),kr.pandasTooOldForViewingFormat=(e,t)=>Oe.l10n.t({message:"Python package 'pandas' is version {0}. Version {1} or greater is required for viewing data.",args:[e,t],comment:["Do not translate 'pandas' as that is a Python module name"]}),kr.pandasRequiredForViewing=e=>Oe.l10n.t({message:"Python package 'pandas' version {0} (or above) is required for viewing data.",args:[e],comment:["Do not translate 'pandas' as that is a Python module name"]}),kr.tooManyColumnsMessage=Oe.l10n.t("Variables with over a 1000 columns may take a long time to display. Are you sure you wish to continue?"),kr.tooManyColumnsYes=Oe.l10n.t("Yes"),kr.tooManyColumnsNo=Oe.l10n.t("No"),kr.tooManyColumnsDontAskAgain=Oe.l10n.t("Don't Ask Again"),kr.plotViewerTitle=Oe.l10n.t("Plots"),kr.exportPlotTitle=Oe.l10n.t("Save plot image"),kr.pdfFilter="PDF",kr.pngFilter="PNG",kr.svgFilter="SVG",kr.exportImageFailed=e=>Oe.l10n.t("Error exporting image: {0}",e),kr.jupyterDataRateExceeded=Oe.l10n.t({message:"Cannot view variable because data rate exceeded. Please restart your server with a higher data rate limit. For example, --NotebookApp.iopub_data_rate_limit=10000000000.0",comment:["Do not translate the text --NotebookApp.iopub_data_rate_limit=10000000000.0 as that is a command argument."]}),kr.addCellBelowCommandTitle=Oe.l10n.t("Add cell"),kr.debugCellCommandTitle=Oe.l10n.t("Debug Cell"),kr.debugStepOverCommandTitle=Oe.l10n.t("Step over"),kr.debugContinueCommandTitle=Oe.l10n.t("Continue"),kr.debugStopCommandTitle=Oe.l10n.t("Stop"),kr.runCurrentCellAndAddBelow=Oe.l10n.t("Run current cell and add empty cell below"),kr.jupyterDebuggerNotInstalledError=e=>Oe.l10n.t("Pip module {0} is required for debugging cells. You will need to install it to debug cells.",e),kr.jupyterDebuggerOutputParseError=e=>Oe.l10n.t("Unable to parse {0} output, please log an issue with https://github.com/microsoft/vscode-jupyter",e),kr.cellStopOnErrorMessage=Oe.l10n.t("Cell was canceled due to an error in a previous cell."),kr.scrollToCellTitleFormatMessage=e=>Oe.l10n.t("Go to [{0}]",e.toString()),kr.instructionComments=e=>Oe.l10n.t("# To add a new cell, type '{0}'\n# To add a new markdown cell, type '{0} [markdown]'\n",e),kr.exportButtonTitle=Oe.l10n.t("Export"),kr.exportAsQuickPickPlaceholder=Oe.l10n.t("Export As..."),kr.openExportedFileMessage=Oe.l10n.t("Would you like to open the exported file?"),kr.openExportFileYes=Oe.l10n.t("Yes"),kr.openExportFileNo=Oe.l10n.t("No"),kr.exportFailedGeneralMessage=Oe.l10n.t({message:"Please check the 'Jupyter' [output](command:jupyter.viewOutput) panel for further details.",comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),kr.exportToPDFDependencyMessage=Oe.l10n.t('If you have not installed xelatex (TeX), you will need to do so before you can export to PDF. For further instructions, please see https://nbconvert.readthedocs.io/en/latest/install.html#installing-tex. \r\nTo avoid installing xelatex (TeX), you might want to try exporting to HTML and using your browser\'s "Print to PDF" feature.'),kr.failedExportMessage=Oe.l10n.t("Export failed."),kr.startingJupyterLogMessage=(e,t)=>Oe.l10n.t("Starting Jupyter from {0} with arguments {1}",e,t),kr.waitingForJupyterSessionToBeIdle=Oe.l10n.t("Waiting for Jupyter Session to be idle"),kr.gettingListOfKernelsForRemoteConnection=Oe.l10n.t("Fetching Kernels"),kr.gettingListOfKernelSpecs=Oe.l10n.t("Fetching Kernel specs"),kr.startingJupyterNotebook=Oe.l10n.t("Starting Jupyter Notebook"),kr.registeringKernel=Oe.l10n.t("Registering Kernel"),kr.jupyterCommandLineReloadQuestion=Oe.l10n.t("Please reload the window when changing the Jupyter command line."),kr.jupyterCommandLineReloadAnswer=Oe.l10n.t("Reload"),kr.createdNewKernel=(e,t)=>Oe.l10n.t("{0}: Kernel started: {1}",e,t),kr.kernelInvalid=e=>Oe.l10n.t("Kernel {0} is not usable. Check the Jupyter output tab for more information.",e),kr.removeRemoteJupyterServerEntryInQuickPick=Oe.l10n.t("Remove"),kr.loadClassFailedWithNoInternet=(e,t)=>Oe.l10n.t("Error loading {0}:{1}. Internet connection required for loading 3rd party widgets.",e,t),kr.useCDNForWidgetsNoInformation=Oe.l10n.t("Widgets require us to download supporting files from a 3rd party website."),kr.enableCDNForWidgetsSetting=(e,t)=>Oe.l10n.t("Widgets require us to download supporting files from a 3rd party website. (Error loading {0}:{1}).",e,t),kr.enableCDNForWidgetsButton=Oe.l10n.t("Enable Downloads"),kr.unhandledMessage=(e,t)=>Oe.l10n.t("Unhandled kernel message from a widget: {0} : {1}",e,t),kr.cdnWidgetScriptNotAccessibleWarningMessage=(e,t)=>Oe.l10n.t("Unable to download widget '{0}' from 3rd party website {1}, due to network access. Expected behavior may be affected. Click [here](https://aka.ms/PVSCIPyWidgets) for more information.",e,t),kr.widgetScriptNotFoundOnCDNWidgetMightNotWork=(e,t,n)=>Oe.l10n.t("Unable to find widget '{0}' version '{1}' from configured widget sources {2}. Expected behavior may be affected. Click [here](https://aka.ms/PVSCIPyWidgets) for more information.",e,t,n),kr.insecureSessionMessage=Oe.l10n.t("Connecting over HTTP without a token may be an insecure connection. Do you want to connect to a possibly insecure server?"),kr.insecureSessionDenied=Oe.l10n.t("Denied connection to insecure server."),kr.selectKernelForEditor=Oe.l10n.t("[Select a kernel](command:_notebook.selectKernel) to run cells."),kr.needIpykernel6=Oe.l10n.t("Ipykernel setup required for this feature"),kr.setup=Oe.l10n.t("Setup"),kr.showDataViewerFail=Oe.l10n.t("Failed to create the Data Viewer. Check the Jupyter tab of the Output window for more info."),kr.defaultNotebookName=Oe.l10n.t("default"),kr.recommendExtensionForNotebookLanguage=(e,t)=>Oe.l10n.t("The {0} extension is recommended for notebooks targeting the language '{1}'",e,t),kr.kernelWasNotStarted=Oe.l10n.t("Kernel was not started. A kernel session is needed to start debugging."),kr.noNotebookToDebug=Oe.l10n.t("No active notebook document to debug."),kr.cantStartDebugging=Oe.l10n.t("Can't start debugging."),kr.restartNotSupported=Oe.l10n.t("Restarting is not supported in the interactive window."),kr.importingIpynb=Oe.l10n.t("Importing notebook file"),kr.exportingToFormat=e=>Oe.l10n.t("Exporting to {0}",e),kr.kernelCategoryForJupyterSession=Oe.l10n.t("Jupyter Session"),kr.kernelDefaultRemoteDisplayName=Oe.l10n.t("Remote"),kr.kernelCategoryForJupyterKernel=Oe.l10n.t("Jupyter Kernel"),kr.kernelCategoryForRemoteJupyterKernel=Oe.l10n.t("Jupyter Kernel"),kr.kernelCategoryForConda=Oe.l10n.t("Conda Env"),kr.kernelCategoryForCondaWithoutPython=Oe.l10n.t("Conda Env Without Python"),kr.kernelCategoryForPoetry=Oe.l10n.t("Poetry Env"),kr.kernelCategoryForPipEnv=Oe.l10n.t("Pipenv Env"),kr.kernelCategoryForPyEnv=Oe.l10n.t("PyEnv Env"),kr.kernelCategoryForGlobal=Oe.l10n.t("Global Env"),kr.kernelCategoryForVirtual=Oe.l10n.t("Virtual Env"),kr.fileSeemsToBeInterferingWithKernelStartup=e=>Oe.l10n.t("The file '{0}' seems to be overriding built in modules and interfering with the startup of the kernel. Consider renaming the file and starting the kernel again.",e),kr.moduleSeemsToBeInterferingWithKernelStartup=e=>Oe.l10n.t("The module '{0}' seems to be overriding built in modules and interfering with the startup of the kernel. Consider renaming the folder and starting the kernel again.",e),kr.pipCondaInstallHoverWarning=(e,t)=>Oe.l10n.t("'!{0} install' could install packages into the wrong environment. [More info]({1})",e,t),kr.percentPipCondaInstallInsteadOfBang=e=>Oe.l10n.t({message:"Use '%{0} install' instead of '!{0} install'",args:[e],comment:['Do not translate the string within quotes, such as "%{0} install" and "!{0} install" as that is a Jupyter Shell Magic command']}),kr.replacePipCondaInstallCodeAction=e=>Oe.l10n.t("Replace with '%{0} install'",e),kr.failedToStartKernelDueToMissingModule=e=>Oe.l10n.t("The kernel failed to start due to the missing module '{0}'. Consider installing this module.",e),kr.failedToStartKernelDueToImportFailure=e=>Oe.l10n.t("The kernel failed to start as the module '{0}' could not be imported.",e),kr.failedToStartKernelDueToImportFailureFromFile=(e,t)=>Oe.l10n.t("The kernel failed to start as '{0}' could not be imported from '{1}'.",e,t),kr.failedToStartKernelDueToUnknownDllLoadFailure=Oe.l10n.t("The kernel failed to start as a dll could not be loaded."),kr.failedToStartKernelDueToDllLoadFailure=e=>Oe.l10n.t("The kernel failed to start as the dll '{0}' could not be loaded.",e),kr.failedToStartKernelDueToWin32APIFailure=Oe.l10n.t("The kernel failed to start due to an error with the Win32api module. Consider (re) installing this module."),kr.failedToStartKernelDueToPyZmqFailure=Oe.l10n.t({message:"The kernel failed to start due to an error with the 'pyzmq' module. Consider re-installing this module.",comment:['Do not translate the string "pyzmq" as that is a Python module.']}),kr.failedToStartKernelDueToOldIPython=Oe.l10n.t("The kernel failed to start due to an outdated version of IPython. Consider updating this module to the latest version."),kr.failedToStartKernelDueToOldIPyKernel=Oe.l10n.t("The kernel failed to start due to an outdated version of IPyKernel. Consider updating this module to the latest version."),kr.failedToStartKernelDueToMissingPythonEnv=e=>Oe.l10n.t("The kernel failed to start as the Python Environment '{0}' is no longer available. Consider selecting another kernel or refreshing the list of Python Environments.",e),kr.matplotlibWidgetInsteadOfOther=Oe.l10n.t("'%matplotlib' widget works best inside of VS Code"),kr.matplotlibWidgetCodeActionTitle=Oe.l10n.t("More info"),kr.allowExtensionToUseJupyterKernelApi=(e,t)=>Oe.l10n.t("Do you want to give the extension '{0}' access to the Jupyter Kernels? Clicking '{1}' would allow this extension to execute code against the Jupyter Kernels.",e,t),kr.thanksForUsingJupyterKernelApiPleaseRegisterWithUs=e=>Oe.l10n.t("Thank you for trying the Jupyter API. Please file an issue on our repo to allow the extension {0} to use this API in production. This would prevent us from breaking your extension when updating the API (as it is still a work in progress).",e),kr.activatingPythonEnvironment=e=>Oe.l10n.t("Activating Python Environment '{0}'",e),kr.runningKernelStartupHooksFor=e=>Oe.l10n.t("Running Kernel startup hooks in '{0}'",e),kr.cellAtFormat=(e,t)=>Oe.l10n.t("{0} Cell {1}",e,t),kr.jupyterServerConsoleOutputChannel=Oe.l10n.t("Jupyter Server Console"),kr.kernelConsoleOutputChannel=e=>Oe.l10n.t("{0} Kernel Console Output",e),kr.webNotSupported=Oe.l10n.t("Operation not supported in web version of Jupyter Extension."),kr.failedToInstallPythonExtension=Oe.l10n.t("Failed to install the Python Extension."),kr.filesPossiblyOverridingPythonModulesMayHavePreventedKernelFromStarting=e=>Oe.l10n.t("Some of the following files found in the working directory may have prevented the Kernel from starting. Consider renaming them.",e),kr.listOfFilesWithLinksThatMightNeedToBeRenamed=e=>Oe.l10n.t("File(s): {0} might need to be renamed.",e),kr.failedToGetVersionOfPandas=Oe.l10n.t("Failed to get version of Pandas to use the Data Viewer."),kr.failedToInstallPandas=Oe.l10n.t("Failed to install Pandas to use the Data Viewer."),kr.localKernelSpecs=Oe.l10n.t("Jupyter Kernel..."),kr.localPythonEnvironments=Oe.l10n.t("Python Environments..."),kr.quickPickTitleForSelectionOfJupyterServer=Oe.l10n.t("Select a Jupyter Server"),kr.UserJupyterServerUrlProviderDisplayName=Oe.l10n.t("Existing Jupyter Server..."),kr.UserJupyterServerUrlProviderDetail=Oe.l10n.t("Connect to an existing Jupyter Server"),kr.kernelPickerSelectKernelTitle=Oe.l10n.t("Select Kernel"),kr.kernelPickerSelectLocalKernelSpecTitle=Oe.l10n.t("Select a Jupyter Kernel"),kr.quickPickSelectPythonEnvironmentTitle=Oe.l10n.t("Select a Python Environment"),kr.kernelPickerSelectKernelFromRemoteTitle=e=>Oe.l10n.t("Select a Kernel from {0}",e),kr.kernelPickerSelectKernelFromRemoteTitleWithoutName=Oe.l10n.t("Select a Jupyter Kernel"),kr.installPythonExtensionViaKernelPickerTitle=Oe.l10n.t("Install Python Extension"),kr.installPythonExtensionViaKernelPickerToolTip=Oe.l10n.t("Python Extension is required to detect and use Python environments for the execution of code cells."),kr.installPythonQuickPickTitle=Oe.l10n.t("Install Python"),kr.installPythonQuickPickToolTip=Oe.l10n.t("Python Environments not detected. Upon installation reload VS Code or refresh the list of Kernels."),kr.failedToFetchKernelSpecsRemoteErrorMessageForQuickPickLabel=Oe.l10n.t({message:"$(error) Unable to connect to the remote server",comment:"Do not translate the string $(error) as that is a VS Code icon."}),kr.failedToFetchKernelSpecsRemoteErrorMessageForQuickPickDetail=Oe.l10n.t("Ensure the server is running and reachable."),function(e){e.collapseSingle=Oe.l10n.t("Collapse"),e.expandSingle=Oe.l10n.t("Expand"),e.noRowsInDataViewer=Oe.l10n.t("No rows match current filter"),e.sliceIndexError=Oe.l10n.t({message:"Index {0} out of range for axis {1} with {2} elements",comment:["Do not translate the strings {0}, {1} and {2} as they are variable names and will be replaced later"]}),e.sliceMismatchedAxesError=Oe.l10n.t({message:"Expected {0} axes, got {1} in slice expression",comment:["Do not translate the strings {0} and {2} as they are variable names and will be replaced later"]}),e.fetchingDataViewer=Oe.l10n.t("Fetching data ..."),e.dataViewerHideFilters=Oe.l10n.t("Hide filters"),e.dataViewerShowFilters=Oe.l10n.t("Show filters"),e.refreshDataViewer=Oe.l10n.t("Refresh data viewer"),e.sliceSummaryTitle=Oe.l10n.t("SLICING"),e.sliceData=Oe.l10n.t("Slice Data"),e.sliceSubmitButton=Oe.l10n.t("Apply"),e.sliceDropdownAxisLabel=Oe.l10n.t("Axis"),e.sliceDropdownIndexLabel=Oe.l10n.t("Index"),e.variableExplorerNameColumn=Oe.l10n.t("Name"),e.variableExplorerTypeColumn=Oe.l10n.t("Type"),e.variableExplorerCountColumn=Oe.l10n.t("Size"),e.variableExplorerValueColumn=Oe.l10n.t("Value"),e.collapseVariableExplorerLabel=Oe.l10n.t("Variables"),e.variableLoadingValue=Oe.l10n.t("Loading..."),e.showDataExplorerTooltip=Oe.l10n.t("Show variable snapshot in data viewer"),e.noRowsInVariableExplorer=Oe.l10n.t("No variables defined"),e.loadingRowsInVariableExplorer=Oe.l10n.t("Loading variables"),e.previousPlot=Oe.l10n.t("Previous"),e.nextPlot=Oe.l10n.t("Next"),e.panPlot=Oe.l10n.t("Pan"),e.zoomInPlot=Oe.l10n.t("Zoom in"),e.zoomOutPlot=Oe.l10n.t("Zoom out"),e.exportPlot=Oe.l10n.t("Export to different formats"),e.deletePlot=Oe.l10n.t("Remove"),e.selectedImageListLabel=Oe.l10n.t("Selected Image"),e.selectedImageLabel=Oe.l10n.t("Image"),e.errorOutputExceedsLinkToOpenFormatString=Oe.l10n.t({message:"Output exceeds the <a href={0}>size limit</a>. Open the full output data <a href={1}>in a text editor</a>",comment:['Do not translate the the Hyperlink text "<a href={0}>size limit</a>" and "<a href={1}>in a text editor</a>". However the text inside those tags can be translated']})}(vr||(vr={})),function(e){e.SHOW_DEPRECATED_FEATURE_PROMPT_FORMAT_ON_SAVE=Oe.l10n.t({message:"The setting 'python.formatting.formatOnSave' is deprecated, please use 'editor.formatOnSave'.",comment:['Do not translate the string "python.formatting.formatOnSave" as that is a setting in VS Code','Do not translate the string "editor.formatOnSave" as that is a setting in VS Code']}),e.SHOW_DEPRECATED_FEATURE_PROMPT_LINT_ON_TEXT_CHANGE=Oe.l10n.t({message:"The setting 'python.linting.lintOnTextChange' is deprecated, please enable 'python.linting.lintOnSave' and 'files.autoSave'.",comment:['Do not translate the string "python.linting.lintOnTextChange" as that is a setting in VS Code','Do not translate the string "python.linting.lintOnSave" as that is a setting in VS Code']}),e.SHOW_DEPRECATED_FEATURE_PROMPT_FOR_AUTO_COMPLETE_PRELOAD_MODULES=Oe.l10n.t({message:"The setting 'python.autoComplete.preloadModules' is deprecated, please consider using Pylance Language Server ('python.languageServer' setting).",comment:['Do not translate the string "python.autoComplete.preloadModules" as that is a setting in VS Code','Do not translate the string "python.languageServer" as that is a setting in VS Code']})}(yr||(yr={})),function(e){e.noCondaOrPipInstaller=Oe.l10n.t("There is no Conda or Pip installer available in the selected environment."),e.noPipInstaller=Oe.l10n.t("There is no Pip installer available in the selected environment."),e.searchForHelp=Oe.l10n.t("Search for help")}(br||(br={})),function(e){e.installingModule=e=>Oe.l10n.t("Installing {0}",e)}(wr||(wr={})),function(e){e.EXTENSION_LOAD="EXTENSION.LOAD",e.ENVFILE_VARIABLE_SUBSTITUTION="ENVFILE_VARIABLE_SUBSTITUTION",e.ENVFILE_WORKSPACE="ENVFILE_WORKSPACE",e.HASHED_PACKAGE_NAME="HASHED_PACKAGE_NAME",e.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_REQUEST="OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_REQUEST_EX",e.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_ERROR="OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_ERROR_EX",e.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_SUCCESS="OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_SUCCESS_EX"}(_r||(_r={})),function(e){e.Checked="checked",e.Unchecked="unchecked"}(Sr||(Sr={})),function(e){e.Dropdown="dropdown",e.TextBox="textbox",e.Checkbox="checkbox"}(Cr||(Cr={}));const Er="Python Kernel Debug Adapter",xr="Python Interactive Window Debug Adapter";var Tr;!function(e){e.clickedOnSetup="DATASCIENCE.DEBUGGING.CLICKED_ON_SETUP",e.closedModal="DATASCIENCE.DEBUGGING.CLOSED_MODAL",e.ipykernel6Status="DATASCIENCE.DEBUGGING.IPYKERNEL6_STATUS",e.clickedRunByLine="DATASCIENCE.DEBUGGING.CLICKED_RUNBYLINE",e.successfullyStartedRunByLine="DATASCIENCE.DEBUGGING.SUCCESSFULLY_STARTED_RUNBYLINE",e.successfullyStartedIWJupyterDebugger="DATASCIENCE.DEBUGGING.SUCCESSFULLY_STARTED_IW_JUPYTER",e.clickedRunAndDebugCell="DATASCIENCE.DEBUGGING.CLICKED_RUN_AND_DEBUG_CELL",e.successfullyStartedRunAndDebugCell="DATASCIENCE.DEBUGGING.SUCCESSFULLY_STARTED_RUN_AND_DEBUG_CELL",e.endedSession="DATASCIENCE.DEBUGGING.ENDED_SESSION"}(Tr||(Tr={}));var Pr=__webpack_require__(36292),Ir=__webpack_require__(77911),Dr=__webpack_require__.t(Ir,2);let Rr=class{async createHash(e,t="SHA-256"){return Mr(e,t)}};Rr=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],Rr);const Or={};let Ar,Nr=!1;async function Mr(e,t){const n=e.includes("/")||e.includes("\\")||e.endsWith(".interactive");if(n&&Or[e])return Or[e];const i=await async function(e,t){const n=(new TextEncoder).encode(e),i=await Ar.subtle.digest({name:t},n);return Array.from(new Uint8Array(i)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(e,t);return n&&!Nr&&(Object.keys(Or).length>1e4&&(Nr=!0),Or[e]=i),i}function Lr(e){try{const[t,n,i]=`${e.trim()}...`.split(".").map((e=>parseInt(e,10)));if(isNaN(t))return;return isNaN(n)?t.toString():isNaN(i)?`${t}.${n}`:`${t}.${n}.${i}`}catch(t){Sn(`Failed to parse version ${e}`,t)}}async function jr(e){return Mr(e,"SHA-256")}Ar="object"==typeof window?window.crypto:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self.crypto:__webpack_require__(6005).webcrypto;class Fr extends Xi{constructor(e,t,n){super("jupyterconnection",e+(t?`\n${t}`:"")),this.interpreter=n}}class Ur extends Xi{constructor(){super("sessionDisposed",gr.sessionDisposed)}}class qr{static outputHasModuleNotInstalledError(e,t){return!(!t||!(t.indexOf(`No module named ${e}`)>0||t.indexOf(`No module named '${e}'`)>0))}}function Kr(e=""){if(!e)return;const t=`${e.trim()}: `.split("\n").filter((e=>e.trim().length)).reverse();if(0===t.length)return;const n=t[0],i=((n.match(/\S+Error: /g)?n:void 0)||"").split(":");return i.length&&i[0].endsWith("Error")?i[0]:void 0}function Vr(e=""){const t=Wr(e);return t?t[1]:void 0}function Wr(e=""){if(!e)return;const t=e.trim().split("\n").map((e=>e.trim())).filter((e=>e.trim().length)).reverse();return 0!==t.length&&t[0].includes("Error")?[t.length>1?t[1]:"",t[0]]:void 0}var $r;function Br(e,t,n,i="",r=[]){const o=t instanceof Xi?t.stdErr||t.stack||"":t.toString(),s=Wr(o),a=o.toLowerCase();if(t instanceof Ur)return{reason:$r.sessionDisposed,message:gr.sessionDisposed,moreInfoLink:"https://aka.ms/kernelDisposedCannotRunCell",telemetrySafeTags:["deadSession"]};if(a.includes("ImportError: No module named 'win32api'".toLowerCase()))return{reason:$r.importWin32apiFailure,message:gr.failedToStartKernelDueToWin32APIFailure,moreInfoLink:"https://aka.ms/kernelFailuresWin32Api",telemetrySafeTags:["win32api"]};if(a.includes("ImportError: DLL load failed".toLowerCase())&&a.includes("win32api"))return{reason:$r.importWin32apiFailure,message:gr.failedToStartKernelDueToWin32APIFailure,moreInfoLink:"https://aka.ms/kernelFailuresWin32Api",telemetrySafeTags:["dll.load.failed","win32api"]};if(a.includes("ImportError: DLL load failed".toLowerCase())){const e=s&&s[0].toLowerCase().startsWith("import")?s[0].substring(6).trim():void 0;return{reason:$r.dllLoadFailure,moduleName:e,message:e?gr.failedToStartKernelDueToDllLoadFailure(e):gr.failedToStartKernelDueToUnknownDllLoadFailure,moreInfoLink:"https://aka.ms/kernelFailuresDllLoad",telemetrySafeTags:["dll.load.failed"]}}if(a.includes("AssertionError: Couldn't find Class NSProcessInfo".toLowerCase()))return{reason:$r.oldIPythonFailure,message:gr.failedToStartKernelDueToOldIPython,moreInfoLink:"https://aka.ms/kernelFailuresOldIPython",telemetrySafeTags:["oldipython"]};if(a.includes("NotImplementedError".toLowerCase())&&a.includes("asyncio".toLowerCase())&&a.includes("events.py".toLowerCase()))return{reason:$r.oldIPyKernelFailure,message:gr.failedToStartKernelDueToOldIPyKernel,moreInfoLink:"https://aka.ms/kernelFailuresOldIPyKernel",telemetrySafeTags:["oldipykernel"]};{const e=[];if(a.includes("ImportError: cannot import name".toLowerCase())&&a.includes("from partially initialized module".toLowerCase())&&a.includes("zmq.backend.cython".toLowerCase())&&e.push("zmq.backend.cython"),a.includes("zmq".toLowerCase())&&a.includes("cython".toLowerCase())&&a.includes("__init__.py".toLowerCase())&&e.push("zmq.cython"),a.includes("zmq.error.ZMQError")&&e.push("zmq.error"),e.length)return{reason:$r.zmqModuleFailure,message:gr.failedToStartKernelDueToPyZmqFailure,moreInfoLink:"https://aka.ms/kernelFailuresPyzmq",telemetrySafeTags:e}}if(s&&s[1].toLowerCase().startsWith("importerror")){const t=Hr(s[1]);if(t&&i){const n=function(e,t,n,i){if(i&&0!==n.length&&t&&!t.toLowerCase().startsWith(i)&&n.some((e=>t.toLowerCase().startsWith(e.uri.fsPath.toLowerCase()))))return{reason:$r.overridingBuiltinModules,fileName:t,moduleName:e,message:gr.fileSeemsToBeInterferingWithKernelStartup(pn(Oe.Uri.file(t),n||[])),moreInfoLink:"https://aka.ms/kernelFailuresOverridingBuiltInModules",telemetrySafeTags:["import.error","override.modules"]}}(t.moduleName,t.fileName,e,i);return n||{reason:$r.importFailure,moduleName:t.moduleName,fileName:t.fileName,message:t.fileName?gr.failedToStartKernelDueToImportFailureFromFile(t.moduleName,t.fileName):gr.failedToStartKernelDueToImportFailure(t.moduleName),moreInfoLink:t.fileName?"https://aka.ms/kernelFailuresModuleImportErrFromFile":"https://aka.ms/kernelFailuresModuleImportErr",telemetrySafeTags:["import.error"]}}}const c="No module named".toLowerCase(),l="is not a package".toLowerCase();if(a.includes(c)&&!l){const e=Ee(o).map((e=>e.trim())).filter((e=>e.length)).find((e=>e.toLowerCase().includes(c))),t=e?e.substring(e.toLowerCase().indexOf(c)+c.length).trim():"";if(e)return{reason:$r.moduleNotFoundFailure,moduleName:t,message:gr.failedToStartKernelDueToMissingModule(t),moreInfoLink:"https://aka.ms/kernelFailuresMissingModule",telemetrySafeTags:["module.notfound.error"]}}else{if(a.includes(c)&&l){const e=Ee(o).map((e=>e.trim())).filter((e=>e.length)).find((e=>e.toLowerCase().includes(c)));let t=e?e.substring(e.toLowerCase().indexOf(c)+c.length).trim():"",n="",i="";t.split("'").length>2&&(n=t.split("'").slice(-2)[0]||"",n=n?`${n}.py`:"",i=n||"",t=t.split("'")[1]||t);const s=r.filter((e=>"__init__.py"===Xt(e).toLowerCase())).map((e=>Xt(en(e))));return t&&n&&t!==n&&r.some((e=>Xt(e).toLowerCase()===n.toLowerCase()))?{reason:$r.overridingBuiltinModules,fileName:n,moduleName:t,message:gr.fileSeemsToBeInterferingWithKernelStartup(n),moreInfoLink:"https://aka.ms/kernelFailuresOverridingBuiltInModules",telemetrySafeTags:["import.error","override.modules"]}:t&&s&&t!==i&&s.some((e=>e.toLowerCase()===i.toLowerCase()))?{reason:$r.overridingBuiltinModules,folderName:i,moduleName:t,message:gr.moduleSeemsToBeInterferingWithKernelStartup(i),moreInfoLink:"https://aka.ms/kernelFailuresOverridingBuiltInModules",telemetrySafeTags:["import.error","override.modules"]}:{reason:$r.moduleNotFoundFailure,moduleName:t,message:gr.failedToStartKernelDueToMissingModule(t),moreInfoLink:"https://aka.ms/kernelFailuresMissingModule",telemetrySafeTags:["module.notfound.error"]}}if(t instanceof Xi&&"invalidkernel"===t.category&&r.length){const e=Xt(r[0]);return{reason:$r.overridingBuiltinModules,fileName:e,moduleName:Xt(r[0],".py"),message:gr.fileSeemsToBeInterferingWithKernelStartup(e),moreInfoLink:"https://aka.ms/kernelFailuresOverridingBuiltInModules",telemetrySafeTags:["import.error","override.modules"]}}if(s&&s[1].toLowerCase().startsWith("ModuleNotFoundError".toLowerCase())){const e=Hr(s[1]);if(e)return{reason:$r.moduleNotFoundFailure,moduleName:e.moduleName,message:gr.failedToStartKernelDueToMissingModule(e.moduleName),moreInfoLink:"https://aka.ms/kernelFailuresMissingModule",telemetrySafeTags:["module.notfound.error"]}}}if(t instanceof Fr){let e=Ee(o).map((e=>e.trim())).reverse().find((e=>e.toLowerCase().includes("error: ")));const i="AttributeError: 'Namespace' object has no attribute '_flags'",r=["jupyter.startup.failure"];let s,c=$r.jupyterStartFailure,l=Ee(t.message,{removeEmptyEntries:!0,trim:!0}).reverse().find((e=>e.toLowerCase().includes("error: ")));if(l=l||Ee(t.stdErr||"",{removeEmptyEntries:!0,trim:!0}).reverse().find((e=>e.toLowerCase().includes("error: "))),a.includes(i.toLowerCase())?(c=$r.jupyterStartFailureOutdatedTraitlets,e=gr.failedToStartJupyterDueToOutdatedTraitlets(n||"",l||""),r.push("outdated.traitlets"),s="https://aka.ms/kernelFailuresJupyterTrailtletsOutdated"):(e=l?gr.failedToStartJupyterWithErrorInfo(n||"",l):gr.failedToStartJupyter(n||""),s=void 0),e)return{reason:c,message:e,pythonError:l,moreInfoLink:s,telemetrySafeTags:r}}}function Hr(e){const t=(e=e.replace(/"/g,"'")).match(/'[^\\']*(\\'[^\\']*)*'/g),n=e.match(/\((.*?)\)/g);let i,r;return t&&t[0].length>2&&(i=t[0],i=i.substring(1,i.length-1)),n&&n[0].length>2&&(r=n[0],r=r.substring(1,r.length-1)),i?{moduleName:i,fileName:r}:void 0}function zr(e){if(!e)return;const t=/\[([^\[\]]*)\]\((.*?)\)/gm;let n;for(;null!==(n=t.exec(e));)3===n.length&&(e=e.replace(n[0],`<a href='${n[2]}'>${n[1]}</a>`));const i=Ee(e,{removeEmptyEntries:!1,trim:!1}).map((e=>`[1;31m${e}`)).join("\n");return new Oe.NotebookCellOutput([Oe.NotebookCellOutputItem.error({message:"",name:"",stack:i})])}!function(e){e.importWin32apiFailure="importWin32apiFailure",e.zmqModuleFailure="zmqModuleFailure",e.oldIPythonFailure="oldIPythonFailure",e.oldIPyKernelFailure="oldIPyKernelFailure",e.overridingBuiltinModules="overridingBuiltinModules",e.importFailure="importFailure",e.moduleNotFoundFailure="moduleNotFound",e.dllLoadFailure="dllLoadFailure",e.jupyterStartFailure="jupyterStartFailure",e.jupyterStartFailureOutdatedTraitlets="jupyterStartFailureOutdatedTraitlets",e.pythonEnvironmentMissing="pythonEnvironmentMissing",e.sessionDisposed="sessionDisposed"}($r||($r={}));const Jr=[function(e,t=[]){e.includes("ChildProcess.exithandler".toLowerCase())&&t.push("childproc.exit")},function(e,t=[]){e.includes("KernelRestarter: restart failed".toLowerCase())&&t.push("KernelRestarter.failed")}];function Gr(e){if(e.stack&&Array.isArray(e.stack)){const t={...e,stack:e.stack.join("\n")};return Ir.parse.call(Dr,t)}return Ir.parse.call(Dr,e)}function Yr(e){const t=[];return"string"==typeof e.getTypeName()&&e.getTypeName().length>0&&t.push(e.getTypeName()),"string"==typeof e.getMethodName()&&e.getMethodName().length>0&&t.push(e.getMethodName()),"string"==typeof e.getFunctionName()&&e.getFunctionName().length>0&&(2===t.length&&t.join(".")===e.getFunctionName()||t.push(e.getFunctionName())),t.join(".")}function Qr(e){return!1===e.getConfiguration("telemetry").inspect("enableTelemetry").globalValue}const Xr={};function Zr(e,t){const n=e;S()&&n.startsWith("ds_")||(void 0===t?delete Xr[n]:Xr[n]=t)}let eo;function to(){if(eo)return eo;const e=__webpack_require__(92291).default;return eo=new e(f)}function no(e,t){let n={};return Object.getOwnPropertyNames(t).forEach((i=>{if(void 0!==t[i]&&null!==t[i])try{n[i]="string"==typeof t[i]?t[i]:"object"==typeof t[i]?"object":t[i].toString()}catch(t){Sn(`Failed to serialize ${i} for ${e}`,t)}})),n}function io(e,t,n,i){!w()&&function(){try{return void 0!==__webpack_require__(66828)&&void 0!==to()}catch{return!1}}()&&function(e,t,n,i){const r=to();let o={},s=e;i?(o={},Object.assign(o,Xr),Object.assign(o,n||{}),async function(e,t){e.failed=!0,e.failureCategory=e.failureCategory||er(t);const n=!Pr.FetchError&&"TypeError"===t?.name&&"Failed to fetch"===t?.message,i=n?TypeError:Pr.FetchError,r=(n||void 0!==Pr.FetchError)&&function(e,t){return t?e instanceof t||e instanceof Zi&&e.originalException instanceof t:(console.error("Error type is not defined",e),!1)}(t,i);"unknown"===e.failureCategory&&r&&(e.failureCategory="fetcherror"),e.stackTrace=function(e){let t="";for(const n of Gr(e)){const e=n.getFileName();if(e){const i=n.getLineNumber(),r=n.getColumnNumber();t+=`\n\tat ${Yr(n)} ${e}:${i}:${r}`}else t+="\n\tat <anonymous>"}return t.trim().replace(/\\/g,"/")}(t),"string"==typeof t&&(e.failureSubCategory="errorisstring");const o=t.stdErr?t.stdErr:t.stack||"";if(!o)return;e.failureSubCategory=e.failureSubCategory||function(e){const t=[];let n=Array.isArray(e)?e[0].toLowerCase():e.toLowerCase();Jr.forEach((e=>e(n,t)));const i=Br([],n,void 0);return i?.telemetrySafeTags.length&&t.push(...i.telemetrySafeTags),Array.from(new Set(t)).join(",")}(o);const s=function(e){if(!e)return;const t=(Array.isArray(e)?e[0]:e).split("\n").map((e=>e.trim().toLowerCase())).filter((e=>e.length)).reverse().find((e=>e.startsWith("file ")&&e.includes(", line ")&&e.includes(".py")&&e.includes(".py")));if(!t)return;const n=(t.substring(0,t.lastIndexOf(".py"))+".py").replace(/\\/g,"/").split("/"),i=n.indexOf("site-packages");let r=i>=0&&n.length>i+1?n[i+1]:"";const o=n.reverse();return o.length<2?void 0:{fileName:o[0],folderName:o[1],packageName:r}}(o);s&&([e.pythonErrorFile,e.pythonErrorFolder,e.pythonErrorPackage]=await Promise.all([Promise.resolve(e.pythonErrorFile||jr(s.fileName)),Promise.resolve(e.pythonErrorFolder||jr(s.folderName)),Promise.resolve(e.pythonErrorPackage||jr(s.packageName))]))}(o,i).then((()=>{o=no(s,o),r.sendTelemetryEvent(s,o,t)})).catch(ae)):(n&&(o=no(s,n)),Object.assign(o,Xr),r.sendTelemetryEvent(s,o,t))}(e,t,n,i)}const ro=new Set;function oo(e,t){return function(n,i,r){const o=r.value;return r.value=function(...n){const i=t||{},r=new se,s=`${e.toString()}${JSON.stringify(i)}`,a=!ro.has(s);ro.add(s);const c=o.apply(this,n);return c&&"function"==typeof c.then&&"function"==typeof c.catch?c.then((t=>{const n={...i};return a&&(n.firstTime=a),io(e,r?{duration:r?.elapsedTime}:void 0,n),t})).catch((t=>{const n={...i};n.failed=!0,io(e,r?{duration:r?.elapsedTime}:{},n,t)})):io(e,r?{duration:r?.elapsedTime}:void 0,i),c},r}}function so(e,t){return function(n,i,r){const o=r.value;return r.value=function(...n){return io(e,void 0,t),o.apply(this,n)},r}}function ao(e,t,n,i){if(e)return i.createSystemVariables(t).resolve(e);if(t)return Pt(un(t));const r=n.getWorkspaceFolder(void 0);return r?un(r.uri):process.cwd()}async function co(e,t,n){const i=gr.jupyterSelfCertEnable,r=gr.jupyterSelfCertClose,o=await e.showErrorMessage(gr.jupyterSelfCertFail(n),{modal:!0},i,r);return o===i?(io(F.SelfCertsMessageEnabled),await t.updateSetting("allowUnauthorizedRemoteConnection",!0,void 0,Oe.ConfigurationTarget.Workspace),!0):(o===r&&io(F.SelfCertsMessageClose),!1)}async function lo(e,t,n){const i=gr.jupyterSelfCertEnable,r=gr.jupyterSelfCertClose,o=await e.showErrorMessage(gr.jupyterExpiredCertFail(n),{modal:!0},i,r);return o===i?(io(F.SelfCertsMessageEnabled),await t.updateSetting("allowUnauthorizedRemoteConnection",!0,void 0,Oe.ConfigurationTarget.Workspace),!0):(o===r&&io(F.SelfCertsMessageClose),!1)}function uo(e,t,n,i,r,o,s,a){const c=t.baseUrl,l=t.token,d=new URL(t.baseUrl).hostname,u=(t?.webSocketProtocols||[]).length&&t?.webSocketProtocols||[],p=t.authorizationHeader&&Object.keys(t?.authorizationHeader??{}).length>0?t.authorizationHeader:void 0,h=p?()=>p:void 0,f=u?()=>u:()=>[];let m={baseUrl:c,appUrl:"",wsUrl:c.replace("http","ws"),fetch:t.fetch,WebSocket:t.WebSocket},g=n.getRequestInit();(""===l||"null"===l)&&!h||(m={...m,token:l,appendToken:!0});const v=r.getSettings(void 0).allowUnauthorizedRemoteConnection;if(c.startsWith("https")&&v&&i){const e=i.createHttpRequestAgent();g={...g,agent:e}}return m={...m,init:g,WebSocket:t.WebSocket?n.wrapWebSocketCtor(t.WebSocket):n.getWebsocketCtor(void 0,v,h,f),fetch:t.fetch||n.getFetchMethod(),Request:n.getRequestCtor(void 0,v,h),Headers:n.getHeadersCtor()},{baseUrl:c,providerId:e.id,serverProviderHandle:e,token:l,hostName:d,localLaunch:o,displayName:t&&t.displayName?t.displayName:ir(l,c),dispose:()=>a?.dispose(),rootDirectory:s,mappedRemoteNotebookDir:t?.mappedRemoteNotebookDir||t?.workingDirectory,getAuthHeader:h,getWebsocketProtocols:f,settings:nr.ServerConnection.makeSettings(m)}}async function po(e){return Mr(fo(e),"SHA-256")}_r.EXTENSION_LOAD,_r.ENVFILE_VARIABLE_SUBSTITUTION,_r.ENVFILE_WORKSPACE,_r.HASHED_PACKAGE_NAME,F.ActiveInterpreterListingPerf,F.CellOutputMimeType,F.GetActivatedEnvironmentVariables,_r.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_REQUEST,_r.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_ERROR,_r.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_SUCCESS,F.AddCellBelow,F.CodeLensAverageAcquisitionTime,F.DocumentWithCodeCells,F.DebugContinue,F.DebugCurrentCell,F.DebugStepOver,F.DebugStop,F.DebugFileInteractive,F.JupyterKernelSpecEnumeration,F.KernelSpec,F.EnterRemoteJupyterUrl,F.DisableInteractiveShiftEnter,F.EnableInteractiveShiftEnter,F.PerceivedJupyterStartupNotebook,F.ExportPythonFileInteractive,F.ExportPythonFileAndOutputInteractive,F.ClickedExportNotebookAsQuickPick,F.ExportNotebookAs,F.ImportNotebook,F.ExportNotebookAsCommand,F.ExportNotebookAsFailed,F.GetPasswordFailure,F.GetPasswordSuccess,F.CheckPasswordJupyterHub,F.PandasNotInstalled,F.PandasTooOld,F.PandasOK,F.PandasInstallCanceled,F.OpenNotebookAll,F.OpenPlotViewer,F.RunAllCells,F.RunSelectionOrLine,F.RunCurrentCell,F.RunAllCellsAbove,F.RunCellAndAllBelow,F.RunCurrentCellAndAdvance,F.RunFileInteractive,F.RunToLine,F.RunFromLine,F.InsertCellBelowPosition,F.InsertCellBelow,F.InsertCellAbove,F.DeleteCells,F.SelectCell,F.SelectCellContents,F.ExtendSelectionByCellAbove,F.ExtendSelectionByCellBelow,F.MoveCellsUp,F.MoveCellsDown,F.ChangeCellToMarkdown,F.ChangeCellToCode,F.GotoNextCellInFile,F.GotoPrevCellInFile,F.RunCurrentCellAndAddBelow,F.SelfCertsMessageClose,F.SelfCertsMessageEnabled,F.UserInstalledJupyter,F.UserInstalledPandas,F.UserDidNotInstallJupyter,F.UserDidNotInstallPandas,F.PythonNotInstalled,F.PythonExtensionNotInstalled,F.PythonExtensionInstalledViaKernelPicker,F.PythonModuleInstall,F.ShiftEnterBannerShown,F.StartShowDataViewer,F.ShowDataViewer,F.ShowDataViewerRowsLoaded,F.FailedShowDataViewer,F.RefreshDataViewer,F.StartedRemoteJupyterSessionWithBackingFile,F.ZMQSupport,F.ZMQSupportFailure,F.VariableExplorerFetchTime,F.VariableExplorerVariableCount,F.KernelSpecLanguage,F.KernelLauncherPerf,F.AmbiguousGlobalKernelSpec,F.NewFileForInteractiveWindow,F.CreateInteractiveWindow,F.HashedIPyWidgetNameUsed,F.DiscoverIPyWidgetNamesPerf,F.HashedIPyWidgetScriptDiscoveryError,F.IPyWidgetLoadSuccess,F.IPyWidgetLoadFailure,F.IPyWidgetWidgetVersionNotSupportedLoadFailure,F.IPyWidgetPromptToUseCDN,F.IPyWidgetPromptToUseCDNSelection,F.IPyWidgetOverhead,F.IPyWidgetRenderFailure,F.IPyWidgetUnhandledMessage,F.RawKernelInfoResponse,F.RawKernelProcessLaunch,F.ExecuteCell,F.ResumeCellExecution,F.NotebookStart,F.SwitchKernel,F.NotebookInterrupt,F.NotebookRestart,F.KernelStartFailureDueToMissingEnv,F.RawKernelSessionStartNoIpykernel,F.RawKernelSessionKernelProcessExited,F.RawKernelSessionShutdown,F.RawKernelSessionDisposed,F.RunByLineVariableHover,F.KernelCount,F.VSCNotebookCellTranslationFailed,F.InteractiveFileTooltipsPerf,F.NativeVariableViewLoaded,F.NativeVariableViewMadeVisible,F.DataViewerWebviewLoaded,F.PlotViewerWebviewLoaded,F.CommandExecuted,F.DataViewerSliceEnablementStateChanged,F.DataViewerDataDimensionality,F.DataViewerSliceOperation,F.CreatePythonEnvironment,F.RecommendExtension,Tr.clickedOnSetup,Tr.closedModal,Tr.ipykernel6Status,Tr.clickedRunByLine,Tr.successfullyStartedRunByLine,Tr.successfullyStartedIWJupyterDebugger,Tr.clickedRunAndDebugCell,Tr.successfullyStartedRunAndDebugCell,Tr.endedSession,F.ExtensionCallerIdentification,F.JupyterKernelApiUsage,F.JupyterApiUsage,F.JupyterServerProviderResponseApi,F.JupyterKernelApiAccess,F.JupyterKernelStartupHook,F.PythonVariableFetchingCodeFailure,F.InteractiveWindowDebugSetupCodeFailure,F.KernelCrash,F.JupyterKernelHiddenViaFilter,F.JupyterKernelFilterUsed,F.RunTest,F.PreferredKernelExactMatch,F.JupyterInstalled,F.IPyWidgetExtensionJsInfo,F.IPyWidgetNbExtensionCopyTime,F.NoActiveKernelSession,F.DataViewerUsingInterpreter,F.DataViewerUsingKernel;const ho=new Set([p,"ms-toolsai.vscode-ai","GitHub.codespaces"].map((e=>e.toLowerCase())));function fo(e){return ho.has(e.extensionId.toLowerCase())?`${C.REMOTE_URI}?${C.REMOTE_URI_ID_PARAM}=${e.id}&${C.REMOTE_URI_HANDLE_PARAM}=${encodeURI(e.handle)}`:`${C.REMOTE_URI}?${C.REMOTE_URI_ID_PARAM}=${e.id}&${C.REMOTE_URI_HANDLE_PARAM}=${encodeURI(e.handle)}&${C.REMOTE_URI_EXTENSION_ID_PARAM}=${encodeURI(e.extensionId)}`}class mo extends Error{}function go(e){if(e)return function(e){return e===t||e===n}(e)?p:e.startsWith("azureml_compute_instances")||e.startsWith("azureml_connected_compute_instances")?"ms-toolsai.vscode-ai":"github-codespaces"===e?"GitHub.codespaces":void Cn(`Extension Id not found for server Id ${e}`)}class vo extends Xi{constructor(e){super("jupyterselfcert",e)}static isSelfCertsError(e){return e.message.indexOf("reason: self signed certificate")>=0}}class yo extends Xi{constructor(e){super("jupyterselfexpiredcert",e)}static isSelfCertsExpiredError(e){return e.message.indexOf("reason: certificate has expired")>=0}}const bo=Symbol("IDataScienceErrorHandler");class wo extends Xi{constructor(e,t,n){super(e,t),this.kernelConnectionMetadata=n}}class _o extends Zi{constructor(e,t,n){super(e,t),this.kernelConnectionMetadata=n}}class So extends Xi{constructor(e,t,n){super("remotejupyterserverconnection",gr.remoteJupyterConnectionFailedWithServerWithError(Co(e),n.message||n.toString())),this.url=e,this.serverProviderHandle=t,this.originalError=n,this.baseUrl=Co(e)}}function Co(e){const t=new URL(e);return`${t.protocol}//${t.host}/`}var ko,Eo=__webpack_require__(50361),xo=__webpack_require__.n(Eo),To=__webpack_require__(84564),Po=__webpack_require__.n(To);function Io(e){return jr(Ro(e.uri).path)}function Do(e=Oe.Uri.file(""),t=Oe.Uri.file(""),n=ln(),i=!1){const r=Ro(e,n,n==cn.Windows||i),o=Ro(t,n,n==cn.Windows||i);return r===o||Gt(r,o,!0)}function Ro(e=Oe.Uri.file(""),t=ln(),n=!1){let i=un(e);return n&&(i=i.toLowerCase()),i.endsWith("/bin/python")&&[cn.Linux,cn.OSX].includes(t)&&i.endsWith("/bin/python")&&i.split("/").length>4?Oe.Uri.file(i.replace("/bin/python","/python")):Oe.Uri.file(i)}!function(e){e.Unknown="Unknown",e.Conda="Conda",e.VirtualEnv="VirtualEnv",e.Pipenv="PipEnv",e.Pyenv="Pyenv",e.Venv="Venv",e.Poetry="Poetry",e.VirtualEnvWrapper="VirtualEnvWrapper"}(ko||(ko={}));const Oo=Symbol("IPythonApi"),Ao=Symbol("IPythonExtensionChecker");var No;!function(e){e.jupyter="jupyter",e.ipykernel="ipykernel",e.notebook="notebook",e.kernelspec="kernelspec",e.nbconvert="nbconvert",e.pandas="pandas",e.pip="pip"}(No||(No={}));class Mo{constructor(){this.promises=new Set,this._onStateChange=new Oe.EventEmitter,this.onStateChange=this._onStateChange.event}get isComplete(){return 0===this.promises.size}dispose(){this._onStateChange.dispose()}push(e){this.promises.add(e),this._onStateChange.fire(),e.finally((()=>{this.promises.delete(e),this.isComplete&&this._onStateChange.fire()})).catch(ae)}}class Lo extends Zi{constructor(e){super("Python Extension failed to activate",e,"pythonExtension")}}class jo extends Xi{constructor(){super("pythonExtension","Python Extension API not exported")}}var Fo=__webpack_require__(36625);function Uo(e){if("executable"in e){const t=[];"number"==typeof e.version?.major&&(t.push(e.version.major.toString()),"number"==typeof e.version.minor&&(t.push(e.version.minor.toString()),"number"==typeof e.version.micro&&t.push(e.version.micro.toString())));const n=t.length?t.join("."):"",i=e.environment?Xt(e.environment?.folderUri):"",r=n?`Python ${n}`:"Python";return Wo(e)&&i?i:i?`${i} (${r})`:r}const t=(Lr(e.version?.raw||"")||"").trim(),n=e.envType===ko.Conda&&!0===e.isCondaEnvWithoutPython,i=t.trim()?`Python ${t}`:"Python",r=qo(e);if(n&&r)return r;const o=[];return r&&o.push(r),e.envType&&e.envType!==ko.Unknown&&o.push(e.envType),[i,o.length?`(${o.join(": ")})`:""].join(" ").trim()}function qo(e){let t=e.envName;return e.envPath&&e.envType===ko.Conda&&!e.envName&&(t=Xt(e.envPath)),t}const Ko=[ko.Unknown,ko.Conda,ko.Pipenv,ko.Poetry,ko.Pyenv,ko.Venv,ko.VirtualEnv,ko.VirtualEnvWrapper];function Vo(e){if("Conda"===e.environment?.type)return ko.Conda;const t=[["Conda",ko.Conda],["Pyenv",ko.Pyenv],["Pipenv",ko.Pipenv],["Poetry",ko.Poetry],["VirtualEnvWrapper",ko.VirtualEnvWrapper],["VirtualEnv",ko.VirtualEnv],["Venv",ko.Venv]];for(const[n,i]of t)if(e.tools.includes(n))return i;for(const t of Ko)if(e.tools.some((e=>e.toLowerCase()===t.toLowerCase())))return t;return ko.Unknown}function Wo(e){return Vo(e)===ko.Conda&&!e.executable.uri}var $o,Bo=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Ho=function(e,t){return function(n,i){t(n,i,e)}};function zo(e,t){if(e){const n={...e,sysPrefix:e.sysPrefix||"",uri:Oe.Uri.file(e.path||""),id:t||e.id,envPath:e.envPath?Oe.Uri.file(e.envPath):void 0,displayPath:"displayPath"in e&&"string"==typeof e.displayPath?Oe.Uri.file(e.displayPath):void 0};return delete n.path,e.envPath||delete n.envPath,n}}function Jo(e,t){const n=Vo(e);let i,r=!1,o=e.id,s=e.executable.sysPrefix;if(e.executable.uri)i=e.executable.uri;else{if(n!==ko.Conda||!t)return void Cn(`Python environment ${pn(e.id)} excluded as Uri is undefined`);r=!0,s=s||e.environment?.folderUri?.fsPath||"",i=ln()===cn.Windows?Oe.Uri.joinPath(e.environment?.folderUri||Oe.Uri.file(e.path),"python.exe"):Oe.Uri.joinPath(e.environment?.folderUri||Oe.Uri.file(e.path),"bin","python")}return{id:o,sysPrefix:s||"",envPath:e.environment?.folderUri,displayPath:e.environment?.folderUri||Oe.Uri.file(e.path),envName:e.environment?.name||"",uri:i,displayName:e.environment?.name||"",envType:n,isCondaEnvWithoutPython:r,version:e.version?{major:e.version.major||0,minor:e.version.minor||0,patch:e.version.micro||0,raw:e.version.sysVersion||""}:void 0}}function Go(e){if(e){const t=Object.assign({},e,{path:un(e.uri),envPath:e.envPath?un(e.envPath):void 0,displayPath:e.displayPath?un(e.displayPath):void 0});return delete t.uri,t}}let Yo=class{get onDidActivatePythonExtension(){return this.didActivatePython.event}get pythonExtensionHooked(){return this._pythonExtensionHooked.promise}get pythonExtensionVersion(){return this._pythonExtensionVersion}constructor(e,t,n,i){this.extensions=e,this.disposables=t,this.extensionChecker=n,this.workspace=i,this.api=ie(),this.didActivatePython=new Oe.EventEmitter,this._pythonExtensionHooked=ie(),this.extensionChecker.isPythonExtensionInstalled||this.extensions.onDidChange((async()=>{this.extensionChecker.isPythonExtensionInstalled&&await this.registerHooks()}),this,this.disposables),this.disposables.push(this.didActivatePython)}getApi(){return this.init().catch(ae),this.api.promise}async getNewApi(){await this.init();const e=this.extensions.getExtension(T);return e?.packageJSON?.version&&(this._pythonExtensionVersion=new Fo.SemVer(e?.packageJSON?.version)),e?.exports}setApi(e){!this.api.resolved&&this.workspace.isTrusted&&this.api.resolve(e)}async init(){this.initialized||(this.extensions.getExtension(T)?await this.registerHooks():await this.extensionChecker.showPythonExtensionInstallRequiredPrompt(),this.initialized=!0)}async registerHooks(){if(this.hooksRegistered)return;const e=this.extensions.getExtension(T);if(!e)return;let t=!1;if(!e.isActive)try{await e.activate(),t=!0}catch(e){return Sn("Failed activating the python extension: ",e),void this.api.reject(new Lo(e))}this.hooksRegistered||(this.hooksRegistered=!0,t&&this.didActivatePython.fire(),e.exports?.jupyter?e.exports.jupyter.registerHooks():(Sn("Python extension is not exporting the jupyter API"),this.api.reject(new jo)),this._pythonExtensionHooked.resolve())}};Yo=Bo([Kn(),Ho(0,zn(qi)),Ho(1,zn(Ri)),Ho(2,zn(Ao)),Ho(3,zn(Qn))],Yo);let Qo=$o=class{get onPythonExtensionInstallationStatusChanged(){return this.pythonExtensionInstallationStatusChanged.event}constructor(e,t,n,i,r){this.extensions=e,this.appShell=t,this.commandManager=n,this.workspace=i,this.disposables=r,this.pythonExtensionInstallationStatusChanged=new Oe.EventEmitter,this.extensions.onDidChange(this.extensionsChangeHandler.bind(this),this,this.disposables),this.previousInstallState=this.isPythonExtensionInstalled}get isPythonExtensionInstalled(){return void 0!==this.extensions.getExtension(T)}get isPythonExtensionActive(){return!0===this.extensions.getExtension(T)?.isActive}async directlyInstallPythonExtension(){return this.commandManager.executeCommand("workbench.extensions.installExtension",T,{context:{skipWalkthrough:!0}})}async showPythonExtensionInstallRequiredPrompt(){if(!this.workspace.isTrusted)return;$o.promptDisplayed=!0;const e=lr.bannerLabelYes;io(F.PythonExtensionNotInstalled,void 0,{action:"displayed"}),await this.appShell.showInformationMessage(gr.pythonExtensionRequired,{modal:!0},e)===e?(io(F.PythonExtensionNotInstalled,void 0,{action:"download"}),await this.installPythonExtension()):io(F.PythonExtensionNotInstalled,void 0,{action:"dismissed"})}async installPythonExtension(){this.commandManager.executeCommand("extension.open",T).then(ae,ae)}async extensionsChangeHandler(){const e=this.isPythonExtensionInstalled;e!==this.previousInstallState&&(this.pythonExtensionInstallationStatusChanged.fire(e?"installed":"uninstalled"),this.previousInstallState=e)}};Qo=$o=Bo([Kn(),Ho(0,zn(qi)),Ho(1,zn(Jn)),Ho(2,zn(Gn)),Ho(3,zn(Qn)),Ho(4,zn(Ri))],Qo);let Xo=class{get status(){return this._status}set status(e){this._status!==e&&(this._status=e,this._onDidChangeStatus.fire())}get known(){return this.api?.environments.known||[]}constructor(e,t,n,i,r){this.apiProvider=e,this.extensionChecker=t,this.disposables=n,this.workspace=i,this.context=r,this.didChangeInterpreter=new Oe.EventEmitter,this.didChangeInterpreters=new Oe.EventEmitter,this._onDidEnvironmentVariablesChange=new Oe.EventEmitter,this._onDidRemoveInterpreter=new Oe.EventEmitter,this.onDidRemoveInterpreter=this._onDidRemoveInterpreter.event,this.onDidEnvironmentVariablesChange=this._onDidEnvironmentVariablesChange.event,this.interpreterListCachePromise=void 0,this._status="idle",this._onDidChangeStatus=new Oe.EventEmitter,this.onDidChangeStatus=this._onDidChangeStatus.event,this.refreshPromises=new Mo,this.pauseEnvDetection=!1,this.onResumeEnvDetection=new Oe.EventEmitter,this._interpreters=new Map,this.workspaceCachedActiveInterpreter=new Set,this.lastLoggedResourceAndInterpreterId="",this.pythonEnvHashes=new Map,this.loggedEnvsWithoutInterpreterPath=new Set,this.pendingInterpreterChangeEventTriggers=new Map,this.pendingInterpretersChangeEventTriggers=new Map,this.extensionChecker.isPythonExtensionInstalled&&(this.extensionChecker.isPythonExtensionActive||this.apiProvider.onDidActivatePythonExtension((()=>{this.builtListOfInterpretersAtLeastOnce=!1,this.hookupOnDidChangeInterpreterEvent(),this.buildListOfInterpretersForFirstTime()}),this,this.disposables)),this.workspace.onDidChangeWorkspaceFolders(this.onDidChangeWorkspaceFolders,this,n),this.workspace.onDidGrantWorkspaceTrust((()=>this.refreshInterpreters(!0)),this,this.disposables),this.disposables.push(this._onDidChangeStatus),this.disposables.push(this.refreshPromises),this.disposables.push(this.onResumeEnvDetection),this.refreshPromises.onStateChange((()=>{this.status=this.refreshPromises.isComplete?"idle":"refreshing"})),this.workspace.onDidGrantWorkspaceTrust((()=>this.populateCachedListOfInterpreters(!0).catch(ae)),this,this.disposables)}async resolveEnvironment(e){return this.getApi().then((t=>{if(!t)return;const n="string"==typeof e?t.environments.known.find((t=>t.id===e||t.path===e)):e;return t.environments.resolveEnvironment(n||e)}))}get onDidChangeInterpreter(){return this.hookupOnDidChangeInterpreterEvent(),this.didChangeInterpreter.event}get onDidChangeInterpreters(){return this.hookupOnDidChangeInterpreterEvent(),this.didChangeInterpreters.event}get resolvedEnvironments(){return this.hookupOnDidChangeInterpreterEvent(),Array.from(this._interpreters.values()).map((e=>e.resolved))}get environmentsFound(){return this.getApi().catch(ae),this.hookupOnDidChangeInterpreterEvent(),(this.api?.environments?.known.length??0)>0}getInterpreters(){if(this.hookupOnDidChangeInterpreterEvent(),!this.interpreterListCachePromise){this.getInterpretersCancellation?.cancel(),this.getInterpretersCancellation?.dispose();const e=this.getInterpretersCancellation=new Oe.CancellationTokenSource;this.interpreterListCachePromise=this.getInterpretersImpl(e.token),this.interpreterListCachePromise.finally((()=>e.dispose())).catch(ae),this.refreshPromises.push(this.interpreterListCachePromise)}return this.interpreterListCachePromise}pauseInterpreterDetection(e){e.isCancellationRequested||(this.pauseEnvDetection=!0,e.onCancellationRequested((()=>{this.pauseEnvDetection=!1,this.triggerPendingEvents()}),this,this.disposables))}async refreshInterpreters(e=!1){const t=(async()=>{const t=await this.getApi();if(t)try{await t.environments.refreshEnvironments({forceRefresh:e}),this.interpreterListCachePromise=void 0,await this.getInterpreters(),En("Refreshed Environments")}catch(e){Sn("Failed to refresh the list of interpreters")}})();this.refreshPromises.push(t),this.refreshPromises.push(t.then((()=>Q(1e3)))),await t}async getActiveInterpreter(e){if(!this.workspace.isTrusted)return;const t=new se;this.hookupOnDidChangeInterpreterEvent(),e||1!==this.workspace.workspaceFolders?.length||(e=this.workspace.workspaceFolders[0].uri),this.workspace.workspaceFolders?.length&&(e=this.workspace.getWorkspaceFolder(e)?.uri||this.workspace.workspaceFolders[0].uri);const n=this.workspace.getWorkspaceFolderIdentifier(e),i=this.getApi().then((async t=>{if(!t)return;const n=t.environments.getActiveEnvironmentPath(e);xn(`Active Environment Path for ${pn(e)} is ${JSON.stringify(n)}`);const i=await t.environments.resolveEnvironment(n);return xn(`Resolved Active Environment for ${pn(e)} is ${JSON.stringify(i)}`),this.trackResolvedEnvironment(i)}));return i.then((()=>{this.workspaceCachedActiveInterpreter.has(n)||(this.workspaceCachedActiveInterpreter.add(n),io(F.ActiveInterpreterListingPerf,{duration:t.elapsedTime},{firstTime:!0}))})).catch((e=>{Cn(`Failed to get active interpreter from Python for workspace ${n}`,e)})),(y||[Oe.ExtensionMode.Development,Oe.ExtensionMode.Test].includes(this.context.extensionMode))&&i.then((t=>{const n=`${pn(e)}'-${pn(t?.id)}`;this.lastLoggedResourceAndInterpreterId!==n&&(this.lastLoggedResourceAndInterpreterId=n,kn(`Active Interpreter ${e?`for '${pn(e)}' `:""}is ${pn(t?.id)} (${t?.envType}, '${t?.envName}', ${t?.version?.major}.${t?.version?.minor}.${t?.version?.patch})`))})).catch(ae),i}getInterpreterHash(e){return this.pythonEnvHashes.get(e)}async getInterpreterDetails(e,t){if(!this.workspace.isTrusted)throw new Error("Unable to determine active Interpreter as Workspace is not trusted");this.hookupOnDidChangeInterpreterEvent();try{return await this.getApi().then((async n=>{if(!n||t?.isCancellationRequested)return;const i=n.environments.known.find((t=>de(e)?Do(t.executable.uri,e):"string"==typeof e?t.id===e:Do(Oe.Uri.file(t.path),Oe.Uri.file(e.path)))),r=de(e)?pn(e):"string"==typeof e?e:pn(Oe.Uri.file(e.path));if(i){const e=await n.environments.resolveEnvironment(i),t=this.trackResolvedEnvironment(e);return xn(`Interpreter details for ${r} from Python is ${JSON.stringify(e)} and our mapping is ${JSON.stringify(t)}`),t}const o=r;if(this.loggedEnvsWithoutInterpreterPath.has(o)||(this.loggedEnvsWithoutInterpreterPath.add(o),Cn(`No interpreter with path ${r} found in Python API, will convert Uri path to string as Id ${r}`)),t?.isCancellationRequested)return;const s=await n.environments.resolveEnvironment(de(e)?e.fsPath:"string"==typeof e?e:e.path);return this.trackResolvedEnvironment(s)}))}catch(t){return void Cn(`Failed to get Python interpreter details from Python Extension API for ${"string"==typeof e?e:pn(de(e)?e:Oe.Uri.file(e.path))}`,t)}}trackResolvedEnvironment(e){if(e){const t=function(e,t){const n=e.tools,i=[["Conda",ko.Conda],["Pyenv",ko.Pyenv],["Pipenv",ko.Pipenv],["Poetry",ko.Poetry],["VirtualEnvWrapper",ko.VirtualEnvWrapper],["VirtualEnv",ko.VirtualEnv],["Venv",ko.Venv]];let r=n.length?n[0]:ko.Unknown;if("Conda"===e.environment?.type)r=ko.Conda;else{for(const[e,t]of i)if(n.includes(e)){r=t;break}r===ko.Unknown&&"VirtualEnvironment"===e.environment?.type&&(r=ko.VirtualEnv)}let o,s=!1,a=e.id,c=e.executable.sysPrefix;if(e.executable.uri)o=e.executable.uri;else{if(r!==ko.Conda||!t)return void Cn(`Python environment ${pn(e.id)} excluded as Uri is undefined`);s=!0,c=c||e.environment?.folderUri?.fsPath||"",o=ln()===cn.Windows?Oe.Uri.joinPath(e.environment?.folderUri||Oe.Uri.file(e.path),"python.exe"):Oe.Uri.joinPath(e.environment?.folderUri||Oe.Uri.file(e.path),"bin","python")}return{id:a,sysPrefix:c||"",envPath:e.environment?.folderUri,displayPath:e.environment?.folderUri||Oe.Uri.file(e.path),envName:e.environment?.name||"",uri:o,displayName:e.environment?.name||"",envType:r,isCondaEnvWithoutPython:s,version:e.version?{major:e.version.major,minor:e.version.minor,patch:e.version.micro,raw:e.version.sysVersion}:void 0}}(e,!!(this.apiProvider.pythonExtensionVersion&&this.apiProvider.pythonExtensionVersion.compare("2023.3.10341119")>=0));if(!t)return;if(Io(t).then((e=>{this.pythonEnvHashes.set(t.id,e)})).catch(ae),!this._interpreters.get(e.id)||!fe(t,this._interpreters.get(e.id)?.resolved)){const n=this._interpreters.get(e.id);n?.resolved&&Object.assign(n.resolved,t),this._interpreters.set(e.id,{resolved:t}),this.triggerEventIfAllowed("interpretersChangeEvent",t)}return t}}triggerEventIfAllowed(e,t){"interpreterChangeEvent"===e?this.pendingInterpreterChangeEventTriggers.set(t?.id||"",t):this.pendingInterpretersChangeEventTriggers.set(t?.id||"",t),this.pauseEnvDetection||this.triggerPendingEvents()}triggerPendingEvents(){this.pendingInterpreterChangeEventTriggers.forEach((e=>this.didChangeInterpreter.fire(e))),this.pendingInterpreterChangeEventTriggers.clear();const e=Array.from(this.pendingInterpretersChangeEventTriggers.values());if(e.length){const t=e.filter((e=>!!e));t.length!==e.length&&0===t.length?this.didChangeInterpreters.fire([]):this.didChangeInterpreters.fire(t)}this.pendingInterpretersChangeEventTriggers.clear()}async getApi(){if(this.extensionChecker.isPythonExtensionInstalled)return this.apiPromise||(this.apiPromise=this.apiProvider.getNewApi(),this.apiPromise.then((e=>e?this.api=e:void 0)).catch(ae)),this.apiPromise}onDidChangeWorkspaceFolders(){this.interpreterListCachePromise=void 0}populateCachedListOfInterpreters(e){e&&(this.interpreterListCachePromise=void 0);const t=this.getInterpreters().catch(ae);return this.refreshPromises.push(t),this.refreshPromises.push(t.then((()=>Q(1e3)))),t}async getInterpretersImpl(e,t=0){if(!this.workspace.isTrusted)return[];this.extensionChecker.isPythonExtensionInstalled&&(this.builtListOfInterpretersAtLeastOnce=!0);const n=[];let i=!1;return await this.getApi().then((async t=>{if(!t||e.isCancellationRequested)return[];let r=t.environments.known.length;try{await Promise.all(t.environments.known.map((async e=>{try{const i=await t.environments.resolveEnvironment(e),r=this.trackResolvedEnvironment(i);xn(`Python environment for ${e.id} is ${i?.id} from Python Extension API is ${JSON.stringify(i)} and original env is ${JSON.stringify(e)} and translated is ${JSON.stringify(r)}`),r?n.push(r):e.executable.uri&&e.environment?.type!==ko.Conda&&Sn(`Failed to get env details from Python API for ${pn(e.id)} without an error`)}catch(t){Sn(`Failed to get env details from Python API for ${pn(e.id)}`,t)}}))),this.triggerEventIfAllowed("interpretersChangeEvent",void 0)}catch(e){Sn("Failed to refresh list of interpreters and get their details",e)}r<t.environments.known.length&&(i=!0)})),e.isCancellationRequested?[]:i&&t<10?(En(`List of interpreters changed after a while, will need to rebuild it again, counter = ${t}`),this.getInterpretersImpl(e,t++)):(En(`Full interpreter list is length: ${n.length}, ${n.map((e=>`${e.id}:${e.displayName}:${e.envType}:${pn(e.uri)}`)).join(", ")}`),n)}buildListOfInterpretersForFirstTime(){this.builtListOfInterpretersAtLeastOnce||(this.extensionChecker.isPythonExtensionActive&&(this.builtListOfInterpretersAtLeastOnce=!0,this.populateCachedListOfInterpreters().catch(ae)),this.extensionChecker.onPythonExtensionInstallationStatusChanged((e=>{"installed"===e&&this.extensionChecker.isPythonExtensionActive&&this.populateCachedListOfInterpreters().catch(ae)}),this,this.disposables))}hookupOnDidChangeInterpreterEvent(){this.eventHandlerAdded||(this.buildListOfInterpretersForFirstTime(),this.getApi().then((e=>{!this.eventHandlerAdded&&e&&(this.eventHandlerAdded=!0,e.environments.onDidEnvironmentVariablesChange((e=>{En(`Detected changes to env file ${e.resource?.uri?.path} in PythonApi`),this._onDidEnvironmentVariablesChange.fire()}),this,this.disposables),e.environments.onDidChangeActiveEnvironmentPath((()=>{En("Detected change in Active Python environment via Python API"),this.interpreterListCachePromise=void 0,this.workspaceCachedActiveInterpreter.clear(),this.triggerEventIfAllowed("interpreterChangeEvent",void 0)}),this,this.disposables),e.environments.onDidChangeEnvironments((async e=>{En(`Python API env change detected, ${e.type} => '${e.env.id}'`),"remove"===e.type&&this._interpreters.delete(e.env.id);const t=!("update"!==e.type||!this._interpreters.get(e.env.id)?.resolved.isCondaEnvWithoutPython||!e.env.executable.uri);this.populateCachedListOfInterpreters(!0).finally((()=>{const n=this._interpreters.get(e.env.id);"remove"!==e.type||n?"update"===e.type&&n&&t&&!n.resolved.isCondaEnvWithoutPython&&(this.triggerEventIfAllowed("interpreterChangeEvent",n.resolved),this.triggerEventIfAllowed("interpretersChangeEvent",n.resolved)):(this.triggerEventIfAllowed("interpreterChangeEvent",void 0),this.triggerEventIfAllowed("interpretersChangeEvent",void 0),this._onDidRemoveInterpreter.fire({id:e.env.id}))})).catch(ae)}),this,this.disposables))})).catch(ae))}};Xo=Bo([Kn(),Ho(0,zn(Oo)),Ho(1,zn(Ao)),Ho(2,zn(Ri)),Ho(3,zn(Qn)),Ho(4,zn(Ui))],Xo);class Zo{constructor(e,t,n,i){this.specFile=t,this.interpreterPath=n,this.isRegisteredByVSC=i,this.name=e.name,this.argv=e.argv,this.language=e.language,this.executable=e.argv&&e.argv.length>0?e.argv[0]:"",this.display_name=e.display_name,this.metadata=e.metadata,this.env=e.env,this.interrupt_mode=e.interrupt_mode}}const es="{connection_file}",ts="-jvsc-",ns=/^python\d*.?\d*$/;async function is(e,t){return function(e,t,n){const i=t?{path:un(t.uri)}:{},r={name:e,language:"python",display_name:t?.displayName||"Python 3",metadata:{interpreter:i},argv:["python","-m","ipykernel_launcher","-f",es],env:{},resources:{}},o=n&&r.name?tn(n,r.name,"kernel.json"):void 0;return new Zo(r,o?un(o):void 0,un(t?.uri),"registeredByNewVersionOfExt")}(await ws(e),e,t)}function rs(e){const t=e?.kernelspec;return!(e?.language_info?.name&&e.language_info.name!==i||!t?.name?.includes(i)&&t?.language!==i&&e?.language_info?.name!==i)}function os(e){const t=e.metadata?.vscode?.originalSpecFile||e.metadata?.originalSpecFile,n=t?It(Pt(t)):e.name||"",i=e.metadata?.vscode?.originalDisplayName||e.display_name||"";return!(!n.toLowerCase().match(ns)&&"python 3 (ipykernel)"!==i.toLowerCase()&&"python 3"!==i.toLowerCase())}function ss(e){return"connectToLiveRemoteKernel"!==e.kind}function as(e){return"connectToLiveRemoteKernel"===e.kind}function cs(e,t,n){t=ms(e)?t:void 0;let i=e.name;const r=_s(e);if(r&&i.includes(bs)&&(i=i.substring(i.indexOf(bs)),"registeredByNewVersionOfExtForCustomKernelSpec"===r)){const t=e.metadata?.vscode?.originalSpecFile||e.metadata?.originalSpecFile;t&&(i=`${i}#${It(Pt(t))}`)}let o="";o=ms(e)?e.argv.slice(1).filter((e=>!["-f","{connection_file}"].includes(e))).join("#").toLowerCase():e.argv.join("#").toLowerCase();const s=n?`${n}.`:"",a=un(Ro(e.interpreterPath?Oe.Uri.file(e.interpreterPath):Oe.Uri.file(e.executable))),c=un(Ro(t?.uri))||"";return`${s}${e.id||""}.${i}.${a}.${c}.${o}`}function ls(e){const t=function(e){if(!e)return"";return["connectToLiveRemoteKernel"===e.kind?e.kernelModel.display_name:e.kernelSpec?.display_name,"connectToLiveRemoteKernel"===e.kind?e.kernelModel.name:e.kernelSpec?.name,"startUsingPythonInterpreter"===e.kind?e.interpreter.displayName:void 0,""].find((e=>"string"==typeof e&&e.length>0))||""}(e);if(!e)return t;switch(e.kind){case"connectToLiveRemoteKernel":{const n=function(e){if(e.includes(ts)){const t=/[a-f0-9]$/;if(-1!==e.substring(e.lastIndexOf(ts)+6).search(t)){const t=e.substring(0,e.lastIndexOf(ts));return t.toLowerCase().endsWith(".ipynb")?t:`${t}.ipynb`}}return e}(e.kernelModel?.notebook?.path||e.kernelModel?.model?.path||"");return n?`${t} (${n})`:t}case"startUsingRemoteKernelSpec":case"startUsingLocalKernelSpec":if(e.interpreter?.envType&&e.interpreter.envType!==ko.Unknown){const n=qo(e.interpreter);if(e.kernelSpec.language===i){const n=`Python ${Lr(e.interpreter.version?.raw||"")||""}`.trim();return e.interpreter.envName?`${t} (${n})`:t}return n?`${t} (${n})`:t}return t;case"startUsingPythonInterpreter":const n=(Lr(e.interpreter.version?.raw||"")||"").trim();if(e.interpreter.envType&&e.interpreter.envType!==ko.Unknown){if(e.kernelSpec.display_name&&"registeredByNewVersionOfExtForCustomKernelSpec"===_s(e.kernelSpec))return e.kernelSpec.display_name;const t=e.interpreter.envType===ko.Conda&&!0===e.interpreter.isCondaEnvWithoutPython,i=n.trim()?`Python ${n}`:"Python",r=qo(e.interpreter);return t&&r?r:r?`${r} (${i})`:i}return`Python ${n}`.trim()}return t}function ds(e,t=""){return e?"connectToLiveRemoteKernel"===e.kind?e.kernelModel.name:e.kernelSpec?.name:t}function us(e,t=""){if("connectToLiveRemoteKernel"===e?.kind){let t;if("string"==typeof e.kernelModel.lastActivityTime)try{t=new Date(e.kernelModel.lastActivityTime)}catch(e){En(`Error parsing date ${e}`)}else t=e.kernelModel.lastActivityTime;return gr.jupyterSelectLiveRemoteKernelDescription(t,e.kernelModel.numberOfConnections)}return t}function ps(e,t,n){if("connectToLiveRemoteKernel"===e?.kind)return;const r=function(e){if(!e)return;const t=as(e)?e.kernelModel:void 0,n=ss(e)?e.kernelSpec:void 0;if("startUsingPythonInterpreter"===e.kind||("startUsingRemoteKernelSpec"===e.kind||"startUsingLocalKernelSpec"===e.kind)&&e.kernelSpec.language===i){const t=n?.metadata?.interpreter?.path||n?.interpreterPath||n?.executable;return"/python"===t||"python"===t?e.interpreter?.displayPath:t?Oe.Uri.file(t):void 0}{const e=t?.executable||n?.executable||n?.metadata?.interpreter?.path||n?.interpreterPath;return e?Oe.Uri.file(e):void 0}}(e),o=t.workspaceFolders?t.workspaceFolders:[];return r?pn(r,o,n.homeDir):""}function hs(e){return"startUsingLocalKernelSpec"===e.kind||"startUsingPythonInterpreter"===e.kind&&e.kernelSpec&&"registeredByNewVersionOfExtForCustomKernelSpec"===_s(e.kernelSpec)}function fs(e){if(!e)return!1;if("startUsingPythonInterpreter"===e.kind)return!0;const t=as(e)?e.kernelModel:void 0,n=ss(e)?e.kernelSpec:void 0;return t?.language===i||ms(n)}function ms(e){return(e?.language||"").toLowerCase()===i}function gs(e){if(!e)return;if("startUsingPythonInterpreter"===e.kind)return i;const t=as(e)?e.kernelModel:void 0,n=ss(e)?e.kernelSpec:void 0;return t?.language||ys(n)}function vs(e){if(e)return ys(e.kernelspec)||e.language_info?.name}function ys(e){return e?.language}const bs="jvsc74a57bd0";async function ws(e){const t=(e?.sysVersion?Lr(e.sysVersion)||"3":"").replace(/\./g,"");return e?`${e?`python${t}`:""}${bs}${await Io(e)}`:"python3"}function _s(e){if(e.isRegisteredByVSC)return e.isRegisteredByVSC;if(!e.name)return;const t=e.metadata?.vscode?.originalSpecFile||e.metadata?.originalSpecFile,n=t?It(Pt(t)):e.name,i=os({...e,name:n})?Object.keys(e.env||{}).length>0:"string"==typeof t&&!t.includes(bs);return e.name.includes(bs)?i?"registeredByNewVersionOfExtForCustomKernelSpec":"registeredByNewVersionOfExt":e.metadata?.interpreter&&-1!==e.name.toLowerCase().search(/[a-f0-9]{32}$/)?"registeredByOldVersionOfExt":void 0}function Ss(e){if("connectToLiveRemoteKernel"===e.kind||"startUsingRemoteKernelSpec"===e.kind){const t=new(Po())(e.baseUrl);return"localhost"===t.hostname.toLocaleLowerCase()||"127.0.0.1"===t.hostname}return!1}async function Cs(e,t,n){En(`Executing silently Code (${e.status}) = ${Ee(t.substring(0,100)).join("\\n")}`);const i=__webpack_require__(98250),r=e.requestExecute({code:t.replace(/\r\n/g,"\n"),silent:!1,stop_on_error:!1,allow_stdin:!0,store_history:!1},!0),o=[];r.onIOPub=e=>{if(i.KernelMessage.isStreamMsg(e))if(xn(`Got io pub message (stream), ${Ee(e.content.text.substr(0,100)).join("\\n")}`),o.length>0&&"stream"===o[o.length-1].output_type&&o[o.length-1].name===e.content.name)o[o.length-1].text+=e.content.text;else{const t={name:e.content.name,text:e.content.text,output_type:"stream"};o.push(t)}else if(i.KernelMessage.isExecuteResultMsg(e)){xn("Got io pub message (execresult)}");const t={data:e.content.data,execution_count:e.content.execution_count,metadata:e.content.metadata,output_type:"execute_result"};o.push(t)}else if(i.KernelMessage.isDisplayDataMsg(e)){xn("Got io pub message (displaydata)}");const t={data:e.content.data,metadata:e.content.metadata,output_type:"display_data"};o.push(t)}else if(i.KernelMessage.isErrorMsg(e)){xn(`Got io pub message (error), ${e.content.ename},${e.content.evalue}, ${e.content.traceback.join().substring(0,100)}}`),n?.traceErrors&&Sn(`${n.traceErrorsMessage||"Failed to execute (silent) code against the kernel"}, \nCode = ${t}\nError details:  ${e.content.ename},${e.content.evalue}, ${e.content.traceback.join()}`);const i={ename:e.content.ename,evalue:e.content.evalue,traceback:e.content.traceback,output_type:"error"};o.push(i)}else xn(`Got io pub message (${e.header.msg_type})`)},await r.done;const s=Ee(t.substring(0,100)).join("\\n");return n&&function(e,t,n){e.filter((e=>"error"===e.output_type)).forEach((e=>{const i=e,r=`${i.ename}: ${i.evalue} \n ${i.traceback.map((e=>`    ${e}`)).join("\n")}`,o=`${t.traceErrorsMessage||""} ${n} ${r}`;t.traceErrors?Sn(o):Cn(o),t.telemetryName&&io(t.telemetryName)}))}(o,n,s),En(`Executing silently Code (completed) = ${s} with ${o.length} output(s)`),o}class ks{get isDisposed(){return!0===this.disposed}get jupyterlab(){return this._jupyterlab||(this._jupyterlab=__webpack_require__(98250)),this._jupyterlab}constructor(e){this.serverSettings=e,this.kernelSpecManager=new this.jupyterlab.KernelSpecManager({serverSettings:this.serverSettings}),this.kernelManager=new this.jupyterlab.KernelManager({serverSettings:this.serverSettings}),this.sessionManager=new this.jupyterlab.SessionManager({serverSettings:this.serverSettings,kernelManager:this.kernelManager}),this.contentsManager=new this.jupyterlab.ContentsManager({serverSettings:this.serverSettings})}static create(e){return new ks(e)}async dispose(){if(!this.disposed){this.disposed=!0,En("Disposing Jupyter Lab Helper");try{this.contentsManager&&(En("SessionManager - dispose contents manager"),this.contentsManager.dispose()),this.sessionManager&&!this.sessionManager.isDisposed&&(En("ShutdownSessionAndConnection - dispose session manager"),await Z(1e4,this.sessionManager.ready),this.sessionManager.dispose()),this.kernelManager?.isDisposed||this.kernelManager?.dispose(),this.kernelSpecManager?.isDisposed||this.kernelSpecManager?.dispose()}catch(e){Sn("Exception on Jupyter Lab Helper shutdown: ",e)}finally{En("Finished disposing Jupyter Lab Helper")}}}async getRunningSessions(){if(!this.sessionManager)return[];await Z(1e4,this.sessionManager.ready).catch(ae),await this.sessionManager.refreshRunning();const e=[],t=this.sessionManager.running();let n=t.next();for(;n;)e.push(n),n=t.next();return e}async getRunningKernels(){const e=await this.jupyterlab.KernelAPI.listRunning(this.serverSettings),t=new Set;return e.map((e=>{const t=e;return{id:e.id,name:e.name,lastActivityTime:t.last_activity?new Date(Date.parse(t.last_activity.toString())):new Date,numberOfConnections:t.connections?parseInt(t.connections.toString(),10):0}})).filter((e=>!t.has(e.id)&&(t.add(e.id),!0)))}async getKernelSpecs(){if(!this.serverSettings||!this.sessionManager||!this.contentsManager)throw new Ur;try{const e=new se,t=this.kernelSpecManager;if(!t)return Sn(`No SessionManager to enumerate kernelspecs (no specs manager). Returning a default kernel. Specs ${JSON.stringify(this.kernelSpecManager?.specs?.kernelspecs||{})}.`),io(F.JupyterKernelSpecEnumeration,void 0,{failed:!0,reason:"NoSpecsManager"}),[await is()];const n={wasSessionManagerReady:this.sessionManager.isReady,wasSpecsManagerReady:t.isReady,sessionManagerReady:this.sessionManager.isReady,specsManagerReady:t.isReady,waitedForChangeEvent:!1},i=(e={})=>t.specs&&Object.keys(t.specs.kernelspecs).length?t.specs.kernelspecs:e,r=i();await Z(1e4,this.sessionManager.ready),n.sessionManagerReady=this.sessionManager.isReady,await Z(1e4,t.refreshSpecs()),n.specsManagerReady=t.isReady;let o=!1;if(t&&0===Object.keys(t.specs?.kernelspecs||{}).length){const e=[],i=ie(),r=i.resolve.bind(i);t.specsChanged.connect(r),e.push(new Oe.Disposable((()=>t.specsChanged.disconnect(r))));const s=Promise.all([i.promise,t.ready,t.refreshSpecs(),this.sessionManager.ready]);await Z(1e4,s),n.waitedForChangeEvent=!0,i.completed||(o=!0,io(F.JupyterKernelSpecEnumeration,void 0,{failed:!0,sessionManagerReady:this.sessionManager.isReady,specsManagerReady:t.isReady,reason:t.isReady?this.sessionManager.isReady?"SpecsDidNotChangeInTime":"SessionManagerIsNotReady":"SpecManagerIsNotReady"})),Ie(e)}const s=i(r);if(Object.keys(s||{}).length){const t=[];return Object.entries(s).forEach((([e,n])=>{n&&t.push(new Zo(n))})),io(F.JupyterKernelSpecEnumeration,{duration:e.elapsedTime},n),t}return Sn(`Jupyter Lab Helper cannot enumerate kernelspecs. Returning a default kernel. Specs ${JSON.stringify(s)}.`),o||io(F.JupyterKernelSpecEnumeration,void 0,{failed:!0,reason:"NoSpecsEventAfterRefresh"}),[await is()]}catch(e){return Sn("Jupyter Lab Helper:getKernelSpecs failure: ",e),[]}}}var Es=function(e,t){return function(n,i){t(n,i,e)}};let xs=class{constructor(e,t,n,i,r,o){this.jupyterPickerRegistration=e,this.applicationShell=t,this.configService=n,this.errorHandler=i,this.requestAgentCreator=r,this.requestCreator=o}async createConnectionInfo(e){return uo(e,await this.getJupyterServerUri(e),this.requestCreator,this.requestAgentCreator,this.configService,!1,Oe.Uri.file(""))}async validateRemoteUri(e,t,n){let i;const r=uo(e,t=t||await this.getJupyterServerUri(e),this.requestCreator,this.requestAgentCreator,this.configService,!1,Oe.Uri.file(""));try{i=ks.create(r.settings),await Promise.all([i.getRunningKernels(),i.getKernelSpecs()])}catch(i){if(vo.isSelfCertsError(i)){if(!await co(this.applicationShell,this.configService,i.message))throw i}else{if(!yo.isSelfCertsExpiredError(i))throw t&&!n?(await this.errorHandler.handleError(new So(t.baseUrl,e,i)),i):i;if(!await lo(this.applicationShell,this.configService,i.message))throw i}}finally{r.dispose(),i&&i.dispose().catch(ae)}}async getJupyterServerUri(e){try{return await this.jupyterPickerRegistration.getJupyterServerUri(e)}catch(t){if(t instanceof Xi)throw t;throw new tr(e,t)}}};xs=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Es(0,zn(gi)),Es(1,zn(Jn)),Es(2,zn(ji)),Es(3,zn(bo)),Es(4,zn(wi)),Es(4,Qi()),Es(5,zn(_i))],xs);var Ts=function(e,t){return function(n,i){t(n,i,e)}};let Ps=class{constructor(e,t,n,i,r){this.serverUriStorage=e,this.jupyterConnection=t,this.workspaceService=n,this.disposableRegistry=i,this.serverProviderRegistry=r}async addJupyterServer(e){try{await this.jupyterConnection.validateRemoteUri(e)}catch(t){return void Sn(`Error in validating the Remote Uri ${e.id}.${e.handle}`,t)}(e.extensionId!==p||e.id!==t)&&([p].includes(e.extensionId)||this.serverProviderRegistry.jupyterCollections.some((t=>t.extensionId===e.extensionId)))||await this.serverUriStorage.add(e)}};var Is,Ds,Rs,Os,As,Ns,Ms;Ps=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Ts(0,zn(vi)),Ts(1,zn(xs)),Ts(2,zn(Qn)),Ts(3,zn(Ri)),Ts(4,zn(Ei))],Ps),function(e){e.FinishCell="finish_cell",e.RestartKernel="restart_kernel",e.SettingsUpdated="settings_updated",e.Started="started",e.ConvertUriForUseInWebViewRequest="ConvertUriForUseInWebViewRequest",e.ConvertUriForUseInWebViewResponse="ConvertUriForUseInWebViewResponse",e.Activate="activate",e.ShowDataViewer="show_data_explorer",e.GetVariablesRequest="get_variables_request",e.GetVariablesResponse="get_variables_response",e.VariableExplorerToggle="variable_explorer_toggle",e.SetVariableExplorerHeight="set_variable_explorer_height",e.VariableExplorerHeightResponse="variable_explorer_height_response",e.ForceVariableRefresh="force_variable_refresh",e.UpdateVariableViewExecutionCount="update_variable_view_execution_count",e.OpenLink="open_link",e.SavePng="save_png",e.VariablesComplete="variables_complete",e.IPyWidgetLoadSuccess="ipywidget_load_success",e.IPyWidgetLoadFailure="ipywidget_load_failure",e.IPyWidgetRenderFailure="ipywidget_render_failure",e.IPyWidgetUnhandledKernelMessage="ipywidget_unhandled_kernel_message",e.IPyWidgetWidgetVersionNotSupported="ipywidget_widget_version_not_supported",e.GetHTMLByIdRequest="get_html_by_id_request",e.GetHTMLByIdResponse="get_html_by_id_response"}(Is||(Is={})),function(e){e.IPyWidgets_logMessage="IPyWidgets_logMessage",e.IPyWidgets_IsReadyRequest="IPyWidgets_IsReadyRequest",e.IPyWidgets_AttemptToDownloadFailedWidgetsAgain="IPyWidgets_AttemptToDownloadFailedWidgetsAgain",e.IPyWidgets_IsOnline="IPyWidgets_IsOnline",e.IPyWidgets_Ready="IPyWidgets_Ready",e.IPyWidgets_Request_Widget_Version="IPyWidgets_Request_Widget_Version",e.IPyWidgets_Reply_Widget_Version="IPyWidgets_Reply_Widget_Version",e.IPyWidgets_onRestartKernel="IPyWidgets_onRestartKernel",e.IPyWidgets_onKernelChanged="IPyWidgets_onKernelChanged",e.IPyWidgets_WidgetScriptSourceRequest="IPyWidgets_WidgetScriptSourceRequest",e.IPyWidgets_WidgetScriptSourceResponse="IPyWidgets_WidgetScriptSource_Response",e.IPyWidgets_BaseUrlResponse="IPyWidgets_BaseUrl_Response",e.IPyWidgets_msg="IPyWidgets_msg",e.IPyWidgets_binary_msg="IPyWidgets_binary_msg",e.IPyWidgets_msg_received="IPyWidgets_msg_received",e.IPyWidgets_iopub_msg_handled="IPyWidgets_iopub_msg_handled",e.IPyWidgets_kernelOptions="IPyWidgets_kernelOptions",e.IPyWidgets_registerCommTarget="IPyWidgets_registerCommTarget",e.IPyWidgets_RegisterMessageHook="IPyWidgets_RegisterMessageHook",e.IPyWidgets_ExtensionOperationHandled="IPyWidgets_ExtensionOperationHandled",e.IPyWidgets_RemoveMessageHook="IPyWidgets_RemoveMessageHook",e.IPyWidgets_MessageHookCall="IPyWidgets_MessageHookCall",e.IPyWidgets_MessageHookResult="IPyWidgets_MessageHookResult",e.IPyWidgets_mirror_execute="IPyWidgets_mirror_execute"}(Ds||(Ds={})),function(e){e[e.Start=0]="Start",e[e.Restart=1]="Restart"}(Rs||(Rs={})),function(e){e.UpdateSettings="update_settings",e.Started="started",e.LocInit="loc_init"}(Os||(Os={})),Ds.IPyWidgets_kernelOptions,Ds.IPyWidgets_WidgetScriptSourceRequest,Ds.IPyWidgets_WidgetScriptSourceResponse,Ds.IPyWidgets_Ready,Ds.IPyWidgets_IsOnline,Ds.IPyWidgets_logMessage,Ds.IPyWidgets_onRestartKernel,Ds.IPyWidgets_onKernelChanged,Ds.IPyWidgets_registerCommTarget,Ds.IPyWidgets_binary_msg,Ds.IPyWidgets_msg,Ds.IPyWidgets_msg_received,Ds.IPyWidgets_iopub_msg_handled,Ds.IPyWidgets_RegisterMessageHook,Ds.IPyWidgets_ExtensionOperationHandled,Ds.IPyWidgets_RemoveMessageHook,Ds.IPyWidgets_MessageHookCall,Ds.IPyWidgets_MessageHookResult,Ds.IPyWidgets_mirror_execute,Is.ForceVariableRefresh,Is.UpdateVariableViewExecutionCount,Is.FinishCell,Is.RestartKernel,Is.SettingsUpdated,Is.Started,Is.Activate,Is.ShowDataViewer,Is.GetVariablesRequest,Is.GetVariablesResponse,Is.VariableExplorerToggle,Is.SetVariableExplorerHeight,Is.VariableExplorerHeightResponse,Is.OpenLink,Is.SavePng,Is.VariablesComplete,Os.UpdateSettings,Os.LocInit,Is.IPyWidgetLoadSuccess,Is.IPyWidgetLoadFailure,Is.IPyWidgetWidgetVersionNotSupported,Is.ConvertUriForUseInWebViewRequest,Is.ConvertUriForUseInWebViewResponse,Is.IPyWidgetRenderFailure,Is.IPyWidgetUnhandledKernelMessage,Is.GetHTMLByIdRequest,Is.GetHTMLByIdResponse,function(e){e.Fetching="fetching",e.Skipped="skipped"}(As||(As={})),function(e){e.Started=Os.Started,e.UpdateSettings=Os.UpdateSettings,e.InitializeData="init",e.GetAllRowsRequest="get_all_rows_request",e.GetAllRowsResponse="get_all_rows_response",e.GetRowsRequest="get_rows_request",e.GetRowsResponse="get_rows_response",e.CompletedData="complete",e.GetSliceRequest="get_slice_request",e.RefreshDataViewer="refresh_data_viewer",e.SliceEnablementStateChanged="slice_enablement_state_changed"}(Ns||(Ns={})),function(e){e.String="string",e.Number="number",e.Bool="bool"}(Ms||(Ms={}));const Ls=Symbol("IDataViewerFactory"),js=Symbol("IDataViewer"),Fs=Symbol("IJupyterVariableDataProvider"),Us=Symbol("IJupyterVariableDataProviderFactory"),qs=Symbol("IDataViewerDependencyService"),Ks=Symbol("IControllerRegistration");var Vs;!function(e){e[e.NoMatch=0]="NoMatch",e[e.OnlyKernel=1]="OnlyKernel",e[e.WasPreferredInterpreter=2]="WasPreferredInterpreter",e[e.IsExactMatch=4]="IsExactMatch",e[e.IsNonPythonKernelLanguageMatch=8]="IsNonPythonKernelLanguageMatch"}(Vs||(Vs={}));const Ws=Symbol("IRemoteNotebookKernelSourceSelector"),$s=Symbol("ILocalNotebookKernelSourceSelector"),Bs=Symbol("ILocalPythonNotebookKernelSourceSelector"),Hs=Symbol("IConnectionDisplayData");var zs;async function Js(e){if(!pe()&&e.interpreter?.uri){const t=e.interpreter.uri.fsPath,n=Ro(e.interpreter.uri).fsPath;return jr(e.id.replace(t,n))}return jr(e.id)}!function(e){e.Idle="Idle",e.Success="Success",e.Error="Error"}(zs||(zs={}));class Gs{static fromJSON(e){const t=Object.assign(e,{});switch(t.interpreter&&(t.interpreter=zo(t.interpreter,"")),e.kind){case"startUsingLocalKernelSpec":return Qs.create(t);case"connectToLiveRemoteKernel":return Ys.create(t);case"startUsingRemoteKernelSpec":return Xs.create(t);case"startUsingPythonInterpreter":return Zs.create(t);default:throw new Error(`Invalid object to be deserialized into a connection, kind = ${t.kind}`)}}}class Ys{constructor(e){this.kind="connectToLiveRemoteKernel",this.kernelModel=e.kernelModel,this.interpreter=e.interpreter,this.baseUrl=e.baseUrl,this.id=e.id,this.serverProviderHandle=e.serverProviderHandle,ha(this)}static create(e){return new Ys(e)}updateModel(e){Object.assign(this.kernelModel,e)}getHashId(){return Js(this)}toJSON(){return{id:this.id,kind:this.kind,baseUrl:this.baseUrl,interpreter:Go(this.interpreter),kernelModel:this.kernelModel,serverProviderHandle:this.serverProviderHandle}}static fromJSON(e){return Gs.fromJSON(e)}}class Qs{constructor(e){this.kind="startUsingLocalKernelSpec",this.kernelSpec=e.kernelSpec,this.interpreter=e.interpreter,this.id=e.id,ha(this)}static create(e){return new Qs(e)}getHashId(){return Js(this)}toJSON(){return{id:this.id,kernelSpec:this.kernelSpec,interpreter:Go(this.interpreter),kind:this.kind}}static fromJSON(e){return Gs.fromJSON(e)}}class Xs{constructor(e){this.kind="startUsingRemoteKernelSpec",this.interpreter=e.interpreter,this.kernelSpec=e.kernelSpec,this.baseUrl=e.baseUrl,this.id=e.id,this.serverProviderHandle=e.serverProviderHandle,ha(this)}static create(e){return new Xs(e)}getHashId(){return Js(this)}toJSON(){return{id:this.id,kernelSpec:this.kernelSpec,interpreter:Go(this.interpreter),baseUrl:this.baseUrl,kind:this.kind,serverProviderHandle:this.serverProviderHandle}}static fromJSON(e){return Gs.fromJSON(e)}}class Zs{constructor(e){this.kind="startUsingPythonInterpreter",this.kernelSpec=e.kernelSpec,this.interpreter=e.interpreter,this.id=e.id,ha(this)}static create(e){return new Zs(e)}getHashId(){return Js(this)}toJSON(){return{id:this.id,kernelSpec:this.kernelSpec,interpreter:Go(this.interpreter),kind:this.kind}}updateInterpreter(e){Object.assign(this.interpreter,e)}static fromJSON(e){return Gs.fromJSON(e)}}function ea(e){return"startUsingLocalKernelSpec"===e.kind||"startUsingPythonInterpreter"===e.kind}function ta(e){return!ea(e)}const na=Symbol("IKernelProvider"),ia=Symbol("IThirdPartyKernelProvider");var ra;!function(e){e.Success="success",e.TimedOut="timeout",e.Restarted="restart"}(ra||(ra={}));const oa=Symbol("IJupyterServerConnector"),sa=Symbol("IKernelSessionFactory");var aa;!function(e){e[e.ok=0]="ok",e[e.cancel=1]="cancel",e[e.failed=2]="failed",e[e.selectDifferentKernel=3]="selectDifferentKernel",e[e.uiHidden=4]="uiHidden"}(aa||(aa={}));const ca=Symbol("IKernelDependencyService"),la=Symbol("IKernelFinder"),da=Symbol("ITracebackFormatter"),ua=Symbol("IStartupCodeProviders"),pa=new Set;function ha(e){if(pa.has(e.id))return;pa.add(e.id);const t="kernelSpec"in e?e.kernelSpec:void 0,n=t?.language||("startUsingPythonInterpreter"===e.kind?i:void 0);let r="",o="";const s="interpreter"in e?e.interpreter:void 0;let a;t&&Array.isArray(t.argv)&&t.argv.length>0&&(r=t.argv[0],a=r.toLowerCase()===s?.uri?.fsPath?.toLowerCase(),It(r)!==r&&(r=`<P>${It(r)}`),o=t.argv.map((e=>e.includes("/")||e.includes("\\")?`<P>${It(e)}`:e)).join("<#>"));const c="kernelSpec"in e&&e.kernelSpec.specFile?jr(e.kernelSpec.specFile):Promise.resolve(""),l=jr(e.id),d=ta(e)?jr(fo(e.serverProviderHandle)):Promise.resolve(""),u=ta(e)?e.serverProviderHandle.extensionId:p,h=ta(e)?jr(e.baseUrl.toLowerCase()):Promise.resolve("");Promise.all([c,l,d,h]).then((([t,i,c,l])=>io(F.KernelSpec,void 0,{kernelId:i,serverIdHash:c,kernelSpecHash:t,baseUrlHash:l,providerExtensionId:u,kernelConnectionType:e.kind,kernelLanguage:n,envType:s?.envType,isArgv0SameAsInterpreter:a,argv0:r,argv:o}))).catch(ae)}const fa=Symbol("IExportedKernelServiceFactory");function ma(e,t){e.determineExtensionFromCallStack().then((e=>{io(F.JupyterApiUsage,void 0,{clientExtId:e.extensionId,pemUsed:t})})).catch(ae)}function ga(e,t,n,i){let r=!1;const o=n.get(qi),s={ready:e.catch((e=>(Sn("Failure during activation.",e),Promise.reject(e)))),registerPythonApi:e=>{r||(r=!0,n.get(Oo).setApi(e))},async showDataViewer(e,t){ma(o,"showDataViewer");const i=n.get(Ls);await i.create(e,t)},registerRemoteServerProvider(e){ma(o,"registerRemoteServerProvider");const t=n.get(gi);let i=ae;return(async()=>{const r=n.get(qi),o=e.id.startsWith("_builtin")?p:(await r.determineExtensionFromCallStack()).extensionId,s=t.registerProvider(e,o);i=()=>s.dispose()})().catch(ae),{dispose:()=>{i()}}},getKernelService:async()=>(ma(o,"getKernelService"),n.get(fa).getService()),getSuggestedController:async(e,t,n)=>{Sn("The API getSuggestedController is being deprecated."),i.extensionMode!==Oe.ExtensionMode.Development&&i.extensionMode!==Oe.ExtensionMode.Test?ma(o,"getSuggestedController"):Oe.window.showErrorMessage("The Jupyter API getSuggestedController is being deprecated.").then(ae,ae)},addRemoteJupyterServer:async(e,t)=>{ma(o,"addRemoteJupyterServer"),await new Promise((async i=>{const r=n.get(Ps),s=n.get(Ks),a=function(e,t){return new Promise((n=>{t.onDidChange((t=>{for(let i of t.added)ta(i.connection)&&i.connection.serverProviderHandle.id===e.id&&i.connection.serverProviderHandle.handle===e.handle&&n()}))}))}({id:e,handle:t},s),c=(await o.determineExtensionFromCallStack()).extensionId;await r.addJupyterServer({id:e,handle:t,extensionId:c}),await a,i()}))},openNotebook:async(e,t)=>{ma(o,"openNotebook");const i=n.get(Ks),r=i.all.find((e=>e.id===t))?.id;if(!r)throw new Error(`Kernel ${t} not found.`);const s=Oe.window.activeNotebookEditor?.notebook?.uri?.toString()===e.toString()?Oe.window.activeNotebookEditor:await Oe.window.showNotebookDocument(await Oe.workspace.openNotebookDocument(e));return await Oe.commands.executeCommand("notebook.selectKernel",{notebookEditor:s,id:r,extension:p}),s.notebook},createJupyterServerCollection:(e,t,i)=>{let r,s;t=Re(t);let a,c=!1;const l={dispose:()=>{c=!0,a?.dispose()},get id(){return e},set label(e){t=Re(e),t=e,a&&(a.label=e)},get label(){return t},set documentation(e){r=e,a&&(a.documentation=e)},get documentation(){return r},set commandProvider(e){s=e,a&&(a.commandProvider=e)},get commandProvider(){return s}};let d="";return(async()=>{ma(o,"createJupyterServerCollection"),d=(await o.determineExtensionFromCallStack()).extensionId;const l=n.get(Ei);a=l.createJupyterServerCollection(d,e,t,i),a.label=t,a.documentation=r,a.commandProvider=s,c&&a.dispose()})().catch((n=>Sn(`Failed to create Jupyter Server Collection for ${e}:${t} & extension ${d}`,n))),l}};return(w()||i.extensionMode===Oe.ExtensionMode.Development||i.extensionMode===Oe.ExtensionMode.Test)&&(s.serviceContainer=n,s.serviceManager=t),s}const va=Symbol("IServiceManager"),ya=Symbol("IServiceContainer");async function ba(e,t){const n=e.get(Qn),i=n.hasWorkspaceFolders?n.workspaceFolders.length:0;t.workspaceFolderCount=i}const wa=Symbol("IExtensionActivationManager"),_a=Symbol("IExtensionSyncActivationService"),Sa=Symbol("IEnvironmentVariablesService"),Ca=Symbol("ICustomEnvironmentVariablesProvider"),ka=Symbol("IInterpreterService");function Ea(e,t=!1){return!("object"!=typeof e||!e)&&(e instanceof Oe.CancellationError||!(!t||!e.message.includes("Canceled")&&!e.message.includes(lr.canceled)))}async function xa(e,t,...n){let i;return te(t)?(n.push(t),i=void 0):i=t,e?e.isCancellationRequested?i:new Promise(((t,r)=>{if(e.isCancellationRequested)return t(i);const o=e.onCancellationRequested((()=>{o.dispose(),t(i)}));Promise.race(n).then(t,r).finally((()=>o.dispose()))})):await Promise.race(n)}async function Ta(e,...t){if(!e)return Promise.race(t);if(e.isCancellationRequested)throw new Oe.CancellationError;return new Promise(((n,i)=>{if(e.isCancellationRequested)return i(new Oe.CancellationError);const r=e.onCancellationRequested((()=>{r.dispose(),i(new Oe.CancellationError)}));Promise.race(t).then(n,i).finally((()=>r.dispose()))}))}function Pa(...e){const t=new Oe.CancellationTokenSource,n=[];for(const i of e)i&&(i.isCancellationRequested&&t.cancel(),i.onCancellationRequested((()=>t.cancel()),void 0,n));const i=t.dispose.bind(t);return t.dispose=()=>{i(),Ie(n)},t}var Ia,Da;!function(e){e.throwIfCanceled=function(e){if(e?.isCancellationRequested)throw new Oe.CancellationError}}(Ia||(Ia={})),function(e){e.KernelsGetKernelForRemoteConnection="KernelsGetKernelForRemoteConnection",e.KernelsRegisterKernel="KernelsRegisterKernel",e.KernelsGetKernelSpecs="KernelsGetKernelSpecs",e.NotebookStart="NotebookStart",e.NotebookConnect="NotebookConnect",e.JupyterSessionWaitForIdleSession="JupyterSessionWaitForIdleSession",e.InstallingMissingDependencies="InstallingMissingDependencies",e.ExportNotebookToPython="ExportNotebookToPython",e.PerformingExport="PerformingExport"}(Da||(Da={}));const Ra={[Da.JupyterSessionWaitForIdleSession]:gr.waitingForJupyterSessionToBeIdle,[Da.KernelsGetKernelForRemoteConnection]:gr.gettingListOfKernelsForRemoteConnection,[Da.KernelsGetKernelSpecs]:gr.gettingListOfKernelSpecs,[Da.KernelsRegisterKernel]:gr.registeringKernel,[Da.NotebookConnect]:gr.connectingToJupyter,[Da.NotebookStart]:gr.startingJupyterNotebook,[Da.InstallingMissingDependencies]:gr.installingMissingDependencies,[Da.ExportNotebookToPython]:gr.exportNotebookToPython,[Da.PerformingExport]:gr.performingExport};function Oa(e){return Ra[e]}var Aa;let Na=Aa=class{constructor(e){this.kernelResourceProgressReporter=new Map,e.push(this),Aa.instance=this}activate(){}dispose(){Ie(Array.from(Aa.disposables))}static createProgressReporter(e,t,n){if(!Aa.instance)return new Oe.Disposable(ae);const i=e?Qt(e):"";return Aa.instance.kernelResourceProgressReporter.has(i)?Aa.reportProgress(e,t):Aa.createProgressReporterInternal(i,t,n)}static wrapAndReportProgress(e,t,n){const i=e?Qt(e):"";if(!Aa.instance)return n();const r=Aa.reportProgressInternal(i,t);return n().finally((()=>r?.dispose()))}static reportProgress(e,t){const n=Oa(t)||t,i=e?Qt(e):"";return n?Aa.reportProgressInternal(i,n||""):new Oe.Disposable((()=>ae))}static reportProgressInternal(e,t){if(!Aa.instance)return new Oe.Disposable(ae);let n=Aa.instance.kernelResourceProgressReporter.get(e);if(n||(n={title:t,pendingProgress:[],progressList:[],dispose:ae},Aa.instance.kernelResourceProgressReporter.set(e,n)),n.reporter)n.progressList.push(t),n.reporter.report({message:t});else{if(n.progressList.includes(t))return new Oe.Disposable(ae);n.pendingProgress.push(t)}return{dispose:()=>{try{if(!n)return;const i=n.progressList.findIndex((e=>e===t));if(i>=0&&n.progressList.splice(i),n.progressList.length>0){const e=n.progressList[n.progressList.length-1];n.reporter&&n.reporter.report({message:e===n.title&&n.reporter?"":e})}else Aa.instance.kernelResourceProgressReporter.delete(e),n.dispose()}catch(t){Sn(`Failed to dispose Progress reporter for ${e}`,t)}}}}static createProgressReporterInternal(e,t,n){const i=ie(),r=new Oe.Disposable((()=>i.resolve())),o=Aa.instance.kernelResourceProgressReporter.get(e)||{title:t,pendingProgress:[],progressList:[],tokenSources:[],dispose:()=>{r.dispose()}};let s=!1;const a=()=>{s||(s=!0,Oe.window.withProgress({location:Oe.ProgressLocation.Notification,title:t},(async(n,o)=>{const s=Aa.instance.kernelResourceProgressReporter.get(e);if(s){for(s.reporter=n;s.pendingProgress.length>0;){const e=s.pendingProgress.shift();e===t?s.progressList.push(e):e!==t&&e&&(s.progressList.push(e),n.report({message:e}))}await xa(o,i.promise),Aa.instance.kernelResourceProgressReporter.get(e)===s&&Aa.instance.kernelResourceProgressReporter.delete(e),Aa.disposables.delete(r)}})).then(ae,ae))};return Aa.instance.kernelResourceProgressReporter.set(e,{...o,dispose:()=>r.dispose(),show:a}),Aa.disposables.add(r),o.pendingProgress.push(t),n||a(),{dispose:()=>r.dispose(),show:a}}};Na.disposables=new Set,Na=Aa=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(Ri))],Na);const Ma=Symbol("IPlatformService"),La=Symbol("IFileSystem");var ja;class Fa{constructor(e,t){this.Uri=e,this.value=t}}class Ua{constructor(e,t){this[ja]="ResourceMap",e instanceof Ua?(this.map=new Map(e.map),this.toKey=t??Ua.defaultToKey):(this.map=new Map,this.toKey=e??Ua.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new Fa(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){void 0!==t&&(e=e.bind(t));for(let[t,n]of this.map)e(n.value,n.Uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.Uri}*entries(){for(let e of this.map.values())yield[e.Uri,e.value]}*[(ja=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.Uri,e.value]}}Ua.defaultToKey=e=>e.toString(),Symbol("IBufferDecoder");const qa=Symbol("IProcessServiceFactory");class Ka extends Xi{constructor(e){super("unknown",e)}}var Va=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Wa=function(e,t){return function(n,i){t(n,i,e)}};let $a=class{constructor(e,t,n){this.processFactory=e,this.platform=t,this.fs=n,this.userSitePaths=new Ua}async getExecutablesPath(e){const t=e.executable.uri;if(Vo(e)===ko.Unknown&&t){if(!this.userSitePaths.has(t)){const e=this.getUserSitePathImpl(t);e.catch((()=>{this.userSitePaths.get(t)===e&&this.userSitePaths.delete(t)})),this.userSitePaths.set(t,e)}return this.userSitePaths.get(t)}}async getUserSitePathImpl(e){const t=await this.processFactory.create(void 0),n="USER_BASE_VALUE",i=this.platform.isWindows?"USER_SITE":"USER_BASE",{stdout:r}=await t.exec(e.fsPath,["-c",`import site;print("${n}");print(site.${i});print("${n}");`]);if(r.includes(n)){const t=r.substring(r.indexOf(n)+15,r.lastIndexOf(n)).trim(),i=Oe.Uri.file(t);let o;if(o=this.platform.isWindows?Oe.Uri.joinPath(en(i),"Scripts"):Oe.Uri.joinPath(i,"bin"),!o||!this.fs.exists(o))throw new Error(`USER_SITE ${o.fsPath} dir does not exist for the interpreter ${pn(e)}`);return En(`USER_SITE for ${pn(e)} is ${o.fsPath}`),o}throw new Error(`USER_SITE not found for the interpreter ${pn(e)}. Stdout: ${r}`)}};Va([ye()],$a.prototype,"getExecutablesPath",null),$a=Va([Kn(),Wa(0,zn(qa)),Wa(1,zn(Ma)),Wa(2,zn(La))],$a);var Ba=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Ha=function(e,t){return function(n,i){t(n,i,e)}};let za=class{constructor(e,t,n,i,r,o,s){this.workspace=e,this.interpreterService=t,this.customEnvVarsService=n,this.apiProvider=i,this.extensionChecker=r,this.envVarsService=o,this.globalExecPaths=s,this.disposables=[],this.activatedEnvVariablesCache=new Map,this.cachedEnvVariables=new Map,this.customEnvVarsService.onDidEnvironmentVariablesChange(this.clearCache,this,this.disposables),this.interpreterService.onDidChangeInterpreter(this.clearCache,this,this.disposables),this.interpreterService.onDidEnvironmentVariablesChange(this.clearCache,this,this.disposables)}clearCache(){this.activatedEnvVariablesCache.clear()}dispose(){this.disposables.forEach((e=>e.dispose()))}async getActivatedEnvironmentVariables(e,t,n){const i=this.interpreterService.known.find((e=>e.id===t.id))||await this.interpreterService.resolveEnvironment(t.id);if(!i)return;const r=gr.activatingPythonEnvironment(Uo(i));return Na.wrapAndReportProgress(e,r,(async()=>this.getActivatedEnvironmentVariablesImplWithCaching(e,await this.interpreterService.resolveEnvironment(i)||i,n)))}async getActivatedEnvironmentVariablesImplWithCaching(e,t,n){const i=`${e?.toString()||""}${t.id}`,r=this.activatedEnvVariablesCache.get(i);if(r&&r.time.elapsedTime>=6e4&&this.activatedEnvVariablesCache.delete(i),!this.activatedEnvVariablesCache.has(i)){const r=this.getActivatedEnvironmentVariablesImpl(e,t,n);r.catch(ae),this.activatedEnvVariablesCache.set(i,{promise:r,time:new se})}const o=this.activatedEnvVariablesCache.get(i).promise;return n?o:xa(n,o)}async getActivatedEnvironmentVariablesImpl(e,t,n){if(!this.extensionChecker.isPythonExtensionInstalled)return;const i=new se;return this.getActivatedEnvironmentVariablesFromPython(e,t,n).then((e=>{if(!n?.isCancellationRequested)return e})).catch((e=>{Sn(`Failed to get env vars with python ${pn(t.id)} in ${i.elapsedTime}ms`,e)}))}async getActivatedEnvironmentVariablesFromPython(e,t,n){const i=`${e?.toString()||""}${t.id||""}`,r=this.cachedEnvVariables.get(i);if(r&&r.lastRequestedTime.elapsedTime>6e4&&this.cachedEnvVariables.delete(i),!this.cachedEnvVariables.has(i)){const r=this.getActivatedEnvironmentVariablesFromPythonImpl(e,t,n);this.cachedEnvVariables.set(i,{promise:r,lastRequestedTime:new se})}return xa(n,this.cachedEnvVariables.get(i).promise)}async getActivatedEnvironmentVariablesFromPythonImpl(e,t,n){e=e||(this.workspace.workspaceFolders?.length?this.workspace.workspaceFolders[0].uri:void 0);const i=new se,r=this.customEnvVarsService.getEnvironmentVariables(e,"RunPythonCode").catch((()=>{}));let o="emptyVariables",s=await this.apiProvider.getApi().then((n=>n.getActivatedEnvironmentVariables(e,Go(Jo(t,!0)),!1).catch((e=>{Sn(`Failed to get activated env variables from Python Extension for ${pn(t.path)}`,e),o="failedToGetActivatedEnvVariablesFromPython"}))));if(n?.isCancellationRequested)return;const a=Vo(t);if(io(F.GetActivatedEnvironmentVariables,{duration:i.elapsedTime},{envType:a,source:"python",failed:0===Object.keys(s||{}).length,reason:o},void 0),s?En(`Got env vars with python ${pn(t.path)}, with env var count ${Object.keys(s||{}).length} in ${i.elapsedTime}ms. \n    PATH value is ${s.PATH} and \n    Path value is ${s.Path}`):a===ko.Conda?Sn(`Failed to get activated conda env vars for ${pn(t.path)}\n                 in ${i.elapsedTime}ms`):Cn(`Failed to get activated env vars for ${pn(t.path)} in ${i.elapsedTime}ms`),!s){const e=await r;if(s={},Vo(t)===ko.Conda){const e=this.interpreterService.known.find((e=>e.id===t.id))?.executable.sysPrefix||(await this.interpreterService.resolveEnvironment(t))?.executable.sysPrefix;e?s.CONDA_PREFIX=e:Cn(`Failed to get the SysPrefix for the Conda Environment ${pn(t.path)}}`)}this.envVarsService.mergeVariables(process.env,s),this.envVarsService.mergeVariables(e,s),this.envVarsService.mergePaths(process.env,s),process.env.PYTHONPATH&&(s.PYTHONPATH=process.env.PYTHONPATH);let i=e?Object.keys(e).find((e=>"path"==e.toLowerCase())):void 0;i&&e[i]&&this.envVarsService.appendPath(s,e[i]),e.PYTHONPATH&&this.envVarsService.appendPythonPath(s,e.PYTHONPATH);const o=await this.globalExecPaths.getExecutablesPath(t).catch(ae);if(n?.isCancellationRequested)return;const a=s.PATH||s.Path,c=a?a.split(At):[];o&&c[1]!==o.fsPath?(En(`Prepend PATH with user site path for ${pn(t.path)}, user site ${o.fsPath}`),this.envVarsService.prependPath(s,o.fsPath)):Wo(t)||Sn(`Unable to determine site packages path for python ${pn(t.path)} (${Vo(t)})`),!s.PATH&&s.Path&&(s.PATH=s.Path)}return En(`Prepend PATH with python bin for ${pn(t.path)}, \n    PATH value is ${s.PATH} and \n    Path value is ${s.Path}`),t.executable.uri&&this.envVarsService.prependPath(s,Pt(t.executable.uri.fsPath)),En(`Activated Env Variables for ${pn(t.path)}, \n    PATH value is ${s.PATH} and \n    Path value is ${s.Path}`),s}};Ba([Tn("Getting activated env variables",$.BeforeCall|$.Arguments),Ha(1,Dn("id"))],za.prototype,"getActivatedEnvironmentVariablesImpl",null),Ba([Ha(1,Dn("id")),Ha(2,Rn())],za.prototype,"getActivatedEnvironmentVariablesFromPython",null),za=Ba([Kn(),Ha(0,zn(Qn)),Ha(1,zn(ka)),Ha(2,zn(Ca)),Ha(3,zn(Oo)),Ha(4,zn(Ao)),Ha(5,zn(Sa)),Ha(6,zn($a))],za);const Ja=Symbol("IEnvironmentActivationService"),Ga={stream:new Set(Object.keys({output_type:"stream",name:"stdout",text:""})),error:new Set(Object.keys({output_type:"error",ename:"",evalue:"",traceback:[""]})),display_data:new Set(Object.keys({output_type:"display_data",data:{},metadata:{}})),execute_result:new Set(Object.keys({output_type:"execute_result",execution_count:0,data:{},metadata:{}}))};function Ya(e){return e&&Zt(e).toLowerCase().endsWith("ipynb")?"notebook":"interactive"}function Qa(e){let t;switch(e.output_type){case"stream":case"error":case"execute_result":case"display_data":t=Ga[e.output_type];break;default:return e}const n={...e};for(const i of Object.keys(e))t.has(i)||delete n[i];return n}function Xa(e){return 2===(e=e.toLowerCase()).length&&e.endsWith("#")?`${e.substring(0,1)}sharp`:R.get(e)||e}function Za(e){return"string"==typeof e?e===l||e===d:e.notebookType===l||e.notebookType===d}function ec(e){const t=e.metadata?.custom;return JSON.parse(JSON.stringify(t?.metadata||{}))}function tc(e){return Oe.workspace.notebookDocuments.find((t=>Za(t)&&t.getCells().some((t=>t.document===e))))}function nc(e){if(Array.isArray(e)){let t="";for(let n=0;n<e.length;n+=1){const i=e[n];t=n<e.length-1&&!i.endsWith("\n")?t.concat(`${i}\n`):t.concat(i)}return t}return e.toString()}function ic(e){if(Array.isArray(e))return e;const t=e.toString();if(t.length>0){const e=t.split("\n");return e.map(((t,n)=>n<e.length-1?`${t}\n`:t)).filter((e=>e.length>0))}return[]}const rc="'''",oc='"""';function sc(e,t,n){let i,r,o=0;for(const s of e){const e=s.trim(),a=e.startsWith(rc)?rc:e.startsWith(oc)?oc:void 0,c=e.includes(rc)?rc:e.includes(oc)?oc:void 0;if(r)r===c&&(r=void 0),n(s,o);else if(i)i===a&&(i=void 0),i&&t(s,o);else if(c&&!a){const t=e.indexOf(c);r=e.lastIndexOf(c)!==t?void 0:c,n(s,o)}else if(a){const n=e.indexOf(a,3);i=n>=0?void 0:a,e.length>3&&t(e.slice(3,n>=0?n:void 0),o)}else e.startsWith("#")?t(e.slice(1),o):n(s,o);o+=1}}function ac(e,t="\n",n){return e.map(((i,r)=>{const o=n?n(i):i;return r===e.length-1?`${o}`:`${o}${t}`}))}function cc(e){return ac(function(e){const t=[];return sc(e,(e=>t.push(e)),(e=>{})),t}(e.slice(e.length>1?1:0)))}function lc(e){const t=/^\s*(\d+)\.(\d+)\.(.+)\s*$/.exec(e);if(t&&t.length>2){const e=parseInt(t[1],10),n=parseInt(t[2],10),i=parseInt(t[3],10);return(0,Fo.parse)(`${e}.${n}.${i}`,!0)??void 0}}class dc{get isDisposed(){return this._isDisposed}constructor(...e){this.disposables=[],this._isDisposed=!1,this.onDidDisposeEmitter=new Oe.EventEmitter,this.onDidDispose=this.onDidDisposeEmitter.event,this.disposables.push(...e)}_register(e){return this.disposables.push(e),e}dispose(){this._isDisposed||(Ie(this.disposables),this._isDisposed=!0,this.onDidDisposeEmitter.fire(),this.onDidDisposeEmitter.dispose())}}var uc=function(e,t){return function(n,i){t(n,i,e)}};let pc=class{constructor(e,t,n,i){this.vscNotebook=e,this.disposables=t,this.extensionChecker=n,this.pythonApi=i,this._changed=new Oe.EventEmitter,this._registered=!1,e.onDidChangeActiveNotebookEditor((()=>{this._changed.fire()}),this,t)}activate(){this.extensionChecker.isPythonExtensionActive?this.registerStatusFilter():this.pythonApi.onDidActivatePythonExtension(this.registerStatusFilter,this,this.disposables)}get changed(){return this._changed.event}get hidden(){return!(!this.vscNotebook.activeNotebookEditor||!Za(this.vscNotebook.activeNotebookEditor.notebook))}registerStatusFilter(){this._registered||(this._registered=!0,this.pythonApi.getApi().then((e=>{e.registerInterpreterStatusFilter&&(e.registerInterpreterStatusFilter(this),this._changed.fire())})).catch(ae))}};pc=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),uc(0,zn(oi)),uc(1,zn(Ri)),uc(2,zn(Ao)),uc(3,zn(Oo))],pc);var hc=__webpack_require__(22037);const fc=hc.homedir();function mc(e){return process.env[e]}function gc(){if(ln()===cn.Windows)return Oe.Uri.file(mc("USERPROFILE")||fc);const e=mc("HOME")||mc("HOMEPATH")||fc;return Oe.Uri.file(e.replace(/\\/g,"/"))}class vc{get appName(){return Oe.env.appName}get vscodeVersion(){return Oe.version}get appRoot(){return Oe.env.appRoot}get language(){return Oe.env.language}get sessionId(){return Oe.env.sessionId}get machineId(){return Oe.env.machineId}get uiKind(){return Oe.env.uiKind}get extensionName(){return this.packageJson.displayName}get extensionVersion(){return this.packageJson.version}get shell(){return Oe.env.shell}get packageJson(){return this.extensionContext.extension.packageJSON}get channel(){return this.appName.indexOf("Insider")>0||this.appName.indexOf("Code - OSS Dev")>=0?"insiders":"stable"}get uriScheme(){return Oe.env.uriScheme}constructor(e){this.extensionContext=e}}var yc=function(e,t){return function(n,i){t(n,i,e)}};let bc=class extends vc{constructor(e,t){super(t),this.platform=e,this.homeDir=gc()||Oe.Uri.file("")}get userSettingsFile(){const e="insiders"===this.channel?"Code - Insiders":"Code";switch(this.platform.osType){case cn.OSX:return tn(this.homeDir,"Library","Application Support",e,"User","settings.json");case cn.Linux:return tn(this.homeDir,".config",e,"User","settings.json");case cn.Windows:return process.env.APPDATA?tn(Oe.Uri.file(process.env.APPDATA),e,"User","settings.json"):void 0;default:return}}get userCustomKeybindingsFile(){return rn(this.extensionContext.globalStorageUri,Et("..","..","keybindings.json"))}};bc=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),yc(0,zn(Ma)),yc(1,zn(Ui))],bc);let wc=class{async readText(){return Oe.env.clipboard.readText()}async writeText(e){await Oe.env.clipboard.writeText(e)}};wc=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],wc);var _c=function(e,t){return function(n,i){t(n,i,e)}};let Sc=class{constructor(e,t){this.commandManager=e,this.appShell=t}activate(){this.commandManager.registerCommand("jupyter.reloadVSCode",this.onReloadVSCode,this)}async onReloadVSCode(e){await this.appShell.showInformationMessage(e,lr.reload)===lr.reload&&this.commandManager.executeCommand("workbench.action.reloadWindow").then(ae,ae)}};Sc=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),_c(0,zn(Gn)),_c(1,zn(Jn))],Sc);var Cc;let kc=Cc=class{get activeDebugConsole(){return Oe.debug.activeDebugConsole}get activeDebugSession(){return xn(`Getting active debug session, ${Oe.debug.activeDebugSession?.name}`),Oe.debug.activeDebugSession}get breakpoints(){return Oe.debug.breakpoints}get onDidChangeActiveDebugSession(){return Oe.debug.onDidChangeActiveDebugSession}get onDidStartDebugSession(){return Oe.debug.onDidStartDebugSession}get onDidReceiveDebugSessionCustomEvent(){return Oe.debug.onDidReceiveDebugSessionCustomEvent}get onDidTerminateDebugSession(){return Oe.debug.onDidTerminateDebugSession}get onDidChangeBreakpoints(){return Oe.debug.onDidChangeBreakpoints}registerDebugConfigurationProvider(e,t){return Oe.debug.registerDebugConfigurationProvider(e,t)}registerDebugAdapterTrackerFactory(e,t){return Oe.debug.registerDebugAdapterTrackerFactory(e,t)}startDebugging(e,t,n){return Oe.debug.startDebugging(e,t,n)}addBreakpoints(e){Oe.debug.addBreakpoints(e)}removeBreakpoints(e){Oe.debug.removeBreakpoints(e)}};kc.instance=new Cc,kc=Cc=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],kc);let Ec=class{get textDocuments(){return Oe.workspace.textDocuments}get activeTextEditor(){return Oe.window.activeTextEditor}get visibleTextEditors(){return Oe.window.visibleTextEditors}get onDidChangeActiveTextEditor(){return Oe.window.onDidChangeActiveTextEditor}get onDidChangeTextDocument(){return Oe.workspace.onDidChangeTextDocument}get onDidChangeVisibleTextEditors(){return Oe.window.onDidChangeVisibleTextEditors}get onDidChangeTextEditorSelection(){return Oe.window.onDidChangeTextEditorSelection}get onDidChangeTextEditorOptions(){return Oe.window.onDidChangeTextEditorOptions}get onDidChangeTextEditorViewColumn(){return Oe.window.onDidChangeTextEditorViewColumn}get onDidOpenTextDocument(){return Oe.workspace.onDidOpenTextDocument}get onDidCloseTextDocument(){return Oe.workspace.onDidCloseTextDocument}get onDidSaveTextDocument(){return Oe.workspace.onDidSaveTextDocument}showTextDocument(e,t,n){return Oe.window.showTextDocument(e,t,n)}openTextDocument(e){return Oe.workspace.openTextDocument(e)}applyEdit(e){return Oe.workspace.applyEdit(e)}createTextEditorDecorationType(e){return Oe.window.createTextEditorDecorationType(e)}};Ec=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],Ec);let xc=class{constructor(e){this.extensionContext=e,this.testingState=new Map}async store(e,t,n){if(y&&this.extensionContext.extensionMode!==Oe.ExtensionMode.Production)this.testingState.set(`${e}#${t}`,n||"");else if(n)await this.extensionContext.secrets.store(`${e}.${t}`,n);else try{await this.extensionContext.secrets.delete(`${e}.${t}`)}catch(e){Sn(e)}}async retrieve(e,t){if(y&&this.extensionContext.extensionMode!==Oe.ExtensionMode.Production)return this.testingState.get(`${e}#${t}`);try{return await this.extensionContext.secrets.get(`${e}.${t}`)}catch(n){try{return void await this.extensionContext.secrets.delete(`${e}.${t}`)}catch(e){Sn(e)}}}};xc=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(Ui))],xc);const Tc=It(__dirname).includes("platform")?Et(__dirname,"..",".."):Et(__dirname,"..");let Pc=class{constructor(e){this.fs=e}get all(){return Oe.extensions.all}get onDidChange(){return Oe.extensions.onDidChange}getExtension(e){return Oe.extensions.getExtension(e)}async determineExtensionFromCallStack(){const e=(new Error).stack,t=this.determineExtensionFromCallStackSync(e||"");if(e){const n=Et(Tc.toLowerCase(),Ot),i=e.split("\n").map((e=>{const t=/\((.*)\)/.exec(e);if(t)return t[1]})).filter((e=>e&&!e.toLowerCase().startsWith(n))).filter((e=>this.all.some((t=>e.includes(t.extensionUri.path)||e.includes(t.extensionUri.fsPath)))));Gr(new Error("Ex")).forEach((e=>{const t=e.getFileName();t&&!t.toLowerCase().startsWith(n)&&i.push(t)}));for(const e of i){let n=Pt(e),i=e;for(;n&&n.length<i.length;){const r=Oe.Uri.file(Et(n,"package.json"));if(await this.fs.exists(r)){const n=await this.fs.readFile(r);try{const i=JSON.parse(n);if(i.publisher&&i.name&&i.displayName){const n=`${i.publisher}.${i.name}`,r=this.getExtension(n);if(r&&r.id===n&&(e.startsWith(r.extensionUri.toString())||e.startsWith(r.extensionUri.fsPath.toString())))return t.extensionId===V&&r.id!==V?io(F.ExtensionCallerIdentification,void 0,{extensionId:r.id,result:"WorkedOnlyInAsync"}):t.extensionId===V&&t.extensionId===r.id&&io(F.ExtensionCallerIdentification,void 0,{extensionId:r.id,result:"WorkedInBoth"}),{extensionId:r.id,displayName:r.packageJSON.displayName}}}catch{}}i=n,n=Pt(n)}}t.extensionId!==V&&io(F.ExtensionCallerIdentification,void 0,{extensionId:t.extensionId,result:"WorkedOnlyInSync"}),Sn("Unable to determine the caller of the extension API for trace stack.",e)}return{extensionId:V,displayName:gr.unknownPackage}}determineExtensionFromCallStackSync(e){try{if(e){const t=this.getExtension(p).extensionUri.toString().toLowerCase(),n=e.split("\n").map((e=>{const t=/\((.*)\)/.exec(e);if(t)return t[1]})).filter((e=>e&&!e.toLowerCase().startsWith(t)));Gr(new Error("Ex")).forEach((e=>{const i=e.getFileName();i&&!i.toLowerCase().startsWith(t)&&n.push(i)}));for(const e of n){const t=this.all.find((t=>t.id!==p&&(e.startsWith(t.extensionUri.fsPath)||e.startsWith(t.extensionUri.path))));if(t)return{extensionId:t.id,displayName:t.packageJSON.displayName}}}return{extensionId:V,displayName:gr.unknownPackage}}catch{return{extensionId:V,displayName:gr.unknownPackage}}}};Pc=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(La))],Pc);let Ic=class{registerCompletionItemProvider(e,t,...n){return Oe.languages.registerCompletionItemProvider(e,t,...n)}};Ic=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],Ic);var Dc=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Rc=function(e,t){return function(n,i){t(n,i,e)}};let Oc=class{get onDidCloseNotebookDocument(){return this._onDidCloseNotebookDocument.event}get onDidChangeNotebookCellExecutionState(){return Oe.notebooks.onDidChangeNotebookCellExecutionState}get notebookDocuments(){return Oe.workspace.notebookDocuments}get notebookEditors(){return Oe.window.visibleNotebookEditors}get activeNotebookEditor(){return Oe.window.activeNotebookEditor}constructor(e,t){this.env=e,this.diposables=t,this._onDidCloseNotebookDocument=new Oe.EventEmitter,this.onDidChangeNotebookEditorSelection=Oe.window.onDidChangeNotebookEditorSelection,this.onDidChangeActiveNotebookEditor=Oe.window.onDidChangeActiveNotebookEditor,this.onDidOpenNotebookDocument=Oe.workspace.onDidOpenNotebookDocument,Oe.workspace.onDidCloseNotebookDocument((e=>this._onDidCloseNotebookDocument.fire(e)),this,this.diposables),this.onDidChangeVisibleNotebookEditors=Oe.window.onDidChangeVisibleNotebookEditors,this.onDidSaveNotebookDocument=Oe.workspace.onDidSaveNotebookDocument}async openNotebookDocument(e,t){return"string"==typeof e?Oe.workspace.openNotebookDocument(e,t):Oe.workspace.openNotebookDocument(e)}async showNotebookDocument(e,t){return Oe.window.showNotebookDocument(e,t)}registerNotebookSerializer(e,t,n){return Oe.workspace.registerNotebookSerializer(e,t,n)}createNotebookController(e,t,n,i,r,o){return Oe.notebooks.createNotebookController(e,t,n,i,r)}async closeActiveNotebooks(){const e=new Set(this.notebookDocuments);for(;Oe.window.activeNotebookEditor;)e.add(Oe.window.activeNotebookEditor.notebook),await Oe.commands.executeCommand("workbench.action.revertAndCloseActiveEditor"),await Q(10);e.forEach((e=>this._onDidCloseNotebookDocument.fire(e)))}};Dc([we()],Oc.prototype,"closeActiveNotebooks",null),Oc=Dc([Kn(),Rc(0,zn(ei)),Rc(1,zn(Ri))],Oc);let Ac=class{constructor(){this._list=[]}async dispose(){const e=this._list.map((e=>e.dispose()));await Promise.all(e),this._list=[]}push(e){e&&this._list.push(e)}get list(){return this._list}};function Nc(e){return $n(new Vn(jn,e))}Ac=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],Ac);var Mc=__webpack_require__(59035);class Lc{setSharedProperty(e,t){Zr(e,t)}postEvent(e,t){const n={};t.forEach(((e,t)=>{n[t]=e})),io(e,void 0,n)}}var jc=function(e,t){return function(n,i){t(n,i,e)}};const Fc="vscode";let Uc=class{get enabled(){return this.settings.experiments.enabled&&!this.settings.experiments.optOutFrom.includes("All")}constructor(e,t,n,i){this.configurationService=e,this.workspace=t,this.appEnvironment=n,this.globalState=i,this._optInto=[],this._optOutFrom=[],this.settings=e.getSettings(void 0);const r=this.settings.experiments.optInto,o=this.settings.experiments.optOutFrom;if(this._optInto=r.filter((e=>!e.endsWith("control"))),this._optOutFrom=o.filter((e=>!e.endsWith("control"))),!this.enabled)return;let s;s="insiders"===this.appEnvironment.channel?Mc.aU.Insiders:Mc.aU.Public;const a=new Lc;this.experimentationService=(0,Mc.X7)(p,this.appEnvironment.packageJson.version,s,a,this.globalState)}async activate(){this.experimentationService&&this.enabled&&(En(`Experimentation service retrieved: ${this.experimentationService}`),await this.experimentationService.initializePromise,0===this.getFeatures().length&&await this.experimentationService.initialFetch,this.logExperiments())}inExperiment(e){return!(!this.experimentationService||!this.enabled)&&(!this._optOutFrom.includes(e.toString())&&(this._optInto.includes(e.toString())||this._optInto.includes("All")?(this.experimentationService.getTreatmentVariable(Fc,e),!0):e===Hi.NewJupyterSession&&"insiders"===this.appEnvironment.channel||!0===this.experimentationService.getTreatmentVariable(Fc,e)))}async getExperimentValue(e){if(this.experimentationService&&this.enabled&&!this._optOutFrom.includes(e))return this.experimentationService.getTreatmentVariable(Fc,e)}getFeatures(){return this.globalState.get("VSCode.ABExp.FeatureData",{features:[]}).features}logExperiments(){const e=this.workspace.getConfiguration("telemetry");let t=!1;if(e&&!1===e.get("enableTelemetry")&&(kn("Telemetry is disabled"),t=!0),e&&"off"===e.get("telemetryLevel")&&(kn("Telemetry level is off"),t=!0),t&&kn("Experiments are disabled, only manually opted experiments are active."),this._optOutFrom.includes("All"))return;if(this._optInto.includes("All"))return void kn(dr.inGroup("All"));const n=new Set(this._optOutFrom),i=new Set(this._optInto);this._optOutFrom.filter((e=>"All"!==e)).forEach((e=>{kn(dr.notInGroup(e))})),this._optInto.filter((e=>"All"!==e)).forEach((e=>{kn(dr.inGroup(e))})),t||(this.getFeatures().forEach((e=>{!e.toLowerCase().startsWith("jupyter")&&e.toLowerCase()!==Hi.NewJupyterSession.toLowerCase()||this._optOutFrom.includes(e)||this._optInto.includes(e)||(i.add(e),kn(dr.inGroup(e)))})),i.has(Hi.NewJupyterSession)||n.has(Hi.NewJupyterSession)||kn(dr.inGroup(Hi.NewJupyterSession)))}};Uc=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),jc(0,zn(ji)),jc(1,zn(Qn)),jc(2,zn(ei)),jc(3,zn(Oi)),jc(3,Nc(Ai))],Uc);function qc(e){Oe.env.openExternal(Oe.Uri.parse(e)).then(ae,ae)}let Kc=class{launch(e){qc(e)}};Kc=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],Kc);var Vc=__webpack_require__(74389),Wc=function(e,t){return function(n,i){t(n,i,e)}};const $c=[{doNotDisplayPromptStateKey:"SHOW_DEPRECATED_FEATURE_PROMPT_FORMAT_ON_SAVE",message:yr.SHOW_DEPRECATED_FEATURE_PROMPT_FORMAT_ON_SAVE,moreInfoUrl:"https://github.com/Microsoft/vscode-python/issues/309",setting:{setting:"formatting.formatOnSave",values:["true",!0]}},{doNotDisplayPromptStateKey:"SHOW_DEPRECATED_FEATURE_PROMPT_LINT_ON_TEXT_CHANGE",message:yr.SHOW_DEPRECATED_FEATURE_PROMPT_LINT_ON_TEXT_CHANGE,moreInfoUrl:"https://github.com/Microsoft/vscode-python/issues/313",setting:{setting:"linting.lintOnTextChange",values:["true",!0]}},{doNotDisplayPromptStateKey:"SHOW_DEPRECATED_FEATURE_PROMPT_FOR_AUTO_COMPLETE_PRELOAD_MODULES",message:yr.SHOW_DEPRECATED_FEATURE_PROMPT_FOR_AUTO_COMPLETE_PRELOAD_MODULES,moreInfoUrl:"https://github.com/Microsoft/vscode-python/issues/1704",setting:{setting:"autoComplete.preloadModules"}}];let Bc=class{get features(){return this._features}set features(e){this._features=e,this._onDidChangeFeatures.fire()}constructor(e,t,n,i){this.persistentStateFactory=e,this.cmdMgr=t,this.workspace=n,this.appShell=i,this._onDidChangeFeatures=new Vc.Emitter,this.onDidChangeFeatures=this._onDidChangeFeatures.event,this._features={},this.disposables=[],this._updateFeatures(),this.disposables.push(this.workspace.onDidChangeConfiguration((()=>{this._updateFeatures()})))}_updateFeatures(){this.features={}}dispose(){this.disposables.forEach((e=>e.dispose()))}initialize(){$c.forEach(this.registerDeprecation.bind(this))}registerDeprecation(e){Array.isArray(e.commands)&&e.commands.forEach((t=>{this.disposables.push(this.cmdMgr.registerCommand(t,(()=>this.notifyDeprecation(e)),this))})),e.setting&&this.checkAndNotifyDeprecatedSetting(e)}async notifyDeprecation(e){const t=this.persistentStateFactory.createGlobalPersistentState(e.doNotDisplayPromptStateKey,!0);if(!t.value)return;const n="Learn more",i="Never show again",r=await this.appShell.showInformationMessage(e.message,n,i);if(r)switch(r){case n:qc(e.moreInfoUrl);break;case i:await t.updateValue(!1);break;default:throw new Error("Selected option not supported.")}}checkAndNotifyDeprecatedSetting(e){let t=!1;Array.isArray(this.workspace.workspaceFolders)&&this.workspace.workspaceFolders.length>0?this.workspace.workspaceFolders.forEach((n=>{t||(t=this.isDeprecatedSettingAndValueUsed(this.workspace.getConfiguration("jupyter",n.uri),e.setting))})):t=this.isDeprecatedSettingAndValueUsed(this.workspace.getConfiguration("jupyter"),e.setting),t&&this.notifyDeprecation(e).catch((e=>En("Jupyter Extension: notifyDeprecation",e)))}isDeprecatedSettingAndValueUsed(e,t){if(!e.has(t.setting))return!1;const n=e.get(t.setting);return Array.isArray(t.values)&&0!==t.values.length?Array.isArray(t.values)&&0!==t.values.length?t.values.indexOf(e.get(t.setting))>=0:void 0!==n&&(!Array.isArray(n)||n.length>0):!Array.isArray(n)||n.length>0}};Bc=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Wc(0,zn(Li)),Wc(1,zn(Gn)),Wc(2,zn(Qn)),Wc(3,zn(Jn))],Bc);var Hc=__webpack_require__(44165);let zc=class{constructor(e){this.requestOptions={};const t=e.getConfiguration("http").get("proxy","");t&&(this.requestOptions={headers:{proxy:t}})}async downloadFile(e){return Hc.fetch(e,this.requestOptions)}async exists(e){try{return 200===(await this.downloadFile(e)).status}catch(t){return En(`HttpClient - Failure checking for file ${e}: ${t}`),!1}}};zc=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(Qn))],zc);var Jc=function(e,t){return function(n,i){t(n,i,e)}};class Gc{constructor(e,t,n,i){this.storage=e,this.key=t,this.defaultValue=n,this.expiryDurationMs=i}get value(){if(this.expiryDurationMs){const e=this.storage.get(this.key,{data:this.defaultValue});return!e||!e.expiry||e.expiry<Date.now()?this.defaultValue:e.data}return this.storage.get(this.key,this.defaultValue)}async updateValue(e){this.expiryDurationMs?await this.storage.update(this.key,{data:e,expiry:Date.now()+this.expiryDurationMs}):await this.storage.update(this.key,e)}}let Yc=class{constructor(e,t){this.globalState=e,this.workspaceState=t}createGlobalPersistentState(e,t,n){return new Gc(this.globalState,e,t,n)}createWorkspacePersistentState(e,t,n){return new Gc(this.workspaceState,e,t,n)}};Yc=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Jc(0,zn(Oi)),Jc(0,Nc(Ai)),Jc(1,zn(Oi)),Jc(1,Nc(Ni))],Yc);const Qc=/^win/.test(process.platform);class Xc extends Error{}Xc.back=new Xc("back"),Xc.cancel=new Xc("cancel"),Xc.resume=new Xc("resume");class Zc{constructor(e){this.shell=e,this.steps=[]}run(e,t){return this.stepThrough(e,t)}async showQuickPick(e){return this.showLazyLoadQuickPick(e).selection}showLazyLoadQuickPick({title:e,step:t,totalSteps:n,items:i,activeItem:r,placeholder:o,buttons:s,shouldResume:a,matchOnDescription:c,matchOnDetail:l,acceptFilterBoxTextAsSelection:d,startBusy:u,stopBusy:p,validate:h,onDidTriggerItemButton:f,onDidTriggerButton:m,supportBackInFirstStep:g,onDidChangeItems:v,ignoreFocusOut:y}){const b=[],w=ie(),_=this.shell.createQuickPick();return _.title=e,_.step=t,_.totalSteps=n,_.placeholder=o,_.ignoreFocusOut=y??!0,_.items=i,p&&(_.busy=u??!1,p((()=>{_.enabled&&(_.busy=!1)}),this,b)),v&&(_.keepScrollPosition=!0,v((e=>{_.items=e}),this,b)),f&&_.onDidTriggerItemButton((e=>f(e)),void 0,b),_.matchOnDescription=c||!1,_.matchOnDetail=l||!1,_.activeItems=r?[r]:[],_.buttons=[...this.steps.length>1||g?[Oe.QuickInputButtons.Back]:[],...s||[]],b.push(_.onDidTriggerButton((e=>{e===Oe.QuickInputButtons.Back?w.reject(Xc.back):m?m(e):w.resolve(e)})),_.onDidChangeSelection((async e=>{const t=e.length?e[0].label:"";let n=!!t;if(t&&h&&e.length){_.enabled=!1,_.busy=!0;const t=await h(e[0]);t&&(n=!1,await this.shell.showErrorMessage(t,{modal:!0})),_.enabled=!0,_.busy=!1}n&&w.resolve(e[0])})),_.onDidHide((()=>{(async()=>{w.reject(a&&await a()?Xc.resume:Xc.cancel)})().catch(w.reject)}))),d&&b.push(_.onDidAccept((async()=>{if(!_.busy){const e=h?await h(_):void 0;e?(_.enabled=!1,_.busy=!0,await this.shell.showErrorMessage(e),_.enabled=!0,_.busy=!1):w.resolve(_.value)}}))),this.current&&this.current.dispose(),this.current=_,this.current.show(),w.promise.finally((()=>Ie(b))).catch(ae),{quickPick:_,selection:w.promise}}async showInputBox({title:e,step:t,totalSteps:n,value:i,prompt:r,validate:o,password:s,buttons:a,shouldResume:c,validationMessage:l}){const d=[];try{return await new Promise(((u,p)=>{const h=this.shell.createInputBox();h.title=e,h.step=t,h.totalSteps=n,h.password=!!s,h.value=i||"",h.prompt=r,h.validationMessage=l||"",h.ignoreFocusOut=!0,h.validationMessage=l||"",h.buttons=[...this.steps.length>1?[Oe.QuickInputButtons.Back]:[],...a||[]],d.push(h.onDidTriggerButton((e=>{e===Oe.QuickInputButtons.Back?p(Xc.back):u(e)})),h.onDidAccept((async()=>{const e=h.value;h.enabled=!1,h.busy=!0;const t=await o(e);t?(h.validationMessage=t,h.show()):(h.validationMessage="",u(e)),h.enabled=!0,h.busy=!1})),h.onDidChangeValue((async()=>{h.validationMessage=""})),h.onDidHide((()=>{(async()=>{h.busy||p(c&&await c()?Xc.resume:Xc.cancel)})().catch(p)}))),this.current&&this.current.dispose(),this.current=h,this.current.show()}))}finally{d.forEach((e=>e.dispose()))}}async stepThrough(e,t){let n=e;for(;n;){this.steps.push(n),this.current&&(this.current.enabled=!1,this.current.busy=!0);try{n=await n(this,t)}catch(e){if(e===Xc.back)this.steps.pop(),n=this.steps.pop();else if(e===Xc.resume)n=this.steps.pop();else{if(e!==Xc.cancel)throw e;n=void 0}if(!n)return e}}this.current&&this.current.dispose()}}const el=Symbol("IMultiStepInputFactory");let tl=class{constructor(e){this.shell=e}create(){return new Zc(this.shell)}};tl=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(Jn))],tl);let nl=class{activate(){Oe.languages.getLanguages().then((e=>{e.map((e=>e.toLowerCase())).forEach((e=>{O.includes(e)||O.push(e)}))}),ae)}};nl=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],nl);var il=__webpack_require__(55674);function rl(e){return ln()===cn.Windows?Ct(e).toUpperCase():Ct(e)}function ol(e,t){return rl(e)===rl(t)}function sl(e,t){return t.endsWith(Ot)||(t+=Ot),e.endsWith(Ot)||(e+=Ot),rl(e).startsWith(rl(t))}let al;function cl(e){return il.pathExists(e)}function ll(e){return il.pathExistsSync(e)}const dl=e=>dn(e,(0,hc.homedir)());let ul=class{get homeDir(){return this._homeDir}get tempDir(){return this._tempDir}constructor(){this._homeDir=gc()||Oe.Uri.file(hc.homedir()),this._tempDir=Oe.Uri.file(hc.tmpdir()),this.osType=ln(),this.osType,cn.Unknown}get pathVariableName(){return this.isWindows?"Path":"PATH"}async getVersion(){if(this.version)return this.version;switch(this.osType){case cn.Windows:case cn.OSX:try{const e=(0,Fo.coerce)(hc.release());if(e)return this.version=e;throw new Error("Unable to parse version")}catch(e){return function(e){e=e.replace(/\.00*(?=[1-9]|0\.)/,".");const t=Fo.coerce(e);return null!==t&&Fo.valid(t)?t:new Fo.SemVer("0.0.0")}(hc.release())}default:throw new Error("Not Supported")}}get isWindows(){return this.osType===cn.Windows}get isMac(){return this.osType===cn.OSX}get isLinux(){return this.osType===cn.Linux}};ul=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],ul);var pl=__webpack_require__(32081),hl=__webpack_require__(95100);const fl="utf8",ml=Oe.Uri.file((0,hc.homedir)());function gl(e,t){const n=t?[{uri:Oe.Uri.file(t),name:"",index:0}]:[];return pn(e?Oe.Uri.file(e):void 0,n,ml)}function vl(e,t=[]){return pn(e,t,ml)}function yl(e,t,n){const i=t.reduce(((e,t,n)=>{let i=xe(t);return(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'")&&(t.includes("/")||t.includes("\\")))&&(i=`${t[0]}${vl(t.substr(1))}`),0===n?i:`${e} ${i}`}),""),r=[`Process Execution: ${vl(e)} ${i}`];n&&n.cwd&&r.push(`    > ${pr.currentWorkingDirectory} ${vl(n.cwd.toString())}`),kn(r.join("\n"))}class bl{decode(e){return Buffer.concat(e).toString(fl)}}class wl{constructor(e){this.env=e,this.processesToKill=new Set,this.decoder=new bl}static isAlive(e){try{return!!e&&(process.kill(e,0),!0)}catch{return!1}}static kill(e){try{if(!e)return;"win32"===process.platform?(0,pl.execSync)(`taskkill /pid ${e} /T /F`):process.kill(e)}catch{}}dispose(){this.processesToKill.forEach((e=>{try{e.dispose()}catch{}}))}execObservable(e,t,n={}){const i=this.getDefaultOptions(n),r=(0,pl.spawn)(e,t,i);let o=!1;xn(`Exec observable ${e}, ${t.join(" ")}`);const s={dispose:function(){!r||r.killed||o||wl.kill(r.pid),r&&r.unref()}};this.processesToKill.add(s);const a=new hl.Observable((e=>{const t=[],i=(e,n,i)=>{e.on(n,i),t.push({dispose:()=>e.removeListener(n,i)})};n.token&&t.push(n.token.onCancellationRequested((()=>{o||r.killed||(wl.kill(r.pid),o=!0)})));const s=(t,i)=>{const r=this.decoder.decode([i]);"stderr"===t&&n.throwOnStdErr?e.error(new Ka(r)):e.next({source:t,out:r})};i(r.stdout,"data",(e=>s("stdout",e))),i(r.stderr,"data",(e=>s("stderr",e))),r.once("close",(()=>{o=!0,e.complete(),t.forEach((e=>e.dispose()))})),r.once("exit",(()=>{o=!0,e.complete(),t.forEach((e=>e.dispose()))})),r.once("error",(n=>{o=!0,e.error(n),t.forEach((e=>e.dispose()))}))}));return yl(e,t,n),{proc:r,out:a,dispose:s.dispose}}exec(e,t,n={}){const i=this.getDefaultOptions(n),r=(0,pl.spawn)(e,t,i),o=ie(),s={dispose:()=>{r.killed||o.completed||wl.kill(r.pid)}};this.processesToKill.add(s);const a=[],c=(e,t,n)=>{e.on(t,n),a.push({dispose:()=>e.removeListener(t,n)})};n.token&&a.push(n.token.onCancellationRequested(s.dispose));const l=[];c(r.stdout,"data",(e=>l.push(e)));const d=[];return c(r.stderr,"data",(e=>{n.mergeStdOutErr?(l.push(e),d.push(e)):d.push(e)})),r.once("close",(()=>{if(o.completed)return;const e=0===d.length?void 0:this.decoder.decode(d);if(e&&e.length>0&&n.throwOnStdErr)o.reject(new Ka(e));else{const t=this.decoder.decode(l);o.resolve({stdout:t,stderr:e})}a.forEach((e=>e.dispose()))})),r.once("error",(e=>{o.reject(e),a.forEach((e=>e.dispose()))})),yl(e,t,n),o.promise}shellExec(e,t={}){const n=this.getDefaultOptions(t);return new Promise(((i,r)=>{let o;const s=(0,pl.exec)(e,n,((e,t,s)=>{o?.dispose(),e&&null!==e?r(e):n.throwOnStdErr&&s&&s.length?r(new Error(s)):i({stderr:s&&s.length>0?s:void 0,stdout:t})}));t.token&&(o=t.token.onCancellationRequested((()=>{null!==s.exitCode||s.killed||(r(new Oe.CancellationError),wl.kill(s.pid))})));const a={dispose:()=>{s.killed||wl.kill(s.pid)}};this.processesToKill.add(a)}))}getDefaultOptions(e){const t={...e},n=t;if(n){const e=n.encoding="string"==typeof n.encoding&&n.encoding.length>0?n.encoding:fl;delete n.encoding,n.encoding=e}if(t.env&&0!==Object.keys(t.env).length)t.env={...t.env};else{const e=this.env?this.env:process.env;t.env={...e}}return t.env.PYTHONUNBUFFERED="1",t.env.PYTHONIOENCODING||(t.env.PYTHONIOENCODING="utf-8"),t}}!function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([Tn("Execing shell command",$.BeforeCall|$.Arguments),function(e,t){return function(n,i){t(n,i,e)}}(1,Rn())],wl.prototype,"shellExec",null);var _l=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Sl=function(e,t){return function(n,i){t(n,i,e)}};let Cl=class{constructor(e,t,n){this.envVarsService=e,this.disposableRegistry=t,this.workspace=n}async create(e,t){if(!this.workspace.isTrusted)throw new Error("Workspace not trusted");const n=await this.envVarsService.getEnvironmentVariables(e,"RunNonPythonCode",t),i=new wl(n);return this.disposableRegistry.push(i),i}};var kl;function El(e){const t=kl.isFileNotFound(e);return void 0!==t?t:function(e,t){const n=e.code;if(n)return"ENOENT"===n}(e)}_l([Tn("Create ProcessService",$.BeforeCall|$.Arguments)],Cl.prototype,"create",null),Cl=_l([Kn(),Sl(0,zn(Ca)),Sl(1,zn(Ri)),Sl(2,zn(Qn))],Cl),function(e){const t=Oe.FileSystemError.FileNotFound().name,n=Oe.FileSystemError.FileExists().name,i=Oe.FileSystemError.FileIsADirectory().name,r=Oe.FileSystemError.FileNotADirectory().name,o=Oe.FileSystemError.NoPermissions().name,s=[t,n,i,r,o];e.isFileNotFound=function(e){return function(e,t){if(s.includes(e.name))return e.name===t}(e,t)}}(kl||(kl={}));let xl=class{constructor(e){this.fs=e}async parseFile(e,t){if(e)try{return function(e,t){const n=t||{},i={};return e.toString().split("\n").forEach(((e,t)=>{const[r,o]=function(e){const t=e.match(/^\s*([a-zA-Z]\w*)\s*=\s*(.*?)?\s*$/);if(!t)return["",""];const n=t[1];let i=t[2];return i&&""!==i?("'"===i[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.substring(1,i.length-1),i=i.replace(/\\n/gm,"\n")):i="",[n,i]}(e);""!==r&&(i[r]=function(e,t,n,i=""){let r=!1,o=e;return o=o.replace(Tl,((e,o,s,a,c)=>a>0&&"\\"===c[a-1]?e:s&&""!==s||!o||""===o?(r=!0,e):t[o]||n[o]||i)),r||o===e||(e=o,io(_r.ENVFILE_VARIABLE_SUBSTITUTION)),e.replace(/\\\$/g,"$")}(o,i,n))})),i}(await this.fs.readFile(Oe.Uri.file(e)),t)}catch(t){El(t)||Sn(`Failed to parse env file ${e}`,t)}}mergeVariables(e,t){t&&Object.keys(e).forEach((n=>{const i=n.toLowerCase();if("pythonpath"==i||"path"==i)return;const r=Object.keys(t).find((e=>e.toLowerCase()===i))||n;t[r]=e[n]}))}mergePaths(e,t){const n=Object.keys(e).find((e=>"path"===e.toLowerCase())),i=Object.keys(t).find((e=>"path"===e.toLowerCase()))||n;n&&i&&(t[i]=e[n])}appendPythonPath(e,...t){return this.appendPaths(e,"PYTHONPATH",!0,...t)}appendPath(e,...t){return this.appendPaths(e,"PATH",!0,...t)}prependPath(e,...t){return this.appendPaths(e,"PATH",!1,...t)}appendPaths(e,t,n,...i){const r=i.filter((e=>"string"==typeof e&&e.trim().length>0)).map((e=>e.trim())).join(At);if(0===r.length)return e;const o=t.toLowerCase(),s=e?Object.keys(e).find((e=>e.toLowerCase()==o)):void 0,a=e&&s?e[s]:void 0,c=s||t;a&&"string"==typeof a&&a.length>0?n&&!(e[c]||"").endsWith(At+r)?e[c]=a+At+r:n||(e[c]||"").startsWith(r+At)||(e[c]=r+At+a):e[c]=r;const l=["Path","PATH"].find((e=>e!==c));if("win32"===hc.platform()&&l&&l in e&&"string"==typeof e[l]){const t=e[l],i=l;t&&"string"==typeof t&&t.length>0?n&&!(e[i]||"").endsWith(At+r)?e[i]=t+At+r:n||(e[i]||"").startsWith(r+At)||(e[i]=r+At+t):e[i]=r}return e}};xl=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(La))],xl);const Tl=/\${([a-zA-Z]\w*)?([^}\w].*)?}/g;function Pl(e){return Array.isArray?Array.isArray(e):!(!e||"number"!=typeof e.length||e.constructor!==Array)}function Il(e){return"string"==typeof e||e instanceof String}function Dl(e){return!("object"!=typeof e||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}class Rl{resolve(e){return Il(e)?this.__resolveString(e):Pl(e)?this.__resolveArray(e):Dl(e)?this.__resolveLiteral(e):e}resolveAny(e){return Il(e)?this.__resolveString(e):Pl(e)?this.__resolveAnyArray(e):Dl(e)?this.__resolveAnyLiteral(e):e}__resolveString(e){return e.replace(/\$\{(.*?)\}/g,((e,t)=>{const n=this[t];return Il(n)?n:e&&(e.indexOf("env.")>0||e.indexOf("env:")>0)?"":e}))}__resolveLiteral(e){const t=Object.create(null);return Object.keys(e).forEach((n=>{const i=e[n];t[n]=this.resolve(i)})),t}__resolveAnyLiteral(e){const t=Object.create(null);return Object.keys(e).forEach((n=>{const i=e[n];t[n]=this.resolveAny(i)})),t}__resolveArray(e){return e.map((e=>this.__resolveString(e)))}__resolveAnyArray(e){return e.map((e=>this.resolveAny(e)))}}class Ol extends Rl{constructor(e,t,n,i){super();const r=n&&e?n.getWorkspaceFolder(e):void 0;this._workspaceFolder=r?r.uri.fsPath:t?.fsPath||__dirname,this._workspaceFolderName=It(this._workspaceFolder),this._filePath=e?e.fsPath:void 0,i&&i.activeTextEditor&&(this._lineNumber=i.activeTextEditor.selection.anchor.line+1,this._selectedText=i.activeTextEditor.document.getText(new Oe.Range(i.activeTextEditor.selection.start,i.activeTextEditor.selection.end))),this._execPath=process.execPath,Object.keys(process.env).forEach((e=>{this[`env:${e}`]=this[`env.${e}`]=process.env[e]}))}get cwd(){return this.workspaceFolder}get workspaceRoot(){return this._workspaceFolder}get workspaceFolder(){return this._workspaceFolder}get workspaceRootFolderName(){return this._workspaceFolderName}get workspaceFolderBasename(){return this._workspaceFolderName}get file(){return this._filePath}get relativeFile(){return this.file?Tt(this._workspaceFolder,this.file):void 0}get relativeFileDirname(){return this.relativeFile?Pt(this.relativeFile):void 0}get fileBasename(){return this.file?It(this.file):void 0}get fileBasenameNoExtension(){return this.file?Rt(this.file).name:void 0}get fileDirname(){return this.file?Pt(this.file):void 0}get fileExtname(){return this.file?Dt(this.file):void 0}get lineNumber(){return this._lineNumber}get selectedText(){return this._selectedText}get execPath(){return this._execPath}}let Al,Nl=!1;function Ml(){io(_r.ENVFILE_WORKSPACE),Nl=!0}function Ll(){return!Nl}function jl(e){if(!Al){const t=e.getConfiguration("python");Al=t.inspect("envFile")?.defaultValue||""}return Al}var Fl;!function(e){e.setState=function({telemetrySent:e,defaultSetting:t}){void 0!==e&&(Nl=e),void 0!==jl&&(Al=t)},e.resetState=function(){Al=void 0,Nl=!1}}(Fl||(Fl={}));var Ul=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},ql=function(e,t){return function(n,i){t(n,i,e)}};let Kl=class{get onDidEnvironmentVariablesChange(){return this.changeEventEmitter.event}constructor(e,t,n,i,r,o=6e4){this.envVarsService=e,this.workspaceService=n,this.extensionChecker=i,this.pythonApi=r,this.cacheDuration=o,this.trackedWorkspaceFolders=new Set,this.fileWatchers=new Set,this.disposables=[],this.changeEventEmitter=new Oe.EventEmitter,t.push(this)}dispose(){this.changeEventEmitter.dispose(),Ie(this.disposables)}async getEnvironmentVariables(e,t,n){if(e=e||(this.workspaceService.workspaceFolders?.length?this.workspaceService.workspaceFolders[0].uri:void 0),"RunPythonCode"===t)return this._getEnvironmentVariables(e,t,n);const i=new Y(this.cacheDuration,this.getCacheKeyForMergedVars(e));if(i.hasData&&i.data)return En(`Cached data exists getEnvironmentVariables, ${e?e.fsPath:"<No Resource>"}`),i.data;const r=this._getEnvironmentVariables(e,t,n);return r.then((e=>{n?.isCancellationRequested||(i.data=e)})).catch(ae),r}async getCustomEnvironmentVariables(e,t,n){e=e||(this.workspaceService.workspaceFolders?.length?this.workspaceService.workspaceFolders[0].uri:void 0);const i=this.getWorkspaceFolderUri(e);if(!i)return void xn(`No workspace folder found for ${e?e.fsPath:"<No Resource>"}`);if("RunPythonCode"===t&&this.extensionChecker.isPythonExtensionInstalled){const e=await this.pythonApi.getNewApi();if(e&&!n?.isCancellationRequested)return this.pythonEnvVarChangeEventHooked||(this.pythonEnvVarChangeEventHooked=!0,e.environments.onDidEnvironmentVariablesChange((e=>{En(`Python env vars changed ${e.resource?.uri?.path}`),this.onEnvironmentFileChanged(e.resource?.uri),this.changeEventEmitter.fire(e.resource?.uri)}),this,this.disposables)),e.environments.getEnvironmentVariables(i)}const r=new Y(this.cacheDuration,this.getCacheKeyForCustomVars(e));if(r.hasData)return En(`Cached custom vars data exists getCustomEnvironmentVariables, ${e?e.fsPath:"<No Resource>"}`),r.data;if(n?.isCancellationRequested)return;this.trackedWorkspaceFolders.add(i.fsPath||"");const o=this.getEnvFile(i);this.createFileWatcher(o,i);const s=this.envVarsService.parseFile(o,process.env);return s.then((e=>{n?.isCancellationRequested||(r.data=e)})).catch(ae),s}createFileWatcher(e,t){const n=this.getCacheKeyForMergedVars(t);if(this.fileWatchers.has(n))return;const i=new Oe.RelativePattern(Oe.Uri.file(Pt(e)),It(e)),r=this.workspaceService.createFileSystemWatcher(i,!1,!1,!1);r?(this.disposables.push(r),this.fileWatchers.add(n),r.onDidChange((()=>this.onEnvironmentFileChanged(t)),this,this.disposables),r.onDidCreate((()=>this.onEnvironmentFileCreated(t)),this,this.disposables),r.onDidDelete((()=>this.onEnvironmentFileChanged(t)),this,this.disposables)):Sn("Failed to create file watcher for environment file")}getEnvFile(e){return Et(e.fsPath,".env")}async _getEnvironmentVariables(e,t,n){let i=await this.getCustomEnvironmentVariables(e,t,n);if(n?.isCancellationRequested)return{};if(i&&"RunPythonCode"===t&&this.extensionChecker.isPythonExtensionInstalled)return i;i||(i={});const r={};this.envVarsService.mergeVariables(process.env,r),this.envVarsService.mergeVariables(i,r),this.envVarsService.mergePaths(process.env,r),process.env.PYTHONPATH&&(r.PYTHONPATH=process.env.PYTHONPATH);let o=i?Object.keys(i).find((e=>"path"==e.toLowerCase())):void 0;return o&&i[o]&&this.envVarsService.appendPath(r,i[o]),i.PYTHONPATH&&this.envVarsService.appendPythonPath(r,i.PYTHONPATH),r}getWorkspaceFolderUri(e){const t=this.workspaceService.workspaceFolders||[],n=1===t.length?t[0].uri:void 0;return e&&this.workspaceService.getWorkspaceFolder(e)?.uri||n}onEnvironmentFileCreated(e){this.onEnvironmentFileChanged(e),Ll()&&Ml()}onEnvironmentFileChanged(e){new Y(this.cacheDuration,this.getCacheKeyForMergedVars(e)).clear(),new Y(this.cacheDuration,this.getCacheKeyForCustomVars(e)).clear(),this.changeEventEmitter.fire(e)}getCacheKeyForMergedVars(e){return`${this.workspaceService.getWorkspaceFolderIdentifier(e)}:RunNonPythonCode`}getCacheKeyForCustomVars(e){return`${this.workspaceService.getWorkspaceFolderIdentifier(e)}:RunNonPythonCode:CustomVars`}};Ul([Tn("Get Custom Env Variables",$.BeforeCall|$.Arguments)],Kl.prototype,"getEnvironmentVariables",null),Kl=Ul([Kn(),ql(0,zn(Sa)),ql(1,zn(Ri)),ql(2,zn(Qn)),ql(3,zn(Ao)),ql(4,zn(Oo)),ql(5,zn("number")),ql(5,Qi())],Kl);var Vl=function(e,t){return function(n,i){t(n,i,e)}};let Wl=class{constructor(e,t){this.commandManager=e,this.workspaceService=t}activate(){this.commandManager.registerCommand("jupyter.runInDedicatedExtensionHost",this.updateAffinity,this)}async updateAffinity(){const e=this.workspaceService.getConfiguration("extensions").get("experimental.affinity");let t=0;e&&Object.values(e).forEach((e=>{t=Math.max(t,e)}));const n=t+1;let i={"ms-toolsai.jupyter":n,"ms-toolsai.jupyter-renderers":n};Oe.extensions.getExtension(T)&&(i[T]=n),Oe.extensions.getExtension(I)&&(i[I]=n),await this.workspaceService.getConfiguration("extensions").update("experimental.affinity",{...e??{},...i},Oe.ConfigurationTarget.Global),this.commandManager.executeCommand("workbench.action.reloadWindow").then(ae,ae)}};Wl=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Vl(0,zn(Gn)),Vl(1,zn(Qn))],Wl);let $l=class{get onDidCloseTerminal(){return Oe.window.onDidCloseTerminal}get onDidOpenTerminal(){return Oe.window.onDidOpenTerminal}createTerminal(e){return Oe.window.createTerminal(e)}};$l=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],$l);var Bl=function(e,t){return function(n,i){t(n,i,e)}};const Hl=["currentServerHash","connectToLocalKernelsOnly","JUPYTER_LOCAL_KERNELSPECS","JUPYTER_LOCAL_KERNELSPECS_V1","JUPYTER_LOCAL_KERNELSPECS_V2","JUPYTER_LOCAL_KERNELSPECS_V3","JUPYTER_REMOTE_KERNELSPECS","JUPYTER_REMOTE_KERNELSPECS_V1","JUPYTER_REMOTE_KERNELSPECS_V2","JUPYTER_REMOTE_KERNELSPECS_V3","JUPYTER_LOCAL_KERNELSPECS_V4","JUPYTER_REMOTE_KERNELSPECS_V4-","LOCAL_KERNEL_SPECS_CACHE_KEY_V_2022_10","LOCAL_KERNEL_PYTHON_AND_RELATED_SPECS_CACHE_KEY_V_2022_10","user-jupyter-server-uri-list-v2"];let zl=class{constructor(e,t,n,i,r){this.workspace=e,this.globalState=t,this.crypto=n,this.appEnv=i,this.workspaceState=r}activate(){this.removeOldCachedItems().then(ae,ae)}async removeOldCachedItems(){await Promise.all([await this.getUriAccountKey()].concat(Hl).filter((e=>void 0!==this.globalState.get(e,void 0))).map((e=>this.globalState.update(e,void 0).then(ae,ae))));const e=this.workspaceState.keys().filter((e=>e.startsWith("LAST_EXECUTED_CELL_")&&!e.startsWith("LAST_EXECUTED_CELL_V2_")));await Promise.all(e.map((e=>this.workspaceState.update(e,void 0)))),await Promise.all(Hl.map((e=>this.globalState.keys().filter((t=>t.startsWith(e))).map((e=>this.globalState.update(e,void 0).then(ae,ae))))).flat())}async getUriAccountKey(){return this.workspace.rootFolder?this.crypto.createHash(un(this.workspace.rootFolder),"SHA-512"):this.workspace.workspaceFile?this.crypto.createHash(un(this.workspace.workspaceFile),"SHA-512"):this.appEnv.machineId}};function Jl(e){e.addSingletonInstance(Di,Qc),e.addSingleton(qi,Pc),e.addSingleton(Li,Yc),e.addSingleton(oi,Oc),e.addSingleton(ri,wc),e.addSingleton(Yn,Ec),e.addSingleton(Zn,kc),e.addSingleton(ei,bc),e.addSingleton(si,xc),e.addSingleton(ii,Ic),e.addSingleton(Ki,Kc),e.addSingleton(Fi,zc),e.addSingleton($i,Rr),e.addSingleton(zi,Uc),e.addSingleton(Xn,$l),e.addSingleton(Wi,Bc),e.addSingleton(Bi,Ac),e.addSingleton(el,tl),e.addSingleton(_a,nl),e.addSingleton(_a,zl),e.addSingleton(_a,Sc),e.addSingleton(_a,Wl),function(e){var t;e.addSingleton(Ma,ul),t=e.get(ya),al=t}(e),function(e){e.addSingleton(qa,Cl)}(e),function(e){e.addSingleton(Sa,xl),e.addSingleton(Ca,Kl)}(e)}zl=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Bl(0,zn(Qn)),Bl(1,zn(Oi)),Bl(1,Nc(Ai)),Bl(2,zn($i)),Bl(3,zn(ei)),Bl(4,zn(Oi)),Bl(4,Nc(Ni))],zl);const Gl=Et(Tc,"pythonFiles"),Yl=Gl;class Ql{constructor(e){this.documentManager=e.get(Yn),this.applicationShell=e.get(Jn)}async normalizeLines(e,t){throw Error("Not Implemented")}async getFileToExecute(){const e=this.documentManager.activeTextEditor;if(e)if(e.document.isUntitled)this.applicationShell.showErrorMessage("The active file needs to be saved before it can be run").then(ae,ae);else{if(e.document.languageId===i)return e.document.isDirty&&await e.document.save(),e.document.uri;this.applicationShell.showErrorMessage("The active file is not a Python source file").then(ae,ae)}else this.applicationShell.showErrorMessage("No open file to run in terminal").then(ae,ae)}getSelectedTextToExecute(e){if(!e)return;const t=e.selection;let n;return n=t.isEmpty?e.document.lineAt(t.start.line).text:t.isSingleLine?this.getSingleLineSelectionText(e):this.getMultiLineSelectionText(e),n}async saveFileIfDirty(e){const t=this.documentManager.textDocuments.filter((t=>t.uri.path===e.path));1===t.length&&t[0].isDirty&&await t[0].save()}getSingleLineSelectionText(e){const t=e.selection,n=new Oe.Range(t.start,t.end),i=e.document.getText(n),r=e.document.lineAt(t.start.line).text;return i.trim()===r.trim()?r:i}getMultiLineSelectionText(e){const t=e.selection,n=new Oe.Range(t.start,t.end),i=e.document.getText(n),r=new Oe.Range(new Oe.Position(t.start.line,0),new Oe.Position(t.end.line,e.document.lineAt(t.end.line).text.length)),o=e.document.getText(r);if(i.trim()===o.trim())return o;const s=e.document.lineAt(t.start.line).text,a=new Oe.Range(t.start,new Oe.Position(t.start.line,s.length)),c=e.document.getText(a);return c.trimLeft()===s.trimLeft()?s+i.substr(c.length):i}}let Xl=class extends Ql{constructor(e){super(e),this.processServiceFactory=e.get(qa),this.interpreterService=e.get(ka)}async normalizeLines(e,t){try{const n=e.trim();if(0===n.length)return"";if(e=e.replace(new RegExp("\\r","g"),""),-1===n.indexOf("\n"))return n+"\n";const i=await this.interpreterService.getActiveInterpreter(t),r=await this.processServiceFactory.create(t),[o,s]=[[Et(Yl,"normalizeSelection.py")],function(e){return e}],a=r.execObservable(un(i?.uri)||"python",o,{throwOnStdErr:!0}),c=ie();let l="";a.out.subscribe({next:e=>{"stdout"===e.source&&(l+=e.out)},complete:()=>{c.resolve(l)}});const d=JSON.stringify({code:e});a.proc?.stdin?.write(d),a.proc?.stdin?.end();const u=await c.promise,p=s(JSON.parse(u).normalized),h=Ee(e,{trim:!0,removeEmptyEntries:!1}).findIndex((e=>e.length)),f=Ee(p,{trim:!0,removeEmptyEntries:!1}).findIndex((e=>e.length));return h>f?`${"\n".repeat(h-f)}${p}`:p}catch(t){return Sn(t,"Python: Failed to normalize code for execution in terminal"),e}}};Xl=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(ya))],Xl);const Zl=Symbol("ICodeExecutionHelper");var ed=function(e,t){return function(n,i){t(n,i,e)}};const td="CONDA_INFORMATION_CACHE";function nd(e){return e&&kt(e.fsPath)&&e.fsPath.startsWith(Ot)&&`${Ot}${It(e.fsPath)}`===e.fsPath?It(e.fsPath):e?.fsPath}let id=class{constructor(e,t,n){this.pythonApi=e,this.globalState=t,this.fs=n}async getCondaVersion(){return this._version?this._version:(this._previousVersionCall||(this._previousVersionCall=(async()=>{const e=this.getCondaVersionFromPython();e.then((e=>{this._version=e,this.updateCache().catch(ae)})).catch(ae);const t=re(this.getCachedInformation());return await Promise.race([t.promise,e]),t.completed&&t.value?.version?this._version=t.value.version:e})()),this._previousVersionCall)}async getCondaFile(){return this._file?nd(this._file):(this._previousFileCall||(this._previousFileCall=(async()=>{const e=this.pythonApi.getApi().then((e=>e.getCondaFile?e.getCondaFile():void 0));e.then((e=>{En(`Conda file returned by Python Extension is ${e}`),this._file=e?Oe.Uri.file(e):void 0,this.updateCache().catch(ae)})).catch(ae);const t=re(this.getCachedInformation());return await Promise.race([t.promise,e]),t.completed&&t.value?.file?this._file=t.value.file:e.then((e=>e?Oe.Uri.file(e):void 0))})()),this._previousFileCall.then(nd))}async isCondaAvailable(){return"boolean"==typeof this.isAvailable?this.isAvailable:this.getCondaVersion().then((e=>this.isAvailable=void 0!==e)).catch((()=>this.isAvailable=!1))}async updateCache(){if(!this._file||!this._version)return;const e=this._file.fsPath.toLowerCase().endsWith("conda")?"":await this.fs.getFileHash(this._file);await this.globalState.update(td,{version:this._version.raw,file:this._file.fsPath,fileHash:e})}async getCachedInformation(){const e=this.globalState.get(td,void 0);if(!e)return;const t=e.file.toLowerCase().endsWith("conda")?"":await this.fs.getFileHash(Oe.Uri.file(e.file));return e.fileHash===t?{version:new Fo.SemVer(e.version),file:Oe.Uri.file(e.file)}:void 0}async getCondaVersionFromPython(){return this.pythonApi.getApi().then((e=>e.getCondaVersion?e.getCondaVersion():void 0))}};id=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),ed(0,zn(Oo)),ed(1,zn(Oi)),ed(1,Nc(Ai)),ed(2,zn(La))],id);var rd,od=__webpack_require__(66518),sd=__webpack_require__.n(od),ad=function(e,t){return function(n,i){t(n,i,e)}};const cd="_VSCODE_getDataFrame",ld=sd()`
                            try:
                                del _VSCODE_getDataFrame
                            except:
                                pass
                            `;let dd=rd=class{constructor(e,t){this.fs=e,this.context=t}async generateCodeToGetDataFrameInfo(e){const t=await this.getContentsOfDataFrameScript(),n=e.isDebugging?"True":"False",i=`${cd}("info", ${n}, ${e.variableName})`;return e.isDebugging?{initializeCode:t,code:i,cleanupCode:ld}:{code:`${t}\n\n${i}\n\n${ld}`}}async generateCodeToGetDataFrameRows(e){const t=await this.getContentsOfDataFrameScript(),n=e.isDebugging?"True":"False",i=`${cd}("rows", ${n}, ${e.variableName}, ${e.startIndex}, ${e.endIndex})`;return e.isDebugging?{initializeCode:t,code:i,cleanupCode:ld}:{code:`${t}\n\n${i}\n\n${ld}`}}async getContentsOfDataFrameScript(){if(rd.contentsOfDataFrameScript)return rd.contentsOfDataFrameScript;const e=tn(this.context.extensionUri,"pythonFiles","vscode_datascience_helpers","dataframes","vscodeDataFrame.py"),t=await this.fs.readFile(e);return rd.contentsOfDataFrameScript=t,t}};function ud(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function pd(e){return 10===e||13===e||8232===e||8233===e}function hd(e){return e>=48&&e<=57}var fd;function md(e,t,n){void 0===n&&(n=fd.DEFAULT);var i=function(e,t){void 0===t&&(t=!1);var n=e.length,i=0,r="",o=0,s=16,a=0,c=0,l=0,d=0,u=0;function p(t,n){for(var r=0,o=0;r<t||!n;){var s=e.charCodeAt(i);if(s>=48&&s<=57)o=16*o+s-48;else if(s>=65&&s<=70)o=16*o+s-65+10;else{if(!(s>=97&&s<=102))break;o=16*o+s-97+10}i++,r++}return r<t&&(o=-1),o}function h(){if(r="",u=0,o=i,c=a,d=l,i>=n)return o=n,s=17;var t=e.charCodeAt(i);if(ud(t)){do{i++,r+=String.fromCharCode(t),t=e.charCodeAt(i)}while(ud(t));return s=15}if(pd(t))return i++,r+=String.fromCharCode(t),13===t&&10===e.charCodeAt(i)&&(i++,r+="\n"),a++,l=i,s=14;switch(t){case 123:return i++,s=1;case 125:return i++,s=2;case 91:return i++,s=3;case 93:return i++,s=4;case 58:return i++,s=6;case 44:return i++,s=5;case 34:return i++,r=function(){for(var t="",r=i;;){if(i>=n){t+=e.substring(r,i),u=2;break}var o=e.charCodeAt(i);if(34===o){t+=e.substring(r,i),i++;break}if(92!==o){if(o>=0&&o<=31){if(pd(o)){t+=e.substring(r,i),u=2;break}u=6}i++}else{if(t+=e.substring(r,i),++i>=n){u=2;break}switch(e.charCodeAt(i++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:var s=p(4,!0);s>=0?t+=String.fromCharCode(s):u=4;break;default:u=5}r=i}}return t}(),s=10;case 47:var h=i-1;if(47===e.charCodeAt(i+1)){for(i+=2;i<n&&!pd(e.charCodeAt(i));)i++;return r=e.substring(h,i),s=12}if(42===e.charCodeAt(i+1)){i+=2;for(var m=n-1,g=!1;i<m;){var v=e.charCodeAt(i);if(42===v&&47===e.charCodeAt(i+1)){i+=2,g=!0;break}i++,pd(v)&&(13===v&&10===e.charCodeAt(i)&&i++,a++,l=i)}return g||(i++,u=1),r=e.substring(h,i),s=13}return r+=String.fromCharCode(t),i++,s=16;case 45:if(r+=String.fromCharCode(t),++i===n||!hd(e.charCodeAt(i)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return r+=function(){var t=i;if(48===e.charCodeAt(i))i++;else for(i++;i<e.length&&hd(e.charCodeAt(i));)i++;if(i<e.length&&46===e.charCodeAt(i)){if(!(++i<e.length&&hd(e.charCodeAt(i))))return u=3,e.substring(t,i);for(i++;i<e.length&&hd(e.charCodeAt(i));)i++}var n=i;if(i<e.length&&(69===e.charCodeAt(i)||101===e.charCodeAt(i)))if((++i<e.length&&43===e.charCodeAt(i)||45===e.charCodeAt(i))&&i++,i<e.length&&hd(e.charCodeAt(i))){for(i++;i<e.length&&hd(e.charCodeAt(i));)i++;n=i}else u=3;return e.substring(t,n)}(),s=11;default:for(;i<n&&f(t);)i++,t=e.charCodeAt(i);if(o!==i){switch(r=e.substring(o,i)){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return r+=String.fromCharCode(t),i++,s=16}}function f(e){if(ud(e)||pd(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){i=e,r="",o=0,s=16,u=0},getPosition:function(){return i},scan:t?function(){var e;do{e=h()}while(e>=12&&e<=15);return e}:h,getToken:function(){return s},getTokenValue:function(){return r},getTokenOffset:function(){return o},getTokenLength:function(){return i-o},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return o-d},getTokenError:function(){return u}}}(e,!1);function r(e){return e?function(){return e(i.getTokenOffset(),i.getTokenLength(),i.getTokenStartLine(),i.getTokenStartCharacter())}:function(){return!0}}function o(e){return e?function(t){return e(t,i.getTokenOffset(),i.getTokenLength(),i.getTokenStartLine(),i.getTokenStartCharacter())}:function(){return!0}}var s=r(t.onObjectBegin),a=o(t.onObjectProperty),c=r(t.onObjectEnd),l=r(t.onArrayBegin),d=r(t.onArrayEnd),u=o(t.onLiteralValue),p=o(t.onSeparator),h=r(t.onComment),f=o(t.onError),m=n&&n.disallowComments,g=n&&n.allowTrailingComma;function v(){for(;;){var e=i.scan();switch(i.getTokenError()){case 4:y(14);break;case 5:y(15);break;case 3:y(13);break;case 1:m||y(11);break;case 2:y(12);break;case 6:y(16)}switch(e){case 12:case 13:m?y(10):h();break;case 16:y(1);break;case 15:case 14:break;default:return e}}}function y(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),f(e),t.length+n.length>0)for(var r=i.getToken();17!==r;){if(-1!==t.indexOf(r)){v();break}if(-1!==n.indexOf(r))break;r=v()}}function b(e){var t=i.getTokenValue();return e?u(t):a(t),v(),!0}return v(),17===i.getToken()?!!n.allowEmptyContent||(y(4,[],[]),!1):function e(){switch(i.getToken()){case 3:return function(){l(),v();for(var t=!1;4!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){if(t||y(4,[],[]),p(","),v(),4===i.getToken()&&g)break}else t&&y(6,[],[]);e()||y(4,[],[4,5]),t=!0}return d(),4!==i.getToken()?y(8,[4],[]):v(),!0}();case 1:return function(){s(),v();for(var t=!1;2!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){if(t||y(4,[],[]),p(","),v(),2===i.getToken()&&g)break}else t&&y(6,[],[]);(10!==i.getToken()?(y(3,[],[2,5]),0):(b(!1),6===i.getToken()?(p(":"),v(),e()||y(4,[],[2,5])):y(5,[],[2,5]),1))||y(4,[],[2,5]),t=!0}return c(),2!==i.getToken()?y(7,[2],[]):v(),!0}();case 10:return b(!0);default:return function(){switch(i.getToken()){case 11:var e=i.getTokenValue(),t=Number(e);isNaN(t)&&(y(2),t=0),u(t);break;case 7:u(null);break;case 8:u(!0);break;case 9:u(!1);break;default:return!1}return v(),!0}()}}()?(17!==i.getToken()&&y(9,[],[]),!0):(y(4,[],[]),!1)}dd=rd=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),ad(0,zn(La)),ad(1,zn(Ui))],dd),function(e){e.DEFAULT={allowTrailingComma:!1}}(fd||(fd={}));var gd,vd=function(e,t){var n=[],i=new Object,r=void 0,o={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(e,t,n,i){o.value=e,o.offset=t,o.length=n,o.type=i,o.colonOffset=void 0,r=o}try{md(e,{onObjectBegin:function(e,o){if(t<=e)throw i;r=void 0,s=t>e,n.push("")},onObjectProperty:function(e,r,o){if(t<r)throw i;if(a(e,r,o,"property"),n[n.length-1]=e,t<=r+o)throw i},onObjectEnd:function(e,o){if(t<=e)throw i;r=void 0,n.pop()},onArrayBegin:function(e,o){if(t<=e)throw i;r=void 0,n.push(0)},onArrayEnd:function(e,o){if(t<=e)throw i;r=void 0,n.pop()},onLiteralValue:function(e,n,r){if(t<n)throw i;if(a(e,n,r,function(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":return e?Array.isArray(e)?"array":"object":"null";default:return"null"}}(e)),t<=n+r)throw i},onSeparator:function(e,o,a){if(t<=o)throw i;if(":"===e&&r&&"property"===r.type)r.colonOffset=o,s=!1,r=void 0;else if(","===e){var c=n[n.length-1];"number"==typeof c?n[n.length-1]=c+1:(s=!0,n[n.length-1]=""),r=void 0}}})}catch(e){if(e!==i)throw e}return{path:n,previousNode:r,isAtPropertyKey:s,matches:function(e){for(var t=0,i=0;t<e.length&&i<n.length;i++)if(e[t]===n[i]||"*"===e[t])t++;else if("**"!==e[t])return!1;return t===e.length}}},yd=function(e,t){return function(n,i){t(n,i,e)}};let bd=gd=class{constructor(e,t,n){this.disposableRegistry=e,this.interpreters=t,this.pythonExtChecker=n,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!1}}async activate(){this.disposableRegistry.push(Oe.languages.registerCompletionItemProvider({language:"json"},this,",","[")),this.disposableRegistry.push(Oe.languages.registerCompletionItemProvider({language:"jsonc"},this,",","["))}async provideCompletionItems(e,t,n){return this.pythonExtChecker.isPythonExtensionInstalled&&this.pythonExtChecker.isPythonExtensionActive&&0!==this.interpreters.resolvedEnvironments.length&&gd.canProvideCompletions(e,t)?this.interpreters.resolvedEnvironments.map((e=>{const t=Uo(e),n=pn(e.uri);return{label:t,detail:n,insertText:`"${n.replace(/\\/g,"\\\\")}"`,filterText:`${t} ${n}`}})):[]}static canProvideCompletions(e,t){if("settings.json"!==It(e.uri.fsPath))return!1;const n=vd(e.getText(),e.offsetAt(t));return"jupyter.kernels.excludePythonEnvironments"===n.path[0]&&2===n.path.length}};bd=gd=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),yd(0,zn(Ri)),yd(1,zn(ka)),yd(2,zn(Ao))],bd);var wd=function(e,t){return function(n,i){t(n,i,e)}};let _d=class{get onDidChange(){return this._onDidChange.event}constructor(e,t,n){this.workspace=e,this.webExtension=n,this.disposables=[],this._onDidChange=new Oe.EventEmitter,t.push(this),this.webExtension||this.workspace.onDidChangeConfiguration((e=>{e.affectsConfiguration("jupyter.kernels.excludePythonEnvironments")&&this._onDidChange.fire()}),this,this.disposables)}dispose(){this._onDidChange.dispose(),Ie(this.disposables)}isPythonEnvironmentExcluded(e){if(this.webExtension)return!1;const t=this.getExcludedPythonEnvironments(),n="uri"in e?e.envPath:e.environment?.folderUri,i="uri"in e?e.uri:e.executable.uri;if(!i&&!n)return!1;const r=t.some((e=>{const t=pn(e.trim()).toLowerCase().replace(/\\/g,"/");if(0===(e=e.trim().toLowerCase().replace(/\\/g,"/")).length||0===t.length)return!1;const r=pn(i).toLowerCase().replace(/\\/g,"/"),o=i?i.fsPath.toLowerCase().replace(/\\/g,"/"):"";if(e===r||t===r||e===o||t===o)return!0;const s=pn(n||"").toLowerCase().replace(/\\/g,"/"),a=pn(n||"").toLowerCase().replace(/\\/g,"/");return e===s||t===s||e===a||t===a}));return r&&(io(F.JupyterKernelHiddenViaFilter),En(`Python Env hidden via filter: ${pn(i)}`)),r}getExcludedPythonEnvironments(){if(!this.workspace.workspaceFolders||0===this.workspace.workspaceFolders.length)return this.workspace.getConfiguration("jupyter",void 0).get("kernels.excludePythonEnvironments",[]);const e=[];return this.workspace.workspaceFolders.forEach((t=>{e.push(...this.workspace.getConfiguration("jupyter",t.uri).get("kernels.excludePythonEnvironments",[]))})),e}};_d=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),wd(0,zn(Qn)),wd(1,zn(Ri)),wd(2,zn(Pi))],_d);let Sd=class{constructor(e){this.workspace=e}activate(){this.migrateFilters().catch(ae)}async migrateFilters(){const e=Array.isArray(this.workspace.workspaceFolders)?this.workspace.workspaceFolders:[];await this.migrateWorkspaceFilters(this.workspace.getConfiguration("jupyter",void 0),Oe.ConfigurationTarget.Global),0===e.length?await this.migrateWorkspaceFilters(this.workspace.getConfiguration("jupyter",void 0),Oe.ConfigurationTarget.Global):1===e.length?await this.migrateWorkspaceFilters(this.workspace.getConfiguration("jupyter",e[0].uri),Oe.ConfigurationTarget.WorkspaceFolder):(await this.migrateWorkspaceFilters(this.workspace.getConfiguration("jupyter",void 0),Oe.ConfigurationTarget.Workspace),await Promise.all(e.map((e=>this.migrateWorkspaceFilters(this.workspace.getConfiguration("jupyter",e.uri),Oe.ConfigurationTarget.WorkspaceFolder)))))}async migrateWorkspaceFilters(e,t){const n=e.inspect("kernels.filter");let i=[];switch(t){case Oe.ConfigurationTarget.Global:i=n?.globalValue||[];break;case Oe.ConfigurationTarget.Workspace:i=n?.workspaceValue||[];break;default:i=n?.workspaceFolderValue||[]}const r=i.filter((e=>"pythonEnvironment"===e.type)).map((e=>e.path));i.length&&await e.update("kernels.filter",void 0,t),r.length&&await e.update("kernels.excludePythonEnvironments",Array.from(new Set(r)),t)}};Sd=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(Qn))],Sd);var Cd=function(e,t){return function(n,i){t(n,i,e)}};let kd=class{constructor(e,t){this.commandManager=e,this.disposables=t}activate(){this.disposables.push(this.commandManager.registerCommand("jupyter.filterKernels",(()=>this.commandManager.executeCommand("workbench.action.openSettings","jupyter.kernels.excludePythonEnvironments").then(ae,ae)),this))}};var Ed,xd,Td,Pd,Id,Dd;kd=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Cd(0,zn(Gn)),Cd(1,zn(Ri))],kd),function(e){e[e.Installed=0]="Installed",e[e.Disabled=1]="Disabled",e[e.Ignore=2]="Ignore",e[e.Cancelled=3]="Cancelled"}(Ed||(Ed={})),function(e){e[e.jupyter=18]="jupyter",e[e.ipykernel=19]="ipykernel",e[e.notebook=20]="notebook",e[e.kernelspec=21]="kernelspec",e[e.nbconvert=22]="nbconvert",e[e.pandas=23]="pandas",e[e.pip=27]="pip",e[e.ensurepip=28]="ensurepip"}(xd||(xd={})),function(e){e[e.Installed=0]="Installed",e[e.NotInstalled=1]="NotInstalled",e[e.NeedsUpgrade=2]="NeedsUpgrade"}(Td||(Td={})),function(e){e[e.install=1]="install",e[e.run=2]="run"}(Pd||(Pd={})),function(e){e.Unknown="Unknown",e.Conda="Conda",e.Pip="Pip",e.Poetry="Poetry",e.Pipenv="Pipenv"}(Id||(Id={})),function(e){e.Linter="Linter",e.Formatter="Formatter",e.TestFramework="TestFramework",e.RefactoringLibrary="RefactoringLibrary",e.DataScience="DataScience"}(Dd||(Dd={}));const Rd=Symbol("IModuleInstaller"),Od=(Symbol("IPythonInstallation"),Symbol("IInstallationChannelManager")),Ad=Symbol("IProductService"),Nd=Symbol("IProductPathService");var Md;!function(e){e[e.None=0]="None",e[e.upgrade=1]="upgrade",e[e.updateDependencies=2]="updateDependencies",e[e.reInstall=4]="reInstall",e[e.installPipIfRequired=8]="installPipIfRequired"}(Md||(Md={}));const Ld=Symbol("IInstaller");let jd=class{constructor(e){this.serviceContainer=e}async getInstallationChannel(e,t){const n=await this.getInstallationChannels(t);if(n.length>=1)return n[0];0!==n.length||await this.showNoInstallersMessage(t)}async getInstallationChannels(e){const t=this.serviceContainer.getAll(Rd),n=[];if(0===t.length)return[];t.sort(((e,t)=>t.priority-e.priority));let i=t[0].priority;for(const r of t){if(r.priority!==i){if(n.length>0)break;i=r.priority}await r.isSupported(e)&&n.push(r)}return n}async showNoInstallersMessage(e){const t=this.serviceContainer.get(Jn);if(await t.showErrorMessage(e.envType===ko.Conda?br.noCondaOrPipInstaller:br.noPipInstaller,{modal:!0},br.searchForHelp)===br.searchForHelp){const n=this.serviceContainer.get(Ma),i=n.isWindows?"Windows":n.isMac?"MacOS":"Linux";t.openUrl(`https://www.bing.com/search?q=Install Pip ${i} ${e.envType===ko.Conda?"Conda":""}`)}}};function Fd(e){switch(e){case xd.jupyter:return"jupyter";case xd.notebook:return"notebook";case xd.pandas:return"pandas";case xd.ipykernel:return"ipykernel";case xd.nbconvert:return"nbconvert";case xd.kernelspec:return"kernelspec";case xd.pip:return"pip";case xd.ensurepip:return"ensurepip";default:throw new Error(`Product ${e} cannot be installed as a Python Module.`)}}jd=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(ya))],jd);class Ud extends Xi{constructor(e,t,n){super("windowsLongPathNotEnabled",n),this.product=e,this.interpreter=t,this.originalMessage=n}}const qd=Symbol("IPythonExecutionFactory");Symbol("IPythonExecutionService");class Kd{constructor(e){this.serviceContainer=e}async installModule(e,t,n,i){const r="string"==typeof e?e:Fd(e),o=await this.getExecutionArgs(r,t,i),s=this.serviceContainer.get(qd),a=this.serviceContainer.get(qa),c=this.serviceContainer.get(Ja),l=this.serviceContainer.get(Sa);if(n.token.isCancellationRequested)return;const d=this.serviceContainer.get(Jn),u={location:Oe.ProgressLocation.Notification,cancellable:!0,title:wr.installingModule(r)};await d.withProgress(u,(async(i,r)=>(async(i,r)=>{const d=ie();let u,p,h;if(r.onCancellationRequested((()=>{n.cancel(),d.resolve()})),o.useShellExec){const e=await a.create(void 0);if(n.token.isCancellationRequested)return;try{En((await e.shellExec(o.args.join(" "),{cwd:o.cwd})).stdout),d.resolve()}catch(e){d.reject(e)}}else if(o.exe){const e=await c.getActivatedEnvironmentVariables(void 0,t);if(n.token.isCancellationRequested)return;const i={...process.env};l.mergeVariables(e||{},i),l.mergePaths(e||{},i);const s=await a.create(void 0);if(n.token.isCancellationRequested)return;u=s.execObservable(o.exe,o.args,{encoding:"utf-8",token:r,env:i,cwd:o.cwd})}else{const e=await s.createActivatedEnvironment({interpreter:t});if(n.token.isCancellationRequested)return;u=e.execObservable(o.args,{encoding:"utf-8",token:r,cwd:o.cwd})}const f=[".","..","..."];let m=0;return u&&u.out.subscribe({next:e=>{const t=f[m%3],n=e.out.trim();m+=1;const r=n.length>28?`${n.substring(0,28)}${t}`:n;i.report({message:r}),En(e.out),"stderr"===e.source&&(h?h+=e.out:!h&&e.out.includes("ERROR: Could not install packages")&&(h=e.out.substring(e.out.indexOf("ERROR: Could not install packages"))),p=e.out)},complete:()=>{0!==u?.proc?.exitCode?h&&h.includes("https://pip.pypa.io/warnings/enable-long-paths")?(h=Ee(h,{trim:!0,removeEmptyEntries:!0}).filter((e=>!e.startsWith("[notice]"))).join(hc.EOL),d.reject(new Ud(e,t,h))):d.reject(p||u?.proc?.exitCode):d.resolve()},error:e=>{d.reject(e)}}),d.promise})(i,r)))}}const Vd=[Fd(xd.jupyter),Fd(xd.notebook)];function Wd(e,t){return Vd.includes(t)?"pip"===e?["jupyter-client<8","pyzmq<25"]:["jupyter_client<8","pyzmq<25"]:[]}let $d=class extends Kd{constructor(e){super(e)}get name(){return"Conda"}get displayName(){return"Conda"}get type(){return Id.Conda}get priority(){return 0}async isSupported(e){if(!1===this._isCondaAvailable)return!1;const t=this.serviceContainer.get(id);return this._isCondaAvailable=await t.isCondaAvailable(),!!this._isCondaAvailable&&("executable"in e?Vo(e):e.envType)===ko.Conda}async installModule(e,t,n,i){if(await super.installModule(e,t,n,i),("executable"in t?Vo(t):t.envType===ko.Conda)&&("executable"in t?Wo(t):t.isCondaEnvWithoutPython)){if(!this.serviceContainer.get(Ao).isPythonExtensionActive)return;const e=this.serviceContainer.get(ka),n=await e.getInterpreterDetails(t.id);n&&!n.isCondaEnvWithoutPython&&Object.assign(t,n)}}async getExecutionArgs(e,t,n=Md.None){const i=this.serviceContainer.get(id),r=await i.getCondaFile(),o="executable"in t?t.environment?.name:t.envName,s=this.getEnvironmentPath(t),a=[n&Md.upgrade?"update":"install"];return[xd.ipykernel,xd.pandas,xd.nbconvert,xd.jupyter,xd.notebook].map(Fd).includes(e)&&a.push("-c","conda-forge"),o?(a.push("--name"),a.push(xe(o))):s&&(a.push("--prefix"),a.push(Te(s))),n&Md.updateDependencies&&a.push("--update-deps"),n&Md.reInstall&&a.push("--force-reinstall"),a.push(e),a.push(...Wd("conda",e)),a.push("-y"),{exe:r,args:a}}getEnvironmentPath(e){let t;if("executable"in e){if(e.environment?.folderUri)return e.environment.folderUri.fsPath;t=e.executable.uri||Oe.Uri.file(e.path)}else t=e.uri;const n=Pt(t.fsPath),i=It(n);return-1!==["BIN","SCRIPTS"].indexOf(i.toUpperCase())?Et(n,".."):n}};async function Bd(e,t){const n=mc("PIPENV_PIPFILE")||"Pipfile";let i=t.lookIntoParentDirectories?function(){const e=mc("PIPENV_MAX_DEPTH");if(void 0===e)return 3;const t=parseInt(e,10);return isNaN(t)?(Sn(`PIPENV_MAX_DEPTH is incorrectly set. Converting value '${e}' to number results in NaN`),1):t}():1;for(;i>0&&!ol(e,Pt(e));){const t=Et(e,n);if(await cl(t))return t;e=Pt(e),i-=1}}async function Hd(e,t){const n=await async function(e){const t=Pt(Pt(e.fsPath)),n=await async function(e){const t=Et(e,".project");if(!await cl(t))return;const n=await(i=t,il.readFile(i,"utf-8"));var i;if(await cl(n))return n;Sn(`The .project file inside environment folder: ${e} doesn't contain a valid path to the project`)}(t);if(void 0!==n)return It(rl(t)).startsWith(`${It(rl(n))}-`)?Bd(n,{lookIntoParentDirectories:!1}):void 0}(e);if(!n)return!1;const i=void 0===mc("PIPENV_NO_INHERIT"),r=await Bd(t.fsPath,{lookIntoParentDirectories:i});return!!r&&ol(n,r)}function zd(e,t){const n="executable"in e?e.executable.uri||Oe.Uri.file(e.path):e.uri,i=t.getWorkspaceFolder(n);return i?.uri||t.rootFolder}$d=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(ya))],$d);var Jd=function(e,t){return function(n,i){t(n,i,e)}};const Gd="pipenv";let Yd=class extends Kd{constructor(e,t){super(e),this.workspaceService=t}get name(){return"pipenv"}get type(){return Id.Pipenv}get displayName(){return Gd}get priority(){return 10}async isSupported(e){if(le(e)){const t=await this.serviceContainer.get(ka).getActiveInterpreter(e),n=e?this.serviceContainer.get(Qn).getWorkspaceFolder(e):void 0;return!(!t||!n||t.envType!==ko.Pipenv)&&Hd(t.uri,n.uri)}return("executable"in e?Vo(e):e.envType)===ko.Pipenv}async getExecutionArgs(e,t,n=0){const i=[n&Md.reInstall||n&Md.updateDependencies||n&Md.upgrade?"update":"install",e,"--dev"],r=zd(t,this.workspaceService);return{args:i,exe:Gd,cwd:r?un(r):void 0}}};Yd=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Jd(0,zn(ya)),Jd(1,zn(Qn))],Yd);let Qd=class extends Kd{constructor(e){super(e)}get name(){return"Pip"}get type(){return Id.Pip}get displayName(){return"Pip"}get priority(){return 0}async isSupported(e){switch("executable"in e?Vo(e):e.envType){case ko.Conda:case ko.Pipenv:case ko.Poetry:return!1}return this.isPipAvailable(e)}async getExecutionArgs(e,t,n=0){if(e===Fd(xd.pip)){const e=this.serviceContainer.get(Ld);return await e.isInstalled(xd.ensurepip,t)?{args:["-m","ensurepip"]}:{args:[Et(Gl,"get-pip.py")]}}const i=[],r=this.serviceContainer.get(Qn).getConfiguration("http").get("proxy","");return r.length>0&&(i.push("--proxy"),i.push(r)),i.push("install","-U"),n&Md.reInstall&&i.push("--force-reinstall"),("executable"in t?Vo(t):t.envType)===ko.Unknown&&i.push("--user"),{args:["-m","pip",...i,e].concat(Wd("pip",e))}}isPipAvailable(e){return this.serviceContainer.get(qd).create({resource:void 0,interpreter:e}).then((e=>e.isModuleInstalled("pip"))).catch((()=>!1))}};Qd=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(ya))],Qd);var Xd=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class Zd{constructor(e,t){this.command=e,this.cwd=t,this.fixCwd()}static async getPoetry(e){if(function(e){const t=Et(e,"pyproject.toml");return!!ll(t)&&!!(n=t,il.readFileSync(n,"utf-8")).includes("[tool.poetry]");var n}(e))return(void 0===Zd.poetryPromise.get(e)||w())&&Zd.poetryPromise.set(e,Zd.locate(e)),Zd.poetryPromise.get(e)}static async locate(e){En(`Getting poetry for cwd ${e}`);for(const t of function*(){const e=("poetryPath",al.get(ji).getSettings().poetryPath);e&&"poetry"!==e&&(yield e),yield"poetry";const t=gc();if(t){const e=Et(t.fsPath,".poetry","bin","poetry");ll(e)&&(yield e)}}()){En(`Probing poetry binary for ${e}: ${t}`);const n=new Zd(t,e);if(void 0!==await n.getEnvList())return En(`Found poetry via filesystem probing for ${e}: ${t}`),n;En(`Failed to find poetry for ${e}: ${t}`)}En(`No poetry binary found for ${e}`)}async getEnvList(){return this.getEnvListCached(this.command,this.cwd)}async getEnvListCached(e,t){const n=await this.safeShellExecute(`${e} env list --full-path`);if(!n)return;return(await Promise.all(Ee(n.stdout).map((async e=>{e.endsWith("(Activated)")&&(e=e.slice(0,-11));const t=e.trim();return await cl(t)?t:void 0})))).filter((e=>void 0!==e)).map((e=>e))}async getActiveEnvPath(){return this.getActiveEnvPathCached(this.cwd)}async getActiveEnvPathCached(e){const t=await this.safeShellExecute(`${this.command} env info -p`,!0);if(t)return t.stdout.trim()}async getVirtualenvsPathSetting(){const e=await this.safeShellExecute(`${this.command} config virtualenvs.path`);if(e)return e.stdout.trim()}fixCwd(){if(ln()===cn.Windows&&/^[a-z]:/.test(this.cwd)){const e=this.cwd.split(":");e[0]=e[0].toUpperCase(),this.cwd=e.join(":")}}async safeShellExecute(e,t=!1){const n=new se,i=await async function(e,t={}){return(await al.get(qa).create(void 0)).shellExec(e,t)}(e,{cwd:this.cwd,throwOnStdErr:!0,timeout:5e4}).catch((e=>{t?En(e):Sn(e)}));return En(`Time taken to run ${e} in ms`,n.elapsedTime),i}}Zd.poetryPromise=new Map,Xd([ve(3e4)],Zd.prototype,"getEnvListCached",null),Xd([ve(2e4)],Zd.prototype,"getActiveEnvPathCached",null);var eu=function(e,t){return function(n,i){t(n,i,e)}};let tu=class extends Kd{get name(){return"poetry"}get type(){return Id.Poetry}get displayName(){return"poetry"}get priority(){return 10}constructor(e,t,n){super(e),this.workspaceService=t,this.configurationService=n}async isSupported(e){if(("executable"in e?Vo(e):e.envType)!==ko.Poetry)return!1;const t=zd(e,this.workspaceService);return!!t&&async function(e,t,n){const i=n?new Zd(n,t):await Zd.getPoetry(t),r=await(i?.getActiveEnvPath());return!!r&&sl(e,r)}(("executable"in e?e.executable.uri||Oe.Uri.file(e.path):e.uri).fsPath,t.fsPath,this.configurationService.getSettings(void 0).poetryPath)}async getExecutionArgs(e,t){const n=[this.configurationService.getSettings(void 0).poetryPath,"add","--dev",e],i=zd(t,this.workspaceService)?.fsPath;return{useShellExec:!0,args:n,cwd:i}}};tu=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),eu(0,zn(ya)),eu(1,zn(Qn)),eu(2,zn(ji))],tu);const nu=new Map;nu.set(xd.jupyter,"jupyter"),nu.set(xd.notebook,"notebook"),nu.set(xd.ipykernel,"ipykernel"),nu.set(xd.nbconvert,"nbconvert"),nu.set(xd.kernelspec,"kernelspec"),nu.set(xd.pandas,"pandas"),nu.set(xd.pip,"pip"),nu.set(xd.ensurepip,"ensurepip");var iu,ru=function(e,t){return function(n,i){t(n,i,e)}};const ou=new Set(["ipykernel","ipython-genutils","jupyter","jupyter-client","jupyter-core","ipywidgets","nbconvert","nbformat","notebook","pyzmq","pyzmq32","tornado","traitlets"].map((e=>e.toLowerCase()))),su="NOT INSTALLED";let au=iu=class{constructor(e,t,n,i,r,o){this.pythonExtensionChecker=e,this.interpreterService=t,this.executionFactory=n,this.apiProvider=i,this.disposables=r,this.workspace=o,this.interpreterInformation=new Map,this.pendingInterpreterInformation=new Map,this.pendingInterpreterBeforeActivation=new Set,this.interpreterPackages=new Map,iu._instance=this,this.apiProvider.onDidActivatePythonExtension((()=>this.pendingInterpreterBeforeActivation.forEach((e=>this.trackPackages(e)))),this,this.disposables)}static get instance(){return iu._instance}getPackageVersions(e){if(!this.pythonExtensionChecker.isPythonExtensionInstalled)return Promise.resolve(new Map);const t=Qt(e.uri);let n=this.interpreterInformation.get(t);return n||(n=ie(),this.interpreterInformation.set(t,n),this.trackInterpreterPackages(e).catch(ae)),n.promise}async getPackageVersion(e,t){if(!this.pythonExtensionChecker.isPythonExtensionInstalled)return Promise.resolve(void 0);const n=await this.getPackageVersions(e),i=await jr(t.toLocaleLowerCase());if(!n.has(i))return;const r=n.get(i);return r?r===su?void 0:r:void 0}trackPackages(e,t){this.trackPackagesInternal(e,t).catch(ae)}async listPackages(e){if(!this.pythonExtensionChecker.isPythonExtensionInstalled)return[];const t=this.workspace.getWorkspaceFolderIdentifier(e);if(!this.interpreterPackages.has(t)){const n=this.listPackagesImpl(e);this.interpreterPackages.set(t,n),n.catch((e=>{this.interpreterPackages.get(t)===n&&this.interpreterPackages.delete(t),Cn(`Failed to get list of installed packages for ${t}`,e)}))}return this.interpreterPackages.get(t).then((e=>Array.from(e)))}async listPackagesImpl(e){const t=await this.interpreterService.getActiveInterpreter(e);if(!t)return new Set;const n=await this.executionFactory.createActivatedEnvironment({interpreter:t,resource:e}),i="389a87b7-288f-4235-92bf-73bf19bf6491",r=`import pkgutil;import json;print("${i}");print(json.dumps(list([x.name for x in pkgutil.iter_modules()])));print("${i}");`,o=await n.exec(["-c",r],{throwOnStdErr:!1});if(o.stdout){const e=JSON.parse(o.stdout.split(i)[1].trim());return new Set(e.concat(e.map((e=>e.toLowerCase()))))}return Sn(`Failed to get list of installed packages for ${vl(t.uri)}`,o.stderr),new Set}async trackPackagesInternal(e,t){if(!this.pythonExtensionChecker.isPythonExtensionActive)return void this.pendingInterpreterBeforeActivation.add(e);let n;if(le(e)){const t=await this.interpreterService.getActiveInterpreter(e);if(!t)return;n=t}else n=e;this.trackInterpreterPackages(n,t).catch(ae)}async trackInterpreterPackages(e,t){const n=Qt(e.uri);if(this.pendingInterpreterInformation.has(n)&&!t)return;const i=this.getPackageInformation({interpreter:e});i.finally((()=>{const e=setTimeout((()=>{this.pendingInterpreterInformation.get(n)===i&&this.pendingInterpreterInformation.delete(n)}),3e5),t={dispose:()=>clearTimeout(e)};this.disposables.push(t)})).catch(ae),this.pendingInterpreterInformation.set(n,i)}async getPackageInformation({interpreter:e}){if(e.isCondaEnvWithoutPython)return;const t=await this.executionFactory.createActivatedEnvironment({interpreter:e}),n=await t.execModule("pip",["list"],{throwOnStdErr:!1,mergeStdOutErr:!0}),i=new Map;await Promise.all(Array.from(ou).map((async e=>{i.set(await jr(e),su)}))),await Promise.all(n.stdout.split("\n").map((e=>e.trim().toLowerCase())).filter((e=>e.length>0)).map((async e=>{const t=e.split(" ").filter((e=>e.trim().length));if(t.length<2)return;const[n,r]=t;if(!ou.has(n.toLowerCase().trim()))return;const o=Lr(r);i.set(await jr(n),o||"")})));const r=Qt(e.uri);let o=this.interpreterInformation.get(r);o||(o=ie(),this.interpreterInformation.set(r,o)),o.resolve(i)}};async function cu(e,t,n){if(le(n))return;const i=`${await Io(n)}#${nu.get(t)}`;await e.update(i,!0)}au=iu=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),ru(0,zn(Ao)),ru(1,zn(ka)),ru(2,zn(qd)),ru(3,zn(Oo)),ru(4,zn(Ri)),ru(5,zn(Qn))],au);const lu=Symbol("IReservedPythonNamedProvider"),du=Symbol("IInterpreterPackages"),uu=Symbol("IWorkspaceInterpreterTracker");var pu=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},hu=function(e,t){return function(n,i){t(n,i,e)}};async function fu(e,t,n){const i=`${await Io(n)}#${nu.get(t)}`;if(e.get(i,!1))return!0;const r=Fd(t),o=au.instance?au.instance.getPackageVersion(n,r).then((e=>"string"==typeof e?"found":"notfound")).catch((e=>{Sn("Failed to get interpreter package version",e)})):Promise.resolve(void 0);try{const e=await Z(500,o);if("string"==typeof e)return"found"===e}catch(e){Sn(`Failed to check if package exists ${nu.get(t)}`)}}class mu{constructor(e,t){this.serviceContainer=e,this.appShell=e.get(Jn),this.configService=e.get(ji),this.workspaceService=e.get(Qn),this.productService=e.get(Ad),this.persistentStateFactory=e.get(Li)}async install(e,t,n,i,r){const o=this.serviceContainer.get(Od),s=await o.getInstallationChannel(e,t);if(!s)return Ed.Ignore;if(n.token.isCancellationRequested)return Ed.Cancelled;let a=!0===i?Md.updateDependencies|Md.reInstall:void 0;return!0===r&&(a=a?a|Md.installPipIfRequired:Md.installPipIfRequired),await s.installModule(e,t,n,a),n.token.isCancellationRequested?Ed.Cancelled:(t.isCondaEnvWithoutPython&&(t.isCondaEnvWithoutPython=!1),this.isInstalled(e,t).then((e=>e?Ed.Installed:Ed.Ignore)))}async isInstalled(e,t){const n=this.getExecutableNameFromSettings(e,void 0);return this.isExecutableAModule(e,void 0)?(await this.serviceContainer.get(qd).createActivatedEnvironment({resource:void 0,interpreter:t})).isModuleInstalled(n):(await this.serviceContainer.get(qa).create(void 0)).exec(n,["--version"],{mergeStdOutErr:!0}).then((()=>!0)).catch((()=>!1))}getExecutableNameFromSettings(e,t){const n=this.productService.getProductType(e);return this.serviceContainer.get(Nd,n).getExecutableNameFromSettings(e,t)}isExecutableAModule(e,t){const n=this.productService.getProductType(e);return this.serviceContainer.get(Nd,n).isExecutableAModule(e,t)}}pu([Tn("Checking if product is installed"),hu(1,Dn("path"))],mu.prototype,"isInstalled",null);let gu=class{get onInstalled(){return this._onInstalled.event}constructor(e,t,n,i){this.serviceContainer=e,this.interpreterPackages=t,this.memento=n,this.output=i,this._onInstalled=new Oe.EventEmitter,this.productService=e.get(Ad)}dispose(){}async install(e,t,n,i,r){t&&this.interpreterPackages.trackPackages(t);let o="installed";try{const s=await this.createInstaller(e).install(e,t,n,i,r);switch(cu(this.memento,e,t).catch(ae),s===Ed.Installed&&this._onInstalled.fire({product:e,resource:t}),s){case Ed.Cancelled:o="cancelled";break;case Ed.Installed:o="installed";break;case Ed.Ignore:o="ignored";break;case Ed.Disabled:o="disabled"}return s}catch(e){throw o="failed",e}finally{io(F.PythonModuleInstall,void 0,{action:o,moduleName:nu.get(e)})}}async isInstalled(e,t){return this.createInstaller(e).isInstalled(e,t)}translateProductToModuleName(e){return Fd(e)}createInstaller(e){if(this.productService.getProductType(e)===Dd.DataScience)return new mu(this.serviceContainer,this.output);throw new Error(`Unknown product ${e}`)}};gu=pu([Kn(),hu(0,zn(ya)),hu(1,zn(du)),hu(2,zn(Oi)),hu(2,Nc(Ai)),hu(3,zn(Ii)),hu(3,Nc(m))],gu);class vu{constructor(e){this.serviceContainer=e,this.configService=e.get(ji),this.productInstaller=e.get(Ld)}isExecutableAModule(e,t){if(e===xd.kernelspec)return!1;let n;try{n=this.productInstaller.translateProductToModuleName(e,Pd.run)}catch{}const i=this.getExecutableNameFromSettings(e,t);return"string"==typeof n&&n.length>0&&It(i)===i}}let yu=class extends vu{constructor(e){super(e)}getExecutableNameFromSettings(e,t){return this.productInstaller.translateProductToModuleName(e,Pd.run)}};yu=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(ya))],yu);let bu=class{constructor(){this.ProductTypes=new Map,this.ProductTypes.set(xd.jupyter,Dd.DataScience),this.ProductTypes.set(xd.notebook,Dd.DataScience),this.ProductTypes.set(xd.ipykernel,Dd.DataScience),this.ProductTypes.set(xd.nbconvert,Dd.DataScience),this.ProductTypes.set(xd.kernelspec,Dd.DataScience),this.ProductTypes.set(xd.pandas,Dd.DataScience),this.ProductTypes.set(xd.pip,Dd.DataScience),this.ProductTypes.set(xd.ensurepip,Dd.DataScience)}getProductType(e){return this.ProductTypes.get(e)}};bu=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],bu);var wu=function(e,t){return function(n,i){t(n,i,e)}};let _u=class{get items(){return this.api?(this.refreshedOnceBefore||(this.refreshedOnceBefore=!0,this.refresh().catch(ae)),this.api.environments.known):[]}get status(){return this._status}set status(e){this._status=e,this._onDidChangeStatus.fire()}constructor(e,t,n){this.title=gr.localPythonEnvironments,this._onDidChange=new Oe.EventEmitter,this._onDidChangeStatus=new Oe.EventEmitter,this.onDidChange=this._onDidChange.event,this.onDidChangeStatus=this._onDidChangeStatus.event,this.refreshedOnceBefore=!1,this.disposables=[],this.promiseMonitor=new Mo,this._status="idle",n.push(this),this.promiseMonitor.onStateChange((()=>this.status=this.promiseMonitor.isComplete?"idle":"discovering"),this,this.disposables);const i=()=>{const t=e.getNewApi();this.promiseMonitor.push(t),t.then((e=>{if(this.api=e,!e)return this.status="idle",void this._onDidChangeStatus.fire();this._onDidChange.fire(),e.environments.onDidChangeEnvironments((()=>this._onDidChange.fire()),this,this.disposables)})).catch((e=>Sn("Failed to get python api",e)))};t.isPythonExtensionInstalled?i():t.onPythonExtensionInstallationStatusChanged((()=>{t.isPythonExtensionInstalled&&i()}),this,this.disposables)}activate(){}dispose(){Ie(this.disposables)}async refresh(){if(!this.api)return;const e=this.api.environments.refreshEnvironments();this.promiseMonitor.push(e),await e.catch(ae)}withFilter(e){return new Proxy(this,{get(t,n){switch(n){case"items":return t.items.filter(e);case"dispose":return ae;default:return t[n]}}})}};function Su(e,t){if(Array.isArray(e)){const n=e.slice(1);return t&&n.push(...t),{args:n,command:e[0],python:[...e],pythonExecutable:e[e.length-1]}}return{command:e,args:t||[],python:[e],pythonExecutable:e}}function Cu(e,t){return["-m",e,...t]}_u=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),wu(0,zn(Oo)),wu(1,zn(Ao)),wu(2,zn(Ri))],_u);class ku{constructor(e,t){if(this.deps=t,this.pythonEnvId=e.id,"executable"in e){if(!e.executable.uri)throw new Error(`interpreter.executable.uri is not defined for ${e.id}`);this.executable=e.executable.uri}else this.executable=e.uri}getExecutionInfo(e=[]){return Su(this.deps.getPythonArgv(this.executable),e)}getExecutionObservableInfo(e=[]){return Su(this.deps.getObservablePythonArgv(this.executable),e)}async getExecutablePath(){return await this.deps.isValidExecutable(this.executable)?this.executable:async function(e,t){const[n,i]=[["-c","import sys;print(sys.executable)"],function(e){return e.trim()}],r=function(e,t){const n={command:e.command,args:[...e.args],python:[...e.python],pythonExecutable:e.pythonExecutable};return t&&n.args.push(...t),void 0===n.pythonExecutable&&(n.pythonExecutable=n.python[n.python.length-1]),n}(e,n),o=await t(r.command,r.args);return Oe.Uri.file(i(o.stdout))}(this.getExecutionInfo(),this.deps.exec)}async isModuleInstalled(e){const[t,n]=[["-c",`import ${i=e};print('6af208d0-cb9c-427f-b937-ff563e17efdf')`],function(e){return!!e.includes("6af208d0-cb9c-427f-b937-ff563e17efdf")||(En(`Module ${i} is not installed. Output ${e}`),!1)}];var i;const r=this.getExecutionInfo(t);try{return n((await this.deps.exec(r.command,r.args,{throwOnStdErr:!1})).stdout)}catch(t){return Cn(`Module ${e} not installed in environment ${this.pythonEnvId}`,t),!1}}}function Eu(e,t,n,i,r){return{getPythonArgv:e=>t||[un(e)],getObservablePythonArgv:e=>n||[un(e)],isValidExecutable:e,exec:async(e,t,n)=>i(e,t,Object.assign({throwOnStdErr:!0},n||{})),shellExec:async(e,t)=>r(e,{timeout:t})}}class xu extends Xi{constructor(e){super("notinstalled",`Module '${e}' not installed.`),this.moduleName=e}}class Tu{constructor(e){this.deps=e}execObservable(e,t){const n={...t},i=this.deps.getExecutionObservableInfo(e);return this.deps.execObservable(i.command,i.args,n)}execModuleObservable(e,t,n){const i=Cu(e,t),r={...n},o=this.deps.getExecutionObservableInfo(i);return{...n}.token=void 0,this.deps.execObservable(o.command,o.args,r)}async exec(e,t){const n={...t},i=this.deps.getExecutionInfo(e);return this.deps.exec(i.command,i.args,n)}async execModule(e,t,n){const i=Cu(e,t),r={...n},o=this.deps.getExecutionInfo(i),s=await this.deps.exec(o.command,o.args,r);if(e&&qr.outputHasModuleNotInstalledError(e,s.stderr)&&!await this.deps.isModuleInstalled(e))throw new xu(e);return s}}var Pu=function(e,t){return function(n,i){t(n,i,e)}};let Iu=class{constructor(e,t,n,i){this.serviceContainer=e,this.activationHelper=t,this.processServiceFactory=n,this.workspace=i,this.disposables=this.serviceContainer.get(Ri),this.fileSystem=this.serviceContainer.get(La)}async create(e){const t=await this.processServiceFactory.create(e.resource);return Du(e.interpreter,t,this.fileSystem,void 0)}async createActivatedEnvironment(e){if(e.resource=e.resource?e.resource:this.workspace.workspaceFolders?.length?this.workspace.workspaceFolders[0].uri:void 0,!this.workspace.isTrusted)throw new Error("Workspace not trusted");const t=await this.activationHelper.getActivatedEnvironmentVariables(e.resource,e.interpreter);if(!(t&&Object.keys(t).length>0))return this.create({resource:e.resource,interpreter:e.interpreter});const n=new wl({...t});return this.disposables.push(n),Du(e.interpreter,n,this.fileSystem)}};function Du(e,t,n,i){let r=function(e,t,n){const i=Eu((async e=>n.exists(e)),void 0,void 0,((e,n,i)=>t.exec(e,n,i)),((e,n)=>t.shellExec(e,n)));return new ku(e,i)}(e,t,n);if(i){const[o,s]=i;r=function(e,t,n,i,r){const o=["run"];""===t.name?o.push("-p",t.path):o.push("-n",t.name);const s=Eu((async e=>r.exists(e)),[e,...o,"python"],void 0,((e,t,n)=>i.exec(e,t,n)),((e,t)=>i.shellExec(e,t)));return new ku(n,s)}(o,s,e,t,n)}const o=function(e,t){return new Tu({isModuleInstalled:async e=>t.isModuleInstalled(e),getExecutionInfo:e=>t.getExecutionInfo(e),getExecutionObservableInfo:e=>t.getExecutionObservableInfo(e),exec:async(t,n,i)=>e.exec(t,n,i),execObservable:(t,n,i)=>e.execObservable(t,n,i)})}(t,r);return{isModuleInstalled:e=>r.isModuleInstalled(e),execObservable:(e,t)=>o.execObservable(e,t),execModuleObservable:(e,t,n)=>o.execModuleObservable(e,t,n),exec:(e,t)=>o.exec(e,t),execModule:(e,t,n)=>o.execModule(e,t,n)}}Iu=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Pu(0,zn(ya)),Pu(1,zn(Ja)),Pu(2,zn(qa)),Pu(3,zn(Qn))],Iu);const Ru=["abc","aifc","antigravity","argparse","array","ast","asynchat","asyncio","asyncore","atexit","audioop","base64","bdb","binascii","binhex","bisect","builtins","bz2","cProfile","calendar","cgi","cgitb","chunk","cmath","cmd","code","codecs","codeop","collections","colorsys","compileall","concurrent","configparser","contextlib","contextvars","copy","copyreg","crypt","csv","ctypes","curses","dataclasses","datetime","dbm","decimal","difflib","dis","distutils","doctest","email","encodings","ensurepip","enum","errno","faulthandler","fcntl","filecmp","fileinput","fnmatch","formatter","fractions","ftplib","functools","gc","genericpath","getopt","getpass","gettext","glob","graphlib","grp","gzip","hashlib","heapq","hmac","html","http","idlelib","imaplib","imghdr","imp","importlib","inspect","io","ipaddress","itertools","json","keyword","lib2to3","linecache","locale","logging","lzma","mailbox","mailcap","marshal","math","mimetypes","mmap","modulefinder","multiprocessing","netrc","nis","nntplib","ntpath","nturl2path","numbers","opcode","operator","optparse","os","parser","pathlib","pdb","pickle","pickletools","pipes","pkgutil","platform","plistlib","poplib","posix","posixpath","pprint","profile","pstats","pty","pwd","py_compile","pyclbr","pydoc","pydoc_data","queue","quopri","random","re","readline","reprlib","resource","rlcompleter","runpy","sched","secrets","select","selectors","shelve","shlex","shutil","signal","site","smtpd","smtplib","sndhdr","socket","socketserver","sqlite3","sre_compile","sre_constants","sre_parse","ssl","stat","statistics","string","stringprep","struct","subprocess","sunau","symbol","symtable","sys","sysconfig","syslog","tabnanny","tarfile","telnetlib","tempfile","termios","textwrap","this","threading","time","timeit","tkinter","token","tokenize","trace","traceback","tracemalloc","tty","turtle","turtledemo","types","typing","unicodedata","unittest","urllib","uu","uuid","warnings","wave","weakref","webbrowser","wsgiref","xdrlib","xml","xmlrpc","zipapp","zipfile","zipimport","zlib","zoneinfo"];var Ou=__webpack_require__(91171),Au=__webpack_require__.n(Ou);const Nu=Symbol("IFileSystemNode");var Mu=function(e,t){return function(n,i){t(n,i,e)}};const Lu="diagnostics.reservedPythonNames.exclude";let ju=class{constructor(e,t,n,i,r){this.cache=e,this.workspace=t,this.platform=n,this.fs=r,this.ignoredFiles=new Set,this.cachedModules=new Set,this.pendingUpdate=Promise.resolve(),this.disposables=[],i.push(this),this.cachedModules=new Set(this.cache.get("jupyter.pythonPackages",Ru).map((e=>e.toLowerCase()))),t.onDidChangeConfiguration((e=>{e.affectsConfiguration(`jupyter.${Lu}`)&&this.initializeIgnoreList()}),this,this.disposables),this.initializeIgnoreList()}dispose(){Ie(this.disposables)}async getUriOverridingReservedPythonNames(e){const[t,n]=await Promise.all([this.fs.searchLocal("*.py",e.fsPath,!0),this.fs.searchLocal("*/__init__.py",e.fsPath,!0)]),i=[],r=Promise.all(t.map((t=>Oe.Uri.joinPath(e,t))).map((async e=>{await this.isReserved(e)&&i.push({uri:e,type:"file"})}))),o=Promise.all(n.map((t=>Oe.Uri.joinPath(e,t))).map((async e=>{await this.isReserved(e)&&i.push({uri:e,type:"__init__"})})));return await Promise.all([r,o]),i}async isReserved(e){if(!e.fsPath.toLowerCase().endsWith(".py"))return!1;await this.pendingUpdate;const t=this.platform.isWindows?e.fsPath.toLowerCase():e.fsPath;if(Array.from(this.ignoredFiles).some((e=>{if(e===t||Au()(t,e,{dot:!0}))return!0})))return!1;const n=Xt(e,Zt(e)).toLowerCase(),i="__init__"===n?Xt(en(e)).toLowerCase():n;return this.cachedModules.has(i)}async addToIgnoreList(e){await this.pendingUpdate;const t=this.workspace.getConfiguration("jupyter"),n=this.platform.isWindows?e.fsPath.toLowerCase():e.fsPath;this.initializeIgnoreList();const i=this.ignoredFiles.size;if(this.ignoredFiles.add(n),i!==this.ignoredFiles.size)return this.pendingUpdate=this.pendingUpdate.finally((()=>t.update(Lu,Array.from(this.ignoredFiles),Oe.ConfigurationTarget.Global))),this.pendingUpdate}initializeIgnoreList(){let e=this.workspace.getConfiguration("jupyter").get(Lu,[]);this.platform.isWindows&&(e=e.map((e=>e.toLowerCase()))),this.ignoredFiles=new Set(e)}};ju=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Mu(0,zn(Oi)),Mu(0,Nc(Ai)),Mu(1,zn(Qn)),Mu(2,zn(Ma)),Mu(3,zn(Ri)),Mu(4,zn(Nu))],ju);var Fu,Uu=function(e,t){return function(n,i){t(n,i,e)}};const qu="_VSCODE_getVariable",Ku=sd()`
                            try:
                                del _VSCODE_getVariable
                            except:
                                pass
                            `;let Vu=Fu=class{constructor(e,t){this.fs=e,this.context=t}async generateCodeToGetVariableInfo(e){const t=await this.getContentsOfScript(),n=e.isDebugging?"True":"False",i=`${qu}("info", ${n}, ${e.variableName})`;return e.isDebugging?{initializeCode:t,code:i,cleanupCode:Ku}:{code:`${t}\n\n${i}\n\n${Ku}`}}async generateCodeToGetVariableProperties(e){const t=await this.getContentsOfScript(),n=e.isDebugging?"True":"False",i=`${qu}("properties", ${n}, ${e.variableName}, ${e.stringifiedAttributeNameList})`;return e.isDebugging?{initializeCode:t,code:i,cleanupCode:Ku}:{code:`${t}\n\n${i}\n\n${Ku}`}}async generateCodeToGetVariableTypes(e){const t=`${await this.getContentsOfScript()}\n\n_VSCODE_rwho_ls = %who_ls\n`,n=e.isDebugging?"True":"False",i=sd()`
        try:
            del _VSCODE_rwho_ls
        except:
            pass
        `,r=`${qu}("types", ${n}, _VSCODE_rwho_ls)`;return e.isDebugging?{initializeCode:t,code:r,cleanupCode:`${Ku}\n${i}`}:{code:`${t}${r}\n\n${Ku}\n${i}`}}async getContentsOfScript(){if(Fu.contentsOfScript)return Fu.contentsOfScript;const e=tn(this.context.extensionUri,"pythonFiles","vscode_datascience_helpers","getVariableInfo","vscodeGetVariableInfo.py"),t=await this.fs.readFile(e);return Fu.contentsOfScript=t,t}};Vu=Fu=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Uu(0,zn(La)),Uu(1,zn(Ui))],Vu);var Wu,$u=function(e,t){return function(n,i){t(n,i,e)}};let Bu=Wu=class{constructor(e){this.workspaceInterpreterTracker=e,Wu.isActiveWorkspaceInterpreter=this.isActiveWorkspaceInterpreterImpl.bind(this)}activate(){this.workspaceInterpreterTracker?.activate()}isActiveWorkspaceInterpreterImpl(e,t){return this.workspaceInterpreterTracker?.isActiveWorkspaceInterpreter(e,t)??!1}};Bu.isActiveWorkspaceInterpreter=()=>!1,Bu=Wu=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),$u(0,zn(uu)),$u(0,Qi())],Bu);var Hu=function(e,t){return function(n,i){t(n,i,e)}};let zu=class{constructor(e,t,n,i,r,o){this.extensions=e,this.workspaceService=t,this.pythonExtensionChecker=n,this.disposables=i,this.interpreterService=r,this.webExtension=o,this.workspaceInterpreters=new Map}activate(){this.trackActiveInterpreters(),this.extensions.onDidChange(this.trackActiveInterpreters,this,this.disposables)}isActiveWorkspaceInterpreter(e,t){if(!t)return!1;const n=this.workspaceService.getWorkspaceFolderIdentifier(e),i=this.workspaceInterpreters.get(n);return!!i&&Do(i,t.uri)}trackActiveInterpreters(){this.webExtension||!this.trackingInterpreters&&this.pythonExtensionChecker.isPythonExtensionActive&&(this.trackingInterpreters=!0,this.interpreterService.onDidChangeInterpreter((async()=>{const e=Array.isArray(this.workspaceService.workspaceFolders)?this.workspaceService.workspaceFolders.map((e=>e.uri)):[];await Promise.all(e.map((async e=>{try{const t=this.workspaceService.getWorkspaceFolderIdentifier(e),n=await this.interpreterService.getActiveInterpreter(e);this.workspaceInterpreters.set(t,n?.uri)}catch(e){}})))}),this,this.disposables))}};zu=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Hu(0,zn(qi)),Hu(1,zn(Qn)),Hu(2,zn(Ao)),Hu(3,zn(Ri)),Hu(4,zn(ka)),Hu(5,zn(Pi))],zu);const Ju=new Set;function Gu(e){try{Ju.forEach((t=>t.report(e)))}catch(e){Sn("Failed to report progress",e)}}function Yu(e){return function(t,n,i){const r=i.value;i.value=async function(...t){return Gu({action:e,phase:"started"}),r.apply(this,t).finally((()=>{Gu({action:e,phase:"completed"})}))}}}let Qu=class{get currentAction(){return 0===this.currentActions.length?void 0:this.currentActions[this.currentActions.length-1]}constructor(e){this.appShell=e,this.progressReporters=[],this.actionPhases=new Map,this.currentActions=[],Ju.add(this)}createProgressIndicator(e,t=!1){const n=new Oe.CancellationTokenSource,i=ie(),r={location:Oe.ProgressLocation.Notification,cancellable:t,title:e};return this.appShell.withProgress(r,(async(e,t)=>{t.onCancellationRequested((()=>{t.isCancellationRequested&&n.cancel(),i.resolve()})),n.token.onCancellationRequested((()=>{i.resolve()})),this.progressReporters.push(e),await i.promise})).then(ae,ae),{token:n.token,dispose:()=>i.resolve()}}report(e){if(0!==this.progressReporters.length&&(this.actionPhases.set(e.action,e.phase),"started"===e.phase&&this.currentActions.push(e.action),this.currentAction)){for(;this.actionPhases.get(this.currentAction)&&"started"!==this.actionPhases.get(this.currentAction);)this.actionPhases.delete(this.currentAction),this.currentActions.pop();this.updateProgressMessage()}}updateProgressMessage(){if(!this.currentAction||0===this.progressReporters.length)return;const e=Oa(this.currentAction);e&&this.progressReporters.forEach((t=>t.report({message:e})))}};Qu=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(Jn))],Qu);let Xu=class{get activeColorTheme(){return Oe.window.activeColorTheme}get onDidChangeWindowState(){return Oe.window.onDidChangeWindowState}showInformationMessage(e,t,...n){return xn(`Show Information Message ${e}, ${JSON.stringify(t)}, ${JSON.stringify(n)}`),Oe.window.showInformationMessage(e,t,...n)}showWarningMessage(e,t,...n){return xn(`Show Warning Message ${e}, ${JSON.stringify(t)}, ${JSON.stringify(n)}`),Oe.window.showWarningMessage(e,t,...n)}showErrorMessage(e,t,...n){return xn(`Show Error Message ${e}, ${JSON.stringify(t)}, ${JSON.stringify(n)}`),Oe.window.showErrorMessage(e,t,...n)}showQuickPick(e,t,n){return Oe.window.showQuickPick(e,t,n)}showOpenDialog(e){return Oe.window.showOpenDialog(e)}showSaveDialog(e){return Oe.window.showSaveDialog(e)}showInputBox(e,t){return Oe.window.showInputBox(e,t)}openUrl(e){Oe.env.openExternal(Oe.Uri.parse(e)).then(ae,ae)}setStatusBarMessage(e,t){return Oe.window.setStatusBarMessage(e,t)}createStatusBarItem(e,t){return Oe.window.createStatusBarItem(e,t)}showWorkspaceFolderPick(e){return Oe.window.showWorkspaceFolderPick(e)}withProgress(e,t){return Oe.window.withProgress(e,t)}withProgressCustomIcon(e,t){const n=(new Oe.CancellationTokenSource).token,i=this.createStatusBarItem(Oe.StatusBarAlignment.Left),r={report:t=>{i.text=`${e} ${t.message}`}};return i.show(),t(r,n).then((e=>(i.dispose(),e)))}createQuickPick(){return Oe.window.createQuickPick()}createInputBox(){return Oe.window.createInputBox()}createTreeView(e,t){return Oe.window.createTreeView(e,t)}createOutputChannel(e){return Oe.window.createOutputChannel(e)}};Xu=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],Xu);const Zu=new Set(["setContext"]);let ep=class{registerCommand(e,t,n){return Zu.add(e),Oe.commands.registerCommand(e,((...i)=>(io(F.CommandExecuted,void 0,{command:e}),n?t.call(n,...i):t(...i))),n)}registerTextEditorCommand(e,t,n){return Zu.add(e),Oe.commands.registerTextEditorCommand(e,((i,r,...o)=>(io(F.CommandExecuted,void 0,{command:e}),n?t.call(n,i,r,...o):t(i,r,...o))),n)}executeCommand(e,...t){return Zu.has(e)||io(F.CommandExecuted,void 0,{command:e}),Oe.commands.executeCommand(e,...t)}getCommands(e){return Oe.commands.getCommands(e)}};var tp;ep=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],ep);class np{constructor(e){this.jupyterConfig=e}async migrateSettings(){const e=[];for(let t of Object.keys(tp.migratedSettings))e.push(...this.migrateSetting(t,tp.migratedSettings[t]));try{await Promise.all(e)}catch(e){ip(e)}}migrateSetting(e,t){const n=this.jupyterConfig.inspect(e),i=this.jupyterConfig.inspect(t),r=[];if(void 0!==n?.workspaceValue){let o=Promise.resolve();void 0===i?.workspaceValue&&(o=this.jupyterConfig.update(t,n.workspaceValue,Oe.ConfigurationTarget.Workspace)),r.push(o.then((()=>this.jupyterConfig.update(e,void 0,Oe.ConfigurationTarget.Workspace)),ip))}if(void 0!==n?.workspaceFolderValue){let o=Promise.resolve();void 0===i?.workspaceFolderValue&&(o=this.jupyterConfig.update(t,n.workspaceFolderValue,Oe.ConfigurationTarget.WorkspaceFolder)),r.push(o.then((()=>this.jupyterConfig.update(e,void 0,Oe.ConfigurationTarget.WorkspaceFolder)),ip))}if(void 0!==n?.globalValue){let o=Promise.resolve();void 0===i?.globalValue&&(o=this.jupyterConfig.update(t,n.globalValue,Oe.ConfigurationTarget.Global)),r.push(o.then((()=>this.jupyterConfig.update(e,void 0,Oe.ConfigurationTarget.Global)),ip))}return r}}function ip(e){Cn("Error migrating Jupyter configuration",e)}tp=np,np.migratedSettings={interactiveWindowMode:"interactiveWindow.creationMode",interactiveWindowViewColumn:"interactiveWindow.viewColumn",sendSelectionToInteractiveWindow:"interactiveWindow.textEditor.executeSelection",magicCommandsAsComments:"interactiveWindow.textEditor.magicCommandsAsComments",enableAutoMoveToNextCell:"interactiveWindow.textEditor.autoMoveToNextCell",newCellOnRunLast:"interactiveWindow.textEditor.autoAddNewCell",pythonCellFolding:"interactiveWindow.textEditor.cellFolding",enableCellCodeLens:"interactiveWindow.codeLens.enable",addGotoCodeLenses:"interactiveWindow.codeLens.enableGotoCell",codeLenses:"interactiveWindow.codeLens.commands",debugCodeLenses:"interactiveWindow.codeLes.debugCommands",codeRegularExpression:"interactiveWindow.cellMarker.codeRegex",markdownRegularExpression:"interactiveWindow.cellMarker.markdownRegex",decorateCells:"interactiveWindow.cellMarker.decorateCells",defaultCellMarker:"interactiveWindow.cellMarker.default"},np.fullSettingIds={...tp.migratedSettings};var rp;class op{get onDidChange(){return this._changeEmitter.event}constructor(e,t,n,i){this._systemVariablesCtor=t,this._type=n,this._workspace=i,this.logging={level:"error"},this.allowUnauthorizedRemoteConnection=!1,this.jupyterInterruptTimeout=1e4,this.jupyterLaunchTimeout=6e4,this.jupyterLaunchRetries=3,this.notebookFileRoot="",this.useDefaultConfigForJupyter=!1,this.searchForJupyter=!1,this.sendSelectionToInteractiveWindow=!1,this.markdownRegularExpression="",this.codeRegularExpression="",this.errorBackgroundColor="",this.ignoreVscodeTheme=!1,this.variableExplorerExclude="",this.decorateCells="currentCell",this.enableCellCodeLens=!1,this.askForLargeDataFrames=!1,this.enableAutoMoveToNextCell=!1,this.askForKernelRestart=!1,this.generateSVGPlots=!1,this.codeLenses="",this.debugCodeLenses="",this.debugpyDistPath="",this.stopOnFirstLineWhileDebugging=!1,this.magicCommandsAsComments=!1,this.pythonExportMethod="direct",this.stopOnError=!1,this.remoteDebuggerPort=0,this.addGotoCodeLenses=!1,this.runStartupCommands=[],this.debugJustMyCode=!1,this.defaultCellMarker="",this.themeMatplotlibPlots=!1,this.variableQueries=[],this.disableJupyterAutoStart=!1,this.enablePythonKernelLogging=!1,this.jupyterCommandLineArguments=[],this.widgetScriptSources=[],this.interactiveWindowMode="multiple",this.pythonCellFolding=!0,this.interactiveWindowViewColumn="secondGroup",this.disableZMQSupport=!1,this.forceIPyKernelDebugger=!1,this.verboseLogging=!1,this.showVariableViewWhenDebugging=!0,this.newCellOnRunLast=!0,this.pythonCompletionTriggerCharacters="",this.logKernelOutputSeparately=!1,this.development=!1,this.poetryPath="",this.excludeUserSitePackages=!1,this.enableExtendedKernelCompletions=!1,this.useOldKernelResolve=!1,this.variableTooltipFields={python:{Tensor:["shape","dtype","device"]}},this._changeEmitter=new Oe.EventEmitter,this._disposables=[],this._workspaceRoot=e,this.initialize(),i&&!1===i.isTrusted&&(this.disableJupyterAutoStart=!0)}static getInstance(e,t,n,i){const r=op.getSettingsUriAndTarget(e,i).uri,o=r?r.path:"";let s=op.jupyterSettings.get(o);return s?"web"===s._type&&"node"===n&&(s._systemVariablesCtor=t,s._type=n):(s=new op(r,t,n,i),op.jupyterSettings.set(o,s)),s}static getSettingsUriAndTarget(e,t){const n=e?t.getWorkspaceFolder(e):void 0;let i=n?n.uri:void 0;return!i&&Array.isArray(t.workspaceFolders)&&t.workspaceFolders.length>0&&(i=t.workspaceFolders[0].uri),{uri:i,target:i?Oe.ConfigurationTarget.WorkspaceFolder:Oe.ConfigurationTarget.Global}}static dispose(){if(!w())throw new Error("Dispose can only be called from unit tests");op.jupyterSettings.forEach((e=>e&&e.dispose())),op.jupyterSettings.clear()}dispose(){this._disposables.forEach((e=>e&&e.dispose())),this._disposables=[]}createSystemVariables(e){return new this._systemVariablesCtor(e,this._workspaceRoot,this._workspace)}toJSON(){const e={};return this.getSerializableKeys().forEach((t=>e[t]=this[t])),e}update(e,t){const n=this.createSystemVariables(void 0),i=n.resolveAny(e.get("logging"));i&&(i.level=function(e){switch(e){case"info":return W.Info;case"warn":return W.Warn;case"off":return"off";case"debug":return W.Debug;case"verbose":return W.Trace;default:return W.Error}}(i.level),this.logging?Object.assign(this.logging,i):this.logging=i);const r=n.resolveAny(e.get("experiments"));this.experiments?Object.assign(this.experiments,r):this.experiments=r,this.experiments=this.experiments?this.experiments:{enabled:!0,optInto:[],optOutFrom:[]};const o=(e,t)=>{const i=np.fullSettingIds[e],r=i&&void 0!==t.get(i)?t.get(i):t.get(e),o=n.resolveAny(r);("variableTooltipFields"!==e||o)&&(this[e]=o)};this.getSerializableKeys().filter((e=>"experiments"!==e&&"logging"!==e&&"kernelPickerType"!==e)).forEach((t=>o(t,e))),t&&o("poetryPath",t)}onWorkspaceFoldersChanged(){const e=this._workspace.workspaceFolders.map((e=>e.uri.path)),t=Array.from(op.jupyterSettings.keys()).filter((t=>e.indexOf(t)<0));if(t.length>0)for(const e of t)op.jupyterSettings.delete(e)}initialize(){const e=()=>{const e=this._workspace.getConfiguration("jupyter",this._workspaceRoot),t=this._workspace.getConfiguration("python",this._workspaceRoot);this.update(e,t),this.debounceChangeNotification()};this._disposables.push(this._workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this)),this._disposables.push(this._workspace.onDidChangeConfiguration((t=>{t.affectsConfiguration("jupyter")&&e(),t.affectsConfiguration("python.poetryPath")&&e()})));const t=this._workspace.getConfiguration("jupyter",this._workspaceRoot),n=this._workspace.getConfiguration("python",this._workspaceRoot);t&&(this.update(t,n),this.migrateSettings(t).catch(ae))}async migrateSettings(e){const t=new np(e);await t.migrateSettings()}debounceChangeNotification(){this._changeEmitter.fire()}fireChangeNotification(){this._changeEmitter.fire()}getSerializableKeys(){return Object.getOwnPropertyNames(this).filter((e=>!e.startsWith("_")))}}op.jupyterSettings=new Map,function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([(rp=1,w()&&(rp=void 0),function(e){return function(t,n,i){const r=i.value,o=me((function(){return r.apply(this,arguments)}),e,{});i.value=o}}(rp))],op.prototype,"debounceChangeNotification",null);class sp{constructor(e){this.serviceContainer=e,this.workspaceService=this.serviceContainer.get(Qn)}async updateSectionSetting(e,t,n,i,r){let o={uri:i,target:r||Oe.ConfigurationTarget.WorkspaceFolder};"jupyter"===e&&r!==Oe.ConfigurationTarget.Global&&(o=op.getSettingsUriAndTarget(i,this.workspaceService));const s=this.workspaceService.getConfiguration(e,o.uri),a=s.inspect(t);void 0!==a&&(r===Oe.ConfigurationTarget.Global&&a.globalValue===n||r===Oe.ConfigurationTarget.Workspace&&a.workspaceValue===n||r===Oe.ConfigurationTarget.WorkspaceFolder&&a.workspaceFolderValue===n)||(await s.update(t,n,r),r&&await this.verifySetting(s,r,t,n))}async updateSetting(e,t,n,i){return this.updateSectionSetting("jupyter",e,t,n,i)}async verifySetting(e,t,n,i){if(w()&&!S()){let r=0;do{const o=e.inspect(n);if(!o&&void 0===i)break;if(o&&void 0!==i&&(t===Oe.ConfigurationTarget.Global?o.globalValue:t===Oe.ConfigurationTarget.Workspace?o.workspaceValue:o.workspaceFolderValue)===i)break;await new Promise((e=>setTimeout(e,250))),r+=1}while(r<20)}}}let ap=class extends sp{constructor(e){super(e)}getSettings(e){return op.getInstance(e,Ol,"node",this.workspaceService)}};ap=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(ya))],ap);var cp=__webpack_require__(12884),lp=__webpack_require__.n(cp),dp=__webpack_require__(36276),up=__webpack_require__(73837);const pp="utf8";let hp=class{constructor(e){this.httpClient=e,this.vscfs=Oe.workspace.fs}arePathsSame(e,t){return Gt(e,t)}async getFiles(e){return(await this.vscfs.readDirectory(e)).filter((e=>e[1]===Oe.FileType.File)).map((e=>Oe.Uri.file(e[0])))}async copy(e,t,n){await this.vscfs.copy(e,t,n)}async createDirectory(e){await this.vscfs.createDirectory(e)}async delete(e){await this.vscfs.delete(e)}async readFile(e){const t=await this.vscfs.readFile(e);return Buffer.from(t).toString(pp)}async stat(e){return this.vscfs.stat(e)}async writeFile(e,t){const n="string"==typeof t?Buffer.from(t):t;return this.vscfs.writeFile(e,n)}async exists(e,t){if("http"===e.scheme.toLowerCase()||"https"===e.scheme.toLowerCase())return this.httpClient.exists(e.toString());let n;try{n=await this.stat(e)}catch(t){return El(t)||Sn(`stat() failed for "${e}"`,t),!1}return void 0===t||(t===Oe.FileType.Unknown?n.type===Oe.FileType.Unknown:(n.type&t)===t)}async getFileHash(e){const t=await this.stat(e);return Mr(`${t.ctime}-${t.mtime}`,"SHA-512")}};hp=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(Fi))],hp);let fp=class extends hp{constructor(e){super(e),this.globFiles=(0,up.promisify)(lp())}createLocalWriteStream(e){return il.createWriteStream(e)}async createTemporaryLocalFile(e){const t={postfix:"string"==typeof e?e:e.fileExtension,prefix:e&&"object"==typeof e?e.prefix:void 0};return new Promise(((e,n)=>{dp.tP(t,((t,i,r,o)=>{if(t)return n(t);e({filePath:i,dispose:o})}))}))}async searchLocal(e,t,n){let i;t&&(i={...i,cwd:t}),n&&(i={...i,dot:n});const r=await this.globFiles(e,i);return Array.isArray(r)?r:[]}async writeLocalFile(e,t){return await il.ensureDir(Pt(e)),il.writeFile(e,t)}async readFile(e){if(mp(e)){const t=await il.readFile(un(e));return Buffer.from(t).toString(pp)}return super.readFile(e)}async delete(e){mp(e)?await this.exists(e)&&((await this.stat(e)).type===Oe.FileType.Directory?await new Promise((t=>il.rm(un(e),{force:!0,recursive:!0},t))):await il.unlink(un(e))):await super.delete(e)}async exists(e,t){return mp(e)?il.pathExists(un(e)):super.exists(e,t)}async createDirectory(e){mp(e)?await il.ensureDir(un(e)):await this.vscfs.createDirectory(e)}async writeFile(e,t){if(mp(e)){const n=un(e);return await il.ensureDir(Pt(n)),il.writeFile(n,t)}await this.vscfs.writeFile(e,"string"==typeof t?Buffer.from(t):t)}async copy(e,t,n){if(mp(e)&&mp(t)){const i=void 0===typeof n||null==typeof n?.overwrite||n?.overwrite;await il.copy(un(e),un(t),{overwrite:i})}else await super.copy(e,t,n)}};function mp(e){return"file"===e.scheme}fp=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(Fi))],fp);class gp{get onDidChangeConfiguration(){return Oe.workspace.onDidChangeConfiguration}get rootFolder(){const e=Array.isArray(Oe.workspace.workspaceFolders)&&Oe.workspace.workspaceFolders.length>0?Oe.workspace.workspaceFolders[0]:void 0;if(e)return e.uri}get workspaceFolders(){return Oe.workspace.workspaceFolders}get onDidChangeWorkspaceFolders(){return Oe.workspace.onDidChangeWorkspaceFolders}get hasWorkspaceFolders(){return Array.isArray(Oe.workspace.workspaceFolders)&&Oe.workspace.workspaceFolders.length>0}get workspaceFile(){return Oe.workspace.workspaceFile}getConfiguration(e,t){return Oe.workspace.getConfiguration(e,t||null)}getWorkspaceFolder(e){return e?Oe.workspace.getWorkspaceFolder(e):void 0}asRelativePath(e,t){return Oe.workspace.asRelativePath(e,t)}get isTrusted(){return Oe.workspace.isTrusted}get onDidGrantWorkspaceTrust(){return Oe.workspace.onDidGrantWorkspaceTrust}createFileSystemWatcher(e,t,n,i){return Oe.workspace.createFileSystemWatcher(e,n,n,i)}findFiles(e,t,n,i){return Oe.workspace.findFiles(e,t,n,i)}getWorkspaceFolderIdentifier(e,t=""){const n=e?Oe.workspace.getWorkspaceFolder(e):Oe.workspace.workspaceFolders?Oe.workspace.workspaceFolders[0]:void 0;return n?Ct(ln()===cn.Windows?n.uri.path.toUpperCase():n.uri.path):t}}let vp=class extends gp{async computeWorkingDirectory(e){const t=!(!e||"file"!==e.scheme)&&await il.pathExists(e.fsPath);return e&&"file"===e.scheme&&await il.pathExists(Pt(e.fsPath))&&e&&e.fsPath.includes(".")?Pt(e.fsPath):t&&e&&(await il.stat(e.fsPath)).isDirectory()?e.fsPath:this.getWorkspaceFolder(e)?.uri.fsPath||this.rootFolder?.fsPath||process.cwd()}};vp=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],vp);var yp=function(e,t){return function(n,i){t(n,i,e)}};let bp=class{constructor(e,t){this.jupyterOutput=e,this.disposableRegistry=t}register(e){this.disposableRegistry.push(e.registerCommand(N.ViewJupyterOutput,this.viewJupyterOutput,this))}viewJupyterOutput(){this.jupyterOutput.show(!0)}};bp=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),yp(0,zn(Ii)),yp(0,Nc(m)),yp(1,zn(Ri))],bp);class wp{get loadFailed(){return this.loadFailedEmitter.event}constructor(e,t,n,i=[]){this.fs=e,this.disposableRegistry=t,this.options=n,this.loadFailedEmitter=new Oe.EventEmitter;const r={enableScripts:!0,localResourceRoots:[this.options.rootPath,this.options.cwd,...i]};n.webviewHost?(this.webviewHost=n.webviewHost,this.webviewHost.webview.options=r):this.webviewHost=this.createWebview(r),this.loadPromise=this.load()}asWebviewUri(e){if(!this.webviewHost?.webview)throw new Error("WebView not initialized, too early to get a Uri");return this.webviewHost.webview.asWebviewUri(e)}postMessage(e){this.webviewHost?.webview&&this.webviewHost?.webview.postMessage(e)}async generateLocalReactHtml(){if(!this.webviewHost?.webview)throw new Error("WebView not initialized, too early to get a Uri");const e=this.webviewHost.webview.asWebviewUri(this.options.cwd).toString(),t=this.options.scripts.map((e=>this.webviewHost.webview.asWebviewUri(e))),n=this.webviewHost.webview.asWebviewUri(this.options.rootPath).toString();return`<!doctype html>\n        <html lang="en">\n            <head>\n                <meta charset="utf-8">\n                <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">\n                <meta http-equiv="Content-Security-Policy" content="img-src 'self' data: https: http: blob: ${this.webviewHost.webview.cspSource}; default-src 'unsafe-inline' 'unsafe-eval' data: https: http: blob: ${this.webviewHost.webview.cspSource};">\n                <meta name="theme-color" content="#000000">\n                <meta name="theme" content="${C.GeneratedThemeName}"/>\n                <title>VS Code Python React UI</title>\n                <base href="${e}${e.endsWith("/")?"":"/"}"/>\n                </head>\n            <body>\n                <noscript>You need to enable JavaScript to run this app.</noscript>\n                <div id="root"></div>\n                <script type="text/javascript">\n                    // Public path that will be used by webpack.\n                    window.__PVSC_Public_Path = "${n}/";\n                    function resolvePath(relativePath) {\n                        if (relativePath && relativePath[0] == '.' && relativePath[1] != '.') {\n                            return "${e}" + relativePath.substring(1);\n                        }\n\n                        return "${e}" + relativePath;\n                    }\n                    function forceTestMiddleware() {\n                        return false;\n                    }\n                <\/script>\n                ${t.map((e=>`<script type="text/javascript" src="${e}"><\/script>`)).join("\n")}\n            </body>\n        </html>`}async load(){try{this.webviewHost?.webview&&((await Promise.all(this.options.scripts.map((e=>this.fs.exists(e))))).every((e=>!0===e))?(this.webviewHost.webview.html=await this.generateLocalReactHtml(),this.postLoad(this.webviewHost)):this.webviewHost.webview.html=gr.badWebPanelFormatString(this.options.scripts.join(", ")))}catch(e){Sn(`Error Loading WebviewPanel: ${e}`),this.loadFailedEmitter.fire()}}}var _p=function(e,t){return function(n,i){t(n,i,e)}};class Sp extends wp{get visible(){return!!this.webviewHost&&this.webviewHost.visible}get onDidChangeVisibility(){return this._onDidChangeVisibility.event}constructor(e,t,n,i=[]){super(e,t,n,i),this.panelOptions=n,this._onDidChangeVisibility=new Oe.EventEmitter}createWebview(e){throw new Error("Webview Views must be passed in an initial view")}postLoad(e){this.disposableRegistry.push(e.onDidDispose((()=>{this.webviewHost=void 0,this.panelOptions.listener.dispose().catch(ae)}))),this.disposableRegistry.push(e.webview.onDidReceiveMessage((e=>{this.panelOptions.listener.onMessage(e.type,e.payload)}))),this.disposableRegistry.push(e.onDidChangeVisibility((()=>{this._onDidChangeVisibility.fire()}))),this._onDidChangeVisibility.fire()}}let Cp=class{constructor(e,t){this.disposableRegistry=e,this.fs=t}async create(e){return new Sp(this.fs,this.disposableRegistry,e)}};Cp=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),_p(0,zn(Ri)),_p(1,zn(La))],Cp);var kp=function(e,t){return function(n,i){t(n,i,e)}};class Ep extends wp{get panel(){return this.webviewHost}get panelOptions(){return this.options}constructor(e,t,n,i=[]){super(e,t,n,i)}async show(e){await this.loadPromise,this.panel&&(e?this.panel.visible||this.panel.reveal(this.panel.viewColumn,e):this.panel.active||this.panel.reveal(this.panel.viewColumn,e))}close(){this.panel&&this.panel.dispose()}get viewColumn(){return this.panel?.viewColumn}isVisible(){return!!this.panel&&this.panel.visible}isActive(){return!!this.panel&&this.panel.active}setTitle(e){this.panelOptions.title=e,this.panel&&(this.panel.title=e)}createWebview(e){return Oe.window.createWebviewPanel(this.panelOptions.title.toLowerCase().replace(" ",""),this.panelOptions.title,{viewColumn:this.panelOptions.viewColumn,preserveFocus:!0},{retainContextWhenHidden:!0,enableFindWidget:!0,...e})}postLoad(e){this.disposableRegistry.push(e.onDidDispose((()=>{this.webviewHost=void 0,this.panelOptions.listener.dispose().catch(ae)}))),this.disposableRegistry.push(e.webview.onDidReceiveMessage((e=>{this.panelOptions.listener.onMessage(e.type,e.payload)}))),this.disposableRegistry.push(e.onDidChangeViewState((e=>{this.panelOptions.listener.onChangeViewState(this)}))),this.panelOptions.listener.onChangeViewState(this)}}let xp=class{constructor(e,t,n){this.disposableRegistry=e,this.fs=t,this.context=n}async create(e){const t=[Oe.Uri.file(Et(this.context.extensionPath,"temp"))];return Array.isArray(e.additionalPaths)&&t.push(...e.additionalPaths),new Ep(this.fs,this.disposableRegistry,e,t)}};xp=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),kp(0,zn(Ri)),kp(1,zn(La)),kp(2,zn(Ui))],xp);const Tp=Symbol("IJupyterCommandFactory"),Pp=Symbol("IJupyterSubCommandExecutionService");var Ip=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Dp=function(e,t){return function(n,i){t(n,i,e)}};function Rp(e,t){const n=t.displayName||t.envName||t.envPath?.fsPath||t.uri.fsPath,i=e.map((e=>nu.get(e))).filter((e=>!!e)).map((e=>e));switch(i.length){case 0:return"";case 1:return n?gr.libraryRequiredToLaunchJupyterNotInstalledInterpreter(n,i[0]):gr.libraryRequiredToLaunchJupyterNotInstalled(i[0]);default:{const e=i.pop();return n?gr.librariesRequiredToLaunchJupyterNotInstalledInterpreter(n,`${i.join(", ")} ${lr.and} ${e}`):gr.librariesRequiredToLaunchJupyterNotInstalled(`${i.join(", ")} ${lr.and} ${e}`)}}}let Op=class{constructor(e,t,n){this.applicationShell=e,this.installer=t,this.commandFactory=n,this.dependenciesInstalledInInterpreter=new Set}async installMissingDependencies(e,t){const n=new Oe.CancellationTokenSource;try{const t=e.envType===ko.Conda?Promise.resolve(void 0):this.installer.isInstalled(xd.pip,e),[i,r]=await Promise.all([this.getDependenciesNotInstalled(e,void 0),t]);if(0===i.length)return ai.ok;const o=Rp(!1===r?[xd.pip].concat(i):i,e);switch(io(F.PythonModuleInstall,void 0,{action:"displayed",moduleName:nu.get(xd.jupyter),pythonEnvType:e.envType}),await this.applicationShell.showErrorMessage(o,{modal:!0},gr.jupyterInstall,gr.selectDifferentJupyterInterpreter)){case gr.jupyterInstall:{i.includes(xd.kernelspec)&&!i.includes(xd.jupyter)&&i.push(xd.jupyter);const t=i.filter((e=>e!==xd.kernelspec));t.sort(((e,t)=>e===xd.jupyter?-1:t===xd.jupyter?1:e===xd.notebook?-1:t===xd.notebook?1:0));let o=t.shift();for(;o;){if(await xa(n.token,Ed.Ignore,this.installer.install(o,e,n,void 0,!1===r))!==Ed.Installed)return ai.cancel;o=t.shift()}return io(F.UserInstalledJupyter),this.checkKernelSpecAvailability(e)}case gr.selectDifferentJupyterInterpreter:return io(F.UserDidNotInstallJupyter),ai.selectAnotherInterpreter;case gr.pythonInteractiveHelpLink:return this.applicationShell.openUrl(g.PythonInteractiveHelpLink),io(F.UserDidNotInstallJupyter),ai.cancel;default:return io(F.UserDidNotInstallJupyter),ai.cancel}}finally{n.dispose()}}async areDependenciesInstalled(e,t){return this.getDependenciesNotInstalled(e,t).then((e=>0===e.length))}async getDependenciesNotInstalled(e,t){const n=Qt(e.uri);if(this.dependenciesInstalledInInterpreter.has(n))return[];const i=[];if(await xa(t,Promise.all([this.installer.isInstalled(xd.jupyter,e).then((e=>e?void 0:i.push(xd.jupyter))),this.installer.isInstalled(xd.notebook,e).then((e=>e?void 0:i.push(xd.notebook)))])),i.length>0)return i;if(t?.isCancellationRequested)return[];const r=await this.isKernelSpecAvailable(e,t).then((e=>e?[]:[xd.kernelspec]));return 0===r.length&&this.dependenciesInstalledInInterpreter.add(n),r}async isKernelSpecAvailable(e,t){return this.commandFactory.createInterpreterCommand(U.KernelSpecCommand,"jupyter",["-m","jupyter","kernelspec"],e,!1).exec(["--version"],{throwOnStdErr:!0}).then((()=>!0)).catch((e=>(Sn("Kernel spec not found: ",e),!1)))}async checkKernelSpecAvailability(e,t){return await this.isKernelSpecAvailable(e)?ai.ok:t?.isCancellationRequested?ai.cancel:await this.applicationShell.showErrorMessage(gr.jupyterKernelSpecModuleNotFound(e.uri.fsPath),{modal:!0},gr.selectDifferentJupyterInterpreter)===gr.selectDifferentJupyterInterpreter?ai.selectAnotherInterpreter:ai.cancel}};function Ap(e,t){const n=Uo(e),i={label:`${e.id===t.recommended?.id?"$(star-full) ":Wo(e)?"$(warning) ":""}${n}`};return i.description=pn(e.executable.uri||e.path,Oe.workspace.workspaceFolders||[],(new ul).homeDir),i.tooltip=Wo(e)?gr.pythonCondaKernelsWithoutPython:"",i}function Np(e){switch(Vo(e)){case ko.Conda:return Wo(e)?{label:gr.kernelCategoryForCondaWithoutPython,sortKey:"Z"}:{label:gr.kernelCategoryForConda};case ko.Pipenv:return{label:gr.kernelCategoryForPipEnv};case ko.Poetry:return{label:gr.kernelCategoryForPoetry};case ko.Pyenv:return{label:gr.kernelCategoryForPyEnv};case ko.Venv:case ko.VirtualEnv:case ko.VirtualEnvWrapper:return{label:gr.kernelCategoryForVirtual};default:return{label:gr.kernelCategoryForGlobal}}}Ip([Yu(Da.InstallingMissingDependencies)],Op.prototype,"installMissingDependencies",null),Op=Ip([Kn(),Dp(0,zn(Jn)),Dp(1,zn(Ld)),Dp(2,zn(Tp))],Op);var Mp=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Lp=function(e,t){return function(n,i){t(n,i,e)}};const jp="INTERPRETER_PATH_SELECTED_FOR_JUPYTER_SERVER",Fp="INTERPRETER_PATH_WAS_SELECTED_FOR_JUPYTER_SERVER";let Up=class{constructor(e){this.memento=e}get interpreterSetAtleastOnce(){return!!this.selectedPythonPath||this.memento.get(Fp,!1)}get selectedPythonPath(){if(this._interpreterPath)return this._interpreterPath;const e=this.memento.get(jp,void 0);return e?Oe.Uri.parse(e):void 0}updateSelectedPythonPath(e){this._interpreterPath=e,this.memento.update(jp,e?.toString()).then(ae,ae),this.memento.update(Fp,!0).then(ae,ae)}};Up=Mp([Kn(),Lp(0,zn(Oi)),Lp(0,Nc(Ai))],Up);let qp=class{constructor(e,t,n,i){this.api=e,this.memento=t,this.checker=n,this.disposables=i}activate(){this.activateBackground().catch(ae),this.api.onDidActivatePythonExtension(this.activateBackground,this,this.disposables)}async activateBackground(){!this.memento.get(jp)&&this.checker.isPythonExtensionActive&&await this.migrateSettings()}async migrateSettings(){if(this.settingsMigrated)return;this.settingsMigrated=!0;const e=(await this.api.getApi()).getInterpreterPathSelectedForJupyterServer();await this.memento.update(jp,e),await this.memento.update(Fp,!0)}};qp=Mp([Kn(),Lp(0,zn(Oo)),Lp(1,zn(Oi)),Lp(1,Nc(Ai)),Lp(2,zn(Ao)),Lp(3,zn(Ri))],qp);var Kp,Vp=__webpack_require__(82361);try{Bn([Kn()],Vp.EventEmitter)}catch(e){Cn("Failed to decorate EventEmitter for DI (possibly already decorated by another Extension)",e)}let Wp=Kp=class{static get instance(){return Kp._instance}constructor(e){this.container=e,Kp._instance=this}get(e,t){return t?this.container.getNamed(e,t):this.container.get(e)}getAll(e,t){return t?this.container.getAllNamed(e,t):this.container.getAll(e)}tryGet(e,t){try{return t?this.container.getNamed(e,t):this.container.get(e)}catch{}}};Wp=Kp=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],Wp);class $p{constructor(e){this.label=e}}class Bp extends $p{constructor(e,t){super(e),this.sortKey=t,this.kind=Oe.QuickPickItemKind.Separator}}class Hp extends dc{constructor(e,t,n,i,r,o){super(),this.provider=e,this.createQuickPickItem=t,this.getCategory=n,this.options=i,this.createErrorQuickPickItem=r,this._title=o,this.categories=new Map,this.quickPickItems=[],this.previouslyEnteredValue="",this.commands=new Set,this._placeholder="",this.quickPickItemMap=new WeakSet,this.errorQuickPickItemMap=new WeakSet}set recommended(e){const t=this._recommended?.id!==e?.id;this._recommended=e,t&&this.quickPick&&this.rebuildQuickPickItems(this.quickPick)}get recommended(){return this._recommended}set placeholder(e){this.quickPick&&(this.quickPick.placeholder=e),this._placeholder=e}get placeholder(){return this._placeholder}set selected(e){const t=this._selected!==e;this._selected=e,t&&this.quickPick&&this.rebuildQuickPickItems(this.quickPick)}get selected(){return this._selected}createQuickPick(){const e=[],t={iconPath:new Oe.ThemeIcon("refresh"),tooltip:lr.refresh},n=this.quickPick=Oe.window.createQuickPick();return e.push(n),this.quickPickItems=[],n.placeholder=this.placeholder,n.buttons=this.options.supportsBack?[Oe.QuickInputButtons.Back,t]:[t],n.ignoreFocusOut=!0,n.busy=!0,n.value=this.previouslyEnteredValue,n.onDidChangeValue((e=>this.previouslyEnteredValue=e),this,e),n.onDidHide((()=>Ie(e)),this,e),n.title=this._title||gr.kernelPickerSelectKernelFromRemoteTitleWithoutName,this.provider.then((i=>{let r;this.resolvedProvider=i,this._title||(n.title=gr.kernelPickerSelectKernelFromRemoteTitle(i.title)),n.busy="discovering"===i.status,i.onDidChange((()=>this.updateQuickPickItems(n,i)),this,e),n.onDidTriggerButton((async e=>{e===t&&(n.busy=!0,await i.refresh().catch(ae),this.updateQuickPickItems(n,i),n.busy=!1)}),this,e),i.onDidChangeStatus((()=>{switch(r&&clearTimeout(r),i.status){case"discovering":n.busy=!0;break;case"idle":r=setTimeout((()=>n.busy=!1),500),e.push(new Oe.Disposable((()=>r&&clearTimeout(r))))}}),this,e),zp(i.items.map((e=>this.toQuickPickItem(e))),((e,t)=>Jp(this.getCategory(e.item,this),this.getCategory(t.item,this)))).forEach((e=>{const t=this.connectionToCategory(e[0].item);this.quickPickItems.push(t),e.sort(((e,t)=>e.label.localeCompare(t.label))),this.quickPickItems.push(...e),this.categories.set(t,new Set(e))})),this.updateQuickPickItems(n,i)})).catch(ae),this.disposables.push(...e),{quickPick:n,disposables:e}}isCommandQuickPickItem(e){return this.commands.has(e)}addCommand(e,t){const n=e;return n.execute=t,this.commands.add(n),this.quickPick&&this.rebuildQuickPickItems(this.quickPick),{dispose:()=>{this.commands.delete(n)}}}async selectItem(e){for(;!e.isCancellationRequested;){const{quickPick:t,disposables:n}=this.createQuickPick();t.show();try{this.previouslySelectedItem=void 0;const i=await new Promise(((e,i)=>{t.onDidChangeSelection((t=>{if(t.length){const n=t[0];this.isSelectorQuickPickItem(n)?e(n.item):this.isCommandQuickPickItem(n)?e(n):this.isErrorQuickPickItem(n)}})),t.onDidTriggerButton((t=>t===Oe.QuickInputButtons.Back?e(Xc.back):void 0),this,n),t.onDidHide((()=>e(void 0)),this,n)}));if(e.isCancellationRequested)return;if(!i)return;if(i instanceof Xc)return i===Xc.back?Xc.back:void 0;if(i&&"label"in i&&this.isCommandQuickPickItem(i)){this.previouslySelectedItem=i;const e=await i.execute();if(!e)continue;if(e===Xc.back)continue;return e}return i||void 0}finally{Ie(n)}}}updateQuickPickItems(e,t){const n=new Map(e.items.filter((e=>this.isSelectorQuickPickItem(e))).map((e=>e)).map((e=>[e.item.id,e.item]))),i=new Map(t.items.map((e=>[e.id,e])));this.quickPickItems=this.quickPickItems.map((e=>{if(this.isSelectorQuickPickItem(e)){const t=n.get(e.item.id);if(t&&t!==e.item)return this.toQuickPickItem(t);const r=i.get(e.item.id);if(r){const t=this.toQuickPickItem(r);if(JSON.stringify({...e,item:""})!==JSON.stringify({...t,item:""}))return this.toQuickPickItem(r)}}return e}));const r=t.items.filter((e=>!n.has(e.id))).map((e=>this.toQuickPickItem(e)));this.removeOutdatedQuickPickItems(e,t),zp(r,((e,t)=>Jp(this.getCategory(e.item,this),this.getCategory(t.item,this)))).forEach((e=>{e.sort(((e,t)=>e.label.localeCompare(t.label)));const t=this.connectionToCategory(e[0].item),n=this.quickPickItems.find((e=>e.kind===Oe.QuickPickItemKind.Separator&&e.label===t.label));if(n){const t=this.quickPickItems.indexOf(n),i=this.categories.get(n),r=new Map(Array.from(i).map((e=>[e.item.id,e]))),o=i.size;e.forEach((e=>{const t=r.get(e.item.id);t&&i.delete(t),i.add(e)}));const s=Array.from(i);s.sort(((e,t)=>e.label.localeCompare(t.label))),this.quickPickItems.splice(t+1,o,...s)}else{const n=this.quickPickItems.filter((e=>e instanceof Bp)).map(((e,t)=>[e,t]));n.push([t,-1]),n.sort(((e,t)=>e[0].sortKey.localeCompare(t[0].sortKey)));const i=n.findIndex((e=>-1===e[1]));let r=0;i>0&&(r=n.length===i+1?this.quickPickItems.length:n[i+1][1]),e.sort(((e,t)=>e.label.localeCompare(t.label))),this.quickPickItems.splice(r,0,t,...e),this.categories.set(t,new Set(e))}})),this.rebuildQuickPickItems(e)}rebuildQuickPickItems(e){let t=this.recommended?this.toQuickPickItem(this.recommended):void 0;const n=[];t&&n.push({label:gr.recommendedItemCategoryInQuickPick,kind:Oe.QuickPickItemKind.Separator},t);let i=t;i=this.selected?this.quickPickItems.filter((e=>this.isSelectorQuickPickItem(e))).map((e=>e)).find((e=>e.item.id===this.selected?.id)):i;const r=this.quickPickItems.filter((e=>!this.isSelectorQuickPickItem(e)||e.item.id!==t?.item?.id)),o=e.activeItems.length?e.activeItems[0]:void 0;i&&o&&(this.isSelectorQuickPickItem(o)?o.item.id!==i.item.id&&(i=void 0):i=void 0);const s=this.resolvedProvider?.lastError?this.toErrorQuickPickItem(this.resolvedProvider.lastError):void 0,a=[].concat(Array.from(this.commands.values())).concat(n).concat(r).concat(s?[s]:[]),c=i?[i]:e.activeItems.length?[e.activeItems[0]]:[];if(c.length&&!a.includes(c[0])){const e=c[0],t=this.isSelectorQuickPickItem(e)&&a.find((t=>this.isSelectorQuickPickItem(t)&&t.item.id===e.item.id));t?c[0]=t:c.length=0}e.items=a,e.activeItems=c,!e.activeItems.length&&this.previouslySelectedItem&&a.includes(this.previouslySelectedItem)&&(e.activeItems=[this.previouslySelectedItem])}isErrorQuickPickItem(e){return this.errorQuickPickItemMap.has(e)}toErrorQuickPickItem(e){if(!this.createErrorQuickPickItem)return;const t=this.createErrorQuickPickItem(e,this);return this.errorQuickPickItemMap.add(t),t}isSelectorQuickPickItem(e){return this.quickPickItemMap.has(e)}toQuickPickItem(e){const t=this.createQuickPickItem(e,this);return t.item=e,this.quickPickItemMap.add(t),t}removeOutdatedQuickPickItems(e,t){const n=e.items.filter((e=>this.isSelectorQuickPickItem(e))).map((e=>e)).map((e=>e.item.id)),i=new Map(t.items.map((e=>[e.id,e]))),r=n.filter((e=>!i.has(e)));if(r.length){const t=[];this.categories.forEach(((e,n)=>{e.forEach((n=>{r.includes(n.item.id)&&(e.delete(n),t.push(n))})),e.size||(t.push(n),this.categories.delete(n))})),this.quickPickItems=this.quickPickItems.filter((e=>!t.includes(e))),this.rebuildQuickPickItems(e)}}connectionToCategory(e){const t=this.getCategory(e,this);return new Bp(t.label,t.sortKey||t.label)}}function zp(e,t){const n=[];let i;for(const r of e.slice(0).sort(t))i&&0===t(i[0],r)?i.push(r):(i=[r],n.push(i));return n}function Jp(e,t){return(e.sortKey||e.label).localeCompare(t.sortKey||t.label,void 0,{sensitivity:"accent"})}let Gp=class{constructor(e){this.serviceContainer=e}async selectPythonInterpreter(){const e=await this.selectPythonEnvironment();return e?.executable?.uri&&await this.serviceContainer.get(ka).getInterpreterDetails(e.executable.uri)}async selectPythonEnvironment(){const e=new Oe.CancellationTokenSource,t=new ul,n=this.serviceContainer.get(Up).selectedPythonPath,i=Wp.instance.get(_d),r=Wp.instance.get(_u).withFilter((e=>!Wo(e)&&!i.isPythonEnvironmentExcluded(e))),o=()=>r.items.find((e=>Do(e.executable.uri,n,t.osType))),s=n?gr.currentlySelectedJupyterInterpreterForPlaceholder(pn(n,Oe.workspace.workspaceFolders||[],t.homeDir)):"",a=[],c=new Hp(Promise.resolve(r),Ap,Np,{supportsBack:!1},void 0,gr.quickPickSelectPythonEnvironmentTitle);c.placeholder=s,c.selected=o(),a.push(c),a.push(e);try{if(!c.selected&&n){const e=r.onDidChange((()=>{c.selected=o(),c.selected&&e.dispose()}));a.push(e)}const t=await c.selectItem(e.token);if(!t||t instanceof Xc)return;return t}catch(e){Sn("Failed to select a Python Environment to start Jupyter",e)}finally{Ie(a)}}};Gp=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(ya))],Gp);var Yp=function(e,t){return function(n,i){t(n,i,e)}};let Qp=class{get onDidChangeInterpreter(){return this._onDidChangeInterpreter.event}constructor(e,t,n,i,r,o,s){this.interpreterSelectionState=e,this.jupyterInterpreterSelector=t,this.interpreterConfiguration=n,this.interpreterService=i,this.appShell=r,this.workspace=o,this._onDidChangeInterpreter=new Oe.EventEmitter,this.workspace.onDidGrantWorkspaceTrust((()=>{this.getInitialInterpreterPromiseFailed&&(this.getInitialInterpreterPromise=void 0,this.getInitialInterpreterPromiseFailed=!1)}),this,s)}async getSelectedInterpreter(e){return await this.setInitialInterpreter(e),this._selectedInterpreter}async setInitialInterpreter(e){return this.getInitialInterpreterPromise||(this.getInitialInterpreterPromise=this.getInitialInterpreterImpl(e).then((e=>(e&&this.changeSelectedInterpreterProperty(e),e))),this.getInitialInterpreterPromise.catch((()=>this.getInitialInterpreterPromiseFailed=!0))),this.getInitialInterpreterPromise}async selectInterpreter(){const e=await this.jupyterInterpreterSelector.selectPythonInterpreter();if(e)switch(await this.interpreterConfiguration.installMissingDependencies(e,void 0)){case ai.ok:return await this.setAsSelectedInterpreter(e),e;case ai.cancel:return;default:return this.selectInterpreter()}}async installMissingDependencies(e){const t=await this.getSelectedInterpreter();let n=t;if(!n&&(n=await this.interpreterService.getActiveInterpreter(void 0),!n))return e&&await this.appShell.showErrorMessage(e.message,{modal:!0},gr.selectDifferentJupyterInterpreter)!==gr.selectDifferentJupyterInterpreter?ai.cancel:(await this.selectInterpreter(),ai.selectAnotherInterpreter);const i=await this.interpreterConfiguration.installMissingDependencies(n,e);return i===ai.selectAnotherInterpreter?(n=await this.selectInterpreter(),n?ai.ok:ai.cancel):(i===ai.ok&&n!==t&&await this.setAsSelectedInterpreter(n),i)}async setAsSelectedInterpreter(e){await this.setInitialInterpreter(),this.changeSelectedInterpreterProperty(e)}changeSelectedInterpreterProperty(e){this._selectedInterpreter=e,this._onDidChangeInterpreter.fire(e),this.interpreterSelectionState.updateSelectedPythonPath(e.uri)}async validateInterpreterPath(e,t){try{const n=await xa(t,this.interpreterService.getInterpreterDetails(e));if(n&&await this.interpreterConfiguration.areDependenciesInstalled(n,t))return n}catch(e){}}async getInitialInterpreterImpl(e){let t;if(this.interpreterSelectionState.selectedPythonPath&&(t=await this.validateInterpreterPath(this.interpreterSelectionState.selectedPythonPath,e),t||this.interpreterSelectionState.updateSelectedPythonPath(void 0)),!t){const n=await this.interpreterService.getActiveInterpreter(void 0);n&&await this.interpreterConfiguration.areDependenciesInstalled(n,e)&&(t=n)}return t}};Qp=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Yp(0,zn(Up)),Yp(1,zn(Gp)),Yp(2,zn(Op)),Yp(3,zn(ka)),Yp(4,zn(Jn)),Yp(5,zn(Qn)),Yp(6,zn(Ri))],Qp);const Xp=Symbol("IKernelLauncher"),Zp=Symbol("IRawNotebookSupportedService"),eh=Symbol("IOldRawKernelSessionFactory"),th=Symbol("IRawKernelSessionFactory");var nh=function(e,t){return function(n,i){t(n,i,e)}};let ih=class{constructor(e,t,n,i,r){this.vscNotebook=e,this.jupyterInterpreterService=t,this.disposables=n,this.rawSupported=i,this.extensionChecker=r,this.notebookOpened=!1}activate(){this.disposables.push(this.vscNotebook.onDidOpenNotebookDocument(this.onDidOpenNotebookEditor,this)),this.disposables.push(this.jupyterInterpreterService.onDidChangeInterpreter(this.onDidChangeInterpreter,this))}onDidOpenNotebookEditor(e){Za(e)&&(this.notebookOpened=!0,io(F.OpenNotebookAll,function(e){const t=e.metadata?.custom;return{nbformat:t?.nbformat,nbformat_minor:t?.nbformat_minor}}(e)),!this.rawSupported.isSupported&&this.extensionChecker.isPythonExtensionInstalled&&this.jupyterInterpreterService.setInitialInterpreter().catch(ae))}onDidChangeInterpreter(){this.notebookOpened&&!this.rawSupported.isSupported&&this.extensionChecker.isPythonExtensionInstalled&&this.jupyterInterpreterService.setInitialInterpreter().catch(ae)}};ih=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),nh(0,zn(oi)),nh(1,zn(Qp)),nh(2,zn(Ri)),nh(3,zn(Zp)),nh(4,zn(Ao))],ih);var rh;let oh=rh=class{static dispose(){Ie(rh.disposables)}constructor(e){e.push({dispose:()=>{rh.dispose()}})}activate(){Oe.workspace.onDidChangeNotebookDocument((e=>{Za(e.notebook)&&e.cellChanges.filter((e=>0===e.outputs?.length)).map((t=>{const n=rh.cellToDisplayIdMapping.get(t.cell);n&&(rh.cellToDisplayIdMapping.delete(t.cell),rh.displayIdCellOutputMappingPerDocument.get(e.notebook)?.delete(n))}))}))}static trackOutputByDisplayId(e,t,n,i){let r=rh.displayIdCellOutputMappingPerDocument.get(e.notebook);r||(r=new Map,rh.displayIdCellOutputMappingPerDocument.set(e.notebook,r)),r.set(t,{outputContainer:n,cell:e,outputItems:i}),rh.cellToDisplayIdMapping.set(e,t)}static getMappedOutput(e,t){const n=rh.displayIdCellOutputMappingPerDocument.get(e);if(!n)return;const i=n.get(t);return i?.cell.document.isClosed?void 0:i}};oh.displayIdCellOutputMappingPerDocument=new WeakMap,oh.cellToDisplayIdMapping=new WeakMap,oh.disposables=[],oh=rh=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(Ri))],oh);var sh=function(e,t){return function(n,i){t(n,i,e)}};let ah=class{constructor(e,t){this.kernelProvider=e,this.disposables=t}activate(){this.kernelProvider.onDidStartKernel((e=>{e.session?.kernel&&fs(e.kernelConnectionMetadata)&&e.session.kernel.requestComplete({code:"__file__.",cursor_pos:9}).catch(ae)}),this,this.disposables)}};ah=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),sh(0,zn(na)),sh(1,zn(Ri))],ah);var ch=function(e,t){return function(n,i){t(n,i,e)}};const lh="Active_Kernel_Id_List";let dh=class{constructor(e,t){this.globalMemento=e,this.crypto=t}async getPreferredRemoteKernelId(e){const t=this.globalMemento.get(lh,[]);if(t.length){const n=await this.crypto.createHash(e.toString()),i=t.find((e=>e.fileHash===n));return En(`Preferred Remote kernel for ${pn(e)} is ${i?.kernelId}`),i?.kernelId}}async clearPreferredRemoteKernelId(e){await this.updatePreferredRemoteKernelIdInternal(e)}async storePreferredRemoteKernelId(e,t){await this.updatePreferredRemoteKernelIdInternal(e,t)}async updatePreferredRemoteKernelIdInternal(e,t){let n=!1;const i=xo()(this.globalMemento.get(lh,[])),r=await this.crypto.createHash(e.toString()),o=i.findIndex((e=>e.fileHash===r));for(o>=0&&(n=!0,i.splice(o,1)),t&&(n=!0,i.push({fileHash:r,kernelId:t}),En(`Storing Preferred remote kernel for ${pn(e)} is ${t}`));i.length>100;)n=!0,i.shift();n&&await this.globalMemento.update(lh,i)}};dh=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),ch(0,zn(Oi)),ch(0,Nc(Ai)),ch(1,zn($i))],dh);var uh=function(e,t){return function(n,i){t(n,i,e)}};let ph=class{constructor(e,t,n){this.serverStorage=e,this.kernelProvider=t,this.disposables=[],this.monitoredKernels=new WeakSet,this.timeouts=new Set,n.push(this)}dispose(){Ie(this.disposables),Ie(Array.from(this.timeouts.values()))}activate(){this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposables),this.kernelProvider.onDidRestartKernel(this.onDidStartKernel,this,this.disposables)}onDidStartKernel(e){const t=e.kernelConnectionMetadata;if(!ta(t)||this.monitoredKernels.has(e))return;this.monitoredKernels.add(e);const n=[];this.disposables.push(new Oe.Disposable((()=>Ie(n))));const i=()=>{if(Ie(n),e.disposed||e.disposing)return;const i=setTimeout((()=>{this.serverStorage.update(t.serverProviderHandle).catch(ae)}),1e3);n.push(new Oe.Disposable((()=>clearTimeout(i))))};this.kernelProvider.getKernelExecution(e).onPreExecute(i,this,this.disposables),i()}};ph=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),uh(0,zn(vi)),uh(1,zn(na)),uh(2,zn(Ri))],ph);class hh{get disableUI(){return this._disableUI}set disableUI(e){const t=this._disableUI!==e;this._disableUI=e,t&&this._event.fire()}get onDidChangeDisableUI(){return this._event.event}constructor(e){this._event=new Oe.EventEmitter,this._disableUI=e}dispose(){this._event.dispose()}}var fh=function(e,t){return function(n,i){t(n,i,e)}};const mh="last-notebook-created";let gh=class{constructor(e,t,n,i,r,o,s,a){this.configService=t,this.serverConnector=n,this.workspace=i,this.disposables=r,this.rawKernelSupport=o,this.mementoStorage=s,this.kernelProvider=a,e.onDidOpenNotebookDocument(this.onDidOpenNotebook.bind(this),this,r)}activate(){this.checkDateForServerStart(),this.disposables.push(this.kernelProvider.onDidStartKernel(this.kernelStarted,this))}get lastNotebookCreated(){const e=this.mementoStorage.get(mh);return e?new Date(e):void 0}checkDateForServerStart(){this.shouldAutoStartStartServer(this.lastNotebookCreated)&&this.createServerIfNecessary().catch(ae)}shouldAutoStartStartServer(e){if(!e)return!1;const t=(new Date).getTime()-e.getTime();return Math.floor(t/864e5)<=7}async createServerIfNecessary(){if(!this.workspace.isTrusted||this.rawKernelSupport.isSupported)return;const e=new Oe.CancellationTokenSource,t=new hh(!0);try{kn("Attempting to start a server because of preload conditions ..."),this.configService.getSettings(void 0).disableJupyterAutoStart||await this.serverConnector.connect({resource:void 0,ui:t,token:e.token})}catch(e){Sn("Error starting server in serverPreload: ",e)}finally{t.dispose(),e.dispose()}}onDidOpenNotebook(e){Za(e)&&this.createServerIfNecessary().catch(ae)}kernelStarted(e){const t=gs(e.kernelConnectionMetadata);this.mementoStorage.update(mh,Date.now()).then(ae,ae),t===i&&this.mementoStorage.update("last-python-notebook-created",Date.now()).then(ae,ae)}};gh=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),fh(0,zn(oi)),fh(1,zn(ji)),fh(2,zn(oa)),fh(3,zn(Qn)),fh(4,zn(Ri)),fh(5,zn(Zp)),fh(6,zn(Oi)),fh(6,Nc(Ni)),fh(7,zn(na))],gh);class vh extends Xi{constructor(e){super("jupyterinstall",e)}}class yh extends wo{constructor(e){super("timeout",gr.rawKernelStartFailedDueToTimeout(ls(e)),e)}}class bh extends _o{constructor(e,t,n,i){super(e,n,i),this.stdErr=t}}class wh extends wo{constructor(e){super("timeout",gr.rawKernelStartFailedDueToTimeoutWaitingForPort(ls(e)),e)}}class _h extends wo{constructor(e=-1,t,n){super("kerneldied",gr.kernelDied(t.trim()),n),this.exitCode=e,this.stdErr=t}}class Sh extends wo{constructor(e,t){super("noipykernel",gr.kernelInvalid(ls(t)),t),this.reason=e}}class Ch extends _o{constructor(e){super(gr.kernelDiedWithoutError(ls(e)),void 0,e)}}class kh extends Xi{constructor(e){super("jupyterexpiredcert",e)}}class Eh extends Xi{constructor(e){super("invalidremotejupyterserverurihandle","Server handle not in list of known handles"),this.serverProviderHandle=e}}const xh=new Map,Th=new Map;let Ph;function Ih(e,t){if(!e.pythonEnvironmentPath)return;const n=ie();(async function(e){if(!Ph)return Sn("Python package provider is not initialized."),"{}";let t;if(t="interpreter"in e?e.interpreter:Th.get(e.interpreterHash),!t)return"{}";const n=await Ph(t);return n&&0!==n.size?JSON.stringify(Object.fromEntries(n)):"{}"})({interpreterHash:e.pythonEnvironmentPath}).then((n=>{e.pythonEnvironmentPackages=n||e.pythonEnvironmentPackages,t&&(t.pythonEnvironmentPackages=n||t.pythonEnvironmentPackages)})).catch((()=>{})).finally((()=>{n.resolve()}))}function Dh(e,t,n,i,r){(async function(e){if(!e)return{};const t=xh.get(Qt(e)),n=Ya(e);if(!t&&n)return{resourceType:n,resourceHash:e?await jr(e.toString()):void 0};if(!t)return{};const i=xo()(t[0]);return Ih(t[0],i),i})(e).then((e=>{Object.assign(e,i||{}),io(t,n,e,r)})).catch(ae)}class Rh extends Xi{constructor(e,t,n){super("jupyternotebooknotinstalled",e+(t?`\n${t}`:"")),this.interpreter=n}}var Oh=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Ah=function(e,t){return function(n,i){t(n,i,e)}};const Nh="REGISTRATION_ID_EXTENSION_OWNER_MEMENTO_KEY";function Mh(e,t){return`${e}-${t}`}let Lh=class extends dc{get providers(){return this.loadOtherExtensions().catch(ae),Array.from(this._providers.values())}constructor(e,t,n){super(),this.extensions=e,this.globalMemento=n,this._onProvidersChanged=new Oe.EventEmitter,this._providers=new Map,this.extensionIdsThatHaveProviders=new Set,this.cachedDisplayNames=new Map,this.onDidChangeProviders=this._onProvidersChanged.event,t.push(this),this.disposables.push(this._onProvidersChanged),this.disposables.push(new Oe.Disposable((()=>this._providers.forEach((e=>e.dispose())))))}activate(){}async getProvider(e,t){this.loadOtherExtensions().catch(ae);const n=this._providers.get(Mh(e,t));if(n)return n;try{await this.loadExtension(e,t)}catch(t){return void Sn(`Failed to load the extension ${e}`,t)}return this._providers.get(Mh(e,t))}registerProvider(e,t){const n=Mh(t,e.id);if(this._providers.has(n))throw new Error(`IJupyterUriProvider already exists with id ${n}`);this.trackExtensionWithProvider(t).catch(ae),this._providers.set(n,new Fh(e,t)),this._onProvidersChanged.fire();const i={dispose:()=>{this._providers.get(n)?.dispose(),this._providers.delete(n),this._onProvidersChanged.fire()}};return this.disposables.push(i),i}async getJupyterServerUri(e,t){const n=Mh(e.extensionId,e.id);this._providers.get(n)||await this.loadExtension(e.extensionId,e.id);const i=this._providers.get(n);if(!i)throw new Error(`Provider Id=${n} and handle=${e.handle} not registered. Did you uninstall the extension ${e.extensionId}?`);const r=await i.getServerUri(e.handle,t);return this.cachedDisplayNames.set(fo(e),r.displayName),r}async getDisplayNameIfProviderIsLoaded(e){if(this.cachedDisplayNames.has(fo(e)))return this.cachedDisplayNames.get(fo(e));const t=Mh(e.extensionId,e.id);this._providers.get(t)||await this.loadExtension(e.extensionId,e.id);const n=this._providers.get(t);if(!n)return void En(`Provider Id=${t} and handle=${e.handle} not registered. Extension ${e.extensionId} may not have yet loaded or provider not yet registered?`);const i=await n.getServerUri(e.handle,!0);return this.cachedDisplayNames.set(fo(e),i.displayName),i.displayName}async loadExtension(e,t){if(e===p)return;this.loadOtherExtensions().catch(ae);const n=this.extensions.getExtension(e);if(!n)throw new Error(`Extension '${e}' that provides Jupyter Server '${t}' not found`);n.isActive||await n.activate().then(ae,ae)}loadOtherExtensions(){return this.loadedOtherExtensionsPromise||(this.loadedOtherExtensionsPromise=this.loadOtherExtensionsImpl()),this.loadedOtherExtensionsPromise}async loadOtherExtensionsImpl(){this.loadListOfExtensionsWithProviders();const e=new Set;this.globalMemento.get(Nh,[]).forEach((t=>e.add(t.extensionId)));const t=this.extensions.all.filter((t=>t.packageJSON?.contributes?.pythonRemoteServerProvider||e.has(t.id))).filter((e=>e.id!==p));await Promise.all(t.map((e=>e.isActive?Promise.resolve():e.activate().then(ae,ae))))}async trackExtensionWithProvider(e){this.loadListOfExtensionsWithProviders(),this.extensionIdsThatHaveProviders.add(e);const t=Array.from(this.extensionIdsThatHaveProviders.values()).map((e=>({extensionId:e})));await this.globalMemento.update(Nh,t)}loadListOfExtensionsWithProviders(){this.globalMemento.get(Nh,[]).forEach((e=>this.extensionIdsThatHaveProviders.add(e.extensionId)))}};Oh([ye()],Lh.prototype,"trackExtensionWithProvider",null),Lh=Oh([Kn(),Ah(0,zn(qi)),Ah(1,zn(Ri)),Ah(2,zn(Oi)),Ah(2,Nc(Ai))],Lh);const jh=new Set;class Fh extends dc{get displayName(){return Re(this.provider.displayName)}get detail(){return Re(this.provider.detail)}get documentation(){return this.provider.documentation}get servers(){return this.provider.servers}get onDidChangeHandles(){return this.provider.onDidChangeHandles}constructor(e,t){super(),this.provider=e,this.extensionId=t,this.id=this.provider.id,e.getHandles&&(this.getHandles=async()=>e.getHandles())}async getQuickPickEntryItems(e){return this.provider.getQuickPickEntryItems?(await this.provider.getQuickPickEntryItems(e)).map((e=>(e.label=Re(e.label),e.description=Re(e.description||e.detail),{...e,detail:void 0,original:e}))):[]}async handleQuickPick(e,t){if(this.provider.handleQuickPick)return"original"in e&&e.original?this.provider.handleQuickPick(e.original,t):this.provider.handleQuickPick(e,t)}async getServerUri(e,t){const n=this.provider;if(t&&this.id.startsWith("_builtin")&&n.getServerUriWithoutAuthInfo)return n.getServerUriWithoutAuthInfo(e);const i=await this.provider.getServerUri(e);if(!this.id.startsWith("_builtin")&&!jh.has(e)){jh.add(e);const t=[];Object.keys(i).forEach((e=>{const n=i[e];n&&("object"!=typeof n||0!==Object.keys(n).length||n instanceof Date)&&t.push(e)})),io(F.JupyterServerProviderResponseApi,void 0,{providerId:this.id,extensionId:this.extensionId,pemUsed:t})}return i}}async function Uh(e,t,n){return await t.getDisplayNameIfProviderIsLoaded(e)||n||`${e.id}:${e.handle}`}var qh=function(e,t){return function(n,i){t(n,i,e)}};let Kh=class{constructor(e,t,n,i,r,o,s,a,c,l,d,u){this.applicationShell=e,this.dependencyManager=t,this.browser=n,this.configuration=i,this.kernelDependency=r,this.workspaceService=o,this.serverUriStorage=s,this.jupyterUriProviderRegistration=a,this.isWebExtension=c,this.extensions=l,this.fs=d,this.interpreterService=u,this.handledErrors=new WeakSet,this.handledKernelErrors=new WeakSet}async handleError(e){if(Cn("DataScience Error",e),e=Zi.unwrap(e),!this.handledErrors.has(e))if(this.handledErrors.add(e),e instanceof vh)await(this.dependencyManager?.installMissingDependencies(e));else if(e instanceof vo)await co(this.applicationShell,this.configuration,e.message);else if(e instanceof kh)await lo(this.applicationShell,this.configuration,e.message);else if(Ea(e));else if(e instanceof yh||e instanceof wh)this.applicationShell.showErrorMessage(e.message).then(ae,ae);else if(e instanceof bh||e instanceof _h||e instanceof Rh||e instanceof Fr)this.applicationShell.showErrorMessage(Wh(e)).then(ae,ae);else if(e instanceof So&&this.isWebExtension)this.applicationShell.showErrorMessage(gr.jupyterNotebookRemoteConnectFailedWeb(e.baseUrl)).then(ae,ae);else if(e instanceof So){const t=await this.handleJupyterServerConnectionError(e,void 0);this.applicationShell.showErrorMessage(t).then(ae,ae)}else if(e instanceof tr){const t=await this.handleJupyterServerUriProviderError(e,void 0);this.applicationShell.showErrorMessage(t).then(ae,ae)}else{const t=$h(e.message||e.toString());this.applicationShell.showErrorMessage(t).then(ae,ae)}}async getErrorMessageForDisplayInCell(e,t,n){if(Ea(e=Zi.unwrap(e))||Sn("Error in execution (get message for cell)",e),e instanceof Ch)return"";if(e instanceof Sh)return Bh(e.kernelConnectionMetadata)||e.message;if(e instanceof vh)return function(e){const t=`${nu.get(xd.jupyter)} ${lr.and} ${nu.get(xd.notebook)}`,n=[xd.jupyter,xd.notebook].map(Fd).join(" "),i=`python -m pip install ${n} -U\nor\nconda install ${n} -U`,r=gr.installPackageInstructions(t,i);return e.message+"\n"+r+"\n"+lr.clickHereForMoreInfoWithHtml("https://aka.ms/installJupyterForVSCode")}(e)||e.message;if(e instanceof So&&!this.isWebExtension)return e.message;if(e instanceof So&&this.isWebExtension)return gr.jupyterNotebookRemoteConnectFailedWeb(e.baseUrl);if(Ea(e))return"";if(e instanceof Ud){const t="string"==typeof e.product?e.product:nu.get(e.product)||`${e.product}`,n=Uo(e.interpreter)||e.interpreter.id||"",i=pn("executable"in e.interpreter?e.interpreter.executable.uri:e.interpreter.uri);let r=n?` ${n} (${i})`:i;return gr.packageNotInstalledWindowsLongPathNotEnabledError(t,r)}if((e instanceof bh||e instanceof _h)&&("startUsingLocalKernelSpec"===e.kernelConnectionMetadata.kind||"startUsingPythonInterpreter"===e.kernelConnectionMetadata.kind)&&e.kernelConnectionMetadata.interpreter&&!await this.fs.exists(e.kernelConnectionMetadata.interpreter.uri))return gr.failedToStartKernelDueToMissingPythonEnv(e.kernelConnectionMetadata.interpreter.displayName||e.kernelConnectionMetadata.interpreter.envName||pn(e.kernelConnectionMetadata.interpreter.uri));if((e instanceof bh||e instanceof _h)&&("startUsingLocalKernelSpec"===e.kernelConnectionMetadata.kind||"startUsingPythonInterpreter"===e.kernelConnectionMetadata.kind)&&e.kernelConnectionMetadata.interpreter&&this.kernelDependency&&!await this.kernelDependency.areDependenciesInstalled(e.kernelConnectionMetadata,void 0,!0))return Bh(e.kernelConnectionMetadata)||e.message;if(e instanceof wo||e instanceof _o){const t=await this.getFilesInWorkingDirectoryThatCouldPotentiallyOverridePythonModules(n),i=Br(Oe.workspace.workspaceFolders||[],e,ls(e.kernelConnectionMetadata),e.kernelConnectionMetadata.interpreter?.sysPrefix,t.map((e=>e.uri)));if(i){if(i.reason===$r.moduleNotFoundFailure&&["ipykernel_launcher","ipykernel"].includes(i.moduleName))return Bh(e.kernelConnectionMetadata)||e.message;const t=[i.message];return i.moreInfoLink&&t.push(lr.clickHereForMoreInfoWithHtml(i.moreInfoLink)),ea(e.kernelConnectionMetadata)&&i.reason===$r.moduleNotFoundFailure&&!["ipykernel_launcher","ipykernel"].includes(i.moduleName)&&await this.addErrorMessageIfPythonArePossiblyOverridingPythonModules(t,n),t.join("\n")}}else{if(e instanceof So)return this.handleJupyterServerConnectionError(e,t);if(e instanceof tr)return this.handleJupyterServerUriProviderError(e,t);if(e instanceof Eh){const n=this.extensions.getExtension(e.serverProviderHandle.extensionId)?.packageJSON.displayName||e.serverProviderHandle.extensionId;return Wh(gr.remoteJupyterServerProvidedBy3rdPartyExtensionNoLongerValid(n),t)}}return Wh(e,t)}async handleJupyterServerUriProviderError(e,t){const n=await Uh(e.serverProviderHandle,this.jupyterUriProviderRegistration),i=e.originalError?.message||e.message;return Wh(gr.remoteJupyterConnectionFailedWithServerWithError(n,i),t)}async handleJupyterServerConnectionError(e,t){const n=await Uh(e.serverProviderHandle,this.jupyterUriProviderRegistration,e.baseUrl),i=e.originalError.message||"";return Wh(gr.remoteJupyterConnectionFailedWithServerWithError(n,i),t)}async handleJupyterServerProviderConnectionError(e,t){if(!t.getHandles)return!1;try{return(await t.getHandles()).includes(e.handle)||await this.serverUriStorage.remove(e).catch(ae),!0}catch(e){return!1}}async handleKernelError(e,t,n,i,r){if(Ea(e)||Cn(`Kernel Error, context = ${t}`,e),Ea(e=Zi.unwrap(e)))return this.sendKernelTelemetry(e,t,i,"cancelled"),aa.cancel;if(e instanceof Sh){if(Cn(`Jupyter Kernel Dependency Error, reason=${e.reason}`,e),this.sendKernelTelemetry(e,t,i,e.category),e.reason!==aa.uiHidden||!this.kernelDependency)return e.reason;{const e=new Oe.CancellationTokenSource;try{const t="3rdPartyExtension"===r;return this.kernelDependency.installMissingDependencies({resource:i,kernelConnection:n,ui:new hh(!1),token:e.token,ignoreCache:!0,cannotChangeKernels:t})}finally{e.dispose()}}}else{if(("start"===t||"restart"===t)&&e instanceof vh)return this.sendKernelTelemetry(e,t,i,e.category),(this.dependencyManager?await this.dependencyManager.installMissingDependencies(e):ai.cancel)===ai.ok?aa.ok:aa.cancel;if(e instanceof So||e instanceof tr||e instanceof Eh){this.sendKernelTelemetry(e,t,i,e.category);const n=e instanceof Eh?"":e instanceof So?e.originalError.message||"":e.originalError?.message||e.message,o=await this.jupyterUriProviderRegistration.getProvider(e.serverProviderHandle.extensionId,e.serverProviderHandle.id).catch(ae);if(!o||await this.handleJupyterServerProviderConnectionError(e.serverProviderHandle,o))return aa.selectDifferentKernel;const s=e instanceof So?e.baseUrl:"",a=await Uh(e.serverProviderHandle,this.jupyterUriProviderRegistration,s),c=e instanceof Eh?this.extensions.getExtension(e.serverProviderHandle.extensionId)?.packageJSON.displayName||e.serverProviderHandle.extensionId:"",l="jupyterExtension"===r?[gr.selectDifferentKernel]:[];switch(await this.applicationShell.showErrorMessage(e instanceof Eh?gr.remoteJupyterServerProvidedBy3rdPartyExtensionNoLongerValid(c):gr.remoteJupyterConnectionFailedWithServer(a),{detail:n,modal:!0},gr.removeRemoteJupyterConnectionButtonText,gr.changeRemoteJupyterConnectionButtonText,...l)){case gr.removeRemoteJupyterConnectionButtonText:return await this.serverUriStorage.remove(e.serverProviderHandle).catch(ae),aa.cancel;case gr.changeRemoteJupyterConnectionButtonText:return aa.cancel;case gr.selectDifferentKernel:return aa.selectDifferentKernel}return aa.cancel}if(e instanceof vo){this.sendKernelTelemetry(e,t,i,e.category);const n=gr.jupyterSelfCertEnable,r=gr.jupyterSelfCertClose;return this.applicationShell.showErrorMessage(gr.jupyterSelfCertFail(e.message),n,r).then((e=>{e===n?(io(F.SelfCertsMessageEnabled),this.configuration.updateSetting("allowUnauthorizedRemoteConnection",!0,void 0,Oe.ConfigurationTarget.Workspace).catch(ae)):e===r&&io(F.SelfCertsMessageClose)})).then(ae,ae),aa.failed}if(("start"===t||"restart"===t)&&"startUsingPythonInterpreter"===n.kind&&this.interpreterService&&!await this.fs.exists(n.interpreter.uri))return this.interpreterService.getInterpreterDetails(n.interpreter.id).then((async e=>{const t=await this.fs.exists(n.interpreter.uri);Dh(i,F.KernelStartFailureDueToMissingEnv,void 0,e?{envMissingReason:"Unknown",isEmptyCondaEnv:e.isCondaEnvWithoutPython,pythonEnvType:e.envType,fileExists:t}:{envMissingReason:"EmptyEnvDetailsFromPython",isEmptyCondaEnv:n.interpreter.isCondaEnvWithoutPython,pythonEnvType:n.interpreter.envType,fileExists:t})})).catch((async()=>{const e=await this.fs.exists(n.interpreter.uri);Dh(i,F.KernelStartFailureDueToMissingEnv,void 0,{envMissingReason:"FailedToGetEnvDetailsFromPython",isEmptyCondaEnv:n.interpreter.isCondaEnvWithoutPython,pythonEnvType:n.interpreter.envType,fileExists:e})})).catch(ae),this.sendKernelTelemetry(e,t,i,$r.pythonEnvironmentMissing),this.applicationShell.showErrorMessage(gr.failedToStartKernelDueToMissingPythonEnv(n.interpreter.displayName||n.interpreter.envName||pn(n.interpreter.uri))).then(ae,ae),this.interpreterService.refreshInterpreters(!0).catch(ae),aa.failed;if("start"!==t&&"restart"!==t||!this.kernelDependency||await this.kernelDependency.areDependenciesInstalled(n,void 0,!0)){const r=await this.getFilesInWorkingDirectoryThatCouldPotentiallyOverridePythonModules(i),o=Br(this.workspaceService.workspaceFolders||[],e,ls(n),n.interpreter?.sysPrefix,r.map((e=>e.uri)));return this.sendKernelTelemetry(e,t,i,o?.reason),o?this.showMessageWithMoreInfo(o.message,o?.moreInfoLink).catch(ae):this.showMessageWithMoreInfo(Wh(e,t)).catch(ae),aa.failed}{this.sendKernelTelemetry(e,t,i,"noipykernel");const o=new Oe.CancellationTokenSource;try{const e="3rdPartyExtension"===r;return this.kernelDependency.installMissingDependencies({resource:i,kernelConnection:n,ui:new hh(!1),token:o.token,ignoreCache:!0,cannotChangeKernels:e})}finally{o.dispose()}}}}sendKernelTelemetry(e,t,n,i){this.handledKernelErrors.has(e)||(this.handledKernelErrors.add(e),"start"===t&&Dh(n,F.NotebookStart,void 0,{disableUI:!1,failureCategory:i},e))}async showMessageWithMoreInfo(e,t){e.includes(N.ViewJupyterOutput)||(e=`${e} \n${gr.viewJupyterLogForFurtherInfo}`);const n=t?[lr.learnMore]:[];await this.applicationShell.showErrorMessage(e,...n).then((e=>{e===lr.learnMore&&t&&this.browser.launch(t)}))}};Kh=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([qh(0,zn(Jn)),qh(1,zn(pi)),qh(1,Qi()),qh(2,zn(Ki)),qh(3,zn(ji)),qh(4,zn(ca)),qh(4,Qi()),qh(5,zn(Qn)),qh(6,zn(vi)),qh(7,zn(gi)),qh(8,zn(Pi)),qh(9,zn(qi)),qh(10,zn(La)),qh(11,zn(ka)),qh(11,Qi())],Kh);const Vh={restart:gr.failedToRestartKernel,start:gr.failedToStartKernel,interrupt:gr.failedToInterruptKernel,execution:""};function Wh(e,t){e="string"==typeof e?e:Zi.unwrap(e);const n=t?Vh[t]:"";let i="";return i=e instanceof Rh?gr.jupyterNotebookNotInstalledOrNotFound(e.interpreter):e instanceof Xi?Vr(e.stdErr)||e.stdErr||e.message:"string"==typeof e?e:e.message,$h(n,i)}function $h(e="",t=""){e&&t.startsWith(e.substring(0,e.length-1))&&(e="");const n=[e,t].map((e=>e.trim())).filter((e=>e.length>0)).join(" \n");return!function(e){const t=new RegExp(/\[([^\[]+)\]\((.*)\)/);return(t.exec(e)?.length??0)>0}(n)&&n.length&&-1===n.indexOf("command:jupyter.viewOutput")?`${n.endsWith(".")?n:n+"."} \n${gr.viewJupyterLogForFurtherInfo}`:n}function Bh(e){if("connectToLiveRemoteKernel"===e.kind||"startUsingRemoteKernelSpec"===e.kind||!e.interpreter)return;const t=e.interpreter.displayName||un(e.interpreter.uri),n=nu.get(xd.ipykernel),i=Fd(xd.ipykernel);let r=`${Te(un(e.interpreter.uri))} -m pip install ${i} -U --force-reinstall`;return e.interpreter?.envType===ko.Conda?e.interpreter?.envName?r=`conda install -n ${e.interpreter?.envName} ${i} --update-deps --force-reinstall`:e.interpreter?.envPath&&(r=`conda install -p ${un(e.interpreter?.envPath)} ${i} --update-deps --force-reinstall`):e.interpreter?.envType===ko.Unknown&&(r=`${Te(un(e.interpreter.uri))} -m pip install ${i} -U --user --force-reinstall`),gr.libraryRequiredToLaunchJupyterKernelNotInstalledInterpreter(t,nu.get(xd.ipykernel))+"\n"+gr.installPackageInstructions(n,r)}var Hh=function(e,t){return function(n,i){t(n,i,e)}};let zh=class extends Kh{constructor(e,t,n,i,r,o,s,a,c,l,d,u,p){super(e,t,n,i,r,o,s,l,a,c,u,p),this.reservedPythonNames=d}async addErrorMessageIfPythonArePossiblyOverridingPythonModules(e,t){const n=await this.getFilesInWorkingDirectoryThatCouldPotentiallyOverridePythonModules(t);if(n.length>0){const i=t?en(t):void 0,r=n.map((e=>{if("file"===e.type){const n=t?pn(e.uri,[],i):Xt(e.uri);return`<a href='${e.uri.toString()}?line=1'>${n}</a>`}{const n=t?pn(e.uri,[],i):`${Xt(en(e.uri))}/__init__.py`;return`<a href='${e.uri.toString()}?line=1'>${n}</a>`}}));let o="";o=1===r.length?r[0]:`${r.slice(0,-1).join(", ")} ${lr.and} ${r.slice(-1)}`,e.push(gr.filesPossiblyOverridingPythonModulesMayHavePreventedKernelFromStarting(o)),e.push(gr.listOfFilesWithLinksThatMightNeedToBeRenamed(o)),e.push(lr.clickHereForMoreInfoWithHtml("https://aka.ms/JupyterKernelStartFailureOverrideReservedName"))}}async getFilesInWorkingDirectoryThatCouldPotentiallyOverridePythonModules(e){return e?this.reservedPythonNames.getUriOverridingReservedPythonNames(en(e)):[]}};zh=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Hh(0,zn(Jn)),Hh(1,zn(pi)),Hh(1,Qi()),Hh(2,zn(Ki)),Hh(3,zn(ji)),Hh(4,zn(ca)),Hh(4,Qi()),Hh(5,zn(Qn)),Hh(6,zn(vi)),Hh(7,zn(Pi)),Hh(8,zn(qi)),Hh(9,zn(gi)),Hh(10,zn(lu)),Hh(11,zn(La)),Hh(12,zn(ka))],zh);class Jh{constructor(e,t,n,i){this.moduleName=e,this.args=t,this.pythonExecutionFactory=n,this._interpreter=i,this.interpreterPromise=Promise.resolve(this._interpreter),this.pythonLauncher=this.interpreterPromise.then((async e=>n.createActivatedEnvironment({interpreter:e})))}interpreter(){return this.interpreterPromise}async exec(e,t){const n={...t},i=await this.pythonLauncher,r=[...this.args,...e],o=r[1];return r.shift(),r.shift(),i.execModule(o,r,n)}}class Gh extends Jh{constructor(e,t,n,i){super(e,t,n,i)}}class Yh extends Jh{constructor(e,t,n,i){super(e,t,n,i)}async exec(e,t){let n,i={stdout:""};try{i=await super.exec(e,t)}catch(e){n=e}if(!i.stderr&&!n)return i;const r=()=>{if(n)throw Sn("Exception attempting to enumerate kernelspecs: ",n),n;return i},o=await this.interpreter();if(!o||"jupyter"!==this.moduleName.toLowerCase()||this.args.join(" ").toLowerCase()!==`-m jupyter ${U.KernelSpecCommand}`.toLowerCase())return r();try{if("list --json"===e.join(" ").toLowerCase())return i=await this.getKernelSpecList(o,t),i;if("--version"===e.join(" ").toLowerCase())return i=await this.getKernelSpecVersion(o,t),i}catch(e){Sn("Failed to get a list of the kernelspec using python script",e)}return r()}async getKernelSpecList(e,t){return(await this.pythonExecutionFactory.createActivatedEnvironment({interpreter:e})).exec([Et(Tc,"pythonFiles","vscode_datascience_helpers","getJupyterKernels.py")],{...t,throwOnStdErr:!0})}async getKernelSpecVersion(e,t){return(await this.pythonExecutionFactory.createActivatedEnvironment({interpreter:e})).exec([Et(Tc,"pythonFiles","vscode_datascience_helpers","getJupyterKernelspecVersion.py")],{...t,throwOnStdErr:!0})}}let Qh=class{constructor(e){this.executionFactory=e}createInterpreterCommand(e,t,n,i){return e===U.NotebookCommand?new Gh(t,n,this.executionFactory,i):e===U.KernelSpecCommand?new Yh(t,n,this.executionFactory,i):new Jh(t,n,this.executionFactory,i)}};Qh=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(qd))],Qh);var Xh=function(e,t){return function(n,i){t(n,i,e)}};let Zh=class{constructor(e,t,n){this.service=e,this.cmdManager=t,this.disposables=n}activate(){this.disposables.push(this.cmdManager.registerCommand("jupyter.selectJupyterInterpreter",(()=>{this.service.selectInterpreter().catch(ae)})))}};async function ef(e){try{let t=await il.realpath(e.fsPath);return ln()!=cn.Windows&&(t=t.replace(/\\/g,"/")),Oe.Uri.file(t)}catch{return e}}var tf,nf;Zh=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Xh(0,zn(Qp)),Xh(1,zn(Gn)),Xh(2,zn(Ri))],Zh);class rf{constructor(e,t){this.uri=e,this.value=t}}class of{constructor(e,t){this[tf]="ResourceMap",e instanceof of?(this.map=new Map(e.map),this.toKey=t??of.defaultToKey):(this.map=new Map,this.toKey=e??of.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new rf(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){void 0!==t&&(e=e.bind(t));for(let[t,n]of this.map)e(n.value,n.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(tf=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}of.defaultToKey=e=>e.toString();class sf{constructor(e,t){this[nf]="ResourceSet",e&&"function"!=typeof e?(this._map=new of(t),e.forEach(this.add,this)):this._map=new of(e)}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach(((n,i)=>e.call(t,i,i,this)))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(nf=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}var af=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},cf=function(e,t){return function(n,i){t(n,i,e)}};const lf=Et("AppData","Roaming","jupyter","kernels"),df=Et(".local","share","jupyter","kernels"),uf=Et("Library","Jupyter","kernels"),pf=Et("AppData","Roaming","jupyter","runtime"),hf=Et("Library","Jupyter","runtime"),ff=Et("share","jupyter","kernels"),mf="CACHE_KEY_FOR_JUPYTER_KERNELSPEC_ROOT_PATH.",gf="CACHE_KEY_FOR_JUPYTER_KERNEL_PATHS_.";let vf=class{constructor(e,t,n,i,r,o,s){this.platformService=e,this.envVarsProvider=t,this.globalState=i,this.fs=r,this.context=o,this.pythonExecFactory=s,this.cachedDataDirs=new Map,this.envVarsProvider.onDidEnvironmentVariablesChange((()=>{this.cachedJupyterKernelPaths=void 0,this.cachedJupyterPaths=void 0}),this,n)}async getKernelSpecTempRegistrationFolder(){const e=tn(this.context.extensionUri,"temp","jupyter","kernels");return await this.fs.createDirectory(e),e}async getKernelSpecRootPath(){const e=this.getCachedRootPath();return e||this.cachedKernelSpecRootPath?e||this.cachedKernelSpecRootPath:(this.cachedKernelSpecRootPath=(async()=>{const e=this.platformService.homeDir;if(e)return this.platformService.isWindows?ef(tn(e,lf)):this.platformService.isMac?tn(e,uf):tn(e,df)})(),this.cachedKernelSpecRootPath.then((e=>{En(`Getting Jupyter KernelSpec Root Path ${e?.toString()}`),this.updateCachedRootPath(e)})).catch(ae),this.cachedKernelSpecRootPath)}async getRuntimeDir(){let e;const t=this.platformService.homeDir;if(t&&(e=this.platformService.isWindows?await ef(tn(t,pf)):this.platformService.isMac?tn(t,hf):process.env.$XDG_RUNTIME_DIR?Oe.Uri.file(Et(process.env.$XDG_RUNTIME_DIR,"jupyter","runtime")):tn(t,".local","share","jupyter","runtime")),e)try{return await this.fs.createDirectory(e),e}catch(t){Sn(`Failed to create runtime directory, reverting to temp directory ${e}`,t)}else Sn("Failed to determine Jupyter runtime directory")}async getDataDirs(e){const t=e.interpreter?e.interpreter.uri.toString():"";return this.cachedDataDirs.has(t)||this.cachedDataDirs.set(t,this.getDataDirsImpl(e.resource,e.interpreter)),this.cachedDataDirs.get(t)}async getDataDirsImpl(e,t){const n=new of,i=await this.getJupyterPaths();for(const e of i)e&&!n.has(e)&&n.set(e,n.size);if(t)try{const i=await this.pythonExecFactory.createActivatedEnvironment({interpreter:t,resource:e}),r=Oe.Uri.joinPath(this.context.extensionUri,"pythonFiles","printJupyterDataDir.py"),o=await i.exec([r.fsPath],{});if(o.stdout.trim().length){const e=Oe.Uri.file(o.stdout.trim());await this.fs.exists(e)?n.has(e)||n.set(e,n.size):Cn(`Got a non-existent Jupyer Data Dir ${e}`)}}catch(e){Sn(`Failed to get DataDir based on ENABLE_USER_SITE for ${t.displayName}`,e)}const r=t?.sysPrefix?Oe.Uri.joinPath(Oe.Uri.file(t.sysPrefix),"share","jupyter"):void 0,o=this.getSystemJupyterPaths(),s=r?new sf(o).has(r)?void 0:r:void 0,a=this.getJupyterDataDir(),c=(process.env.JUPYTER_PREFER_ENV_PATH||"no").toLowerCase();return["no","n","false","off","0","0.0"].includes(c)?[a,s].forEach((e=>{e&&!n.has(e)&&n.set(e,n.size)})):[s,a].forEach((e=>{e&&!n.has(e)&&n.set(e,n.size)})),o.forEach((e=>{e&&!n.has(e)&&n.set(e,n.size)})),Array.from(n.entries()).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}getJupyterConfigDir(){return process.env.JUPYTER_CONFIG_DIR?Oe.Uri.file(Ct(process.env.JUPYTER_CONFIG_DIR)):this.platformService.homeDir?Oe.Uri.joinPath(this.platformService.homeDir,".jupyter"):void 0}getSystemJupyterPaths(){if(this.platformService.isWindows){const e=process.env.PROGRAMDATA?Ct(process.env.PROGRAMDATA):void 0;return e?[Oe.Uri.joinPath(Oe.Uri.file(e),"jupyter")]:[]}return[Oe.Uri.file("/usr/local/share/jupyter"),Oe.Uri.file("/usr/share/jupyter")]}getJupyterDataDir(){if(process.env.JUPYTER_DATA_DIR)return Oe.Uri.file(Ct(process.env.JUPYTER_DATA_DIR));if(this.platformService.homeDir)switch(this.platformService.osType){case cn.OSX:return Oe.Uri.joinPath(this.platformService.homeDir,"Library","Jupyter");case cn.Windows:const e=process.env.APPDATA?Oe.Uri.file(Ct(process.env.APPDATA)):"";if(e)return Oe.Uri.joinPath(e,"jupyter");const t=this.getJupyterConfigDir();return t?Oe.Uri.joinPath(t,"data"):Oe.Uri.joinPath(this.platformService.homeDir,"Library","Jupyter");default:{const e=process.env.XDG_DATA_HOME?Oe.Uri.file(Ct(process.env.XDG_DATA_HOME)):Oe.Uri.joinPath(this.platformService.homeDir,".local","share");return Oe.Uri.joinPath(e,"jupyter")}}}async getKernelSpecRootPaths(e){if(this.cachedKernelSpecRootPaths?.promise&&this.cachedKernelSpecRootPaths.stopWatch.elapsedTime<=6e4)return this.cachedKernelSpecRootPaths.promise;const t=new se,n=this.getKernelSpecRootPathsImpl(e);this.cachedKernelSpecRootPaths={promise:n,stopWatch:t};const i=e.onCancellationRequested((()=>{this.cachedKernelSpecRootPaths?.promise===n&&(this.cachedKernelSpecRootPaths=void 0)}),this);return n.finally((()=>i.dispose())).catch(ae),n}async getKernelSpecRootPathsImpl(e){const t=new sf(await this.getJupyterPathKernelPaths(e));if(e.isCancellationRequested)return[];if(this.platformService.isWindows){const n=await this.getKernelSpecRootPath();if(e.isCancellationRequested)return[];n&&t.add(n),process.env.PROGRAMDATA&&t.add(Oe.Uri.file(Et(process.env.PROGRAMDATA,"jupyter","kernels")))}else{const e=this.platformService.isMac?uf:df;t.add(Oe.Uri.file(Et("/","usr","share","jupyter","kernels"))),t.add(Oe.Uri.file(Et("/","usr","local","share","jupyter","kernels"))),this.platformService.homeDir&&t.add(tn(this.platformService.homeDir,e))}return En(`Kernel Spec Root Paths, ${Array.from(t).map((e=>pn(e))).join(", ")}`),Array.from(t)}async getJupyterPathKernelPaths(e){return this.cachedJupyterKernelPaths=this.cachedJupyterKernelPaths||this.getJupyterPathSubPaths(e,"kernels"),this.cachedJupyterKernelPaths.then((e=>{e.length>0&&this.updateCachedPaths(e).then(ae,ae)}),ae),this.getCachedPaths().length>0?this.getCachedPaths():this.cachedJupyterKernelPaths}async getJupyterPaths(e){return this.cachedJupyterPaths=this.cachedJupyterPaths||this.getJupyterPathSubPaths(e),this.cachedJupyterPaths}async getJupyterPathSubPaths(e,t){const n=new sf,i=await this.envVarsProvider.getEnvironmentVariables(void 0,"RunPythonCode");if(e?.isCancellationRequested)return[];const r=i.JUPYTER_PATH?i.JUPYTER_PATH.split(At).map((e=>t?Et(e,t):e)):[];return r.length>0&&(await Promise.all(r.map((async e=>ef(Oe.Uri.file(e)))))).forEach((e=>{e&&n.add(e)})),En(`Jupyter Paths ${pn(t)}: ${Array.from(n).map((e=>pn(e)))}`),Array.from(n)}getCachedPaths(){return this.globalState.get(gf,[]).map((e=>Oe.Uri.parse(e)))}async updateCachedPaths(e){const t=this.globalState.get(gf,[]),n=e.map(Oe.Uri.toString);t.join(",")!==n.join(",")&&await this.globalState.update(gf,n)}getCachedRootPath(){if(this.globalState.get(mf)){const e=this.globalState.get(mf);if(e)return Oe.Uri.parse(e)}}updateCachedRootPath(e){e?this.globalState.update(mf,e.toString()).then(ae,ae):this.globalState.update(mf,void 0).then(ae,ae)}};af([Tn("getDataDirsImpl",$.BeforeCall|$.Arguments),cf(1,Dn("id"))],vf.prototype,"getDataDirsImpl",null),af([cf(0,Rn())],vf.prototype,"getJupyterPathKernelPaths",null),vf=af([Kn(),cf(0,zn(Ma)),cf(1,zn(Ca)),cf(2,zn(Ri)),cf(3,zn(Oi)),cf(3,Nc(Ai)),cf(4,zn(Nu)),cf(5,zn(Ui)),cf(6,zn(qd))],vf);var yf=function(e,t){return function(n,i){t(n,i,e)}};let bf=class{constructor(e,t,n,i,r,o,s){this.jupyterInterpreter=e,this.interpreterService=t,this.jupyterDependencyService=n,this.pythonExecutionFactory=i,this.jupyterOutputChannel=r,this.jupyterPaths=o,this.activationHelper=s}async refreshCommands(){}async isNotebookSupported(e){const t=await this.jupyterInterpreter.getSelectedInterpreter(e);return!!t&&this.jupyterDependencyService.areDependenciesInstalled(t,e)}async getReasonForJupyterNotebookNotBeingSupported(e){let t=await this.jupyterInterpreter.getSelectedInterpreter(e);if(!t&&(t=await this.interpreterService.getActiveInterpreter(void 0),!t))return gr.selectJupyterInterpreter;const n=await this.jupyterDependencyService.getDependenciesNotInstalled(t,e);return 0===n.length?"":1===n.length&&n[0]===xd.kernelspec?gr.jupyterKernelSpecModuleNotFound(t.uri.fsPath):Rp(n,t)}async getSelectedInterpreter(e){return this.jupyterInterpreter.getSelectedInterpreter(e)}async startNotebook(e,t){const n=await this.getSelectedInterpreterAndThrowIfNotAvailable(t.token);this.jupyterOutputChannel.appendLine(gr.startingJupyterLogMessage(vl(n.uri),e.join(" ")));const i=await this.pythonExecutionFactory.createActivatedEnvironment({interpreter:n}),r={...t};r.token=void 0;const o=await this.activationHelper.getActivatedEnvironmentVariables(void 0,n)||process.env,s=(process.env.JUPYTER_PATH||o.JUPYTER_PATH||"").split(At).filter((e=>e.trim().length));s.push(en(await this.jupyterPaths.getKernelSpecTempRegistrationFolder()).fsPath),r.env={...o,JUPYTER_PATH:s.join(At)},En(`Start Jupyter Notebook with JUPYTER_PATH=${s.join(At)}`),En(`Start Jupyter Notebook with PYTHONPATH=${o.PYTHONPATH||""}`);const a=Object.keys(o).filter((e=>"path"===e.toLowerCase()));return a.length?En(`Start Jupyter Notebook with PATH variable. ${a.map((e=>`${e}=${o[e]}`)).join(",")}`):Sn("Start Jupyter Notebook without a PATH variable"),i.execModuleObservable("jupyter",["notebook"].concat(e),r)}async getRunningJupyterServers(e){const t=await this.getSelectedInterpreterAndThrowIfNotAvailable(e),n=await this.pythonExecutionFactory.createActivatedEnvironment({interpreter:t}),i={mergeStdOutErr:!0,token:e},r=Et(Tc,"pythonFiles","vscode_datascience_helpers","getServerInfo.py"),o=await n.exec([r],i);let s;try{s=JSON.parse(o.stdout.trim())}catch(e){return void Cn("Failed to parse JSON when getting server info out from getServerInfo.py",e)}return s}async installMissingDependencies(e){return this.jupyterInterpreter.installMissingDependencies(e)}async getSelectedInterpreterAndThrowIfNotAvailable(e){const t=await this.jupyterInterpreter.getSelectedInterpreter(e);if(!t){const e=await this.getReasonForJupyterNotebookNotBeingSupported();throw new vh(e)}return t}};bf=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),yf(0,zn(Qp)),yf(1,zn(ka)),yf(2,zn(Op)),yf(3,zn(qd)),yf(4,zn(Ii)),yf(4,Nc(E)),yf(5,zn(vf)),yf(6,zn(Ja))],bf);var wf=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let _f=class{constructor(e){this.pythonExecutionFactory=e}async exportNotebookToPython(e,t,n,i){const r=await this.pythonExecutionFactory.createActivatedEnvironment({resource:e,interpreter:t}),o=n?[e.fsPath,"--to","python","--stdout","--template",n]:[e.fsPath,"--to","python","--stdout"];return r.execModule("jupyter",["nbconvert"].concat(o),{throwOnStdErr:!1,encoding:"utf8",token:i}).then((e=>{if(""===e.stdout)throw Sn("nbconvert zero size output"),new Error(e.stderr);return e.stdout}))}};wf([Yu(Da.ExportNotebookToPython)],_f.prototype,"exportNotebookToPython",null),_f=wf([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(qd))],_f);var Sf=function(e,t){return function(n,i){t(n,i,e)}};let Cf=class{constructor(e,t){this.installer=e,this.commandFactory=t,this.nbconvertInstalledInInterpreter=new sf}async isNbConvertInstalled(e,t){if(this.nbconvertInstalledInInterpreter.has(e.uri))return!0;const n=!!await this.installer.isInstalled(xd.nbconvert,e)&&!!await this.installer.isInstalled(xd.jupyter,e);return!0===n&&this.nbconvertInstalledInInterpreter.add(e.uri),n}async getNbConvertVersion(e,t){const n=this.commandFactory.createInterpreterCommand(U.ConvertCommand,"jupyter",["-m","jupyter","nbconvert"],e,!1);return lc((await n.exec(["--version"],{throwOnStdErr:!0})).stdout)}};Cf=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Sf(0,zn(Ld)),Sf(1,zn(Tp))],Cf);var kf=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Ef=function(e,t){return function(n,i){t(n,i,e)}};const xf="JupyterDetectionTelemetrySentMementoKey";let Tf=class{constructor(e,t){this.globalMemento=e,this.processFactory=t}activate(){this.initialize().catch(ae)}async initialize(){this.globalMemento.get(xf,!1)||(this.globalMemento.update(xf,!0).then(ae,ae),this.detectJupyter("notebook",process.env).catch(ae),this.detectJupyter("lab",process.env).catch(ae))}async detectJupyter(e,t){try{const n=await this.processFactory.create(void 0),i=Ee((await n.exec("jupyter",[e,"--version"],{env:t,throwOnStdErr:!1,mergeStdOutErr:!0})).stdout,{trim:!0,removeEmptyEntries:!0}).filter((e=>!isNaN(parseInt(e.substring(0,1),10)))),r=/^\s*(\d+)\.(\d+)\.(.+)\s*$/.exec(i.length?i[0]:"");if(r&&r.length>2){const t=parseInt(r[1],10),n=parseInt(r[2],10),i=parseFloat(`${t}.${n}`);io(F.JupyterInstalled,{frontEndVersion:i},{frontEnd:e,detection:"process"})}else io(F.JupyterInstalled,void 0,{failed:!0,reason:"notInstalled",frontEnd:e})}catch(t){io(F.JupyterInstalled,void 0,{failed:!0,reason:"notInstalled",frontEnd:e})}}};async function Pf(e,t){if(!e)return;const n=Qt(e),[r,o]=xh.get(n)||[{resourceType:Ya(e),resourceHash:e?await jr(e.toString()):void 0,kernelSessionId:await jr(Date.now().toString()),capturedEnvVars:void 0,userExecutedCell:void 0,disableUI:void 0,kernelLanguage:void 0,kernelId:void 0,kernelSpecHash:void 0,isUsingActiveInterpreter:void 0,pythonEnvironmentType:void 0,pythonEnvironmentPath:void 0,pythonEnvironmentVersion:void 0,kernelConnectionType:void 0},{previouslySelectedKernelConnectionId:""}];"boolean"==typeof t.capturedEnvVars&&(r.capturedEnvVars=t.capturedEnvVars),t.userExecutedCell&&(r.userExecutedCell=!0),"boolean"==typeof t.disableUI&&(r.disableUI=t.disableUI);const s=t.kernelConnection;if(s){const n=s.id;let a;switch(o.previouslySelectedKernelConnectionId!==n&&(r.userExecutedCell=t.userExecutedCell,r.disableUI=t.disableUI),o.previouslySelectedKernelConnectionId&&o.previouslySelectedKernelConnectionId!==n&&(r.kernelSessionId=await jr(Date.now().toString())),s.kind){case"connectToLiveRemoteKernel":a=s.kernelModel.language;break;case"startUsingRemoteKernelSpec":case"startUsingLocalKernelSpec":a=s.kernelSpec.language;break;case"startUsingPythonInterpreter":a=i}const c="kernelSpec"in s&&s.kernelSpec.specFile?jr(s.kernelSpec.specFile):Promise.resolve("");[r.kernelLanguage,r.kernelId,r.kernelSpecHash]=await Promise.all([a,jr(s.id),c]),o.previouslySelectedKernelConnectionId=s.id;const l=s.interpreter;if(l){if(r.isUsingActiveInterpreter=Bu.isActiveWorkspaceInterpreter(e,l),r.pythonEnvironmentType=l.envType,r.pythonEnvironmentPath=await jr(un(Ro(l.uri))),Th.set(r.pythonEnvironmentPath,l),l.version){const{major:e,minor:t,patch:n}=l.version;r.pythonEnvironmentVersion=`${e}.${t}.${n}`}else r.pythonEnvironmentVersion=void 0;Ih(r)}r.kernelConnectionType=r.kernelConnectionType||s?.kind}else o.previouslySelectedKernelConnectionId="";xh.set(n,[r,o])}async function If(e,t){await Pf(e,{kernelConnection:t,userExecutedCell:!0})}kf([ye()],Tf.prototype,"initialize",null),Tf=kf([Kn(),Ef(0,zn(Oi)),Ef(0,Nc(Ai)),Ef(1,zn(qa))],Tf);var Df=function(e,t){return function(n,i){t(n,i,e)}};let Rf=class{constructor(e,t,n,i,r){this.interpreterService=e,this.envActivation=t,this.envVarsService=n,this.customEnvVars=i,this.configService=r}async getEnvironmentVariables(e,t,n,r){let o=n.env&&Object.keys(n.env).length>0?n.env:void 0;const s=(n.language||"").toLowerCase()===i;if(!t&&n.interpreterPath&&(t=await this.interpreterService.getInterpreterDetails(Oe.Uri.file(n.interpreterPath),r).catch((e=>{Sn("Failed to fetch interpreter information for interpreter that owns a kernel",e)}))),r?.isCancellationRequested)return;let[a,c]=await Promise.all([this.customEnvVars.getCustomEnvironmentVariables(e,s?"RunPythonCode":"RunNonPythonCode",r).catch(ae),t?this.envActivation.getActivatedEnvironmentVariables(e,t,r).catch((e=>{Sn("Failed to get env variables for interpreter, hence no variables for Kernel",e)})):void 0]);if(r?.isCancellationRequested)return;await Pf(e,{capturedEnvVars:Object.keys(c||{}).length>0}),c||0!==Object.keys(a||{}).length||En("No custom variables nor do we have a conda environment");let l={...process.env};if("win32"===process.platform&&(l={},Object.keys(process.env).forEach((e=>{l[e.toUpperCase()]=process.env[e]}))),o=o||{},a=a||{},s||t){if(c=c||a,this.configService.getSettings(e).useOldKernelResolve){this.envVarsService.mergeVariables(c,l),this.envVarsService.mergeVariables(o,l),this.envVarsService.mergeVariables(a,l);let e=Object.keys(c).find((e=>"path"==e.toLowerCase()));const n=Object.keys(l).find((e=>"path"==e.toLowerCase()))||e;e&&n&&(l[n]=c[e]),c.PYTHONPATH&&(l.PYTHONPATH=c.PYTHONPATH),e=Object.keys(a).find((e=>"path"==e.toLowerCase())),e&&a[e]&&this.envVarsService.appendPath(l,a[e]),e=Object.keys(o).find((e=>"path"==e.toLowerCase())),e&&o[e]&&this.envVarsService.appendPath(l,o[e]),a.PYTHONPATH&&this.envVarsService.appendPythonPath(l,a.PYTHONPATH),o.PYTHONPATH&&this.envVarsService.appendPythonPath(l,o.PYTHONPATH),t&&this.envVarsService.prependPath(l,Pt(t.uri.fsPath))}else Object.assign(l,c,o);this.configService.getSettings(void 0).excludeUserSitePackages&&(kn(`Adding env Variable PYTHONNOUSERSITE to ${pn(t?.uri)}`),l.PYTHONNOUSERSITE="True"),s&&(l.PYDEVD_IPYTHON_COMPATIBLE_DEBUGGING="1")}else this.envVarsService.mergeVariables(o,l),this.envVarsService.mergeVariables(a,l);return En(`Kernel Env Variables for ${n.specFile||n.name}, PATH value is ${l.PATH}`),l}};function Of(e){const t="kernelSpec"in e?e:void 0;if("startUsingPythonInterpreter"===t?.kind)return!0;if(t&&!ea(t))return!1;const n=t?t.kernelSpec:e;return(!n.language||n.language.toLowerCase()===i)&&function(e){const t="kernelSpec"in e?e:void 0;if("startUsingPythonInterpreter"===t?.kind)return!0;if(t&&!ea(t))return!1;const n=t?t.kernelSpec:e;return It(n.argv[0]).toLowerCase().startsWith("python")}(e)&&n.argv.some((e=>e.includes("ipykernel_launcher")||e.includes("ipykernel")))}Rf=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Df(0,zn(ka)),Df(1,zn(Ja)),Df(2,zn(Sa)),Df(3,zn(Ca)),Df(4,zn(ji))],Rf);var Af=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Nf=function(e,t){return function(n,i){t(n,i,e)}};let Mf=class{constructor(e,t,n,i){this.kernelDependencyService=e,this.fs=t,this.jupyterPaths=n,this.kernelEnvVars=i}async ensureKernelIsUsable(e,t,n,i,r){if(En(`Check if a kernel ${t.id} is usable`),Of(t)&&t.interpreter){const o=await this.kernelDependencyService.installMissingDependencies({resource:e,kernelConnection:t,ui:n,token:i,ignoreCache:!0,cannotChangeKernels:r});switch(o){case aa.cancel:case aa.selectDifferentKernel:case aa.failed:case aa.uiHidden:throw new Sh(o,t)}}var o=void 0;ea(t)&&((o=t.kernelSpec.specFile)&&await this.fs.exists(Oe.Uri.file(o))?t.interpreter&&o&&It(Pt(o)).toLowerCase()!=t.kernelSpec.name.toLowerCase()&&(o=await this.registerKernel(t,i)):o=await this.registerKernel(t,i),t.interpreter&&o?(En(`Updating Kernel Environment for ${t.id} for interpreter ${t.interpreter.id}`),await this.updateKernelEnvironment(e,t,o,i)):En(`Not Updating Kernel Environment for ${t.id}`))}async registerKernel(e,t){const n=await this.jupyterPaths.getKernelSpecTempRegistrationFolder();if(!e.kernelSpec||t.isCancellationRequested||!e.kernelSpec.name)return;const i=tn(n,e.kernelSpec.name,"kernel.json");if(await this.fs.exists(i))return kn(`Kernel spec file for ${e.id} already exists ${pn(i)}`),i.fsPath;const r={...e.kernelSpec};if(e.kernelSpec.specFile&&!ol(un(i),e.kernelSpec.specFile)&&(r.metadata=r.metadata||{},r.metadata={...r.metadata,vscode:{...r.metadata.vscode||{},originalSpecFile:e.kernelSpec.metadata?.vscode?.originalSpecFile||e.kernelSpec.specFile,originalDisplayName:e.kernelSpec.metadata?.vscode?.originalDisplayName||e.kernelSpec.display_name}}),e.interpreter&&(r.metadata={...r.metadata,interpreter:Go(e.interpreter)}),kn(`RegisterKernel for ${e.id} into ${pn(i)}`),En(`RegisterKernel for ${e.id} into ${pn(i)} with contents ${JSON.stringify(r)}`),await this.fs.writeFile(i,JSON.stringify(r,void 0,4)),t.isCancellationRequested)return;const o=r.metadata?.vscode?.originalSpecFile||r.metadata?.originalSpecFile;if(o){const e=Pt(o),t=Pt(i.fsPath),n=await this.fs.searchLocal("*.*[^json]",e);await Promise.all(n.map((async n=>{const i=Et(e,n),r=Et(t,n);await this.fs.copy(Oe.Uri.file(i),Oe.Uri.file(r))})))}return i.fsPath}async updateKernelEnvironment(e,t,n,i){const r=t.interpreter,o=t.kernelSpec,s=await this.jupyterPaths.getKernelSpecTempRegistrationFolder(),a=o;if(n&&s){const c=It(n).toLowerCase()===o.name.toLowerCase()?n:tn(s,o.name,"kernel.json").fsPath;if(!await this.fs.exists(Oe.Uri.file(c)))return void Cn(`Spec file for ${t.id} does not exist ${c} hence not updating env vars.`);const l=Oe.Uri.file(c);try{let n=JSON.parse(await this.fs.readFile(l));if(i?.isCancellationRequested)return;if(n.metadata?.interpreter?(Of(o)&&(En(`Python KernelSpec argv[0] updated for ${t.id} from '${n.argv[0]}' to '${pn(r.uri)}'`),n.argv[0]=r.uri.fsPath),n.metadata=n.metadata||{},n.metadata.interpreter=r):En(`KernelSpec argv[0] not updated for ${t.id} ('${n.argv[0]}')`),n.env=await this.kernelEnvVars.getEnvironmentVariables(e,r,a),n=function(e){const t=xo()(e);return t.env&&Object.keys(t.env).forEach((e=>{if(t.env){const n=t.env[e];null!=n&&(t.env[e]=n.toString())}})),t}(n),await this.fs.writeFile(l,JSON.stringify(n,void 0,2)),En(`Updated kernel spec for ${t.id} with environment variables for ${pn(l)}`),xn(`Updated kernel spec for ${t.id} with environment variables for ${pn(l)} with env variables ${JSON.stringify(n.env)}}`),i?.isCancellationRequested)return;a.metadata=n.metadata}catch(e){if(i?.isCancellationRequested)return;throw Sn(`Failed to update kernel spec for ${t.id} with environment variables for ${pn(l)}`,e),e}}else Cn(`Either Kernel spec file or root spec file path does not exist for ${t.id}.`)}};Af([Pn("Failed to register an interpreter as a kernel")],Mf.prototype,"registerKernel",null),Mf=Af([Kn(),Nf(0,zn(ca)),Nf(1,zn(Nu)),Nf(2,zn(vf)),Nf(3,zn(Rf))],Mf);var Lf=function(e,t){return function(n,i){t(n,i,e)}};let jf=class{constructor(e,t){this.liveKernelConnectionTracker=e,this.providerRegistration=t}async isValid(e){if(!this.liveKernelConnectionTracker.wasKernelUsed(e))return!1;const t=await this.providerRegistration.getProvider(e.serverProviderHandle.extensionId,e.serverProviderHandle.id).catch(ae);return t?!t.getHandles||(!!(await t.getHandles()).includes(e.serverProviderHandle.handle)||(Cn(`Hiding remote kernel ${e.id} for ${t.id} as the remote Jupyter Server ${e.serverProviderHandle.id}:${e.serverProviderHandle.handle} is no longer available`),!1)):(Cn(`Extension may have been uninstalled for provider ${e.serverProviderHandle.id}, handle ${e.serverProviderHandle.handle}`),!1)}};jf=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Lf(0,zn(Ci)),Lf(1,zn(gi))],jf);var Ff=function(e,t){return function(n,i){t(n,i,e)}};let Uf=class{constructor(e,t,n){this.appShell=t,this.commandManager=n,e.onDidChangeConfiguration(this.onDidChangeConfiguration.bind(this))}async onDidChangeConfiguration(e){if(e.affectsConfiguration("jupyter.jupyterCommandLineArguments")){const e=gr.jupyterCommandLineReloadAnswer;await this.appShell.showInformationMessage(gr.jupyterCommandLineReloadQuestion,e)===e&&this.commandManager.executeCommand("workbench.action.reloadWindow").then(ae,ae)}}};Uf=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Ff(0,zn(Qn)),Ff(1,zn(Jn)),Ff(2,zn(Gn))],Uf);var qf=__webpack_require__(71171),Kf=__webpack_require__.n(qf);class Vf extends wo{constructor(e){super("timeout",gr.jupyterLaunchTimedOut,e)}}var Wf=function(e,t){return function(n,i){t(n,i,e)}};let $f=class{constructor(e,t,n,i,r,o,s){this.interpreterService=e,this.disposableRegistry=t,this.workspace=i,this.configuration=r,this.notebookStarter=o,this.jupyterInterpreterService=s,this.disposed=!1,this._disposed=!1,this.disposableRegistry.push(this.interpreterService.onDidChangeInterpreter((()=>this.onSettingsChanged()))),this.disposableRegistry.push(this),i&&i.onDidChangeConfiguration((e=>{e.affectsConfiguration("python.dataScience",void 0)&&this.onSettingsChanged()}),this,this.disposableRegistry),n.push(this)}async dispose(){kn("Disposing HostJupyterExecution"),this._disposed||(this._disposed=!0,En("Disposing super HostJupyterExecution"),this.disposed=!0,En("Cleaning up server cache"),await(this.cache?.then((e=>e.dispose())).catch(ae))),En("Finished disposing HostJupyterExecution")}async startServer(e,t){if(this._disposed)throw new Error("Notebook server is disposed");if(!this.cache){const n=this.cache=this.startJupyterWithRetry(e,t);n.catch((e=>{Sn("Failed to start the Jupyter Server",e),this.cache===n&&(this.cache=void 0)}))}return this.cache}async refreshCommands(){await(this.jupyterInterpreterService?.refreshCommands())}async isJupyterServerSupported(e){return!!this.jupyterInterpreterService&&this.jupyterInterpreterService.isNotebookSupported(e)}async getJupyterServerError(){return this.jupyterInterpreterService?this.jupyterInterpreterService.getReasonForJupyterNotebookNotBeingSupported():gr.webNotSupported}async getUsableJupyterPython(e){return this.usablePythonInterpreter||this.disposed||!this.jupyterInterpreterService||(this.usablePythonInterpreter=await Ta(e,this.jupyterInterpreterService.getSelectedInterpreter(e))),this.usablePythonInterpreter}startJupyterWithRetry(e,t){return Ta(t,(async()=>{let n,i=1;const r=Math.max(1,this.configuration.getSettings(void 0).jupyterLaunchRetries);let o;for(;i<=r&&!this.disposed;){try{return n=await this.startImpl(e,t),En("Connection complete server"),n}catch(e){if(o=e,!(e instanceof Vf&&i<r)){if(n){if(this.disposed)throw e;throw e}throw e}kn("Retry because of wait for idle problem."),n?.dispose(),i+=1}throw o}throw new Error("Max number of attempts reached")})())}async startImpl(e,t){kn("Launching server");const n=this.configuration.getSettings(e),i=n.useDefaultConfigForJupyter,r=ao(await this.workspace.computeWorkingDirectory(e),this.workspace.rootFolder?tn(this.workspace.rootFolder,`${Kf()()}.txt`):void 0,this.workspace,n);if(!this.notebookStarter)throw new Error("Notebook Starter cannot be undefined");return this.notebookStarter.start(e,i,this.configuration.getSettings(void 0).jupyterCommandLineArguments,Oe.Uri.file(r),t)}onSettingsChanged(){this.usablePythonInterpreter=void 0}};$f=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Wf(0,zn(ka)),Wf(1,zn(Ri)),Wf(2,zn(Bi)),Wf(3,zn(Qn)),Wf(4,zn(ji)),Wf(5,zn(Si)),Wf(5,Qi()),Wf(6,zn(Pp)),Wf(6,Qi())],$f);class Bf extends Zi{constructor(){super("Python Extension not installed",void 0,"pythonExtension")}}var Hf=function(e,t){return function(n,i){t(n,i,e)}};let zf=class{constructor(e,t){this.jupyterServerProvider=e,this.extensionChecker=t,this.startupUi=new hh(!0)}async connect(e){e.ui.disableUI||(this.startupUi.disableUI=!1);const t=e.ui.onDidChangeDisableUI((()=>{e.ui.disableUI||(this.startupUi.disableUI=!1,t.dispose())}));if(e.ui=this.startupUi,this.extensionChecker.isPythonExtensionInstalled)return this.jupyterServerProvider.getOrStartServer(e).finally((()=>t.dispose()));throw t.dispose(),this.startupUi.disableUI||await this.extensionChecker.showPythonExtensionInstallRequiredPrompt(),new Bf}};zf=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Hf(0,zn(mi)),Hf(1,zn(Ao))],zf);class Jf extends Xi{constructor(){super("nodeonly",gr.webNotSupported)}}var Gf=function(e,t){return function(n,i){t(n,i,e)}};let Yf=class{constructor(e,t){this.jupyterServerHelper=e,this.interpreterService=t}async getOrStartServer(e){if(!this.serverPromise){const t=this.serverPromise=this.startServerImpl(e);t.catch((()=>{t===this.serverPromise&&(this.serverPromise=void 0)}))}return this.serverPromise}async startServerImpl(e){const t=this.jupyterServerHelper;if(!t)throw new Jf;try{if(En("Checking for server usability."),!await this.checkUsable())throw En("Server not usable (should ask for install now)"),new vh(gr.jupyterNotSupported(await t.getJupyterServerError()));En("Starting notebook server.");const n=await t.startServer(e.resource,e.token);return Ia.throwIfCanceled(e.token),n}catch(n){if(e.token?.isCancellationRequested&&Ea(n))throw n;throw await t.refreshCommands(),n}}async checkUsable(){try{return!this.jupyterServerHelper||!!await this.jupyterServerHelper.getUsableJupyterPython()}catch(e){const t=await this.interpreterService.getActiveInterpreter(void 0);if(t){const n=t.displayName?t.displayName:un(t.uri);throw new Error(gr.jupyterNotSupportedBecauseOfEnvironment(n,e.toString()))}throw new vh(gr.jupyterNotSupported(this.jupyterServerHelper?await this.jupyterServerHelper.getJupyterServerError():"Error"))}}};Yf=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Gf(0,zn(ci)),Gf(0,Qi()),Gf(1,zn(ka))],Yf);class Qf extends Xi{constructor(e,t,n){super("jupytercannotbelaunchedwitheroot",e+(t?`\n${t}`:"")),this.interpreter=n}}const Xf=new RegExp(j.UrlPatternRegEx);class Zf{constructor(e,t,n,i,r,o){this.launchResult=e,this.notebookDir=t,this.rootDir=n,this.getServerInfo=i,this.serviceContainer=r,this.interpreter=o,this.startPromise=ie(),this.output="",this.subscriptions=[],this.ready=this.startPromise.promise;const s=r.get(ji).getSettings(void 0).jupyterLaunchTimeout;this.launchTimeout=setTimeout((()=>{this.startPromise.completed||this.rejectStartPromise(gr.jupyterLaunchTimedOut)}),s);let a=0;e.proc&&e.proc.on("exit",(e=>a=e||0)),this.subscriptions.push(e.out.subscribe((e=>{En(e.out),this.output+=e.out,j.HttpPattern.exec(this.output)&&!this.startPromise.completed&&this.getServerInfo().then((e=>this.getJupyterURL(e,this.output))).catch((e=>Cn("Failed to get server info",e)))}),(e=>this.rejectStartPromise(e)),(()=>this.rejectStartPromise(gr.jupyterServerCrashed(a)))))}dispose(){clearTimeout(this.launchTimeout),this.subscriptions.forEach((e=>e.unsubscribe()))}getJupyterURL(e,t){if(e&&e.length>0&&!this.startPromise.completed){const t=e.find((e=>ol(un(this.notebookDir),un(Oe.Uri.file(e.notebook_dir)))));if(t){const e=t.url,n=t.token;this.resolveStartPromise(e,n)}}if(!this.startPromise.completed){const e=Xf.exec(t),n=e?.groups;if(!this.startPromise.completed&&n&&(n.LOCAL||n.IP)){const e=n.LOCAL?n.LOCAL:n.IP,t=`${n.PREFIX}${e}${n.REST}`;let i;try{i=new URL(t)}catch(e){return Sn(`Failed to parse ${t}`,e),void this.rejectStartPromise(gr.jupyterLaunchNoURL)}const r=i.pathname.endsWith("/tree")?i.pathname.replace("/tree",""):i.pathname;this.resolveStartPromise(`${i.protocol}//${i.host}${r}`,`${i.searchParams.get("token")}`)}}}resolveStartPromise(e,t){if(clearTimeout(this.launchTimeout),!this.startPromise.rejected){const n=this.serviceContainer.get(ji),i=this.serviceContainer.get(_i),r=this.serviceContainer.get(wi),o=uo({handle:"",id:"_builtin.jupyterServerLauncher",extensionId:p},{baseUrl:e,token:t,displayName:ir(t,e)},i,r,n,!0,this.rootDir,new Oe.Disposable((()=>this.launchResult.dispose())));this.startPromise.resolve(o)}}rejectStartPromise(e){if(clearTimeout(this.launchTimeout),!this.startPromise.resolved){let t;e="string"==typeof e?e:e.message;const n=this.output;t=n.includes("Jupyter command `jupyter-notebook` not found")?new Rh(e,n,this.interpreter):n.includes("Running as root is not recommended. Use --allow-root to bypass")?new Qf(e,n,this.interpreter):new Fr(e,n,this.interpreter),this.startPromise.reject(t)}}}const em=new Set;var tm=function(e,t){return function(n,i){t(n,i,e)}};let nm=class{constructor(e,t,n,i){this.jupyterInterpreterService=e,this.fs=t,this.serviceContainer=n,this.jupyterOutputChannel=i,this.disposables=[]}dispose(){for(;this.disposables.length>0;){const e=this.disposables.shift();try{e&&e.dispose()}catch{}}}async start(e,t,n,i,r){kn("Starting Notebook");let o,s=0;const a=[],c=Na.reportProgress(e,Da.NotebookStart);try{const e=this.generateTempDir();e.then((e=>this.disposables.push(e))).catch(ae);const c=await this.generateArguments(t,n,e,i.fsPath);Ia.throwIfCanceled(r),En("Starting Jupyter Notebook");const[l,d,u]=await Promise.all([this.jupyterInterpreterService.startNotebook(c||[],{throwOnStdErr:!1,encoding:"utf8",token:r}),e,this.jupyterInterpreterService.getSelectedInterpreter(r).catch((()=>{}))]);l.proc&&(l.proc.on("exit",(e=>s=e)),l.out.subscribe((e=>this.jupyterOutputChannel.append(e.out)))),l&&r.onCancellationRequested((()=>{l.dispose()}),this,a),En("Waiting for Jupyter Notebook"),o=new Zf(l,Oe.Uri.file(d.path),i,(()=>this.jupyterInterpreterService.getRunningJupyterServers(r)),this.serviceContainer,u),Ia.throwIfCanceled(r);const p=await Ta(r,o.ready);try{const e=parseInt(new URL(p.baseUrl).port||"0",10);e&&!isNaN(e)&&(l.proc&&l.proc.on("exit",(()=>em.delete(e))),em.add(e))}catch(e){Sn(`Parsing failed ${p.baseUrl}`,e)}return Ie(a),p}catch(e){if(Ie(a),Ea(e)||e instanceof Fr||e instanceof Qf||e instanceof Rh)throw e;if(!await this.jupyterInterpreterService.isNotebookSupported())throw new vh(await this.jupyterInterpreterService.getReasonForJupyterNotebookNotBeingSupported());throw 0!==s?new Error(gr.jupyterServerCrashed(s)):Zi.from(gr.jupyterNotebookFailure(e),e)}finally{c.dispose(),o?.dispose()}}async generateDefaultArguments(e,t,n){const i=[];i.push(Promise.resolve("--no-browser")),i.push(Promise.resolve(this.getNotebookDirArgument(n))),e&&i.push(this.getConfigArgument(t)),i.push(Promise.resolve("--NotebookApp.iopub_data_rate_limit=10000000000.0"));const[r,o]=await Promise.all([Promise.all(i),this.getDockerArguments()]);return[...r,...o,...process.env&&process.env.VSCODE_JUPYTER_DEBUG_JUPYTER?["--debug"]:[]]}async generateCustomArguments(e){return["--no-browser","--NotebookApp.iopub_data_rate_limit=10000000000.0","--KernelManager.autorestart=False",...e]}async generateArguments(e,t,n,i){return t&&0!==t.length?this.generateCustomArguments(t):this.generateDefaultArguments(e,n,i)}getNotebookDirArgument(e){return`--notebook-dir="${e.replace(/\\/g,"\\\\")}"`}async getConfigArgument(e){const t=await e,n=Et(t.path,"jupyter_notebook_config.py");return await this.fs.writeFile(Oe.Uri.file(n),""),kn(`Generating custom default config at ${n}`),`--config=${n}`}async getDockerArguments(){const e=[];try{const t=await this.fs.readFile(Oe.Uri.file("/proc/self/cgroup")).catch((()=>""));return t.includes("docker")||t.includes("kubepods")?(e.push("--ip"),e.push("127.0.0.1"),new Promise((t=>{pl.exec("id",{encoding:"utf-8"},((n,i)=>{i&&i.toString().includes("(root)")&&e.push("--allow-root"),t(e)}))}))):e}catch{return e}}async generateTempDir(){const e=Oe.Uri.file(Et(hc.tmpdir(),Kf()()));return await this.fs.createDirectory(e),{path:un(e),dispose:async()=>{let t=0;for(;t<10;)try{await this.fs.delete(e),t=10}catch{t+=1}}}}};nm=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),tm(0,zn(Pp)),tm(1,zn(La)),tm(2,zn(ya)),tm(3,zn(Ii)),tm(3,Nc(E))],nm);var im=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},rm=function(e,t){return function(n,i){t(n,i,e)}};let om=class extends dc{get onDidLoad(){return this._onDidLoad.event}get onDidChange(){return this._onDidChangeUri.event}get onDidRemove(){return this._onDidRemoveUris.event}get onDidAdd(){return this._onDidAddUri.event}get all(){return this._all}constructor(e,t,n,i,r){super(),this.context=i,this._onDidLoad=new Oe.EventEmitter,this._onDidChangeUri=new Oe.EventEmitter,this._onDidRemoveUris=new Oe.EventEmitter,this._onDidAddUri=new Oe.EventEmitter,this._all=[],r.push(this);const o=Oe.Uri.joinPath(this.context.globalStorageUri,"remoteServersMRUList.json");this.oldStorage=new sm(e,t),this.newStorage=new am(n,o,this.oldStorage,t),this.disposables.push(this._onDidLoad),this.disposables.push(this._onDidAddUri),this.disposables.push(this._onDidChangeUri),this.disposables.push(this._onDidRemoveUris),this.disposables.push(this.newStorage)}hookupStorageEvents(){this.storageEventsHooked||(this.storageEventsHooked=!0,this.newStorage.onDidAdd((e=>this._onDidAddUri.fire(e)),this,this.disposables),this.newStorage.onDidChange((e=>this._onDidChangeUri.fire(e)),this,this.disposables),this.newStorage.onDidRemove((e=>this._onDidRemoveUris.fire(e)),this,this.disposables))}async getAll(){this.hookupStorageEvents(),await this.newStorage.migrateMRU();const e=this._all;return this._all=await this.newStorage.getAll(),e.length===this._all.length&&JSON.stringify(this._all)===JSON.stringify(e)||this._onDidLoad.fire(),this._all}async clear(){this.hookupStorageEvents(),await this.newStorage.migrateMRU(),await Promise.all([this.oldStorage.clear(),this.newStorage.clear()]),this._all=[],this._onDidLoad.fire()}async add(e,t){this.hookupStorageEvents(),await this.newStorage.migrateMRU(),xn(`setUri: ${e.id}.${e.handle}`);const n={time:t?.time??Date.now(),displayName:"",provider:e};await this.newStorage.add(n),this.getAll().catch(ae)}async update(e){this.hookupStorageEvents(),await this.newStorage.migrateMRU(),await this.newStorage.update(e),this.getAll().catch(ae)}async remove(e){this.hookupStorageEvents(),await this.newStorage.migrateMRU(),await this.newStorage.remove(e),this.getAll().catch(ae)}};om=im([Kn(),rm(0,zn(si)),rm(1,zn(Oi)),rm(1,Nc(Ai)),rm(2,zn(La)),rm(3,zn(Ui)),rm(4,zn(Ri))],om);let sm=class{constructor(e,t){this.encryptedStorage=e,this.globalMemento=t}async getAllRaw(){const e=this.globalMemento.get(v.JupyterServerUriList);if(!Array.isArray(e)||0===e.length)return[];const t=await this.encryptedStorage.retrieve(v.JupyterServerRemoteLaunchService,v.JupyterServerRemoteLaunchUriListKey);if(!t)return[];const n=t.split(v.JupyterServerRemoteLaunchUriSeparator),i=[];return await Promise.all(n.slice(0,Math.min(n.length,e.length)).map((async(t,n)=>{const r=t.split(v.JupyterServerRemoteLaunchNameSeparator),o=r[0];if(o!==v.JupyterServerLocalLaunch)try{const t=function(e){try{const t=new URL(e),n=t.searchParams.get(C.REMOTE_URI_ID_PARAM),i=t.searchParams.get(C.REMOTE_URI_HANDLE_PARAM),r=t.searchParams.get(C.REMOTE_URI_EXTENSION_ID_PARAM)||go(n||"");if(n&&i){if(!r)throw new mo(`Unable to determine the extension id for the remote server handle', { ${n}, ${i} }`);return{handle:i,id:n,extensionId:r}}throw new Error("Invalid remote URI")}catch(t){if(t instanceof mo)throw t;throw new Error(`'Failed to parse remote URI ${function(e){if((e||"").trim().toLowerCase().startsWith(C.REMOTE_URI.toLowerCase()))return e;try{const t=new URL(e),n="localhost"===t.hostname.toLocaleLowerCase()||"127.0.0.1"===t.hostname;return`${t.protocol}//${n?t.hostname:"<REMOTE SERVER>"}:${t.port}`}catch{return e}}(e)}`)}}(o),s=r[1]!==v.JupyterServerRemoteLaunchUriEqualsDisplayName&&r[1]?r[1]:o;i.push({time:e[n].time,displayName:s,provider:t})}catch(e){o.startsWith(C.REMOTE_URI)&&Sn("Failed to parse stored Uri information",e)}}))),En(`Found ${i.length} saved URIs, ${JSON.stringify(i)}`),i}async clear(){await this.globalMemento.update(v.JupyterServerUriList,[]).then(ae,ae),await this.encryptedStorage.store(v.JupyterServerRemoteLaunchService,v.JupyterServerRemoteLaunchUriListKey,void 0).then(ae,ae)}};sm=im([rm(0,zn(si)),rm(1,zn(Oi)),rm(1,Nc(Ai))],sm);class am{get onDidChange(){return this._onDidChangeUri.event}get onDidRemove(){return this._onDidRemoveUris.event}get onDidAdd(){return this._onDidAddUri.event}constructor(e,t,n,i){this.fs=e,this.storageFile=t,this.oldStorage=n,this.memento=i,this._onDidChangeUri=new Oe.EventEmitter,this._onDidRemoveUris=new Oe.EventEmitter,this._onDidAddUri=new Oe.EventEmitter,this.updatePromise=Promise.resolve(),this.mementoKey=`MEMENTO_KEY_FOR_STORING_USED_JUPYTER_PROVIDERS_${Oe.env.machineId}`}dispose(){this._onDidAddUri.dispose(),this._onDidChangeUri.dispose(),this._onDidRemoveUris.dispose()}async migrateMRU(){if(!this.migration){if(this.memento.get(this.mementoKey))return void(this.migration=Promise.resolve());this.migration=this.migrateToStorageFile().then((()=>this.migrateToMemento()))}return this.migration}async migrateToStorageFile(){if(await this.fs.exists(this.storageFile))return;const e=await this.oldStorage.getAllRaw(),t=en(this.storageFile);await this.fs.exists(t)||await this.fs.createDirectory(t);const n=e.map((e=>({serverHandle:e.provider,displayName:e.displayName||"",time:e.time})));await this.fs.writeFile(this.storageFile,JSON.stringify(n))}async migrateToMemento(){if(this.memento.get(this.mementoKey))return;if(!await this.fs.exists(this.storageFile))return void await this.memento.update(this.mementoKey,[]);const e=await this.fs.readFile(this.storageFile),t=[];JSON.parse(e).map((e=>{e.serverHandle.extensionId=e.serverHandle.extensionId||go(e.serverHandle.id)||"",e.serverHandle.extensionId&&t.push(e)})),await Promise.all([this.fs.delete(this.storageFile).catch(ae),this.memento.update(this.mementoKey,t)])}async add(e){return this.updatePromise=this.updatePromise.then((async()=>{const t=this.getAll(),n=t.find((t=>fo(t.provider)===fo(e.provider))),i=[{displayName:e.displayName||n?.displayName||fo(e.provider),serverHandle:e.provider,time:e.time}].concat(t.sort(((e,t)=>t.time-e.time)).filter((t=>fo(t.provider)!==fo(e.provider))).map((e=>({displayName:e.displayName,serverHandle:e.provider,time:e.time})))),r=i.splice(v.JupyterServerUriListMax);if(await this.memento.update(this.mementoKey,i),n||this._onDidAddUri.fire(e),r.length){const e=r.map((e=>({provider:e.serverHandle,time:e.time,displayName:e.displayName||""})));this._onDidRemoveUris.fire(e.map((e=>e.provider)))}this._onDidChangeUri.fire()})).catch(ae)}async update(e){const t=this.getAll().find((t=>t.provider.id===e.id&&t.provider.handle===e.handle)),n={provider:e,time:Date.now(),displayName:t?.displayName||""};await this.add(n)}async remove(e){await(this.updatePromise=this.updatePromise.then((async()=>{let t=!1;try{const n=this.getAll();if(0===n.length)return;const i=n.filter((t=>t.provider.id!==e.id||t.provider.handle!==e.handle)),r=n.filter((t=>t.provider.id===e.id&&t.provider.handle===e.handle));if(0===i.length)await this.clear();else if(r.length){const e=i.map((e=>({displayName:e.displayName,serverHandle:e.provider,time:e.time})));t=!0,await this.memento.update(this.mementoKey,e),this._onDidRemoveUris.fire(r.map((e=>e.provider)))}}finally{t||this._onDidRemoveUris.fire([e])}})).catch((t=>Sn(`Failed to remove Server handle ${JSON.stringify(e)}`,t))))}getAll(){const e=this.memento.get(this.mementoKey,[]),t=[];return e.forEach((async e=>{const n=fo(e.serverHandle),i={time:e.time,displayName:e.displayName||n,provider:e.serverHandle};t.push(i)})),t}async clear(){const e=this.getAll();await this.memento.update(this.mementoKey,[]),e.length&&this._onDidRemoveUris.fire(e.map((e=>e.provider)))}}var cm=function(e,t){return function(n,i){t(n,i,e)}};const lm="removeKernelUrisAndSessionsUsedByResources";let dm=class{constructor(e,t,n){this.disposables=e,this.uriStorage=t,this.memento=n,this.usedRemoteKernelServerIdsAndSessions={}}activate(){this.usedRemoteKernelServerIdsAndSessions=this.memento.get(lm,{}),this.uriStorage.onDidRemove(this.onDidRemoveServers,this,this.disposables)}wasKernelUsed(e){const t=fo(e.serverProviderHandle);return t in this.usedRemoteKernelServerIdsAndSessions&&"string"==typeof e.kernelModel.id&&e.kernelModel.id in this.usedRemoteKernelServerIdsAndSessions[t]}trackKernelIdAsUsed(e,t,n){const i=fo(t);this.usedRemoteKernelServerIdsAndSessions[i]=this.usedRemoteKernelServerIdsAndSessions[i]||{},this.usedRemoteKernelServerIdsAndSessions[i][n]=this.usedRemoteKernelServerIdsAndSessions[i][n]||[];const r=this.usedRemoteKernelServerIdsAndSessions[i][n];r.includes(e.toString())||(r.push(e.toString()),this.memento.update(lm,this.usedRemoteKernelServerIdsAndSessions).then(ae,ae))}trackKernelIdAsNotUsed(e,t,n){const i=fo(t);if(!(i in this.usedRemoteKernelServerIdsAndSessions))return;if(!(n in this.usedRemoteKernelServerIdsAndSessions[i]))return;const r=this.usedRemoteKernelServerIdsAndSessions[i][n];Array.isArray(r)&&r.includes(e.toString())&&(r.splice(r.indexOf(e.toString()),1),0===r.length&&delete this.usedRemoteKernelServerIdsAndSessions[i][n],0===Object.keys(this.usedRemoteKernelServerIdsAndSessions[i]).length&&delete this.usedRemoteKernelServerIdsAndSessions[i],this.memento.update(lm,this.usedRemoteKernelServerIdsAndSessions).then(ae,ae))}onDidRemoveServers(e){e.forEach((e=>{const t=fo(e);delete this.usedRemoteKernelServerIdsAndSessions[t],this.memento.update(lm,this.usedRemoteKernelServerIdsAndSessions).then(ae,ae)}))}};function um(e){const t=`${ts}${Kf()()}${Kf()()}.ipynb`;return e?`${Xt(e,".ipynb")}${t}`:`${gr.defaultNotebookName}${t}`}dm=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),cm(0,zn(Ri)),cm(1,zn(vi)),cm(2,zn(Oi)),cm(2,Nc(Ai))],dm);class pm{async createBackingFile(e,t,n,i,r){let o;const s=nn(i.rootDirectory,t)?.replace(/\\/g,"/"),a=ea(n)&&s&&!s.startsWith("..")?{type:"notebook",path:s}:{type:"notebook"},c=um(e);try{o=await r.newUntitled(a);const e=Pt(o.path);o=await r.rename(o.path,e.length&&"."!==e?`${e}/${c}`:c)}catch(e){if(ea(n))try{o=await r.newUntitled({type:"notebook"});const e=Pt(o.path);o=await r.rename(o.path,e.length&&"."!==e?`${e}/${c}`:c)}catch(e){}else Sn(`Backing file not supported: ${e}`)}if(o){const e=o.path;return{filePath:e,dispose:()=>r.delete(e)}}}}let hm=class extends pm{async createBackingFile(e,t,n,i,r){return super.createBackingFile(e,t,n,i,r)}};hm=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],hm);var fm=__webpack_require__(47030),mm=__webpack_require__.n(fm);function gm(e){return class extends e{constructor(...e){super(...e),this._onAnyMessage=new Oe.EventEmitter,this.onAnyMessage=this._onAnyMessage.event,this.msgChain=Promise.resolve(),this.sendChain=Promise.resolve(),this.receiveHooks=[],this.sendHooks=[]}patchSuperEmit(e){super.emit=e}sendToRealKernel(e,t){this._onAnyMessage.fire({msg:e,direction:"send"}),super.send(e,t)}send(e,t){this.sendHooks?this.sendChain=this.sendChain.then((()=>Promise.all(this.sendHooks.map((n=>n(e,t)))))).then((()=>super.send(e,t))):super.send(e,t)}handleEvent(e,t,...n){return"message"===t&&this.receiveHooks.length?(this.msgChain=this.msgChain.then((()=>Promise.all(this.receiveHooks.map((e=>e(n[0])))))).then((()=>e(t,...n))).catch((e=>Sn(`Exception while handling messages: ${e}`))),!0):e(t,...n)}emit(e,...t){return this.handleEvent(((e,...t)=>super.emit(e,...t)),e,...t)}addReceiveHook(e){this.receiveHooks.push(e)}removeReceiveHook(e){this.receiveHooks=this.receiveHooks.filter((t=>t!==e))}addSendHook(e){this.sendHooks.push(e)}removeSendHook(e){this.sendHooks=this.sendHooks.filter((t=>t!==e))}}}const vm=new Map;let ym=class{getRequestCtor(e,t,n){class i extends Pr.Request{constructor(e,t){super(e,t);const i=this.headers,r=n();Object.keys(r).forEach((e=>i.append(e,r[e].toString()))),i.set("Content-Type","application/json");const o=i.append.bind(i);i.append=(e,t)=>{"authorization"!==e.toLowerCase()&&o(e,t)}}}return n&&Object.keys(n()||{}).length?i:Pr.Request}getWebsocketCtor(e,t,n,i){class r extends(gm(mm())){constructor(r,o){let s;super(r,(e=>{const t=i?i():void 0;if(t||e)return!e&&t?t:(e&&!t||(e=e?"string"==typeof e?[e]:e:[],Array.isArray(t)?e.push(...t):"string"==typeof t&&e.push(t)),e)})(o),(()=>{let i,r={};if(t&&(r={...r,rejectUnauthorized:!1}),e&&(i={Cookie:e}),n){const e=n();i=i?{...i,...e}:e}return i&&(r={...r,headers:i}),r})());const a=/.*\/kernels\/(.*)\/.*/.exec(r);a&&a.length>1&&(this.kernelId=a[1]),this.kernelId?(vm.set(this.kernelId,this),this.on("close",(()=>{s&&this.timer!==s&&clearInterval(s),vm.get(this.kernelId)===this&&vm.delete(this.kernelId)}))):Sn("KernelId not extracted from Kernel WebSocket URL"),s=this.timer=setInterval((()=>this.ping(ae)),3e4)}}return r}wrapWebSocketCtor(e){class t extends(gm(e)){constructor(e,t,n){let i;super(e,t,n);const r=/.*\/kernels\/(.*)\/.*/.exec(e);r&&r.length>1&&(this.kernelId=r[1]),this.kernelId?(vm.set(this.kernelId,this),this.on("close",(()=>{i&&this.timer!==i&&clearInterval(i),vm.get(this.kernelId)===this&&vm.delete(this.kernelId)}))):Sn("KernelId not extracted from Kernel WebSocket URL"),i=this.timer=setInterval((()=>this.ping(ae)),3e4)}}return t}getWebsocket(e){return vm.get(e)}getFetchMethod(){return Pr.default}getHeadersCtor(){return Pr.Headers}getRequestInit(){return{cache:"no-store",credentials:"same-origin"}}};ym=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],ym);class bm extends wo{constructor(e){super("invalidkernel",gr.kernelInvalid(ls(e)),e)}}var wm=__webpack_require__(4016),_m=__webpack_require__(37875);class Sm{constructor(e,t,n,i,r){this.kernelConnection=e,this.content=n,this.disposeOnDone=i,this.metadata=r,this.doneDeferred=ie(),this.pendingHooks=[],this.pendingInputReplies=[],this.disposed=!1,this.doneDeferred.promise.catch(ae),t.done.then((()=>this.requestExecute())).catch((e=>this.doneDeferred.reject(e))),this.statusChangedHandler=(e,t)=>{"unknown"!==t&&"restarting"!==t&&"dead"!==t&&"autorestarting"!==t||this.doneDeferred.reject(new Oe.CancellationError)},e.statusChanged?.connect(this.statusChangedHandler),this.statusChangedHandler(e,e.status)}get msg(){return this.requestFuture?this.requestFuture.msg:{content:this.content,channel:"shell",header:{date:Date.now.toString(),msg_id:"1",session:this.kernelConnection.id,msg_type:"execute_request",username:"",version:"1"},parent_header:{},metadata:{}}}get done(){return this.doneDeferred.promise}set onReply(e){this.requestFuture?this.requestFuture.onReply=e:this.pendingOnReply=e}set onIOPub(e){this.requestFuture?this.requestFuture.onIOPub=e:this.pendingOnIOPub=e}set onStdin(e){this.requestFuture?this.requestFuture.onStdin=e:this.pendingOnStdin=e}registerMessageHook(e){this.requestFuture?this.requestFuture.registerMessageHook(e):this.pendingHooks.push(e)}removeMessageHook(e){this.pendingHooks=this.pendingHooks.filter((t=>t!=e)),this.requestFuture&&this.requestFuture.removeMessageHook(e)}sendInputReply(e){this.requestFuture?this.requestFuture.sendInputReply(e):this.pendingInputReplies.push(e)}get isDisposed(){return this.disposed}dispose(){this.disposed=!0,this.kernelConnection.statusChanged.disconnect(this.statusChangedHandler),this.requestFuture&&(this.requestFuture.dispose(),this.requestFuture=void 0,this.clear())}clear(){this.pendingInputReplies=[],this.pendingHooks=[],this.pendingOnReply=void 0,this.pendingOnIOPub=void 0,this.pendingOnStdin=void 0}requestExecute(){if(this.requestFuture)throw new Error("ChainedFuture already executed. Can't execute more than once.");xn(`DelayedFuture is starting request now for ${this.content}.`),this.requestFuture=this.kernelConnection.requestExecute(this.content,this.disposeOnDone,this.metadata),this.requestFuture&&(this.pendingOnReply&&(this.requestFuture.onReply=this.pendingOnReply),this.pendingOnIOPub&&(this.requestFuture.onIOPub=this.pendingOnIOPub),this.pendingOnStdin&&(this.requestFuture.onStdin=this.pendingOnStdin),this.pendingHooks.length&&this.pendingHooks.forEach((e=>this.requestFuture?.registerMessageHook(e))),this.pendingInputReplies&&this.pendingInputReplies.forEach((e=>this.requestFuture?.sendInputReply(e))),this.requestFuture.done.then((e=>this.doneDeferred.resolve(e))).catch((e=>this.doneDeferred.reject(e))),this.clear())}}class Cm{requestExecute(e,t,n,i){if(!t.store_history)return e.requestExecute(t,n,i);const r=this.previousExecute&&this.previousKernel?.id===e.id?new Sm(e,this.previousExecute,t,n,i):e.requestExecute(t,n,i);return this.previousExecute=r,this.previousKernel=e,r.done.then((()=>{this.previousExecute==r&&(this.previousExecute=void 0,this.previousKernel=void 0)})).catch((()=>{this.previousExecute==r&&(this.previousExecute=void 0,this.previousKernel=void 0)})),r}}class km{get serverSettings(){return(this.possibleKernelConnection||this._previousKernelConnection).serverSettings}getKernelConnection(){if(!this.possibleKernelConnection)throw new Error(`Kernel connection is not available, status = ${this.status}, connection = ${this.connectionStatus}`);return this.possibleKernelConnection}constructor(e,t){this._previousKernelConnection=e,this.chainingExecute=new Cm,this.statusChanged=new wm.Signal(this),this.connectionStatusChanged=new wm.Signal(this),this.iopubMessage=new wm.Signal(this),this.unhandledMessage=new wm.Signal(this),this.anyMessage=new wm.Signal(this),this.disposed=new wm.Signal(this),this.originalKernel=e,this.startHandleKernelMessages(e),t.push(new Oe.Disposable((()=>{this.possibleKernelConnection&&this.stopHandlingKernelMessages(this.possibleKernelConnection)})))}get id(){return(this.possibleKernelConnection||this._previousKernelConnection).id}get name(){return(this.possibleKernelConnection||this._previousKernelConnection).name}get isDisposed(){return!this.possibleKernelConnection||!0===this.possibleKernelConnection?.isDisposed}get model(){return(this.possibleKernelConnection||this._previousKernelConnection).model}get username(){return(this.possibleKernelConnection||this._previousKernelConnection).username}get clientId(){return(this.possibleKernelConnection||this._previousKernelConnection).clientId}get status(){return this.possibleKernelConnection?.status||"dead"}get connectionStatus(){return this.possibleKernelConnection?.connectionStatus||"disconnected"}get info(){return(this.possibleKernelConnection||this._previousKernelConnection).info}get spec(){return(this.possibleKernelConnection||this._previousKernelConnection).spec}get handleComms(){return(this.possibleKernelConnection||this._previousKernelConnection).handleComms}sendShellMessage(e,t,n){return this.getKernelConnection().sendShellMessage(e,t,n)}sendControlMessage(e,t,n){return this.getKernelConnection().sendControlMessage(e,t,n)}reconnect(){return this.getKernelConnection().reconnect()}requestKernelInfo(){return this.getKernelConnection().requestKernelInfo()}requestComplete(e){return this.getKernelConnection().requestComplete(e)}requestInspect(e){return this.getKernelConnection().requestInspect(e)}requestHistory(e){return this.getKernelConnection().requestHistory(e)}requestExecute(e,t,n){return this.chainingExecute.requestExecute(this.getKernelConnection(),e,t,n)}requestDebug(e,t){return this.getKernelConnection().requestDebug(e,t)}requestIsComplete(e){return this.getKernelConnection().requestIsComplete(e)}requestCommInfo(e){return this.getKernelConnection().requestCommInfo(e)}sendInputReply(e){return this.getKernelConnection().sendInputReply(e)}createComm(e,t){return this.getKernelConnection().createComm(e,t)}hasComm(e){return this.getKernelConnection().hasComm(e)}registerCommTarget(e,t){return this.getKernelConnection().registerCommTarget(e,t)}removeCommTarget(e,t){return this.getKernelConnection().removeCommTarget(e,t)}registerMessageHook(e,t){return this.getKernelConnection().registerMessageHook(e,t)}removeMessageHook(e,t){return this.getKernelConnection().removeMessageHook(e,t)}clone(e){throw new Error("Method not implemented.")}startHandleKernelMessages(e){e.anyMessage.connect(this.onAnyMessage,this),e.iopubMessage.connect(this.onIOPubMessage,this),e.unhandledMessage.connect(this.onUnhandledMessage,this)}stopHandlingKernelMessages(e){e.anyMessage.disconnect(this.onAnyMessage,this),e.iopubMessage.disconnect(this.onIOPubMessage,this),e.unhandledMessage.disconnect(this.onUnhandledMessage,this)}onAnyMessage(e,t){e===this.possibleKernelConnection&&this.anyMessage.emit(t)}onIOPubMessage(e,t){e===this.possibleKernelConnection&&this.iopubMessage.emit(t)}onUnhandledMessage(e,t){e===this.possibleKernelConnection&&this.unhandledMessage.emit(t)}}class Em extends km{get possibleKernelConnection(){return this._kernelConnection}get kernel(){return this._kernelConnection}constructor(e,t){super(e,t),this._kernelConnection=e}changeKernel(e){this.kernel!==e&&(this.stopHandlingKernelMessages(this.possibleKernelConnection),this._kernelConnection=e,this.startHandleKernelMessages(e))}async shutdown(){await this._kernelConnection.shutdown()}dispose(){this._kernelConnection.dispose()}async interrupt(){await this._kernelConnection.interrupt()}async restart(){await this._kernelConnection.restart()}startHandleKernelMessages(e){super.startHandleKernelMessages(e),this._kernelConnection=e,e.connectionStatusChanged.connect(this.onConnectionStatusChanged,this),e.statusChanged.connect(this.onStatusChanged,this),e.disposed.connect(this.onDisposed,this)}stopHandlingKernelMessages(e){super.stopHandlingKernelMessages(e),e.connectionStatusChanged.disconnect(this.onConnectionStatusChanged,this),e.statusChanged.disconnect(this.onStatusChanged,this),e.disposed.disconnect(this.onDisposed,this)}onDisposed(e){e===this.possibleKernelConnection&&this.disposed.emit()}onStatusChanged(e,t){e===this.possibleKernelConnection&&this.statusChanged.emit(t)}onConnectionStatusChanged(e,t){e===this.possibleKernelConnection&&this.connectionStatusChanged.emit(t)}}function xm(e){if(w()){const t=e;if(t&&t._futures){const e=t._futures;e.forEach&&e.forEach((e=>{void 0!==e._status&&(e._status|=4)}))}t&&t._reconnectLimit&&(t._reconnectLimit=0)}}class Tm extends Zi{constructor(e){super(e.message,e)}}class Pm{get path(){return this.session?.path||""}get name(){return this.session?.name||""}get type(){return this.session?.type||""}get serverSettings(){if(!this.session?.serverSettings)throw new Ur;return this.session.serverSettings}get model(){if(!this.session?.serverSettings)throw new Ur;return this.session.model}get isDisposed(){return!0===this._isDisposed}get onDidDispose(){return this._disposed.event}get onDidShutdown(){return this.didShutdown.event}get session(){return this._session}get id(){return this.session?.id||""}get kernel(){return this._wrappedKernel?this._wrappedKernel:this._session?.kernel?(this._wrappedKernel=new Em(this._session.kernel,this.disposables),this._wrappedKernel):null}get kernelSocket(){return this._kernelSocket}get onSessionStatusChanged(){return this.onStatusChangedEvent.event}get status(){return this.getServerStatus()}get isConnected(){return this.connected}constructor(e,t,n,i){this.kind=e,this.resource=t,this.kernelConnectionMetadata=n,this.workingDirectory=i,this.propertyChanged=new wm.Signal(this),this.kernelChanged=new wm.Signal(this),this.statusChanged=new wm.Signal(this),this.connectionStatusChanged=new wm.Signal(this),this.iopubMessage=new wm.Signal(this),this.unhandledMessage=new wm.Signal(this),this.anyMessage=new wm.Signal(this),this.disposed=new wm.Signal(this),this._disposed=new Oe.EventEmitter,this.didShutdown=new Oe.EventEmitter,this.disposables=[],this.onStatusChangedEvent=new Oe.EventEmitter,this.connected=!1,this._kernelSocket=new _m.ReplaySubject,this.statusHandler=this.onStatusChanged.bind(this),this.unhandledMessageHandler=(e,t)=>{Cn(`Unhandled message found: ${t.header.msg_type}`)}}onPropertyChanged(e,t){this.propertyChanged.emit(t)}onKernelChanged(e,t){this.kernelChanged.emit(t)}onStatusChanged(e,t){const n=this.getServerStatus();xn(`Server Status = ${n}`),this.onStatusChangedEvent.fire(n),this.statusChanged.emit(t)}onConnectionStatusChanged(e,t){this.connectionStatusChanged.emit(t)}onIOPubMessage(e,t){this.iopubMessage.emit(t)}onUnhandledMessage(e,t){Cn(`Unhandled message found: ${t.header.msg_type}`),this.unhandledMessage.emit(t)}onAnyMessage(e,t){this.anyMessage.emit(t)}setPath(e){if(!this.session)throw new Ur;return this.session.setPath(e)}setName(e){if(!this.session)throw new Ur;return this.session.setName(e)}setType(e){if(!this.session)throw new Ur;return this.session.setType(e)}changeKernel(e){if(!this.session)throw new Ur;return this.session.changeKernel(e)}dispose(){this.disposeAsync().catch(ae).finally((()=>wm.Signal.disconnectAll(this)))}async disposeAsync(){await this.shutdownImplementation(!1)}async waitForIdle(e,t){if(this.session)return this.waitForIdleOnSession(this.session,e,t)}async shutdown(){await this.shutdownImplementation(!0)}async restart(){if(this.session?.isRemoteSession&&this.session.kernel)return await this.session.kernel.restart(),this.setSession(this.session,!0),void kn(`Restarted ${this.session?.kernel?.id}`);const e=this.session,t=this.statusHandler,n=await this.startRestartSession(!1);this.setSession(n),n.kernel&&(En(`New Session after restarting ${n.kernel.id}`),n.statusChanged.connect(this.statusHandler),n.kernel.connectionStatusChanged.connect(this.onKernelConnectionStatusHandler,this)),t&&e&&(e.statusChanged.disconnect(t),e.kernel&&e.kernel.connectionStatusChanged.disconnect(this.onKernelConnectionStatusHandler,this)),kn(`Shutdown old session ${e?.kernel?.id}`),this.shutdownSession(e,void 0,!1).catch(ae)}async waitForIdleOnSession(e,t,n,i){if(!e||!e.kernel)throw new bm(this.kernelConnectionMetadata);{const r=i?void 0:Na.reportProgress(this.resource,gr.waitingForJupyterSessionToBeIdle),o=[];r&&o.push(r);try{En(`Waiting for ${t}ms idle on (kernel): ${e.kernel.id} -> ${e.kernel.status}`);const r=ie();n&&n.onCancellationRequested((()=>r.reject(new Oe.CancellationError)),this,o);const s=(e,t)=>{En(`Got status ${t} in waitForIdleOnSession`),"idle"==t&&r.resolve(t)};e.kernel.statusChanged?.connect(s),o.push(new Oe.Disposable((()=>ce((()=>e.kernel?.statusChanged?.disconnect(s)))))),"idle"==e.kernel.status&&r.resolve(e.kernel.status);const a=ie(),c=()=>a.resolve("");e.disposed.connect(c,a),o.push(new Oe.Disposable((()=>ce((()=>e.disposed.disconnect(c,a)))))),a.promise.catch(ae),r.promise.catch(ae);const l=await Z(t,"",r.promise,a.promise);if(e.isDisposed)throw Sn("Session disposed while waiting for session to be idle."),new bm(this.kernelConnectionMetadata);if(En(`Finished waiting for idle on (kernel): ${e.kernel.id} -> ${e.kernel.status}`),"idle"==l)return;throw Sn(`Shutting down after failing to wait for idle on (kernel): ${e.kernel.id} -> ${e.kernel.status}`),this.shutdownSession(e,this.statusHandler,i).catch(ae),new Vf(this.kernelConnectionMetadata)}catch(e){throw xn("Error waiting for idle",e),e}finally{Ie(o)}}}setSession(e,t=!1){const n=this._session;this.previousAnyMessageHandler?.dispose(),e&&kn(`Started new session ${e?.kernel?.id}`),n&&(this.unhandledMessageHandler&&n.unhandledMessage.disconnect(this.unhandledMessageHandler),this.statusHandler&&(n.statusChanged.disconnect(this.statusHandler),n.kernel?.connectionStatusChanged.disconnect(this.onKernelConnectionStatusHandler,this)),n.propertyChanged.disconnect(this.onPropertyChanged,this),n.kernelChanged.disconnect(this.onKernelChanged,this),n.connectionStatusChanged.disconnect(this.onConnectionStatusChanged,this),n.iopubMessage.disconnect(this.onIOPubMessage,this),n.unhandledMessage.disconnect(this.onUnhandledMessage,this),n.anyMessage.disconnect(this.onAnyMessage,this)),this._session=e,e&&(e.propertyChanged.connect(this.onPropertyChanged,this),e.kernelChanged.connect(this.onKernelChanged,this),e.statusChanged.connect(this.onStatusChanged,this),e.connectionStatusChanged.connect(this.onConnectionStatusChanged,this),e.iopubMessage.connect(this.onIOPubMessage,this),e.unhandledMessage.connect(this.onUnhandledMessage,this),e.anyMessage.connect(this.onAnyMessage,this),e.kernel&&this._wrappedKernel&&this._wrappedKernel.changeKernel(e.kernel),e.statusChanged.connect(this.statusHandler),e.kernel?.connectionStatusChanged.connect(this.onKernelConnectionStatusHandler,this),e.kernelSocketInformation.socket?.onAnyMessage&&(this.previousAnyMessageHandler=e.kernelSocketInformation.socket?.onAnyMessage((e=>{try{if(this._wrappedKernel){const t=__webpack_require__(642),n="string"==typeof e.msg||e.msg instanceof ArrayBuffer?t.deserialize(e.msg):e.msg;this._wrappedKernel.anyMessage.emit({direction:e.direction,msg:n})}}catch(e){Cn("failed to deserialize message to broadcast anymessage signal")}}))),e.unhandledMessage&&e.unhandledMessage.connect(this.unhandledMessageHandler),(t||n!==e)&&e.kernel&&this._kernelSocket.next({options:{clientId:e.kernel.clientId,id:e.kernel.id,model:{...e.kernel.model},userName:e.kernel.username},socket:e.kernelSocketInformation.socket}))}async shutdownSession(e,t,n,i){if(e&&e.kernel){const r=`${e.kernel.id}, ${e.kernelConnectionMetadata?.id}`;En(`shutdownSession ${r} - start`);try{if(t&&e.statusChanged.disconnect(t),!this.canShutdownSession(e,n,i))return En(`Session cannot be shutdown ${e.kernelConnectionMetadata?.id}`),void e.dispose();try{En(`Session can be shutdown ${e.kernelConnectionMetadata?.id}`),xm(e.kernel),e.isDisposed||await Z(1e3,e.shutdown())}catch{}e&&!e.isDisposed&&e.dispose()}catch(e){Cn(e)}En(`shutdownSession ${r} - shutdown complete`)}}async shutdownImplementation(e){if(this._isDisposed=!0,this.session){try{if(En(`Shutdown session - current session, called from ${new Error("").stack}`),await this.shutdownSession(this.session,this.statusHandler,!1,e),En("Shutdown session - get restart session"),this.restartSessionPromise){this.restartSessionPromise.token.cancel();const e=await this.restartSessionPromise.promise;this.restartSessionPromise.token.dispose(),En("Shutdown session - shutdown restart session"),await this.shutdownSession(e,void 0,!0)}}catch{}this.setSession(void 0),this.restartSessionPromise=void 0,this.onStatusChangedEvent.fire("dead"),this._disposed.fire(),this.didShutdown.fire(),this.didShutdown.dispose(),this._disposed.dispose(),this.onStatusChangedEvent.dispose(),this.previousAnyMessageHandler?.dispose()}Ie(this.disposables),En("Shutdown session -- complete")}canShutdownSession(e,t,n){return!("connectToLiveRemoteKernel"===e.kernelConnectionMetadata?.kind&&!n||!t&&(!e.resource||"interactive"!==Ya(e.resource))&&e.resource&&"notebook"===Ya(e.resource)&&!0===e.isRemoteSession&&!n)}getServerStatus(){return this.isDisposed?"dead":this.session?.kernel?this.session.kernel.status:(xn(`Kernel status not started because real session is ${this.session?"defined":"undefined"} & real kernel is ${this.session?.kernel?"defined":"undefined"}`),"unknown")}onKernelConnectionStatusHandler(e,t){if(xn(`Server Kernel Status = ${t}`),"disconnected"===t){const e=this.getServerStatus();this.onStatusChangedEvent.fire(e)}}}class Im extends Pm{constructor(e,t,n,i,r,o,s,a,c,l,d,u,p){super(t.localLaunch?"localJupyter":"remoteJupyter",e,n,a),this.connInfo=t,this.specsManager=i,this.sessionManager=r,this.contentsManager=o,this.outputChannel=s,this.workingDirectory=a,this.idleTimeout=c,this.kernelService=l,this.backingFileCreator=d,this.requestCreator=u,this.sessionCreator=p}async connect(e){this.setSession(await this.createNewKernelSession(e)),this.session?.statusChanged.connect(this.statusHandler),this.connected=!0}async createNewKernelSession(e){let t;try{if(this.kernelConnectionMetadata&&"connectToLiveRemoteKernel"===this.kernelConnectionMetadata.kind&&this.kernelConnectionMetadata.kernelModel.id&&this.kernelConnectionMetadata.kernelModel.model){if(t=this.sessionManager.connectTo({...this.kernelConnectionMetadata.kernelModel,model:this.kernelConnectionMetadata.kernelModel.model}),t.kernelConnectionMetadata=this.kernelConnectionMetadata,t.kernelSocketInformation={socket:this.requestCreator.getWebsocket(this.kernelConnectionMetadata.id),options:{clientId:"",id:this.kernelConnectionMetadata.id,model:{...this.kernelConnectionMetadata.kernelModel.model},userName:""}},t.isRemoteSession=!0,t.resource=this.resource,await X((async()=>"connected"===t?.kernel?.connectionStatus||e.token.isCancellationRequested),this.idleTimeout,100),e.token.isCancellationRequested)throw new Oe.CancellationError}else En(`createNewKernelSession ${this.kernelConnectionMetadata?.id}`),t=await this.createSession(e),t.resource=this.resource,await this.waitForIdleOnSession(t,this.idleTimeout,e.token)}catch(t){const n=e.ui.disableUI?En:Sn;throw t instanceof Xi?(n("Failed to change kernel, re-throwing",t),t):(n("Failed to change kernel",t),new bm(this.kernelConnectionMetadata))}return t}setSession(e,t){const n=this.requestCreator.getWebsocket(this.kernelConnectionMetadata.id);return e?.kernelSocketInformation?.socket&&t&&n&&(e.kernelSocketInformation.socket=n),super.setSession(e,t)}async createRestartSession(e,t,n){if(!t||!this.contentsManager||!this.sessionManager)throw new Ur;let i;const r=new hh(e);try{return En(`JupyterSession.createNewKernelSession 0, id is ${this.kernelConnectionMetadata?.id}`),i=await this.createSession({token:n,ui:r}),await this.waitForIdleOnSession(i,this.idleTimeout,n),i}catch(e){throw Cn(`Error waiting for restart session: ${e}`),i&&this.shutdownSession(i,void 0,!0).catch(ae),i=void 0,e}finally{r.dispose()}}startRestartSession(e){if(!this.session)throw new Error("Session disposed or not initialized");const t=new Oe.CancellationTokenSource,n=this.createRestartSession(e,this.session,t.token);return this.restartSessionPromise={token:t,promise:n},n.finally((()=>{t.dispose(),this.restartSessionPromise?.promise===n&&(this.restartSessionPromise=void 0)})).catch(ae),n}async createSession(e){const t={failedWithoutBackingFile:!1,failedWithBackingFile:!1,localHost:this.connInfo.localLaunch};try{return await this.createSessionImpl({...e,createBakingFile:!1})}catch(n){Cn("Failed to create a session without a backing file, trying again with a backing file",n);try{return t.failedWithoutBackingFile=!0,await this.createSessionImpl({...e,createBakingFile:!0})}catch(e){throw t.failedWithBackingFile=!0,e}}finally{io(F.StartedRemoteJupyterSessionWithBackingFile,void 0,t)}}async createSessionImpl(e){const t=function(e,t){if(!t||"untitled"===t.scheme||!e.mappedRemoteNotebookDir)return;const n=Oe.Uri.file(t.path),i=Oe.Uri.file(e.mappedRemoteNotebookDir);if(!Yt(n,i))return;const r=nn(i,n),o=Xt(t);return o&&r?{path:r,name:o}:void 0}(this.connInfo,this.resource);let n,i=t?.path;if(!i&&e.createBakingFile&&(n=await this.backingFileCreator.createBackingFile(this.resource,this.workingDirectory,this.kernelConnectionMetadata,this.connInfo,this.contentsManager),i=n?.filePath),this.kernelConnectionMetadata?.interpreter&&ea(this.kernelConnectionMetadata)&&this.kernelService)try{await this.kernelService.ensureKernelIsUsable(this.resource,this.kernelConnectionMetadata,e.ui,e.token,"3rdPartyExtension"===this.sessionCreator)}catch(e){throw this.connInfo&&n&&this.contentsManager.delete(n.filePath).catch(ae),e}const r=ds(this.kernelConnectionMetadata)??this.specsManager?.specs?.default??"";let o;if(t?.name)o=t.name;else{const e=this.resource?Zt(this.resource):"";o=`${this.resource?Xt(this.resource,e):""}-${Kf()()}${e}`}const s={path:i||um(this.resource),kernel:{name:r},name:o,type:(this.resource?.path||"").toLowerCase().endsWith(".ipynb")?"notebook":"console"},a=this.requestCreator;return Ta(e.token,(()=>this.sessionManager.startNew(s,{kernelConnectionOptions:{handleComms:!0}}).then((async e=>{if(e.kernel){this.logRemoteOutput(gr.createdNewKernel(this.connInfo.baseUrl,e?.kernel?.id||""));const t=e;return t.resource=this.resource,t.kernelConnectionMetadata=this.kernelConnectionMetadata,t.kernelSocketInformation={get socket(){return a.getWebsocket(e.kernel.id)},options:{clientId:e.kernel.clientId,id:e.kernel.id,model:{...e.kernel.model},userName:e.kernel.username}},ea(this.kernelConnectionMetadata)||(t.isRemoteSession=!0),t}throw new Tm(new Error("No kernel created"))})).catch((e=>Promise.reject(new Tm(e)))).finally((async()=>{this.connInfo&&n&&this.contentsManager.delete(n.filePath).catch(ae)})))())}logRemoteOutput(e){ea(this.kernelConnectionMetadata)||this.outputChannel.appendLine(e)}}class Dm{get isDisposed(){return!0===this.disposed}get jupyterlab(){return this._jupyterlab||(this._jupyterlab=__webpack_require__(98250)),this._jupyterlab}constructor(e,t,n,i,r,o){this.outputChannel=e,this.configService=t,this.kernelService=n,this.backingFileCreator=i,this.requestCreator=r,this.connInfo=o;const s=o.settings;this.specsManager=new this.jupyterlab.KernelSpecManager({serverSettings:s}),this.kernelManager=new this.jupyterlab.KernelManager({serverSettings:s}),this.sessionManager=new this.jupyterlab.SessionManager({serverSettings:s,kernelManager:this.kernelManager}),this.contentsManager=new this.jupyterlab.ContentsManager({serverSettings:s})}async dispose(){if(!this.disposed){this.disposed=!0,En("Disposing session manager");try{En("SessionManager - dispose contents manager"),this.contentsManager.dispose(),this.sessionManager.isDisposed||(En("ShutdownSessionAndConnection - dispose session manager"),await Z(1e4,this.sessionManager.ready),this.sessionManager.dispose()),this.kernelManager.isDisposed||this.kernelManager.dispose(),this.specsManager.isDisposed||this.specsManager.dispose()}catch(e){Sn("Exception on session manager shutdown: ",e)}finally{En("Finished disposing jupyter session manager")}}}async startNew(e,t,n,i,r,o){const s=new Im(e,this.connInfo,t,this.specsManager,this.sessionManager,this.contentsManager,this.outputChannel,n,this.configService.getSettings(e).jupyterLaunchTimeout,this.kernelService,this.backingFileCreator,this.requestCreator,o);try{await s.connect({token:r,ui:i})}finally{s.isConnected||await s.disposeAsync()}return s}}var Rm=function(e,t){return function(n,i){t(n,i,e)}};let Om=class{constructor(e,t,n,i,r,o){this.config=e,this.jupyterOutput=t,this.kernelService=n,this.backingFileCreator=i,this.requestCreator=r,this.asyncDisposables=o}create(e){const t=new Dm(this.jupyterOutput,this.config,this.kernelService,this.backingFileCreator,this.requestCreator,e);return this.asyncDisposables.push(t),t}};Om=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Rm(0,zn(ji)),Rm(1,zn(Ii)),Rm(1,Nc(E)),Rm(2,zn(bi)),Rm(2,Qi()),Rm(3,zn(yi)),Rm(4,zn(_i)),Rm(5,zn(Bi))],Om);var Am=__webpack_require__(95687);let Nm=class{createHttpRequestAgent(){return new Am.Agent({rejectUnauthorized:!1})}};Nm=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],Nm);const Mm=["/bin/sh","/bin/bash","/bin/zsh"];function Lm(e,t){const n=(e.argv||[]).some((e=>(e=e.toLowerCase(),Mm.some((t=>e.includes(t))))));io(F.KernelSpecLanguage,void 0,{language:e.language,kind:t,usesShell:n})}var jm;!function(e){e.Remote="remote",e.LocalKernelSpec="localKernelSpec",e.LocalPythonEnvironment="localPythonEnvironment"}(jm||(jm={}));const Fm="remoteKernelSpecCache.json";class Um{get status(){return this._status}set status(e){this._status!==e&&(this._status=e,this._onDidChangeStatus.fire())}get lastError(){return this._lastError}get kernels(){return this.cache}get items(){return this.kernels}get title(){return this.displayName}constructor(e,t,n,i,r,o,s,a,c,l){this.id=e,this.displayName=t,this.env=n,this.cachedRemoteKernelValidator=i,this.kernelProvider=o,this.serverProviderHandle=s,this.jupyterConnection=a,this.fs=c,this.context=l,this._status="idle",this._onDidChangeStatus=new Oe.EventEmitter,this.onDidChangeStatus=this._onDidChangeStatus.event,this.promiseMonitor=new Mo,this.kernelIdsToHide=new Set,this.kind=jm.Remote,this.cache=[],this._onDidChangeKernels=new Oe.EventEmitter,this.onDidChangeKernels=this._onDidChangeKernels.event,this._onDidChange=new Oe.EventEmitter,this.onDidChange=this._onDidChange.event,this.disposables=[],this.cacheFile=Oe.Uri.joinPath(l.globalStorageUri,Fm),this.cacheKey=fo(s),this.disposables.push(r.registerKernelFinder(this)),this._onDidChangeKernels.event((()=>this._onDidChange.fire()),this,this.disposables),this.disposables.push(this._onDidChangeKernels),this.disposables.push(this._onDidChange),this.disposables.push(this._onDidChangeStatus),this.disposables.push(this.promiseMonitor)}dispose(){this.kernelDisposeDelayTimer&&clearTimeout(this.kernelDisposeDelayTimer),Ie(this.disposables)}async activate(){this.promiseMonitor.onStateChange((()=>{this.status=this.promiseMonitor.isComplete?"idle":"discovering"})),this.loadCache().then(ae,ae),this.kernelProvider.onDidStartKernel((e=>{ta(e.kernelConnectionMetadata)&&this.updateCache().then(ae,ae)}),this,this.disposables),this.kernelProvider.onDidDisposeKernel((e=>{if(e&&ta(e.kernelConnectionMetadata)){this.kernelDisposeDelayTimer&&(clearTimeout(this.kernelDisposeDelayTimer),this.kernelDisposeDelayTimer=void 0);const e=setTimeout((()=>{this.updateCache().then(ae,ae)}),2e3);return this.kernelDisposeDelayTimer=e,e}}),this,this.disposables)}async refresh(){await this.loadCache(!0,!0)}getListOfKernelsWithCachedConnection(e,t=!1){const n=!!this.cachedConnection;return this.cachedConnection=this.cachedConnection||this.getRemoteConnectionInfo(e),this.cachedConnection.then((e=>(e&&!n&&(this.cachedConnection=Promise.resolve(e)),e?this.listKernelsFromConnection(e):Promise.resolve([])))).catch((i=>n?this.getListOfKernelsWithCachedConnection(e,t):(this.cachedConnection=void 0,Promise.reject(i))))}async loadCache(e=!1,t=!1){xn(`Remote Kernel Finder load cache Server: ${this.id}`);const n=(async()=>{const n=e?[]:await this.getFromCache();let i=[];if(!e&&Array.isArray(n)&&n.length>0)i=n,this.updateCache().then(ae,ae),this.loadCache(!0).then(ae,ae);else try{i=await this.getListOfKernelsWithCachedConnection(t),this._lastError=void 0}catch(e){e instanceof Oe.CancellationError||(Sn("UniversalRemoteKernelFinder: Failed to get kernels without cache",e),this._lastError=e,this._onDidChange.fire())}await this.writeToCache(i)})();this.promiseMonitor.push(n),await n}async updateCache(){const e=(async()=>{let e=[];this._cacheUpdateCancelTokenSource?.dispose();const t=new Oe.CancellationTokenSource;this._cacheUpdateCancelTokenSource=t;try{e=await this.getListOfKernelsWithCachedConnection(!1)}catch(n){Cn(`Could not fetch kernels from the ${this.kind} server, falling back to cache: ${n}`),e=await this.getFromCache(t.token),e=e.filter((e=>"connectToLiveRemoteKernel"===e.kind))}t.token.isCancellationRequested||await this.writeToCache(e)})();this.promiseMonitor.push(e),await e}async getRemoteConnectionInfo(e=!0){const t=[];return e&&t.push(Na.createProgressReporter(void 0,gr.connectingToJupyter)),this.jupyterConnection.createConnectionInfo(this.serverProviderHandle).finally((()=>Ie(t)))}async getFromCache(e){try{let t=this.cache;t&&0!==t.length||(t=await this.getCacheContents());const n=[],i=Promise.all(t.map((async e=>{await this.isValidCachedKernel(e)&&n.push(e)})));return await xa(e,i),n}catch(e){Sn("UniversalRemoteKernelFinder: Failed to get from cache",e)}return[]}async getCacheContents(){try{const e=await this.fs.readFile(this.cacheFile),t=JSON.parse(e);if(t.extensionVersion!==this.env.extensionVersion)return[];const n=t.data[this.cacheKey]||[];return Array.isArray(n)?n.map((e=>Gs.fromJSON(e))):[]}catch{return[]}}async listKernelsFromConnection(e){const t=[];try{const n=ks.create(e.settings);t.push(n);const[i,r,o,s]=await Promise.all([n.getRunningKernels(),n.getKernelSpecs(),n.getRunningSessions(),po(e.serverProviderHandle)]),a=r.map((t=>(Lm(t,"remote"),Xs.create({kernelSpec:t,id:cs(t,void 0,s),baseUrl:e.baseUrl,serverProviderHandle:e.serverProviderHandle}))));return[...o.map((t=>{const n=t.kernel,o=n.last_activity?new Date(Date.parse(n.last_activity.toString())):new Date,s=n.connections?parseInt(n.connections.toString(),10):0,a=i.find((e=>e.id===t.kernel?.id))||{},c=r.find((e=>e.name===t.kernel?.name))||{};return Ys.create({kernelModel:{...t.kernel,...c,...a,name:t.kernel?.name||"",lastActivityTime:o,numberOfConnections:s,model:t},baseUrl:e.baseUrl,id:t.kernel?.id||"",serverProviderHandle:e.serverProviderHandle})})).filter((e=>!this.kernelIdsToHide.has(e.kernelModel.id||""))),...a]}catch(t){throw Sn(`Error fetching kernels from ${e.baseUrl} (${e.displayName}):`,t),t}finally{await Promise.all(t.map((e=>e.dispose().catch(ae))))}}async writeToCache(e){try{En(`UniversalRemoteKernelFinder: Writing ${e.length} remote kernel connection metadata to cache`);const t=this.cache,n=new Map(t.map((e=>[e.id,e]))),i=new Map(e.map((e=>[e.id,e]))),r=e.filter((e=>!n.has(e.id))),o=e.filter((e=>n.has(e.id)&&!fe(e,n.get(e.id)))),s=t.filter((e=>!i.has(e.id))),a=this.cacheKey;this.cache=t.filter((e=>i.has(e.id))).concat(r),this.cache.forEach((e=>{const t=i.get(e.id);e!==t&&"connectToLiveRemoteKernel"===t.kind&&"connectToLiveRemoteKernel"===e.kind&&e.updateModel(t.kernelModel)}));const c=e.map((e=>e.toJSON()));let l={extensionVersion:this.env.extensionVersion,data:{}};try{const e=await this.fs.readFile(this.cacheFile),t=JSON.parse(e);t.extensionVersion===this.env.extensionVersion&&(l=t)}catch{}l.data[a]=c,await this.fs.createDirectory(this.context.globalStorageUri).then((()=>this.fs.writeFile(this.cacheFile,JSON.stringify(l)))).catch((e=>{Sn("Failed to cache the remote kernels.",e)})),(r.length||o.length||s.length)&&this._onDidChangeKernels.fire({removed:s}),e.length&&(this.cacheLoggingTimeout&&clearTimeout(this.cacheLoggingTimeout),this.cacheLoggingTimeout=setTimeout((()=>{En(`Updating cache with Remote kernels ${e.map((e=>`${e.kind}:'${e.id} (interpreter id = ${pn(e.interpreter?.id)})'`)).join(", ")}, Added = ${r.map((e=>`${e.kind}:'${e.id} (interpreter id = ${pn(e.interpreter?.id)})'`)).join(", ")}, Updated = ${o.map((e=>`${e.kind}:'${e.id} (interpreter id = ${pn(e.interpreter?.id)})'`)).join(", ")}, Removed = ${s.map((e=>`${e.kind}:'${e.id} (interpreter id = ${pn(e.interpreter?.id)})'`)).join(", ")}`)}),S()?0:15e3),this.disposables.push(new Oe.Disposable((()=>clearTimeout(this.cacheLoggingTimeout)))))}catch(e){Sn("UniversalRemoteKernelFinder: Failed to write to cache",e)}}async isValidCachedKernel(e){switch(e.kind){case"startUsingRemoteKernelSpec":return!1;case"connectToLiveRemoteKernel":return this.cachedRemoteKernelValidator.isValid(e)}}}var qm=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Km=function(e,t){return function(n,i){t(n,i,e)}};let Vm=class{constructor(e,t,n,i,r,o,s,a,c,l,d){this.serverUriStorage=e,this.env=t,this.cachedRemoteKernelValidator=n,this.kernelFinder=i,this.kernelProvider=r,this.jupyterConnection=o,this.disposables=s,this.fs=a,this.context=c,this.jupyterPickerRegistration=l,this.jupyterServerProviderRegistry=d,this.serverFinderMapping=new Map,this.handledProviders=new WeakSet,this.mappedProviders=new WeakSet,this.mappedServers=new Set}activate(){this.serverUriStorage.onDidAdd((e=>this.validateAndCreateFinder(e)),this,this.disposables),this.serverUriStorage.onDidChange(this.buildListOfFinders,this,this.disposables),this.serverUriStorage.onDidLoad(this.handleProviderChanges,this,this.disposables),this.jupyterPickerRegistration.onDidChangeProviders(this.handleProviderHandleChanges,this,this.disposables),this.serverUriStorage.onDidRemove(this.urisRemoved,this,this.disposables),this.jupyterServerProviderRegistry.onDidChangeCollections(this.handleProviderChanges,this,this.disposables),this.buildListOfFinders(),this.handleProviderChanges().catch(ae)}buildListOfFinders(){this.serverUriStorage.getAll().then((e=>e.map((e=>this.validateAndCreateFinder(e).catch(ae))))).catch(ae)}handleProviderHandleChanges(){this.jupyterPickerRegistration.providers.forEach((e=>{this.handledProviders.has(e)||(this.handledProviders.add(e),e.onDidChangeHandles&&e.onDidChangeHandles(this.buildListOfFinders,this,this.disposables))})),this.buildListOfFinders()}async handleProviderChanges(){if(!this.serverUriStorage.all.length)return;const e=new Oe.CancellationTokenSource;this.disposables.push(e),await Promise.all(this.jupyterServerProviderRegistry.jupyterCollections.map((e=>{const t=e.serverProvider;if(t&&!this.mappedProviders.has(t))return this.mappedProviders.add(t),t?.onDidChangeServers&&t?.onDidChangeServers((()=>this.lookForServersInCollectionAndRemoveOldServers(e)),this,this.disposables),this.serverUriStorage.onDidLoad((()=>this.lookForServersInCollectionAndRemoveOldServers(e)),this,this.disposables),this.lookForServersInCollectionAndRemoveOldServers(e).catch(ae)}))),e.dispose()}async lookForServersInCollectionAndRemoveOldServers(e){if(!this.serverUriStorage.all.length)return;const t=new Set(this.serverUriStorage.all.map((e=>fo(e.provider)))),n=e.serverProvider;if(!n)return;const i=new Oe.CancellationTokenSource;try{const r=await Promise.resolve(n.provideJupyterServers(i.token)),o=new Set;(r||[]).forEach((n=>{const i={extensionId:e.extensionId,handle:n.id,id:e.id},r=fo(i);o.add(r),!this.mappedServers.has(r)&&t.has(r)&&(this.mappedServers.add(r),this.createRemoteKernelFinder(i,n.label))})),this.serverFinderMapping.forEach(((t,n)=>{t.serverProviderHandle.extensionId!==e.extensionId||t.serverProviderHandle.id!==e.id||o.has(fo(t.serverProviderHandle))||(t.dispose(),this.serverFinderMapping.delete(n))}))}catch(t){Sn(`Failed to get servers for Collection ${e.id} in ${e.extensionId}`,t)}finally{i.dispose()}}async validateAndCreateFinder(e){const t=fo(e.provider);if(this.serverFinderMapping.has(t))return;const n=new Oe.CancellationTokenSource;await Promise.all([(async()=>{const t=this.jupyterServerProviderRegistry.jupyterCollections.find((t=>t.extensionId===e.provider.extensionId&&t.id===e.provider.id));if(!t||!t.serverProvider)return;const i=await t.serverProvider.provideJupyterServers(n.token),r=i?.find((t=>t.id===e.provider.handle))?.label;r&&this.createRemoteKernelFinder(e.provider,r)})().catch(ae),(async()=>{const t=await this.jupyterPickerRegistration.getDisplayNameIfProviderIsLoaded(e.provider);t&&this.createRemoteKernelFinder(e.provider,t)})().catch(ae)]),n.dispose()}getOrCreateRemoteKernelFinder(e,t){const n=fo(e);if(!this.serverFinderMapping.has(n)){const i=new Um(`${jm.Remote}-${n}`,t,this.env,this.cachedRemoteKernelValidator,this.kernelFinder,this.kernelProvider,e,this.jupyterConnection,this.fs,this.context);this.disposables.push(i),this.serverFinderMapping.set(n,i),i.activate().then(ae,ae)}return this.serverFinderMapping.get(n)}createRemoteKernelFinder(e,t){this.getOrCreateRemoteKernelFinder(e,t)}urisRemoved(e){e.forEach((e=>{const t=fo(e),n=this.serverFinderMapping.get(t);n&&n.dispose(),this.serverFinderMapping.delete(t)}))}dispose(){this.serverFinderMapping.forEach((e=>e.dispose()))}};qm([ye("Handle Jupyter Provider Changes")],Vm.prototype,"handleProviderChanges",null),qm([ye("Check Servers in Jupyter Server Provider")],Vm.prototype,"lookForServersInCollectionAndRemoveOldServers",null),qm([ye("Failed to create a Remote Kernel Finder")],Vm.prototype,"validateAndCreateFinder",null),Vm=qm([Kn(),Km(0,zn(vi)),Km(1,zn(ei)),Km(2,zn(ki)),Km(3,zn(la)),Km(4,zn(na)),Km(5,zn(xs)),Km(6,zn(Ri)),Km(7,zn(La)),Km(8,zn(Ui)),Km(9,zn(gi)),Km(10,zn(Ei))],Vm);class Wm extends Xi{constructor(e){super("localjupyterserverconnection",gr.jupyterNotebookFailure(e.message||e.toString())),this.originalError=e}}async function $m(e,t,n,i,r){if(!n.kernel)throw new bm(e);const o=Na.reportProgress(t,gr.waitingForJupyterSessionToBeIdle),s=[];o&&s.push(o);try{En(`Waiting for ${i}ms idle on (kernel): ${n.kernel.id} -> ${n.kernel.status}`);const t=ie();r.onCancellationRequested((()=>t.reject(new Oe.CancellationError)),void 0,s);const o=(e,n)=>{En(`Got status ${n} in waitForIdleOnSession`),"idle"==n&&t.resolve(n)};n.kernel.statusChanged?.connect(o),s.push(new Oe.Disposable((()=>ce((()=>n.kernel?.statusChanged?.disconnect(o)))))),"idle"==n.kernel.status&&t.resolve(n.kernel.status);const a=ie(),c=()=>a.resolve("");n.disposed.connect(c,a),s.push(new Oe.Disposable((()=>ce((()=>n.disposed.disconnect(c,a)))))),a.promise.catch(ae),t.promise.catch(ae);const l=await Z(i,"",t.promise,a.promise);if(n.isDisposed)throw Sn("Session disposed while waiting for session to be idle."),new bm(e);if(En(`Finished waiting for idle on (kernel): ${n.kernel.id} -> ${n.kernel.status}`),"idle"==l)return;throw Sn(`Shutting down after failing to wait for idle on (kernel): ${n.kernel.id} -> ${n.kernel.status}`),new Vf(e)}catch(e){throw xn("Error waiting for idle",e),e}finally{Ie(s)}}class Bm{get id(){return this.session.id}get path(){return this.session.path}get name(){return this.session.name}get type(){return this.session.type}get serverSettings(){return this.session.serverSettings}get model(){return this.session.model}constructor(e,t){this.kind=e,this.session=t,this.propertyChanged=new wm.Signal(this),this.kernelChanged=new wm.Signal(this),this.statusChanged=new wm.Signal(this),this.connectionStatusChanged=new wm.Signal(this),this.iopubMessage=new wm.Signal(this),this.unhandledMessage=new wm.Signal(this),this.anyMessage=new wm.Signal(this),this.onStatusChangedEvent=new Oe.EventEmitter,this.disposables=[],this.disposed=new wm.Signal(this),this._disposed=new Oe.EventEmitter,this.didShutdown=new Oe.EventEmitter,this._kernelSocket=new _m.ReplaySubject,t.propertyChanged.connect(this.onPropertyChanged,this),t.kernelChanged.connect(this.onKernelChanged,this),t.statusChanged.connect(this.onStatusChanged,this),t.connectionStatusChanged.connect(this.onConnectionStatusChanged,this),t.iopubMessage.connect(this.onIOPubMessage,this),t.unhandledMessage.connect(this.onUnhandledMessage,this),t.anyMessage.connect(this.onAnyMessage,this),this.disposables.push({dispose:()=>{this.didShutdown.dispose(),this._disposed.dispose(),this.onStatusChangedEvent.dispose(),this.session.propertyChanged.disconnect(this.onPropertyChanged,this),this.session.kernelChanged.disconnect(this.onKernelChanged,this),this.session.statusChanged.disconnect(this.onStatusChanged,this),this.session.connectionStatusChanged.disconnect(this.onConnectionStatusChanged,this),this.session.iopubMessage.disconnect(this.onIOPubMessage,this),this.session.unhandledMessage.disconnect(this.onUnhandledMessage,this),this.session.anyMessage.disconnect(this.onAnyMessage,this)}})}get kernel(){return this.isDisposed||!this.session.kernel?null:(this._wrappedKernel?.originalKernel===this.session.kernel||(this._wrappedKernel=new Em(this.session.kernel,this.disposables)),this._wrappedKernel)}get isDisposed(){return!0===this._isDisposed}get onDidDispose(){return this._disposed.event}get onDidShutdown(){return this.didShutdown.event}get kernelId(){return this.session?.kernel?.id||""}get kernelSocket(){return this._kernelSocket}get onSessionStatusChanged(){return this.onStatusChangedEvent.event}async disposeAsync(){this.dispose()}dispose(){this.disposeInvoked||(this.statusChanged.emit("dead"),this._disposed.fire(),this.disposed.emit(),this.previousAnyMessageHandler?.dispose(),Ie(this.disposables),wm.Signal.disconnectAll(this))}async restart(){await(this.session.kernel?.restart()),this.initializeKernelSocket(),kn(`Restarted ${this.session?.kernel?.id}`)}initializeKernelSocket(){if(!this.session.kernel)throw new Error("Kernel not initialized in Session");const e={kernel:this.session.kernel,options:{clientId:this.session.kernel.clientId,id:this.session.kernel.id,model:{...this.session.kernel.model},userName:this.session.kernel.username},socket:this.session.kernelSocketInformation.socket};JSON.stringify(this.previousKernelSocketInformation?.options)===JSON.stringify(e.options)&&this.previousKernelSocketInformation?.kernel===e.kernel&&this.previousKernelSocketInformation?.socket===e.socket||(this.previousKernelSocketInformation=e,this.previousAnyMessageHandler?.dispose(),this.session.kernel?.connectionStatusChanged.disconnect(this.onKernelConnectionStatusHandler,this),this.session.kernel?.connectionStatusChanged.connect(this.onKernelConnectionStatusHandler,this),this.session.kernelSocketInformation.socket?.onAnyMessage&&(this.previousAnyMessageHandler=this.session.kernelSocketInformation.socket?.onAnyMessage((e=>{try{if(this._wrappedKernel){const t=__webpack_require__(642),n="string"==typeof e.msg||e.msg instanceof ArrayBuffer?t.deserialize(e.msg):e.msg;this._wrappedKernel.anyMessage.emit({direction:e.direction,msg:n})}}catch(e){Cn("failed to deserialize message to broadcast anymessage signal")}}))),this._kernelSocket.next(e))}onPropertyChanged(e,t){this.propertyChanged.emit(t)}onKernelChanged(e,t){this.kernelChanged.emit(t)}onStatusChanged(e,t){this.statusChanged.emit(t);const n=this.status;xn(`Server Status = ${n}`),"dead"!==n&&this.onStatusChangedEvent.fire(n)}onConnectionStatusChanged(e,t){this.connectionStatusChanged.emit(t)}onIOPubMessage(e,t){this.iopubMessage.emit(t)}onUnhandledMessage(e,t){Cn(`Unhandled message found: ${t.header.msg_type}`),this.unhandledMessage.emit(t)}onAnyMessage(e,t){this.anyMessage.emit(t)}setPath(e){return this.session.setPath(e)}setName(e){return this.session.setName(e)}setType(e){return this.session.setType(e)}changeKernel(e){return this.session.changeKernel(e)}onKernelConnectionStatusHandler(e,t){xn(`Server Kernel Status = ${t}`),"disconnected"===t&&"dead"!==this.status&&this.onStatusChangedEvent.fire(this.status)}}class Hm extends Bm{get status(){return this.isDisposed?"dead":this.session?.kernel?this.session.kernel.status:(xn(`Kernel status not started because real session is ${this.session?"defined":"undefined"} & real kernel is ${this.session?.kernel?"defined":"undefined"}`),"unknown")}constructor(e,t,n,i,r,o,s){super(r.localLaunch?"localJupyter":"remoteJupyter",e),this.resource=t,this.kernelConnectionMetadata=n,this.workingDirectory=i,this.kernelService=o,this.creator=s,this.initializeKernelSocket()}dispose(){this.restartToken?.cancel(),this.restartToken?.dispose(),this.shutdownImplementation(!1).catch(ae)}async disposeAsync(){await this.shutdownImplementation(!1).catch(ae),await super.disposeAsync()}async waitForIdle(e,t){try{await $m(this.kernelConnectionMetadata,this.resource,this.session,e,t)}catch(e){throw xn("Error waiting for idle",e),await this.shutdown().catch(ae),e}}async restart(){const e=[],t=new Oe.CancellationTokenSource;this.restartToken=t;const n=new hh(!1);e.push(n),e.push(t);try{await this.validateLocalKernelDependencies(t.token,n),await super.restart()}finally{Ie(e)}}async validateLocalKernelDependencies(e,t){if(this.kernelConnectionMetadata?.interpreter&&ea(this.kernelConnectionMetadata)&&this.kernelService){if(e.isCancellationRequested)throw new Oe.CancellationError;await this.kernelService.ensureKernelIsUsable(this.resource,this.kernelConnectionMetadata,t,e,"3rdPartyExtension"===this.creator)}}async shutdown(){return this.restartToken?.cancel(),this.restartToken?.dispose(),this.shutdownImplementation(!0)}async shutdownImplementation(e){if(this._isDisposed)return;this._isDisposed=!0,En(`Shutdown session - current session, called from ${new Error("").stack}`);const t=`${this.session.kernel?.id}, ${this.kernelConnectionMetadata.id}`;En(`shutdownSession ${t} - start`);try{if(e||this.canShutdownSession())try{En(`Session can be shutdown ${this.kernelConnectionMetadata.id}`),xm(this.session.kernel),this.session.isDisposed||await Z(1e3,this.session.shutdown().catch(ae))}catch{try{this.session.isDisposed||this.session.dispose()}catch(e){Cn("Failures in disposing the session",e)}}finally{this.didShutdown.fire()}else En(`Session cannot be shutdown ${this.kernelConnectionMetadata.id}`);try{this.session.isDisposed||this.session.dispose()}catch(e){Cn("Failures in disposing the session",e)}super.dispose(),En("Shutdown session -- complete")}catch(e){Cn("Failures in disposing the session",e)}En(`shutdownSession ${t} - shutdown complete`)}canShutdownSession(){return!(!ea(this.kernelConnectionMetadata)&&("connectToLiveRemoteKernel"===this.kernelConnectionMetadata.kind||(!this.resource||"interactive"!==Ya(this.resource))&&this.resource&&"notebook"===Ya(this.resource)&&ta(this.kernelConnectionMetadata)))}}function zm(e,t){if(!t||"untitled"===t.scheme||!e.mappedRemoteNotebookDir)return;const n=Oe.Uri.file(t.path),i=Oe.Uri.file(e.mappedRemoteNotebookDir);if(!Yt(n,i))return;const r=nn(i,n),o=Xt(t);return o&&r?{path:r,name:o}:void 0}var Jm=function(e,t){return function(n,i){t(n,i,e)}};let Gm=class{constructor(e,t,n,i,r,o,s,a){this.jupyterNotebookProvider=e,this.jupyterConnection=t,this.asyncDisposables=n,this.workspaceService=i,this.requestCreator=r,this.backingFileCreator=o,this.kernelService=s,this.configService=a}async create(e){const t=[];let n;const i=()=>{e.ui.disableUI||n||(n=Na.createProgressReporter(e.resource,ta(e.kernelConnection)?gr.connectingToJupyter:gr.startingJupyter),t.push(n))};let r;e.ui.disableUI&&e.ui.onDidChangeDisableUI(i,this,t),i();const o=[],s=this.configService.getSettings(e.resource).jupyterLaunchTimeout;try{r=ta(e.kernelConnection)?await Ta(e.token,this.jupyterConnection.createConnectionInfo(e.kernelConnection.serverProviderHandle)):await this.jupyterNotebookProvider.getOrStartServer({resource:e.resource,token:e.token,ui:e.ui}),await Ta(e.token,this.validateLocalKernelDependencies(e));const t=ks.create(r.settings);this.asyncDisposables.push(t),o.push(new Oe.Disposable((()=>t.dispose().catch(ae)))),await Ta(e.token,this.validateRemoteServer(e,t));const n=ea(e.kernelConnection)?await Ta(e.token,this.workspaceService.computeWorkingDirectory(e.resource)):"",i=await this.connectToOrCreateSession({...e,contentsManager:t.contentsManager,sessionManager:t.sessionManager,kernelManager:t.kernelManager,kernelSpecManager:t.kernelSpecManager,idleTimeout:s,connection:r});e.token.isCancellationRequested&&(await i.shutdown().catch(ae),ce((()=>i.dispose()))),Ia.throwIfCanceled(e.token),kn(`Started session for kernel ${e.kernelConnection.kind}:${e.kernelConnection.id}`);const a=new Hm(i,e.resource,e.kernelConnection,Oe.Uri.file(n),r,this.kernelService,e.creator),c=i.disposed,l=()=>{t.dispose().catch(ae),c.disconnect(l)};this.asyncDisposables.push({dispose:()=>a.shutdown().finally((()=>a.dispose()))}),i.disposed.connect(l);const d=a.onDidDispose(l);return this.asyncDisposables.push(d),a}catch(t){throw Ie(o),ta(e.kernelConnection)?r?vo.isSelfCertsError(t)?new vo(r.baseUrl):yo.isSelfCertsExpiredError(t)?new yo(r.baseUrl):new So(r.baseUrl,e.kernelConnection.serverProviderHandle,t):t:t instanceof Xi?t:new Wm(t)}finally{Ie(t)}}async validateRemoteServer(e,t){if(t.isDisposed)throw new Ur;if(!ea(e.kernelConnection))try{await Promise.all([t.getRunningKernels(),t.getKernelSpecs()])}catch(t){throw Sn("Failed to fetch running kernels from remote server, connection may be outdated or remote server may be unreachable",t),new So(e.kernelConnection.baseUrl,e.kernelConnection.serverProviderHandle,t)}}async validateLocalKernelDependencies(e){if(e.token.isCancellationRequested)throw new Oe.CancellationError;e.kernelConnection?.interpreter&&ea(e.kernelConnection)&&this.kernelService&&await this.kernelService.ensureKernelIsUsable(e.resource,e.kernelConnection,e.ui,e.token,"3rdPartyExtension"===e.creator)}async connectToOrCreateSession(e){if(e.token.isCancellationRequested)throw new Oe.CancellationError;let t;try{if(e.kernelConnection&&"connectToLiveRemoteKernel"===e.kernelConnection.kind&&e.kernelConnection.kernelModel.id&&e.kernelConnection.kernelModel.model){if(!e.kernelConnection.kernelModel.model)throw new Error("Kernel model not defined when connecting to an existing session");t=e.sessionManager.connectTo({...e.kernelConnection.kernelModel,model:e.kernelConnection.kernelModel.model});const n=this.requestCreator;t.kernelSocketInformation={get socket(){return n.getWebsocket(e.kernelConnection.id)},options:{clientId:"",id:e.kernelConnection.id,model:{...e.kernelConnection.kernelModel.model},userName:""}},await Ta(e.token,X((async()=>"connected"===t.kernel?.connectionStatus||e.token.isCancellationRequested),e.idleTimeout,100))}else En(`createNewKernelSession ${e.kernelConnection?.id}`),t=await this.createNewSession(e),await $m(e.kernelConnection,e.resource,t,e.idleTimeout,e.token).catch(ae);if(e.token.isCancellationRequested)throw new Oe.CancellationError;return t}catch(t){const n=e.ui.disableUI?En:Sn;throw t instanceof Xi?(n("Failed to change kernel, re-throwing",t),t):(n("Failed to change kernel",t),new bm(e.kernelConnection))}}async createNewSession(e){const t={failedWithoutBackingFile:!1,failedWithBackingFile:!1,localHost:e.connection.localLaunch};try{return await this.createNewSessionImpl({...e,createBakingFile:!1})}catch(n){Cn("Failed to create a session without a backing file, trying again with a backing file",n);try{return t.failedWithoutBackingFile=!0,await this.createNewSessionImpl({...e,createBakingFile:!0})}catch(e){throw t.failedWithBackingFile=!0,e}}finally{io(F.StartedRemoteJupyterSessionWithBackingFile,void 0,t)}}async createNewSessionImpl(e){const t=zm(e.connection,e.resource);let n,i=t?.path;!i&&e.createBakingFile&&(n=await this.backingFileCreator.createBackingFile(e.resource,Oe.Uri.file(""),e.kernelConnection,e.connection,e.contentsManager),i=n?.filePath);const r=ds(e.kernelConnection)??e.kernelSpecManager?.specs?.default??"";let o;if(t?.name)o=t.name;else{const t=e.resource?Zt(e.resource):"";o=`${e.resource?Xt(e.resource,t):""}-${Kf()()}${t}`}const s={path:i||Ym(e.resource),kernel:{name:r},name:o,type:(e.resource?.path||"").toLowerCase().endsWith(".ipynb")?"notebook":"console"},a=this.requestCreator;try{const t=await Ta(e.token,e.sessionManager.startNew(s,{kernelConnectionOptions:{handleComms:!0}}));if(!t.kernel)throw new Tm(new Error("No kernel created"));kn(gr.createdNewKernel(e.connection.baseUrl,t?.kernel?.id||""));const n=t;return n.kernelSocketInformation={get socket(){return a.getWebsocket(t.kernel.id)},options:{clientId:t.kernel.clientId,id:t.kernel.id,model:{...t.kernel.model},userName:t.kernel.username}},n}catch(e){if(e instanceof Tm)throw e;throw new Tm(e)}finally{n&&e.contentsManager.delete(n.filePath).catch(ae)}}};function Ym(e){const t=`${ts}${Kf()()}${Kf()()}.ipynb`;return e?`${Xt(e,".ipynb")}${t}`:`${gr.defaultNotebookName}${t}`}Gm=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Jm(0,zn(mi)),Jm(1,zn(xs)),Jm(2,zn(Bi)),Jm(3,zn(Qn)),Jm(4,zn(_i)),Jm(5,zn(yi)),Jm(6,zn(bi)),Jm(6,Qi()),Jm(7,zn(ji))],Gm);var Qm=function(e,t){return function(n,i){t(n,i,e)}};let Xm=class{constructor(e,t,n,i,r){this.jupyterNotebookProvider=e,this.sessionManagerFactory=t,this.jupyterConnection=n,this.asyncDisposables=i,this.workspaceService=r}async create(e){const t=[];let n;const i=()=>{e.ui.disableUI||n||(n=Na.createProgressReporter(e.resource,ta(e.kernelConnection)?gr.connectingToJupyter:gr.startingJupyter),t.push(n))};let r;e.ui.disableUI&&e.ui.onDidChangeDisableUI(i,this,t),i();const o=[];try{r=ta(e.kernelConnection)?await this.jupyterConnection.createConnectionInfo(e.kernelConnection.serverProviderHandle):await this.jupyterNotebookProvider.getOrStartServer({resource:e.resource,token:e.token,ui:e.ui}),Ia.throwIfCanceled(e.token);const n=this.sessionManagerFactory.create(r);this.asyncDisposables.push(n),o.push(new Oe.Disposable((()=>n.dispose().catch(ae))));const i=ks.create(r.settings);t.push(new Oe.Disposable((()=>i.dispose()))),Ia.throwIfCanceled(e.token);const s=await this.createSession(e,i,n);return s.onDidShutdown((()=>n.dispose())),s}catch(t){throw Ie(o),ta(e.kernelConnection)?r?vo.isSelfCertsError(t)?new vo(r.baseUrl):yo.isSelfCertsExpiredError(t)?new yo(r.baseUrl):new So(r.baseUrl,e.kernelConnection.serverProviderHandle,t):t:t instanceof Xi?t:new Wm(t)}finally{Ie(t)}}async createSession(e,t,n){if(n.isDisposed)throw new Ur;if(ta(e.kernelConnection))try{await Promise.all([t.getRunningKernels(),t.getKernelSpecs()])}catch(t){throw Sn("Failed to fetch running kernels from remote server, connection may be outdated or remote server may be unreachable",t),new So(e.kernelConnection.baseUrl,e.kernelConnection.serverProviderHandle,t)}Ia.throwIfCanceled(e.token);const i=ea(e.kernelConnection)?await this.workspaceService.computeWorkingDirectory(e.resource):"";Ia.throwIfCanceled(e.token);const r=await n.startNew(e.resource,e.kernelConnection,Oe.Uri.file(i),e.ui,e.token,e.creator);return e.token.isCancellationRequested&&r.shutdown().catch(ae),Ia.throwIfCanceled(e.token),kn(`Started session for kernel ${e.kernelConnection.kind}:${e.kernelConnection.id}`),r}};Xm=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Qm(0,zn(mi)),Qm(1,zn(li)),Qm(2,zn(xs)),Qm(3,zn(Bi)),Qm(4,zn(Qn))],Xm);var Zm=function(e,t){return function(n,i){t(n,i,e)}};let eg=class{constructor(e,t,n,i,r,o){this.rawKernelSupported=e,this.rawKernelSessionFactory=t,this.jupyterSessionFactory=n,this.newRawKernelSessionFactory=i,this.newJupyterSessionFactory=r,this.experiments=o}async create(e){const t=e.kernelConnection;return this.rawKernelSupported.isSupported&&ea(t)&&this.rawKernelSessionFactory&&this.newRawKernelSessionFactory?this.experiments.inExperiment(Hi.NewJupyterSession)?this.newRawKernelSessionFactory.create({...e,kernelConnection:t}):this.rawKernelSessionFactory.create(e):this.experiments.inExperiment(Hi.NewJupyterSession)?this.newJupyterSessionFactory.create(e):this.jupyterSessionFactory.create(e)}};eg=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Zm(0,zn(Zp)),Zm(1,zn(eh)),Zm(1,Qi()),Zm(2,zn(Xm)),Zm(3,zn(th)),Zm(3,Qi()),Zm(4,zn(Gm)),Zm(5,zn(zi))],eg);var tg=function(e,t){return function(n,i){t(n,i,e)}};class ng extends dc{set commandProvider(e){this._commandProvider=e,this._onDidChangeProvider.fire()}get commandProvider(){return this._commandProvider}constructor(e,t,n,i){super(),this.extensionId=e,this.id=t,this.label=n,this.serverProvider=i,this._onDidChangeProvider=new Oe.EventEmitter,this.onDidChangeProvider=this._onDidChangeProvider.event}}class ig extends dc{get displayName(){return this.provider.label}get documentation(){return this.provider.documentation}get servers(){return Array.from(this._servers.values())}constructor(e,t,n){super(),this.provider=e,this.extensionId=t,this.jupyterConnection=n,this._servers=new Map,this._onDidChangeHandles=new Oe.EventEmitter,this.onDidChangeHandles=this._onDidChangeHandles.event,this.providerChanges=[],this.commands=new Map,this.cachedServerUri=new Map,this.id=e.id,this.hookupProviders(),this.provider.extensionId===p&&(this.getServerUriWithoutAuthInfo=this.getServerUriWithoutAuthInfoImpl.bind(this))}dispose(){super.dispose(),Ie(this.providerChanges)}hookupProviders(){Ie(this.providerChanges),this.provider.serverProvider?.onDidChangeServers&&this.provider.serverProvider.onDidChangeServers((()=>{this._servers.clear(),this.cachedServerUri.clear(),this._onDidChangeHandles.fire()}),this,this.providerChanges)}async getQuickPickEntryItems(e){if(!this.provider.commandProvider)return[];const t=new Oe.CancellationTokenSource;try{const n=await Promise.resolve(this.provider.commandProvider.provideCommands(e||"",t.token))||[];return e||this.commands.clear(),n.forEach((e=>this.commands.set(e.label,e))),n.map((e=>({label:Re(e.label),description:Re(e.description),picked:e.canBeAutoSelected,default:e.canBeAutoSelected,command:e})))}catch(e){return Sn(`Failed to get Jupyter Server Commands from ${this.provider.extensionId}#${this.provider.id}`,e),[]}finally{t.dispose()}}async handleQuickPick(e,t){if(!this.provider.commandProvider)throw new Error(`No Jupyter Server Command Provider for ${this.provider.extensionId}#${this.provider.id}`);const n=new Oe.CancellationTokenSource;try{const t=e.command;if(!t)throw new Error(`Jupyter Server Command ${e.label} not found in Command Provider ${this.provider.extensionId}#${this.provider.id}`);try{const e=await Promise.resolve(this.provider.commandProvider.handleCommand(t,n.token));return e?(this._servers.clear(),e.id):"back"}catch(t){if(t instanceof Oe.CancellationError)return;Sn(`Failed to execute Jupyter Server Command ${e.label} in Command Provider ${this.provider.extensionId}#${this.provider.id}`,t)}}finally{n.dispose()}}async getServerUri(e){let t=this.cachedServerUri.get(e);return t?t.lastValidated.elapsedTime<=3e5?t.promise:t.promise.then((async n=>{try{return await this.jupyterConnection.validateRemoteUri({extensionId:this.extensionId,id:this.id,handle:e},n,!0),t.lastValidated.reset(),n}catch(n){const i=this.cachedServerUri.get(e);if(i===t)return t={promise:this.getServerUriImpl(e),lastValidated:new se},this.cachedServerUri.set(e,t),t.promise.catch((()=>{this.cachedServerUri.get(e)===t&&this.cachedServerUri.delete(e)})),t.promise;if(i)return i.promise;throw n}})):(t={promise:this.getServerUriImpl(e),lastValidated:new se},t.promise.catch((()=>{this.cachedServerUri.get(e)===t&&this.cachedServerUri.delete(e)})),this.cachedServerUri.set(e,t),t.promise)}async getServerUriImpl(e){const t=new Oe.CancellationTokenSource;if(!this.provider.serverProvider)throw new Error(`Server Provider not initialized, Extension: ${this.extensionId}:${this.id}, Server ${e}`);try{const n=await this.getServer(e,t.token);if(n.connectionInformation){const e=n.connectionInformation;return{baseUrl:e.baseUrl.toString(),displayName:n.label,token:e.token||"",authorizationHeader:e.headers,mappedRemoteNotebookDir:n.mappedRemoteDirectory?.fsPath,webSocketProtocols:e.webSocketProtocols,fetch:e.fetch,WebSocket:e.WebSocket}}if(this.provider.serverProvider?.resolveJupyterServer){const e=await Promise.resolve(this.provider.serverProvider?.resolveJupyterServer(n,t.token)),i=e?.connectionInformation||n.connectionInformation;if(!i?.baseUrl)throw new Error(`Jupyter Provider ${this.id} does not implement the method resolveJupyterServer and/or baseUrl not returned`);return{baseUrl:i.baseUrl.toString(),displayName:n.label,token:i.token||"",authorizationHeader:i.headers,mappedRemoteNotebookDir:(e||n).mappedRemoteDirectory?.fsPath,webSocketProtocols:i.webSocketProtocols,fetch:i.fetch,WebSocket:i.WebSocket}}throw new Error("Jupyter Provider does not implement the method resolveJupyterServer")}finally{t.dispose()}}async getHandles(){if(!this.provider.serverProvider)return[];{const e=new Oe.CancellationTokenSource;try{return(await Promise.resolve(this.getServers(e.token))||[]).map((e=>e.id))}catch(e){return Sn(`Failed to get Jupyter Servers from ${this.provider.extensionId}#${this.provider.id}`,e),[]}finally{e.dispose()}}}async getServerUriWithoutAuthInfoImpl(e){const t=new Oe.CancellationTokenSource;try{return{baseUrl:"",token:"",displayName:(await this.getServer(e,t.token)).label}}finally{t.dispose()}}async getServer(e,t){const n=this._servers.get(e)||await Promise.resolve(this.getServers(t)).then((t=>(t||[]).find((t=>t.id===e))));if(n)return n;throw new Error(`Jupyter Server ${e} not found in Provider ${this.provider.extensionId}#${this.provider.id}`)}async getServers(e){if(this._servers.size)return Array.from(this._servers.values());if(!this.provider.serverProvider)throw new Error(`No Jupyter Server Provider for ${this.provider.extensionId}#${this.provider.id}`);const t=await Promise.resolve(this.provider.serverProvider.provideJupyterServers(e));return this._servers.clear(),(t||[]).forEach((e=>this._servers.set(e.id,e))),t}}let rg=class extends dc{get onDidChangeCollections(){return this._onDidChangeCollections.event}get jupyterCollections(){return Array.from(this._collections.values())}constructor(e,t,n){super(),this.jupyterUriProviderRegistration=t,this.jupyterConnection=n,this._onDidChangeCollections=new Oe.EventEmitter,this._collections=new Map,e.push(this)}createJupyterServerCollection(e,t,n,i){const r=`${e}#${t}`;if(this._collections.has(r)&&e!==p)throw new Error(`Jupyter Server Provider with id ${r} already exists`);const o=new ng(e,t,n,i);let s,a;return this._collections.set(r,o),o.onDidChangeProvider((()=>{o.serverProvider&&(a?.dispose(),s?.dispose(),a=new ig(o,e,this.jupyterConnection),s=this.jupyterUriProviderRegistration.registerProvider(a,e),this.disposables.push(s),this._onDidChangeCollections.fire({added:[o],removed:[]}))}),this,this.disposables),o.onDidDispose((()=>{a?.dispose(),s?.dispose(),this._collections.delete(r),this._onDidChangeCollections.fire({removed:[o],added:[]})}),this,this.disposables),o}};rg=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),tg(0,zn(Ri)),tg(1,zn(gi)),tg(2,zn(xs))],rg);const og=Symbol("RemoteKernelFinderController");var sg,ag=__webpack_require__(64063),cg=__webpack_require__.n(ag);class lg{constructor(e,t,n,i=!1){this._impl=e,this.controllerId=t,this._endCallback=n,this.clearOutputOnStartWithTime=i,this.started=!1}get cell(){return this._impl.cell}get token(){return this._impl.token}get executionOrder(){return this._impl.executionOrder}set executionOrder(e){this._impl.executionOrder=e}startIfNecessary(){this.started||this._impl.start()}start(e){this.started||(this.started=!0,this._impl.start(e),this._startTime=e,this.clearOutputOnStartWithTime?(En(`Start cell ${this.cell.index} execution @ ${e} (clear output)`),this._impl.clearOutput().then(ae,ae)):En(`Start cell ${this.cell.index} execution @ ${e}`))}end(e,t){if(this._endCallback)try{this._impl.end(e,t),kn(`End cell ${this.cell.index} execution @ ${t}, started @ ${this._startTime}, elapsed time = ${((t||0)-(this._startTime||0))/1e3}s`)}finally{this._endCallback(),this._endCallback=void 0}}clearOutput(e){return this.startIfNecessary(),this._impl.clearOutput(e)}replaceOutput(e,t){return this.startIfNecessary(),this._impl.replaceOutput(e,t)}appendOutput(e,t){return this.startIfNecessary(),this._impl.appendOutput(e,t)}replaceOutputItems(e,t){return this.startIfNecessary(),this._impl.replaceOutputItems(e,t)}appendOutputItems(e,t){return this.startIfNecessary(),this._impl.appendOutputItems(e,t)}}class dg{static getOrCreate(e,t,n=!1){let i;const r=e.document;if(i=this.get(e),i){if(i.controllerId!==t.id){const o=i;o.end(void 0),i=dg.create(r,e,t,n),o.started&&i.start((new Date).getTime())}}else i=dg.create(r,e,t,n);return i}static get(e){const t=e.document;return dg._map.get(t)}static create(e,t,n,i=!1){const r=new lg(n.createNotebookCellExecution(t),n.id,(()=>{dg._map.delete(e)}),i);return dg._map.set(e,r),r}}dg._map=new WeakMap,function(e){e.error="application/vnd.code.notebook.error",e.stderr="application/vnd.code.notebook.stderr",e.stdout="application/vnd.code.notebook.stdout"}(sg||(sg={}));const ug=["application/vnd.*","application/vdom.*","application/geo+json","application/x-nteract-model-debug+json","text/html","application/javascript","image/gif","text/latex","text/markdown","image/png","image/svg+xml","image/jpeg","application/json","text/plain"];function pg(e){if(e.mime.startsWith("application/vnd."))try{return 0===Buffer.from(e.data).toString().length}catch{}return!1}class hg{static getCellState(e){return hg.cellStates.get(e)?.state}static getCellStatus(e){return(hg.cellStates.get(e)?.stateTransition||[]).join(", ")||""}static setCellState(e,t){const n=hg.cellStates.get(e)?.start||new se,i=hg.cellStates.get(e)?.stateTransition||[];i.push(`${t} ${0===i.length?"@ start":`After ${n.elapsedTime}ms`}`),hg.cellStates.set(e,{stateTransition:i,state:t,start:n})}}function fg(e,t){xn(`Cell Index:${e.index}, of document ${Xt(e.notebook.uri)} with state:${hg.getCellStatus(e)}, exec: ${e.executionSummary?.executionOrder}. ${t}.`)}hg.cellStates=new WeakMap;const mg=new Map;function gg(e){const t=mg.get(e.output_type);let n;return t?n=t(e):(Cn(`Unable to translate cell from ${e.output_type} to NotebookCellData for VS Code.`),n=yg(e)),n}function vg(e){const t={outputType:e.output_type};switch(e.transient&&(t.transient=e.transient),e.output_type){case"display_data":case"execute_result":case"update_display_data":t.executionCount=e.execution_count,t.metadata=e.metadata?xo()(e.metadata):{}}return t}function yg(e){const t=vg(e);("image/svg+xml"in e.data||"image/png"in e.data)&&(t.__displayOpenPlotIcon=!0);const n=[];if(e.data)for(const t in e.data)n.push(Cg(t,e.data[t]));return new Oe.NotebookCellOutput(n.sort(((e,t)=>{const n=(e,t)=>(e.endsWith(".*")&&(e=e.substr(0,e.indexOf(".*"))),t.startsWith(e));let i=ug.findIndex((t=>n(t,e.mime))),r=ug.findIndex((e=>n(e,t.mime)));return pg(e)&&(i=-1),pg(t)&&(r=-1),i=-1==i?100:i,r=-1==r?100:r,i-r})),t)}function bg(e){const t=e.items[0];if(!t.data)return{output_type:"error",ename:"",evalue:"",traceback:[]};const n=e.metadata?.originalError,i=JSON.parse(Buffer.from(t.data).toString("utf8"));return{output_type:"error",ename:i.name,evalue:i.message,traceback:n?.traceback||ic(i.stack||i.message||"")}}mg.set("display_data",yg),mg.set("error",(function(e){return e=e||{output_type:"error",ename:"",evalue:"",traceback:[]},new Oe.NotebookCellOutput([Oe.NotebookCellOutputItem.error({name:e?.ename||"",message:e?.evalue||"",stack:(e?.traceback||[]).join("\n")})],{...vg(e),originalError:e})})),mg.set("execute_result",yg),mg.set("stream",(function(e){const t=nc(e.text),n="stderr"===e.name?Oe.NotebookCellOutputItem.stderr:Oe.NotebookCellOutputItem.stdout;return new Oe.NotebookCellOutput([n(t)],vg(e))})),mg.set("update_display_data",yg);const wg=new TextDecoder,_g=["text/plain","text/markdown",sg.stderr,sg.stdout];function Sg(e,t){if(!t)return"";try{if(e===sg.error){const e=wg.decode(t);return JSON.parse(e)}if(e.startsWith("text/")||_g.includes(e))return ic(wg.decode(t));if(e.startsWith("image/")&&"image/svg+xml"!==e){if("undefined"!=typeof Buffer&&"function"==typeof Buffer.from)return Buffer.from(t).toString("base64");{const e=wg.decode(t);return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number.parseInt("0x"+t))})))}}if(!e.toLowerCase().startsWith("application/vnd.holoviews_load.v")||!e.toLowerCase().endsWith("+json")){if(e.toLowerCase().includes("json")){const e=wg.decode(t);return e.length>0?JSON.parse(e):e}return wg.decode(t)}{const e=wg.decode(t);try{return e.length>0?JSON.parse(e):e}catch{return e}}}catch(n){return Sn(`Failed to convert ${e} output from a buffer ${typeof t}, ${t}`,n),""}}function Cg(e,t){if(!t)return Oe.NotebookCellOutputItem.text("",e);try{if(!e.startsWith("text/")&&!_g.includes(e)||!Array.isArray(t)&&"string"!=typeof t){if(e.startsWith("image/")&&"string"==typeof t&&"image/svg+xml"!==e){if("undefined"!=typeof Buffer&&"function"==typeof Buffer.from)return new Oe.NotebookCellOutputItem(Buffer.from(t,"base64"),e);{const n=Uint8Array.from(atob(t),(e=>e.charCodeAt(0)));return new Oe.NotebookCellOutputItem(n,e)}}return"object"!=typeof t||null===t||Array.isArray(t)?(t=Array.isArray(t)?nc(t):t,Oe.NotebookCellOutputItem.text(t,e)):Oe.NotebookCellOutputItem.text(JSON.stringify(t),e)}{const n=Array.isArray(t)?nc(t):t;return Oe.NotebookCellOutputItem.text(n,e)}}catch(n){return Sn(`Failed to convert ${e} output to a buffer ${typeof t}, ${t}`,n),Oe.NotebookCellOutputItem.text("")}}function kg(e){const t=[];e.items.filter((e=>e.mime===sg.stderr||e.mime===sg.stdout)).map((e=>wg.decode(e.data))).forEach((e=>{const n=e.split("\n");t.length&&n.length&&n[0].length>0&&(t[t.length-1]=`${t[t.length-1]}${n.shift()}`);for(const e of n)t.push(e)}));for(let e=0;e<t.length-1;e++)t[e]=`${t[e]}\n`;t.length&&0===t[t.length-1].length&&t.pop();const n=function(e){if(e.items.length>0)return e.items[0].mime===sg.stderr?"stderr":"stdout"}(e)||"stdout";return{output_type:"stream",name:n,text:t}}function Eg(e){const t=e.metadata;let n;const i=t?.outputType;switch(i){case"error":n=bg(e);break;case"stream":n=kg(e);break;case"display_data":n={output_type:"display_data",data:e.items.reduce(((e,t)=>(e[t.mime]=Sg(t.mime,t.data),e)),{}),metadata:t?.metadata||{}};break;case"execute_result":n={output_type:"execute_result",data:e.items.reduce(((e,t)=>(e[t.mime]=Sg(t.mime,t.data),e)),{}),metadata:t?.metadata||{},execution_count:"number"==typeof t?.executionCount?t?.executionCount:null};break;case"update_display_data":n={output_type:"update_display_data",data:e.items.reduce(((e,t)=>(e[t.mime]=Sg(t.mime,t.data),e)),{}),metadata:t?.metadata||{}};break;default:{const i=1===e.items.length&&e.items.every((e=>e.mime===sg.error)),r=e.items.every((e=>e.mime===sg.stderr||e.mime===sg.stdout));if(i)return bg(e);const o=t?.outputType||(r?"stream":"display_data");let s;io(F.VSCNotebookCellTranslationFailed,void 0,{outputType:o}),s="stream"===o?kg(e):"display_data"===o?{data:{},metadata:{},output_type:"display_data"}:{output_type:o},t?.metadata&&(s.metadata=t.metadata),e.items.length>0&&(s.data=e.items.reduce(((e,t)=>(e[t.mime]=Sg(t.mime,t.data),e)),{})),n=s;break}}return n&&t&&t.transient&&(n.transient=t.transient),n}async function xg(e,t,n){let r,o,s=!1;if(!e)return{changed:s,kernelId:r};switch(e?.language_info?.name||(e.language_info=e.language_info||{name:""}),t?.kind){case"connectToLiveRemoteKernel":o=t.kernelModel.language;break;case"startUsingRemoteKernelSpec":case"startUsingLocalKernelSpec":o=t.kernelSpec.language;break;case"startUsingPythonInterpreter":o=i}if(e.language_info.name!==o&&o&&(e.language_info.name=o,s=!0),n&&"language_info"in n&&n.language_info)cg()(e.language_info,n.language_info)||(e.language_info=xo()(n.language_info),s=!0);else{const n=fs(t),i=n?function(e){if(!e)return;if(e.interpreter)return e.interpreter;const t=as(e)?e.kernelModel:void 0;if(t?.metadata?.interpreter)return zo(t?.metadata?.interpreter,"");const n=ss(e)?e.kernelSpec:void 0;return zo(n?.metadata?.interpreter,"")}(t):void 0,r=i?.version?`${i.version.major}.${i.version.minor}.${i.version.patch}`:"";i&&i.version&&e&&e.language_info&&e.language_info.version!==r?(e.language_info.version=r,s=!0):!i&&e?.language_info&&n&&(e.language_info=void 0,s=!0)}const a=t&&as(t)?t.kernelModel:t&&"kernelSpec"in t?t.kernelSpec:void 0;if("startUsingPythonInterpreter"===t?.kind){const n=t.kernelSpec;let r=n.display_name||t.interpreter.displayName||"",o="";switch(_s(n)){case"registeredByOldVersionOfExt":case"registeredByNewVersionOfExt":o="python3";break;case"registeredByNewVersionOfExtForCustomKernelSpec":o=(n.metadata?.vscode?.originalSpecFile?It(Pt(n.metadata.vscode.originalSpecFile)):void 0)||n.name,r=n.metadata?.vscode?.originalDisplayName||r;break;default:o=n.name}e.kernelspec?.name!==o&&(s=!0,e.kernelspec={name:o,language:i,display_name:r},"vscode"in e&&delete e.vscode,"interpreter"in e&&delete e.interpreter)}else if(a&&!e.kernelspec){const t=a.metadata?.vscode?.originalSpecFile?It(Pt(a.metadata.vscode.originalSpecFile)):void 0;e.kernelspec={name:t||a.name||a.display_name||"",display_name:a.metadata?.vscode?.originalDisplayName||a.display_name||a.name||""},a.language&&(e.kernelspec.language=a.language),r=a.id,s=!0}else if(a&&e.kernelspec){const t=(a.metadata?.vscode?.originalSpecFile?It(Pt(a.metadata.vscode.originalSpecFile)):void 0)||a.name||a.display_name||"",n=a.metadata?.vscode?.originalDisplayName||a.display_name||a.name||"",i=a.language||a.language||"";e.kernelspec.name===t&&e.kernelspec.language===i&&e.kernelspec.display_name===n&&r===a.id||(s=!0,e.kernelspec.name=t,e.kernelspec.display_name=n,e.kernelspec.language=i,r=a.id);try{delete e.kernelspec.metadata}catch{}}return{changed:s,kernelId:r}}async function Tg(e,t,n,i){const r=dg.getOrCreate(e,t),o=zr(n);o?(r.started||(r.start(e.executionSummary?.timing?.endTime),r.executionOrder=e.executionSummary?.executionOrder),await r.appendOutput(o),r.end(!!i&&void 0,e.executionSummary?.timing?.endTime)):r.started&&r.end(!!i&&void 0,e.executionSummary?.timing?.endTime)}var Pg=function(e,t){return function(n,i){t(n,i,e)}};let Ig=class{constructor(e,t,n,i,r){this.appShell=e,this.disposableRegistry=t,this.kernelProvider=n,this.serverUriStorage=i,this.jupyterUriProviderRegistration=r,this.kernelsStartedSuccessfully=new WeakSet,this.kernelConnectionToKernelMapping=new WeakMap,this.kernelsRestarting=new WeakSet,this.kernelReconnectProgress=new WeakMap,this.lastExecutedCellPerKernel=new WeakMap}activate(){this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposableRegistry),this.disposableRegistry.push(this.kernelProvider.onDidDisposeKernel((e=>{this.kernelReconnectProgress.get(e)?.dispose(),this.kernelReconnectProgress.delete(e)}),this)),this.disposableRegistry.push(this.kernelProvider.onDidRestartKernel((e=>{this.kernelReconnectProgress.get(e)?.dispose(),this.kernelReconnectProgress.delete(e)}),this)),this.disposableRegistry.push(Oe.notebooks.onDidChangeNotebookCellExecutionState((e=>{if(!Za(e.cell.notebook))return;if(e.state!==Oe.NotebookCellExecutionState.Idle)return;const t=this.kernelProvider.get(e.cell.notebook);t&&this.lastExecutedCellPerKernel.get(t)===e.cell&&this.lastExecutedCellPerKernel.delete(t)})))}onDidStartKernel(e){if(!this.kernelsStartedSuccessfully.has(e)){if(this.kernelProvider.getKernelExecution(e).onPreExecute((t=>this.lastExecutedCellPerKernel.set(e,t)),this,this.disposableRegistry),!e.session?.kernel)return;this.kernelsStartedSuccessfully.add(e),this.kernelConnectionToKernelMapping.set(e.session.kernel,e),e.session?.kernel?.connectionStatusChanged.connect(this.onKernelStatusChanged,this),e.onDisposed((()=>{this.kernelReconnectProgress.get(e)?.dispose(),this.kernelReconnectProgress.delete(e)}),this,this.disposableRegistry),e.addHook("willRestart",(async()=>{this.kernelReconnectProgress.get(e)?.dispose(),this.kernelReconnectProgress.delete(e),this.kernelsRestarting.add(e)}),this,this.disposableRegistry),e.onRestarted((()=>this.kernelsRestarting.delete(e)),this,this.disposableRegistry)}}onKernelStatusChanged(e,t){const n=this.kernelConnectionToKernelMapping.get(e);if(n&&!this.kernelsRestarting.has(n))switch(t){case"connected":return this.kernelReconnectProgress.get(n)?.dispose(),void this.kernelReconnectProgress.delete(n);case"disconnected":return void(this.kernelReconnectProgress.has(n)&&(this.kernelReconnectProgress.get(n)?.dispose(),this.kernelReconnectProgress.delete(n),this.onKernelDisconnected(n)?.catch(ae)));case"connecting":return void(this.kernelReconnectProgress.has(n)||this.onKernelConnecting(n)?.catch(ae));default:return}}async onKernelConnecting(e){const t=ie(),n=new Oe.Disposable((()=>t.resolve()));if(this.kernelReconnectProgress.set(e,n),ta(e.kernelConnectionMetadata)&&await this.handleRemoteServerShutdown(e,e.kernelConnectionMetadata))return;const i=gr.automaticallyReconnectingToAKernelProgressMessage(ls(e.kernelConnectionMetadata));this.appShell.withProgress({location:Oe.ProgressLocation.Notification,title:i},(async()=>t.promise)).then(ae,ae),this.disposableRegistry.push(n)}async onKernelDisconnected(e){if(e.disposed||e.disposing)return;if(Dh(e.resourceUri,F.KernelCrash),ta(e.kernelConnectionMetadata)&&await this.handleRemoteServerShutdown(e,e.kernelConnectionMetadata))return;const t=ea(e.kernelConnectionMetadata)?gr.kernelDisconnected(ls(e.kernelConnectionMetadata)):gr.remoteJupyterConnectionFailedWithServer(e.kernelConnectionMetadata.baseUrl);this.appShell.showErrorMessage(t).then(ae,ae);try{const n=this.lastExecutedCellPerKernel.get(e);if(!n||n.document.isClosed||n.notebook.isClosed)return;if(!1===n.executionSummary?.success)return;await Tg(n,e.controller,t,!1)}finally{await e.dispose()}}async handleRemoteServerShutdown(e,t){const n=await this.jupyterUriProviderRegistration.getProvider(t.serverProviderHandle.extensionId,t.serverProviderHandle.id);if(!n||!n.getHandles)return!1;try{return(await n.getHandles()).includes(t.serverProviderHandle.handle)||(await this.serverUriStorage.remove(t.serverProviderHandle),this.kernelReconnectProgress.get(e)?.dispose(),this.kernelReconnectProgress.delete(e)),!0}catch(e){return!1}}};Ig=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Pg(0,zn(Jn)),Pg(1,zn(Ri)),Pg(2,zn(na)),Pg(3,zn(vi)),Pg(4,zn(gi))],Ig);var Dg=function(e,t){return function(n,i){t(n,i,e)}};let Rg=class{constructor(e,t){this.disposableRegistry=e,this.kernelProvider=t,this.kernelsStartedSuccessfully=new WeakSet,this.kernelRestartProgress=new WeakMap}activate(){this.kernelProvider.onKernelStatusChanged(this.onKernelStatusChanged,this,this.disposableRegistry),this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposableRegistry),this.disposableRegistry.push(this.kernelProvider.onDidDisposeKernel((e=>{this.kernelRestartProgress.get(e)?.dispose(),this.kernelRestartProgress.delete(e)}),this)),this.disposableRegistry.push(this.kernelProvider.onDidRestartKernel((e=>{this.kernelRestartProgress.get(e)?.dispose(),this.kernelRestartProgress.delete(e)}),this))}onDidStartKernel(e){this.kernelsStartedSuccessfully.add(e)}onKernelStatusChanged({kernel:e}){if(this.kernelsStartedSuccessfully.has(e)&&e.session&&"localRaw"!==e.session.kind)if("autorestarting"===e.status){const t=Na.createProgressReporter(e.resourceUri,gr.restartingKernelStatus(ls(e.kernelConnectionMetadata)));this.kernelRestartProgress.set(e,t)}else"starting"!==e.status&&"busy"!==e.status&&"unknown"!==e.status&&this.kernelRestartProgress.has(e)&&(this.kernelRestartProgress.get(e)?.dispose(),this.kernelRestartProgress.delete(e))}};Rg=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Dg(0,zn(Ri)),Dg(1,zn(na))],Rg);var Og=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Ag=function(e,t){return function(n,i){t(n,i,e)}};let Ng=class{constructor(e,t,n){this.disposableRegistry=e,this.applicationShell=t,this.kernelProvider=n,this.lastExecutedCellPerKernel=new WeakMap,this.kernelsStartedSuccessfully=new WeakSet}activate(){this.kernelProvider.onKernelStatusChanged(this.onKernelStatusChanged,this,this.disposableRegistry),this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposableRegistry)}onDidStartKernel(e){this.kernelsStartedSuccessfully.add(e),this.kernelProvider.getKernelExecution(e).onPreExecute((t=>this.lastExecutedCellPerKernel.set(e,t)),this,this.disposableRegistry)}async onKernelStatusChanged({kernel:e}){this.kernelsStartedSuccessfully.has(e)&&(e.disposed||e.disposing||!e.session||("localRaw"===e.session.kind&&"dead"===e.status&&(this.applicationShell.showErrorMessage(gr.kernelDiedWithoutError(ls(e.kernelConnectionMetadata))).then(ae,ae),await this.endCellAndDisplayErrorsInCell(e)),"localRaw"!==e.session.kind&&"autorestarting"===e.status&&(this.applicationShell.showErrorMessage(gr.kernelDiedWithoutErrorAndAutoRestarting(ls(e.kernelConnectionMetadata))).then(ae,ae),await this.endCellAndDisplayErrorsInCell(e))))}async endCellAndDisplayErrorsInCell(e){const t=this.lastExecutedCellPerKernel.get(e);if(Dh(e.resourceUri,F.KernelCrash),t)return Tg(t,e.controller,gr.kernelCrashedDueToCodeInCurrentOrPreviousCell,!1)}};Og([ye()],Ng.prototype,"onKernelStatusChanged",null),Ng=Og([Kn(),Ag(0,zn(Ri)),Ag(1,zn(Jn)),Ag(2,zn(na))],Ng);var Mg=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Lg=function(e,t){return function(n,i){t(n,i,e)}};let jg=class{constructor(e,t,n,i,r,o){this.appShell=e,this.installer=t,this.memento=n,this.isCodeSpace=i,this.rawSupport=r,this.serviceContainer=o,this.installPromises=new Map}async installMissingDependencies({resource:e,kernelConnection:t,ui:n,token:i,ignoreCache:r,cannotChangeKernels:o,installWithoutPrompting:s}){if(!ea(t)||!fs(t)||!t.interpreter)return aa.ok;kn(`Check & install missing Kernel dependencies for ${pn(t.interpreter?.uri)}, ui.disabled=${n.disableUI} for resource '${pn(e)}'`);const a=async()=>await Na.wrapAndReportProgress(e,gr.validatingKernelDependencies,(()=>this.areDependenciesInstalled(t,i,r)))?aa.ok:i?.isCancellationRequested?aa.cancel:void 0;if(!s){const e=await a();if(e===aa.ok||e===aa.cancel)return e}const c=Qt(t.interpreter.uri);let l=this.installPromises.get(c);if(!l){const r=new Oe.CancellationTokenSource,d=i.onCancellationRequested((()=>{r.cancel(),d.dispose()}));l=Na.wrapAndReportProgress(e,gr.installingMissingDependencies,(async()=>{if(s){const e=await a();if(e===aa.ok||e===aa.cancel)return e}return this.runInstaller(e,t.interpreter,n,r,o,s)})),l.finally((()=>{d.dispose(),r.dispose()})).catch(ae),this.installPromises.set(c,l)}let d=aa.failed;try{d=await l,i.isCancellationRequested&&(d=aa.cancel)}catch(e){xn("Failed to install kernel dependency",e),d=aa.failed}finally{this.installPromises.delete(c)}return d}async areDependenciesInstalled(e,t,n){if("connectToLiveRemoteKernel"===e.kind||"startUsingRemoteKernelSpec"===e.kind||void 0===e.interpreter)return!0;if(!n&&this.rawSupport.isSupported&&await async function(e,t,n){const i=`${await Io(n)}#${nu.get(t)}`;return e.get(i,!1)}(this.memento,xd.ipykernel,e.interpreter))return kn(`IPyKernel found previously in this environment ${pn(e.interpreter.uri)}`),!0;const i=this.installer.isInstalled(xd.ipykernel,e.interpreter).then((e=>!0===e));return i.then((t=>{t&&cu(this.memento,xd.ipykernel,e.interpreter).catch(ae)}),ae),xa(t,!1,i)}async runInstaller(e,t,n,i,r,o){if(xn(`Run Installer for ${pn(e)} ui.disableUI=${n.disableUI}, cancelTokenSource.token.isCancellationRequested=${i.token.isCancellationRequested}`),n.disableUI)return aa.uiHidden;const[s,a]=await Promise.all([fu(this.memento,xd.ipykernel,t),t.envType===ko.Conda?void 0:await this.installer.isInstalled(xd.pip,t)]);if(i.token.isCancellationRequested)return aa.cancel;const c=s?gr.libraryRequiredToLaunchJupyterKernelNotInstalledInterpreterAndRequiresUpdate:gr.libraryRequiredToLaunchJupyterKernelNotInstalledInterpreter,l=!1===a?[xd.ipykernel,xd.pip]:[xd.ipykernel],d=c(t.displayName||t.uri.fsPath,l.map((e=>nu.get(e))).join(` ${lr.and} `)),u=l.map((e=>nu.get(e))).join(", "),p=e?Ya(e):void 0,h=e?await jr(e.toString()):void 0;Dh(e,F.PythonModuleInstall,void 0,{action:"displayed",moduleName:u,resourceType:p,resourceHash:h,pythonEnvType:t.envType});const f=lr.install,m=gr.selectKernel,g=lr.moreInfo,v=[f];e&&!r&&v.push(m),v.push(g);try{let n;this.isCodeSpace&&o||Dh(e,F.PythonModuleInstall,void 0,{action:"prompted",moduleName:u,resourceType:p,resourceHash:h,pythonEnvType:t.envType}),xn(`Prompting user for install (this.isCodeSpace=${this.isCodeSpace}).`);do{n=this.isCodeSpace||o?f:await xa(i.token,this.appShell.showInformationMessage(d,{modal:!0},...v)),n===g&&(Dh(e,F.PythonModuleInstall,void 0,{action:"moreInfo",moduleName:u,resourceType:p,resourceHash:h,pythonEnvType:t.envType}),this.appShell.openUrl("https://aka.ms/AAhi594"))}while(n===g);if(i.token.isCancellationRequested)return Dh(e,F.PythonModuleInstall,void 0,{action:"dismissed",moduleName:u,resourceType:p,resourceHash:h,pythonEnvType:t.envType}),aa.cancel;if(n===m)return Dh(e,F.PythonModuleInstall,void 0,{action:"differentKernel",moduleName:u,resourceType:p,resourceHash:h,pythonEnvType:t.envType}),aa.selectDifferentKernel;if(n===f){Dh(e,F.PythonModuleInstall,void 0,{action:"install",moduleName:u,resourceType:p,resourceHash:h,pythonEnvType:t.envType});const n=await xa(i.token,Ed.Cancelled,this.installer.install(xd.ipykernel,t,i,!0===s,!1===a));if(n===Ed.Installed)return Dh(e,F.PythonModuleInstall,void 0,{action:"installed",moduleName:u,resourceType:p,resourceHash:h,pythonEnvType:t.envType}),aa.ok;if(n===Ed.Ignore)return Dh(e,F.PythonModuleInstall,void 0,{action:"failed",moduleName:u,resourceType:p,resourceHash:h,pythonEnvType:t.envType}),aa.failed}return Dh(e,F.PythonModuleInstall,void 0,{action:"dismissed",moduleName:u,resourceType:p,resourceHash:h,pythonEnvType:t.envType}),aa.cancel}catch(n){throw Sn(`Failed to install ${u}`,n),Dh(e,F.PythonModuleInstall,void 0,{action:"error",moduleName:u,resourceType:p,resourceHash:h,pythonEnvType:t.envType}),n}}};Mg([Tn("Install Missing Dependencies")],jg.prototype,"installMissingDependencies",null),Mg([Tn("Are Dependencies Installed"),Lg(0,Dn("id"))],jg.prototype,"areDependenciesInstalled",null),jg=Mg([Kn(),Lg(0,zn(Jn)),Lg(1,zn(Ld)),Lg(2,zn(Oi)),Lg(2,Nc(Ai)),Lg(3,zn(xi)),Lg(4,zn(Zp)),Lg(5,zn(ya))],jg);let Fg=class{get status(){return this._status}set status(e){this._status!=e&&(this._status=e,this._onDidChangeStatus.fire())}get onDidChangeStatus(){return this._onDidChangeStatus.event}constructor(e){this.disposables=e,this._onDidChangeRegistrations=new Oe.EventEmitter,this.onDidChangeRegistrations=this._onDidChangeRegistrations.event,this._finders=[],this.connectionFinderMapping=new Map,this._onDidChangeKernels=new Oe.EventEmitter,this.onDidChangeKernels=this._onDidChangeKernels.event,this._status="idle",this._onDidChangeStatus=new Oe.EventEmitter,e.push(this._onDidChangeStatus),e.push(this._onDidChangeRegistrations)}registerKernelFinder(e){this._finders.push(e),"discovering"===e.status&&(this.status="discovering");const t=e.onDidChangeStatus((()=>this.status=this._finders.every((e=>"idle"===e.status))?"idle":"discovering"),this,this.disposables),n=e.onDidChangeKernels((()=>this._onDidChangeKernels.fire()));return this.disposables.push(n),this._onDidChangeKernels.fire(),this._onDidChangeRegistrations.fire({added:[e],removed:[]}),{dispose:()=>{const i=this._finders.findIndex((t=>t===e));this._finders.splice(i,1),n.dispose(),t.dispose(),this._onDidChangeKernels.fire(),this._onDidChangeRegistrations.fire({added:[],removed:[e]})}}}get kernels(){const e=[];this.connectionFinderMapping.clear();const t=new Set;this._finders.filter((e=>e.kind===jm.LocalPythonEnvironment)).forEach((n=>{n.kernels.forEach((i=>{"startUsingLocalKernelSpec"!==i.kind&&"startUsingPythonInterpreter"!==i.kind||!i.kernelSpec.specFile||t.add(i.kernelSpec.specFile),e.push(i),this.connectionFinderMapping.set(i.id,n)}))})),this._finders.filter((e=>e.kind===jm.LocalKernelSpec)).forEach((n=>{n.kernels.forEach((i=>{("startUsingLocalKernelSpec"===i.kind||"startUsingPythonInterpreter"===i.kind)&&i.kernelSpec.specFile&&t.has(i.kernelSpec.specFile)||(e.push(i),this.connectionFinderMapping.set(i.id,n))}))}));const n=this._finders.filter((e=>e.kind===jm.Remote));for(const t of n){const n=t.kernels;n.forEach((e=>{this.connectionFinderMapping.set(e.id,t)})),e.push(...n)}return xn(`list kernel specs ${e.length}: ${e.map((e=>`${e.id}, ${e.kind}, ${e.interpreter?.uri}`)).join("\n")}`),e}getFinderForConnection(e){return this.connectionFinderMapping.get(e.id)}get registered(){return this._finders}};Fg=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(Ri))],Fg);var Ug=Hn("multi_inject");class qg{get kernels(){const e=new Set;return this.notebook.notebookDocuments.forEach((t=>{const n=this.get(t);n&&e.add(n)})),Array.from(e)}constructor(e,t,n){this.asyncDisposables=e,this.disposables=t,this.notebook=n,this.executions=new WeakMap,this.kernelsByNotebook=new WeakMap,this.kernelsById=new Map,this.pendingDisposables=new Set,this._onDidRestartKernel=new Oe.EventEmitter,this._onDidStartKernel=new Oe.EventEmitter,this._onDidCreateKernel=new Oe.EventEmitter,this._onDidDisposeKernel=new Oe.EventEmitter,this._onKernelStatusChanged=new Oe.EventEmitter,this.onKernelStatusChanged=this._onKernelStatusChanged.event,this.asyncDisposables.push(this),this.notebook.onDidCloseNotebookDocument((e=>this.disposeOldKernel(e)),this,t),t.push(this._onDidDisposeKernel),t.push(this._onDidRestartKernel),t.push(this._onKernelStatusChanged),t.push(this._onDidStartKernel),t.push(this._onDidCreateKernel)}get onDidDisposeKernel(){return this._onDidDisposeKernel.event}get onDidRestartKernel(){return this._onDidRestartKernel.event}get onDidStartKernel(){return this._onDidStartKernel.event}get onDidCreateKernel(){return this._onDidCreateKernel.event}get(e){if(de(e)){const t=this.notebook.notebookDocuments.find((t=>t.uri.toString()===e.toString()));return t?this.get(t):void 0}return"string"==typeof e?this.kernelsById.get(e)?.kernel:this.kernelsByNotebook.get(e)?.kernel}getKernelExecution(e){return this.executions.get(e)}getInternal(e){return this.kernelsByNotebook.get(e)}async dispose(){xn("Disposing all kernels from kernel provider");const e=Array.from(this.pendingDisposables.values());this.pendingDisposables.clear(),await Promise.all(e),await Promise.all(this.kernels.map((e=>e.dispose())))}storeKernel(e,t,n){this.kernelsByNotebook.set(e,{options:t,kernel:n}),this.kernelsById.set(n.id,{options:t,kernel:n}),this._onDidCreateKernel.fire(n)}deleteMappingIfKernelIsDisposed(e){e.onDisposed((()=>{this.get(e.notebook)===e&&(this.kernelsByNotebook.delete(e.notebook),this.kernelsById.delete(e.id),En(`Kernel got disposed, hence there is no longer a kernel associated with ${pn(e.uri)}`)),this.pendingDisposables.delete(e)}),this,this.disposables)}disposeOldKernel(e){const t=this.kernelsByNotebook.get(e);t&&(xn(`Disposing kernel associated with ${pn(e.uri)}, isClosed=${e.isClosed}`),this.kernelsById.delete(t.kernel.id),this.pendingDisposables.add(t.kernel),t.kernel.dispose().catch((e=>Cn("Failed to dispose old kernel",e))).finally((()=>this.pendingDisposables.delete(t.kernel))).catch(ae)),this.kernelsByNotebook.delete(e)}handleServerRemoval(e){this.notebook.notebookDocuments.forEach((t=>{const n=this.kernelsByNotebook.get(t);if(n){const i=n.options.metadata;"connectToLiveRemoteKernel"!==i.kind&&"startUsingRemoteKernelSpec"!==i.kind||e.find((e=>e.id===i.serverProviderHandle.id&&e.handle===i.serverProviderHandle.handle))&&(this.kernelsByNotebook.delete(t),this.kernelsById.delete(n.kernel.id))}}))}}class Kg{get kernels(){return Array.from(this.kernelsByUri.values()).map((e=>e.kernel))}constructor(e,t,n){this.asyncDisposables=e,this.disposables=t,this.notebook=n,this.kernelsByUri=new Map,this.kernelsById=new Map,this.pendingDisposables=new Set,this._onDidRestartKernel=new Oe.EventEmitter,this._onDidStartKernel=new Oe.EventEmitter,this._onDidCreateKernel=new Oe.EventEmitter,this._onDidDisposeKernel=new Oe.EventEmitter,this._onKernelStatusChanged=new Oe.EventEmitter,this.onKernelStatusChanged=this._onKernelStatusChanged.event,this.asyncDisposables.push(this),this.notebook.onDidCloseNotebookDocument((e=>this.disposeOldKernel(e.uri)),this,t),t.push(this._onDidDisposeKernel),t.push(this._onDidRestartKernel),t.push(this._onKernelStatusChanged),t.push(this._onDidStartKernel),t.push(this._onDidCreateKernel)}get onDidDisposeKernel(){return this._onDidDisposeKernel.event}get onDidRestartKernel(){return this._onDidRestartKernel.event}get onDidStartKernel(){return this._onDidStartKernel.event}get onDidCreateKernel(){return this._onDidCreateKernel.event}get(e){return this.kernelsByUri.get(e.toString())?.kernel||this.kernelsById.get(e.toString())?.kernel}getInternal(e){return this.kernelsByUri.get(e.toString())}async dispose(){xn("Disposing all kernels from kernel provider");const e=Array.from(this.pendingDisposables.values());this.pendingDisposables.clear(),await Promise.all(e),await Promise.all(this.kernels.map((e=>e.dispose())))}storeKernel(e,t,n){this.kernelsByUri.set(e.toString(),{options:t,kernel:n}),this.kernelsById.set(n.id,{options:t,kernel:n}),this._onDidCreateKernel.fire(n)}deleteMappingIfKernelIsDisposed(e,t){t.onDisposed((()=>{this.get(e)===t&&(this.kernelsByUri.delete(e.toString()),this.kernelsById.delete(t.id),En(`Kernel got disposed, hence there is no longer a kernel associated with ${pn(e)}`)),this.pendingDisposables.delete(t)}),this,this.disposables)}disposeOldKernel(e){const t=this.kernelsByUri.get(e.toString());t&&(xn(`Disposing kernel associated with ${pn(e)}`),this.kernelsById.delete(t.kernel.id),this.pendingDisposables.add(t.kernel),t.kernel.dispose().catch((e=>Cn("Failed to dispose old kernel",e))).finally((()=>this.pendingDisposables.delete(t.kernel))).catch(ae)),this.kernelsByUri.delete(e.toString())}}const Vg="KERNEL_INFO",Wg=1728e5;async function $g(e,t,n){if(!n||!ta(t))return;const i=e.get(Vg,[]).filter((e=>Date.now()-e.age<Wg)).filter((e=>e.id!==t.id));i.push({id:t.id,age:Date.now(),info:n}),await e.update(Vg,i)}class Bg extends wo{constructor(e){super("kernelpromisetimeout",gr.interruptingKernelFailed,e)}}const Hg="e976ee50-99ed-4aba-9b6b-9dcd5634d07d:IPyWidgets:";function zg(e){let t="string"==typeof e?e:"";return"string"!=typeof e&&"content"in e&&"code"in e.content&&"string"==typeof e.content.code&&(t=e.content.code),!t.includes(Hg)}function Jg(e){return"dead"===e.status||"terminating"===e.status&&!e.disposed&&!e.disposing||!e.disposed&&!e.disposing&&("unknown"==e.session?.status||"unknown"==e.session?.kernel?.status)&&(e.session.kernel?.isDisposed||e.session.isDisposed)}class Gg{get ipywidgetsVersion(){return this._ipywidgetsVersion}get onIPyWidgetVersionResolved(){return this._onIPyWidgetVersionResolved.event}get onStatusChanged(){return this._onStatusChanged.event}get onRestarted(){return this._onRestarted.event}get onStarted(){return this._onStarted.event}get onDisposed(){return this._onDisposed.event}get creator(){return this._creator}get startedAtLeastOnce(){return this._startedAtLeastOnce}get info(){return this._info}get status(){return this._jupyterSessionPromise&&!this._session?"starting":this._session?.status??(this.isKernelDead?"dead":"unknown")}get disposed(){return!0===this._disposed||!0===this._session?.isDisposed}get disposing(){return!0===this._disposing}get kernelSocket(){return this._kernelSocket.asObservable()}get session(){return this._session}get restarting(){return this._restartPromise||Promise.resolve()}constructor(e,t,n,i,r,o,s,a,c,l,d){this.id=e,this.uri=t,this.resourceUri=n,this.kernelConnectionMetadata=i,this.sessionCreator=r,this.kernelSettings=o,this.appShell=s,this.startupCodeProviders=a,this._creator=c,this.workspaceMemento=l,this.experiments=d,this.disposables=[],this._onIPyWidgetVersionResolved=new Oe.EventEmitter,this._kernelSocket=new _m.ReplaySubject,this._onStatusChanged=new Oe.EventEmitter,this._onRestarted=new Oe.EventEmitter,this._onStarted=new Oe.EventEmitter,this._onDisposed=new Oe.EventEmitter,this.hookedSessionForEvents=new WeakSet,this.hooks=new Map,this.startCancellation=new Oe.CancellationTokenSource,this.startupUI=new hh(!0),this.disposables.push(this._onStatusChanged),this.disposables.push(this._onRestarted),this.disposables.push(this._onStarted),this.disposables.push(this._onDisposed),this.disposables.push(this._onIPyWidgetVersionResolved),this.disposables.push({dispose:()=>this._kernelSocket.unsubscribe()}),Pf(this.resourceUri,{kernelConnection:this.kernelConnectionMetadata,actionSource:this.creator,disableUI:this.startupUI.disableUI}).catch(ae),this.startupUI.onDidChangeDisableUI((()=>{this.startupUI.disableUI||Pf(this.resourceUri,{disableUI:!1}).catch(ae)}),this.disposables)}addHook(e,t,n,i){const r=this.hooks.get(e)||new Set;this.hooks.set(e,r),t=n?t.bind(n):t,r.add(t);const o={dispose:()=>{r.delete(t)}};return i&&i.push(o),o}async start(e){return this.startCancellation.token.isCancellationRequested&&(this.startCancellation.dispose(),this.startCancellation=new Oe.CancellationTokenSource),this.startJupyterSession(e)}async interrupt(){const e=Promise.all(Array.from(this.hooks.get("willInterrupt")||new Set).map((e=>e())));let t;kn(`Interrupt requested ${pn(this.resourceUri||this.uri)}`);try{const n=this._jupyterSessionPromise?await this._jupyterSessionPromise.catch((()=>{})):void 0;kn("Interrupt kernel execution"),n?(t=this._interruptPromise?await this._interruptPromise:await(this._interruptPromise=this.interruptExecution(n,e)),this._interruptPromise=void 0):(kn("No kernel session to interrupt"),this._interruptPromise=void 0,t=ra.Success)}finally{await Promise.all(Array.from(this.hooks.get("interruptCompleted")||new Set).map((e=>e()))).catch(ae)}if(kn(`Interrupt requested & sent for ${pn(this.uri)} in notebookEditor.`),t===ra.TimedOut){const e=gr.restartKernelAfterInterruptMessage,t=gr.restartKernelMessageYes;await this.appShell.showInformationMessage(e,{modal:!0},t)===t&&await this.restart()}}async dispose(){if(kn(`Dispose Kernel '${pn(this.uri)}' associated with '${pn(this.resourceUri)}'`),this._disposing=!0,this.disposingPromise)return this.disposingPromise;this._ignoreJupyterSessionDisposedErrors=!0,this.startCancellation.cancel(),this.disposingPromise=(async()=>{const e=[];e.push(Promise.all(Array.from(this.hooks.get("willCancel")||new Set).map((e=>e()))).then(ae).catch(ae)),this._session=this._session?this._session:this._jupyterSessionPromise?await this._jupyterSessionPromise.catch((()=>{})):void 0,this._jupyterSessionPromise=void 0,this._session&&(e.push(this._session.disposeAsync().catch(ae)),this._session=void 0),this._disposed=!0,this._onDisposed.fire(),this._onStatusChanged.fire("dead");try{await Promise.all(e)}finally{this.startCancellation.dispose(),Ie(this.disposables)}})(),await this.disposingPromise}async restart(){try{const e=Ya(this.resourceUri);kn(`Restart requested ${pn(this.uri)}`),await Promise.all(Array.from(this.hooks.get("willRestart")||new Set).map((e=>e(this._jupyterSessionPromise)))),this.startCancellation.cancel(),this.startCancellation.dispose();const t=new se;try{const n=this._jupyterSessionPromise?await this._jupyterSessionPromise.catch((()=>{})):void 0;n?(this._restartPromise||(this._restartPromise=n.restart(),this._restartPromise.finally((()=>this._restartPromise=void 0)).catch(ae)),await this._restartPromise,this.startCancellation=new Oe.CancellationTokenSource):await this.start(new hh(!1)),Dh(this.resourceUri,F.NotebookRestart,{duration:t.elapsedTime},{resourceType:e})}catch(e){Sn(`Restart failed ${pn(this.uri)}`,e),this._ignoreJupyterSessionDisposedErrors=!0;const n=this._session;throw this._session=void 0,this._jupyterSessionPromise=void 0,Dh(this.resourceUri,F.NotebookRestart,{duration:t.elapsedTime},void 0,e),await(n?.disposeAsync().catch(ae)),this._ignoreJupyterSessionDisposedErrors=!1,e}await this.initializeAfterStart(this._session),this._onRestarted.fire()}catch(e){throw Sn(`Failed to restart kernel ${pn(this.uri)}`,e),e}finally{Promise.all(Array.from(this.hooks.get("restartCompleted")||new Set).map((e=>e()))).catch(ae)}}async startJupyterSession(e=new hh(!1)){if(this._startedAtLeastOnce=!0,e.disableUI||(this.startupUI.disableUI=!1),e.onDidChangeDisableUI((()=>{!e.disableUI&&this.startupUI.disableUI&&(this.startupUI.disableUI=!1)})),this.startupUI.disableUI?this.startupUI.onDidChangeDisableUI((()=>{this.disposing||this.disposed||this.startupUI.disableUI||If(this.resourceUri,this.kernelConnectionMetadata).catch(ae)}),this,this.disposables):await If(this.resourceUri,this.kernelConnectionMetadata),this.disposing)throw new Oe.CancellationError;if(Ia.throwIfCanceled(this.startCancellation.token),!this._jupyterSessionPromise){const e=new se;if(await Pf(this.resourceUri,{kernelConnection:this.kernelConnectionMetadata,actionSource:this.creator}),this.disposing)throw new Oe.CancellationError;Ia.throwIfCanceled(this.startCancellation.token),this._jupyterSessionPromise=this.createJupyterSession().then((t=>(Dh(this.resourceUri,F.PerceivedJupyterStartupNotebook,{duration:e.elapsedTime}),t))).catch((e=>{throw xn(`Failed to create Jupyter Session in Kernel.startNotebook for ${pn(this.uri)}`),this.startCancellation.cancel(),this._jupyterSessionPromise=void 0,e}))}return this._jupyterSessionPromise.finally((()=>this.sendKernelStartedTelemetry())).catch(ae),this._jupyterSessionPromise}async interruptExecution(e,t){const n=ie(),i=new se,r=[],o=e=>{"restarting"!==e&&"autorestarting"!==e||(Cn("Kernel restarting during interrupt"),n.resolve(!0))};if(this.experiments.inExperiment(Hi.NewJupyterSession)){const t=(e,t)=>o(t);e.statusChanged.connect(t),r.push(new Oe.Disposable((()=>ce((()=>e.statusChanged.disconnect(t))))))}else e.onSessionStatusChanged(o,this,r);return e&&e.kernel&&(kn(`Interrupting kernel: ${e.kernel.name}`),await function(e,t,...n){let i;const r=setTimeout((()=>i?.(t)),e);return Promise.race([Promise.race(n).finally((()=>clearTimeout(r))),new Promise(((e,t)=>i=t))])}(this.kernelSettings.interruptTimeout,new Bg(this.kernelConnectionMetadata),e.kernel.interrupt()).catch((e=>{Cn(`Error during interrupt: ${e}`),n.resolve(!0)}))),(async()=>{try{return await Z(this.kernelSettings.interruptTimeout,ra.TimedOut,t.then((()=>ra.Success)),n.promise.then((()=>ra.Restarted)))}catch(e){if(n.completed)return ra.Restarted;throw Dh(this.resourceUri,F.NotebookInterrupt,{duration:i.elapsedTime},void 0,e),e}finally{Ie(r)}})().then((e=>(Dh(this.resourceUri,F.NotebookInterrupt,{duration:i.elapsedTime},{result:e}),e)))}async createJupyterSession(){if(this.disposing)throw new Oe.CancellationError;Ia.throwIfCanceled(this.startCancellation.token);let e=[];try{let t="";const n=this.kernelConnectionMetadata.interpreter;if(n){const e=[];e.push(`Python Path: ${pn(n.uri)}`),e.push(n.envType||""),e.push(n.envName||""),n.version&&e.push(`${n.version.major}.${n.version.minor}.${n.version.patch}`),t=` (${e.filter((e=>e)).join(", ")})`}kn(`Starting Kernel ${this.kernelConnectionMetadata.kind}, ${this.kernelConnectionMetadata.id} ${t} for '${pn(this.uri)}' (disableUI=${this.startupUI.disableUI})`),this.createProgressIndicator(e),this.isKernelDead=!1,this._onStatusChanged.fire("starting");const i=await this.sessionCreator.create({resource:this.resourceUri,ui:this.startupUI,kernelConnection:this.kernelConnectionMetadata,token:this.startCancellation.token,creator:this.creator});if(this.disposing)throw new Oe.CancellationError;if(Ia.throwIfCanceled(this.startCancellation.token),await this.initializeAfterStart(i),this.disposing)throw new Oe.CancellationError;return this.sendKernelStartedTelemetry(),this._session=i,this._onStarted.fire(),i}catch(e){if(this.startupUI.disableUI?En(`failed to create IJupyterKernelConnectionSession in kernel, UI Disabled = ${this.startupUI.disableUI}`,e):this.startCancellation.token||Ea(e)||Sn(`failed to create IJupyterKernelConnectionSession in kernel, UI Disabled = ${this.startupUI.disableUI}`,e),Ia.throwIfCanceled(this.startCancellation.token),e instanceof Fr)throw e;const t=gr.sessionStartFailedWithKernel(ls(this.kernelConnectionMetadata));throw Zi.from(t+" "+("message"in e?e.message:e.toString()),e)}finally{Ie(e)}}sendKernelStartedTelemetry(){this.uiWasDisabledWhenKernelStartupTelemetryWasLastSent&&this.uiWasDisabledWhenKernelStartupTelemetryWasLastSent===this.startupUI.disableUI||this.startTelemetrySent&&!this.startupUI.disableUI||(this.uiWasDisabledWhenKernelStartupTelemetryWasLastSent=!0===this.startupUI.disableUI,this.startTelemetrySent=!0,Dh(this.resourceUri,F.NotebookStart,void 0,{disableUI:this.startupUI.disableUI}))}createProgressIndicator(e){const t=Na.createProgressReporter(this.resourceUri,gr.connectingToKernel(ls(this.kernelConnectionMetadata)),this.startupUI.disableUI);e.push(t),this.startupUI.disableUI&&this.startupUI.onDidChangeDisableUI((()=>{this.disposing||this.disposed||this.startupUI.disableUI||t.show&&t.show()}),this,e)}async initializeAfterStart(e){if(await Promise.all(Array.from(this.hooks.get("didStart")||new Set).map((t=>t(e,this.startCancellation.token).catch(ae)))),En(`Started running kernel initialization for ${pn(this.uri)}`),e){if(!this.hookedSessionForEvents.has(e))if(this.hookedSessionForEvents.add(e),e.kernelSocket.subscribe(this._kernelSocket),e.onDidDispose((()=>{if(xn(`Kernel got disposed as a result of session.onDisposed (1) ${pn(this.resourceUri||this.uri)}`),!this._ignoreJupyterSessionDisposedErrors){kn(`Kernel got disposed as a result of session.onDisposed ${pn(this.resourceUri||this.uri)} & _ignoreJupyterSessionDisposedErrors = false.`);const t=this._session===e;this._jupyterSessionPromise=void 0,this._session=void 0,t&&(this.isKernelDead=!0,this._onStatusChanged.fire("dead"))}})),this.experiments.inExperiment(Hi.NewJupyterSession)){const t=(e,t)=>this._onStatusChanged.fire(t);e.statusChanged.connect(t),this.disposables.push(new Oe.Disposable((()=>ce((()=>e.statusChanged.disconnect(t))))))}else{const t=e=>{this._onStatusChanged.fire(e)};this.disposables.push(e.onSessionStatusChanged(t))}if(e.kernel?.registerCommTarget(C.DefaultCommTarget,ae),"connectToLiveRemoteKernel"===this.kernelConnectionMetadata.kind)this.determineVersionOfIPyWidgets(e).catch((e=>Sn("Failed to determine IPyWidget version",e))),this.gatherInternalStartupCode().then((t=>this.executeSilently(e,t,{traceErrors:!0,traceErrorsMessage:"Error executing jupyter extension internal startup code"}))).catch((e=>Sn("Failed to execute internal startup code",e)));else{await this.determineVersionOfIPyWidgets(e);const t=await this.gatherInternalStartupCode();await this.executeSilently(e,t,{traceErrors:!0,traceErrorsMessage:"Error executing jupyter extension internal startup code"}),await this.executeSilently(e,this.getUserStartupCommands(),{traceErrors:!1})}try{En("Requesting Kernel info"),this._info=await async function(e,t,n){const i=[],r={banner:"",help_links:[],implementation:"",implementation_version:"",language_info:{name:"",version:""},protocol_version:"",status:"ok"};if(!e.kernel)return;e.kernel?.info&&(i.push(e.kernel.info),e.kernel.info.then((e=>$g(n,t,e))).catch(ae));const o=e.kernel.requestKernelInfo().then((e=>e?.content));if(i.push(o),o.then((e=>$g(n,t,e))).catch(ae),"connectToLiveRemoteKernel"===t.kind){const e=function(e,t){if(ta(t))return e.get(Vg,[]).find((e=>e.id===t.id))?.info}(n,t);e?i.push(Promise.resolve(e)):i.push(Q(5e3).then((()=>r)))}const s=await Promise.race(i);return s===r?Cn("Failed to Kernel info in a timely manner, defaulting to empty info!"):En("Got Kernel info"),s}(e,this.kernelConnectionMetadata,this.workspaceMemento)}catch(e){Cn("Failed to request KernelInfo",e)}"connectToLiveRemoteKernel"!==this.kernelConnectionMetadata.kind&&(En("End running kernel initialization, now waiting for idle"),await e.waitForIdle(this.kernelSettings.launchTimeout,this.startCancellation.token),En("End running kernel initialization, session is idle"))}else En("Not running kernel initialization")}async determineVersionOfIPyWidgets(e){if(!fs(this.kernelConnectionMetadata))return this._ipywidgetsVersion,void this._onIPyWidgetVersionResolved.fire(7);const t=async()=>{const t=sd()`
        try:
            import ipywidgets as _VSCODE_ipywidgets
            print("${Hg}" + _VSCODE_ipywidgets.__version__)
            del _VSCODE_ipywidgets
        except:
            pass
        `,n=await this.executeSilently(e,[t]).catch((e=>Sn("Failed to determine version of IPyWidgets",e)));if(Array.isArray(n)){const e=n.some((e=>(e.text||"")?.toString().includes(`${Hg}8.`))),t=n.some((e=>(e.text||"")?.toString().includes(`${Hg}7.`))),i=this._ipywidgetsVersion=t?7:e?8:void 0;En(`Determined IPyWidgets Version as ${i} and event fired`),this._ipywidgetsVersion,this._onIPyWidgetVersionResolved.fire(i)}else Cn("Failed to determine IPyKernel Version",JSON.stringify(n))};if(await t(),!this._ipywidgetsVersion&&this.session?.kernel){const e=(n,i)=>{if("send"===i.direction)return;const r=i.msg;r.content&&"data"in r.content&&r.content.data&&(r.content.data[K]||"target_name"in r.content&&r.content.target_name===C.DefaultCommTarget)&&(this._ipywidgetsVersion||(t().catch(ae),this.session?.kernel&&this.session.kernel.anyMessage.disconnect(e,this)))};this.session.kernel.anyMessage.connect(e,this)}}async gatherInternalStartupCode(){const e=[],t=await Promise.all(this.startupCodeProviders.sort(((e,t)=>t.priority-e.priority)).map((e=>e.getCode(this))));for(let n of t)e.push(...n);if(fs(this.kernelConnectionMetadata)&&"connectToLiveRemoteKernel"!==this.kernelConnectionMetadata.kind){const t=un(this.resourceUri);t&&e.push(`__vsc_ipynb_file__ = "${t.replace(/\\/g,"\\\\")}"`),this.kernelSettings.enableExtendedKernelCompletions||e.push(k.DisableJedi),e.push(...(n=this.getMatplotLibInitializeCode(),n&&0!==n.length?((n=n.map((e=>`    ${e}`))).unshift("try:"),n.push("except:","    print('Failed to initialize matplotlib startup code. Matplotlib might be missing.')"),n):n))}var n;return e}getMatplotLibInitializeCode(){const e=[];if(this.kernelSettings.themeMatplotlibPlots){xn(`Initialize config for plots for ${pn(this.resourceUri||this.uri)}`);const t=k.MatplotLibInit;En(`Initialize matplotlib for ${pn(this.resourceUri||this.uri)}`),e.push(...Ee(t,{trim:!1}));const n=this.appShell.activeColorTheme.kind===Oe.ColorThemeKind.Dark;this.kernelSettings.ignoreVscodeTheme||e.push(n?"matplotlib.style.use('dark_background')":`matplotlib.rcParams.update(${C.MatplotLibDefaultParams})`)}return this.kernelSettings.generateSVGPlots&&(e.push(...Ee(k.AppendSVGFigureFormat,{trim:!1})),En("Add SVG to matplotlib figure formats")),e}getUserStartupCommands(){let e=this.kernelSettings.runStartupCommands;return Array.isArray(e)&&(e=e.join("\n")),e?Ee(e.replace(/\\n/g,"\n"),{trim:!1}):[]}async executeSilently(e,t,n){if(0!==t.join("").trim().length){if(e.kernel)return Cs(e.kernel,t.join("\n"),n);En(`Not executing startup as there is no session, code: ${t}`)}}}class Yg extends Gg{get creator(){return"3rdPartyExtension"}constructor(e,t,n,i,r,o,s,a,c){super(`3rdPartyKernel_${Kf()()}`,e,t,n,i,o,r,s,"3rdPartyExtension",a,c)}}class Qg extends Gg{get creator(){return"jupyterExtension"}constructor(e,t,n,i,r,o,s,a,c,l){super(Kf()(),t.uri,e,n,i,r,o,a,"jupyterExtension",c,l),this.notebook=t,this.controller=s}}function Xg(e){if(e.length>0){const t=e[0].data;if(t&&t.hasOwnProperty("text/plain"))return nc(t["text/plain"]);if("stream"===e[0].output_type)return nc(e[0].text)}}function Zg(e,t){return{get enableExtendedKernelCompletions(){return e.getSettings(t).enableExtendedKernelCompletions},get generateSVGPlots(){return e.getSettings(t).generateSVGPlots},get ignoreVscodeTheme(){return e.getSettings(t).ignoreVscodeTheme},get interruptTimeout(){return e.getSettings(t).jupyterInterruptTimeout},get launchTimeout(){return e.getSettings(t).jupyterLaunchTimeout},get runStartupCommands(){return e.getSettings(t).runStartupCommands},get themeMatplotlibPlots(){return e.getSettings(t).themeMatplotlibPlots}}}var ev=__webpack_require__(40273);function tv(e){if(e.hasOwnProperty("text/html")){const t=e["text/html"];"string"==typeof t&&t.includes('<iframe id="tensorboard-frame-')&&(e["text/html"]=t.replace(/new URL\((.*), window.location\)/,'new URL("http://localhost")'))}return e}const nv=new WeakMap;function iv(e){if(e.parent_header&&"msg_id"in e.parent_header)return e.parent_header.msg_id}class rv{get hasErrorOutput(){return!0===this.cellHasErrorsInOutput}get completed(){return this._completed.promise}constructor(e,t,n,i,r,o,s,a,c){this.cell=e,this.applicationService=t,this.controller=n,this.context=i,this.formatters=r,this.kernel=o,this.request=s,this._onErrorHandlingIOPubMessage=new Oe.EventEmitter,this.onErrorHandlingExecuteRequestIOPubMessage=this._onErrorHandlingIOPubMessage.event,this.outputsAreSpecificToAWidget=[],this.commIdsMappedToParentWidgetModel=new Map,this.disposables=[],this.prompts=new Set,this.ownedCommIds=new Set,this.commIdsMappedToWidgetOutputModels=new Set,this.ownedRequestMsgIds=new Set,this._completed=ie(),this.gotIdleIOPubStatus=!1,this.gotShellReply=!1,this.streamsReAttachedToExecutingCell=!1,this._completed.promise.catch(ae),this.executeRequestMessageId=c,this.ownedRequestMsgIds.add(c),Oe.workspace.onDidChangeNotebookDocument((e=>{if(!Za(e.notebook))return;const t=e.cellChanges.find((({cell:e})=>e===this.cell));t&&0===t.outputs?.length&&(this.clearLastUsedStreamOutput(),this.cellHasErrorsInOutput=!1)}),this,this.disposables),this.execution=a,this.kernel.anyMessage.connect(this.onKernelAnyMessage,this),this.kernel.iopubMessage.connect(this.onKernelIOPubMessage,this),s&&(s.onIOPub=()=>{this.cell.document.isClosed&&!this.completedExecution&&s.dispose()},s.onReply=e=>{this.cell.document.isClosed?s.dispose():this.handleReply(e)},s.onStdin=this.handleInputRequest.bind(this),s.done.finally((()=>{this.completedExecution=!0,this.endCellExecution()})).catch(ae))}dispose(){this.disposed||(this.disposed=!0,fg(this.cell,"Execution Message Handler disposed"),Ie(this.disposables),this.prompts.forEach((e=>e.dispose())),this.prompts.clear(),this.request&&this.clearLastUsedStreamOutput(),this.execution=void 0,this.kernel.anyMessage.disconnect(this.onKernelAnyMessage,this),this.kernel.iopubMessage.disconnect(this.onKernelIOPubMessage,this),this._onErrorHandlingIOPubMessage.dispose())}endCellExecution(){this.prompts.forEach((e=>e.dispose())),this.prompts.clear(),this.request&&this.clearLastUsedStreamOutput(),this.execution=void 0,this._completed.resolve()}onKernelAnyMessage(e,{direction:t,msg:n}){if(this.cell.document.isClosed)return this.endCellExecution();const i=__webpack_require__(98250);if(!this.request&&"recv"===t){const e=iv(n);i.KernelMessage.isStatusMsg(n)&&"idle"===n.content.execution_state&&e===this.executeRequestMessageId&&(this.gotIdleIOPubStatus=!0),"shell"===n.channel&&e===this.executeRequestMessageId&&(this.gotShellReply=!0);const t=i.KernelMessage.isStatusMsg(n)&&"idle"!==n.content.execution_state&&e!==this.executeRequestMessageId;"object"==typeof n.parent_header&&n.parent_header&&"msg_type"in n.parent_header&&n.parent_header.msg_type;const r=!!e&&e!==this.executeRequestMessageId&&!t,o="object"==typeof n.parent_header&&n.parent_header&&"msg_type"in n.parent_header&&"interrupt_request"===n.parent_header.msg_type,s=this.gotIdleIOPubStatus&&this.gotShellReply,a=["kernel_info_reply","execute_input","execute_reply"],c="msg_type"in n&&"string"==typeof n.msg_type&&a.includes(n.msg_type);if(!this.completedExecution&&s)return this.completedExecution=!0,this.endAbnormallyTimeout&&clearTimeout(this.endAbnormallyTimeout),this.endCellExecution();if(!this.completedExecution&&(c||r))return this.endAbnormallyTimeout&&clearTimeout(this.endAbnormallyTimeout),this.endAbnormallyTimeout=setTimeout((()=>(this.completedExecution=!0,this.endAbnormallyTimeout=void 0,this.endCellExecution())),o?1e3:100),void this.disposables.push(new Oe.Disposable((()=>{clearTimeout(this.endAbnormallyTimeout),this.endAbnormallyTimeout=void 0})))}"send"===t&&this.completedExecution&&i.KernelMessage.isCommMsgMsg(n)&&this.ownedCommIds.has(n.content.comm_id)&&this.ownedRequestMsgIds.add(n.header.msg_id)}onKernelIOPubMessage(e,t){if(this.cell.document.isClosed)return this.endCellExecution();if(t.parent_header&&"msg_id"in t.parent_header&&this.ownedRequestMsgIds.has(t.parent_header.msg_id)&&"iopub"===t.channel)try{this.handleIOPub(t)}catch(e){Sn("Failed to handle iopub message as a result of some comm message",t,e),this.completedExecution||this.cell.document.isClosed||this._onErrorHandlingIOPubMessage.fire(e)}}clearLastUsedStreamOutput(){this.lastUsedStreamOutput=void 0}createTemporaryTask(){if(this.cell.document.isClosed)return;return nv.get(this.cell.notebook)||(this.previousResultsToRestore={...this.cell.executionSummary||{}},this.temporaryExecution=dg.getOrCreate(this.cell,this.controller),this.temporaryExecution?.start(),this.previousResultsToRestore?.executionOrder&&this.execution&&(this.execution.executionOrder=this.previousResultsToRestore.executionOrder),this.temporaryExecution)}endTemporaryTask(){this.previousResultsToRestore?.executionOrder&&this.execution&&(this.execution.executionOrder=this.previousResultsToRestore.executionOrder),this.previousResultsToRestore&&this.temporaryExecution?(this.previousResultsToRestore.executionOrder&&(this.temporaryExecution.executionOrder=this.previousResultsToRestore.executionOrder),this.temporaryExecution.end(this.previousResultsToRestore.success,this.previousResultsToRestore.timing?.endTime)):this.temporaryExecution?.end(void 0),this.previousResultsToRestore=void 0,this.temporaryExecution=void 0}handleIOPub(e){this.startTime||(this.startTime=(new Date).getTime(),this.execution?.start(this.startTime),kn(`Kernel acknowledged execution of cell ${this.cell.index} @ ${this.startTime}`));const t=__webpack_require__(98250);if(t.KernelMessage.isCommOpenMsg(e))this.handleCommOpen(e);else if(t.KernelMessage.isExecuteResultMsg(e))this.handleExecuteResult(e);else if(t.KernelMessage.isExecuteInputMsg(e))this.handleExecuteInput(e);else if(t.KernelMessage.isStatusMsg(e)){const t=e;this.handleStatusMessage(t)}else t.KernelMessage.isStreamMsg(e)?this.handleStreamMessage(e):t.KernelMessage.isDisplayDataMsg(e)?this.handleDisplayData(e):t.KernelMessage.isUpdateDisplayDataMsg(e)?this.handleUpdateDisplayDataMessage(e):t.KernelMessage.isClearOutputMsg(e)?this.handleClearOutput(e):t.KernelMessage.isErrorMsg(e)?this.handleError(e):t.KernelMessage.isCommOpenMsg(e)||(t.KernelMessage.isCommMsgMsg(e)?this.handleCommMsg(e):t.KernelMessage.isCommCloseMsg(e)||Cn(`Unknown message ${e.header.msg_type} : hasData=${"data"in e.content}`));"execution_count"in e.content&&"number"==typeof e.content.execution_count&&this.execution&&(this.execution.executionOrder=e.content.execution_count)}handleCommOpen(e){this.ownedCommIds.add(e.content.comm_id);const t=e.content.data?.state||void 0;e.content.target_name===C.DefaultCommTarget&&t&&"@jupyter-widgets/output"===t._model_module&&this.commIdsMappedToWidgetOutputModels.add(e.content.comm_id)}handleCommMsg(e){const t=e.content.data;if(t&&"update"===t.method&&"object"==typeof t.state)if("msg_id"in t.state&&"string"==typeof t.state.msg_id){const n="msg_id"in e.parent_header?e.parent_header:void 0;(this.ownedRequestMsgIds.has(e.content.comm_id)||n&&this.ownedRequestMsgIds.has(n.msg_id))&&(t.state.msg_id?this.outputsAreSpecificToAWidget.push({handlingCommId:e.content.comm_id,msgIdsToSwallow:t.state.msg_id}):this.outputsAreSpecificToAWidget.length&&this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].handlingCommId===e.content.comm_id&&this.outputsAreSpecificToAWidget.pop())}else if("children"in t.state&&Array.isArray(t.state.children)&&this.ownedCommIds.has(e.content.comm_id)){const n="IPY_MODEL_";t.state.children.forEach((t=>{if("string"!=typeof t)return Cn("Came across a comm update message a child that isn't a string",t);if(!t.startsWith(n))return Cn(`Came across a comm update message a child that start start with ${n}`,t);const i=t.substring(n.length);this.ownedCommIds.add(i),this.commIdsMappedToParentWidgetModel.set(i,e.content.comm_id)}))}}clearOutputIfNecessary(e){return this.clearOutputOnNextUpdateToOutput?(fg(this.cell,"Clear cell output"),this.clearLastUsedStreamOutput(),e?.clearOutput().then(ae,ae),this.clearOutputOnNextUpdateToOutput=!1,{previousValueOfClearOutputOnNextUpdateToOutput:!0}):{previousValueOfClearOutputOnNextUpdateToOutput:!1}}addToCellData(e,t){if(e.data&&"object"==typeof e.data&&K in e.data){const t=e.data[K];if(t&&this.context.extensionMode===Oe.ExtensionMode.Test&&(t._vsc_test_cellIndex=this.cell.index),t&&"model_id"in t){const e=rv.modelIdsOwnedByCells.get(this.cell)||new Set;e.add(t.model_id),rv.modelIdsOwnedByCells.set(this.cell,e)}}const n=gg(e),i="transient"in e&&"object"==typeof e.transient&&e.transient&&"display_id"in e.transient&&"string"==typeof e.transient?.display_id?e.transient?.display_id:void 0;if(this.cell.document.isClosed)return;fg(this.cell,"Update output");const r=this.execution||this.createTemporaryTask();this.clearOutputIfNecessary(r),i&&oh.trackOutputByDisplayId(this.cell,i,n,n.items),this.clearLastUsedStreamOutput(),fg(this.cell,"Append output in addToCellData");let o=!0;const s=iv(t);if(this.outputsAreSpecificToAWidget.length&&this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].msgIdsToSwallow===s&&n.items.every((e=>this.canMimeTypeBeRenderedByWidgetManager(e))))o=!1;else if(this.outputsAreSpecificToAWidget.length&&this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].msgIdsToSwallow===s){const e=this.updateJupyterOutputWidgetWithOutput({commId:this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].handlingCommId,outputToAppend:n},r);e?.outputAdded&&(o=!1)}o&&r?.appendOutput([n]).then(ae,ae),this.endTemporaryTask()}canMimeTypeBeRenderedByWidgetManager(e){const t=e.mime;if(t==sg.stderr||t==sg.stdout||t==sg.error)return!0;if(t===K){const t=JSON.parse(Buffer.from(e.data).toString());return"string"!=typeof t.model_id||!this.commIdsMappedToWidgetOutputModels.has(t.model_id)}return!t.startsWith("application/vnd")}updateJupyterOutputWidgetWithOutput(e,t){const n=this.outputsAreSpecificToAWidget.length?this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].handlingCommId:void 0,i="commId"in e?e.commId:n;if(!i)return;const r="outputToAppend"in e?e.outputToAppend:void 0,o=this.commIdsMappedToParentWidgetModel.get(i)||i,s=this.cell.notebook.getCells().find((e=>rv.modelIdsOwnedByCells.get(e)?.has(o)));if(!s)return void Cn(`Unable to find a cell that owns the model ${o}`);const a=s.outputs.find((e=>e.items.find((e=>{if(e.mime!==K)return!1;try{return JSON.parse(Buffer.from(e.data).toString()).model_id===o}catch(e){Cn("Failed to deserialize the widget data",e)}return!1}))));if(!a)return;const c=rv.outputsOwnedByWidgetModel.get(o)||new Set,l="clearOutput"in e&&e.clearOutput||!!this.outputsAreSpecificToAWidget.length&&!0===this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].clearOutputOnNextUpdateToOutput;this.outputsAreSpecificToAWidget.length&&(this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].clearOutputOnNextUpdateToOutput=!1);const d=s.outputs.slice().filter((e=>!l||!c.has(e.id))),u=d.slice(0,d.indexOf(a)+1),p=d.slice(d.indexOf(a)+1);rv.outputsOwnedByWidgetModel.set(o,c),r&&c.add(r.id);const h=r?u.concat(r).concat(p):u.concat(p);return 0===p.length&&r?t?.appendOutput(r,s).then(ae,ae):l&&!r&&0===p.length||t?.replaceOutput(h,s).then(ae,ae),{outputAdded:!0}}async handleInputRequest(e){if(e.content&&"prompt"in e.content){const t=new Oe.CancellationTokenSource;this.prompts.add(t);const n=null!==e.content.password&&e.content.password;await this.applicationService.showInputBox({prompt:e.content.prompt?e.content.prompt.toString():"",ignoreFocusOut:!0,password:n},t.token).then((e=>{this.kernel.sendInputReply({value:e||"",status:"ok"})}),ae),this.prompts.delete(t)}}handleExecuteResult(e){this.addToCellData({output_type:"execute_result",data:e.content.data,metadata:e.content.metadata,transient:e.content.transient,execution_count:e.content.execution_count},e)}handleExecuteReply(e){const t=e.content;t.payload&&t.payload.forEach((n=>{n.source&&"set_next_input"===n.source&&"text"in n&&"replace"in n&&this.handleSetNextInput(n),n.data&&n.data.hasOwnProperty("text/plain")&&this.addToCellData({output_type:"stream",text:n.data["text/plain"].toString(),name:"stdout",metadata:{},execution_count:t.execution_count},e)}))}handleSetNextInput(e){const t=new Oe.WorkspaceEdit;if(e.replace)t.replace(this.cell.document.uri,new Oe.Range(this.cell.document.lineAt(0).range.start,this.cell.document.lineAt(this.cell.document.lineCount-1).range.end),e.text);else{fg(this.cell,"Create new cell after current");const n=new Oe.NotebookCellData(Oe.NotebookCellKind.Code,e.text,this.cell.document.languageId);n.outputs=[],n.metadata={};const i=Oe.NotebookEdit.insertCells(this.cell.index+1,[n]);t.set(this.cell.notebook.uri,[i])}Oe.workspace.applyEdit(t).then(ae,ae)}handleExecuteInput(e){e.content.execution_count&&this.execution&&(this.execution.executionOrder=e.content.execution_count)}handleStatusMessage(e){fg(this.cell,`Kernel switching to ${e.content.execution_state}`)}handleStreamMessage(e){if(iv(e)&&this.outputsAreSpecificToAWidget.length&&this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].msgIdsToSwallow==iv(e))return;fg(this.cell,`Update streamed output, new output '${e.content.text.substring(0,100)}'`);const t=this.execution||this.createTemporaryTask(),n="stdout"===e.content.name?Oe.NotebookCellOutputItem.stdout("").mime:Oe.NotebookCellOutputItem.stderr("").mime;this.request||this.streamsReAttachedToExecutingCell||this.lastUsedStreamOutput||this.cell.outputs.length&&this.cell.outputs[this.cell.outputs.length-1].items.length>=1&&this.cell.outputs[this.cell.outputs.length-1].items.every((e=>e.mime===n))&&(this.lastUsedStreamOutput={output:this.cell.outputs[0],stream:e.content.name}),this.streamsReAttachedToExecutingCell=!0;const{previousValueOfClearOutputOnNextUpdateToOutput:i}=this.clearOutputIfNecessary(t);if(this.lastUsedStreamOutput?.stream===e.content.name){const n=gg({output_type:"stream",name:e.content.name,text:e.content.text});fg(this.cell,`Append output items '${e.content.text.substring(0,100)}`),t?.appendOutputItems(n.items,this.lastUsedStreamOutput.output).then(ae,ae)}else if(i){const n=nc(e.content.text),i=gg({output_type:"stream",name:e.content.name,text:n});this.lastUsedStreamOutput={output:i,stream:e.content.name},fg(this.cell,`Replace output with '${n.substring(0,100)}'`),t?.replaceOutput([i]).then(ae,ae)}else{const n=function(e){for(e=e.replace(/\r+\n/gm,"\n");e.search(/\r[^$]/g)>-1;){var t=e.match(/^(.*)\r+/m)[1],n=e.match(/\r+(.*)$/m)[1];n+=t.slice(n.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,n)}return e}(function(e){let t=e;do{t=(e=t).replace(/[^\n]\x08/gm,"")}while(t.length<e.length);return e}(nc(e.content.text))),i=gg({output_type:"stream",name:e.content.name,text:n});this.lastUsedStreamOutput={output:i,stream:e.content.name},fg(this.cell,`Append new output '${n.substring(0,100)}'`),t?.appendOutput([i]).then(ae,ae)}this.endTemporaryTask()}handleDisplayData(e){const t={output_type:"display_data",data:tv(e.content.data),metadata:e.content.metadata,transient:e.content.transient};this.addToCellData(t,e)}handleClearOutput(e){if(this.outputsAreSpecificToAWidget.length&&this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].msgIdsToSwallow===iv(e))if(e.content.wait)this.outputsAreSpecificToAWidget.length&&(this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].clearOutputOnNextUpdateToOutput=!0);else{const e=this.execution||this.createTemporaryTask();this.updateJupyterOutputWidgetWithOutput({clearOutput:!0},e),this.endTemporaryTask()}else if(e.content.wait)this.clearOutputOnNextUpdateToOutput=!0;else{const e=this.execution||this.createTemporaryTask();this.clearLastUsedStreamOutput(),e?.clearOutput().then(ae,ae),this.endTemporaryTask()}}handleError(e){let t=e.content.traceback;xn(`Traceback for error ${t}`),this.formatters.forEach((e=>{t=e.format(this.cell,t)})),xn(`Traceback for error after formatting ${t}`);const n={output_type:"error",ename:e.content.ename,evalue:e.content.evalue,traceback:t};this.addToCellData(n,e),this.cellHasErrorsInOutput=!0}handleReply(e){__webpack_require__(98250).KernelMessage.isExecuteReplyMsg(e)&&(this.handleExecuteReply(e),"execution_count"in e.content&&"number"==typeof e.content.execution_count&&this.execution&&(this.execution.executionOrder=e.content.execution_count))}handleUpdateDisplayDataMessage(e){const t=e.content.transient.display_id;if(!t)return void Cn("Update display data message received, but no display id",e.content);const n=oh.getMappedOutput(this.cell.notebook,t);if(!n)return void Cn("Update display data message received, but no output found to update",e.content);if(n.cell.document.isClosed)return void Cn("Update display data message received, but output cell is closed",e.content);const i=gg({...Eg(new Oe.NotebookCellOutput(n.outputItems,n.outputContainer.metadata)),data:e.content.data,metadata:e.content.metadata});if(0===n.outputItems.length&&0===i.items.length)return void En("Update display data message received, but no output to update",e.content);let r=!1;if(n.outputItems.length===i.items.length){let t=!0;if(cg()(n.outputContainer.metadata||{},i.metadata||{})||(r=!0,t=!1),t)for(let e=0;e<n.outputItems.length;e++)if(!cg()(n.outputItems[e],i.items[e])){t=!1;break}if(t)return void En("Update display data message received, but no output to update (data is the same)",e.content)}const o=this.execution||this.createTemporaryTask();if(fg(this.cell,`Replace output items in display data ${i.items.length}`),r){const e=n.cell.outputs.map((e=>{const n=Eg(e);return"display_data"===n.output_type&&"transient"in n&&n.transient&&"object"==typeof n.transient&&"display_id"in n.transient&&"string"==typeof n.transient.display_id&&n.transient.display_id===t?i:e}));o?.replaceOutput(e,n.cell).then(ae,ae),oh.trackOutputByDisplayId(n.cell,t,i,i.items)}else o?.replaceOutputItems(i.items,n.outputContainer).then(ae,ae),oh.trackOutputByDisplayId(n.cell,t,n.outputContainer,i.items);this.endTemporaryTask()}}rv.modelIdsOwnedByCells=new WeakMap,rv.outputsOwnedByWidgetModel=new Map,function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([ye()],rv.prototype,"handleReply",null);class ov{constructor(e,t){this.controller=e,this.requestListener=t}create(e,t,n,i){return sv.fromCell(e,t,n,this.controller,this.requestListener,i)}}class sv{get result(){return this._result.promise}get preExecute(){return this._preExecuteEmitter.event}constructor(e,t,n,i,r,o){if(this.cell=e,this.codeOverride=t,this.kernelConnection=n,this.controller=i,this.requestListener=r,this.resumeExecution=o,this._result=ie(),this.cancelHandled=!1,this.disposables=[],this._preExecuteEmitter=new Oe.EventEmitter,Oe.workspace.onDidCloseTextDocument((e=>{if(e===this.cell.document){En(`Disposing request as the cell was deleted ${pn(this.cell.notebook.uri)}`);try{this.request?.dispose()}catch(e){Sn(`Error during cell execution dispose: ${e}`)}this.started&&!this._completed&&this.completedDueToCancellation()}}),this,this.disposables),hg.setCellState(e,Oe.NotebookCellExecutionState.Idle),this.canExecuteCell())this.execution=dg.getOrCreate(e,this.controller,!o?.msg_id),hg.setCellState(e,Oe.NotebookCellExecutionState.Pending);else{const t=dg.get(e);t&&(t.start(),t.end(void 0))}}static fromCell(e,t,n,i,r,o){return new sv(e,t,n,i,r,o)}async start(e){if(this.session=e,this.resumeExecution?.msg_id)return this.resume(e,this.resumeExecution);if(this.cancelHandled)fg(this.cell,"Not starting as it was cancelled");else{if(fg(this.cell,"Start execution"),xn(`Cell Exec contents ${this.cell.document.getText().substring(0,50)}...`),!this.canExecuteCell())return this.execution?.end(void 0),this.execution=void 0,void this._result.resolve();if("remoteJupyter"===e.kind&&"unknown"===e.status&&(!e.kernel||e.kernel.isDisposed||e.isDisposed))return this.execution?.start(),this.execution?.clearOutput().then(ae,ae),void this.completedWithErrors(new Ur);if(this.started)return fg(this.cell,"Cell has already been started yet CellExecution.Start invoked again"),Sn(`Cell has already been started yet CellExecution.Start invoked again ${this.cell.index}`),this.result;this.started=!0,nv.set(this.cell.notebook,this.execution),hg.setCellState(this.cell,Oe.NotebookCellExecutionState.Executing),this.execute(this.codeOverride||this.cell.document.getText().replace(/\r\n/g,"\n"),e).catch((e=>this.completedWithErrors(e))).catch(ae)}}async resume(e,t){if(this.cancelHandled)fg(this.cell,"Not resuming as it was cancelled");else{if(!e.kernel)throw new Error("Kernel not available to resume execution");if(fg(this.cell,"Start resuming execution"),xn(`Cell Exec (resuming) contents ${this.cell.document.getText().substring(0,50)}...`),!this.canExecuteCell())return this.execution?.end(void 0),this.execution=void 0,void this._result.resolve();if(this.started)return Sn(`Cell has already been started yet CellExecution.resume invoked again ${this.cell.index}`),this.result;this.started=!0,nv.set(this.cell.notebook,this.execution),this.execution?.start(t.startTime),t.executionCount&&this.execution&&(this.execution.executionOrder=t.executionCount),hg.setCellState(this.cell,Oe.NotebookCellExecutionState.Executing),this.cellExecutionHandler=this.requestListener.registerListenerForResumingExecution(this.cell,{kernel:e.kernel,cellExecution:this.execution,msg_id:t.msg_id}),this.cellExecutionHandler.onErrorHandlingExecuteRequestIOPubMessage((e=>{Sn(`Cell (index = ${this.cell.index}) execution completed with errors (2).`,e),this.completedWithErrors(e.error)}),this,this.disposables),this.cellExecutionHandler.completed.finally((()=>this.completedSuccessfully())).catch(ae)}}async cancel(e=!1){if(!this.cancelHandled){if(this.cancelRequested=!0,this.started&&!e&&this.execution?.started)return fg(this.cell,"Cell is already running, waiting for it to finish or kernel to start"),void await this.result;this.cancelHandled||this._completed||(fg(this.cell,"Execution cancelled"),this.cancelHandled=!0,this.completedDueToCancellation(),this.dispose())}}dispose(){this.disposed||(this.disposed=!0,fg(this.cell,"Execution disposed"),Ie(this.disposables))}completedWithErrors(e){if(this.cancelHandled)return;let t,n;var i;if(this.disposed||this.cancelRequested?Cn(`Cell completed with errors (${this.disposed?"disposed":"cancelled"})`):Cn("Cell completed with errors",e),fg(this.cell,"Completed with errors"),fg(this.cell,"Update with error state & output"),e instanceof Xi||!e.message?.includes("Canceled future for execute_request message before replies were done")||!this.session||"dead"!==(i=this.session).status&&("terminating"!==i.status||i.isDisposed)&&(i.isDisposed||"unknown"!=i.status&&"unknown"!=i.kernel?.status||!i.kernel?.isDisposed&&!i.isDisposed)||(e=new Ur),e instanceof Xi){const n=Br(Oe.workspace.workspaceFolders||[],e,ls(this.kernelConnection),this.kernelConnection.interpreter?.sysPrefix);t=n?.message}else t=e.message||e.name||e.stack;n=zr(t||""),n&&this.execution?.appendOutput(n).then(ae,ae),this.endCellTask("failed"),fg(this.cell,"Completed with errors, & resolving"),this._result.resolve(zs.Error)}get isEmptyCodeCell(){return 0===this.cell.document.getText().trim().length}completedSuccessfully(e){fg(this.cell,"Completed successfully");let t=this.isEmptyCodeCell?zs.Idle:zs.Success,n="success";this.cellExecutionHandler?.hasErrorOutput&&(n="failed",t=zs.Error),this.endCellTask(n,e),fg(this.cell,`Completed successfully & resolving with status = ${n}`),this._result.resolve(t)}endCellTask(e,t=(new Date).getTime()){if(!this._completed){if(this._completed=!0,this.isEmptyCodeCell)this.execution&&(this.execution.executionOrder=void 0),this.execution?.end(void 0);else if("success"===e||"failed"===e)this.endTime=t,this.execution?.end("success"===e,this.endTime);else{try{this.request?.dispose()}catch{}this.execution?.end(void 0)}nv.get(this.cell.notebook)===this.execution&&nv.set(this.cell.notebook,void 0),hg.setCellState(this.cell,Oe.NotebookCellExecutionState.Idle),this.execution=void 0}}completedDueToCancellation(){fg(this.cell,"Completed due to cancellation"),this.endCellTask("cancelled"),fg(this.cell,"Cell cancelled & resolving"),this._result.resolve(zs.Idle)}canExecuteCell(){return"raw"!==this.cell.document.languageId&&!this.cell.document.isClosed}async execute(e,t){if(!t.kernel)throw new Error("No kernel available to execute code");if(fg(this.cell,"Send code for execution"),0===e.trim().length||this.cell.document.isClosed)return 0===e.trim().length&&(this.execution?.start(this.resumeExecution?.startTime),this.execution?.clearOutput()?.then(ae,ae)),fg(this.cell,"Empty cell execution"),this.completedSuccessfully();const n={cellId:this.cell.document.uri.toString(),...this.cell.metadata?.custom?.metadata||{}},i=t.kernel;try{this._preExecuteEmitter.fire(this.cell),En(`Execution Request Sent to Kernel for cell ${this.cell.index}`),this.request=i.requestExecute({code:e,silent:!1,stop_on_error:!1,allow_stdin:!0,store_history:!0},!1,n)}catch(e){return Sn(`Cell execution failed without request, for cell Index ${this.cell.index}`,e),this.completedWithErrors(e)}this.cellExecutionHandler=this.requestListener.registerListenerForExecution(this.cell,{kernel:i,cellExecution:this.execution,request:this.request}),this.cellExecutionHandler.onErrorHandlingExecuteRequestIOPubMessage((e=>{Sn(`Cell (index = ${this.cell.index}) execution completed with errors (2).`,e),this.completedWithErrors(e.error)}),this,this.disposables);try{fg(this.cell,"Wait for jupyter execution"),await this.request.done;const e=(new Date).getTime();fg(this.cell,"Jupyter execution completed"),this.completedSuccessfully(e),fg(this.cell,"Executed successfully in executeCell")}catch(e){if(this.cancelHandled)return;this.disposed||this.cancelRequested||Sn("Error in waiting for cell to complete",e),fg(this.cell,"Some other execution error"),e&&e instanceof Error&&Ea(e,!0)?this.completedWithErrors({message:e.message}):this.completedWithErrors(e)}}}class av{constructor(e,t,n,i,r){this.appShell=e,this.controller=t,this.context=n,this.formatters=i,this.notebook=r,this.disposables=[],this.messageHandlers=new WeakMap,Oe.workspace.onDidChangeNotebookDocument((e=>{e.notebook===this.notebook&&e.contentChanges.forEach((e=>e.removedCells.forEach((e=>this.messageHandlers.get(e)?.dispose()))))}),this,this.disposables)}dispose(){Ie(this.disposables),this.notebook&&this.notebook.getCells().forEach((e=>this.messageHandlers.get(e)?.dispose()))}registerListenerForExecution(e,t){this.messageHandlers.get(e)?.dispose();const n=new rv(e,this.appShell,this.controller,this.context,this.formatters,t.kernel,t.request,t.cellExecution,t.request.msg.header.msg_id);return this.messageHandlers.set(e,n),n}registerListenerForResumingExecution(e,t){this.messageHandlers.get(e)?.dispose();const n=new rv(e,this.appShell,this.controller,this.context,this.formatters,t.kernel,void 0,t.cellExecution,t.msg_id);return this.messageHandlers.set(e,n),n}}class cv{get isEmpty(){return 0===this.queueOfCellsToExecute.length}get failed(){return this.cancelledOrCompletedWithErrors}get queue(){return this.queueOfCellsToExecute.map((e=>e.cell))}constructor(e,t,n,i){this.session=e,this.executionFactory=t,this.metadata=n,this.resourceUri=i,this.queueOfCellsToExecute=[],this.cancelledOrCompletedWithErrors=!1,this.startedRunningCells=!1,this._onPreExecute=new Oe.EventEmitter,this._onPostExecute=new Oe.EventEmitter,this.disposables=[]}dispose(){this.disposables.forEach((e=>e.dispose())),this.lastCellExecution?.dispose()}get onPreExecute(){return this._onPreExecute.event}get onPostExecute(){return this._onPostExecute.event}queueCell(e,t){if(this.queueOfCellsToExecute.find((t=>t.cell===e)))return void fg(e,"Use existing cell execution");const n=this.executionFactory.create(e,t,this.metadata);this.disposables.push(n),n.preExecute((e=>this._onPreExecute.fire(e)),this,this.disposables),this.queueOfCellsToExecute.push(n),fg(e,"User queued cell for execution"),this.startExecutingCells()}resumeCell(e,t){if(this.queueOfCellsToExecute.find((t=>t.cell===e)))return void fg(e,"Use existing cell execution");const n=this.executionFactory.create(e,"",this.metadata,t);this.disposables.push(n),this.queueOfCellsToExecute.push(n),fg(e,"User queued cell for execution"),this.startExecutingCells()}async cancel(e){this.cancelledOrCompletedWithErrors=!0,En("Cancel pending cells"),await Promise.all(this.queueOfCellsToExecute.map((t=>t.cancel(e)))),this.lastCellExecution?.dispose(),this.queueOfCellsToExecute.splice(0,this.queueOfCellsToExecute.length)}async waitForCompletion(e){const t=Array.isArray(e)&&e.length>0?this.queueOfCellsToExecute.filter((t=>e.includes(t.cell))):this.queueOfCellsToExecute;return Promise.all(t.map((e=>e.result)))}startExecutingCells(){this.startedRunningCells||this.start().catch(ae),this.startedRunningCells=!0}async start(){try{await this.executeQueuedCells()}catch(e){Sn("Failed to execute cells in CellExecutionQueue",e),this.cancelledOrCompletedWithErrors=!0,await this.cancel()}}async executeQueuedCells(){let e;const t=await this.session;for(this.queueOfCellsToExecute.forEach((e=>fg(e.cell,"Ready to execute")));this.queueOfCellsToExecute.length;){this.lastCellExecution?.dispose();const n=this.queueOfCellsToExecute[0];let i;this.lastCellExecution=n,fg(n.cell,"Before Execute individual cell");try{n.cell.notebook.isClosed?e=!0:this.cancelledOrCompletedWithErrors||(await n.start(t),i=await n.result)}finally{fg(n.cell,`After Execute individual cell ${i}`);const e=this.queueOfCellsToExecute.indexOf(n);e>=0&&this.queueOfCellsToExecute.splice(e,1),this._onPostExecute.fire(n.cell)}if(e||this.cancelledOrCompletedWithErrors||i===zs.Error){this.cancelledOrCompletedWithErrors=!0;const t=[];this.cancelledOrCompletedWithErrors&&t.push("cancellation or failure in execution"),e&&t.push("Notebook being closed"),"number"==typeof i&&i===zs.Error&&t.push("failure in cell execution"),0===t.length&&t.push("an unknown reason"),Cn(`Cancel all remaining cells due to ${t.join(" or ")}`),await this.cancel();break}if("dead"===t.status||"terminating"===t.status){this.cancelledOrCompletedWithErrors=!0,Cn("Cancel all remaining cells due to dead kernel"),await this.cancel();break}}}}class lv{get executionCount(){return this._visibleExecutionCount}constructor(e,t,n,i,r){this.kernel=e,this.notebook=r,this.disposables=[],this._visibleExecutionCount=0,this._onPreExecute=new Oe.EventEmitter,this.onPreExecute=this._onPreExecute.event,this._onPostExecute=new Oe.EventEmitter,this.onPostExecute=this._onPostExecute.event,this.documentExecutions=new WeakMap;const o=new av(t,e.controller,n,i,r);this.disposables.push(o),this.executionFactory=new ov(e.controller,o),Oe.notebooks.onDidChangeNotebookCellExecutionState((t=>{t.cell.notebook===e.notebook&&t.state===Oe.NotebookCellExecutionState.Idle&&t.cell.executionSummary?.executionOrder&&(this._visibleExecutionCount=Math.max(this._visibleExecutionCount,t.cell.executionSummary.executionOrder))})),e.onRestarted((()=>this._visibleExecutionCount=0),this,this.disposables),e.onStarted((()=>this._visibleExecutionCount=0),this,this.disposables),e.addHook("willInterrupt",this.onWillInterrupt,this,this.disposables),e.addHook("willCancel",this.onWillCancel,this,this.disposables),e.addHook("willRestart",(e=>this.onWillRestart(e)),this,this.disposables),this.disposables.push(this._onPreExecute)}get pendingCells(){return this.documentExecutions.get(this.notebook)?.queue||[]}async resumeCellExecution(e,t){if(fg(e,`NotebookKernelExecution.resumeCellExecution (start), ${pn(e.notebook.uri)}`),e.kind==ev.NotebookCellKind.Markup)return zs.Success;await If(this.kernel.resourceUri,this.kernel.kernelConnectionMetadata),Dh(this.kernel.resourceUri,F.ResumeCellExecution);const n=this.kernel.start(new hh(!1)),i=this.getOrCreateCellExecutionQueue(e.notebook,n);i.resumeCell(e,t);const r=await i.waitForCompletion([e]);return fg(e,`NotebookKernelExecution.resumeCellExecution (completed), ${pn(e.notebook.uri)}`),En(`Cell ${e.index} executed with state ${r[0]}`),r[0]}async executeCell(e,t){if(fg(e,`NotebookKernelExecution.executeCell (1), ${pn(e.notebook.uri)}`),e.kind==ev.NotebookCellKind.Markup)return zs.Success;fg(e,`NotebookKernelExecution.executeCell, ${pn(e.notebook.uri)}`),await If(this.kernel.resourceUri,this.kernel.kernelConnectionMetadata),Dh(this.kernel.resourceUri,F.ExecuteCell);const n=this.kernel.start(new hh(!1));await this.kernel.restarting,fg(e,`NotebookKernelExecution.executeCell (2), ${pn(e.notebook.uri)}`);const i=this.getOrCreateCellExecutionQueue(e.notebook,n);i.queueCell(e,t);const r=await i.waitForCompletion([e]);return fg(e,`NotebookKernelExecution.executeCell completed (3), ${pn(e.notebook.uri)}`),En(`Cell ${e.index} executed with state ${r[0]}`),r[0]}executeHidden(e){return this.kernel.start().then((t=>t.kernel?Cs(t.kernel,e):Promise.reject(new Ur)))}async onWillInterrupt(){const e=this.documentExecutions.get(this.notebook);(e||"connectToLiveRemoteKernel"===this.kernel.kernelConnectionMetadata.kind)&&(kn("Interrupt kernel execution"),e&&(await e.cancel(),await e.waitForCompletion()))}async onWillCancel(){const e=this.documentExecutions.get(this.notebook);e&&await e.cancel(!0)}async onWillRestart(e){const t=this.documentExecutions.get(this.notebook),n=e?await e.catch((()=>{})):void 0,i=t?t.cancel(!0).then((()=>t.waitForCompletion())):Promise.resolve();n||(kn("No kernel session to interrupt"),await i)}getOrCreateCellExecutionQueue(e,t){const n=this.documentExecutions.get(e);if(n&&!n.isEmpty&&!n.failed)return n;const i=new cv(t,this.executionFactory,this.kernel.kernelConnectionMetadata,this.kernel.resourceUri);return this.disposables.push(i),Oe.workspace.onDidCloseNotebookDocument((async t=>{t===e&&(En(`Cancel executions after closing notebook ${pn(t.uri)}`),i.failed&&i.isEmpty||await i.cancel(!0))}),this,this.disposables),i.onPreExecute((e=>this._onPreExecute.fire(e)),this,this.disposables),i.onPostExecute((e=>this._onPostExecute.fire(e)),this,this.disposables),this.documentExecutions.set(e,i),i}}var dv=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},uv=function(e,t){return function(n,i){t(n,i,e)}};let pv=class extends qg{constructor(e,t,n,i,r,o,s,a,c,l,d,u){super(e,t,o),this.sessionCreator=n,this.configService=i,this.appShell=r,this.context=s,this.formatters=c,this.startupCodeProviders=l,this.workspaceStorage=d,this.experiments=u,t.push(a.onDidRemove(this.handleServerRemoval.bind(this)))}getOrCreate(e,t){const n=this.getInternal(e);if(n&&n.options.metadata.id===t.metadata.id)return n.kernel;this.disposeOldKernel(e);const i=e.notebookType===d?t.resourceUri:e.uri,r=Zg(this.configService,i),o=e.uri.path.endsWith(".interactive")||t.resourceUri?.path.endsWith(".interactive")?d:l,s=new Qg(i,e,t.metadata,this.sessionCreator,r,this.appShell,t.controller,this.startupCodeProviders.getProviders(o),this.workspaceStorage,this.experiments);return s.onRestarted((()=>this._onDidRestartKernel.fire(s)),this,this.disposables),s.onDisposed((()=>{this._onDidDisposeKernel.fire(s)}),this,this.disposables),s.onStarted((()=>this._onDidStartKernel.fire(s)),this,this.disposables),s.onStatusChanged((e=>this._onKernelStatusChanged.fire({kernel:s,status:e})),this,this.disposables),this.executions.set(s,new lv(s,this.appShell,this.context,this.formatters,e)),this.asyncDisposables.push(s),this.storeKernel(e,t,s),this.deleteMappingIfKernelIsDisposed(s),s}};pv=dv([Kn(),uv(0,zn(Bi)),uv(1,zn(Ri)),uv(2,zn(sa)),uv(3,zn(ji)),uv(4,zn(Jn)),uv(5,zn(oi)),uv(6,zn(Ui)),uv(7,zn(vi)),uv(8,Ug(da)),uv(9,zn(ua)),uv(10,zn(Oi)),uv(10,Nc(Ni)),uv(11,zn(zi))],pv);let hv=class extends Kg{constructor(e,t,n,i,r,o,s,a,c){super(e,t,o),this.sessionCreator=n,this.configService=i,this.appShell=r,this.startupCodeProviders=s,this.workspaceStorage=a,this.experiments=c}getOrCreate(e,t){const n=this.getInternal(e);if(n&&n.options.metadata.id===t.metadata.id)return n.kernel;this.disposeOldKernel(e);const i=e,r=Zg(this.configService,i),o=i.path.endsWith(".interactive")?d:l,s=new Yg(e,i,t.metadata,this.sessionCreator,this.appShell,r,this.startupCodeProviders.getProviders(o),this.workspaceStorage,this.experiments);return s.onRestarted((()=>this._onDidRestartKernel.fire(s)),this,this.disposables),s.onDisposed((()=>{this._onDidDisposeKernel.fire(s)}),this,this.disposables),s.onStarted((()=>this._onDidStartKernel.fire(s)),this,this.disposables),s.onStatusChanged((e=>this._onKernelStatusChanged.fire({kernel:s,status:e})),this,this.disposables),this.asyncDisposables.push(s),this.storeKernel(e,t,s),this.deleteMappingIfKernelIsDisposed(e,s),s}};hv=dv([Kn(),uv(0,zn(Bi)),uv(1,zn(Ri)),uv(2,zn(sa)),uv(3,zn(ji)),uv(4,zn(Jn)),uv(5,zn(oi)),uv(6,zn(ua)),uv(7,zn(Oi)),uv(7,Nc(Ni)),uv(8,zn(zi))],hv);var fv=function(e,t){return function(n,i){t(n,i,e)}};let mv=class{constructor(e,t,n,i){this.extensionChecker=t,this.interpreterService=n,this.kernelFinder=i,this.refreshedOnceBefore=!1,this.disposables=[],e.push(this)}dispose(){Ie(this.disposables)}activate(){this.extensionChecker.isPythonExtensionInstalled?this.startRefreshWithPython():(this.startRefreshWithoutPython(),this.extensionChecker.onPythonExtensionInstallationStatusChanged((()=>{this.extensionChecker.isPythonExtensionInstalled&&this.startRefreshWithPython()}),this,this.disposables))}startRefreshWithoutPython(){if(this.refreshedOnceBefore)return;this.refreshedOnceBefore=!0;const e=()=>{const e=Date.now().toString();kn(`Start refreshing Kernel Picker (${e})`);const t=Oe.notebooks.createNotebookControllerDetectionTask(l),n=Oe.notebooks.createNotebookControllerDetectionTask(d);this.disposables.push(t),this.disposables.push(n),this.kernelFinder.onDidChangeStatus((()=>{"idle"===this.kernelFinder.status&&(kn(`End refreshing Kernel Picker (${e})`),t.dispose(),n.dispose())}),this,this.disposables)};if("discovering"===this.kernelFinder.status)return e();this.kernelFinder.onDidChangeStatus((()=>{"discovering"===this.kernelFinder.status&&e()}),this,this.disposables)}startRefreshWithPython(){if(this.refreshedOnceBefore)return;this.refreshedOnceBefore=!0;let e,t=!1;Oe.window.onDidChangeActiveNotebookEditor((e=>{!t&&e&&Za(e.notebook)&&(t=!0,kn("Start refreshing Interpreter Kernel Picker"),this.interpreterService.refreshInterpreters().catch(ae))}),this,this.disposables),Oe.workspace.onDidOpenNotebookDocument((e=>{!t&&Za(e)&&(t=!0,kn("Start refreshing Interpreter Kernel Picker"),this.interpreterService.refreshInterpreters().catch(ae))}),this,this.disposables);let n="";const i=()=>(e&&!e.isDisposed||(n=Date.now().toString(),kn(`Start refreshing Kernel Picker (${n})`),e=new dc(Oe.notebooks.createNotebookControllerDetectionTask(l),Oe.notebooks.createNotebookControllerDetectionTask(d)),this.disposables.push(e)),e);"idle"===this.kernelFinder.status?(kn(`End refreshing Kernel Picker (${n})`),e?.dispose()):i(),this.kernelFinder.onDidChangeStatus((()=>{"idle"===this.kernelFinder.status?(kn(`End refreshing Kernel Picker (${n})`),e?.dispose()):i()}),this,this.disposables)}};mv=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),fv(0,zn(Ri)),fv(1,zn(Ao)),fv(2,zn(ka)),fv(3,zn(la))],mv);let gv=class{constructor(){this.providers=new Map}getProviders(e){return(this.providers.get(e)||[]).slice()}register(e,t){this.providers.set(t,this.providers.get(t)||[]),this.providers.get(t).push(e)}};gv=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],gv);var vv=function(e,t){return function(n,i){t(n,i,e)}};let yv=class{constructor(e,t){this.kernelProvider=e,this.disposables=t}activate(){this.kernelProvider.onDidCreateKernel((e=>this.addOnStartHooks(e)),this,this.disposables)}addOnStartHooks(e){e.addHook("didStart",(async t=>{t&&await async function(e,t,n){if(n.interpreter&&fs(n)&&e.kernel&&"dead"!==e.kernel.status&&"terminating"!==e.kernel.status&&("startUsingLocalKernelSpec"===n.kind||"startUsingPythonInterpreter"===n.kind)){try{En("Begin sendTelemetryForPythonKernelExecutable");const i=await Cs(e.kernel,"import sys as _VSCODE_sys\nprint(_VSCODE_sys.executable); del _VSCODE_sys");if(0===i.length)return;const r=i[0];if("stdout"!==r.name&&"stream"!==r.output_type)return;const o=nc(r.text).trim().toLowerCase(),s=Do(n.interpreter.uri,Oe.Uri.file(o));await Pf(t,{interpreterMatchesKernel:s})}catch(e){Sn("Failed to compare interpreters",e)}En("End sendTelemetryForPythonKernelExecutable")}}(t,e.resourceUri,e.kernelConnectionMetadata)}),this,this.disposables)}};yv=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),vv(0,zn(na)),vv(1,zn(Ri))],yv);var bv=function(e,t){return function(n,i){t(n,i,e)}};let wv=class{constructor(e,t){this.kernelProvider=e,this.disposables=[],this.restartProgress=new WeakMap,this.interruptProgress=new WeakMap,t.push(this)}dispose(){Ie(this.disposables)}activate(){this.kernelProvider.onDidCreateKernel(this.onDidCreateKernel,this,this.disposables),this.kernelProvider.onDidDisposeKernel((e=>{this.restartProgress.get(e)?.dispose(),this.interruptProgress.get(e)?.dispose()}),this,this.disposables)}onDidCreateKernel(e){e.addHook("willRestart",(async()=>{this.restartProgress.get(e)?.dispose();const t=Na.createProgressReporter(e.resourceUri,gr.restartingKernelStatus(`: ${ls(e.kernelConnectionMetadata)}`));this.restartProgress.set(e,t)}),this,this.disposables),e.addHook("restartCompleted",(async()=>{this.restartProgress.get(e)?.dispose(),this.interruptProgress.get(e)?.dispose()}),this,this.disposables),e.addHook("willInterrupt",(async()=>{const t=Na.createProgressReporter(e.resourceUri,gr.interruptKernelStatus);this.interruptProgress.set(e,t)}),this,this.disposables),e.addHook("interruptCompleted",(async()=>this.interruptProgress.get(e)?.dispose()),this,this.disposables)}};wv=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),bv(0,zn(na)),bv(1,zn(Ri))],wv);let _v=class{constructor(e){this.disposables=e}activate(){try{this.disposables.push(Oe.workspace.registerPortAttributesProvider({},this))}catch(e){Sn("Failure in registering port attributes",e)}}providePortAttributes(e,t){try{if(em.has(e.port))return new Oe.PortAttributes(Oe.PortAutoForwardAction.Ignore)}catch(e){Sn("Failure in returning port attributes",e)}}};_v=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(Ri))],_v);const Sv=/python\s\d*.?\d*$/,Cv="__old_vscode_kernelspecs";class kv{get oldKernelSpecsFolder(){return this._oldKernelSpecsFolder||this.globalState.get("OLD_KERNEL_SPECS_FOLDER__","")}set oldKernelSpecsFolder(e){this._oldKernelSpecsFolder=e,this.globalState.update("OLD_KERNEL_SPECS_FOLDER__",e).then(ae,ae)}constructor(e,t,n){this.fs=e,this.globalState=t,this.jupyterPaths=n,this.findKernelSpecsInPathCache=new Map,this.pathToKernelSpec=new Map,this.disposables=[],this.oldKernelSpecsFolder&&En(`Old kernelSpecs (created by Jupyter Extension) stored in directory ${this.oldKernelSpecsFolder}`)}clearCache(){this.pathToKernelSpec.clear(),this.findKernelSpecsInPathCache.clear()}dispose(){Ie(this.disposables)}async loadKernelSpec(e,t,n){if(e.fsPath.includes(Cv))return;const i=Qt(e);if(!this.pathToKernelSpec.has(i)){const r=this.loadKernelSpecImpl(e,t,n).then((async t=>{const n=await this.jupyterPaths.getKernelSpecRootPath(),o=t&&n&&_s(t)&&t.specFile&&Yt(Oe.Uri.file(t.specFile),n);if(t&&!o)return t;t?.specFile&&o&&this.deleteOldKernelSpec(t.specFile).catch(ae),this.pathToKernelSpec.get(i)===r&&this.pathToKernelSpec.delete(i),this.cache=this.cache?.filter((t=>Gt(t.kernelSpecFile,e)))}));this.pathToKernelSpec.set(i,r),r.finally((()=>{t.isCancellationRequested&&this.pathToKernelSpec.get(i)===r&&this.pathToKernelSpec.delete(i)})).catch(ae)}return this.pathToKernelSpec.get(i)}async deleteOldKernelSpec(e){const t=It(Pt(e)),n=Et(Pt(Pt(e)),Cv);this.oldKernelSpecsFolder=n;const i=Et(n,t,It(e));await this.fs.createDirectory(Oe.Uri.file(Pt(i))),await this.fs.copy(Oe.Uri.file(e),Oe.Uri.file(i)).catch(ae),await this.fs.delete(Oe.Uri.file(e)),En(`Old KernelSpec '${e}' deleted and backup stored in ${n}`)}async loadKernelSpecImpl(e,t,n){return async function(e,t,n,r){if(e.fsPath.includes(Cv))return;let o;try{En(`Loading kernelspec from ${pn(e)} ${r?.uri?`for ${pn(r.uri)}`:""}`),o=JSON.parse(await t.readFile(e))}catch(t){return void Sn(`Failed to parse kernelspec ${e}`,t)}if(n.isCancellationRequested)return;if(o.name=r?await ws(r):o.name,n.isCancellationRequested)return;if(!o.display_name.toLowerCase().match(Sv)&&o.language===i&&o.argv.length>2){const e=o.argv.slice(1).map((e=>e.toLowerCase())).filter((e=>!["-m","ipykernel","ipykernel_launcher","-f","{connection_file}"].includes(e)));e.length&&(o.name=`${o.name}.${e.join("#")}`)}o.metadata=o.metadata||{},o.metadata.vscode=o.metadata.vscode||{},o.metadata.vscode.originalSpecFile||(o.metadata.vscode.originalSpecFile=e.fsPath),o.metadata.vscode.originalDisplayName||(o.metadata.vscode.originalDisplayName=o.display_name),o.metadata.originalSpecFile&&(o.metadata.vscode.originalSpecFile=o.metadata.originalSpecFile,delete o.metadata.originalSpecFile);const s=new Zo(o,e.fsPath,r?.uri.fsPath||o?.metadata?.interpreter?.path,_s(o));s.name=o?.name||It(Pt(e.fsPath));const a=r?.uri.fsPath||o?.metadata?.interpreter?.path;return!a||r?.isCondaEnvWithoutPython||await t.exists(Oe.Uri.file(a))?(o.isRegisteredByVSC=_s(o),s):void 0}(e,this.fs,t,n)}async findKernelSpecsInPaths(e,t){const n=Qt(e),i=this.findKernelSpecsInPathCache.get(n);if(i)return i;const r=(async()=>await this.fs.exists(e)?t.isCancellationRequested?[]:(await this.fs.searchLocal("**/kernel.json",e.fsPath,!0)).map((t=>tn(e,t))):[])();this.findKernelSpecsInPathCache.set(n,r);const o=t.onCancellationRequested((()=>{this.findKernelSpecsInPathCache.get(n)===r&&this.findKernelSpecsInPathCache.delete(n)}));return r.finally((()=>{t.isCancellationRequested&&this.findKernelSpecsInPathCache.get(n)===r&&this.findKernelSpecsInPathCache.delete(n),o.dispose()})).catch(ae),r.catch((t=>{this.findKernelSpecsInPathCache.get(n)===r&&this.findKernelSpecsInPathCache.delete(n),En(`Failed to search for kernels in ${pn(e)} with an error`,t)})),r}}class Ev{get status(){return this._status}set status(e){this._status!==e&&(this._status=e,this._onDidChangeStatus.fire())}constructor(e,t,n,i,r,o,s){this.fs=e,this.workspaceService=t,this.extensionChecker=n,this.memento=i,this.env=o,this.jupyterPaths=s,this.disposables=[],this._status="idle",this.promiseMonitor=new Mo,this._onDidChangeStatus=new Oe.EventEmitter,this.onDidChangeStatus=this._onDidChangeStatus.event,this._onDidChangeKernels=new Oe.EventEmitter,this.onDidChangeKernels=this._onDidChangeKernels.event,r.push(this),this.disposables.push(this.promiseMonitor),this.promiseMonitor.onStateChange((()=>{this.status=this.promiseMonitor.isComplete?"idle":"discovering"})),this.kernelSpecFinder=new kv(e,i,s),this.disposables.push(this.kernelSpecFinder)}clearCache(){this.kernelSpecFinder.clearCache()}async listKernelsFirstTimeFromMemento(e){const t=(async()=>{const t=this.memento.get(e,JSON.stringify({kernels:[],extensionVersion:""})),n=JSON.parse(t);let i=[];n&&Array.isArray(n.kernels)&&n.extensionVersion===this.env.extensionVersion&&(i=n.kernels.map((e=>Gs.fromJSON(e))));const r=[];return await Promise.all(i.map((async e=>{await this.isValidCachedKernel(e)&&r.push(e)}))),r})();return this.promiseMonitor.push(t),t}async writeToMementoCache(e,t){await this.memento.update(t,JSON.stringify({kernels:e.map((e=>e.toJSON())),extensionVersion:this.env.extensionVersion}))}async isValidCachedKernel(e){switch(e.kind){case"startUsingPythonInterpreter":return this.fs.exists(e.interpreter.uri);case"startUsingLocalKernelSpec":return(e.kernelSpec.specFile?this.fs.exists(Oe.Uri.file(e.kernelSpec.specFile)):Promise.resolve(!0)).then((t=>t&&e.interpreter?this.fs.exists(e.interpreter.uri):Promise.resolve(!0)))}}}var xv=function(e,t){return function(n,i){t(n,i,e)}};function Tv(){return`LOCAL_KERNEL_SPECS_CACHE_KEY_V_2023_2:${Oe.env.appHost}:${Oe.env.remoteName||""}`}let Pv=class extends Ev{constructor(e,t,n,i,r,o,s){super(e,t,i,r,o,s,n),this._kernels=new Map}activate(){this.listKernelsFirstTimeFromMemento(Tv()).then((e=>{0===this._kernels.size&&e.length&&(e.forEach((e=>this._kernels.set(e.id,e))),this._onDidChangeKernels.fire())})).catch(ae),this.refresh().then(ae,ae)}get kernels(){return Array.from(this._kernels.values())}dispose(){this._onDidChangeKernels.dispose()}async refresh(){this.clearCache(),await this.refreshData()}async refreshData(){const e=new Oe.CancellationTokenSource;try{await this.listKernelSpecs(e.token)}finally{e.dispose()}}async listKernelSpecs(e){const t=(async()=>{const t=(await this.findKernelSpecs(e)).map((e=>Qs.create({kernelSpec:e,interpreter:void 0,id:cs(e)})));if(e.isCancellationRequested)return[];const n=Array.from(this._kernels.values()).sort(((e,t)=>e.id.localeCompare(t.id))),i=t.sort(((e,t)=>e.id.localeCompare(t.id))),r=new Set(t.map((e=>e.id))),o=n.filter((e=>!r.has(e.id)));return this._kernels.clear(),t.forEach((e=>this._kernels.set(e.id,e))),(n.length!==i.length||o.length||JSON.stringify(n)!==JSON.stringify(i))&&(this._onDidChangeKernels.fire(),this.writeToMementoCache(Array.from(this._kernels.values()),Tv()).catch(ae)),o.length&&En(`Local kernel spec connection deleted ${o.map((e=>`${e.kind}:'${e.id}'`))}`),t})();return this.promiseMonitor.push(t),t}async findKernelSpecs(e){let t=[];const n=await this.jupyterPaths.getKernelSpecRootPaths(e);if(e.isCancellationRequested)return[];const i=await Promise.all(n.map((t=>this.kernelSpecFinder.findKernelSpecsInPaths(t,e))));if(e.isCancellationRequested)return[];await Promise.all(i.flat().map((async n=>{try{if(e.isCancellationRequested)return;const i=await this.kernelSpecFinder.loadKernelSpec(n,e);i&&!e.isCancellationRequested&&(Lm(i,"local"),t.push(i))}catch(e){Sn(`Failed to load kernelSpec for ${n}`,e)}})));const r=new Set;t.forEach((e=>{e.metadata?.originalSpecFile&&r.add(e.metadata.originalSpecFile)})),t=t.filter((e=>!e.specFile||!r.has(e.specFile)));const o=[],s=new Map;return t.forEach((e=>{const t=s.get(e.display_name);t&&t.executable!==e.executable?o.push(e):t||(o.push(e),s.set(e.display_name,e))})),o}};Pv=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),xv(0,zn(Nu)),xv(1,zn(Qn)),xv(2,zn(vf)),xv(3,zn(Ao)),xv(4,zn(Oi)),xv(4,Nc(Ai)),xv(5,zn(Ri)),xv(6,zn(ei))],Pv);const Iv=Symbol("ITrustedKernelPaths");function Dv(){return`LOCAL_KERNEL_PYTHON_AND_RELATED_SPECS_CACHE_KEY_V_2023_3:${Oe.env.appHost}:${Oe.env.remoteName||""}`}async function Rv(e,t,n,i){const r=Oe.Uri.file(Et(e.sysPrefix,ff)),o=await n.getKernelSpecRootPaths(t);if(t.isCancellationRequested)return[];if(o.some((e=>Gt(e,r))))return[];const s=await i.findKernelSpecsInPaths(r,t);if(t.isCancellationRequested)return[];let a=[];if(await Promise.all(s.map((async n=>{if(t.isCancellationRequested)return;const r=await i.loadKernelSpec(n,t,e);r&&a.push(r)}))),t.isCancellationRequested)return[];const c=new Set;a.forEach((e=>{e.metadata?.originalSpecFile&&c.add(e.metadata.originalSpecFile)})),a=a.filter((e=>!e.specFile||!c.has(e.specFile))),a.length&&En(`Kernel Specs found in interpreter ${e.id} are ${JSON.stringify(a)}`);const l=[],d=new Map;return a.forEach((e=>{const t=d.get(e.display_name);t&&t.executable!==e.executable?l.push(e):t||(l.push(e),d.set(e.display_name,e))})),l}class Ov{constructor(e,t,n,i,r){this.interpreter=e,this.interpreterService=t,this.jupyterPaths=n,this.extensionChecker=i,this.kernelSpecFinder=r,this.disposables=[],this.cancelToken=new Oe.CancellationTokenSource,this.interpreterService.onDidChangeInterpreter(this.clearCacheWhenInterpretersChange,this,this.disposables),this.interpreterService.onDidChangeInterpreters(this.clearCacheWhenInterpretersChange,this,this.disposables)}dispose(){Ie(this.disposables),this.cancelToken.dispose()}async listKernelSpecs(e){return this.extensionChecker.isPythonExtensionInstalled?(!e&&this.kernelSpecPromise||(this.cancelToken.cancel(),this.cancelToken=new Oe.CancellationTokenSource,this.kernelSpecPromise=this.listKernelSpecsImpl(),this.kernelSpecPromise.then((e=>{En(`Kernels for interpreter ${this.interpreter.id} are ${e.map((e=>e.id)).join(", ")}`)})).catch(ae)),this.kernelSpecPromise):[]}clearCacheWhenInterpretersChange(){const e=this.interpreterService.resolvedEnvironments.find((e=>e.id===this.interpreter.id));e&&(this.interpreter.envPath===e.envPath&&this.interpreter.version?.raw===e.version?.raw&&this.interpreter.envType===e.envType&&this.interpreter.sysPrefix===e.sysPrefix||this.listKernelSpecs(!0).catch(ae))}async listKernelSpecsImpl(){const e=this.cancelToken.token;En(`Search for KernelSpecs in Interpreter ${vl(this.interpreter.uri)}`);const[t,n]=await Promise.all([Rv(this.interpreter,e,this.jupyterPaths,this.kernelSpecFinder),this.jupyterPaths.getKernelSpecTempRegistrationFolder()]);if(e.isCancellationRequested)return[];const r=is(this.interpreter,n),o=new Map;for(const e of t){if(e.language===i&&(!e.env||0===Object.keys(e.env).length)&&os(e)){En(`Hiding default kernel spec '${e.display_name}', '${e.name}', ${vl(e.argv[0])} for interpreter ${vl(e.interpreterPath)} and spec ${vl(e.specFile)}`);continue}const t=Of(e)?Zs.create({kernelSpec:e,interpreter:this.interpreter,id:cs(e,this.interpreter)}):Qs.create({kernelSpec:e,interpreter:this.interpreter,id:cs(e,this.interpreter)});t&&!o.has(t.id)&&o.set(t.id,t)}const s=await r;if(e.isCancellationRequested)return[];const a=Zs.create({kernelSpec:s,interpreter:this.interpreter,id:cs(s,this.interpreter)});return o.has(a.id)||o.set(a.id,a),Array.from(o.values())}}class Av{constructor(e,t,n,i,r){this.interpreterService=e,this.workspaceService=t,this.kernelSpecsFromKnownLocations=n,this.extensionChecker=i,this.trustedKernels=r,this.kernelsPerInterpreter=new Map,this.disposables=[],this.cancelToken=new Oe.CancellationTokenSource,this.lastKnownGlobalPythonKernelSpecs=[],n.onDidChangeKernels((()=>{const e=this.lastKnownGlobalPythonKernelSpecs,t=this.listGlobalPythonKernelSpecs();e.length===t.length&&fe(e,t)||(this.kernelSpecPromise=void 0)}))}dispose(){Ie(this.disposables),this.cancelToken.dispose()}async listKernelSpecs(e){return this.extensionChecker.isPythonExtensionInstalled?(!e&&this.kernelSpecPromise||(this.clear(),this.cancelToken=new Oe.CancellationTokenSource,this.kernelSpecPromise=this.listKernelSpecsImpl()),this.kernelSpecPromise):[]}clear(){this.kernelsPerInterpreter.clear(),this.cancelToken.cancel(),this.cancelToken.dispose(),this.kernelSpecPromise=void 0}async findMatchingInterpreter(e,t){const n=this.extensionChecker.isPythonExtensionInstalled?this.interpreterService.resolvedEnvironments:[],r=e&&Array.isArray(e.argv)&&e.argv.length>0?e.argv[0]:void 0,o=e.language||"",s=e.specFile?await jr(e.specFile):"",a=!!_s(e);if(e.language&&e.language!==i)return En(`Kernel ${e.name} is not python based so does not have an interpreter.`),void(!a&&r&&e.specFile&&Nv(r)&&io(F.AmbiguousGlobalKernelSpec,void 0,{kernelSpecHash:s,kernelConnectionType:t,pythonPathDefined:It(r)!==r,argv0:It(r),language:o,isCreatedByUs:a}));const c=n.find((t=>!(!e.metadata?.interpreter?.path||!Do(Oe.Uri.file(e.metadata.interpreter.path),t.uri)||(En(`Kernel ${e.name} matches ${t.displayName} based on metadata path.`),0))));if(c)return c;if(r&&It(r)===r&&e.specFile&&!a&&io(F.AmbiguousGlobalKernelSpec,void 0,{kernelSpecHash:s,kernelConnectionType:t,pythonPathDefined:!1,argv0:It(r),language:o,isCreatedByUs:a}),r&&It(r)!==r){const i=Oe.Uri.file(r),c=n.find((t=>!!Do(i,t.uri)&&(En(`Kernel ${e.name} matches ${t.displayName} based on path in argv.`),!0)));if(c)return e.specFile&&!a&&io(F.AmbiguousGlobalKernelSpec,void 0,{kernelSpecHash:s,kernelConnectionType:t,pythonPathDefined:!0,argv0:It(r),pythonEnvFound:"found",language:o,isCreatedByUs:a}),c;if(!e.specFile||this.trustedKernels.isTrusted(Oe.Uri.file(e.specFile))){const n=await this.interpreterService.getInterpreterDetails(i);if(n)return e.specFile&&!a&&io(F.AmbiguousGlobalKernelSpec,void 0,{kernelSpecHash:s,kernelConnectionType:t,pythonPathDefined:!0,argv0:It(r),pythonEnvFound:"foundViaGetEnvDetails",language:o,isCreatedByUs:a}),n;e.specFile&&!a&&io(F.AmbiguousGlobalKernelSpec,void 0,{kernelSpecHash:s,kernelConnectionType:t,pythonPathDefined:!0,argv0:It(r),pythonEnvFound:"notFound",language:o,isCreatedByUs:a})}else e.specFile&&!a&&io(F.AmbiguousGlobalKernelSpec,void 0,{kernelSpecHash:s,kernelConnectionType:t,pythonPathDefined:!0,argv0:It(r),pythonEnvFound:"notTrusted",language:o,isCreatedByUs:a})}if(e.interpreterPath){const t=Oe.Uri.file(e.interpreterPath),i=n.find((n=>!(!e.interpreterPath||!Do(t,n.uri)||(En(`Kernel ${e.name} matches ${n.displayName} based on interpreter path.`),0))));if(i)return i;if(!e.specFile||this.trustedKernels.isTrusted(Oe.Uri.file(e.specFile))){const e=await this.interpreterService.getInterpreterDetails(t);if(e)return e}}return n.find((t=>e.display_name===t.displayName&&(En(`Kernel ${e.name} matches ${t.displayName} based on display name.`),!0)))}listGlobalPythonKernelSpecs(){return this.lastKnownGlobalPythonKernelSpecs=this.kernelSpecsFromKnownLocations.kernels.filter((e=>e.kernelSpec.language===i))}warnAboutPythonKernelSpecWithInvalidPythonExec(e){const t=e.specFile||JSON.stringify(e);Av.globalPythonKernelSpecsForWhichWeCouldNotFindInterpreterInfo.has(t)||(Av.globalPythonKernelSpecsForWhichWeCouldNotFindInterpreterInfo.add(t),Cn(`Kernel Spec for '${e.display_name}' (${vl(e.specFile)}) hidden, as we cannot find a matching interpreter argv = '${e.argv[0]}'. To resolve this, please change '${e.argv[0]}' to point to the fully qualified Python executable.`))}async listKernelSpecsImpl(){const e=this.cancelToken.token,t=this.listGlobalPythonKernelSpecs(),n=Promise.all((this.workspaceService.workspaceFolders||[]).map((e=>this.interpreterService.getActiveInterpreter(e.uri))));En("Finding Global Python KernelSpecs");const r=await xa(e,[],n);if(e.isCancellationRequested)return[];const o=t.filter((e=>_s(e.kernelSpec))),s=new Map,a=new Set;return await Promise.all(t.filter((e=>{const t=_s(e.kernelSpec);return!(t||!((e=>{if(e.kernelSpec.language!==i)return!1;const t=e.kernelSpec.argv.map((e=>e.toLowerCase())),n=t.indexOf("-m");if(-1===n)return!1;const r=t.length-1>=n?t[n+1]:void 0;return!!r&&"ipykernel_launcher"!==r})(e)||Object.keys(e.kernelSpec.env||{}).length>0))||!t&&e.kernelSpec.language===i&&!os(e.kernelSpec)})).map((async e=>{const t=await this.findMatchingInterpreter(e.kernelSpec,"startUsingLocalKernelSpec");if(!t&&Nv(e.kernelSpec.argv.length?e.kernelSpec.argv[0].toLowerCase():""))return void this.warnAboutPythonKernelSpecWithInvalidPythonExec(e.kernelSpec);const n=Qs.create({kernelSpec:e.kernelSpec,interpreter:t,id:cs(e.kernelSpec,t)});s.set(n.id,n),n.kernelSpec.specFile&&a.add(n.kernelSpec.specFile)}))),e.isCancellationRequested?[]:(await Promise.all(o.map((e=>e.kernelSpec)).filter((e=>e.language!==i||e.env&&0!==Object.keys(e.env).length||!os(e)?!e.specFile||!a.has(e.specFile)||(En(`Global kernel spec ${e.name}${vl(e.specFile)} already found with a matching Python Env`),!1):(En(`Hiding default kernel spec '${e.display_name}', '${e.name}', ${vl(e.argv[0])} for interpreter ${vl(e.interpreterPath)} and spec ${vl(e.specFile)}`),!1))).map((async e=>{const t=await this.findMatchingInterpreter(e,"startUsingPythonInterpreter");if(t&&Of(e)){const n=Of(e)?Zs.create({kernelSpec:e,interpreter:t,id:cs(e,t)}):Qs.create({kernelSpec:e,interpreter:t,id:cs(e,t)});return"registeredByOldVersionOfExt"===_s(n.kernelSpec)?void En(`Ignoring Global Python KernelSpec '${e.display_name}', '${e.name}' (${vl(e.specFile)}) registered by an old version of the extension`):(kn(`Using interpreter ${vl(t.id)} for Global Python kernel '${e.display_name}', ${e.name} (${vl(e.specFile)})`),n)}{const t=r.find((e=>!!e));let n=t,i=!1;const o=e.metadata?.interpreter?.path?Oe.Uri.file(e.metadata.interpreter.path):void 0;if(o){const t=r.find((e=>Do(o,e?.uri)));if(t)n=t,i=!0;else try{n=await this.interpreterService.getInterpreterDetails(o),i=!0}catch(t){return void Sn(`Failed to get interpreter details for Kernel Spec '${e.display_name}', '${e.name}' ${gl(e.specFile)} with interpreter path ${vl(o)}`,t)}}t&&t===n&&!i?Cn(`Kernel might not start correctly: Fully qualified Python exe not defined (or not found) in Kernel Spec ${e.id} (${gl(e.specFile)}, kernelspec.argv[0] = ${gl(e.argv[0])}), hence falling back to using the Active Interpreter ${gl(n.id)}`):i||Cn(`Kernel might not start correctly: Fully qualified Python exe not defined (or not found) in Kernel Spec ${e.id} (${gl(e.specFile)}, kernelspec.argv[0] = ${gl(e.argv[0])}).`);const s=Qs.create({kernelSpec:e,interpreter:n,id:cs(e,n)});return En(`Interpreter for Local kernel ${s.id} is ${n?.id}`),s}})).map((async t=>{if(e.isCancellationRequested)return[];const n=await t;En(`Found kernel spec at end of discovery ${n?.id}`),n&&!s.has(n.id)&&s.set(n.id,n)}))),e.isCancellationRequested?[]:Array.from(s.values()))}}function Nv(e){return"python"===(e=It(e).trim().toLowerCase())||"python3"===e||"python.exe"===e||"python3.exe"===e}Av.globalPythonKernelSpecsForWhichWeCouldNotFindInterpreterInfo=new Set;var Mv=function(e,t){return function(n,i){t(n,i,e)}};let Lv=class extends Ev{constructor(e,t,n,i,r,o,s,a,c,l){super(t,n,r,s,a,c,i),this.interpreterService=e,this.kernelSpecsFromKnownLocations=o,this._kernels=new Map,this._kernelsExcludingCachedItems=new Map,this._kernelsFromCache=[],this.cachedInformationForPythonInterpreter=new Map,this.updateCachePromise=Promise.resolve(),this.discoveredKernelSpecFiles=new Set,this.lastKnownGlobalPythonKernelSpecs=[],this.interpreterKernelSpecs=new Map,this.globalPythonKernelSpecFinder=new Av(this.interpreterService,this.workspaceService,this.kernelSpecsFromKnownLocations,this.extensionChecker,l),this.disposables.push(this._onDidChangeKernels),e.onDidChangeInterpreters((()=>{this.refreshCancellation?.cancel(),this.refreshData().catch(ae)}),this,this.disposables),e.onDidRemoveInterpreter((e=>{En(`Interpreter removed ${e.id}`);const t=[];this._kernels.forEach((n=>{n.interpreter?.id===e.id&&(En(`Interpreter ${e.id} deleted, hence deleting corresponding kernel ${n.kind}:'${n.id}`),t.push(n),this._kernels.delete(n.id))})),t.length&&(En(`Local Python connection deleted ${t.map((e=>`${e.kind}:'${e.id}: (interpreter id=${vl(e.interpreter?.id)})'`))}`),this.updateCache().catch(ae))}),this,this.disposables)}activate(){this.listKernelsFirstTimeFromMemento(Dv()).then((e=>{e.length&&(e.filter((e=>!this._kernels.has(e.id))).forEach((e=>{this._kernelsFromCache.push(e),this._kernels.set(e.id,e)})),this._onDidChangeKernels.fire())})).finally((async()=>{this.refreshCancellation?.cancel(),this.refreshData().catch(ae),this.kernelSpecsFromKnownLocations.onDidChangeKernels((()=>{const e=this.lastKnownGlobalPythonKernelSpecs,t=this.listGlobalPythonKernelSpecsIncludingThoseRegisteredByUs();e.length===t.length&&fe(e,t)||(this.refreshCancellation?.cancel(),this.refreshData().catch(ae))}),this,this.disposables)})).catch(ae)}get kernels(){return Array.from(this._kernels.values())}dispose(){Ie(this.disposables)}async refresh(){this.globalPythonKernelSpecFinder.clear(),this.clearCache(),this.cachedInformationForPythonInterpreter.clear(),this.discoveredKernelSpecFiles.clear(),this.interpreterService.refreshInterpreters(!0).catch(ae),await this.refreshData(!0)}refreshData(e=!1){if(!e&&this.refreshCancellation&&!this.refreshCancellation.token.isCancellationRequested&&this.previousRefresh)return this.previousRefresh;this.refreshCancellation?.cancel(),this.refreshCancellation?.dispose();const t=this.refreshCancellation=new Oe.CancellationTokenSource,n=(async()=>{if(await this.listKernelsImplementation(t.token,e).catch((e=>Sn("Failure in listKernelsImplementation",e))),!t.token.isCancellationRequested){if("idle"===this.interpreterService.status){const e=this._kernelsFromCache.filter((e=>!this._kernelsExcludingCachedItems.has(e.id))),t=[];e.length&&(Cn(`Kernels ${e.map((e=>`${e.kind}:'${e.id}'`)).join(", ")} found in cache but not discovered in current session ${Array.from(this._kernelsExcludingCachedItems.values()).map((e=>`${e.kind}:'${e.id}'`)).join(", ")}`),e.forEach((e=>{this._kernels.delete(e.id),t.push(e)})));const n=new Set(this.interpreterService.resolvedEnvironments.map((e=>e.id))),i=Array.from(this._kernels.values()).filter((e=>!(!e.interpreter||n.has(e.interpreter.id))));i.length&&(Cn(`The following kernels use interpreters that are no longer valid or not recognized by Python extension, Kernels ${i.map((e=>`${e.kind}:'id=${e.id}'(interpreterId='${vl(e.interpreter?.id)}')`)).join(",")} and valid interpreter ids include ${Array.from(n).join(", ")}`),i.forEach((e=>{this._kernels.delete(e.id),t.push(e)}))),t.length&&(En(`Local Python connection deleted ${t.map((e=>`${e.kind}:'${e.id}: (interpreter id=${vl(e.interpreter?.id)})'`))}`),await this.updateCache())}e&&(this._kernelsFromCache=[])}})().catch((e=>Sn("Failed to discover kernels in interpreters",e))).finally((()=>{t===this.refreshCancellation&&(this.refreshCancellation?.cancel(),this.refreshCancellation?.dispose(),this.refreshCancellation=void 0)}));return this.previousRefresh=n,this.promiseMonitor.push(n),n}async updateCache(){this._onDidChangeKernels.fire();const e=Array.from(this._kernels.values());this.updateCachePromise=this.updateCachePromise.finally((()=>this.writeToMementoCache(e,Dv()).catch(ae))),await this.updateCachePromise}async listKernelsImplementation(e,t){const n=this.extensionChecker.isPythonExtensionInstalled?this.interpreterService.resolvedEnvironments:[],i=Promise.all(n.map((async n=>{let i=this.interpreterKernelSpecs.get(n.id);i||(i=new Ov(n,this.interpreterService,this.jupyterPaths,this.extensionChecker,this.kernelSpecFinder),this.disposables.push(i),this.interpreterKernelSpecs.set(n.id,i));const r=await xa(e,[],i.listKernelSpecs(t));await this.appendNewKernels(r)}))),r=xa(e,[],this.globalPythonKernelSpecFinder.listKernelSpecs(t)).then((e=>this.appendNewKernels(e)));await Promise.all([i,r])}async appendNewKernels(e){e.length&&(e.forEach((e=>{ea(e)&&e.kernelSpec.specFile?(this._kernelsExcludingCachedItems.set(e.id,e),this._kernels.has(e.id),this._kernels.set(e.id,e)):Cn(`Found a kernel ${e.kind}:'${e.id}', but excluded as specFile is undefined`)})),await this.updateCache())}listGlobalPythonKernelSpecs(e){return this.kernelSpecsFromKnownLocations.kernels.filter((e=>e.kernelSpec.language===i)).filter((t=>!!e||!_s(t.kernelSpec)))}listGlobalPythonKernelSpecsIncludingThoseRegisteredByUs(){return this.lastKnownGlobalPythonKernelSpecs=this.listGlobalPythonKernelSpecs(!0)}};Lv=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Mv(0,zn(ka)),Mv(1,zn(Nu)),Mv(2,zn(Qn)),Mv(3,zn(vf)),Mv(4,zn(Ao)),Mv(5,zn(Pv)),Mv(6,zn(Oi)),Mv(6,Nc(Ni)),Mv(7,zn(Ri)),Mv(8,zn(ei)),Mv(9,zn(Iv))],Lv);var jv=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Fv=function(e,t){return function(n,i){t(n,i,e)}};let Uv=class{get status(){return this._status}set status(e){this._status!==e&&(this._status=e,this._onDidChangeStatus.fire())}constructor(e,t,n,i,r,o,s){this.nonPythonKernelFinder=e,this.pythonKernelFinder=t,this.disposables=i,this.extensionChecker=r,this.interpreters=o,this.extensions=s,this._status="idle",this._onDidChangeStatus=new Oe.EventEmitter,this.onDidChangeStatus=this._onDidChangeStatus.event,this.promiseMonitor=new Mo,this.kind=jm.LocalKernelSpec,this.id=jm.LocalKernelSpec,this.displayName=gr.localKernelSpecs,this._onDidChangeKernels=new Oe.EventEmitter,this.onDidChangeKernels=this._onDidChangeKernels.event,this.wasPythonInstalledWhenFetchingControllers=!1,this.cache=[],n.registerKernelFinder(this),this.disposables.push(this._onDidChangeStatus),this.disposables.push(this._onDidChangeKernels),this.disposables.push(this.promiseMonitor)}activate(){let e;this.promiseMonitor.onStateChange((()=>{this.status=this.promiseMonitor.isComplete&&"idle"===this.interpreters.status&&"idle"===this.nonPythonKernelFinder.status&&"idle"===this.pythonKernelFinder.status?"idle":"discovering"})),this.loadData().then(ae,ae);const t=()=>{[this.nonPythonKernelFinder.status,this.pythonKernelFinder.status,"refreshing"===this.interpreters.status?"discovering":"idle"].includes("discovering")?e||(e=ie(),this.promiseMonitor.push(e.promise)):(e?.resolve(),e=void 0)};t(),this.nonPythonKernelFinder.onDidChangeStatus(t,this,this.disposables),this.pythonKernelFinder.onDidChangeStatus(t,this,this.disposables),this.interpreters.onDidChangeStatus(t,this,this.disposables),this.loadData().then(ae,ae),this.interpreters.onDidChangeInterpreters((async()=>this.loadData().then(ae,ae)),this,this.disposables),this.extensions.onDidChange((()=>{!this.wasPythonInstalledWhenFetchingControllers&&this.extensionChecker.isPythonExtensionInstalled&&this.loadData().then(ae,ae)}),this,this.disposables),this.nonPythonKernelFinder.onDidChangeKernels((()=>this.loadData().then(ae,ae)),this,this.disposables),this.pythonKernelFinder.onDidChangeKernels((()=>this.loadData().then(ae,ae)),this,this.disposables),this.wasPythonInstalledWhenFetchingControllers=this.extensionChecker.isPythonExtensionInstalled}async refresh(){const e=(async()=>{await this.nonPythonKernelFinder.refresh(),await this.pythonKernelFinder.refresh(),await this.updateCache()})();this.promiseMonitor.push(e),await e}async loadData(){const e=this.updateCache();this.promiseMonitor.push(e),await e}async updateCache(){try{let e=[];const t=this.nonPythonKernelFinder.kernels.filter((e=>!this.extensionChecker.isPythonExtensionInstalled||e.kernelSpec.language!==i)),n=this.pythonKernelFinder.kernels.filter((e=>hs(e)));e=e.concat(t).concat(n),await this.writeToCache(e)}catch(e){Sn("Exception Saving loaded kernels",e)}}get kernels(){const e=new Set,t=[];return this.pythonKernelFinder.kernels.forEach((n=>{const i=_s(n.kernelSpec);n.kernelSpec.specFile&&"registeredByNewVersionOfExtForCustomKernelSpec"===i&&(e.add(n.kernelSpec.specFile),t.push(n))})),this.cache.forEach((n=>{n.kernelSpec.specFile&&e.has(n.kernelSpec.specFile)||t.push(n)})),t}filterKernels(e){return e.filter((({kernelSpec:e})=>!e||!e.argv[0].toLowerCase().endsWith("xpython")||(kn("Hiding xeus kernelspec"),!1)))}async writeToCache(e){const t=new Set;e=this.filterKernels(e.filter((e=>!t.has(e.id)&&(t.add(e.id),!0))));const n=this.cache,i=new Map(n.map((e=>[e.id,e]))),r=new Map(e.map((e=>[e.id,e]))),o=e.filter((e=>!i.has(e.id))),s=e.filter((e=>i.has(e.id)&&!fe(e,i.get(e.id)))),a=n.filter((e=>!r.has(e.id)));this.cache=e,(o.length||s.length||a.length)&&this._onDidChangeKernels.fire({removed:a}),e.length&&(this.cacheLoggingTimeout&&clearTimeout(this.cacheLoggingTimeout),this.cacheLoggingTimeout=setTimeout((()=>{En(`Updating cache with Local kernels ${e.map((e=>`${e.kind}:'${e.id} (interpreter id = ${pn(e.interpreter?.id)})'`)).join(", ")}, Added = ${o.map((e=>`${e.kind}:'${e.id} (interpreter id = ${pn(e.interpreter?.id)})'`)).join(", ")}, Updated = ${s.map((e=>`${e.kind}:'${e.id} (interpreter id = ${pn(e.interpreter?.id)})'`)).join(", ")}, Removed = ${a.map((e=>`${e.kind}:'${e.id} (interpreter id = ${pn(e.interpreter?.id)})'`)).join(", ")}`)}),S()?0:15e3),this.disposables.push(new Oe.Disposable((()=>clearTimeout(this.cacheLoggingTimeout)))))}};jv([Pn("List kernels failed")],Uv.prototype,"updateCache",null),Uv=jv([Kn(),Fv(0,zn(Pv)),Fv(1,zn(Lv)),Fv(2,zn(la)),Fv(3,zn(Ri)),Fv(4,zn(Ao)),Fv(5,zn(ka)),Fv(6,zn(qi))],Uv);var qv=function(e,t){return function(n,i){t(n,i,e)}};function Kv(e){return!(!Vv(e)||e?.envType!==ko.Unknown&&e?.envType!==ko.Pyenv&&e?.envType!==ko.Conda)}function Vv(e){return(e?.version?.major??3)>=3&&(e?.version?.minor??6)>=6}let Wv=class{constructor(e,t,n,i){this.pythonExecutionFactory=e,this.disposableRegistry=t,this.interpreters=n,this.context=i,this.messages=new Map,this.requestCounter=0}async createInterrupter(e,t){try{return await this.createInterrupterImpl(e,t)}catch(n){return Sn("Failed to create interrupter, trying again",n),this.createInterrupterImpl(e,t)}}async createInterrupterImpl(e,t){const n=await this.sendCommand({command:"INITIALIZE_INTERRUPT"},e,t);if(!n)throw Sn("Unable to initialize interrupt handle"),new Error("Unable to initialize interrupt handle");return{handle:n,interrupt:async()=>{await this.sendCommand({command:"INTERRUPT",handle:n},e,t)},dispose:async()=>{await this.sendCommand({command:"DISPOSE_INTERRUPT_HANDLE",handle:n},e,t).catch((t=>Sn(`Failed to dispose interrupt handle for ${e.id}`,t)))}}}async getInterpreter(e){if(e&&Kv(e))return e;const t=this.interpreters.resolvedEnvironments;return 0===t.length?e:t.find(Kv)||t.find(Vv)||e}async initializeInterrupter(e,t){if(this.startupPromise)return this.startupPromise;const n=(async()=>{const n=await this.getInterpreter(e),i=await this.pythonExecutionFactory.createActivatedEnvironment({interpreter:n,resource:t}),r=Oe.Uri.joinPath(this.context.extensionUri,"pythonFiles","vscode_datascience_helpers"),o=Oe.Uri.joinPath(r,"kernel_interrupt_daemon.py"),s=i.execObservable([o.fsPath,"--ppid",process.pid.toString()],{cwd:r.fsPath});return await new Promise(((e,t)=>{let n=!1;const i=s.out.subscribe((i=>{if(xn(`Output from interrupt daemon started = ${n}, output (${i.source}) = ${i.out} ('END)`),"stdout"===i.source&&i.out.trim().includes("DAEMON_STARTED:")&&!n)n=!0,e();else if("stderr"===i.source&&i.out.includes("INTERRUPT:")&&i.out.includes("ERROR: handling command :INITIALIZE_INTERRUPT:")&&n)Ee(i.out,{trim:!0,removeEmptyEntries:!0}).filter((e=>e.includes("INTERRUPT:"))).forEach((e=>{try{const t=e.split(":"),n=parseInt(t[t.indexOf("INITIALIZE_INTERRUPT")+1],10),r=this.messages.get(n);r&&(Sn(`Failed to initialize interrupt daemon for ${n}, ${i.out}`),r.deferred.reject(new Error(`Failed to start interrupt daemon ${i.out}`)),this.messages.delete(n))}catch(e){Sn(`Failed to parse interrupt daemon response, ${i.out}`,e)}}));else if("stdout"===i.source&&i.out.includes("INTERRUPT:")&&n)Ee(i.out,{trim:!0,removeEmptyEntries:!0}).filter((e=>e.includes("INTERRUPT:"))).forEach((e=>{try{const[t,n,r]=e.split(":"),o=this.messages.get(parseInt(n,10));o?(En(`Got a response of ${r} for ${t}:${n}`),o.deferred.resolve(r),this.messages.delete(parseInt(n,10))):Sn(`Got a response of ${r} for ${t}:${n} but no command entry found in ${i.out}`)}catch(e){Sn(`Failed to parse interrupt daemon response, ${i.out}`,e)}}));else if(i.out.includes("ERROR: handling command")){if(Cn(`Error output in interrupt daemon response ${i.out} ('END')`),!n)return t(new Error(`Interrupt daemon failed to start, ${i.out}`));try{const e=i.out.split(":")[2],t=this.messages.get(parseInt(e,10));if(t)return t.deferred.reject(new Error(i.out)),void this.messages.delete(parseInt(e,10))}catch(e){Sn(`Failed to parse interrupt daemon response, ${i.out}`,e)}}}));this.disposableRegistry.push(new Oe.Disposable((()=>i.unsubscribe())))})),this.disposableRegistry.push(new Oe.Disposable((()=>ce((()=>s.proc?.kill()))))),s.proc?.on("close",(()=>{xn("Interrupt daemon closed"),this.startupPromise=void 0})),s.proc?.on("exit",(()=>{xn("Interrupt daemon exited"),this.startupPromise=void 0})),s})();return n.catch((t=>Sn(`Failed to start interrupt daemon for (${e.id})`,t))),this.startupPromise=n,n}async sendCommand(e,t,n){const i=ie(),r=this.requestCounter++;this.messages.set(r,{command:e,deferred:i});const o="INITIALIZE_INTERRUPT"===e.command?`${e.command}:${r}`:`${e.command}:${r}:${e.handle}`,{proc:s}=await this.initializeInterrupter(t,n);if(!s||!s.stdin)throw Sn("No process or stdin"),new Error("No process or stdin");s.stdin.write(`${o}${hc.EOL}`),xn(`Sending Interrupt Request id=${r}, Command ${e.command} for ${t.id}`);const a=await i.promise;if(xn(`Got Interrupt Response id=${r}, Command ${e.command} for ${t.id}`),"INITIALIZE_INTERRUPT"===e.command)return parseInt(a,10)}};Wv=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),qv(0,zn(qd)),qv(1,zn(Ri)),qv(2,zn(ka)),qv(3,zn(Ui))],Wv);var $v,Bv=function(e,t){return function(n,i){t(n,i,e)}};let Hv=$v=class{constructor(e,t){this.platform=e,this.workspace=t,this.programData=process.env.PROGRAMDATA?Oe.Uri.file(Ct(process.env.PROGRAMDATA)):void 0}get trustedKernelSpecs(){return this.workspace.getConfiguration("jupyter",void 0).get("kernels.trusted",[])}isTrusted(e){const t=this.isTrustedImpl(e);return t||$v.IsKernelSpecHidden.completed||$v.IsKernelSpecHidden.resolve(!0),t}isTrustedImpl(e){return!("file"===e.scheme&&!this.trustedKernelSpecs.map((e=>this.platform.isWindows?e.toLowerCase():e)).map((e=>Oe.Uri.file(e).path)).includes(this.platform.isWindows?e.path.toLowerCase():e.path)&&this.platform.isWindows&&this.programData&&e.path.toLowerCase().startsWith(this.programData.path.toLowerCase()))}};Hv.IsKernelSpecHidden=ie(),Hv=$v=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Bv(0,zn(Ma)),Bv(1,zn(Qn))],Hv);const zv=require("process");var Jv=__webpack_require__(95987),Gv=__webpack_require__.n(Jv),Yv=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};const Qv="To connect another client to this kernel, use:",Xv='NOTE: When using the `ipython kernel` entry point, Ctrl-C will not work.\n\nTo exit, you will have to explicitly quit this process, by either sending\n"quit" from a client, or using Ctrl-\\ in UNIX-like environments.\n\nTo read more about this, see https://github.com/ipython/ipython/issues/2049\n\n\n';class Zv{get pid(){return this._pid}get exited(){return this.exitEvent.event}get kernelConnectionMetadata(){return this._kernelConnectionMetadata}get connection(){return this._connection}get isPythonKernel(){return fs(this.kernelConnectionMetadata)&&Of(this.kernelConnectionMetadata)}get canInterrupt(){return"message"!==this._kernelConnectionMetadata.kernelSpec.interrupt_mode}constructor(e,t,n,i,r,o,s,a,c,l,d,u,p){this.processExecutionFactory=e,this._connection=t,this.fileSystem=i,this.resource=r,this.extensionChecker=o,this.kernelEnvVarsService=s,this.pythonExecFactory=a,this.outputChannel=c,this.jupyterSettings=l,this.jupyterPaths=d,this.pythonKernelInterruptDaemon=u,this.platform=p,this.exitEvent=new Oe.EventEmitter,this._kernelConnectionMetadata=n}async interrupt(){if(!this.canInterrupt)throw new Error("Kernel interrupt not supported in KernelProcess.ts");if("message"!==this._kernelConnectionMetadata.kernelSpec.interrupt_mode&&this._process&&!this.interrupter)kn("Interrupting kernel via SIGINT"),this._process.pid&&(0,zv.kill)(this._process.pid,"SIGINT");else{if("message"!==this._kernelConnectionMetadata.kernelSpec.interrupt_mode&&this._process&&this.interrupter&&fs(this._kernelConnectionMetadata))return kn("Interrupting kernel via custom event (Win32)"),this.interrupter.interrupt();Sn("No process to interrupt in KernleProcess.ts")}}async launch(e,t,n){if(this.launchedOnce)throw new Error("Kernel has already been launched.");this.launchedOnce=!0,await this.updateConnectionArgs(),Ia.throwIfCanceled(n);const i=await this.launchAsObservable(e,n);if(n.isCancellationRequested)throw new Oe.CancellationError;let r="",o="",s="",a=!1;const c=ie();c.promise.catch(ae),i.proc.on("exit",(e=>{e=e||void 0,this.disposed?En(`KernelProcess Exited, Exit Code - ${e}`):(En(`KernelProcess Exited, Exit Code - ${e}`,s),a||(this.exitEvent.fire({exitCode:e||void 0,reason:Kr(s)||s}),a=!0),n.isCancellationRequested||(xn("KernelProcessExitedError raised",o),c.reject(new _h(e||-1,o,this.kernelConnectionMetadata))))})),i.proc&&(i.proc.stdout?.on("data",(e=>{En(`KernelProcess output: ${(e||"").toString()}`),this.sendToOutput((e||"").toString())})),i.proc.stderr?.on("data",(e=>{const t=ey((e||"").toString());s+=t,t.trim().length&&En(`KernelProcess error: ${t}`),this.sendToOutput(t)})));let l=!1;i.out.subscribe((e=>{if("stderr"===e.source)e.out=ey(e.out),o+=e.out,e.out.trim().length&&Cn(`StdErr from Kernel Process ${e.out.trim()}`);else{if(r+=e.out,!l){r=r.replace(Xv,""),r=r.replace(Xv.split(/\r?\n/).join(hc.EOL),""),r=r.trimStart();const e=Ee(r,{trim:!0,removeEmptyEntries:!0});2===e.length&&e[0]===Qv&&e[1].startsWith("--existing")&&e[1].endsWith(".json")&&(r=`${e.join(" ")}${hc.EOL}`)}r.includes(Qv)&&(l=!0),En(`Kernel Output: ${r}`)}this.sendToOutput(e.out)}),(e=>{this.disposed?Cn("Kernel died",e,o):(Sn("Kernel died",e,o),c.reject(e))}));try{c.rejected&&await c.promise;const e=(await __webpack_require__.e(151).then(__webpack_require__.t.bind(__webpack_require__,79151,19))).default,i=Promise.all([e.waitUntilUsed(this.connection.shell_port,200,t),e.waitUntilUsed(this.connection.iopub_port,200,t)]).catch((e=>{if(!n.isCancellationRequested&&!c.rejected)return Sn("waitUntilUsed timed out",e),Promise.reject(new wh(this.kernelConnectionMetadata))}));await Ta(n,i,c.promise)}catch(e){const t=(s||o||"").trim();if(n?.isCancellationRequested||Ea(e)||(Sn("Disposing kernel process due to an error",e),e&&e instanceof Error&&t.length&&e.message.includes(t)||Sn(t)),await this.dispose(),!n?.isCancellationRequested&&e instanceof Xi)throw e;{n?.isCancellationRequested&&En("User cancelled the kernel launch");const i=Vr(t)||t.substring(0,100);throw xn("KernelDiedError raised",i,s+"\n"+o+"\n"),new bh(gr.kernelDied(i),s+"\n"+o+"\n",e,this.kernelConnectionMetadata)}}}async dispose(){if(this._disposingPromise)return this._disposingPromise;if(this.disposed)return;this.disposed=!0;const e=this._process?.pid;kn(`Dispose Kernel process ${e}.`),this._disposingPromise=(async()=>{await Z(1e3,this.killChildProcesses(this._process?.pid).catch(ae));try{this.interrupter?.dispose().catch(ae),this._process?.kill(),this.exitEvent.fire({})}catch(t){Sn(`Error disposing kernel process ${e}`,t)}ce((async()=>{this.connectionFile&&await this.fileSystem.delete(this.connectionFile).catch((t=>Cn(`Failed to delete connection file ${this.connectionFile} for pid ${e}`,t)))})),En(`Disposed Kernel process ${e}.`)})()}async killChildProcesses(e){if(e&&wl.isAlive(e))try{if(this.platform.isWindows){const t=process.env.WINDIR||"C:\\Windows",n=Et(t,"System32","taskkill.exe");await(new wl).exec(n,["/F","/T","/PID",e.toString()])}else await new Promise((t=>{Gv()(e,((n,i)=>{n?Cn(`Failed to kill children for ${e}`,n):i.forEach((e=>wl.kill(e))),t()}))}))}catch(t){Cn(`Failed to kill children for ${e}`,t)}}sendToOutput(e){this.outputChannel&&this.outputChannel.append(e)}get launchKernelSpec(){if(this._launchKernelSpec)return this._launchKernelSpec;let e=this._kernelConnectionMetadata.kernelSpec;if(!e)throw new Error("KernelSpec cannot be empty in KernelProcess.ts");return Array.isArray(e.argv)?this._launchKernelSpec={...e,argv:[...e.argv]}:(Sn("KernelSpec.argv in KernelProcess is undefined"),this._launchKernelSpec=void 0),this._launchKernelSpec}async updateConnectionArgs(){const e=this.launchKernelSpec.argv.findIndex((e=>e.includes(es)));if(-1===e)throw new Error(`Connection file not found in kernelspec json args, ${this.launchKernelSpec.argv.join(" ")}`);if(this.isPythonKernel&&0===e&&"-f"!==this.launchKernelSpec.argv[e-1])throw new Error(`Connection file not found in kernelspec json args, ${this.launchKernelSpec.argv.join(" ")}`);if(this.connectionFile=await this.createConnectionFile(),this.isPythonKernel)this.launchKernelSpec.argv.splice(e-1,2),this.launchKernelSpec.argv.push(...this.addPythonConnectionArgs(this.connectionFile)),await this.fileSystem.writeFile(this.connectionFile,JSON.stringify(this._connection));else{await this.fileSystem.writeFile(this.connectionFile,JSON.stringify(this._connection));const t=this.connectionFile.fsPath.includes(" ")?`"${this.connectionFile.fsPath}"`:this.connectionFile.fsPath;this.launchKernelSpec.argv[e].includes("--connection-file")||this.launchKernelSpec.argv[e].includes(`=${es}`)&&!this.launchKernelSpec.argv[e].trim().startsWith("=")?this.launchKernelSpec.argv[e]=this.launchKernelSpec.argv[e].replace(es,t):this.launchKernelSpec.argv[e]=this.launchKernelSpec.argv[e].replace(es,this.connectionFile.fsPath)}}async createConnectionFile(){const e=await this.jupyterPaths.getRuntimeDir(),t=await this.fileSystem.createTemporaryLocalFile({fileExtension:".json",prefix:"kernel-v2-"}),n=e?Et(e.fsPath,It(t.filePath)):t.filePath;return await t.dispose(),Oe.Uri.file(n)}addPythonConnectionArgs(e){const t=[];t.push(`--ip=${this._connection.ip}`),t.push(`--stdin=${this._connection.stdin_port}`),t.push(`--control=${this._connection.control_port}`),t.push(`--hb=${this._connection.hb_port}`),t.push(`--Session.signature_scheme="${this._connection.signature_scheme}"`),t.push(`--Session.key=b"${this._connection.key}"`),t.push(`--shell=${this._connection.shell_port}`),t.push(`--transport="${this._connection.transport}"`),t.push(`--iopub=${this._connection.iopub_port}`);const n=e.fsPath.includes(" ")?`"${e.fsPath}"`:e.fsPath;return t.push(`--f=${n}`),t}async launchAsObservable(e,t){let n;if(this.isPythonKernel&&this.extensionChecker.isPythonExtensionInstalled&&this._kernelConnectionMetadata.interpreter){const i=this.pythonExecFactory.createActivatedEnvironment({resource:this.resource,interpreter:this._kernelConnectionMetadata.interpreter});let[r,o,s]=await Promise.all([i,il.pathExists(e),this.kernelEnvVarsService.getEnvironmentVariables(this.resource,this._kernelConnectionMetadata.interpreter,this._kernelConnectionMetadata.kernelSpec,t)]);if(Ia.throwIfCanceled(t),"win32"===hc.platform()){s=s||process.env;try{const e=await this.getWin32InterruptHandle();s.JPY_INTERRUPT_EVENT=`${e}`,xn(`Got interrupt handle kernel id ${e} for interpreter ${this._kernelConnectionMetadata.interpreter.id}`)}catch(e){Sn(`Failed to get interrupt handle kernel id ${this._kernelConnectionMetadata.id} for interpreter ${this._kernelConnectionMetadata.interpreter.id}`,e)}}Ia.throwIfCanceled(t);const a=this.launchKernelSpec.argv.slice(1);this.jupyterSettings.enablePythonKernelLogging&&a.push("--debug"),n=r.execObservable(a,{cwd:o?e:process.cwd(),env:s}),Ia.throwIfCanceled(t)}else{const i=this.launchKernelSpec.argv[0];kn(`Launching Raw Kernel ${this.launchKernelSpec.display_name} # ${i}`);const[r,o]=await Promise.all([this.processExecutionFactory.create(this.resource,t),this.kernelEnvVarsService.getEnvironmentVariables(this.resource,this._kernelConnectionMetadata.interpreter,this.launchKernelSpec,t)]);Ia.throwIfCanceled(t);const s=this.launchKernelSpec.argv.slice(1);n=r.execObservable(i,s,{env:o,cwd:e})}if(!n.proc)throw new Error("KernelProcess failed to launch");return this._process=n.proc,this._pid=n.proc.pid,n}async getWin32InterruptHandle(){return this.interrupter||(this.interrupter=await this.pythonKernelInterruptDaemon.createInterrupter(this._kernelConnectionMetadata.interpreter,this.resource)),this.interrupter.handle}}function ey(e){let t=Ee(e,{trim:!0,removeEmptyEntries:!0});return t.some((e=>e.includes("FutureWarning: Supporting extra quotes around strings is deprecated in traitlets 5.0.")))&&t.some((e=>"warn("===e.trim()))&&t.some((e=>e.includes("FutureWarning: Supporting extra quotes around Bytes is deprecated in traitlets 5.0.")))?t.filter((e=>!e.endsWith("FutureWarning: Supporting extra quotes around strings is deprecated in traitlets 5.0. You can use 'hmac-sha256' instead of '\"hmac-sha256\"' if you require traitlets >=5.")&&"warn("!==e.trim()&&!e.includes("FutureWarning: Supporting extra quotes around Bytes is deprecated in traitlets 5.0. Use"))).join(hc.EOL):e}Yv([oo(F.RawKernelProcessLaunch)],Zv.prototype,"launch",null),Yv([Tn("Launching kernel in kernelProcess.ts",$.Arguments|$.BeforeCall),function(e,t){return function(n,i){t(n,i,e)}}(1,Rn())],Zv.prototype,"launchAsObservable",null);var ty,ny=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},iy=function(e,t){return function(n,i){t(n,i,e)}};const ry="kernelLauncherPortStart_{0}.tmp";let oy=ty=class{constructor(e,t,n,i,r,o,s,a,c,l){this.processExecutionFactory=e,this.fs=t,this.extensionChecker=n,this.kernelEnvVarsService=i,this.disposables=r,this.pythonExecFactory=o,this.configService=s,this.jupyterPaths=a,this.pythonKernelInterruptDaemon=c,this.platformService=l}static async cleanupStartPort(){try{const e=await ty.startPortPromise;En(`Cleaning up port start file : ${e}`);const t=Et(hc.tmpdir(),De(ry,e.toString()));await il.remove(t)}catch(e){Cn("Kernel port mutex failed to cleanup: ",e)}}static async computeStartPort(){if(w()){let e=9e3,t=0;for(;0===t&&e<65e3;)try{const n=Et(hc.tmpdir(),De(ry,e.toString()));await il.open(n,"wx"),t=e}catch{e+=1e3}return En(`Computed port start for KernelLauncher is : ${t}`),t}return 9e3}async launch(e,t,n,i,r){const o=new se,s=(async()=>(this.logIPyKernelPath(n,e,r).catch(ae),await this.launchProcess(e,n,i,t,r)))();return s.then((()=>io(F.KernelLauncherPerf,{duration:o.elapsedTime},{resourceType:Ya(n)}))).catch(ae),s}async logIPyKernelPath(e,t,n){const i=t.interpreter;if(!ea(t)||!fs(t)||!i)return;const r=await this.pythonExecFactory.createActivatedEnvironment({interpreter:i,resource:e}),o=await r.exec(["-c",'import ipykernel; print(ipykernel.__version__); print("5dc3a68c-e34e-4080-9c3e-2a532b2ccb4d"); print(ipykernel.__file__)'],{token:n});if(n.isCancellationRequested)return;const s=pn(i.uri);if(o.stdout){const e=o.stdout.trim().split("5dc3a68c-e34e-4080-9c3e-2a532b2ccb4d").map((e=>e.trim())).filter((e=>e.length>0));2===e.length?kn(`ipykernel version & path ${e[0]}, ${gl(e[1])} for ${s}`):kn(`ipykernel version & path ${o.stdout.trim()} for ${s}`)}o.stderr&&Cn(`Stderr output when getting ipykernel version & path ${Ee(o.stderr.trim(),{removeEmptyEntries:!0,trim:!0}).map(((e,t)=>0===t?e:`    ${e}`)).join("\n")} for ${s}`)}async launchProcess(e,t,n,i,r){const o=await Ta(r,this.getKernelConnection(e)),s=t?It(t.fsPath):"",a=this.configService.getSettings(t),c=a.logKernelOutputSeparately||a.development?Oe.window.createOutputChannel(gr.kernelConsoleOutputChannel(s),"log"):void 0;c?.clear();const l=new Zv(this.processExecutionFactory,o,e,this.fs,t,this.extensionChecker,this.kernelEnvVarsService,this.pythonExecFactory,c,a,this.jupyterPaths,this.pythonKernelInterruptDaemon,this.platformService);l.exited((()=>c?.dispose()),this,this.disposables);try{await Ta(r,l.launch(n,i,r))}catch(e){throw await l.dispose(),Ia.throwIfCanceled(r),e}const d=l.exited((({exitCode:e,reason:n})=>{Dh(t,F.RawKernelSessionKernelProcessExited,e?{exitCode:e}:void 0,{exitReason:Kr(n)}),em.delete(o.control_port),em.delete(o.hb_port),em.delete(o.iopub_port),em.delete(o.shell_port),em.delete(o.stdin_port),d.dispose()}),this,this.disposables);if(r?.isCancellationRequested)throw await l.dispose(),new Oe.CancellationError;return l}async chainGetConnectionPorts(){return this.portChain&&await this.portChain,this.portChain=this.getConnectionPorts(),this.portChain}static async findNextFreePort(e){const t=(0,up.promisify)((await __webpack_require__.e(351).then(__webpack_require__.t.bind(__webpack_require__,22351,19))).getPorts),n=await t(5,{host:"127.0.0.1",port:e});if(n.some((e=>em.has(e)))){const e=Math.max(...em,...n);return ty.findNextFreePort(e)}return n.forEach((e=>em.add(e))),n}async getConnectionPorts(){const e=await ty.startPortPromise;return ty.findNextFreePort(e)}async getKernelConnection(e){const t=await this.chainGetConnectionPorts();return{key:Kf()(),signature_scheme:"hmac-sha256",transport:"tcp",ip:"127.0.0.1",hb_port:t[0],control_port:t[1],shell_port:t[2],stdin_port:t[3],iopub_port:t[4],kernel_name:e.kernelSpec?.name||"python"}}};oy.startPortPromise=ty.computeStartPort(),ny([Tn("Kernel Launcher. launch",$.BeforeCall|$.Arguments),iy(0,Dn("id")),iy(4,Rn())],oy.prototype,"launch",null),ny([ye("Failed to capture IPyKernel version and path")],oy.prototype,"logIPyKernelPath",null),oy=ty=ny([Kn(),iy(0,zn(qa)),iy(1,zn(Nu)),iy(2,zn(Ao)),iy(3,zn(Rf)),iy(4,zn(Ri)),iy(5,zn(qd)),iy(6,zn(ji)),iy(7,zn(vf)),iy(8,zn(Wv)),iy(9,zn(Ma))],oy);var sy=__webpack_require__(67684);const ay=["AlmaLinux","Alt","Amazon","Arch","ArchLinux","Asahi","Asahi Linux","Asianux","Alpine","Berry","BlackArch","BlackArch Linux","Cent","CentOS","Clear","Clear Linux","Clear","ClearOS","Debian","Elementary","Endeavour","EndeavourOS","Easy","EasyOS","Fedora","Fermi","Fuduntu","FreeBSD","Gecko","Gentoo","Kali","KDE","Knoppix","Kubuntu","Linux","LinuxMint","Mageia","Manjaro","Mint","Miracle","MX","MX Linux","Navy","Navy Linux","Nitrux","NixOS","openSUSE","Oracle","Pop!_OS","RasPiOS","Raspbian","Red Hat Enterprise Linux","Red Hat Linux","Red Hat","Rocks","Rocky","Rocky Linux","Rosa","Scientific","Scientific Linux","Slackware","SmartOS","SUSE","SUSE Linux","SUSE Liberty Linux","Ubuntu","VZLinux","Xubuntu","Zorin"],cy=new RegExp(/^[0-9 .]*$/);async function ly(){const e={id:"",version_id:""};if("darwin"===hc.platform()||"win32"===hc.platform())return e;try{Ee(await il.readFile("/etc/os-release","utf-8")).forEach((t=>{const n=t.toUpperCase().trim().startsWith("ID="),i=t.toUpperCase().trim().startsWith("VERSION_ID=");if(n||i){const i=t.substring(t.indexOf("=")+1).replace(/"/g,"").toUpperCase();if(n)e.id=ay.filter((e=>i.includes(e.toUpperCase()))).join(", ");else{const t=parseFloat(i)||"";e.version_id=cy.test(i)?i:t.toString()}}}))}catch(e){Sn("Failed to read distro info",e)}return e}function dy(){try{const e=require("zeromq");return hy(!1).catch(ae),e}catch(e){try{const t=require(Et(Tc,"out","node_modules","zeromqold"));return kn("ZMQ loaded via fallback mechanism."),hy(!1,!0,e.message||e.toString()).catch(ae),t}catch(t){throw hy(!0,!0,e.message||e.toString(),t.message||t.toString()).catch(ae),Cn("Exception while attempting zmq :",e.message||e),Cn("Exception while attempting zmq (fallback) :",t.message||t),t}}}async function uy(){try{const e=Et(Tc,"out","node_modules","zeromq","prebuilds");if(!await il.pathExists(Et(Tc,"out","node_modules")))return;const t=await il.readdir(e).then((t=>t.map((async t=>{const n=Et(e,t);return(await il.stat(n)).isDirectory()?il.readdir(n).then((e=>e.map((e=>Et(n,e))))):[]}))));return(await Promise.all(t.flat())).flat().map((e=>e.substring(e.lastIndexOf("prebuilds")+9+1).replace(/\\/g,"<sep>").replace(/\//g,"<sep>")))}catch(e){return Cn("Failed to determine local zmq binaries.",e),["Failed to determine local zmq binaries."]}}let py=!1;async function hy(e,t=!1,n="",i=""){if(py)return;py=!0;const[r,o]=await Promise.all([ly().catch((()=>({id:"",version_id:""}))),uy()]),s=function(){try{const e=process.config&&process.config.variables||{},t=(process.env.npm_config_arch||"").trim()||hc.arch(),n=process.env.npm_config_platform||hc.platform(),i=fy(n),r=process.env.LIBC||(fy(n)?"musl":"glibc"),o=process.env.ARM_VERSION||("arm64"===t?"8":e.arm_version)||"";return{alpine:i,libc:String(r),armv:String(o),zmqarch:t}}catch(e){return Cn("Failed to determine platform information used to load zeromq binary.",e),{}}}();io(F.ZMQSupport,void 0,{distro_id:r.id,distro_version_id:r.version_id,failed:e,fallbackTried:t,alpine:s.alpine,libc:s.libc,armv:s.armv,zmqarch:s.zmqarch}),io(F.ZMQSupportFailure,void 0,{distro_id:r.id,distro_version_id:r.version_id,failed:e,fallbackTried:t,alpine:s.alpine,libc:s.libc,armv:s.armv,zmqarch:s.zmqarch,errorMessage:n,zmqBinaries:o,fallbackErrorMessage:i})}function fy(e){return"linux"===e&&il.existsSync("/etc/alpine-release")}class my{constructor(e,t,n){this.connection=e,this.serialize=t,this.deserialize=n,this._onAnyMessage=new Oe.EventEmitter,this.onAnyMessage=this._onAnyMessage.event,this.onopen=ae,this.onerror=ae,this.onclose=ae,this.onmessage=ae,this.receiveHooks=[],this.sendHooks=[],this.msgChain=Promise.resolve(),this.sendChain=Promise.resolve(),this.closed=!1,this.channels=this.generateChannels(e)}dispose(){this.closed||(this._onAnyMessage.dispose(),this.close())}close(){this.closed=!0;const e=e=>{try{e.close()}catch(e){Sn("Error during socket shutdown",e)}};e(this.channels.control),e(this.channels.iopub),e(this.channels.shell),e(this.channels.stdin)}emit(e,...t){switch(e){case"message":this.onmessage({data:t[0],type:"message",target:this});break;case"close":this.onclose({wasClean:!0,code:0,reason:"",target:this});break;case"error":this.onerror({error:"",message:"to do",type:"error",target:this});break;case"open":this.onopen({target:this})}return!0}sendToRealKernel(e,t){const n=this.deserialize(e);this._onAnyMessage.fire({msg:e,direction:"send"}),this.sendMessage(n,!0)}send(e,t){this.sendMessage(e,!1)}addReceiveHook(e){this.receiveHooks.push(e)}removeReceiveHook(e){this.receiveHooks=this.receiveHooks.filter((t=>t!==e))}addSendHook(e){this.sendHooks.push(e)}removeSendHook(e){this.sendHooks=this.sendHooks.filter((t=>t!==e))}generateChannel(e,t,n){const i=n();return i.connect(function(e,t){const n="tcp"===e.transport?":":"-",i=e[`${t}_port`];if(!i)throw new Error(`Port not found for channel "${t}"`);return`${e.transport}://${e.ip}${n}${i}`}(e,t)),this.processSocketMessages(t,i).catch(Sn.bind(`Failed to read messages from channel ${t}`)),i}async processSocketMessages(e,t){for await(const n of t){if(this.closed)break;this.onIncomingMessage(e,n)}}generateChannels(e){const t=dy(),n=Kf()(),i={iopub:this.generateChannel(e,"iopub",(()=>new t.Subscriber({maxMessageSize:-1,receiveHighWaterMark:0}))),shell:this.generateChannel(e,"shell",(()=>new t.Dealer({routingId:n,sendHighWaterMark:0,receiveHighWaterMark:0,maxMessageSize:-1}))),control:this.generateChannel(e,"control",(()=>new t.Dealer({routingId:n,sendHighWaterMark:0,receiveHighWaterMark:0,maxMessageSize:-1}))),stdin:this.generateChannel(e,"stdin",(()=>new t.Dealer({routingId:n,sendHighWaterMark:0,receiveHighWaterMark:0,maxMessageSize:-1})))};return i.iopub.subscribe(),i}onIncomingMessage(e,t){const n=this.closed?{}:sy.Jx(t,this.connection.key,this.connection.signature_scheme);n.channel=e,this.receiveHooks.length?this.msgChain=this.msgChain.then((()=>{const e=this.serialize(n);return Promise.all(this.receiveHooks.map((t=>t(e))))})).then((()=>this.fireOnMessage(n,e))):this.msgChain=this.msgChain.then((()=>this.fireOnMessage(n,e)))}fireOnMessage(e,t){if(!this.closed)try{!function(e,t){const n=e.header;gy.forEach((e=>{"string"!=typeof n[e]&&(n[e]="")})),"string"!=typeof e.channel&&(e.channel=t),e.content||(e.content={}),e.metadata||(e.metadata={}),"iopub"===e.channel&&function(e){if("iopub"!==e.channel)return;const t=e.header.msg_type;if(t in vy){const n=vy[t];if(void 0===n)return;const i=Object.keys(n),r=e.content;for(let e=0;e<i.length;e++){let t=n[i[e]];Array.isArray(t)||(t=[t]);const o=i[e];if(!(o in r)||typeof r[o]!==t[0])switch(t[0]){case"string":r[o]="";break;case"boolean":r[o]=!1;break;case"object":r[o]={};break;case"number":r[o]=0}}}}(e)}(e,t),this.onmessage({data:e,type:"message",target:this})}catch(t){Sn(`Failed to handle message in Jupyter Kernel package ${JSON.stringify(e)}`,t)}}sendMessage(e,t){const n=sy.cv(e,this.connection.key,this.connection.signature_scheme);if(!t&&this.sendHooks.length){const t=this.serialize(e);this.sendChain=this.sendChain.then((()=>Promise.all(this.sendHooks.map((e=>e(t,ae)))))).then((()=>this.postToSocket(e.channel,n)))}else this.sendChain=this.sendChain.then((()=>{this.postToSocket(e.channel,n)}));this.sendChain.catch(ae)}postToSocket(e,t){const n=this.channels[e];n?n.send(t).catch((e=>{Sn("Error communicating with the kernel",e)})):Sn(`Attempting to send message on invalid channel: ${e}`)}}const gy=["username","version","session","msg_id","msg_type"],vy={stream:{name:"string",text:"string"},display_data:{data:"object",metadata:"object"},execute_input:{code:"string",execution_count:"number"},execute_result:{execution_count:"number",data:"object",metadata:"object"},error:{ename:"string",evalue:"string",traceback:"object"},status:{execution_state:["string",["starting","idle","busy","restarting","dead"]]},clear_output:{wait:"boolean"},comm_open:{comm_id:"string",target_name:"string",data:"object"},comm_msg:{comm_id:"string",data:"object"},comm_close:{comm_id:"string"},shutdown_reply:{restart:"boolean"}};class yy{get connectionStatus(){return this.realKernel.connectionStatus}get serverSettings(){return this.realKernel.serverSettings}get id(){return this.realKernel.id}get name(){return this.realKernel.name}get model(){return this.realKernel.model}get username(){return this.realKernel.username}get clientId(){return this.realKernel.clientId}get status(){return this.realKernel.status}get info(){return this.realKernel.info}get handleComms(){return this.realKernel.handleComms}get isDisposed(){return this.realKernel.isDisposed}constructor(e,t,n){this.realKernel=e,this.kernelProcess=n,this.statusChanged=new wm.Signal(this),this.connectionStatusChanged=new wm.Signal(this),this.iopubMessage=new wm.Signal(this),this.unhandledMessage=new wm.Signal(this),this.anyMessage=new wm.Signal(this),this.disposed=new wm.Signal(this),this.socket=t,this.startHandleKernelMessages(),t.emit("open")}createComm(e,t){return this.realKernel.createComm(e,t)}hasComm(e){return this.realKernel.hasComm(e)}clone(e){return wy(this.kernelProcess,e?.clientId||this.clientId)}async shutdown(){xm(this.realKernel),await this.kernelProcess.dispose(),this.socket.dispose(),this.stopHandlingKernelMessages()}get spec(){if(hs(this.kernelProcess.kernelConnectionMetadata)){const e=xo()(this.kernelProcess.kernelConnectionMetadata.kernelSpec),t="resources"in e?e.resources:{};return{...e,resources:t}}return Sn("Fetching kernel spec from raw kernel using JLab API"),this.realKernel.spec}sendShellMessage(e,t,n){return this.realKernel.sendShellMessage(e,t,n)}sendControlMessage(e,t,n){return this.realKernel.sendControlMessage(e,t,n)}reconnect(){throw new Error("Reconnect is not supported.")}async interrupt(){if(this.kernelProcess.canInterrupt)return this.kernelProcess.interrupt();if("message"===this.kernelProcess.kernelConnectionMetadata.kernelSpec.interrupt_mode){kn("Interrupting kernel with a shell message");const e=__webpack_require__(98250).KernelMessage.createMessage({msgType:"interrupt_request",channel:"shell",username:this.realKernel.username,session:this.realKernel.clientId,content:{}});await this.realKernel.sendShellMessage(e,!0,!0).done.catch((e=>Sn("Failed to interrupt via a message",e)))}else Sn("Kernel interrupt not supported")}restart(){throw new Error("This method should not be called. Restart is implemented at a higher level")}requestKernelInfo(){return this.realKernel.requestKernelInfo()}requestComplete(e){return this.realKernel.requestComplete(e)}requestInspect(e){return this.realKernel.requestInspect(e)}requestHistory(e){return this.realKernel.requestHistory(e)}requestExecute(e,t,n){return this.realKernel.requestExecute(e,t,n)}requestDebug(e,t){return this.realKernel.requestDebug(e,t)}requestIsComplete(e){return this.realKernel.requestIsComplete(e)}requestCommInfo(e){return this.realKernel.requestCommInfo(e)}sendInputReply(e){return this.realKernel.sendInputReply(e)}registerCommTarget(e,t){return this.realKernel.registerCommTarget(e,t)}removeCommTarget(e,t){return this.realKernel.removeCommTarget(e,t)}dispose(){ce((()=>this.realKernel.dispose())),ce((()=>this.socket.dispose()))}registerMessageHook(e,t){this.realKernel.registerMessageHook(e,t)}removeMessageHook(e,t){this.realKernel.removeMessageHook(e,t)}startHandleKernelMessages(){this.realKernel.anyMessage.connect(this.onAnyMessage,this),this.realKernel.iopubMessage.connect(this.onIOPubMessage,this),this.realKernel.unhandledMessage.connect(this.onUnhandledMessage,this),this.realKernel.statusChanged.connect(this.onStatusChanged,this),this.realKernel.disposed.connect(this.onDisposed,this)}stopHandlingKernelMessages(){this.realKernel.anyMessage.disconnect(this.onAnyMessage,this),this.realKernel.iopubMessage.disconnect(this.onIOPubMessage,this),this.realKernel.unhandledMessage.disconnect(this.onUnhandledMessage,this),this.realKernel.statusChanged.disconnect(this.onStatusChanged,this),this.realKernel.disposed.disconnect(this.onDisposed,this)}onAnyMessage(e,t){this.anyMessage.emit(t)}onIOPubMessage(e,t){this.iopubMessage.emit(t)}onUnhandledMessage(e,t){this.unhandledMessage.emit(t)}onStatusChanged(e,t){this.statusChanged.emit(t)}onDisposed(e){this.disposed.emit()}}let by;function wy(e,t){const n=__webpack_require__(98250),i=__webpack_require__(642);let r;const o=n.ServerConnection.makeSettings({WebSocket:class extends my{constructor(){super(e.connection,i.serialize,i.deserialize),r=this}},wsUrl:"RAW"});by||(by=__webpack_require__(60153));const s=new by.KernelConnection({serverSettings:o,clientId:t,handleComms:!0,username:Kf()(),model:{name:ds(e.kernelConnectionMetadata)||"python3",id:Kf()()}});return new yy(s,r,e)}class _y{get atleastOneCellExecutedSuccessfully(){return!0===this.cellExecutedSuccessfully}get jupyterLabServices(){return this._jupyterLabServices||(this._jupyterLabServices=__webpack_require__(98250)),this._jupyterLabServices}constructor(e,t){this.kernelProcess=e,this.resource=t,this.isDisposed=!1,this.kernelConnectionMetadata=e.kernelConnectionMetadata;const n=this.signaling=__webpack_require__(4016);this._statusChanged=new n.Signal(this),this._propertyChanged=new n.Signal(this),this._kernelChanged=new n.Signal(this),this._propertyChanged=new n.Signal(this),this._ioPubMessage=new n.Signal(this),this._terminated=new n.Signal(this),this._anyMessage=new n.Signal(this),this._unhandledMessage=new n.Signal(this),this._connectionStatusChanged=new n.Signal(this),this._disposed=new n.Signal(this),this._id=Kf()(),this._clientID=Kf()(),this._kernel=wy(e,this._clientID),this._kernel.statusChanged.connect(this.onKernelStatus,this),this._kernel.iopubMessage.connect(this.onIOPubMessage,this),this._kernel.connectionStatusChanged.connect(this.onKernelConnectionStatus,this),this._kernel.unhandledMessage.connect(this.onUnhandledMessage,this),this._kernel.anyMessage.connect(this.onAnyMessage,this),this._kernel.disposed.connect(this.onDisposed,this),this.exitHandler=e.exited(this.handleUnhandledExitingOfKernelProcess,this)}get connectionStatus(){return this._kernel.connectionStatus}get connectionStatusChanged(){return this._connectionStatusChanged}get disposed(){return this._disposed}async dispose(){const e=(new Error).stack;Dh(this.resource,F.RawKernelSessionDisposed,void 0,{stacktrace:e}),this.isDisposing=!0,this.isDisposed||(this.exitHandler.dispose(),await this._kernel.shutdown().catch((e=>Cn(`Failed to shutdown kernel, ${this.kernelConnectionMetadata.id}`,e))),this._kernel.dispose(),await this.kernelProcess.dispose());try{this._kernel.statusChanged.disconnect(this.onKernelStatus,this),this._kernel.iopubMessage.disconnect(this.onIOPubMessage,this),this._kernel.connectionStatusChanged.disconnect(this.onKernelConnectionStatus,this),this._kernel.unhandledMessage.disconnect(this.onUnhandledMessage,this),this._kernel.anyMessage.disconnect(this.onAnyMessage,this),this._kernel.disposed.disconnect(this.onDisposed,this)}catch{}this.isDisposed=!0,this.signaling.Signal.disconnectAll(this)}get id(){return this._id}get kernel(){return this._kernel}get kernelSocketInformation(){return{socket:this._kernel.socket,options:{id:this._kernel.id,clientId:this._clientID,userName:"",model:this._kernel.model}}}get statusChanged(){return this._statusChanged}async waitForReady(){En(`Waiting for Raw session to be ready, currently ${this.connectionStatus}`);const e=ie(),t=(t,n)=>{"connected"==n?(En("Raw session connected"),e.resolve(n)):En(`Raw session not connected, status: ${n}`)};this.connectionStatusChanged.connect(t),"connected"===this.connectionStatus&&(En("Raw session connected"),e.resolve(this.connectionStatus)),En("Waiting for Raw session to be ready for 30s");const n=await Z(3e4,e.promise);if(this.connectionStatusChanged.disconnect(t),En(`Waited for Raw session to be ready & got ${n}`),"connected"!==n)throw new yh(this.kernelConnectionMetadata)}shutdown(){return this.dispose()}get terminated(){return this._terminated}get kernelChanged(){return this._kernelChanged}get propertyChanged(){return this._propertyChanged}get iopubMessage(){return this._ioPubMessage}get unhandledMessage(){return this._unhandledMessage}get anyMessage(){return this._anyMessage}get path(){throw new Error("Not yet implemented")}get name(){return this.kernel.name}get type(){return"notebook"}get serverSettings(){return this.kernel.serverSettings}get model(){return{id:this._id,name:this._kernel.name,path:this.kernelProcess.kernelConnectionMetadata.interpreter?.uri.fsPath||"kernel_path",type:"notebook",kernel:this._kernel.model}}get status(){return this.kernel.status}setPath(e){throw new Error("Not yet implemented")}setName(e){throw new Error("Not yet implemented")}setType(e){throw new Error("Not yet implemented")}changeKernel(e){throw new Error("Not yet implemented")}onKernelStatus(e,t){xn(`RawSession status changed to ${t}`),this._statusChanged.emit(t)}onIOPubMessage(e,t){!this.cellExecutedSuccessfully&&"execute_result"===t.header.msg_type&&t.content&&(this.jupyterLabServices.KernelMessage.isExecuteResultMsg(t)||this.jupyterLabServices.KernelMessage.isExecuteInputMsg(t))&&t.content.execution_count&&(this.cellExecutedSuccessfully=!0),this._ioPubMessage.emit(t)}onAnyMessage(e,t){this._anyMessage.emit(t)}onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}onKernelConnectionStatus(e,t){this._connectionStatusChanged.emit(t)}onDisposed(e){this._disposed.emit()}handleUnhandledExitingOfKernelProcess(e){this.isDisposing||(Sn(`Disposing session as kernel process died ExitCode: ${e.exitCode}, Reason: ${e.reason}`),Dh(this.resource,F.RawKernelSessionKernelProcessExited,e.exitCode?{exitCode:e.exitCode}:void 0,{exitReason:Kr(e.reason)}),this.dispose().catch(ae))}}class Sy extends Pm{get atleastOneCellExecutedSuccessfully(){return!!(this.session&&this.session instanceof _y)&&this.session.atleastOneCellExecutedSuccessfully}get status(){return this.terminatingStatus&&"dead"!==super.status?this.terminatingStatus:super.status}constructor(e,t,n,i,r){super("localRaw",t,i,n),this.kernelLauncher=e,this.launchTimeout=r,this.processExitHandler=new WeakMap}async connect(e){let t;await Pf(this.resource,{kernelConnection:this.kernelConnectionMetadata});try{t=await this.startRawSession({...e,purpose:"start"}),Ia.throwIfCanceled(e.token),this.setSession(t),this.session?.statusChanged.connect(this.statusHandler)}catch(t){throw this.connected=!1,Ea(t)||e.token.isCancellationRequested?(En("Starting of raw session cancelled by user"),t):(Sn(`Failed to connect raw kernel session: ${t}`),t)}this.connected=!0}shutdownSession(e,t,n){const i=e&&this.processExitHandler.get(e);i?.dispose();const r=(new Error).stack;return super.shutdownSession(e,t,n).then((()=>{if(Dh(this.resource,F.RawKernelSessionShutdown,void 0,{isRequestToShutdownRestartSession:n,stacktrace:r}),e)return e.kernelProcess.dispose()}))}setSession(e){if(e&&kn(`Started Kernel ${ls(this.kernelConnectionMetadata)} (pid: ${e.kernelProcess.pid})`),super.setSession(e),!e)return;this.terminatingStatus=void 0;const t=e.kernelProcess.exited((({exitCode:t,reason:n})=>{e===this.session&&(Dh(this.resource,F.RawKernelSessionKernelProcessExited,t?{exitCode:t}:void 0,{exitReason:Kr(n)}),Sn(`Raw kernel process exited code: ${t}`),this.terminatingStatus="terminating",this.onStatusChangedEvent.fire("terminating"),this.setSession(void 0),this.shutdownSession(e,this.statusHandler,!1).catch((e=>{Sn(`Error shutting down jupyter session: ${e}`)})).finally((()=>{this.terminatingStatus&&(this.terminatingStatus="dead",this.onStatusChangedEvent.fire("dead"))})))}));this.disposables.push(t),this.processExitHandler.set(e,t)}startRestartSession(e){const t=new Oe.CancellationTokenSource,n=this.createRestartSession(e,t.token);return this.restartSessionPromise={token:t,promise:n},n.catch(ae),n.finally((()=>{t.dispose(),this.restartSessionPromise?.promise===n&&(this.restartSessionPromise=void 0)})).catch(ae),n}async createRestartSession(e,t){if(!this.kernelConnectionMetadata||"connectToLiveRemoteKernel"===this.kernelConnectionMetadata.kind)throw new Error("Unsupported - unable to restart live kernel sessions using raw kernel.");return this.startRawSession({token:t,ui:new hh(e),purpose:"restart"})}async startRawSession(e){if("startUsingLocalKernelSpec"!==this.kernelConnectionMetadata.kind&&"startUsingPythonInterpreter"!==this.kernelConnectionMetadata.kind)throw new Error(`Unable to start Raw Kernels for Kernel Connection of type ${this.kernelConnectionMetadata.kind}`);this.terminatingStatus=void 0;const t=await Na.wrapAndReportProgress(this.resource,gr.connectingToKernel(ls(this.kernelConnectionMetadata)),(()=>this.kernelLauncher.launch(this.kernelConnectionMetadata,this.launchTimeout,this.resource,this.workingDirectory.fsPath,e.token)));return Na.wrapAndReportProgress(this.resource,gr.waitingForJupyterSessionToBeIdle,(()=>this.postStartRawSession(e,t)))}async postStartRawSession(e,t){const n=new _y(t,this.resource);try{En("Waiting for Raw Session to be ready in postStartRawSession"),await Ta(e.token,n.waitForReady()),En("Successfully waited for Raw Session to be ready in postStartRawSession")}catch(i){if(Sn("Failed waiting for Raw Session to be ready",i),await t.dispose(),n.dispose().catch(ae),Ea(i)||e.token.isCancellationRequested)throw new Oe.CancellationError;throw i}En(`Kernel status before requesting kernel info and after ready is ${n.kernel.status}`);const i=new se;let r=ie(),o=1;for(o=1;o<=2;o++){r=ie();const i=()=>r.resolve(!0);n.iopubMessage.connect(i);try{En("Sending request for kernelinfo"),await Ta(e.token,Promise.all([n.kernel.requestKernelInfo(),r.promise]),Q(Math.min(this.launchTimeout,1500)).then(ae))}catch(e){throw Sn("Failed to request kernel info",e),await t.dispose(),n.dispose().catch(ae),e}finally{n.iopubMessage.disconnect(i)}if(r.completed){En("Got response for requestKernelInfo");break}En("Did not get a response for requestKernelInfo")}return r.completed?En("Successfully compelted postStartRawSession"):Cn(`Didn't get response for requestKernelInfo after ${i.elapsedTime}ms.`),Dh(this.resource,F.RawKernelInfoResponse,{duration:i.elapsedTime,attempts:o},{timedout:!r.completed}),n}}var Cy=function(e,t){return function(n,i){t(n,i,e)}};let ky,Ey=class{get id(){return this._id}constructor(e,t,n,i,r){this.asyncRegistry=e,this.configService=t,this.workspaceService=n,this.kernelLauncher=i,this.disposables=r,this.sessions=new Set,this._id=Kf()(),this.disposed=!1,this.asyncRegistry.push(this)}async dispose(){if(!this.disposed){this.disposed=!0,kn(`Shutting down notebooks for ${this.id}`);const e=await Promise.all([...this.sessions.values()]);await Promise.all(e.map((e=>e.disposeAsync())))}}async create(e){En(`Creating raw notebook for resource '${pn(e.resource)}'`);const t=ie();let n;this.trackDisposable(t.promise);try{const i=!!e.kernelConnection,r=await this.workspaceService.computeWorkingDirectory(e.resource);Ia.throwIfCanceled(e.token);const o=this.configService.getSettings(e.resource).jupyterLaunchTimeout;if(n=new Sy(this.kernelLauncher,e.resource,Oe.Uri.file(r),e.kernelConnection,o),i||await Pf(e.resource,{kernelConnection:e.kernelConnection}),await n.connect(e),e.token.isCancellationRequested)throw new Oe.CancellationError;n.isConnected?t.resolve(n):t.reject(new Error(gr.rawConnectionBrokenError))}catch(e){n?.disposeAsync().catch((e=>{Sn(`Failed to dispose of raw session on launch error: ${e} `)})),t.reject(e)}return t.promise}trackDisposable(e){e.then((t=>{t.onDidDispose((()=>{this.sessions.delete(e)}),this,this.disposables)})).catch(ae),this.sessions.add(e)}};Ey=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Cy(0,zn(Bi)),Cy(1,zn(ji)),Cy(2,zn(Qn)),Cy(3,zn(Xp)),Cy(4,zn(Ri))],Ey);class xy extends Bm{get atleastOneCellExecutedSuccessfully(){return this.session.atleastOneCellExecutedSuccessfully}get status(){return this.terminatingStatus&&!this.isDisposed?this.terminatingStatus:this.isDisposed?"dead":this.session.kernel?this.session.kernel.status:(xn("Real kernel is "+(this.session.kernel?"defined":"undefined")),"unknown")}constructor(e,t,n){super("localRaw",e),this.resource=t,this.kernelConnectionMetadata=n,this.initializeKernelSocket()}dispose(){this.disposeAsync().catch(ae)}async disposeAsync(){await this.shutdown().catch(ae).finally((()=>this.session.dispose())).finally((()=>super.dispose()))}async waitForIdle(e,t){try{await $m(this.kernelConnectionMetadata,this.resource,this.session,e,t)}catch(e){throw xn("Error waiting for idle",e),await this.shutdown().catch(ae),e}}async shutdown(){if(this._isDisposed)return;this._isDisposed=!0,this.terminatingStatus="terminating",this.statusChanged.emit("terminating"),this.onStatusChangedEvent.fire("terminating");const e=`${this.session.kernel?.id}, ${this.kernelConnectionMetadata?.id}`;En(`Shutdown session ${e} - start called from ${new Error("").stack}`),xm(this.session.kernel),await Z(1e3,this.session.shutdown().catch(ae)),this.didShutdown.fire(),super.dispose(),En(`Shutdown session ${e} - shutdown complete`)}}class Ty{get connectionStatus(){return this.realKernel?this.realKernel.connectionStatus:"connecting"}get serverSettings(){return this.realKernel.serverSettings}get status(){return this.isDisposed||this.hasShutdown?"dead":this.isRestarting?"restarting":this.isShuttingDown?"terminating":this.realKernel?this.realKernel.status:"starting"}get info(){return this.realKernel?this.realKernel.info:this.infoDeferred.promise}get handleComms(){return this.realKernel.handleComms}get isDisposed(){return this._isDisposed||!0===this.realKernel?.isDisposed}constructor(e,t,n,i,r){this.resource=e,this.kernelLauncher=t,this.workingDirectory=n,this.launchTimeout=i,this.kernelConnectionMetadata=r,this.chainingExecute=new Cm,this.statusChanged=new wm.Signal(this),this.connectionStatusChanged=new wm.Signal(this),this.iopubMessage=new wm.Signal(this),this.unhandledMessage=new wm.Signal(this),this.anyMessage=new wm.Signal(this),this.disposed=new wm.Signal(this),this.id=Kf()(),this.clientId=Kf()(),this.username=Kf()(),this.infoDeferred=ie(),this.name=ds(r)||"python3",this.model={name:this.name,id:this.id}}async restart(){this.stopHandlingKernelMessages(),this._isDisposed=!1,this.isShuttingDown=!1,this.hasShutdown=!1,this.isRestarting=!0,this.restartToken=new Oe.CancellationTokenSource;try{this.statusChanged.emit("restarting"),await this.start(this.restartToken.token)}finally{this.restartToken.dispose()}}async start(e){const t=[],n=Pa(e);t.push(n);try{const i=this.kernelProcess;this.kernelProcess=void 0,i?.dispose()?.catch(ae),ce((()=>this.socket?.dispose())),ce((()=>this.realKernel?.dispose()));const r=this.kernelProcess=await Na.wrapAndReportProgress(this.resource,gr.connectingToKernel(ls(this.kernelConnectionMetadata)),(()=>this.kernelLauncher.launch(this.kernelConnectionMetadata,this.launchTimeout,this.resource,this.workingDirectory.fsPath,e)));if(e.isCancellationRequested)throw new Oe.CancellationError;this.hookupKernelProcessExitHandler(r);const o=function(e,t,n,i){const r=__webpack_require__(98250),o=__webpack_require__(642);let s;const a=r.ServerConnection.makeSettings({WebSocket:class extends my{constructor(){super(e.connection,o.serialize,o.deserialize),s=this}},wsUrl:"RAW"});return ky||(ky=__webpack_require__(60153)),{realKernel:new ky.KernelConnection({serverSettings:a,clientId:t,handleComms:!0,username:n,model:i}),socket:s,kernelProcess:e}}(this.kernelProcess,this.clientId,this.username,this.model);this.kernelProcess=o.kernelProcess,this.realKernel=o.realKernel,this.socket=o.socket,this.socket.emit("open"),o.realKernel.info.then((e=>this.infoDeferred.resolve(e)),(e=>this.infoDeferred.reject(e)));const s=setTimeout((()=>n.cancel()),this.launchTimeout);if(t.push({dispose:()=>clearTimeout(s)}),await Na.wrapAndReportProgress(this.resource,gr.waitingForJupyterSessionToBeIdle,(()=>async function(e,t,n,i,r){try{En("Waiting for Raw Session to be ready in postStartRawSession"),await Ta(e,async function(e,t,n){En(`Waiting for Raw session to be ready, currently ${e.connectionStatus}`);const i=ie(),r=(e,t)=>{"connected"==t?(En("Raw session connected"),i.resolve(t)):En(`Raw session not connected, status: ${t}`)};e.connectionStatusChanged.connect(r),"connected"===e.connectionStatus&&(En("Raw session connected"),i.resolve(e.connectionStatus)),En("Waiting for Raw session to be ready for 30s");const o=await Z(n,i.promise);if(e.connectionStatusChanged.disconnect(r),En(`Waited for Raw session to be ready & got ${o}`),"connected"!==o)throw new yh(t)}(r,i,t)),En("Successfully waited for Raw Session to be ready in postStartRawSession")}catch(t){if(Sn("Failed waiting for Raw Session to be ready",t),Ea(t)||e.isCancellationRequested)throw new Oe.CancellationError;throw t}En(`Kernel status before requesting kernel info and after ready is ${r?.status}`);const o=ie(),s=()=>o.resolve(!0);r.iopubMessage.connect(s);try{const i=new se;let s=1;for(let n=1;n<=2;n++){try{En("Sending request for kernelInfo"),await Ta(e,Promise.all([r.requestKernelInfo(),o.promise]),Q(Math.min(t,1500)).then(ae))}catch(e){throw Sn("Failed to request kernel info",e),e}if(o.completed){En("Got response for requestKernelInfo");break}En("Did not get a response for requestKernelInfo")}o.completed?En("Successfully completed postStartRawSession"):Cn(`Didn't get response for requestKernelInfo after ${i.elapsedTime}ms.`),Dh(n,F.RawKernelInfoResponse,{duration:i.elapsedTime,attempts:s},{timedout:!o.completed})}finally{r.iopubMessage.disconnect(s)}}(n.token,this.launchTimeout,this.resource,this.kernelConnectionMetadata,o.realKernel))),e.isCancellationRequested)throw new Oe.CancellationError;this.startHandleKernelMessages(),this.isRestarting=!1,this.statusChanged.emit(this.status)}catch(t){if(await Promise.all([this.kernelProcess?.dispose().catch(ae),this.realKernel?.shutdown().catch((e=>Cn(`Failed to shutdown kernel, ${this.kernelConnectionMetadata.id}`,e)))]),Ea(t)&&n.token.isCancellationRequested&&!e.isCancellationRequested)throw new yh(this.kernelConnectionMetadata);throw Ea(t)||e.isCancellationRequested?En("Starting of raw session cancelled by user"):Sn(`Failed to connect raw kernel session: ${t}`),t}finally{Ie(t)}}hookupKernelProcessExitHandler(e){const t=this.exitHandler;this.exitHandler=void 0,t?.dispose(),this.exitHandler=e.exited((t=>{e===this.kernelProcess&&!this.isDisposing&&this.kernelProcess&&"dead"!==this.status&&"terminating"!==this.status&&(Sn(`Disposing session as kernel process died ExitCode: ${t.exitCode}, Reason: ${t.reason}`),Dh(this.resource,F.RawKernelSessionKernelProcessExited,t.exitCode?{exitCode:t.exitCode}:void 0,{exitReason:Kr(t.reason)}),this.shutdown().catch(ae))}),this)}dispose(){this.isDisposed||this.isDisposing||(this.isDisposing=!0,this.shutdown().finally((()=>{this._isDisposed=!0,this.disposed.emit(),wm.Signal.disconnectAll(this)})).catch(ae))}async shutdown(){this.isShuttingDown||this.hasShutdown||(this.isShuttingDown=!0,this.restartToken?.cancel(),this.restartToken?.dispose(),xm(this.realKernel),await(this.kernelProcess?.dispose().catch(ae)),this.socket.dispose(),this.stopHandlingKernelMessages(),this.isShuttingDown=!1,this.hasShutdown=!0,this.isDisposing&&(this._isDisposed=!0),this.statusChanged.emit(this.status),this.connectionStatusChanged.emit("disconnected"))}createComm(e,t){return this.realKernel.createComm(e,t)}hasComm(e){return this.realKernel.hasComm(e)}clone(e){return this}get spec(){if(hs(this.kernelConnectionMetadata)){const e=xo()(this.kernelConnectionMetadata.kernelSpec),t="resources"in e?e.resources:{};return{...e,resources:t}}return Sn("Fetching kernel spec from raw kernel using JLab API"),this.realKernel.spec}sendShellMessage(e,t,n){return this.realKernel.sendShellMessage(e,t,n)}sendControlMessage(e,t,n){return this.realKernel.sendControlMessage(e,t,n)}reconnect(){throw new Error("Reconnect is not supported for Local Kernels as connections cannot be lost.")}async interrupt(){if(this.kernelProcess?.canInterrupt)return this.kernelProcess?.interrupt();if("message"===this.kernelConnectionMetadata.kernelSpec.interrupt_mode){kn("Interrupting kernel with a shell message");const e=__webpack_require__(98250).KernelMessage.createMessage({msgType:"interrupt_request",channel:"shell",username:this.realKernel.username,session:this.realKernel.clientId,content:{}});await this.realKernel.sendShellMessage(e,!0,!0).done.catch((e=>Sn("Failed to interrupt via a message",e)))}else Sn("Kernel interrupt not supported")}requestKernelInfo(){return this.realKernel.requestKernelInfo()}requestComplete(e){return this.realKernel.requestComplete(e)}requestInspect(e){return this.realKernel.requestInspect(e)}requestHistory(e){return this.realKernel.requestHistory(e)}requestExecute(e,t,n){return this.chainingExecute.requestExecute(this.realKernel,e,t,n)}requestDebug(e,t){return this.realKernel.requestDebug(e,t)}requestIsComplete(e){return this.realKernel.requestIsComplete(e)}requestCommInfo(e){return this.realKernel.requestCommInfo(e)}sendInputReply(e){return this.realKernel.sendInputReply(e)}registerCommTarget(e,t){return this.realKernel.registerCommTarget(e,t)}removeCommTarget(e,t){return this.realKernel.removeCommTarget(e,t)}registerMessageHook(e,t){this.realKernel.registerMessageHook(e,t)}removeMessageHook(e,t){this.realKernel.removeMessageHook(e,t)}startHandleKernelMessages(){this.realKernel.anyMessage.connect(this.onAnyMessage,this),this.realKernel.iopubMessage.connect(this.onIOPubMessage,this),this.realKernel.unhandledMessage.connect(this.onUnhandledMessage,this),this.realKernel.statusChanged.connect(this.onStatusChanged,this),this.realKernel.disposed.connect(this.onDisposed,this)}stopHandlingKernelMessages(){this.realKernel.anyMessage.disconnect(this.onAnyMessage,this),this.realKernel.iopubMessage.disconnect(this.onIOPubMessage,this),this.realKernel.unhandledMessage.disconnect(this.onUnhandledMessage,this),this.realKernel.statusChanged.disconnect(this.onStatusChanged,this),this.realKernel.disposed.disconnect(this.onDisposed,this)}onAnyMessage(e,t){this.anyMessage.emit(t)}onIOPubMessage(e,t){this.iopubMessage.emit(t)}onUnhandledMessage(e,t){this.unhandledMessage.emit(t)}onStatusChanged(e,t){this.statusChanged.emit(t)}onDisposed(e){this.disposed.emit()}}class Py{get atleastOneCellExecutedSuccessfully(){return!0===this.cellExecutedSuccessfully}get jupyterLabServices(){return this._jupyterLabServices||(this._jupyterLabServices=__webpack_require__(98250)),this._jupyterLabServices}get connectionStatus(){return this._kernel?.connectionStatus||"disconnected"}get serverSettings(){return __webpack_require__(98250).ServerConnection.makeSettings({wsUrl:"RAW"})}get model(){return{id:this.id,name:this.name,path:this.path,type:"notebook",kernel:{id:this._kernel?.id,name:this.name}}}get status(){return this.isDisposed?"dead":this.isTerminating?"terminating":this.kernel?.status??"unknown"}get kernel(){return this._kernel}get kernelSocketInformation(){return{socket:this._kernel.socket,options:{id:this._kernel.id,clientId:this._kernel.clientId,userName:this._kernel.username,model:this._kernel.model}}}constructor(e,t,n,i,r,o){this.resource=e,this.kernelConnectionMetadata=i,this.type=o,this.isDisposed=!1,this.statusChanged=new wm.Signal(this),this.kernelChanged=new wm.Signal(this),this.terminated=new wm.Signal(this),this.iopubMessage=new wm.Signal(this),this.unhandledMessage=new wm.Signal(this),this.anyMessage=new wm.Signal(this),this.disposed=new wm.Signal(this),this.connectionStatusChanged=new wm.Signal(this),this.propertyChanged=new wm.Signal(this),this._didShutDownOnce=!1,this.id=Kf()(),this.name=ds(this.kernelConnectionMetadata)||"python3",this.path=this.resource?.fsPath||this.kernelConnectionMetadata.interpreter?.uri.fsPath||"kernel_path",this._kernel=new Ty(e,t,n,r,i),this._kernel.statusChanged.connect(this.onKernelStatus,this),this._kernel.iopubMessage.connect(this.onIOPubMessage,this),this._kernel.connectionStatusChanged.connect(this.onKernelConnectionStatus,this),this._kernel.unhandledMessage.connect(this.onUnhandledMessage,this),this._kernel.anyMessage.connect(this.onAnyMessage,this),this._kernel.disposed.connect(this.onDisposed,this)}async startKernel(e){await Pf(this.resource,{kernelConnection:this.kernelConnectionMetadata}),await this._kernel.start(e.token)}dispose(){this._isDisposing=!0;const e=(new Error).stack;Dh(this.resource,F.RawKernelSessionDisposed,void 0,{stacktrace:e});try{this._kernel.statusChanged.disconnect(this.onKernelStatus,this),this._kernel.iopubMessage.disconnect(this.onIOPubMessage,this),this._kernel.connectionStatusChanged.disconnect(this.onKernelConnectionStatus,this),this._kernel.unhandledMessage.disconnect(this.onUnhandledMessage,this),this._kernel.anyMessage.disconnect(this.onAnyMessage,this),this._kernel.disposed.disconnect(this.onDisposed,this)}catch{}this.shutdown().catch(ae).finally((()=>{this._kernel.dispose(),this.isDisposed=!0,this.disposed.emit(),wm.Signal.disconnectAll(this)}))}async shutdown(){this._didShutDownOnce||(this._didShutDownOnce=!0,this.isTerminating=!0,this.statusChanged.emit("terminating"),await this._kernel.shutdown().catch((e=>Cn(`Failed to shutdown kernel, ${this.kernelConnectionMetadata.id}`,e))),this.isTerminating=!1,this._isDisposing&&(this.isDisposed=!0),this.terminated.emit(),this.statusChanged.emit(this.status))}onKernelStatus(e,t){xn(`RawSession status changed to ${t}`),this.statusChanged.emit(t)}setPath(e){throw new Error("Not yet implemented")}setName(e){throw new Error("Not yet implemented")}setType(e){throw new Error("Not yet implemented")}changeKernel(e){throw new Error("Not yet implemented")}onIOPubMessage(e,t){!this.cellExecutedSuccessfully&&"execute_result"===t.header.msg_type&&t.content&&(this.jupyterLabServices.KernelMessage.isExecuteResultMsg(t)||this.jupyterLabServices.KernelMessage.isExecuteInputMsg(t))&&t.content.execution_count&&(this.cellExecutedSuccessfully=!0),this.iopubMessage.emit(t)}onAnyMessage(e,t){this.anyMessage.emit(t)}onUnhandledMessage(e,t){this.unhandledMessage.emit(t)}onKernelConnectionStatus(e,t){this.connectionStatusChanged.emit(t)}onDisposed(e){this.disposed.emit()}}var Iy=function(e,t){return function(n,i){t(n,i,e)}};let Dy=class{constructor(e,t,n,i,r){this.asyncRegistry=e,this.configService=t,this.workspaceService=n,this.kernelLauncher=i,this.disposables=r,this.sessions=new Set,this.disposed=!1,this.asyncRegistry.push(this)}async dispose(){if(!this.disposed){this.disposed=!0;const e=await Promise.all([...this.sessions.values()]);await Promise.all(e.map((e=>e.shutdown().catch(ae).finally((()=>e.dispose())))))}}async create(e){En(`Creating raw notebook for resource '${pn(e.resource)}'`);const t=ie();let n;this.trackDisposable(t.promise);try{const[i]=await Promise.all([this.workspaceService.computeWorkingDirectory(e.resource).then((e=>Oe.Uri.file(e))),Pf(e.resource,{kernelConnection:e.kernelConnection})]);Ia.throwIfCanceled(e.token);const r=this.configService.getSettings(e.resource).jupyterLaunchTimeout,o=new Py(e.resource,this.kernelLauncher,i,e.kernelConnection,r,(e.resource?.path||"").toLowerCase().endsWith(".ipynb")?"notebook":"console");try{await Ta(e.token,o.startKernel(e))}catch(t){throw Ea(t)||e.token.isCancellationRequested?En("Starting of raw session cancelled by user"):Sn(`Failed to connect raw kernel session: ${t}`),t}if(n=new xy(o,e.resource,e.kernelConnection),e.token.isCancellationRequested)throw new Oe.CancellationError;t.resolve(n)}catch(e){n?.shutdown().catch((e=>{Sn(`Failed to dispose of raw session on launch error: ${e} `)})).finally((()=>n?.dispose())),t.reject(e)}return t.promise}trackDisposable(e){e.then((t=>{t.onDidDispose((()=>{this.sessions.delete(e)}),this,this.disposables)})).catch(ae),this.sessions.add(e)}};Dy=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Iy(0,zn(Bi)),Iy(1,zn(ji)),Iy(2,zn(Qn)),Iy(3,zn(Xp)),Iy(4,zn(Ri))],Dy);let Ry=class{constructor(e){this.configuration=e}get isSupported(){return this.isSupportedForLocalLaunch()}isSupportedForLocalLaunch(){return!this.isZQMDisabled()&&this.zmqSupported()}isZQMDisabled(){return this.configuration.getSettings().disableZMQSupport}zmqSupported(){if("boolean"==typeof this._isSupported)return this._isSupported;if("true"===(process.env.VSC_JUPYTER_NON_RAW_NATIVE_TEST||"").toLowerCase())return!1;try{dy(),this._isSupported=!0}catch(e){this._isSupported=!1}return this._isSupported}};Ry=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(ji))],Ry);const Oy=Symbol("IJupyterVariables"),Ay=Symbol("IKernelVariableRequester");var Ny=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},My=function(e,t){return function(n,i){t(n,i,e)}};let Ly=class{constructor(e,t,n){this.kernelVariables=t,this.debuggerVariables=n,this.refreshEventEmitter=new Oe.EventEmitter,e.push(n.refreshRequired(this.fireRefresh.bind(this))),e.push(t.refreshRequired(this.fireRefresh.bind(this)))}get refreshRequired(){return this.refreshEventEmitter.event}async getVariables(e,t){return this.variableHandler.getVariables(e,t)}async getFullVariable(e,t){return this.variableHandler.getFullVariable(e,t)}async getMatchingVariable(e,t,n){return this.variableHandler.getMatchingVariable(e,t,n)}async getDataFrameInfo(e,t,n,i){return this.variableHandler.getDataFrameInfo(e,t,n,i)}async getDataFrameRows(e,t,n,i,r){return this.variableHandler.getDataFrameRows(e,t,n,i,r)}get variableHandler(){return this.debuggerVariables.active?this.debuggerVariables:this.kernelVariables}fireRefresh(){this.refreshEventEmitter.fire()}};function jy(e){if("string"!=typeof e)throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);let t=__webpack_require__(14277);return t.default&&(t=t.default),e.replace(t(),"")}Ny([oo(F.VariableExplorerFetchTime)],Ly.prototype,"getVariables",null),Ly=Ny([Kn(),My(0,zn(Ri)),My(1,zn(Oy)),My(1,Nc(C.KERNEL_VARIABLES)),My(2,zn(Oy)),My(2,Nc(C.DEBUGGER_VARIABLES))],Ly);var Fy=function(e,t){return function(n,i){t(n,i,e)}};const Uy=/Type:\s*(\w+)/,qy=/Value:\s*(.*)/,Ky=/String form:\s*([\s\S]+?)\n/,Vy=/Docstring:\s*(.*)/,Wy=/Length:\s+(.*)/,$y=/^\s+\[(\d+) rows x (\d+) columns\]/m,By=new Set(["DataFrame","list","dict","ndarray","Series","Tensor","EagerTensor","DataArray"]);let Hy=class{constructor(e,t,n,r){this.configService=e,this.disposables=n,this.kernelProvider=r,this.variableRequesters=new Map,this.cachedVariables=new Map,this.refreshEventEmitter=new Oe.EventEmitter,this.variableRequesters.set(i,t)}get refreshRequired(){return this.refreshEventEmitter.event}async getVariables(e,t){return this.getVariablesBasedOnKernel(t,e)}async getMatchingVariable(e,t,n){const i=this.cachedVariables.get(t.uri.toString());if(i){let r=i.variables.find((t=>t.name===e));return r&&!r.value&&(r=await this.getVariableValueFromKernel(r,t,n)),r}{const i=await this.getVariableNamesAndTypesFromKernel(t,n);if(i){const r=i.find((t=>t.name===e));if(r)return this.getVariableValueFromKernel({name:e,value:void 0,supportsDataExplorer:!1,type:r.type,size:0,count:0,shape:"",truncated:!0},t,n)}}}async getDataFrameInfo(e,t,n,r){if(!t)return e;const o=gs(t?.kernelConnectionMetadata)||i,s=this.variableRequesters.get(o);if(s){r&&(e=await this.getFullVariable(e,t));let i=e.name;return n&&(i=`${e.name}${n}`),s.getDataFrameInfo(e,t,i)}return e}async getDataFrameRows(e,t,n,r,o){const s=gs(r?.kernelConnectionMetadata)||i,a=this.variableRequesters.get(s);if(a){let i=e.name;return o&&(i=`${e.name}${o}`),a.getDataFrameRows(t,n,r,i)}return{data:[]}}async getFullVariable(e,t,n){const r=gs(t?.kernelConnectionMetadata)||i,o=this.variableRequesters.get(r);return o?o.getFullVariable(e,t,n):e}async getVariablesBasedOnKernel(e,t){let n=this.cachedVariables.get(e.uri.toString());const i=this.kernelProvider.getKernelExecution(e).pendingCells.length>0,r=this.kernelProvider.getKernelExecution(e);n&&(i||n.currentExecutionCount===t.executionCount&&n.currentExecutionCount===r.executionCount)||(n={currentExecutionCount:r.executionCount,variables:(await this.getVariableNamesAndTypesFromKernel(e)).map((e=>({name:e.name,value:void 0,supportsDataExplorer:!1,type:e.type,size:0,shape:"",count:0,truncated:!0})))});const o=this.configService.getSettings(e.resourceUri).variableExplorerExclude?this.configService.getSettings().variableExplorerExclude?.split(";"):[],s={executionCount:r.executionCount,pageStartIndex:-1,pageResponse:[],totalCount:0,refreshCount:t.refreshCount};if(n){const i=t.sortColumn,r=(e,n)=>{const r=e[i]?e[i]:"",o=n[i]?n[i]:"";return t.sortAscending?r.localeCompare(o,void 0,{sensitivity:"base"}):o.localeCompare(r,void 0,{sensitivity:"base"})};n.variables.sort(r);const a=t.startIndex?t.startIndex:0,c=t.pageSize?t.pageSize:100;s.pageStartIndex=a;for(let t=a;t<a+c&&t<n.variables.length;){if(o&&o.indexOf(n.variables[t].type)>=0){n.variables.splice(t,1);continue}const i="string"==typeof n.variables[t].value?n.variables[t]:await this.getVariableValueFromKernel(n.variables[t],e);n.variables[t]=i,s.pageResponse.push(i),t+=1}this.cachedVariables.set(e.uri.toString(),n),s.totalCount=n.variables.length}return s}async getVariableProperties(e,t,n){const r=await this.getMatchingVariable(e,t,n),o=gs(t.kernelConnectionMetadata)||i,s=this.variableRequesters.get(o);return s?s.getVariableProperties(e,n,r):{}}async getVariableNamesAndTypesFromKernel(e,t){const n=gs(e.kernelConnectionMetadata)||i,r=this.variableRequesters.get(n);return r?r.getVariableNamesAndTypesFromKernel(e,t):[]}inspect(e,t,n=0,i){const r=ie();try{e.requestInspect({code:t,cursor_pos:n,detail_level:0}).then((e=>{e&&"ok"===e.content.status?r.resolve(e.content.data):r.resolve(void 0)})).catch((e=>{r.reject(e)}))}catch(e){r.reject(e)}return i&&this.disposables.push(i.onCancellationRequested((()=>r.reject(new Oe.CancellationError)))),r.promise}async getVariableValueFromKernel(e,t,n){let i={...e};if(!t.disposed&&t.session?.kernel){const r=await this.inspect(t.session.kernel,e.name,0,n);if(r&&r.hasOwnProperty("text/plain")){const e=jy(r["text/plain"].toString()),t=Uy.exec(e),n=Wy.exec(e),o=$y.exec(e);t&&(i.type=t[1]),i.value=[qy,Ky,Vy].reduce(((t,n)=>t||n.exec(e)?.[1]||""),""),n&&(i.count=parseInt(n[1],10)),o&&(i.shape=`(${o[1]}, ${o[2]})`)}r&&r.type&&(i.type=r.type.toString()),r&&r.value&&(i.value=r.value.toString()),By.has(i.type)&&(i.supportsDataExplorer=!0)}return i.type&&i.count&&!i.shape&&fs(t.kernelConnectionMetadata)&&i.supportsDataExplorer&&"list"!==i.type&&(i=await this.getFullVariable(i,t)),i}};Hy=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Fy(0,zn(ji)),Fy(1,zn(Ay)),Fy(1,Nc(C.PYTHON_VARIABLES_REQUESTER)),Fy(2,zn(Ri)),Fy(3,zn(na))],Hy);var zy=function(e,t){return function(n,i){t(n,i,e)}};let Jy=class{constructor(e,t,n,i,r,o,s){this.activationService=e,this.jupyterInterpreterService=t,this.disposables=n,this.extensionChecker=i,this.apiProvider=r,this.rawNotebookSupported=o,this.condaService=s}activate(){this.rawNotebookSupported.isSupported||(this.disposables.push(this.jupyterInterpreterService.onDidChangeInterpreter((()=>this.preWarmInterpreterVariables().catch(ae)))),this.preWarmInterpreterVariables().catch(ae),this.apiProvider.onDidActivatePythonExtension(this.preWarmInterpreterVariables,this,this.disposables)),this.extensionChecker.isPythonExtensionInstalled&&(this.condaService.getCondaFile().catch(ae),this.condaService.getCondaVersion().catch(ae))}async preWarmInterpreterVariables(){if(!this.extensionChecker.isPythonExtensionActive)return;const e=await this.jupyterInterpreterService.getSelectedInterpreter();e&&this.activationService.getActivatedEnvironmentVariables(void 0,e).catch(ae)}};Jy=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),zy(0,zn(Ja)),zy(1,zn(Qp)),zy(2,zn(Ri)),zy(3,zn(Ao)),zy(4,zn(Oo)),zy(5,zn(Zp)),zy(6,zn(id))],Jy);class Gy extends Xi{constructor(){super("unknown",gr.jupyterDataRateExceeded)}}var Yy=function(e,t){return function(n,i){t(n,i,e)}};function Qy(e){const t=e.index,n=e.columns;return{data:e.data.map(((e,i)=>{const r={index:t[i]};return n.forEach(((t,n)=>{r[t]=e[n]})),r}))}}async function Xy(e,{code:t,initializeCode:n,cleanupCode:i},r){if(e.disposed||e.disposing||!e.session?.kernel||!e.session.kernel||e.session.isDisposed)return[];try{return n&&await Cs(e.session.kernel,n,r),await Cs(e.session.kernel,t,r)}catch(e){if(e instanceof Ur)return[];throw e}finally{i&&await Cs(e.session.kernel,i,r)}}let Zy=class{constructor(e,t){this.varScriptGenerator=e,this.dfScriptGenerator=t}async getDataFrameInfo(e,t,n){const{code:i,cleanupCode:r,initializeCode:o}=await this.dfScriptGenerator.generateCodeToGetDataFrameInfo({isDebugging:!1,variableName:n}),s=await Xy(t,{code:i,cleanupCode:r,initializeCode:o},{traceErrors:!0,traceErrorsMessage:"Failure in execute_request for getDataFrameInfo",telemetryName:F.PythonVariableFetchingCodeFailure}),a=t.notebook?.uri||t.resourceUri||t.uri;return{...e,...this.deserializeJupyterResult(s),fileName:a}}async getDataFrameRows(e,t,n,i){const{code:r,cleanupCode:o,initializeCode:s}=await this.dfScriptGenerator.generateCodeToGetDataFrameRows({isDebugging:!1,variableName:i,startIndex:e,endIndex:t}),a=await Xy(n,{code:r,cleanupCode:o,initializeCode:s},{traceErrors:!0,traceErrorsMessage:"Failure in execute_request for getDataFrameRows",telemetryName:F.PythonVariableFetchingCodeFailure});return Qy(this.deserializeJupyterResult(a))}async getVariableProperties(e,t,n){let i={};return n&&n.value&&(i[`${e}`]=n.value),i}async getVariableNamesAndTypesFromKernel(e,t){if(e.session){const{code:t,cleanupCode:n,initializeCode:i}=await this.varScriptGenerator.generateCodeToGetVariableTypes({isDebugging:!1}),r=await Xy(e,{code:t,cleanupCode:n,initializeCode:i},{traceErrors:!0,traceErrorsMessage:"Failure in execute_request for getVariableNamesAndTypesFromKernel",telemetryName:F.PythonVariableFetchingCodeFailure});if(e.disposed||e.disposing)return[];const o=this.deserializeJupyterResult(r),s=[];for(const[e,t]of Object.entries(o)){const n={name:e,value:void 0,supportsDataExplorer:!1,type:t||"",size:0,shape:"",count:0,truncated:!0};s.push(n)}return s}return[]}async getFullVariable(e,t,n){const{code:i,cleanupCode:r,initializeCode:o}=await this.varScriptGenerator.generateCodeToGetVariableInfo({isDebugging:!1,variableName:e.name}),s=await Xy(t,{code:i,cleanupCode:r,initializeCode:o},{traceErrors:!0,traceErrorsMessage:"Failure in execute_request for getFullVariable",telemetryName:F.PythonVariableFetchingCodeFailure});return{...e,...this.deserializeJupyterResult(s)}}extractJupyterResultText(e){if(e.length>0){const t=e[0];if(t&&"stream"===t.output_type&&"stderr"===t.name&&t.hasOwnProperty("text")){const e=t.text;if(e.includes("iopub_data_rate_limit"))throw new Gy;{const t=gr.jupyterGetVariablesExecutionError(e);throw Sn(t),new Error(t)}}if(t&&"execute_result"===t.output_type){const e=t.data;if(e&&e.hasOwnProperty("text/plain"))return e["text/plain"]}if(t&&"stream"===t.output_type&&t.hasOwnProperty("text"))return t.text;if(t&&"error"===t.output_type&&t.hasOwnProperty("traceback")){const e=t.traceback.map(jy).join("\r\n"),n=gr.jupyterGetVariablesExecutionError(e);throw Sn(n),new Error(n)}}throw new Error(gr.jupyterGetVariablesBadResults)}deserializeJupyterResult(e){const t=this.extractJupyterResultText(e);return JSON.parse(t)}};Zy=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Yy(0,zn(Gi)),Yy(1,zn(Yi))],Zy);var eb=function(e,t){return function(n,i){t(n,i,e)}};const tb=1728e5;let nb=class extends dc{constructor(e,t,n,i){super(),this.serverStorage=t,this.context=n,this.fs=i,this.executedCells=new WeakMap,this.chainedPromises=Promise.resolve(),n.globalStorageUri,e.push(this),this.storageFile=Oe.Uri.joinPath(this.context.globalStorageUri,"lastExecutedRemoteCell.json")}activate(){this.serverStorage.onDidRemove(this.onDidRemoveServers,this,this.disposables)}async getLastTrackedCellExecution(e,t){if(e.isUntitled)return;if(!ta(t.kernelConnectionMetadata)||!t.session?.id)return;if(this.staleState&&this.staleState[e.uri.toString()])return this.staleState[e.uri.toString()];const n=await this.getStorageFile();let i={};try{const e=await this.fs.readFile(n);i=JSON.parse(e.toString()),this.staleState=i}catch{return}return i[e.uri.toString()]}trackCellExecution(e,t){if(!ta(t.kernelConnectionMetadata)||e.document.isUntitled)return;let n;this.executedCells.delete(e);const i=[],r=(n,r)=>{if("send"===r.direction){const n=r.msg;if("execute_request"===n.header.msg_type&&n.metadata&&"object"==typeof n.metadata&&n.metadata&&"cellId"in n.metadata&&"string"==typeof n.metadata.cellId&&n.metadata.cellId===e.document.uri.toString()){const i=n.header.msg_id;this.executedCells.set(e,{msg_id:i,kernelId:t.session?.kernel?.id||"",cellIndex:e.index})}}else if("recv"===r.direction){const n=r.msg,o=this.executedCells.get(e);if(o?.msg_id&&iv(n)===o.msg_id){if(!o.startTime){o.startTime=(new Date).getTime();try{o.startTime=new Date(n.header.date).getTime()}catch{}this.executedCells.set(e,o)}"execution_count"in n.content&&"number"==typeof n.content.execution_count&&!o.executionCount&&o.executionCount!==n.content.execution_count&&(o.executionCount=n.content.execution_count,this.executedCells.set(e,o),this.trackLastExecution(e,t,o),Ie(i))}}},o=()=>{const e=t.session;e&&(e.anyMessage.connect(r),n=new Oe.Disposable((()=>ce((()=>e.anyMessage?.disconnect(r))))),i.push(n))};t.onStarted((()=>o()),i),t.session&&o()}deleteTrackedCellExecution(e,t){e.notebook.isUntitled||ta(t.kernelConnectionMetadata)&&t.session?.id&&(this.chainedPromises=this.chainedPromises.finally((async()=>{let t={};try{const e=await this.getStorageFile().then((()=>this.fs.readFile(this.storageFile)));t=JSON.parse(e.toString())}catch{return}const n=e.notebook.uri.toString();t[n].cellIndex===e.index&&(delete t[n],this.staleState=t,await this.fs.writeFile(this.storageFile,JSON.stringify(t)))})))}getStorageFile(){return this.ensureStorageExistsPromise=this.ensureStorageExistsPromise||(async()=>(await this.fs.createDirectory(this.context.globalStorageUri),this.storageFile))(),this.ensureStorageExistsPromise}trackLastExecution(e,t,n){if(!n.executionCount||!n.msg_id||!n.startTime)return;if(!ta(t.kernelConnectionMetadata)||!t.session?.id)return;const i={cellIndex:e.index,executionCount:n.executionCount,kernelId:t.session?.kernel?.id||"",msg_id:n.msg_id,serverId:fo(t.kernelConnectionMetadata.serverProviderHandle),sessionId:t.session?.id,startTime:n.startTime};this.chainedPromises=this.chainedPromises.finally((async()=>{let t={};try{const e=await this.getStorageFile().then((()=>this.fs.readFile(this.storageFile)));t=JSON.parse(e.toString())}catch{}t[e.notebook.uri.toString()]=i,this.removeOldItems(t),this.staleState=t,await this.fs.writeFile(this.storageFile,JSON.stringify(t))}))}onDidRemoveServers(e){0!==e.length&&(this.chainedPromises=this.chainedPromises.finally((async()=>{await this.getStorageFile();let t={};try{const e=await this.fs.readFile(this.storageFile);t=JSON.parse(e.toString())}catch{}let n=!1;const i=new Set(e.map((e=>fo(e))));Object.keys(t).forEach((e=>{const r=t[e];(i.has(r.serverId)||Date.now()-r.startTime>tb)&&(delete t[e],n=!0)})),n&&(this.removeOldItems(t),this.staleState=t,await this.fs.writeFile(this.storageFile,JSON.stringify(t)))})))}removeOldItems(e){Object.keys(e).forEach((t=>{const n=e[t];n&&Date.now()-n.startTime>tb&&delete e[t]}))}};nb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),eb(0,zn(Ri)),eb(1,zn(vi)),eb(2,zn(Ui)),eb(3,zn(La))],nb);var ib=function(e,t){return function(n,i){t(n,i,e)}};let rb=class{constructor(e,t,n,i){this.commandManager=e,this.serverUriStorage=t,this.registrations=n,this.disposables=i}activate(){this.disposables.push(this.commandManager.registerCommand(N.ClearSavedJupyterUris,(async()=>{await this.serverUriStorage.clear().catch(ae),await Promise.all(this.registrations.jupyterCollections.filter((e=>e.id.startsWith("_builtin")||e.extensionId===p)).map((async e=>{if(!e.serverProvider||!e.serverProvider.removeJupyterServer)return;const t=new Oe.CancellationTokenSource,n=await Promise.resolve(e.serverProvider.provideJupyterServers(t.token));await Promise.all((n||[]).map((t=>e.serverProvider.removeJupyterServer(t).catch(ae))))}))).catch(ae),await this.commandManager.executeCommand("dataScience.ClearUserProviderJupyterServerCache").then(ae,ae)}),this))}};rb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),ib(0,zn(Gn)),ib(1,zn(vi)),ib(2,zn(Ei)),ib(3,zn(Ri))],rb);var ob=function(e,t){return function(n,i){t(n,i,e)}};let sb=class{constructor(e,t,n,i,r,o,s){this.disposables=e,this.commandManager=t,this.appShell=n,this.extensionChecker=i,this.progressReporter=r,this.pythonApi=o,this.errorHandler=s,this.executingCells=new WeakSet}activate(){this.disposables.push(Oe.notebooks.onDidChangeNotebookCellExecutionState(this.onDidChangeNotebookCellExecutionState,this)),this.disposables.push(this.commandManager.registerCommand(N.InstallPythonExtensionViaKernelPicker,this.installPythonExtensionViaKernelPicker,this)),this.disposables.push(this.commandManager.registerCommand(N.InstallPythonViaKernelPicker,this.installPythonViaKernelPicker,this))}onDidChangeNotebookCellExecutionState(e){e.cell.notebook.notebookType===l&&(e.state===Oe.NotebookCellExecutionState.Pending||e.state===Oe.NotebookCellExecutionState.Executing?this.executingCells.add(e.cell):e.state===Oe.NotebookCellExecutionState.Idle&&this.executingCells.delete(e.cell))}async installPythonViaKernelPicker(){io(F.PythonNotInstalled,void 0,{action:"displayed"});const e=this.installedOnceBefore?[lr.install,lr.reload]:[lr.install],t=await this.appShell.showErrorMessage(gr.pythonNotInstalled,{modal:!0},...e);t===lr.install?(this.installedOnceBefore=!0,io(F.PythonNotInstalled,void 0,{action:"download"}),await this.commandManager.executeCommand("python.installPython")):t===lr.reload?(io(F.PythonNotInstalled,void 0,{action:"reload"}),await this.commandManager.executeCommand("jupyter.reloadVSCode",gr.reloadRequired)):io(F.PythonNotInstalled,void 0,{action:"dismissed"})}async installPythonExtensionViaKernelPicker(){if(!this.extensionChecker.isPythonExtensionInstalled){io(F.PythonExtensionNotInstalled,void 0,{action:"displayed"});const e=this.progressReporter.createProgressIndicator(gr.installingPythonExtension);try{await this.extensionChecker.directlyInstallPythonExtension();const e="hooked",t=await Z(6e4,"timeout",this.pythonApi.pythonExtensionHooked.then((()=>e)));if(this.extensionChecker.isPythonExtensionInstalled&&t===e)return En("Python Extension installed via Kernel Picker command"),io(F.PythonExtensionInstalledViaKernelPicker,void 0,{action:"success"}),!0;Sn("Failed to install Python Extension via Kernel Picker command"),io(F.PythonExtensionInstalledViaKernelPicker,void 0,{action:"failed"}),this.errorHandler.handleError(new Error(gr.failedToInstallPythonExtension)).then(ae,ae)}finally{e.dispose()}}}};sb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),ob(0,zn(Ri)),ob(1,zn(Gn)),ob(2,zn(Jn)),ob(3,zn(Ao)),ob(4,zn(Qu)),ob(5,zn(Oo)),ob(6,zn(bo))],sb);var ab=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},cb=function(e,t){return function(n,i){t(n,i,e)}};let lb=class{constructor(e,t,n,i,r){this.disposables=e,this.vscNotebook=t,this.controllerRegistration=n,this.commandManager=i,this.preferredRemoteKernelIdProvider=r}activate(){this.vscNotebook.onDidOpenNotebookDocument(this.onDidOpenNotebook,this,this.disposables),this.vscNotebook.notebookDocuments.forEach((e=>this.onDidOpenNotebook(e)))}async onDidOpenNotebook(e){if(!Za(e))return;const t=await this.preferredRemoteKernelIdProvider.getPreferredRemoteKernelId(e.uri);if(!t)return;const n=()=>{const n=this.controllerRegistration.getSelected(e),i=this.controllerRegistration.registered.find((e=>e.id===t));return!(!i||n?.id===i.id||(this.switchKernel(e,i.connection).catch(ae),0))};if(n())return;const i=this.controllerRegistration.onDidChange((e=>{e.added.length&&n()&&i.dispose()}),this,this.disposables);this.controllerRegistration.onControllerSelected((t=>{t.notebook===e&&i.dispose()}),this,this.disposables)}async switchKernel(e,t){En(`Using notebook.selectKernel to force remote kernel for ${pn(e.uri)} to ${t.id}`),await this.commandManager.executeCommand("notebook.selectKernel",{id:t.id,extension:p}),await X((async()=>{if(this.vscNotebook.activeNotebookEditor?.notebook===e){const n=this.controllerRegistration.getSelected(e);if(n?.connection.id===t.id)return n.restoreConnection(e).catch(ae),!0}return!1}),2e3,100)?En(`Successfully switched remote kernel for ${pn(e.uri)} to ${t.id}`):Cn(`Failed to switch remote kernel for ${pn(e.uri)} to ${t.id}`)}};function db(e){if(!e||!Array.isArray(e)||0===e.length)return;const t=[];for(let n=0;n<e.length;n+=1){const i=e[n];if("buffer"in i&&"byteOffset"in i){const e=Array.apply(null,new Uint8Array(i.buffer));t.push({...i,byteLength:i.byteLength,byteOffset:i.byteOffset,buffer:e})}else t.push([...new Uint8Array(i)])}return t}ab([ye()],lb.prototype,"onDidOpenNotebook",null),lb=ab([Kn(),cb(0,zn(Ri)),cb(1,zn(oi)),cb(2,zn(Ks)),cb(3,zn(Gn)),cb(4,zn(dh))],lb);class ub{get postMessage(){return this._postMessageEmitter.event}constructor(e,t){this.kernelProvider=e,this.document=t,this.commTargetsRegistered=new Set,this.pendingTargetNames=new Set,this._postMessageEmitter=new Oe.EventEmitter,this.messageHooks=new Map,this.pendingHookRemovals=new Map,this.messageHookRequests=new Map,this.disposables=[],this.disposed=!1,this.pendingMessages=[],this.subscribedToKernelSocket=!1,this.waitingMessageIds=new Map,this.totalWaitTime=0,this.totalWaitedMessages=0,this.hookCount=0,this.outputWidgetIds=new Set,this.isUsingIPyWidgets=!1,this.pendingTargetNames.add("jupyter.widget"),e.onDidStartKernel((e=>{e.notebook===t&&this.initialize()}),this,this.disposables),this.mirrorSend=this.mirrorSend.bind(this),this.onKernelSocketMessage=this.onKernelSocketMessage.bind(this);const n=__webpack_require__(642);this.deserialize=n.deserialize}dispose(){for(this.sendOverheadTelemetry(),this.disposed=!0;this.disposables.length;){const e=this.disposables.shift();e?.dispose()}}receiveMessage(e){switch(e.message){case Ds.IPyWidgets_logMessage:{const t=e.payload;"error"===t.category?Sn(`Widget Error: ${t.message}`):En(`Widget Message: ${t.message}`);break}case Ds.IPyWidgets_Ready:this.sendKernelOptions(),this.initialize();break;case Ds.IPyWidgets_msg:this.sendRawPayloadToKernelSocket(e.payload);break;case Ds.IPyWidgets_binary_msg:this.sendRawPayloadToKernelSocket(function(e){if(!Array.isArray(e)||0===e.length)return e;const t=[];for(let n=0;n<e.length;n+=1){const i=e[n];if("buffer"in i&&"byteOffset"in i){const e=new Uint8Array(i.buffer).buffer,n=new DataView(e,i.byteOffset,i.byteLength);t.push(n)}else{const e=new Uint8Array(i).buffer;t.push(e)}}return t}(e.payload)[0]);break;case Ds.IPyWidgets_msg_received:this.onKernelSocketResponse(e.payload);break;case Ds.IPyWidgets_registerCommTarget:this.registerCommTarget(e.payload);break;case Ds.IPyWidgets_RegisterMessageHook:this.registerMessageHook(e.payload);break;case Ds.IPyWidgets_RemoveMessageHook:this.possiblyRemoveMessageHook(e.payload);break;case Ds.IPyWidgets_MessageHookResult:this.handleMessageHookResponse(e.payload);break;case Ds.IPyWidgets_iopub_msg_handled:this.iopubMessageHandled(e.payload)}}sendRawPayloadToKernelSocket(e){this.pendingMessages.push(e),this.sendPendingMessages()}registerCommTarget(e){this.pendingTargetNames.add(e),this.initialize()}initialize(){this.jupyterLab||(this.jupyterLab=__webpack_require__(98250));const e=this.getKernel();e&&(this.subscribeToKernelSocket(e),this.registerCommTargets(e)),En("IPyWidgetMessageDispatcher.initialize")}raisePostMessage(e,t){this._postMessageEmitter.fire({message:e,payload:t})}subscribeToKernelSocket(e){!this.subscribedToKernelSocket&&e.session&&(this.subscribedToKernelSocket=!0,e.session.kernelSocket.subscribe((t=>{if(this.kernelSocketInfo?.socket?.removeReceiveHook(this.onKernelSocketMessage),this.kernelSocketInfo?.socket?.removeSendHook(this.mirrorSend),this.kernelWasConnectedAtLeastOnce){for(;this.pendingMessages.length;)this.pendingMessages.shift();this.waitingMessageIds.forEach((e=>e.resultPromise.resolve())),this.waitingMessageIds.clear(),this.messageHookRequests.forEach((e=>e.resolve(!1))),this.messageHookRequests.clear(),this.messageHooks.clear(),this.sendRestartKernel()}t&&t.socket?(this.kernelWasConnectedAtLeastOnce=!0,this.kernelSocketInfo=t,this.kernelSocketInfo.socket?.addReceiveHook(this.onKernelSocketMessage),this.kernelSocketInfo.socket?.addSendHook(this.mirrorSend),this.sendKernelOptions(),this.registerCommTargets(e),this.sendPendingMessages()):this.kernelSocketInfo=void 0})))}sendKernelOptions(){this.kernelSocketInfo&&this.raisePostMessage(Ds.IPyWidgets_kernelOptions,this.kernelSocketInfo.options)}async mirrorSend(e,t){if("string"==typeof e&&e.includes("shell")&&e.includes("execute_request")){const t=Date.now(),n=this.deserialize(e);if("shell"===n.channel&&"execute_request"===n.header.msg_type){if(!zg(n))return;const e=this.mirrorExecuteRequest(n);this.isUsingIPyWidgets&&await e,this.totalWaitTime=Date.now()-t,this.totalWaitedMessages+=1}}}sendRestartKernel(){this.raisePostMessage(Ds.IPyWidgets_onRestartKernel,void 0)}mirrorExecuteRequest(e){const t=ie();return this.waitingMessageIds.set(e.header.msg_id,{startTime:Date.now(),resultPromise:t}),this.raisePostMessage(Ds.IPyWidgets_mirror_execute,{id:e.header.msg_id,msg:e}),t.promise}messageNeedsFullHandle(e){return"iopub"===e.channel&&"comm_msg"===e.header?.msg_type&&"update"===e.content?.data?.method&&this.outputWidgetIds.has(e.content?.comm_id)}iopubMessageHandled(e){const t=e.id;this.fullHandleMessage&&this.fullHandleMessage.id===t&&(this.fullHandleMessage.promise.resolve(),this.fullHandleMessage=void 0)}async onKernelSocketMessage(e){const t=Kf()(),n=ie();if(this.waitingMessageIds.set(t,{startTime:Date.now(),resultPromise:n}),"string"==typeof e?zg(e)&&this.raisePostMessage(Ds.IPyWidgets_msg,{id:t,data:e}):this.raisePostMessage(Ds.IPyWidgets_binary_msg,{id:t,data:db([e])}),"string"!=typeof e||e.includes(K)||e.includes(C.DefaultCommTarget)||e.includes("comm_open")||e.includes("comm_close")||e.includes("comm_msg")){const t=this.deserialize(e);if(!zg(t))return;t&&t.content&&t.content.data&&(t.content.data[K]||t.content.target_name===C.DefaultCommTarget)&&(this.isUsingIPyWidgets=!0);const i="comm_open"===t.header?.msg_type&&"@jupyter-widgets/output"===t.content?.data?.state?._model_module&&"OutputModel"===t.content?.data?.state?._model_name,r="comm_close"===t.header?.msg_type&&this.outputWidgetIds.has(t.content?.comm_id);i?this.outputWidgetIds.add(t.content.comm_id):r?this.outputWidgetIds.delete(t.content.comm_id):this.messageNeedsFullHandle(t)&&(this.fullHandleMessage={id:t.header.msg_id,promise:ie()},await n.promise,await this.fullHandleMessage.promise.promise,this.fullHandleMessage=void 0)}}onKernelSocketResponse(e){const t=this.waitingMessageIds.get(e.id);t&&(this.waitingMessageIds.delete(e.id),this.totalWaitTime+=Date.now()-t.startTime,this.totalWaitedMessages+=1,t.resultPromise.resolve())}sendPendingMessages(){if(this.kernel?.session&&this.kernelSocketInfo)for(;this.pendingMessages.length;)try{this.kernelSocketInfo.socket?.sendToRealKernel(this.pendingMessages[0]),this.pendingMessages.shift()}catch(e){return void Sn("Failed to send message to Kernel",e)}}registerCommTargets(e){for(;this.pendingTargetNames.size>0;){const t=Array.from([...this.pendingTargetNames.values()]).shift();if(t){if(this.commTargetsRegistered.has(t))return;En(`Registering commtarget ${t}`),this.commTargetsRegistered.add(t),this.pendingTargetNames.delete(t),t!==C.DefaultCommTarget&&e.session?.kernel?.registerCommTarget(t,ae)}}}getKernel(){return this.document&&!this.kernel?.session&&(this.kernel=this.kernelProvider.get(this.document),this.kernel?.onDisposed((()=>this.kernel=void 0))),this.kernel&&!this.kernelRestartHandlerAttached&&(this.kernelRestartHandlerAttached=!0,this.disposables.push(this.kernel.onRestarted(this.handleKernelRestarts,this))),this.kernel}async handleKernelRestarts(){!this.disposed&&0!==this.commTargetsRegistered.size&&this.kernel?.session&&(Array.from(this.commTargetsRegistered.keys()).forEach((e=>{this.commTargetsRegistered.delete(e),this.pendingTargetNames.add(e)})),this.subscribeToKernelSocket(this.kernel),this.registerCommTargets(this.kernel))}registerMessageHook(e){try{if(this.kernel?.session?.kernel&&!this.messageHooks.has(e)){this.hookCount+=1;const t=this.messageHookCallback.bind(this);this.messageHooks.set(e,t),this.kernel.session.kernel.registerMessageHook(e,t)}}finally{this.raisePostMessage(Ds.IPyWidgets_ExtensionOperationHandled,{id:e,type:Ds.IPyWidgets_RegisterMessageHook})}}possiblyRemoveMessageHook(e){try{e.lastHookedMsgId?this.pendingHookRemovals.set(e.lastHookedMsgId,e.hookMsgId):this.removeMessageHook(e.hookMsgId)}finally{this.raisePostMessage(Ds.IPyWidgets_ExtensionOperationHandled,{id:e.hookMsgId,type:Ds.IPyWidgets_RemoveMessageHook})}}removeMessageHook(e){if(this.kernel?.session?.kernel&&this.messageHooks.has(e)){const t=this.messageHooks.get(e);this.messageHooks.delete(e),this.kernel.session.kernel.removeMessageHook(e,t)}}async messageHookCallback(e){const t=ie(),n=Kf()(),i=e.parent_header.msg_id;if(this.messageHooks.has(i)?(this.messageHookRequests.set(n,t),this.raisePostMessage(Ds.IPyWidgets_MessageHookCall,{requestId:n,parentId:i,msg:e})):t.resolve(!0),this.pendingHookRemovals.has(e.header.msg_id)){const t=this.pendingHookRemovals.get(e.header.msg_id);this.pendingHookRemovals.delete(e.header.msg_id),this.removeMessageHook(t)}return t.promise}handleMessageHookResponse(e){const t=this.messageHookRequests.get(e.requestId);t&&(this.messageHookRequests.delete(e.requestId),t.resolve(!!e.msgType.includes("comm")||e.result))}sendOverheadTelemetry(){io(F.IPyWidgetOverhead,{totalOverheadInMs:this.totalWaitTime,numberOfMessagesWaitedOn:this.totalWaitedMessages,averageWaitTime:this.totalWaitTime/this.totalWaitedMessages,numberOfRegisteredHooks:this.hookCount})}}var pb=function(e,t){return function(n,i){t(n,i,e)}};class hb{get postMessage(){return this._postMessageEmitter.event}constructor(e,t){this.baseMulticaster=e,this.oldMessages=t,this._postMessageEmitter=new Oe.EventEmitter,this.disposables=[],e.postMessage(this.raisePostMessage,this,this.disposables)}dispose(){for(;this.disposables.length;){const e=this.disposables.shift();e?.dispose()}}initialize(){return this.baseMulticaster.initialize()}receiveMessage(e){this.baseMulticaster.receiveMessage(e)}raisePostMessage(e){this.oldMessages.forEach((e=>{this._postMessageEmitter.fire(e)})),this.oldMessages=[],this._postMessageEmitter.fire(e)}}let fb=class{constructor(e,t){this.kernelProvider=t,this.messageDispatchers=new WeakMap,this.messagesPerNotebook=new WeakMap,this.disposed=!1,this.disposables=[],e.push(this),t.onDidDisposeKernel(this.trackDisposingOfKernels,this,e)}dispose(){for(this.disposed=!0;this.disposables.length;)this.disposables.shift()?.dispose()}create(e){let t=this.messageDispatchers.get(e);t||(t=new ub(this.kernelProvider,e),this.messageDispatchers.set(e,t),this.disposables.push(t.postMessage((t=>this.onMessage(t,e)),this)));let n=[];e&&this.messagesPerNotebook.get(e)&&(n=this.messagesPerNotebook.get(e)||[]);const i=new hb(t,n);return this.disposables.push(i),i}trackDisposingOfKernels(e){if(this.disposed)return;const t=e.notebook,n=this.messageDispatchers.get(t);this.messageDispatchers.delete(t),n?.dispose()}onMessage(e,t){t&&(this.messagesPerNotebook.set(t,this.messagesPerNotebook.get(t)||[]),e.message!==Ds.IPyWidgets_kernelOptions&&e.message!==Ds.IPyWidgets_registerCommTarget||this.messagesPerNotebook.get(t).push(e))}};fb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),pb(0,zn(Ri)),pb(1,zn(na))],fb);var mb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class gb{get configuredScriptSources(){return this.configurationSettings.getSettings(void 0).widgetScriptSources}constructor(e,t,n,i,r,o,s){this.kernel=e,this.localResourceUriConverter=t,this.configurationSettings=n,this.httpClient=i,this.sourceProviderFactory=r,this.isWebViewOnline=o,this.cdnScriptProvider=s,this.disposables=[],this.scriptProviders=this.sourceProviderFactory.getProviders(this.kernel,this.localResourceUriConverter,this.httpClient),this.monitorKernel()}dispose(){Ie(this.disposables),this.disposeScriptProviders()}async getBaseUrl(){const e=this.scriptProviders.find((e=>e.getBaseUrl));if(e)return e.getBaseUrl()}async getWidgetScriptSources(){const e=[];return await Promise.all(this.scriptProviders.map((async t=>{t.getWidgetScriptSources&&e.push(...await t.getWidgetScriptSources())}))),e}async getWidgetScriptSource(e,t){const n=await this.isWebViewOnline,i=(this.scriptProviders||[]).slice();let r={moduleName:e};for(;i.length;){const o=i.shift();if(!o)continue;const s=await o.getWidgetScriptSource(e,t,n);if(s.scriptUri){r=s;break}}return this.sendTelemetryForWidgetModule(e,t,"",r.source).catch(ae),r.scriptUri?kn(`Script source for Widget ${e}@${t} was found from source ${r.source}`):Sn(`Script source for Widget ${e}@${t} not found`),r}async sendTelemetryForWidgetModule(e,t,n,i){const r=`${e}.${e}@${t}`;if(gb.trackedWidgetModuleNames.has(r))return;gb.trackedWidgetModuleNames.add(r);const o=e.toLowerCase().startsWith("@jupyter-widgets"),s="cdn"===i||o||await this.cdnScriptProvider.isOnCDN(e),a=s?e.replace(/\//g,"_").replace(/\\/g,"_").replace(/@/g,"_at_"):void 0,c=s?n.replace(/\//g,"_").replace(/\\/g,"_").replace(/@/g,"_at_"):void 0;io(F.HashedIPyWidgetNameUsed,void 0,{hashedName:await jr(e),moduleName:a,modelName:c,source:i,moduleVersion:s?t:void 0,cdnSearched:this.configuredScriptSources.length>0})}disposeScriptProviders(){for(;this.scriptProviders&&this.scriptProviders.length;){const e=this.scriptProviders.shift();e&&e.dispose()}}monitorKernel(){this.kernel.onStarted(this.hookKernelEvents,this,this.disposables),this.kernel.onRestarted(this.hookKernelEvents,this,this.disposables);const e=this.kernel.kernelSocket.subscribe((()=>this.hookKernelEvents()));this.disposables.push(new Oe.Disposable((()=>e.unsubscribe())))}hookKernelEvents(){const e=this.kernel.session?.kernel;e&&(e.anyMessage.connect(this.onAnyMessage,this),this.disposables.push(new Oe.Disposable((()=>e.anyMessage.disconnect(this.onAnyMessage,this)))))}onAnyMessage(e,t){if("recv"===t.direction&&"comm_open"===t.msg.header.msg_type){const e=t.msg.content.data;e.state?._model_module&&e.state._model_name&&this.sendTelemetryForWidgetModule(e.state?._model_module,e.state?._model_module_version||"",e.state?._model_name).catch(ae)}}}gb.trackedWidgetModuleNames=new Set,mb([ye()],gb.prototype,"sendTelemetryForWidgetModule",null),mb([ye()],gb.prototype,"onAnyMessage",null);class vb{constructor(e,t){this.isWebExtension=e,this.converter=t}async asWebviewUri(e){return this.isWebExtension?e:this.converter(e)}}class yb{get postMessage(){return this.postEmitter.event}constructor(e,t,n,i,r,o,s,a){this.document=e,this.kernelProvider=t,this.configurationSettings=i,this.httpClient=r,this.sourceProviderFactory=o,this.cdnScriptProvider=a,this.postEmitter=new Oe.EventEmitter,this.disposables=[],this.isWebViewOnline=ie(),this.widgetSources=new Map,this.pendingModuleRequests=new Map,this.uriTranslationRequests=new of,this.uriConverter=new vb(s,(e=>(this.uriTranslationRequests.has(e)||this.uriTranslationRequests.set(e,ie()),this.postEmitter.fire({message:Is.ConvertUriForUseInWebViewRequest,payload:e}),this.uriTranslationRequests.get(e).promise))),this.isWebViewOnline.promise.catch(ae),n.push(this),this.kernelProvider.onDidStartKernel((e=>{e.notebook===this.document&&this.initialize()}),this,this.disposables)}dispose(){for(;this.disposables.length;)this.disposables.shift()?.dispose()}onMessage(e,t){if(e===Is.ConvertUriForUseInWebViewResponse){const e=t;e&&this.uriTranslationRequests.has(e.request)&&this.uriTranslationRequests.get(e.request).resolve(e.response)}else if(e===Ds.IPyWidgets_Ready)this.sendBaseUrl(),this.sendWidgetScriptSources().catch(ae);else if(e===Ds.IPyWidgets_IsOnline){const e=t.isOnline;this.isWebViewOnline.resolve(e)}else e===Ds.IPyWidgets_WidgetScriptSourceRequest&&t&&this.onRequestWidgetScript(t).catch(ae)}initialize(){this.jupyterLab||(this.jupyterLab=__webpack_require__(98250)),this.kernel||(this.kernel=this.kernelProvider.get(this.document)),this.kernel?.session&&(this.scriptProvider||(this.scriptProvider=new gb(this.kernel,this.uriConverter,this.configurationSettings,this.httpClient,this.sourceProviderFactory,this.isWebViewOnline.promise,this.cdnScriptProvider),this.kernel.onDisposed((()=>this.dispose())),this.handlePendingRequests(),this.sendBaseUrl(),En("IPyWidgetScriptSource.initialize")))}sendBaseUrl(){this.scriptProvider&&this.scriptProvider.getBaseUrl().then((e=>{e&&this.postEmitter.fire({message:Ds.IPyWidgets_BaseUrlResponse,payload:e.toString()})})).catch((e=>Sn("Failed to get baseUrl",e)))}async sendWidgetScriptSources(){if(this.scriptProvider&&!this.allWidgetScriptsSent)try{(await this.scriptProvider.getWidgetScriptSources()).forEach((e=>{"cdn"!==this.widgetSources.get(e.moduleName)?.source&&this.widgetSources.set(e.moduleName,e),this.postEmitter.fire({message:Ds.IPyWidgets_WidgetScriptSourceResponse,payload:e})}))}catch(e){Cn("Failed to fetch script sources",e)}finally{this.allWidgetScriptsSent=!0}}async onRequestWidgetScript(e){const{moduleName:t,moduleVersion:n,requestId:i}=e;if(kn(`${B.Green}Fetch Script for ${JSON.stringify(e)}`),await this.sendWidgetSource(t,n,i).catch((e=>Sn("Failed to send widget sources upon ready",e))),this.scriptProvider&&!this.allWidgetScriptsSent)try{await this.sendWidgetScriptSources()}finally{this.sendWidgetSource(t,n,i).catch(Sn.bind(void 0,"Failed to send widget sources upon ready"))}}async sendWidgetSource(e,t="*",n){if(!e||e.startsWith("@jupyter"))return;if(!this.kernel||!this.scriptProvider)return void this.pendingModuleRequests.set(e,{moduleVersion:t,requestId:n});let i={moduleName:e,requestId:n};try{kn(`${B.Green}Fetch Script for ${e}`),i=await this.scriptProvider.getWidgetScriptSource(e,t),"cdn"!==this.widgetSources.get(i.moduleName)?.source&&this.widgetSources.set(i.moduleName,i)}catch(e){Sn("Failed to get widget source due to an error",e),io(F.HashedIPyWidgetScriptDiscoveryError)}finally{kn(`${B.Green}Script for ${e}, is ${i.scriptUri} from ${i.source}`),this.postEmitter.fire({message:Ds.IPyWidgets_WidgetScriptSourceResponse,payload:i})}}handlePendingRequests(){const e=Array.from(this.pendingModuleRequests.keys());for(;e.length;){const t=e.shift();if(t){const{moduleVersion:e,requestId:n}=this.pendingModuleRequests.get(t);this.pendingModuleRequests.delete(t),this.sendWidgetSource(t,e,n).catch(Sn.bind(`Failed to send WidgetScript for ${t}`))}}}}const bb=Symbol("IWidgetScriptSourceProviderFactory"),wb=Symbol("INbExtensionsPathProvider"),_b=Symbol("IIPyWidgetScriptManagerFactory");Symbol("IIPyWidgetScriptManager");var Sb=function(e,t){return function(n,i){t(n,i,e)}};const Cb="https://unpkg.com/",kb="https://cdn.jsdelivr.net/npm/",Eb="IPYWidgetCDNConfigured",xb="IPYWidgetNotFoundOnCDN",Tb="IPYWidgetNoNetWorkAccess";let Pb=class{get cdnProviders(){return this.configurationSettings.getSettings(void 0).widgetScriptSources}constructor(e,t,n,i){this.appShell=e,this.globalMemento=t,this.configurationSettings=n,this.httpClient=i,this.cache=new Map,this.isOnCDNCache=new Map,this.notifiedUserAboutWidgetScriptNotFound=new Set}dispose(){this.cache.clear()}async isOnCDN(e){const t=`MODULE_VERSION_ON_CDN_${e}`;if(this.isOnCDNCache.has(t))return this.isOnCDNCache.get(t);if(this.globalMemento.get(t,!1))return!0;const n=(async()=>{const t=re(this.httpClient.exists(`${Cb}${e}`)),n=re(this.httpClient.exists(`${kb}${e}`));return await Promise.race([t.promise,n.promise]),!!(t.value||n.value||(await Promise.all([t.promise,n.promise]),t.value||n.value))})();return n.then((e=>{if(e)return this.globalMemento.update(t,!0)})).then(ae,ae),this.isOnCDNCache.set(t,n),n}async getWidgetScriptSource(e,t,n){if(!1===n)return this.warnIfNoAccessToInternetFromWebView(e).catch(ae),{moduleName:e};if(0===this.cdnProviders.length&&this.globalMemento.get(Eb,!1))return{moduleName:e};const i=this.getModuleKey(e,t);return this.cache.get(i)||this.cache.set(i,this.getWidgetScriptSourceImplementation(e,t)),this.cache.get(i)}async generateDownloadUri(e,t,n){const i=function(e){switch(e){case"unpkg.com":return Cb;case"jsdelivr.com":return kb}}(n);if(i)return function(e,t,n){let i=t,r="index",o=t.indexOf("/");return-1!==o&&"@"===t[0]&&(o=t.indexOf("/",o+1)),-1!==o&&(r=t.substr(o+1),i=t.substr(0,o)),e===kb&&(n.startsWith("^")&&(n=n.slice(1)),r.endsWith(".js")||(r=r.concat(".js"))),`${e}${i}@${n}/dist/${r}`}(i,e,t)}getModuleKey(e,t){return`${e}${t}`}async getWidgetScriptSourceImplementation(e,t){if(kn(`${B.Green}Searching for Widget Script ${e}#${t} using cdns ${this.cdnProviders.join(" ")}`),await this.configureWidgets(),0===this.cdnProviders.length)return{moduleName:e};const n=(await Promise.all(this.cdnProviders.map((n=>this.getValidUri(e,t,n))))).find((e=>e));return n?(kn(`${B.Green}Widget Script ${e}#${t} found at URI: ${n}`),{moduleName:e,scriptUri:n,source:"cdn"}):(Sn(`Widget Script ${e}#${t} was not found on on any cdn`),this.handleWidgetSourceNotFound(e,t).catch(ae),{moduleName:e})}async getValidUri(e,t,n){try{const i=await this.generateDownloadUri(e,t,n);if(i&&await this.httpClient.exists(i))return i}catch(i){return void En(`Failed downloading ${e}:${t} from ${n}`)}}async warnIfNoAccessToInternetFromWebView(e){if(!this.globalMemento.get(Tb,!1)&&!this.notifiedUserAboutWidgetScriptNotFound.has(e)&&0!==this.cdnProviders.length)switch(this.notifiedUserAboutWidgetScriptNotFound.add(e),await this.appShell.showWarningMessage(gr.cdnWidgetScriptNotAccessibleWarningMessage(e,JSON.stringify(this.cdnProviders)),lr.ok,lr.doNotShowAgain,lr.moreInfo)){case lr.doNotShowAgain:return this.globalMemento.update(Tb,!0);case lr.moreInfo:return this.appShell.openUrl("https://aka.ms/PVSCIPyWidgets")}}async configureWidgets(){if(0!==this.cdnProviders.length)return;if(this.globalMemento.get(Eb,!1))return;if(this.configurationPromise)return this.configurationPromise.promise;this.configurationPromise=ie(),io(F.IPyWidgetPromptToUseCDN);const e=await this.appShell.showInformationMessage(gr.useCDNForWidgetsNoInformation,{modal:!0},lr.ok,lr.doNotShowAgain,lr.moreInfo);let t="dismissed";switch(e){case lr.ok:t="ok",await Promise.all([this.updateScriptSources(["jsdelivr.com","unpkg.com"]),this.globalMemento.update(Eb,!0)]);break;case lr.doNotShowAgain:t="doNotShowAgain",await Promise.all([this.updateScriptSources([]),this.globalMemento.update(Eb,!0)]);break;case lr.moreInfo:this.appShell.openUrl("https://aka.ms/PVSCIPyWidgets");break;default:t=e===lr.cancel?"cancel":"dismissed"}io(F.IPyWidgetPromptToUseCDNSelection,void 0,{selection:t}),this.configurationPromise.resolve()}async updateScriptSources(e){await this.configurationSettings.updateSetting("widgetScriptSources",e,void 0,Oe.ConfigurationTarget.Global)}async handleWidgetSourceNotFound(e,t){if(!this.globalMemento.get(xb,!1)&&!this.notifiedUserAboutWidgetScriptNotFound.has(e)&&0!==this.cdnProviders.length)switch(this.notifiedUserAboutWidgetScriptNotFound.add(e),await this.appShell.showWarningMessage(gr.widgetScriptNotFoundOnCDNWidgetMightNotWork(e,t,JSON.stringify(this.cdnProviders)),lr.ok,lr.doNotShowAgain,lr.reportThisIssue)){case lr.doNotShowAgain:return this.globalMemento.update(xb,!0);case lr.reportThisIssue:return this.appShell.openUrl("https://aka.ms/CreatePVSCDataScienceIssue")}}};Pb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Sb(0,zn(Jn)),Sb(1,zn(Oi)),Sb(1,Nc(Ai)),Sb(2,zn(ji)),Sb(3,zn(Fi))],Pb);class Ib{get postMessage(){return this.listeningToPostMessageEvent=!0,this.postEmitter.event}constructor(e,t){this.document=e,this.serviceContainer=t,this.cachedMessages=[],this.postEmitter=new Oe.EventEmitter,this.attachedWebviews=new WeakSet,this.modulesForWhichWeHaveDisplayedWidgetErrorMessage=new Set,this.queuedMessages=[],this.disposables=this.serviceContainer.get(Ri),this.jupyterOutput=this.serviceContainer.get(Ii,m),this.appShell=this.serviceContainer.get(Jn,Jn),this.commandManager=this.serviceContainer.get(Gn),this.configService=this.serviceContainer.get(ji),this.initialize()}dispose(){this.cachedMessages=[],this.ipyWidgetMessageDispatcher?.dispose(),this.ipyWidgetScriptSource?.dispose()}attach(e){if(this.attachedWebviews.has(e))return;this.attachedWebviews.add(e),this.postMessage((t=>{if(xn(`${B.Green}Widget Coordinator sent ${t.message}`),t.message===Is.ConvertUriForUseInWebViewRequest)this.onMessage(e,Is.ConvertUriForUseInWebViewResponse,{request:t.payload,response:e.asWebviewUri(t.payload)});else{if(!this.readyMessageReceived)return void this.queuedMessages.push({type:t.message,payload:t.payload});this.sendPendingWebViewMessages(e),e.postMessage({type:t.message,payload:t.payload}).then(ae,ae)}}),this,this.disposables);const t=ie(),n=async()=>{const n=new se;if(!t.completed){En("Attempting to determine version of IPyWidgets");const e=[],n=this.serviceContainer.get(na),i=ie();n.get(this.document)?i.resolve(n.get(this.document)):n.onDidCreateKernel((e=>{e.notebook===this.document&&i.resolve(e)}),this,e);const r=await i.promise;r&&(fs(r.kernelConnectionMetadata)?r.ipywidgetsVersion?t.completed||t.resolve(r.ipywidgetsVersion):(En("Waiting for IPyWidgets version"),r.onIPyWidgetVersionResolved((()=>{r.ipywidgetsVersion&&(t.completed||t.resolve(r.ipywidgetsVersion),Ie(e))}),this,e)):t.completed||t.resolve(7)),e.length&&this.disposables.push(...e),En("Waiting for IPyWidgets version promise")}const i=await t.promise;En(`Version of IPyWidgets ${i} determined after ${n.elapsedTime/1e3}s`),e.postMessage({type:Ds.IPyWidgets_Reply_Widget_Version,payload:i}).then(ae,ae)};e.onDidReceiveMessage((async t=>{xn(`${B.Green}Widget Coordinator received ${t.type}`),this.onMessage(e,t.type,t.payload),t.type===Ds.IPyWidgets_Request_Widget_Version&&await n(),t.type===Ds.IPyWidgets_Ready&&(En("Web view is ready to receive widget messages"),this.readyMessageReceived=!0,this.sendPendingWebViewMessages(e))}),this,this.disposables),e.postMessage({type:Ds.IPyWidgets_IsReadyRequest,payload:void 0}).then(ae,ae),n().catch(ae)}onMessage(e,t,n){t===Is.IPyWidgetLoadSuccess?this.sendLoadSucceededTelemetry(n).catch(ae):t===Is.IPyWidgetLoadFailure?this.handleWidgetLoadFailure(e,n).catch(ae):t===Is.IPyWidgetWidgetVersionNotSupported?this.sendUnsupportedWidgetVersionFailureTelemetry(n).catch(ae):t===Is.IPyWidgetRenderFailure?this.sendRenderFailureTelemetry(n):t===Is.IPyWidgetUnhandledKernelMessage&&this.handleUnhandledMessage(n),this.getIPyWidgetMessageDispatcher().receiveMessage({message:t,payload:n}),this.getIPyWidgetScriptSource().onMessage(t,n)}sendPendingWebViewMessages(e){if(this.readyMessageReceived)for(;this.queuedMessages.length;)e.postMessage(this.queuedMessages.shift()).then(ae,ae)}initialize(){En("initialize CommonMessageCoordinator"),this.getIPyWidgetScriptSource().initialize(),this.getIPyWidgetMessageDispatcher().initialize()}async sendLoadSucceededTelemetry(e){try{io(F.IPyWidgetLoadSuccess,0,{moduleHash:await jr(e.moduleName),moduleVersion:e.moduleVersion})}catch{}}async handleWidgetLoadFailure(e,t){try{let n=t.error.toString();const i=this.configService.getSettings(void 0).widgetScriptSources.length>0,r=`${t.moduleName}:${t.moduleVersion}`;if(t.isOnline){if(!i&&!this.modulesForWhichWeHaveDisplayedWidgetErrorMessage.has(r)){this.modulesForWhichWeHaveDisplayedWidgetErrorMessage.add(r);const i=lr.moreInfo,o=gr.enableCDNForWidgetsButton;n=gr.enableCDNForWidgetsSetting(t.moduleName,t.moduleVersion),this.appShell.showErrorMessage(n,{modal:!0},o,i).then((t=>{switch(t){case i:this.appShell.openUrl("https://aka.ms/PVSCIPyWidgets");break;case o:this.enableCDNForWidgets(e).catch(ae)}}),ae)}}else n=gr.loadClassFailedWithNoInternet(t.moduleName,t.moduleVersion),this.appShell.showErrorMessage(n).then(ae,ae);Sn(`Widget load failure ${n}`,t),io(F.IPyWidgetLoadFailure,0,{isOnline:t.isOnline,moduleHash:await jr(t.moduleName),moduleVersion:t.moduleVersion,timedout:t.timedout})}catch{}}async enableCDNForWidgets(e){await this.commandManager.executeCommand(N.EnableLoadingWidgetsFrom3rdPartySource),await e.postMessage({type:Ds.IPyWidgets_AttemptToDownloadFailedWidgetsAgain})}async sendUnsupportedWidgetVersionFailureTelemetry(e){try{io(F.IPyWidgetWidgetVersionNotSupportedLoadFailure,0,{moduleHash:await jr(e.moduleName),moduleVersion:e.moduleVersion})}catch{}}sendRenderFailureTelemetry(e){try{Sn("Error rendering a widget: ",e),io(F.IPyWidgetRenderFailure)}catch{}}handleUnhandledMessage(e){if("status"!==e.header.msg_type)try{if("error"===e.header.msg_type){const t=e;t.content.traceback=t.content.traceback.map(jy)}kn(`Unhandled widget kernel message: ${e.header.msg_type} ${e.content}`),this.jupyterOutput.appendLine(gr.unhandledMessage(e.header.msg_type,JSON.stringify(e.content))),io(F.IPyWidgetUnhandledMessage,void 0,{msg_type:e.header.msg_type})}catch{}}getIPyWidgetMessageDispatcher(){return this.ipyWidgetMessageDispatcher||(this.ipyWidgetMessageDispatcher=this.serviceContainer.get(fb).create(this.document),this.disposables.push(this.ipyWidgetMessageDispatcher.postMessage(this.cacheOrSend,this))),this.ipyWidgetMessageDispatcher}getIPyWidgetScriptSource(){return this.ipyWidgetScriptSource||(this.ipyWidgetScriptSource=new yb(this.document,this.serviceContainer.get(na),this.serviceContainer.get(Ri),this.serviceContainer.get(ji),this.serviceContainer.get(Fi),this.serviceContainer.get(bb),this.serviceContainer.get(Pi),this.serviceContainer.get(Pb)),this.disposables.push(this.ipyWidgetScriptSource.postMessage(this.cacheOrSend,this))),this.ipyWidgetScriptSource}cacheOrSend(e){if(!this.listeningToPostMessageEvent)return xn(`${B.Green}Queuing messages (no listeners)`),void this.cachedMessages.push(e);this.cachedMessages.forEach((e=>this.postEmitter.fire(e))),this.cachedMessages=[],this.postEmitter.fire(e)}}!function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([ye()],Ib.prototype,"enableCDNForWidgets",null);var Db=function(e,t){return function(n,i){t(n,i,e)}};class Rb{get controller(){if(!this._controller)throw new Error("No controller defined");return this._controller.controller}constructor(e,t){this.editor=e,this.pendingMessages=[],this.disposables=[],this._onDidReceiveMessage=new Oe.EventEmitter,this.changeController(t)}changeController(e){this._controller?.id!==e.id&&(this.controllerMessageHandler?.dispose(),this._controller=e,this.controllerMessageHandler=e.onDidReceiveMessage((t=>{t.editor===this.editor&&this.controller?.id===e.id&&(this.eventHandlerListening?(this.sendPendingMessages(),this._onDidReceiveMessage.fire(t.message)):this.pendingMessages.push(t.message))}),this,this.disposables))}dispose(){Ie(this.disposables)}get onDidReceiveMessage(){return this.eventHandlerListening=!0,setTimeout((()=>this.sendPendingMessages()),0),this._onDidReceiveMessage.event}postMessage(e){return this.controller.postMessage(e,this.editor)}asWebviewUri(e){return this.controller.asWebviewUri(e)}sendPendingMessages(){if(this.pendingMessages.length){let e=this.pendingMessages.shift();for(;e;)this._onDidReceiveMessage.fire(e),e=this.pendingMessages.shift()}}}let Ob=class{constructor(e,t,n,i){this.serviceContainer=e,this.disposableRegistry=t,this.notebook=n,this.controllerManager=i,this.messageCoordinators=new WeakMap,this.notebookDisposables=new WeakMap,this.notebookCommunications=new WeakMap,this.notebookEditors=new WeakMap}activate(){this.notebook.onDidChangeVisibleNotebookEditors(this.onDidChangeVisibleNotebookEditors,this,this.disposableRegistry),this.notebook.onDidCloseNotebookDocument(this.onDidCloseNotebookDocument,this,this.disposableRegistry),this.controllerManager.onControllerSelected(this.onDidSelectController,this,this.disposableRegistry)}onDidSelectController(e){const t=this.messageCoordinators.get(e.notebook);t&&(this.messageCoordinators.delete(e.notebook),this.notebook.notebookEditors.filter((t=>t.notebook===e.notebook)).forEach((t=>{const n=this.notebookCommunications.get(t);this.notebookCommunications.delete(t),n&&n.controller!==e.controller.controller&&(this.notebookCommunications.delete(t),n&&n.dispose())})),t?.dispose()),this.notebook.notebookEditors.filter((t=>t.notebook===e.notebook)).forEach((t=>this.initializeNotebookCommunication(t,e.controller)))}initializeNotebookCommunication(e,t){if(e.notebook.isClosed||!Za(e.notebook))return;const n=e.notebook;if(!t)return void En(`No controller, hence notebook communications cannot be initialized for editor ${pn(e.notebook.uri)}`);if(this.notebookCommunications.has(e))return void En(`notebook communications already initialized for editor ${pn(e.notebook.uri)}`);En(`Initialize notebook communications for editor ${pn(e.notebook.uri)}`);const i=new Rb(e,t);this.addNotebookDisposables(n,[i]),this.notebookCommunications.set(e,i),En(`Resolving notebook UI Comms (resolve) for ${pn(n.uri)}`);let r=this.messageCoordinators.get(n);r||(r=new Ib(n,this.serviceContainer),this.messageCoordinators.set(n,r)),r.attach(i)}addNotebookDisposables(e,t){const n=this.notebookDisposables.get(e)||[];n.push(...t),this.notebookDisposables.set(e,n)}async onDidChangeVisibleNotebookEditors(e){e.forEach((e=>{const t=this.controllerManager.getSelected(e.notebook);this.initializeNotebookCommunication(e,t)}))}onDidCloseNotebookDocument(e){const t=this.notebookEditors.get(e)||[];Ie(this.notebookDisposables.get(e)||[]),t.forEach((e=>this.notebookCommunications.get(e)?.dispose())),this.messageCoordinators.get(e)?.dispose(),this.messageCoordinators.delete(e)}};Ob=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Db(0,zn(ya)),Db(1,zn(Ri)),Db(2,zn(oi)),Db(3,zn(Ks))],Ob);var Ab=function(e,t){return function(n,i){t(n,i,e)}};let Nb=class{constructor(e,t,n,i,r){this.disposables=e,this.kernelProvider=t,this.controllers=n,this.liveKernelTracker=i,this.preferredRemoteKernelIdProvider=r}activate(){this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposables),this.controllers.onControllerSelectionChanged(this.onNotebookControllerSelectionChanged,this,this.disposables)}onNotebookControllerSelectionChanged({selected:e,notebook:t,controller:n}){t.isClosed||("connectToLiveRemoteKernel"===n.connection.kind&&n.connection.kernelModel.id&&(e?this.liveKernelTracker.trackKernelIdAsUsed(t.uri,n.connection.serverProviderHandle,n.connection.kernelModel.id):this.liveKernelTracker.trackKernelIdAsNotUsed(t.uri,n.connection.serverProviderHandle,n.connection.kernelModel.id)),ea(n.connection)&&this.preferredRemoteKernelIdProvider.clearPreferredRemoteKernelId(t.uri).catch(ae))}onDidStartKernel(e){if(!e.resourceUri)return;const t=e.resourceUri;if("startUsingRemoteKernelSpec"===e.kernelConnectionMetadata.kind){const n=e.kernelConnectionMetadata.serverProviderHandle,i=e.kernelSocket.subscribe((i=>{const r=i?.options.id;e.disposed||e.disposing||!r||(En(`Updating preferred kernel for remote notebook ${r}`),this.preferredRemoteKernelIdProvider.storePreferredRemoteKernelId(t,r).catch(ae),this.liveKernelTracker.trackKernelIdAsUsed(t,n,r))}));this.disposables.push(new Oe.Disposable((()=>i.unsubscribe())))}}};Nb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Ab(0,zn(Ri)),Ab(1,zn(na)),Ab(2,zn(Ks)),Ab(3,zn(Ci)),Ab(4,zn(dh))],Nb);var Mb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Lb=function(e,t){return function(n,i){t(n,i,e)}};let jb=class{constructor(e,t,n,i,r){this.disposables=e,this.providerRegistry=t,this.uriStorage=n,this.controllers=i,this.serverProviderRegistry=r,this.handledProviders=new WeakSet,this.handledCollections=new WeakSet,this.handledServerProviderChanges=new WeakSet}activate(){this.providerRegistry.onDidChangeProviders(this.addProviderHandlers,this,this.disposables),this.addProviderHandlers(),this.serverProviderRegistry.jupyterCollections.forEach((e=>this.checkJupyterServerProviderHandlers(e))),this.serverProviderRegistry.onDidChangeCollections((({added:e,removed:t})=>{e.forEach((e=>this.checkJupyterServerProviderHandlers(e))),t.forEach((e=>this.removeControllersBelongingToDisposedProvider(e.extensionId,e.id)))}),this,this.disposables)}async checkJupyterServerProviderHandlers(e){this.handledCollections.has(e)&&e.onDidChangeProvider((()=>e.serverProvider?this.checkExpiredServersInJupyterCollection(e,e.serverProvider).catch(ae):void 0),this,this.disposables),e.serverProvider&&await this.checkExpiredServersInJupyterCollection(e,e.serverProvider)}async checkExpiredServersInJupyterCollection(e,t){if(!this.handledServerProviderChanges.has(t)&&t.onDidChangeServers){const n=t.onDidChangeServers((()=>{e.serverProvider===t?this.checkExpiredServersInJupyterCollection(e,t).catch(ae):(n.dispose(),this.handledServerProviderChanges.delete(t))}),this,this.disposables)}const n=new Oe.CancellationTokenSource;this.disposables.push(n);try{const i=await Promise.resolve(t.provideJupyterServers(n.token));await this.removeControllersAndUriStorageBelongingToInvalidServers(e.extensionId,e.id,(i||[]).map((e=>e.id)))}finally{n.dispose()}}addProviderHandlers(){this.providerRegistry.providers.forEach((e=>{this.handledProviders.has(e)||(this.handledProviders.add(e),this.onProviderHandlesChanged(e).catch(ae),e.onDidChangeHandles&&e.onDidChangeHandles((()=>this.onProviderHandlesChanged(e)),this,this.disposables))}))}async onProviderHandlesChanged(e){if(!e.getHandles)return;const t=await e.getHandles();await this.removeControllersAndUriStorageBelongingToInvalidServers(e.extensionId,e.id,t)}async removeControllersAndUriStorageBelongingToInvalidServers(e,t,n){const i=await this.uriStorage.getAll();await Promise.all(i.filter((n=>n.provider.extensionId===e&&n.provider.id===t)).map((async e=>{n.includes(e.provider.handle)||await this.uriStorage.remove(e.provider)}))),this.controllers.registered.forEach((i=>{const r=i.connection;ea(r)||r.serverProviderHandle.extensionId!==e||r.serverProviderHandle.id!==t||n.includes(r.serverProviderHandle.handle)||(Cn(`Deleting controller ${i.id} as it is associated with a server Id that has been removed`),i.dispose())}))}removeControllersBelongingToDisposedProvider(e,t){this.controllers.registered.forEach((n=>{const i=n.connection;ea(i)||i.serverProviderHandle.extensionId!==e||i.serverProviderHandle.id!==t||(Cn(`Deleting controller ${n.id} as it is associated with a Provider Id that has been removed`),n.dispose())}))}};Mb([ye("Failed to check what servers were shutdown in a Jupyter Collection in Controller Watcher")],jb.prototype,"checkJupyterServerProviderHandlers",null),Mb([ye("Failed to check what servers were shutdown in Controller Watcher")],jb.prototype,"checkExpiredServersInJupyterCollection",null),jb=Mb([Kn(),Lb(0,zn(Ri)),Lb(1,zn(gi)),Lb(2,zn(vi)),Lb(3,zn(Ks)),Lb(4,zn(Ei))],jb);class Fb{get description(){return this.getDescription?.()||this._description}set description(e){this._description=e}constructor(e,t,n,i,r,o){this.label=e,this._description=t,this.detail=n,this.category=i,this.serverDisplayName=r,this.getDescription=o,this._onDidChange=new Oe.EventEmitter,this.onDidChange=this._onDidChange.event}dispose(){this._onDidChange.dispose()}triggerChange(){this._onDidChange.fire(this)}}function Ub(e){switch(e.kind){case"startUsingLocalKernelSpec":return gr.kernelCategoryForJupyterKernel;case"startUsingPythonInterpreter":if("registeredByNewVersionOfExtForCustomKernelSpec"===_s(e.kernelSpec))return gr.kernelCategoryForJupyterKernel;switch(e.interpreter.envType){case ko.Conda:return e.interpreter.isCondaEnvWithoutPython?gr.kernelCategoryForCondaWithoutPython:gr.kernelCategoryForConda;case ko.Pipenv:return gr.kernelCategoryForPipEnv;case ko.Poetry:return gr.kernelCategoryForPoetry;case ko.Pyenv:return gr.kernelCategoryForPyEnv;case ko.Venv:case ko.VirtualEnv:case ko.VirtualEnvWrapper:return gr.kernelCategoryForVirtual;default:return gr.kernelCategoryForGlobal}default:return""}}var qb=function(e,t){return function(n,i){t(n,i,e)}};let Kb=class{constructor(e,t,n,i,r){this.workspace=e,this.platform=t,this.jupyterUriProviderRegistration=n,this.disposables=i,this.interpreters=r,this.details=new Map}getDisplayData(e){if(!this.details.get(e.id)){const t=ls(e);let n=ps(e,this.workspace,this.platform);"connectToLiveRemoteKernel"===e.kind&&(n=us(e));const i=Ub(e),r="connectToLiveRemoteKernel"===e.kind?()=>us(e):void 0,o=new Fb(t,n,"",i,void 0,r);if(this.disposables.push(o),this.details.set(e.id,o),"startUsingPythonInterpreter"===e.kind&&e.interpreter.isCondaEnvWithoutPython){const t=t=>{const n=t.find((t=>t.id===e.interpreter?.id)),i=this.interpreters.resolvedEnvironments.find((e=>e.id===n?.id));if("startUsingPythonInterpreter"===e.kind&&i){e.updateInterpreter(i);const t=ls(e),n=ps(e,this.workspace,this.platform),r=Ub(e);let s=!1;t!==o.label&&(o.label=t,s=!0),n!==o.description&&(o.description=n,s=!0),r!==o.category&&(o.category=r,s=!0),s&&o.triggerChange()}};this.interpreters.onDidChangeInterpreter((e=>e?t([e]):void 0),this,this.disposables)}}const t=this.details.get(e.id);this.details.set(e.id,t),"connectToLiveRemoteKernel"!==e.kind&&"startUsingRemoteKernelSpec"!==e.kind||Uh(e.serverProviderHandle,this.jupyterUriProviderRegistration,gr.kernelDefaultRemoteDisplayName).then((e=>{if(t.serverDisplayName!==e)return t.serverDisplayName=e,void t.triggerChange()})).catch(ae);const n=function(e){switch(e.kind){case"connectToLiveRemoteKernel":return gr.kernelCategoryForJupyterSession;case"startUsingRemoteKernelSpec":return gr.kernelCategoryForRemoteJupyterKernel;default:return Ub(e)}}(e);return t.category!==n&&(t.category=n,t.triggerChange()),t}};function Vb(e){try{return vs(ec(e))||e.getCells().find((e=>e.kind===Oe.NotebookCellKind.Code))?.document.languageId}catch(e){Cn("Failed to determine language of first cell",e)}}Kb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),qb(0,zn(Qn)),qb(1,zn(Ma)),qb(2,zn(gi)),qb(3,zn(Ri)),qb(4,zn(ka))],Kb);var Wb=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},$b=function(e,t){return function(n,i){t(n,i,e)}};const Bb="DATASCIENCE.LAST_SAVED_CELL_LANGUAGE";let Hb=class{constructor(e,t,n,i){this.vscNotebook=e,this.disposables=t,this.globalMemento=n,this.pythonExtensionChecker=i}getPreferredLanguage(e){const t=e?.language_info?.name||e?.kernelspec?.language||this.lastSavedNotebookCellLanguage,n=this.pythonExtensionChecker.isPythonExtensionInstalled?i:"plaintext";return Xa(t||n)}activate(){this.vscNotebook.onDidSaveNotebookDocument(this.onDidSaveNotebookDocument,this,this.disposables)}getSupportedLanguages(e){if(fs(e))return D;{const t=Xa(gs(e)||"");return t&&O.includes(t.toLowerCase())?[t,"raw"]:[]}}get lastSavedNotebookCellLanguage(){return this.globalMemento.get(Bb)}async onDidSaveNotebookDocument(e){if(!Za(e))return;const t=Vb(e);t&&t!==this.lastSavedNotebookCellLanguage&&await this.globalMemento.update(Bb,t)}};Wb([ye("Saving last saved cell language")],Hb.prototype,"onDidSaveNotebookDocument",null),Hb=Wb([Kn(),$b(0,zn(oi)),$b(1,zn(Ri)),$b(2,zn(Oi)),$b(2,Nc(Ai)),$b(3,zn(Ao))],Hb);const zb=Symbol("INotebookCompletionProvider"),Jb=Symbol("INotebookEditorProvider");class Gb extends _o{constructor(e){super(gr.failedToStartAnUntrustedKernelSpec(ls(e),e.kernelSpec.specFile?pn(Oe.Uri.file(e.kernelSpec.specFile)):""),void 0,e)}}class Yb{static async switchController(e,t){const n=t.get(Gn),i=t.get(Jb).findNotebookEditor(e),r=t.get(Ks);let o;const s=ie(),a=r.onControllerSelected((e=>s.resolve(e.controller))),c=await async function(e,t,n){const i=t?.findNotebookEditor(e);return i?n.executeCommand("notebook.selectKernel",{notebookEditor:i}):(Sn("Unable to select kernel as the Notebook document could not be identified"),!1)}(e,t.get(Jb),n);return c&&i&&(o=await s.promise),a.dispose(),o?{controller:o.controller,metadata:o.connection}:void 0}static async notifyAndRestartDeadKernel(e,t){const n=t.get(Jn),i=t.get(Gn);let r=!1;switch(await n.showErrorMessage(gr.cannotRunCellKernelIsDead(ls(e.kernelConnectionMetadata)),{modal:!0},gr.showJupyterLogs,gr.restartKernel)){case gr.restartKernel:await e.restart(),r=!0;break;case gr.showJupyterLogs:i.executeCommand(N.ViewJupyterOutput).then(ae,ae)}return r}static async handleKernelError(e,t,n,i,r,o,s,a){const c=e.get(Oi,Ai),l=e.get(bo);s.interpreter&&"start"===n&&async function(e,t,n){const i=`${await Io({uri:n})}#${nu.get(t)}`;await e.update(i,void 0)}(c,xd.ipykernel,s.interpreter.uri).catch(ae);const d=await l.handleKernelError(t,n,s,i,a),u=ea(s),p=e.tryGet(Zp);switch(p?.isSupported&&u&&"start"===n&&Dh(i,F.RawKernelSessionStartNoIpykernel,{reason:d}),r.dispose().catch(ae),d){case aa.cancel:case aa.failed:throw t;case aa.selectDifferentKernel:{const n=await Yb.switchController(i,e);if(!n)throw t;o=n.controller,s=n.metadata;break}}return{controller:o,metadata:s}}static convertContextToFunction(e,t){switch(e){case"start":case"execution":return e=>e.start(t);case"interrupt":return e=>e.interrupt();case"restart":return e=>e.restart()}}static async verifyKernelState(e,t,n,i,r,o,s){const{kernel:a,deadKernelAction:c}=await i;if(Jg(a)){if(this.deleteKernelInfo(t,i),"deadKernelWasNoRestarted"===c)throw new Ch(a.kernelConnectionMetadata);return"deadKernelWasRestarted"===c?a:Yb.wrapKernelMethod(a.kernelConnectionMetadata,"start",r,e,t,n,s,o)}return a}static async wrapKernelMethod(e,t,n,i,r,o,s,a=(()=>{})){En(`${t} the kernel, options.disableUI=${o.disableUI} for ${pn("notebook"in r?r.notebook.uri:r.resource)}`);let c=this.getKernelInfo(r);if(!o.disableUI&&c?.options.disableUI&&(c.options.disableUI=!1),!o.disableUI&&c?.kernel.resolved&&(c?.kernel.value?.kernel?.disposed||c?.kernel.value?.kernel?.disposing)&&(this.deleteKernelInfo(r),c=void 0),c&&"restart"!==t&&"interrupt"!==t)return Yb.verifyKernelState(i,r,o,c.kernel.promise,n,a,s);const l=Yb.wrapKernelMethodImpl(e,t,i,r,o,n,a),d=re(l);return d.promise.catch(ae),l.then((e=>{e.kernel.onDisposed((()=>{this.deleteKernelInfo(r,d.promise)}),void 0,s)})).catch((()=>{this.deleteKernelInfo(r,d.promise)})),this.setKernelInfo(r,d,o),Yb.verifyKernelState(i,r,o,d.promise,n,a,s)}static getKernelInfo(e){return"notebook"in e?Yb.connectionsByNotebook.get(e.notebook):Yb.connectionsByUri.get(e.resource.toString())}static setKernelInfo(e,t,n){"notebook"in e?Yb.connectionsByNotebook.set(e.notebook,{kernel:t,options:n}):Yb.connectionsByUri.set(e.resource.toString(),{kernel:t,options:n})}static deleteKernelInfo(e,t){t?"notebook"in e&&Yb.connectionsByNotebook.get(e.notebook)?.kernel.promise===t?Yb.connectionsByNotebook.delete(e.notebook):e.resource&&Yb.connectionsByUri.get(e.resource.toString())?.kernel.promise===t&&Yb.connectionsByUri.delete(e.resource.toString()):"notebook"in e?Yb.connectionsByNotebook.delete(e.notebook):Yb.connectionsByUri.delete(e.resource.toString())}static verifyWeCanStartKernel(e,t){if(ea(e)&&e.kernelSpec.specFile&&!t.get(Iv).isTrusted(Oe.Uri.file(e.kernelSpec.specFile)))throw new Gb(e)}static async wrapKernelMethodImpl(e,t,n,i,r,o,s){const a=n.get(na),c=n.get(ia);let l,d=Yb.convertContextToFunction(t,r),u=t,p="controller"in i?i.controller:void 0;for("start"===t&&Yb.verifyWeCanStartKernel(e,n);void 0===l;){if("notebook"in i&&i.notebook.isClosed)throw new Oe.CancellationError;l="notebook"in i?a.getOrCreate(i.notebook,{metadata:e,controller:p||i.controller,resourceUri:i.resource}):c.getOrCreate(i.resource,{metadata:e,resourceUri:i.resource});try{if("restart"!==t&&Jg(l)&&!r.disableUI)return{kernel:l,deadKernelAction:await Yb.notifyAndRestartDeadKernel(l,n)?"deadKernelWasRestarted":"deadKernelWasNoRestarted"};if(s(u,l),await d(l),"notebook"in i&&i.notebook.isClosed)throw new Oe.CancellationError;Jg(l)&&!r.disableUI&&await Yb.notifyAndRestartDeadKernel(l,n)}catch(t){if(Ea(t)||Cn(`Error occurred while trying to ${u} the kernel, options.disableUI=${r.disableUI}`,t),r.disableUI)throw t;if("notebook"in i&&i.notebook.isClosed)throw new Oe.CancellationError;const s=await Yb.handleKernelError(n,t,u,i.resource,l,p,e,o);if(p=s.controller,e=s.metadata,d=e=>e.start(r),u="start","3rdPartyExtension"===o)throw t;l=void 0}}return{kernel:l}}static async connectToNotebookKernel(e,t,n,i,r,o="jupyterExtension",s=(()=>{})){return Yb.wrapKernelMethod(e,"start",o,t,n,i,r,s)}static async connectToKernel(e,t,n,i,r,o="jupyterExtension",s=(()=>{})){return Yb.wrapKernelMethod(e,"start",o,t,n,i,r,s)}}Yb.connectionsByNotebook=new WeakMap,Yb.connectionsByUri=new Map;class Qb{constructor(e){this.controller=e}get id(){return this.controller.id}createNotebookCellExecution(e){return this.controller.createNotebookCellExecution(e)}}class Xb extends dc{constructor(e,t,n){super(),this.kernel=e,this.controller=t,this.notebook=n}initialize(){const e=this.kernel,t=this.controller,n=this.notebook;if("connectToLiveRemoteKernel"!==e.kernelConnectionMetadata.kind)return;if("busy"!==e.status&&"unknown"!==e.status)return;if(!t.createNotebookExecution)return;Oe.workspace.onDidCloseNotebookDocument((e=>{e===n&&this.dispose()}),this,this.disposables),t.onDidChangeSelectedNotebooks((e=>{e.notebook===n&&!1===e.selected&&this.dispose()}),this,this.disposables),e.onStatusChanged((e=>{"busy"!==e&&"unknown"!==e&&this.dispose()}),this,this.disposables);const i=t.createNotebookExecution(n);i.start(),this.disposables.push(new Oe.Disposable((()=>i.end())))}}var Zb;!function(e){function t(e){return e&&"object"==typeof e&&"function"==typeof e[Symbol.iterator]}e.is=t;const n=Object.freeze([]);function*i(e){yield e}e.empty=function(){return n},e.single=i,e.wrap=function(e){return t(e)?e:i(e)},e.from=function(e){return e||n},e.isEmpty=function(e){return!e||!0===e[Symbol.iterator]().next().done},e.first=function(e){return e[Symbol.iterator]().next().value},e.some=function(e,t){for(const n of e)if(t(n))return!0;return!1},e.find=function(e,t){for(const n of e)if(t(n))return n},e.filter=function*(e,t){for(const n of e)t(n)&&(yield n)},e.map=function*(e,t){let n=0;for(const i of e)yield t(i,n++)},e.concat=function*(...e){for(const t of e)for(const e of t)yield e},e.reduce=function(e,t,n){let i=n;for(const n of e)i=t(i,n);return i},e.slice=function*(e,t,n=e.length){for(t<0&&(t+=e.length),n<0?n+=e.length:n>e.length&&(n=e.length);t<n;t++)yield e[t]},e.consume=function(t,n=Number.POSITIVE_INFINITY){const i=[];if(0===n)return[i,t];const r=t[Symbol.iterator]();for(let t=0;t<n;t++){const t=r.next();if(t.done)return[i,e.empty()];i.push(t.value)}return[i,{[Symbol.iterator]:()=>r}]}}(Zb||(Zb={}));class ew{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(0!==this._toDispose.size)try{!function(e){if(Zb.is(e)){for(const t of e)if(t)try{t.dispose()}catch(e){Cn(`dispose() failed for ${t}`,e)}return Array.isArray(e)?[]:e}if(e)e.dispose()}(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?ew.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}ew.DISABLE_DISPOSED_WARNING=!1,Symbol.iterator;class tw{get id(){return this.controller.id}get label(){return this.controller.label}get connection(){return this.kernelConnection}get viewType(){return this._viewType}get onNotebookControllerSelected(){return this._onNotebookControllerSelected.event}get onNotebookControllerSelectionChanged(){return this._onNotebookControllerSelectionChanged.event}get onConnecting(){return this._onConnecting.event}get onDidReceiveMessage(){return this.controller.onDidReceiveMessage}get onDidDispose(){return this._onDidDispose.event}isAssociatedWithDocument(e){return this.associatedDocuments.has(e)}static create(e,t,n,i,r,o,s,a,c,l,d,u,p,h,f,m,g){return new tw(e,t,n,i,r,o,s,a,c,l,d,u,p,h,f,m,g)}constructor(e,t,n,i,r,o,s,a,c,l,d,u,p,h,f,m,g){this.kernelConnection=e,this._viewType=n,this.notebookApi=i,this.commandManager=r,this.kernelProvider=o,this.context=s,this.languageService=c,this.workspace=l,this.configuration=d,this.documentManager=u,this.appShell=p,this.browser=h,this.extensionChecker=f,this.serviceContainer=m,this.displayDataProvider=g,this._onNotebookControllerSelectionChanged=new Oe.EventEmitter,this._onConnecting=new Oe.EventEmitter,this.pendingCellAdditions=new Map,this._onDidDispose=new Oe.EventEmitter,this.disposables=[],this.notebookKernels=new WeakMap,this.isDisposed=!1,this.runningCellExecutions=new Map,this.associatedDocuments=new WeakMap,this.restoredConnections=new WeakSet,a.push(this),this._onNotebookControllerSelected=new Oe.EventEmitter,this.displayData=this.displayDataProvider.getDisplayData(this.connection),this.controller=this.notebookApi.createNotebookController(t,n,this.displayData.label,this.handleExecution.bind(this),this.getRendererScripts(),[]),this.displayData.onDidChange(this.updateDisplayData,this,this.disposables),this.updateDisplayData(),this.controller.interruptHandler=this.handleInterrupt.bind(this),this.controller.supportsExecutionOrder=!0,this.controller.supportedLanguages=this.languageService.getSupportedLanguages(e),this.controller.onDidChangeSelectedNotebooks(this.onDidChangeSelectedNotebooks,this,this.disposables),this.notebookApi.onDidCloseNotebookDocument((e=>{xn(`Remove associated notebook ${pn(e.uri)} from controller ${this.connection.kind}:${this.id} for ${this.viewType}`),this.associatedDocuments.delete(e)}),this,this.disposables)}async restoreConnection(e){if(this.restoredConnections.has(e))return;this.restoredConnections.add(e);const t=await this.connectToKernel(e,new hh(!0));if("connectToLiveRemoteKernel"===this.kernelConnection.kind){const n=new Xb(t,this.controller,e);this.disposables.push(n),n.initialize()}const n=this.kernelProvider.getKernelExecution(t),i=this.serviceContainer.get(nb),r=await i.getLastTrackedCellExecution(e,t);if(!t.session?.kernel||n.pendingCells.length||!r||e.cellCount<r.cellIndex||e.cellAt(r.cellIndex).kind!==Oe.NotebookCellKind.Code)return;let o=!1;const s=[];let a;const c=(t,i)=>{if("send"!==i.direction&&!o&&iv(i.msg)===r.msg_id){if("msg_type"in i.msg&&"status"===i.msg.msg_type&&"execution_state"in i.msg.content&&"idle"===i.msg.content.execution_state)return;o=!0,n.resumeCellExecution(e.cellAt(r.cellIndex),{msg_id:r.msg_id,startTime:r.startTime,executionCount:r.executionCount}).catch(ae),Ie(s)}};t.session.kernel.anyMessage.connect(c),a=new Oe.Disposable((()=>{ce((()=>t.session?.kernel?.anyMessage.disconnect(c)))})),s.push(a),this.disposables.push(a)}updateConnection(e){"connectToLiveRemoteKernel"!==e.kind&&(this.controller.label=ls(e))}asWebviewUri(e){return this.controller.asWebviewUri(e)}postMessage(e,t){const n=e&&"message"in e?e.message:"";return xn(`${B.Green}Posting message to Notebook UI ${n}`),this.controller.postMessage(e,t)}setPendingCellAddition(e,t){if(this.viewType!==d)throw new Error("setPendingCellAddition only applies to the Interactive Window");this.pendingCellAdditions.set(e,t)}dispose(){if(this.isDisposed)return;const e=this.notebookApi.notebookDocuments.filter((e=>this.associatedDocuments.has(e))).map((e=>e.uri.toString()));En(`Disposing controller ${this.id} associated with connection ${this.connection.id} ${e.length?"and documents "+e.join(", "):""}`),xn(`Disposing controller ${this.id} associated with connection ${this.connection.id} ${e.length?"and documents "+e.join(", "):""} called from ${new Error("").stack}`),this.isDisposed=!0,this._onNotebookControllerSelected.dispose(),this._onNotebookControllerSelectionChanged.dispose(),this._onConnecting.dispose(),this.controller.dispose(),this._onDidDispose.fire(),this._onDidDispose.dispose(),Ie(this.disposables)}updateDisplayData(){this.controller.label=this.displayData.label;let e="connectToLiveRemoteKernel"===this.connection.kind?"":this.displayData.description;this.controller.description=e,this.displayData.serverDisplayName&&(this.controller.description=e?`${e} (${this.displayData.serverDisplayName})`:this.displayData.serverDisplayName)}async handleExecution(e,t){e.length<1||(this.pendingCellAdditions.has(t)&&await this.pendingCellAdditions.get(t),e=e.filter((e=>!(e.index<0&&(Cn(`Attempting to run a cell with index ${e.index}, kind ${e.kind}, text = ${e.document.getText()}`),1)))),this.workspace.isTrusted&&(kn(`Handle Execution of Cells ${e.map((e=>e.index))} for ${pn(t.uri)}`),await If(t.uri,this.connection),await Promise.all(e.map((e=>this.executeCell(t,e))))))}warnWhenUsingOutdatedPython(){const e=this.kernelConnection.interpreter?.version;!e||e.major>=4||"startUsingLocalKernelSpec"!==this.kernelConnection.kind&&"startUsingPythonInterpreter"!==this.kernelConnection.kind||(e.major<3||3===e.major&&e.minor<=5)&&this.appShell.showWarningMessage(gr.warnWhenSelectingKernelWithUnSupportedPythonVersion,lr.learnMore).then((e=>{if(e===lr.learnMore)return this.browser.launch("https://aka.ms/jupyterUnSupportedPythonKernelVersions")}),ae)}async onDidChangeSelectedNotebooks(e){if(xn(`NotebookController selection event called for notebook ${e.notebook.uri.toString()} & controller ${this.connection.kind}:${this.id}. Selected ${e.selected} `),this.associatedDocuments.has(e.notebook)&&e.selected)return;if(!e.selected){const t=this.kernelProvider.get(e.notebook);return t?.kernelConnectionMetadata.id===this.kernelConnection.id&&(kn(`Disposing kernel ${this.kernelConnection.id} for notebook ${pn(e.notebook.uri)} due to selection of another kernel or closing of the notebook`),t.dispose().catch(ae)),this.associatedDocuments.delete(e.notebook),void this._onNotebookControllerSelectionChanged.fire(e)}if(!Za(e.notebook)&&e.notebook.notebookType!==d)return;if(!this.workspace.isTrusted)return;this.warnWhenUsingOutdatedPython();const t=ie();xn(`Controller ${this.connection.kind}:${this.id} associated with nb ${pn(e.notebook.uri)}`),this.associatedDocuments.set(e.notebook,t.promise),await this.onDidSelectController(e.notebook),await this.updateCellLanguages(e.notebook),this._onNotebookControllerSelected.fire({notebook:e.notebook,controller:this}),this._onNotebookControllerSelectionChanged.fire(e),En("Controller selection change completed"),t.resolve()}async updateCellLanguages(e){const t=this.controller.supportedLanguages;if(!t||0===t?.length)return;const n=fs(this.kernelConnection)?i:t[0];await Promise.all(e.getCells().filter((e=>e.kind===Oe.NotebookCellKind.Code)).map((async e=>{t.includes(e.document.languageId)||await Oe.languages.setTextDocumentLanguage(e.document,n).then(ae,ae)})))}getRendererScripts(){return this.context.extensionMode===Oe.ExtensionMode.Development||this.context.extensionMode===Oe.ExtensionMode.Test?[new Oe.NotebookRendererScript(Oe.Uri.joinPath(this.context.extensionUri,"out","webviews","webview-side","widgetTester","widgetTester.js"))]:[]}handleInterrupt(e){En(`VS Code interrupted kernel for ${pn(e.uri)}`),e.getCells().forEach((e=>fg(e,"Cell cancellation requested"))),this.commandManager.executeCommand(N.InterruptKernel,{notebookEditor:{notebookUri:e.uri}}).then(ae,(e=>Sn("Failed to interrupt",e)))}createCellExecutionIfNecessary(e,t){let n=this.runningCellExecutions.get(e.notebook);if(!n||n.cell===e){n?.end(void 0,void 0),n=dg.getOrCreate(e,t,!0),this.runningCellExecutions.set(e.notebook,n);const i=n.end.bind(n);n.end=(t,n)=>{this.runningCellExecutions.delete(e.notebook),i(t,n)}}return n}async executeCell(t,n,i){const r=new ew,o=r.add(new Oe.CancellationTokenSource);r.add(Oe.workspace.onDidCloseNotebookDocument((e=>e===t?o.cancel():void 0)));let s,a=this.createCellExecutionIfNecessary(n,new Qb(this.controller)),c="start",l=new Qb(this.controller),d=!1;const u=this.serviceContainer.get(nb);try{if(s=await this.connectToKernel(t,new hh(!1)),s.disposing)throw new Oe.CancellationError;d=!0,s&&s.controller.id!==l.id&&(l=s.controller,a=this.createCellExecutionIfNecessary(n,s.controller)),c="execution",s.controller.id===this.id&&this.updateKernelInfoInNotebookWhenAvailable(s,t),u.trackCellExecution(n,s);const r=this.kernelProvider.getKernelExecution(s).executeCell(n,i);return r.then((t=>{if(s&&!e.isExiting&&t!==zs.Idle)return u.deleteTrackedCellExecution(n,s)})).catch(ae),await r}catch(e){Ea(e)||Sn("Error in execution",e),d||(a.start(),a.clearOutput(n).then(ae,ae));const i=this.serviceContainer.get(bo),r=Ea(e=Zi.unwrap(e))||e instanceof Ch;await Tg(n,l,await i.getErrorMessageForDisplayInCell(e,c,t.uri),r)}}async connectToKernel(e,t){return this._onConnecting.fire(),Yb.connectToNotebookKernel(this.kernelConnection,this.serviceContainer,{resource:e.uri,notebook:e,controller:this.controller},t,this.disposables)}updateKernelInfoInNotebookWhenAvailable(e,t){if(this.notebookKernels.get(t)===e)return;this.notebookKernels.set(t,e);const n=[];this.notebookApi.onDidCloseNotebookDocument((e=>{e===t&&Ie(n)}),this,n);const i=e.onDisposed((()=>Ie(n))),r=e.onStatusChanged((async()=>{!e.disposed&&e.info&&this.associatedDocuments.has(t)&&(await nw(t,this.documentManager,e.kernelConnectionMetadata,e.info),"ok"===e.info.status&&Ie(n))}));n.push({dispose:()=>r.dispose()}),n.push({dispose:()=>i?.dispose()})}async onDidSelectController(e){const t=this.connection,n=this.kernelProvider.get(e);if(n&&(r=t,!(i=n.kernelConnectionMetadata)&&!r||!(!i&&r||i&&!r||i?.id!==r?.id)))return void kn("Switch kernel did not change kernel.");var i,r;if(Dh(e.uri,F.SwitchKernel),n&&this.notebookApi.notebookEditors.filter((t=>t.notebook===e)).forEach((e=>this.postMessage({message:Ds.IPyWidgets_onKernelChanged,payload:void 0},e))),await nw(e,this.documentManager,t),e.notebookType===d)return;if(En(`KernelProvider switched kernel to id = ${this.kernelProvider.getOrCreate(e,{metadata:t,controller:this.controller,resourceUri:e.uri}).kernelConnectionMetadata.id}`),fs(this.kernelConnection)&&!this.extensionChecker.isPythonExtensionInstalled)return;const o=this.serviceContainer.get(Iv);!this.configuration.getSettings(void 0).disableJupyterAutoStart&&ea(this.kernelConnection)&&this.kernelConnection.kernelSpec.specFile&&o.isTrusted(Oe.Uri.file(this.kernelConnection.kernelSpec.specFile))&&this.connectToKernel(e,new hh(!0)).catch(ae)}}async function nw(e,t,n,i){let r=ec(e)||{};const{changed:o}=await xg(r,n,i);if(o){const n=new Oe.WorkspaceEdit,i=JSON.parse(JSON.stringify(e.metadata||{custom:{}}));i.custom=i.custom||{},i.custom.metadata=r,n.set(e.uri,[Oe.NotebookEdit.updateNotebookMetadata({...e.metadata||{},custom:i.custom})]),await t.applyEdit(n)}}var iw=function(e,t){return function(n,i){t(n,i,e)}};let rw=class{get onDidChange(){return this.changeEmitter.event}get registered(){return[...this.registeredControllers.values()]}get all(){return this.metadatas}get metadatas(){return[...this.registeredMetadatas.values()]}get onControllerSelected(){return this.selectedEmitter.event}get onControllerSelectionChanged(){return this.selectionChangedEmitter.event}constructor(e,t,n,i,r,o,s,a){this.notebook=e,this.disposables=t,this.pythonEnvFilter=n,this.workspace=i,this.extensionChecker=r,this.serviceContainer=o,this.serverUriStorage=s,this.kernelFinder=a,this.registeredControllers=new Map,this.changeEmitter=new Oe.EventEmitter,this.registeredMetadatas=new Map,this.selectedEmitter=new Oe.EventEmitter,this.selectionChangedEmitter=new Oe.EventEmitter,this.selectedControllers=new Map,this._activeInterpreterControllerIds=new Set}activate(){this.kernelFinder.onDidChangeKernels((()=>this.loadControllers()),this,this.disposables),this.kernelFinder.registered.forEach((e=>this.monitorDeletionOfConnections(e))),this.kernelFinder.onDidChangeRegistrations((e=>e.added.forEach((e=>this.monitorDeletionOfConnections(e)))),this,this.disposables),this.pythonEnvFilter.onDidChange(this.onDidChangeFilter,this,this.disposables),this.serverUriStorage.onDidChange(this.onDidChangeFilter,this,this.disposables),this.serverUriStorage.onDidChange(this.onDidChangeUri,this,this.disposables),this.serverUriStorage.onDidRemove(this.onDidRemoveServers,this,this.disposables),this.onDidChange((({added:e})=>{e.forEach((e=>{e.onNotebookControllerSelectionChanged((t=>{!t.selected&&this.isFiltered(e.connection)&&this.canControllerBeDisposed(e)&&(Cn(`Removing controller ${e.id} for ${e.connection.kind} from kernel list`),e.dispose())}),this,this.disposables)}))}),this,this.disposables),this.notebook.onDidOpenNotebookDocument(this.onDidOpenNotebookDocument,this,this.disposables),this.notebook.notebookDocuments.forEach((e=>this.onDidOpenNotebookDocument(e).catch(ae))),this.loadControllers()}loadControllers(){this.controllersPromise=this.loadControllersImpl(),function(e){const t={kernelSpecCount:0,localKernelSpecCount:0,remoteKernelSpecCount:0,kernelInterpreterCount:0,kernelLiveCount:0};e.forEach((e=>{switch(e.kind){case"connectToLiveRemoteKernel":t.kernelLiveCount+=1;break;case"startUsingRemoteKernelSpec":t.localKernelSpecCount+=1,t.kernelSpecCount+=1;break;case"startUsingLocalKernelSpec":t.remoteKernelSpecCount+=1,t.kernelSpecCount+=1;break;case"startUsingPythonInterpreter":t.kernelInterpreterCount+=1}})),io(F.KernelCount,{...t})}(this.registered.map((e=>e.connection))),xn(`Providing notebook controllers with length ${this.registered.length}.`)}get loaded(){return this.controllersPromise}async onDidOpenNotebookDocument(e){(e.notebookType===l||e.notebookType===d)&&this.workspace.isTrusted}async loadControllersImpl(){const e=this.kernelFinder.kernels;this.createNotebookControllers(e),xn(`Kernels found in kernel finder include ${e.map((e=>`${e.kind}:${e.id}`)).join("\n")} \n and currently registered controllers include ${this.registered.map((e=>`${e.connection.kind}:${e.connection.id}`)).join("\n")}`),xn(`Active Interpreter Kernels include ${Array.from(this._activeInterpreterControllerIds).join("\n")}`),Array.from(this.registered).filter((t=>{const n=e.some((e=>e.id===t.connection.id))||y&&this._activeInterpreterControllerIds.has(t.id);return!n&&"connectToLiveRemoteKernel"===t.connection.kind||!!this.canControllerBeDisposed(t)&&(n||En(`Controller ${t.connection.kind}:'${t.id}' for view = '${t.viewType}' is no longer a valid`),!n)})).forEach((e=>{Cn(`Disposing old controller ${e.connection.kind}:'${e.id}' for view = '${e.viewType}'`),e.dispose()}))}createNotebookControllers(e){if(0!==e.length)try{this.batchAdd(e,[l,d])}catch(e){if(!Ea(e,!0))throw e}}async monitorDeletionOfConnections(e){const t=e.onDidChangeKernels((({removed:e})=>{const t=new Set((e||[]).map((e=>e.id)));this.registered.filter((e=>t.has(e.connection.id))).forEach((e=>{Cn(`Deleting controller ${e.id} as it is associated with a connection that has been deleted ${e.connection.kind}:${e.id}`),e.dispose()}))}),this,this.disposables);this.kernelFinder.onDidChangeRegistrations((n=>{n.removed.includes(e)&&t.dispose()}))}onDidChangeUri(){this.onDidChangeFilter()}async onDidRemoveServers(e){e.forEach((e=>{this.registered.forEach((t=>{ta(t.connection)&&t.connection.serverProviderHandle.id===e.id&&t.connection.serverProviderHandle.handle===e.handle&&(Cn(`Deleting controller ${t.id} as it is associated with a connection that has been removed`),t.dispose())}))})),this.onDidChangeFilter()}onDidChangeFilter(){this.all.filter((e=>!this.isFiltered(e))).forEach((e=>this.addOrUpdate(e,[l,d]))),this.registered.forEach((e=>{this.isFiltered(e.connection)&&this.canControllerBeDisposed(e)&&(Cn(`Deleting controller ${e.id} as it is associated with a connection that has been hidden`),e.dispose())}))}batchAdd(e,t){const n=[];e.forEach((e=>{const{added:i}=this.addImpl(e,t,!1);n.push(...i)})),n.length&&this.changeEmitter.fire({added:n,removed:[]})}trackActiveInterpreterControllers(e){e.forEach((e=>this._activeInterpreterControllerIds.add(e.id)))}canControllerBeDisposed(e){return!this._activeInterpreterControllerIds.has(e.id)&&!this.isControllerAttachedToADocument(e)}getSelected(e){return this.selectedControllers.get(e.uri.toString())}addOrUpdate(e,t){const{added:n,existing:i}=this.addImpl(e,t,!0);return n.concat(i)}addImpl(e,t,n){const i=[],r=[];xn(`Create Controller for ${e.kind} and id '${e.id}' for view ${t.join(", ")}`);try{t.map((t=>{const n=this.getControllerId(e,t);return this.registeredMetadatas.set(e.id,e),[n,t]})).filter((([t])=>{const n=this.registeredControllers.get(t);return n?(n.updateConnection(e),r.push(n),xn(`Found existing controller '${n.id}', not creating a new one just updating it`),!1):this.isFiltered(e)?(xn(`Existing controller '${t}' will be excluded as it is filtered`),!1):(xn(`Existing controller not found for '${t}', hence creating a new one`),!0)})).forEach((([t,n])=>{const r=tw.create(e,t,n,this.notebook,this.serviceContainer.get(Gn),this.serviceContainer.get(na),this.serviceContainer.get(Ui),this.disposables,this.serviceContainer.get(Hb),this.workspace,this.serviceContainer.get(ji),this.serviceContainer.get(Yn),this.serviceContainer.get(Jn),this.serviceContainer.get(Ki),this.extensionChecker,this.serviceContainer,this.serviceContainer.get(Hs)),o=[];r.onDidDispose((()=>{xn(`Deleting controller '${r.id}' associated with view ${n} from registration as it was disposed`),this.registeredControllers.delete(r.id),o.forEach((e=>e.dispose()))}),this,this.disposables),this.disposables.push(r),this.registeredControllers.set(r.id,r),i.push(r),r.onNotebookControllerSelected((e=>{xn(`Controller ${e.controller?.id} selected for ${e.notebook.uri.toString()}`),this.selectedControllers.set(e.notebook.uri.toString(),e.controller),this.selectedEmitter.fire(e)}),this,o),r.onNotebookControllerSelectionChanged((e=>this.selectionChangedEmitter.fire({...e,controller:r})),this,o)})),n&&i.length&&this.changeEmitter.fire({added:i,removed:[]})}catch(t){if(Ea(t,!0))return{added:i,existing:r};Sn(`Failed to create notebook controller for ${e.id}`,t)}return{added:i,existing:r}}get(e,t){const n=this.getControllerId(e,t);return this.registeredControllers.get(n)}isFiltered(e){return!1}getControllerId(e,t){return t===l?e.id:`${e.id} (Interactive)`}isControllerAttachedToADocument(e){return this.notebook.notebookDocuments.some((t=>e.isAssociatedWithDocument(t)))}};rw=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),iw(0,zn(oi)),iw(1,zn(Ri)),iw(2,zn(_d)),iw(3,zn(Qn)),iw(4,zn(Ao)),iw(5,zn(ya)),iw(6,zn(vi)),iw(7,zn(la))],rw);class ow{constructor(e,t,n){this.kernel=e,this.localResourceUriConverter=t,this.scriptManagerFactory=n}async getWidgetScriptSource(e){return(await this.getWidgetScriptSources()).find((t=>t.moduleName.toLowerCase()===e.toLowerCase()))||{moduleName:e}}dispose(){}async getWidgetScriptSources(){const e=this.scriptManagerFactory.getOrCreate(this.kernel),t=await e.getWidgetModuleMappings();return t&&Object.keys(t).length?await Promise.all(Object.keys(t).map((async e=>({moduleName:e,scriptUri:(await this.localResourceUriConverter.asWebviewUri(t[e])).toString(),source:"local"})))):[]}async getBaseUrl(){const e=this.scriptManagerFactory.getOrCreate(this.kernel);if(!e.getBaseUrl)return;const t=await e.getBaseUrl();return t?this.localResourceUriConverter.asWebviewUri(t):void 0}}class sw{constructor(e,t){if("connectToLiveRemoteKernel"!==e.kernelConnectionMetadata.kind&&"startUsingRemoteKernelSpec"!==e.kernelConnectionMetadata.kind)throw new Error("Invalid usage of this class, can only be used with remtoe kernels");this.kernelConnection=e.kernelConnectionMetadata,this.scriptManager=t.getOrCreate(e)}dispose(){}async getBaseUrl(){return Oe.Uri.parse(this.kernelConnection.baseUrl)}async getWidgetScriptSource(e){const t=(await this.getWidgetScriptSources()).find((t=>t.moduleName.toLowerCase()===e.toLowerCase()));if(!t&&e.includes("/")){const t=await this.getBaseUrl();return{moduleName:e,scriptUri:`${t.toString()}${e}`,source:"remote"}}return t||{moduleName:e}}async getWidgetScriptSources(){const e=await this.scriptManager.getWidgetModuleMappings();return e&&Object.keys(e).length?await Promise.all(Object.keys(e).map((async t=>({moduleName:t,scriptUri:e[t].toString(),source:"remote"})))):[]}}sw.validUrls=new Map;var aw=function(e,t){return function(n,i){t(n,i,e)}};let cw=class{constructor(e,t,n,i){this.configurationSettings=e,this.widgetScriptManagerFactory=t,this.appShell=n,this.globalMemento=i}getProviders(e,t,n){const i=[];switch(i.push(new Pb(this.appShell,this.globalMemento,this.configurationSettings,n)),e.kernelConnectionMetadata.kind){case"connectToLiveRemoteKernel":case"startUsingRemoteKernelSpec":i.push(new sw(e,this.widgetScriptManagerFactory));break;default:i.push(new ow(e,t,this.widgetScriptManagerFactory))}return i}};cw=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),aw(0,zn(ji)),aw(1,zn(_b)),aw(2,zn(Jn)),aw(3,zn(Oi)),aw(3,Nc(Ai))],cw);let lw=class{async getNbExtensionsParentPath(e){switch(e.kernelConnectionMetadata.kind){case"connectToLiveRemoteKernel":case"startUsingRemoteKernelSpec":return Oe.Uri.parse(e.kernelConnectionMetadata.baseUrl);case"startUsingPythonInterpreter":return Oe.Uri.joinPath(Oe.Uri.file(e.kernelConnectionMetadata.interpreter.sysPrefix),"share","jupyter");default:return}}};lw=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],lw);var dw=__webpack_require__(44110),uw=__webpack_require__.n(dw);const pw=["require.config({","requirejs.config({",'["require"].config({',"['require'].config({",'["requirejs"].config({',"['requirejs'].config({",'["require"]["config"]({',"['require']['config']({",'["requirejs"]["config"]({',"['requirejs']['config']({"];class hw{constructor(e){this.kernel=e,this.disposables=[],e.onRestarted(this.onKernelRestarted,this,this.disposables)}dispose(){Ie(this.disposables)}async getWidgetModuleMappings(){return this.widgetModuleMappings||(this.widgetModuleMappings=this.getWidgetModuleMappingsImpl()),this.widgetModuleMappings}onKernelRestarted(){this.widgetModuleMappings=void 0}async getConfigFromWidget(e,t,n){const i=await this.getWidgetScriptSource(t);try{const r=await async function(e,t,n){let i=[...pw];const r=await jr(t);let o,s=0;for(;s<=0&&i.length&&(o=i.pop(),o);)s=n.indexOf(o);if(s<0){let e=[...pw].map((e=>e.substring(0,e.length-2)));for(;s<=0&&e.length&&(o=e.pop(),o);)s=n.indexOf(o)}if(s<0)return void io(F.IPyWidgetExtensionJsInfo,void 0,{widgetFolderNameHash:r,failed:!0,patternUsedToRegisterRequireConfig:o,failure:"couldNotLocateRequireConfigStart"});const a=n.indexOf(")",s);if(a<=0||!o)return void io(F.IPyWidgetExtensionJsInfo,void 0,{widgetFolderNameHash:r,failed:!0,patternUsedToRegisterRequireConfig:o,failure:"couldNotLocateRequireConfigEnd"});const c=n.indexOf("{",s);let l=n.substring(c,a);l=uw()(l,{language:"javascript"}),l=Ee(l,{trim:!0,removeEmptyEntries:!0}).join("");const d=l.split("{")[l.split("{").length-1].split("}")[0].split(",").map((e=>e.trim())).filter((e=>e.length&&e.includes(":"))),u={};if(d.forEach((t=>{const n=Pe(t.split(":")[0].replace(/\\r/g,"").replace(/\\n/g,"").trim()).trim(),i=Pe(t.substring(t.indexOf(":")+1).replace(/\\r/g,"").replace(/\\n/g,"").trim()).trim();u[n]=i.startsWith("http")?Oe.Uri.parse(i):Oe.Uri.joinPath(e,i)})),u&&Object.keys(u).length)return io(F.IPyWidgetExtensionJsInfo,{requireEntryPointCount:Object.keys(u).length},{widgetFolderNameHash:r,patternUsedToRegisterRequireConfig:o}),u;io(F.IPyWidgetExtensionJsInfo,void 0,{widgetFolderNameHash:r,failed:!0,patternUsedToRegisterRequireConfig:o,failure:"noRequireConfigEntries"})}(e,n,i);if(!r){let e=`Failed to extract require.config from widget for ${n} from ${pn(t)}`;y&&(e+=`with contents ${i}`),Cn(e)}return xn(`Extracted require.config entry for ${n} from ${pn(t)} for ${e.toString()} is ${JSON.stringify(r)}`),r}catch(e){Sn(`Failed to extract require.config entry for ${n} from ${pn(t)}`,e)}}async getWidgetModuleMappingsImpl(){const e=new se,[t,n]=await Promise.all([this.getWidgetEntryPoints(),this.getNbExtensionsParentPath()]);if(xn(`Widget Entry points = ${JSON.stringify(t)}`),xn(`Widget baseUrl = ${n?.toString()}`),!n)return;const i=await Promise.all(t.map((e=>this.getConfigFromWidget(n,e.uri,e.widgetFolderName)))),r=i.reduce(((e,t)=>Object.assign(e||{},t)),{});return r&&Object.keys(r).length?(delete r["jupyter-js-widgets"],delete r["@jupyter-widgets/base"],delete r["@jupyter-widgets/controls"],delete r["@jupyter-widgets/output"]):xn(`No config, entryPoints = ${JSON.stringify(t)}, widgetConfigs = ${JSON.stringify(i)}`),xn(`Widget config = ${JSON.stringify(r)}`),io(F.DiscoverIPyWidgetNamesPerf,{duration:e.elapsedTime},{type:ea(this.kernel.kernelConnectionMetadata)?"local":"remote"}),r&&Object.keys(r).length?r:void 0}}class fw extends hw{constructor(e,t,n,i){if(super(e),this.httpClient=t,this.context=n,this.fs=i,"connectToLiveRemoteKernel"!==e.kernelConnectionMetadata.kind&&"startUsingRemoteKernelSpec"!==e.kernelConnectionMetadata.kind)throw new Error("Invalid usage, can only be used for remote kernels");this.kernelConnection=e.kernelConnectionMetadata,this.getWidgetEntryPoints().catch(ae)}getBaseUrl(){return this.getNbExtensionsParentPath()}async getNbExtensionsParentPath(){return Oe.Uri.parse(this.kernelConnection.baseUrl)}onKernelRestarted(){this.widgetEntryPointsPromise=void 0,super.onKernelRestarted()}async getWidgetEntryPoints(){return this.widgetEntryPointsPromise||(this.widgetEntryPointsPromise=this.getWidgetEntryPointsImpl()),this.widgetEntryPointsPromise}getCodeToExecute(){return this.code||(this.code=this.fs.readFile(Oe.Uri.joinPath(this.context.extensionUri,"pythonFiles","printJupyWidgetEntryPoints.py"))),this.code}async getWidgetEntryPointsImpl(){if(!fs(this.kernelConnection))return[];const e=await this.getCodeToExecute();if(!this.kernel.session?.kernel)return xn("No Kernel session to get list of widget entry points"),[];const t=[];t.push(Cs(this.kernel.session.kernel,e,{traceErrors:!0,traceErrorsMessage:"Failed to get widget entry points from remote kernel"})),y||this.context.extensionMode!==Oe.ExtensionMode.Production||t.push(Q(1e4).then((()=>[]))),t.forEach((e=>e.catch(ae)));const n=await Promise.race(t);if(0===n.length)return xn("Unable to get widget entry points, no outputs after running the code"),[];const i=n[0];if("stream"!==i.output_type||"stdout"!==i.name)return xn("Unable to get widget entry points, no stream/stdout outputs after running the code"),[];try{return i.text.trim().substring(1).slice(0,-1).split(",").map((e=>Pe(e.trim()))).map((e=>({uri:Oe.Uri.joinPath(Oe.Uri.parse(this.kernelConnection.baseUrl),"nbextensions",e),widgetFolderName:Pt(e)})))}catch(e){return Sn(`Failed to parse output to get list of IPyWidgets, output is ${i.text}`,e),[]}}async getWidgetScriptSource(e){const t=e.toString(),n=await this.httpClient.downloadFile(t);if(200===n.status)return n.text();throw Sn(`Error downloading from ${t}: ${n.statusText}`),new Error(`Error downloading from ${t}: ${n.statusText}`)}}class mw extends hw{constructor(e,t,n,i,r){super(e),this.fs=t,this.nbExtensionsPathProvider=n,this.context=i,this.jupyterPaths=r,this.overwriteExistingFiles=!0,this.overwriteExistingFiles=!mw.nbExtensionsCopiedKernelConnectionList.has(e.kernelConnectionMetadata.id)}getBaseUrl(){return this.getNbExtensionsParentPath()}onKernelRestarted(){this.nbExtensionsParentPath=void 0,this.overwriteExistingFiles=!0,super.onKernelRestarted()}async getNbExtensionsParentPath(){return this.nbExtensionsParentPath||(this.nbExtensionsParentPath=this.getNbExtensionsParentPathImpl()),this.nbExtensionsParentPath}async getNbExtensionsParentPathImpl(){let e=this.overwriteExistingFiles;try{const t=new se;if(this.sourceNbExtensionsPath=await this.nbExtensionsPathProvider.getNbExtensionsParentPath(this.kernel),!this.sourceNbExtensionsPath)return;const n=await jr(this.kernel.kernelConnectionMetadata.id),i=Oe.Uri.joinPath(this.context.extensionUri,"temp","scripts",n,"jupyter"),r=Oe.Uri.joinPath(i,"nbextensions"),[o]=await Promise.all([this.jupyterPaths.getDataDirs({resource:this.kernel.resourceUri,interpreter:this.kernel.kernelConnectionMetadata.interpreter}),this.fs.createDirectory(r)]),s=o.map((e=>Oe.Uri.joinPath(e,"nbextensions")));s.reverse();for(const t of s)await this.fs.exists(t)&&await this.fs.copy(t,r,{overwrite:e});return this.overwriteExistingFiles=!1,mw.nbExtensionsCopiedKernelConnectionList.add(this.kernel.kernelConnectionMetadata.id),io(F.IPyWidgetNbExtensionCopyTime,{duration:t.elapsedTime}),i}catch(e){throw io(F.IPyWidgetNbExtensionCopyTime,void 0,void 0,e),e}}async getWidgetEntryPoints(){const e=await this.getNbExtensionsParentPath();if(!e)return[];const t=Oe.Uri.joinPath(e,"nbextensions");return(await this.fs.searchLocal("*/extension.js",t.fsPath,!0)).map((e=>({uri:Oe.Uri.joinPath(t,e),widgetFolderName:Pt(e)})))}getWidgetScriptSource(e){return this.fs.readFile(e)}}mw.nbExtensionsCopiedKernelConnectionList=new Set;var gw=function(e,t){return function(n,i){t(n,i,e)}};let vw=class{constructor(e,t,n,i,r,o){this.nbExtensionsPathProvider=e,this.fs=t,this.context=n,this.httpClient=i,this.jupyterPaths=r,this.disposables=o,this.managers=new WeakMap}getOrCreate(e){if(!this.managers.has(e))if("connectToLiveRemoteKernel"===e.kernelConnectionMetadata.kind||"startUsingRemoteKernelSpec"===e.kernelConnectionMetadata.kind){const t=new fw(e,this.httpClient,this.context,this.fs);this.managers.set(e,t),e.onDisposed((()=>t.dispose()),this,this.disposables)}else{const t=new mw(e,this.fs,this.nbExtensionsPathProvider,this.context,this.jupyterPaths);this.managers.set(e,t),e.onDisposed((()=>t.dispose()),this,this.disposables)}return this.managers.get(e)}};vw=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),gw(0,zn(wb)),gw(1,zn(Nu)),gw(2,zn(Ui)),gw(3,zn(Fi)),gw(4,zn(vf)),gw(5,zn(Ri))],vw);var yw,bw=function(e,t){return function(n,i){t(n,i,e)}};let ww=yw=class{constructor(e,t){this.appShell=t,this.disposables=[],e.push(this)}dispose(){Ie(this.disposables)}activate(){Oe.workspace.onDidChangeNotebookDocument(this.onDidChangeNotebookDocument,this,this.disposables)}onDidChangeNotebookDocument(e){Za(e.notebook)&&e.cellChanges.some((e=>e.outputs&&e.outputs.some((e=>e.items&&e.items.some((e=>e.mime===K))))))&&this.checkRendererExtensionVersion()}checkRendererExtensionVersion(){if(!Oe.workspace.isTrusted)return;const e=Oe.extensions.getExtension(P);if(!e)return void this.displayNotInstalledMessage();const t=e.packageJSON.version;if(!t)return void this.displayUpdateMessage();const n=t.split("."),i=parseInt(n[0],10),r=parseInt(n[1],10),o=parseInt(n[2],10);(i<1||1===i&&0===r&&o<15)&&this.displayUpdateMessage()}displayNotInstalledMessage(){yw.messageDisplayed||(yw.messageDisplayed=!0,this.appShell.showInformationMessage(gr.rendererExtensionRequired,{modal:!0},lr.bannerLabelYes).then((e=>{e===lr.bannerLabelYes&&Oe.commands.executeCommand("extension.open",P).then(ae,ae)})).then(ae,ae))}displayUpdateMessage(){yw.messageDisplayed||(yw.messageDisplayed=!0,this.appShell.showInformationMessage(gr.rendererExtension1015Required,{modal:!0},lr.bannerLabelYes).then((e=>{e===lr.bannerLabelYes&&Oe.commands.executeCommand("extension.open",P).then(ae,ae)})).then(ae,ae))}};ww.messageDisplayed=!1,ww=yw=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),bw(0,zn(Ri)),bw(1,zn(Jn))],ww);var _w=function(e,t){return function(n,i){t(n,i,e)}};let Sw=class{constructor(e,t,n,i,r,o){this.controllerRegistration=e,this.isWebExtension=t,this.kernelFinder=n,this.notebookEditorProvider=i,this.kernelDependency=r,this.localDisposables=[],this.providerMappings=new Map,this.kernelSpecsSourceRegistered=!1,o.push(this)}dispose(){Ie(this.localDisposables)}activate(){if(!this.isWebExtension){this.localDisposables.push(Oe.notebooks.registerKernelSourceActionProvider(l,{provideNotebookKernelSourceActions:()=>[{label:gr.localPythonEnvironments,documentation:Oe.Uri.parse("https://aka.ms/vscodeJupyterExtKernelPickerPythonEnv"),command:"jupyter.kernel.selectLocalPythonEnvironment"}]})),this.localDisposables.push(Oe.notebooks.registerKernelSourceActionProvider(d,{provideNotebookKernelSourceActions:()=>[{label:gr.localPythonEnvironments,documentation:Oe.Uri.parse("https://aka.ms/vscodeJupyterExtKernelPickerPythonEnv"),command:"jupyter.kernel.selectLocalPythonEnvironment"}]}));let e=[];const t=new Oe.EventEmitter;this.localDisposables.push(Oe.notebooks.registerKernelSourceActionProvider(l,{onDidChangeNotebookKernelSourceActions:t.event,provideNotebookKernelSourceActions:()=>e})),this.localDisposables.push(Oe.notebooks.registerKernelSourceActionProvider(d,{onDidChangeNotebookKernelSourceActions:t.event,provideNotebookKernelSourceActions:()=>e}));const n=()=>{this.kernelSpecsSourceRegistered||this.kernelFinder.kernels.some((e=>hs(e)))&&(this.kernelSpecsSourceRegistered=!0,e=[{label:gr.localKernelSpecs,documentation:Oe.Uri.parse("https://aka.ms/vscodeJupyterExtKernelPickerJupyterKernels"),command:"jupyter.kernel.selectLocalKernelSpec"}],t.fire())};n(),this.kernelFinder.onDidChangeKernels((()=>n()),this,this.localDisposables),this.localDisposables.push(Oe.commands.registerCommand("jupyter.kernel.selectLocalKernelSpec",this.onSelectLocalKernel.bind(this,jm.LocalKernelSpec),this)),this.localDisposables.push(Oe.commands.registerCommand("jupyter.kernel.selectLocalPythonEnvironment",this.onSelectLocalKernel.bind(this,jm.LocalPythonEnvironment),this))}this.localDisposables.push(Oe.commands.registerCommand("jupyter.kernel.selectJupyterServerKernel",this.onSelectRemoteKernel,this)),Wp.instance.get(gi).onDidChangeProviders(this.registerUriCommands,this,this.localDisposables),this.registerUriCommands()}registerUriCommands(){const e=Wp.instance.get(gi),n=new Set;e.providers.map((e=>{const i=`${e.extensionId}:${e.id}`;if(e.id===t)return;if(n.add(i),this.providerMappings.has(i))return;const r=Oe.notebooks.registerKernelSourceActionProvider(l,{provideNotebookKernelSourceActions:()=>[{get label(){return e.displayName??(e.detail?`${e.detail} (${e.id})`:e.id)},get documentation(){return e.documentation},command:{command:"jupyter.kernel.selectJupyterServerKernel",arguments:[e.extensionId,e.id],title:e.displayName??e.id}}]}),o=Oe.notebooks.registerKernelSourceActionProvider(d,{provideNotebookKernelSourceActions:()=>[{get label(){return e.displayName??(e.detail?`${e.detail} (${e.id}) ${Date.now()}`:e.id)},get documentation(){return e.documentation},command:{command:"jupyter.kernel.selectJupyterServerKernel",arguments:[e.extensionId,e.id],title:e.displayName??e.id}}]});this.localDisposables.push(r),this.localDisposables.push(o),this.providerMappings.set(i,{disposables:[r,o],provider:e})})),this.providerMappings.forEach((({disposables:e},t)=>{n.has(t)||(Ie(e),this.providerMappings.delete(t))}))}async onSelectLocalKernel(e,t){if(t=t||Oe.window.activeNotebookEditor?.notebook){if(e===jm.LocalPythonEnvironment){const e=Wp.instance.get(Bs),n=await e.selectLocalKernel(t);return this.getSelectedController(t,n)}{const e=Wp.instance.get($s),n=await e.selectLocalKernel(t);return this.getSelectedController(t,n)}}}async onSelectRemoteKernel(e,t,n){if(!(n=n||Oe.window.activeNotebookEditor?.notebook)&&Oe.window.activeTextEditor&&(n=this.notebookEditorProvider.findNotebookEditor(Oe.window.activeTextEditor.document.uri)?.notebook),!n)return;const i=`${e}:${t}`,r=this.providerMappings.get(i)?.provider;if(!r)return;const o=Wp.instance.get(Ws),s=await o.selectRemoteKernel(n,r);return this.getSelectedController(n,s)}async getSelectedController(e,t){if(!t)return;const n=this.controllerRegistration.addOrUpdate(t,[e.notebookType]);if(!Array.isArray(n)||0===n.length)return void Cn(`No controller created for selected kernel connection ${t.kind}:${t.id}`);If(e.uri,t).finally((()=>Dh(e.uri,F.SwitchKernel,void 0,{newKernelPicker:!0}))).catch(ae),n.find((t=>t.viewType===e.notebookType))?.controller.updateNotebookAffinity(e,Oe.NotebookControllerAffinity.Preferred);const i=n[0];return await this.onControllerSelected(e,i),i.controller.id}async onControllerSelected(e,t){if(ea(t.connection)&&fs(t.connection)&&t.connection.interpreter?.isCondaEnvWithoutPython&&!this.isWebExtension){const n=[];try{const i=new Oe.CancellationTokenSource;n.push(i);const r=new hh(!1);n.push(r),await this.kernelDependency.installMissingDependencies({resource:e.uri,kernelConnection:t.connection,token:i.token,ui:r,cannotChangeKernels:!0,ignoreCache:!0,installWithoutPrompting:!0})}catch(e){Sn(`Failed to install missing dependencies for Conda kernel ${t.connection.id}`,e)}finally{Ie(n)}}}};Sw=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),_w(0,zn(Ks)),_w(1,zn(Pi)),_w(2,zn(la)),_w(3,zn(Jb)),_w(4,zn(ca)),_w(5,zn(Ri))],Sw);class Cw{constructor(e){this.jupyterConnection=e,this.disposables=[]}dispose(){Ie(this.disposables)}async findPreferredRemoteKernelConnection(e,t,n){return this.findPreferredRemoteKernelConnectionImpl(e,t,n,!1)}async findPreferredRemoteKernelConnectionImpl(e,t,n,i){const r=await Wp.instance.get(dh).getPreferredRemoteKernelId(e.uri),o=async()=>{let e=t.kernels.find((e=>"connectToLiveRemoteKernel"===e.kind&&e.id===r));if(e)return e;if("idle"===t.status)return;const i=await new Promise((e=>t.onDidChangeKernels((()=>{const i=t.kernels.find((e=>"connectToLiveRemoteKernel"===e.kind&&e.id===r));i&&e(i),("idle"===t.status||n.isCancellationRequested)&&e(void 0)}),this,this.disposables)));return i||void 0};if(r){const e=await o();if(e||i)return e}const s=t.kernels.find((e=>ta(e)))?.serverProviderHandle;if(s){const n=zm(await this.jupyterConnection.createConnectionInfo(s),e.uri),i=n&&t.kernels.find((e=>ta(e)&&"connectToLiveRemoteKernel"===e.kind&&e.kernelModel.model&&e.kernelModel.model.path===n.path&&e.kernelModel.model.name===n.name));if(i)return i}return this.findPreferredKernelSpecConnection(e,t,n,i)}async findPreferredLocalKernelSpecConnection(e,t,n){return this.findPreferredKernelSpecConnection(e,t,n,!1)}async findPreferredKernelSpecConnection(e,t,n,i){const r=ec(e),o=r?.kernelspec?.name,s=()=>{const n=o?t.kernels.filter((e=>("startUsingLocalKernelSpec"===e.kind||"startUsingRemoteKernelSpec"===e.kind)&&e.kernelSpec.name===o)):[];if(n.length||i)return n;const r=Vb(e);return r?t.kernels.filter((e=>("startUsingLocalKernelSpec"===e.kind||"startUsingRemoteKernelSpec"===e.kind)&&e.kernelSpec.language&&(e.kernelSpec.language===r||Xa(e.kernelSpec.language)===Xa(r)))):void 0},a=s();if(Array.isArray(a)&&a.length){if(i&&a.length>1)return;return a[0]}if("idle"===t.status)return;const c=[];return new Promise((e=>t.onDidChangeKernels((()=>{if(n.isCancellationRequested)return e(void 0);const r=s();if(Array.isArray(r)&&r.length)return i&&r.length>1?e(void 0):e(r[0]);"idle"===t.status&&e(void 0)}),this,this.disposables))).finally((()=>Ie(c)))}async findPreferredPythonKernelConnection(e,t,n){return this.findPreferredPythonKernelConnectionImpl(e,t,n)}async findPreferredPythonKernelConnectionImpl(e,t,n){t=t||Wp.instance.get(la).registered.find((e=>e.kind===jm.LocalPythonEnvironment));const i=Wp.instance.get(ka),r=kw(e,t);if(r)return r;const o=await i.getActiveInterpreter(e.uri);if(!o)return;const s=()=>{if(!n.isCancellationRequested)return t.kernels.filter((e=>"startUsingPythonInterpreter"===e.kind)).map((e=>e)).find((e=>e.interpreter.id===o.id))};return s()||("discovering"===t.status?(await new Promise((n=>{t.onDidChangeStatus((()=>"idle"===t.status&&n()),this,this.disposables),t.onDidChangeKernels((()=>(kw(e,t)||s())&&n()),this,this.disposables)})),kw(e,t)||s()):void 0)}}function kw(e,t){const n=Oe.workspace.getWorkspaceFolder(e.uri)?.uri||(1===Oe.workspace.workspaceFolders?.length?Oe.workspace.workspaceFolders[0].uri:void 0);return Ew(en(e.uri),t)||(n?Ew(n,t):void 0)}function Ew(e,t){const n=t.kernels.filter((e=>"startUsingPythonInterpreter"===e.kind)).map((e=>e)).filter((t=>sl(t.interpreter.envPath?.fsPath||t.interpreter.uri.fsPath,e.fsPath))),i=n.find((e=>e.interpreter.envType===ko.Venv&&".venv"===e.interpreter.envName?.toLowerCase()));if(i)return i;const r=n.find((e=>e.interpreter.envType===ko.Venv&&".venv"===e.interpreter.envName?.toLowerCase()));if(r)return r;return n.find((e=>e.interpreter.envType===ko.Venv&&".venv"===e.interpreter.envName?.toLowerCase()))||(n.length?n[0]:void 0)}class xw{constructor(e,t,n,i,r){this.notebook=e,this.pythonEnvFilter=i,this.connection=r,this._onDidRefresh=new Oe.EventEmitter,this.onDidRefresh=this._onDidRefresh.event,this._onDidChange=new Oe.EventEmitter,this.onDidChange=this._onDidChange.event,this.kernels=[],this._onDidChangeStatus=new Oe.EventEmitter,this.onDidChangeStatus=this._onDidChangeStatus.event,this._onDidChangeRecommended=new Oe.EventEmitter,this.onDidChangeRecommended=this._onDidChangeRecommended.event,this._onDidFailToListKernels=new Oe.EventEmitter,this.onDidFailToListKernels=this._onDidFailToListKernels.event,this.status="idle",this.disposables=[],this.refresh=async()=>{this.refreshInvoked=!0},this.title=gr.kernelPickerSelectKernelTitle,this.kind=t,this.disposables.push(this._onDidRefresh),ee(n)?n.then((e=>this.setupFinder(e))).catch((e=>Sn(`Failed to setup finder for ${this.title}`,e))):this.setupFinder(n)}dispose(){Ie(this.disposables)}setupFinder(e){switch(this.refresh=async()=>e.refresh(),this.status===e.status||this.refreshInvoked||(this.status=e.status,this._onDidChangeStatus.fire()),(this.refreshInvoked||e.kind===jm.Remote&&"idle"===e.status&&0===this.filteredKernels(e.kernels).length)&&e.refresh().catch((e=>Sn(`Failed to refresh finder for ${this.title}`,e))),e.kind){case jm.LocalKernelSpec:this.title=gr.kernelPickerSelectLocalKernelSpecTitle;break;case jm.LocalPythonEnvironment:this.title=gr.quickPickSelectPythonEnvironmentTitle;break;default:this.title=gr.kernelPickerSelectKernelFromRemoteTitle(e.displayName)}e.onDidChangeKernels((()=>{this.kernels.length=0,this.kernels.push(...this.filteredKernels(e.kernels)),this._onDidChange.fire()}),this,this.disposables),e.onDidChangeStatus((()=>{this.status=e.status,this._onDidChangeStatus.fire(),"idle"===this.status&&e.lastError&&0===this.filteredKernels(e.kernels).length&&(this.kernels.length=0,this._onDidFailToListKernels.fire(e.lastError))})),this.kernels.length=0,this.kernels.push(...this.filteredKernels(e.kernels)),this._onDidChange.fire(),this._onDidChangeStatus.fire();const t=new Oe.CancellationTokenSource;this.disposables.push(new Oe.Disposable((()=>t.cancel()))),this.disposables.push(t);const n=new Cw(this.connection);this.disposables.push(n),e.kind===jm.Remote?this.computePreferredRemoteKernel(e,n,t.token):this.computePreferredLocalKernel(e,n,t.token)}filteredKernels(e){const t=this.pythonEnvFilter;return t?e.filter((e=>"startUsingPythonInterpreter"!==e.kind||!t.isPythonEnvironmentExcluded(e.interpreter))):e}computePreferredRemoteKernel(e,t,n){t.findPreferredRemoteKernelConnection(this.notebook,e,n).then((e=>{this.recommended=e,this._onDidChangeRecommended.fire()})).catch((e=>Sn(`Preferred connection failure ${pn(this.notebook.uri)}`,e)))}computePreferredLocalKernel(e,t,n){const i=()=>{this.recommended&&!this.kernels.find((e=>e.id===this.recommended?.id))&&(this.recommended=void 0),(e.kind===jm.LocalKernelSpec?t.findPreferredLocalKernelSpecConnection.bind(t):t.findPreferredPythonKernelConnection.bind(t))(this.notebook,e,n).then((e=>{this.recommended?.id!==e?.id&&(this.recommended=e,this._onDidChangeRecommended.fire())})).catch((e=>Sn(`Preferred connection failure ${pn(this.notebook?.uri)}`,e)))};i(),e.onDidChangeKernels(i,this,this.disposables)}}function Tw(e){return"connection"in e}class Pw extends Error{}class Iw extends dc{constructor(e,t){super(),this.provider=e,this.token=t,this.recommendedItems=[],this.existingItems=new Set,this.quickPickItems=[],this.displayDataProvider=Wp.instance.get(Hs)}async selectKernel(e){return this.selectKernelImpl(e,{quickPick:void 0})}async selectKernelImpl(e,t){if(this.token.isCancellationRequested)return;const n=this.provider.kernels.map((e=>this.connectionToQuickPick(e)));return this.quickPickItems.push({kind:Oe.QuickPickItemKind.Separator,label:gr.kernelCategoryForJupyterKernel}),n.sort(((e,t)=>e.label.localeCompare(t.label))),this.quickPickItems.push(...n),this.existingItems=new Set(n),this.selectKernelImplInternal(e,t)}async selectKernelImplInternal(e,t){const n={iconPath:new Oe.ThemeIcon("refresh"),tooltip:lr.refresh},i={iconPath:new Oe.ThemeIcon("loading~spin"),tooltip:lr.refreshing},{quickPick:r,selection:o}=e({title:this.provider.title,items:this.quickPickItems,buttons:[n],onDidTriggerButton:async e=>{if(e===n){const e=r.buttons;r.buttons=e.filter((e=>e!==n)).concat(i),await this.provider.refresh().catch(ae),r.buttons=e}}});let s;t.quickPick=r,"discovering"===this.provider.status&&(r.busy=!0),this.provider.onDidChangeStatus((()=>{switch(s&&clearTimeout(s),this.provider.status){case"discovering":r.busy=!0;break;case"idle":s=setTimeout((()=>r.busy=!1),500),this.disposables.push(new Oe.Disposable((()=>s&&clearTimeout(s))))}}),this,this.disposables),this.updateRecommended(r),this.updateQuickPickItems(r),this.provider.onDidChangeRecommended((()=>this.updateRecommended(r)),this,this.disposables),this.provider.onDidChange((()=>this.updateQuickPickItems(r)),this,this.disposables);const a=await o;if(!this.token.isCancellationRequested){if("command"in a)try{const e=await a.command();return e?{selection:"controller",connection:e}:void 0}catch(n){if(n instanceof Pw)return{selection:"userPerformedSomeOtherAction"};if(n===Xc.back)return this.selectKernelImplInternal(e,t);throw n}if(a&&"connection"in a)return{selection:"controller",connection:a.connection};if(a&&"error"in a)throw Xc.back}}updateQuickPickItems(e){e.title=this.provider.title;const t=new Set(e.items.filter((e=>Tw(e))).map((e=>e)).map((e=>e.connection.id))),n=this.provider.kernels.filter((e=>!t.has(e.id))).map((e=>this.connectionToQuickPick(e)));this.updateQuickPickWithLatestConnection(e),this.removeMissingKernels(e),this.updateRecommended(e),n.sort(((e,t)=>e.label.localeCompare(t.label)));const i=this.existingItems,r=new Map(Array.from(i).map((e=>[e.connection.id,e]))),o=i.size;n.forEach((e=>{const t=r.get(e.connection.id);t&&i.delete(t),i.add(e)}));const s=Array.from(i);s.sort(((e,t)=>e.label.localeCompare(t.label))),this.quickPickItems.splice(1,o,...s),this.rebuildQuickPickItems(e)}rebuildQuickPickItems(e){let t=this.recommendedItems.find((e=>Tw(e)));const n=new Set(this.recommendedItems.filter(Tw).map((e=>e.connection.id))),i=this.quickPickItems.filter((e=>!Tw(e)||!n.has(e.connection.id))),r=e.activeItems.length?e.activeItems[0]:void 0;t&&Tw(t)&&r&&(Tw(r)?r.connection.id!==t.connection.id&&(t=void 0):t=void 0),function(e,t,n){const i=n?[n]:e.activeItems.length?[e.activeItems[0]]:[];if(i.length&&!t.includes(i[0])){const e=i[0],n=Tw(e)&&t.find((t=>Tw(t)&&t.connection.id===e.connection.id));n?i[0]=n:i.length=0}e.items=t,e.activeItems=i}(e,this.recommendedItems.concat(i),t)}removeMissingKernels(e){const t=e.items.filter((e=>Tw(e))).map((e=>e)).map((e=>e.connection.id)),n=new Map(this.provider.kernels.map((e=>[e.id,e]))),i=t.filter((e=>!n.has(e)));if(i.length){const t=[];this.existingItems.forEach((e=>{i.includes(e.connection.id)&&(this.existingItems.delete(e),t.push(e))})),this.quickPickItems=this.quickPickItems.filter((e=>!t.includes(e))),this.rebuildQuickPickItems(e)}}updateRecommended(e){if(!this.provider.recommended)return void(this.recommendedItems.length=0);this.recommendedItems.length||this.recommendedItems.push({label:gr.recommendedItemCategoryInQuickPick,kind:Oe.QuickPickItemKind.Separator});const t=this.connectionToQuickPick(this.provider.recommended,!0);2===this.recommendedItems.length?this.recommendedItems[1]=t:this.recommendedItems.push(t),this.rebuildQuickPickItems(e)}updateQuickPickWithLatestConnection(e){const t=new Map(this.provider.kernels.map((e=>[e.id,e])));this.recommendedItems.concat(this.quickPickItems).forEach((e=>{if(!Tw(e)||!t.has(e.connection.id))return;const n=t.get(e.connection.id);n&&(e.label=this.connectionToQuickPick(n,e.isRecommended).label,e.tooltip=this.connectionToQuickPick(n,e.isRecommended).tooltip,e.detail=this.connectionToQuickPick(n,e.isRecommended).detail,e.description=this.connectionToQuickPick(n,e.isRecommended).description,e.isRecommended=this.connectionToQuickPick(n,e.isRecommended).isRecommended,e.connection=n)})),this.rebuildQuickPickItems(e)}connectionToQuickPick(e,t=!1){const n=t?"$(star-full) ":"",i=(e,t,i)=>{e.label=`${n}${t.label}`,e.detail=t.detail,e.description=t.description,this.quickPickItems.forEach((e=>{"connection"in e&&e.connection.id===i.id&&(e.label=t.label,e.detail=t.detail,e.description=t.description)}))},r=this.displayDataProvider.getDisplayData(e),o={label:"",detail:"",description:"",isRecommended:t,connection:e};return i(o,r,e),r.onDidChange((t=>i(o,t,e)),this,this.disposables),o}}var Dw=function(e,t){return function(n,i){t(n,i,e)}};let Rw=class{constructor(e,t,n,i){this.kernelFinder=e,this.multiStepFactory=t,this.pythonEnvFilter=n,this.jupyterConnection=i,this.localDisposables=[]}async selectLocalKernel(e){if(e.notebookType!==l&&e.notebookType!==d)return;this.localDisposables.forEach((e=>e.dispose())),this.localDisposables=[],this.cancellationTokenSource?.cancel(),this.cancellationTokenSource?.dispose(),this.cancellationTokenSource=new Oe.CancellationTokenSource;const t=this.multiStepFactory.create(),n={disposables:[],notebook:e},i=this.kernelFinder.registered.find((e=>e.id===jm.LocalKernelSpec));try{if(await t.run(this.selectKernelFromKernelFinder.bind(this,i,this.cancellationTokenSource.token,t,n),n)===Xc.cancel||"userPerformedSomeOtherAction"===n.selection?.type)throw new Oe.CancellationError;if(this.cancellationTokenSource.token.isCancellationRequested)return void Ie(n.disposables);if("connection"===n.selection?.type)return n.selection.connection}finally{Ie(n.disposables)}}selectKernelFromKernelFinder(e,t,n,i){const r=new xw(i.notebook,e.kind,e,this.pythonEnvFilter,this.jupyterConnection);return i.disposables.push(r),this.selectKernel(r,t,n,i)}async selectKernel(e,t,n,i){if(t.isCancellationRequested)return;const r=new Iw(e,t);i.disposables.push(r);const o=await r.selectKernel((e=>{const{quickPick:t,selection:i}=n.showLazyLoadQuickPick({...e,placeholder:"",matchOnDescription:!0,matchOnDetail:!0,supportBackInFirstStep:!0,activeItem:void 0,ignoreFocusOut:!1});return{quickPick:t,selection:i}}));"controller"===o?.selection?i.selection={type:"connection",connection:o.connection}:"userPerformedSomeOtherAction"===o?.selection&&(i.selection={type:"userPerformedSomeOtherAction"})}};Rw=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Dw(0,zn(la)),Dw(1,zn(el)),Dw(2,zn(_d)),Dw(3,zn(xs))],Rw);class Ow{dispose(){this.cancelTokeSource.dispose(),Ie(this.disposables)}constructor(e,t){this.notebook=e,this.disposables=[],Wp.instance.get(Ks).onControllerSelected((e=>{e.notebook!==this.notebook||"startUsingPythonInterpreter"===e.controller.connection.kind&&e.controller.connection.interpreter&&e.controller.connection.interpreter.id===this.createdEnvId||this.cancelTokeSource.cancel()}),this,this.disposables),this.cancelTokeSource=Pa(t)}async createPythonEnvFromKernelPicker(){let e;const t=await this.createPythonEnvironment();if(this.cancelTokeSource.token.isCancellationRequested||t.action)return io(F.CreatePythonEnvironment,void 0,{failed:!0,reason:"cancelled"}),{action:t.action||"Cancel"};if(!t.interpreter)return io(F.CreatePythonEnvironment,void 0,{failed:!0,reason:"cancelled"}),{action:"Cancel"};e=t.interpreter,En(`Python Environment created ${e.id}`);const n=await this.waitForPythonKernel(t.interpreter);if(this.cancelTokeSource.token.isCancellationRequested)return io(F.CreatePythonEnvironment,void 0,{failed:!0,reason:"cancelled"}),{action:"Cancel"};if(!n)return io(F.CreatePythonEnvironment,void 0,{failed:!0,reason:"kernelConnectionNotCreated"}),En(`Python Environment ${e.id} not found as a kernel`),{action:"Cancel"};En(`Python Environment ${e.id} found as a kernel ${n.kind}:${n.id}`);const i=Wp.instance.get(ca);let r=!0;return await i.installMissingDependencies({resource:this.notebook.uri,kernelConnection:n,ui:new hh(!1),token:this.cancelTokeSource.token,ignoreCache:!0,cannotChangeKernels:!0,installWithoutPrompting:!0})!==aa.ok&&(r=!1,Cn(`Dependencies not installed for new Python Env ${pn(e.uri)} for notebook ${pn(this.notebook.uri)}`)),io(F.CreatePythonEnvironment,void 0,{dependenciesInstalled:r,envType:t.interpreter.envType}),{kernelConnection:n}}async waitForPythonKernel(e){const t=Wp.instance.get(la).registered.find((e=>e.kind===jm.LocalPythonEnvironment));if(t)return this.waitForPythonKernelFromFinder(e,t)}async waitForPythonKernelFromFinder(e,t){return t.kernels.find((t=>t.interpreter.id===e.id))||new Promise((n=>{const i=[];i.push(t.onDidChangeKernels((()=>{if(this.cancelTokeSource.token.isCancellationRequested)return;const r=t.kernels.find((t=>t.interpreter.id===e.id));return r?(Ie(i),n(r)):void 0}),this,this.disposables)),i.push(this.cancelTokeSource.token.onCancellationRequested((()=>{Ie(i)})))})).then((t=>{if(!this.cancelTokeSource.token.isCancellationRequested)return t||Cn(`New Python Environment ${pn(e.uri)} not found as a kernel`),t}))}async createPythonEnvironment(){const e=Wp.instance.get(ka),t=new Oe.CancellationTokenSource;e.pauseInterpreterDetection(t.token);try{const t=await Oe.commands.executeCommand("python.createEnvironment",{showBackButton:!0,selectEnvironment:!0});if("Cancel"===t?.action)return{action:"Cancel"};if("Back"===t?.action)return{action:"Back"};const n=t?.path;if(this.cancelTokeSource.token.isCancellationRequested)return{action:"Cancel"};if(!n)return Cn("Python Environment not created, either user cancelled the creation or there was an error in the Python Extension"),{action:"Cancel"};this.createdEnvId=n,En(`Python Environment created ${n}`);const i=await e.getInterpreterDetails({path:n});return this.cancelTokeSource.token.isCancellationRequested?{action:"Cancel"}:(i||Cn(`No interpreter details for New Python Environment ${pn(Oe.Uri.file(n))}`),this.createdEnvId=i?.id,{interpreter:i})}finally{t.cancel(),t.dispose()}}}function Aw(e,t){const n=t.filter((t=>sl(t.environment?.folderUri?.fsPath||t.executable.uri?.fsPath||t.path,e.fsPath)));return n.find((e=>Vo(e)===ko.Venv&&".venv"===e.environment?.name?.toLowerCase()))||n.find((e=>Vo(e)===ko.Conda&&".conda"===e.environment?.name?.toLowerCase()))||n.find((e=>[ko.VirtualEnv,ko.VirtualEnvWrapper].includes(Vo(e))&&".venv"===e.environment?.name?.toLowerCase()))||n.find((e=>".venv"===e.environment?.name?.toLowerCase()||".conda"===e.environment?.name?.toLowerCase()))||n.length?n[0]:void 0}class Nw extends dc{constructor(e,t){super(),this.notebook=e,this.token=t;const n=Wp.instance.get(_d),i=Wp.instance.get(Ao),r=Wp.instance.get(Oo);this.provider=Wp.instance.get(_u).withFilter((e=>!n.isPythonEnvironmentExcluded(e))),this.pythonEnvPicker=new Hp(Promise.resolve(this.provider),Ap,Np,{supportsBack:!0},void 0,gr.quickPickSelectPythonEnvironmentTitle),this.disposables.push(this.pythonEnvPicker);let o=!1;const s=()=>{o||(o=!0,this.pythonEnvPicker.addCommand({label:`$(add) ${gr.createPythonEnvironmentInQuickPick}`},this.createNewEnvironment.bind(this)))};this.provider.items.length&&s();let a={dispose:ae};const c=this.provider.onDidChange((()=>{this.provider.items.length&&(s(),a.dispose(),c.dispose())}));this.disposables.push(c),this.provider.refresh().finally((()=>{this.provider.items.length||(a=this.pythonEnvPicker.addCommand({label:gr.installPythonQuickPickTitle,tooltip:gr.installPythonQuickPickToolTip,description:gr.pleaseReloadVSCodeOncePythonHasBeenInstalled},(()=>{throw setTimeout((()=>Oe.commands.executeCommand(N.InstallPythonViaKernelPicker).then(ae,ae))),new Oe.CancellationError})))})).catch(ae);const l=()=>{this.pythonApi&&!t.isCancellationRequested&&(this.pythonEnvPicker.recommended=function(e,t){const n=function(e,t){const n=Oe.workspace.getWorkspaceFolder(e.uri)?.uri||(1===Oe.workspace.workspaceFolders?.length?Oe.workspace.workspaceFolders[0].uri:void 0);return Aw(en(e.uri),t)||(n?Aw(n,t):void 0)}(e,t.environments.known);return n||(()=>{const n=t.environments.getActiveEnvironmentPath(e.uri);return n&&t.environments.known.find((e=>e.id===n.id))})()}(this.notebook,this.pythonApi))},d=e=>{e&&(this.pythonApi=e,l(),this.disposables.push(e.environments.onDidChangeActiveEnvironmentPath(l)),this.disposables.push(e.environments.onDidChangeEnvironments(l)))};i.isPythonExtensionInstalled?r.getNewApi().then(d).catch(ae):i.onPythonExtensionInstallationStatusChanged((()=>r.getNewApi().then(d)),this,this.disposables),l()}async selectKernel(){const e=ie();Oe.extensions.getExtension(T)||Oe.commands.executeCommand(N.InstallPythonExtensionViaKernelPicker).then((t=>{!0===t?this.provider.refresh().catch(ae):e.resolve()}),(t=>{Sn("Failed to install the Python extension",t),e.resolve()}));const t=await Promise.race([this.pythonEnvPicker.selectItem(this.token),e.promise]);if(!t||t instanceof Xc)return t||Xc.cancel;const n=Wp.instance.get(ka),i=Wp.instance.get(vf),r=await n.getInterpreterDetails(t.path);if(!r)return Xc.cancel;const o=await is(r,await i.getKernelSpecTempRegistrationFolder());return Zs.create({kernelSpec:o,interpreter:r,id:cs(o,r)})}async createNewEnvironment(){const e=Wp.instance.get(Oo);if(!Wp.instance.get(Ao).isPythonExtensionInstalled)return;const t=new Ow(this.notebook,this.token);this.disposables.push(t);const n=await t.createPythonEnvFromKernelPicker();if(!n)return Xc.cancel;if("action"in n)return"Back"===n.action?Xc.back:Xc.cancel;const i=await e.getNewApi();return i?.environments.known.find((e=>e.id===n.kernelConnection.interpreter.id))}}var Mw=function(e,t){return function(n,i){t(n,i,e)}};let Lw=class extends dc{get status(){return this._status}set status(e){this._status=e,this._onDidChangeStatus.fire()}get kernels(){return Array.from(this._kernels.values())}constructor(e,t,n,i,r,o){super(),this.pythonApi=t,this.filter=n,this.jupyterPaths=i,this.checker=r,this.kind=jm.LocalPythonEnvironment,this.id=jm.LocalPythonEnvironment,this.displayName=gr.localPythonEnvironments,this._onDidChangeKernels=new Oe.EventEmitter,this.onDidChangeKernels=this._onDidChangeKernels.event,this._kernels=new Map,this._onDidChangeStatus=new Oe.EventEmitter,this._status="idle",this.promiseMonitor=new Mo,this.onDidChangeStatus=this._onDidChangeStatus.event,this.previousCancellationTokens=[],this.apiHooked=!1,e.push(this),this.disposables.push(this._onDidChangeKernels),this.disposables.push(this._onDidChangeStatus),o.registerKernelFinder(this)}activate(){this.promiseMonitor.onStateChange((()=>this.status=this.promiseMonitor.isComplete?"idle":"discovering"),this,this.disposables),this.checker.isPythonExtensionInstalled?(this.getKernelSpecsDir().catch(ae),this.hookupPythonApi().catch(ae)):this.checker.onPythonExtensionInstallationStatusChanged((()=>{this.checker.isPythonExtensionInstalled&&(this.getKernelSpecsDir().catch(ae),this.hookupPythonApi().catch(ae))}),this,this.disposables)}async selectLocalKernel(e){const t=new Oe.CancellationTokenSource,n=[t];try{const i=new Nw(e,t.token);n.push(i);const r=await i.selectKernel();if(r instanceof Error){if(r instanceof Xc&&r===Xc.back)return;throw new Oe.CancellationError}return this.addUpdateKernel(r),r}finally{Ie(n)}}addUpdateKernel(e){const t=this._kernels.get(e.id);t?(t.updateInterpreter(e.interpreter),this._kernels.set(e.id,Object.assign(t,e)),this._onDidChangeKernels.fire({})):(this._kernels.set(e.id,e),this._onDidChangeKernels.fire({}))}async refresh(){this.previousCancellationTokens.forEach((e=>e.cancel())),Ie(this.previousCancellationTokens),this.previousCancellationTokens=[],this._kernels.clear(),this.pythonApi.getNewApi().then((e=>{e&&(this.promiseMonitor.push(e.environments.refreshEnvironments({forceRefresh:!0}).catch(ae)),e.environments.known.forEach((e=>this.buildDummyEnvironment(e).catch(ae))))})).catch(ae)}getKernelSpecsDir(){return this.tempDirForKernelSpecs||this.jupyterPaths.getKernelSpecTempRegistrationFolder()}async hookupPythonApi(){if(this.apiHooked)return;this.apiHooked=!0;const e=await this.pythonApi.getNewApi();e&&(e.environments.known.map((e=>this.buildDummyEnvironment(e).catch(ae))),e.environments.onDidChangeEnvironments((e=>{if("remove"===e.type){const t=this._kernels.get(e.env.id);t&&(this._kernels.delete(e.env.id),this._onDidChangeKernels.fire({removed:[t]}))}else this.buildDummyEnvironment(e.env).catch(ae)}),this,this.disposables))}async buildDummyEnvironment(e){const t=Jo(e,!0===(this.pythonApi.pythonExtensionVersion&&this.pythonApi.pythonExtensionVersion.compare("2023.3.10341119")>=0));if(!t||this.filter.isPythonEnvironmentExcluded(t))return;const n=await is(t,await this.getKernelSpecsDir()),i=Zs.create({kernelSpec:n,interpreter:t,id:cs(n,t)}),r=this._kernels.get(e.id);r?(r.updateInterpreter(i.interpreter),this._kernels.set(e.id,Object.assign(r,i)),this._onDidChangeKernels.fire({})):(this._kernels.set(e.id,i),this._onDidChangeKernels.fire({}))}};Lw=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Mw(0,zn(Ri)),Mw(1,zn(Oo)),Mw(2,zn(_d)),Mw(3,zn(vf)),Mw(4,zn(Ao)),Mw(5,zn(la))],Lw);var jw,Fw=function(e,t){return function(n,i){t(n,i,e)}};function Uw(e){return e===p||e===h}!function(e){e.KernelFinder="finder",e.LocalServer="localServer",e.UriProviderQuickPick="uriProviderQuickPick",e.JupyterServer="jupyterServer"}(jw||(jw={}));let qw=class{constructor(e,t,n,i,r,o,s,a){this.kernelFinder=e,this.serverUriStorage=t,this.serverSelector=n,this.jupyterConnection=i,this.displayDataProvider=r,this.kernelFinderController=o,this.jupyterPickerRegistration=s,this.jupyterServerRegistry=a,this.localDisposables=[]}async selectRemoteKernel(e,t){if(e.notebookType!==l&&e.notebookType!==d)return;this.localDisposables.forEach((e=>e.dispose())),this.localDisposables=[],this.cancellationTokenSource?.cancel(),this.cancellationTokenSource?.dispose(),this.cancellationTokenSource=new Oe.CancellationTokenSource;const n=Wp.instance.get(Jn),i=new Zc(n),r={disposables:[],notebook:e};try{if(await i.run(this.getRemoteServersFromProvider.bind(this,t,this.cancellationTokenSource.token),r)===Xc.cancel||"userPerformedSomeOtherAction"===r.selection?.type)throw new Oe.CancellationError;if(this.cancellationTokenSource.token.isCancellationRequested)return void Ie(r.disposables);if("connection"===r.selection?.type)return r.selection.connection}finally{Ie(r.disposables)}}async getRemoteServersFromProvider(e,t,n,i){const r=this.kernelFinder.registered.filter((e=>"remote"===e.kind)),o=[],s=[],a=[],c=this.jupyterServerRegistry.jupyterCollections.find((t=>t.extensionId===e.extensionId&&t.id===e.id))?.serverProvider,d=c?.provideJupyterServers?Promise.resolve(c.provideJupyterServers.bind(c)(t)).then((e=>e||[])):Promise.resolve([]),u=new Set,[f]=await Promise.all([d,Promise.all(r.filter((t=>t.serverProviderHandle.id===e.id)).map((async e=>{const n=(await this.serverUriStorage.getAll()).find((t=>fo(t.provider)===fo(e.serverProviderHandle)));t.isCancellationRequested||(u.add(fo(e.serverProviderHandle)),a.push({server:e,time:n?.time}))})))]);if(a.sort(((e,t)=>e.time||t.time?!e.time&&t.time?1:e.time&&!t.time||(e.time||0)>(t.time||0)?-1:1:e.server.displayName.localeCompare(t.server.displayName))),a.filter((({time:e})=>(e||0)>0)).forEach((({server:t,time:n})=>{o.push({type:jw.KernelFinder,kernelFinderInfo:t,idAndHandle:t.serverProviderHandle,label:t.displayName,description:n?gr.jupyterServerLastConnectionForQuickPickDescription(new Date(n)):void 0,buttons:c?.removeJupyterServer&&Uw(e.extensionId)?[{iconPath:new Oe.ThemeIcon("close"),tooltip:gr.removeRemoteJupyterServerEntryInQuickPick}]:[]})})),a.filter((({time:e})=>!e)).forEach((({server:t})=>{o.push({type:jw.KernelFinder,kernelFinderInfo:t,idAndHandle:t.serverProviderHandle,label:t.displayName,buttons:c?.removeJupyterServer&&Uw(e.extensionId)?[{iconPath:new Oe.ThemeIcon("close"),tooltip:gr.removeRemoteJupyterServerEntryInQuickPick}]:[]})})),f.sort(((e,t)=>e.label.localeCompare(t.label))).forEach((t=>{const n=fo({extensionId:e.extensionId,id:e.id,handle:t.id});u.has(n)||o.push({type:jw.JupyterServer,label:t.label,idAndHandle:{extensionId:e.extensionId,id:e.id,handle:t.id},server:t,buttons:c?.removeJupyterServer&&Uw(e.extensionId)?[{iconPath:new Oe.ThemeIcon("close"),tooltip:gr.removeRemoteJupyterServerEntryInQuickPick}]:[]})})),e.getQuickPickEntryItems&&e.handleQuickPick){const t=(await e.getQuickPickEntryItems()).map((t=>({...t,provider:e,type:jw.UriProviderQuickPick,originalItem:t})));o.length>0&&t.length&&s.push({label:"",kind:Oe.QuickPickItemKind.Separator}),s.push(...t)}const m=o.concat(s),g=new Oe.EventEmitter;let v,y,b=1===m.length&&"default"in m[0]&&m[0].default?m[0]:void 0;if(c){const e=m.filter((e=>"type"in e));1===e.length&&e.every((e=>e.type!==jw.UriProviderQuickPick))?b=e[0]:e.every((e=>e.type===jw.UriProviderQuickPick))&&1===e.filter((e=>e.picked)).length&&(b=m.filter((e=>e.picked))[0])}if(b)y=b;else{const{quickPick:t,selection:i}=n.showLazyLoadQuickPick({items:m,placeholder:e.extensionId===p||e.extensionId===h?gr.enterOrSelectRemoteJupyterPlaceholder:gr.selectRemoteJupyterPlaceholder,title:gr.quickPickTitleForSelectionOfJupyterServer,supportBackInFirstStep:!0,onDidTriggerItemButton:async n=>{if("type"in n.item&&(n.item.type===jw.KernelFinder||n.item.type===jw.JupyterServer)){const i=n.item.idAndHandle.handle,r=f.find((e=>e.id===i));c?.removeJupyterServer&&r&&Uw(e.extensionId)&&(t.busy=!0,this.serverUriStorage.remove({extensionId:e.extensionId,id:e.id,handle:i}).catch(ae),await c.removeJupyterServer(r),t.busy=!1,m.splice(m.indexOf(n.item),1),g.fire(m.concat([])))}},onDidChangeItems:g.event});t.onDidChangeValue((async n=>{if(!e.getQuickPickEntryItems)return;const i=[];o.length>0&&i.push({label:"",kind:Oe.QuickPickItemKind.Separator});const r=(await e.getQuickPickEntryItems(n)).map((t=>({...t,provider:e,type:jw.UriProviderQuickPick,originalItem:t})));t.items=o.concat(i).concat(r)}),this),v=t,y=await i}if(!t.isCancellationRequested&&y&&"type"in y)switch(y.type){case jw.KernelFinder:{const r=await this.selectRemoteKernelFromPicker(i.notebook,Promise.resolve(y.kernelFinderInfo),t).catch((e=>Sn("Failed to select a kernel",e)));if(r&&r===Xc.back){if(y===b)throw Xc.back;return this.getRemoteServersFromProvider(e,t,n,i)}if(!r||r instanceof Xc)throw new Oe.CancellationError;return void(i.selection={type:"connection",connection:r})}case jw.JupyterServer:{const r=(async()=>{const n={id:e.id,handle:y.server.id,extensionId:e.extensionId};return await Ta(t,this.serverSelector.addJupyterServer(n)),this.kernelFinderController.getOrCreateRemoteKernelFinder(n,y.server.label)})(),o=await this.selectRemoteKernelFromPicker(i.notebook,r,t).catch((e=>Sn("Failed to select a kernel",e)));if(o&&o===Xc.back){if(y===b)throw Xc.back;return this.getRemoteServersFromProvider(e,t,n,i)}if(!o||o instanceof Xc)throw new Oe.CancellationError;return void(i.selection={type:"connection",connection:o})}case jw.UriProviderQuickPick:{const r=Oe.notebooks.createNotebookControllerDetectionTask(l);try{v&&(v.busy=!0);const e=await this.selectRemoteServerFromRemoteKernelFinder(y,i,t);return v&&(v.busy=!1),e}catch(r){if(r!==Xc.back||b)throw r;return this.getRemoteServersFromProvider(e,t,n,i)}finally{r.dispose()}}}}async selectRemoteServerFromRemoteKernelFinder(e,t,n){if(!e.provider.handleQuickPick||n.isCancellationRequested)return;const i=await e.provider.handleQuickPick(e.originalItem,!0);if(!i||n.isCancellationRequested)throw new Oe.CancellationError;if("back"===i)throw Xc.back;const r=(async()=>{const t={id:e.provider.id,handle:i,extensionId:e.provider.extensionId};await Ta(n,this.serverSelector.addJupyterServer(t));const r=await Ta(n,this.jupyterPickerRegistration.getDisplayNameIfProviderIsLoaded(t));return this.kernelFinderController.getOrCreateRemoteKernelFinder(t,r||e.originalItem.label)})(),o=await this.selectRemoteKernelFromPicker(t.notebook,r,n).catch((e=>Sn("Failed to select a kernel",e)));if(o&&o===Xc.back)throw Xc.back;if(!o||o instanceof Xc)throw new Oe.CancellationError;t.selection={type:"connection",connection:o}}async selectRemoteKernelFromPicker(e,t,n){let i;const r=new Hp(t,(e=>{const t=this.displayDataProvider.getDisplayData(e);return{label:`${e===i?"$(star-full) ":""}${t.label}`,description:t.description,detail:t.detail}}),(e=>({label:this.displayDataProvider.getDisplayData(e).category||"Other"})),{supportsBack:!0},(e=>({label:gr.failedToFetchKernelSpecsRemoteErrorMessageForQuickPickLabel,detail:gr.failedToFetchKernelSpecsRemoteErrorMessageForQuickPickDetail}))),o=new Cw(this.jupyterConnection);return t.then((t=>o.findPreferredRemoteKernelConnection(e,t,n))).then((e=>{i=e,"startUsingRemoteKernelSpec"===e?.kind&&(r.recommended=e),r.selected=e})).catch((e=>Sn("Failed to determine preferred remote kernel",e))),r.selectItem(n)}};qw=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Fw(0,zn(la)),Fw(1,zn(vi)),Fw(2,zn(Ps)),Fw(3,zn(xs)),Fw(4,zn(Hs)),Fw(5,zn(og)),Fw(6,zn(gi)),Fw(7,zn(Ei))],qw);const Kw=Symbol("IJupyterDebugService"),Vw=Symbol("INotebookDebuggingManager");var Ww;!function(e){e[e.RunByLine=0]="RunByLine",e[e.Cell=1]="Cell",e[e.InteractiveWindow=2]="InteractiveWindow"}(Ww||(Ww={}));const $w=Symbol("IDebugLocationTrackerFactory"),Bw=Symbol("IDebugLocationTracker");var Hw=function(e,t){return function(n,i){t(n,i,e)}};let zw=class{constructor(e,t,n,i){this.debuggingManager=e,this.vscNotebook=t,this.disposables=n,this.commandManager=i}activate(){this.disposables.push(this.commandManager.registerCommand(N.RunByLine,this.runByLine,this)),this.disposables.push(this.commandManager.registerCommand(N.RunByLineNext,this.runByLineNext,this)),this.disposables.push(this.commandManager.registerCommand(N.RunByLineStop,this.runByLineStop,this)),this.disposables.push(this.commandManager.registerCommand(N.RunAndDebugCell,this.runAndDebugCell,this))}async runByLine(e){io(Tr.clickedRunByLine),e??(e=this.getCellFromActiveEditor()),e&&await this.debuggingManager.tryToStartDebugging(Ww.RunByLine,e)}async runByLineNext(e){e??(e=this.getCellFromActiveEditor()),e&&this.debuggingManager.runByLineNext(e)}async runByLineStop(e){e??(e=this.getCellFromActiveEditor()),e&&this.debuggingManager.runByLineStop(e)}async runAndDebugCell(e){io(Tr.clickedRunAndDebugCell),e??(e=this.getCellFromActiveEditor()),e&&await this.debuggingManager.tryToStartDebugging(Ww.Cell,e)}getCellFromActiveEditor(){const e=this.vscNotebook.activeNotebookEditor;if(e){const t=e.selections[0];if(t)return e.notebook.cellAt(t.start)}}dispose(){this.disposables.forEach((e=>e.dispose()))}};zw=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Hw(0,zn(Vw)),Hw(1,zn(oi)),Hw(2,zn(Ri)),Hw(3,zn(Gn))],zw);var Jw=function(e,t){return function(n,i){t(n,i,e)}};let Gw=class{constructor(e,t,n){this.debugService=e,this.disposables=t,this.debugVariables=n}activate(){this.disposables.push(this.debugService.registerDebugAdapterTrackerFactory(i,this)),this.disposables.push(this.debugService.registerDebugAdapterTrackerFactory(Er,this)),this.disposables.push(this.debugService.registerDebugAdapterTrackerFactory(xr,this))}createDebugAdapterTracker(e){return this.debugVariables}};Gw=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Jw(0,zn(Kw)),Jw(0,Nc(C.MULTIPLEXING_DEBUGSERVICE)),Jw(1,zn(Ri)),Jw(2,zn(Oy)),Jw(2,Nc(C.DEBUGGER_VARIABLES))],Gw);const Yw=new Set(["DataFrame","list","dict","ndarray","Series","Tensor","EagerTensor","DataArray"]);function Qw(e){return{name:e.evaluateName??e.name,type:e.type,count:0,shape:"",size:0,supportsDataExplorer:Yw.has(e.type||""),value:e.value,truncated:!0,frameId:e.variablesReference}}class Xw{constructor(e){this._sessionId=e,this.topMostFrameId=0,this.sequenceNumbersOfRequestsPendingResponses=new Set,this.waitingForStackTrace=!1,this.debugLocationUpdatedEvent=new Oe.EventEmitter,this.sessionEndedEmitter=new Oe.EventEmitter,this.DebugLocation=void 0}get sessionId(){return this._sessionId}get sessionEnded(){return this.sessionEndedEmitter.event}get debugLocationUpdated(){return this.debugLocationUpdatedEvent.event}get debugLocation(){return this._debugLocation}onDidSendMessage(e){if(this.isResponseForRequestToFetchAllFrames(e)){const t=e.body?.stackFrames[0];this.topMostFrameId=t?.id,this.sequenceNumbersOfRequestsPendingResponses.delete(e.request_seq),this.waitingForStackTrace&&(this.DebugLocation={lineNumber:t?.line,fileName:this.normalizeFilePath(t?.source?.path),column:t.column},this.waitingForStackTrace=!1)}this.isStopEvent(e)&&(this.waitingForStackTrace=!0),this.isContinueEvent(e)&&(this.DebugLocation=void 0,this.waitingForStackTrace=!1)}onWillStopSession(){this.sessionEndedEmitter.fire(this)}onWillReceiveMessage(e){this.isRequestToFetchAllFrames(e)&&this.sequenceNumbersOfRequestsPendingResponses.add(e.seq)}set DebugLocation(e){const t=this._debugLocation;this._debugLocation=e,this._debugLocation!==t&&this.debugLocationUpdatedEvent.fire()}normalizeFilePath(e){return"win32"!==process.platform?e.replace(/\\/g,"/"):e}isStopEvent(e){return"event"===e.type&&"stopped"===e.event}isContinueEvent(e){if("event"===e.type){if("continue"===e.event)return!0}else if("response"===e.type&&"continue"===e.command)return!0;return!1}isResponseForRequestToFetchAllFrames(e){return"response"===e.type&&"stackTrace"===e.command&&e.body?.stackFrames[0]&&this.sequenceNumbersOfRequestsPendingResponses.has(e.request_seq)}isRequestToFetchAllFrames(e){return"request"===e.type&&"stackTrace"===e.command&&(0===e.arguments.startFrame||void 0===e.arguments.startFrame)}}var Zw=function(e,t){return function(n,i){t(n,i,e)}};const e_=new Set(["In","Out","exit","quit"]);let t_=class extends Xw{constructor(e,t,n,i,r,o,s){super(void 0),this.debugService=e,this.debuggingManager=t,this.configService=n,this.vscNotebook=i,this.varScriptGenerator=r,this.dfScriptGenerator=o,this.kernelProvider=s,this.refreshEventEmitter=new Oe.EventEmitter,this.lastKnownVariables=[],this.importedGetVariableInfoScriptsIntoKernel=new Set,this.watchedNotebooks=new Map,this.debuggingStarted=!1,this.currentVariablesReference=0,this.currentSeqNumsForVariables=new Set,this.debuggingManager.onDoneDebugging((()=>this.refreshEventEmitter.fire()),this)}get refreshRequired(){return this.refreshEventEmitter.event}get active(){return(void 0!==this.debugService.activeDebugSession||this.activeNotebookIsDebugging())&&this.debuggingStarted}async getVariables(e,t){t&&this.watchKernel(t);const n=t&&this.kernelProvider.getKernelExecution(t),i={executionCount:n?n.executionCount:e.executionCount,pageStartIndex:0,pageResponse:[],totalCount:0,refreshCount:e.refreshCount};if(this.active){const t=e.sortColumn,n=(n,i)=>{const r=n[t]?n[t]:"",o=i[t]?i[t]:"";return e.sortAscending?r.localeCompare(o,void 0,{sensitivity:"base"}):o.localeCompare(r,void 0,{sensitivity:"base"})};this.lastKnownVariables.sort(n);const r=e.startIndex?e.startIndex:0,o=e.pageSize?e.pageSize:100;i.pageStartIndex=r;for(let e=r;e<r+o&&e<this.lastKnownVariables.length;e+=1){const t=this.lastKnownVariables[e].truncated?await this.getFullVariable(this.lastKnownVariables[e]):this.lastKnownVariables[e];this.lastKnownVariables[e]=t,i.pageResponse.push(t)}i.totalCount=this.lastKnownVariables.length}return i}async getMatchingVariable(e,t){if(this.active){const n=this.lastKnownVariables.find((t=>t.name===e));return n&&t?.resourceUri&&".ipynb"===Zt(t?.resourceUri).toLowerCase()&&io(F.RunByLineVariableHover),n}}async getDataFrameInfo(e,t,n,i){if(!this.active)return e;i&&(e=await this.getFullVariable(e)),t&&this.watchKernel(t);let r=e.name;n&&(r=`${e.name}${n}`);const{cleanupCode:o,initializeCode:s,code:a}=await this.dfScriptGenerator.generateCodeToGetDataFrameInfo({isDebugging:!0,variableName:r}),c=await this.evaluate({code:a,cleanupCode:o,initializeCode:s,frameId:e.frameId}),l=t?.notebook;let d=l?It(l.uri.path):"";return!d&&this.debugLocation?.fileName&&(d=It(this.debugLocation.fileName)),c?{...e,...JSON.parse(c.result),maximumRowChunkSize:100,fileName:d}:e}async getDataFrameRows(e,t,n,i,r){if(n-t>100)throw new Error("Debugger cannot provide more than 100 rows at once");if(!this.debugService.activeDebugSession||void 0===e.columns)return{data:[]};i&&this.watchKernel(i);let o=e.name;r&&(o=`${e.name}${r}`);const{cleanupCode:s,initializeCode:a,code:c}=await this.dfScriptGenerator.generateCodeToGetDataFrameRows({isDebugging:!0,variableName:o,startIndex:t,endIndex:n}),l=await this.evaluate({code:c,cleanupCode:s,initializeCode:a,frameId:e.frameId});return Qy(JSON.parse(l.result))}onWillReceiveMessage(e){super.onWillReceiveMessage(e),"request"===e.type&&"variables"===e.command&&e.arguments&&this.currentVariablesReference===e.arguments.variablesReference&&this.currentSeqNumsForVariables.add(e.seq)}onDidSendMessage(e){if(super.onDidSendMessage(e),"response"===e.type&&"initialize"===e.command)this.debuggingStarted=!0;else if("event"===e.type&&"stopped"===e.event&&this.activeNotebookIsDebugging())this.handleNotebookVariables(e).catch(ae);else if("response"===e.type&&"scopes"===e.command&&e.body&&e.body.scopes){const t=e.body.scopes[0].variablesReference;t!==this.currentVariablesReference&&(this.currentVariablesReference=t,this.currentSeqNumsForVariables.clear())}else if("response"===e.type&&"variables"===e.command&&e.body)this.currentSeqNumsForVariables.has(e.request_seq)&&this.updateVariables(void 0,e),this.monkeyPatchDataViewableVariables(e);else if("event"===e.type&&"terminated"===e.event){this.lastKnownVariables=[],this.topMostFrameId=0,this.debuggingStarted=!1,this.refreshEventEmitter.fire();const e=this.debugService.activeDebugSession?.id;e&&this.importedGetVariableInfoScriptsIntoKernel.delete(e)}}watchKernel(e){const t=e.notebook?.uri.toString();if(t&&!this.watchedNotebooks.has(t)){const n=[];n.push(e.onRestarted(this.resetImport.bind(this,t))),n.push(e.onDisposed((()=>{this.resetImport(t),n.forEach((e=>e.dispose())),this.watchedNotebooks.delete(t)}))),this.watchedNotebooks.set(t,n)}}resetImport(e){this.importedGetVariableInfoScriptsIntoKernel.delete(e)}async evaluate({code:e,cleanupCode:t,frameId:n,initializeCode:i}){if(this.debugService.activeDebugSession){const r={frameId:n=this.topMostFrameId||n,context:"repl",format:{rawString:!0}};En(`Evaluating in debugger : ${this.debugService.activeDebugSession.id}: ${e}`);try{i&&await this.debugService.activeDebugSession.customRequest("evaluate",{...r,expression:i});const t=await this.debugService.activeDebugSession.customRequest("evaluate",{...r,expression:e});return t&&"None"!==t.result?t:void Sn(`Cannot evaluate ${e}`)}finally{t&&await this.debugService.activeDebugSession.customRequest("evaluate",{...r,expression:t})}}throw Error("Debugger is not active, cannot evaluate.")}async getFullVariable(e){const{initializeCode:t,code:n,cleanupCode:i}=await this.varScriptGenerator.generateCodeToGetVariableInfo({isDebugging:!0,variableName:e.name}),r=await this.evaluate({code:n,initializeCode:t,cleanupCode:i,frameId:e.frameId});return r&&r.result?{...e,truncated:!1,...JSON.parse(r.result)}:e}monkeyPatchDataViewableVariables(e){e.body.variables.forEach((e=>{e.type&&Yw.has(e.type)&&(e.__vscodeVariableMenuContext="viewableInDataViewer")}))}updateVariables(e,t){const n=this.configService.getSettings(e).variableExplorerExclude?this.configService.getSettings().variableExplorerExclude?.split(";"):[],i=t.body.variables.filter((e=>!(!(e.name&&e.type&&e.value)||n&&n.includes(e.type)||e.name.startsWith("_")||e_.has(e.name)||"NoneType"===e.type)));this.lastKnownVariables=i.map((e=>Qw(e))),this.refreshEventEmitter.fire()}activeNotebookIsDebugging(){const e=this.vscNotebook.activeNotebookEditor;return!!e&&this.debuggingManager.isDebugging(e.notebook)}async handleNotebookVariables(e){const t=this.vscNotebook.activeNotebookEditor?.notebook,n=e.body.threadId;if(t){const e=this.debuggingManager.getDebugSession(t);if(e){const i=await e.customRequest("stackTrace",{threadId:n,startFrame:0,levels:1});if(i&&i.stackFrames[0]){const n=i.stackFrames[0];let r;if(this.debuggingManager.getDebugMode(t)===Ww.RunByLine){const i=this.debuggingManager.getDebugCell(t);n.source&&i&&n.source.path===i.document.uri.toString()&&(r=await e.customRequest("scopes",{frameId:n.id}))}else{const i=It(t.uri.toString());n.source&&n.source.path&&n.source.path.includes(i)&&(r=await e.customRequest("scopes",{frameId:n.id}))}r&&(r.scopes.forEach((t=>{e.customRequest("variables",{variablesReference:t.variablesReference}).then(ae,ae)})),this.refreshEventEmitter.fire())}}}}};t_=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Zw(0,zn(Kw)),Zw(0,Nc(C.MULTIPLEXING_DEBUGSERVICE)),Zw(1,zn(Vw)),Zw(2,zn(ji)),Zw(3,zn(oi)),Zw(4,zn(Gi)),Zw(5,zn(Yi)),Zw(6,zn(na))],t_);class n_{get value(){return this.lastValue}constructor(e,t){this.name=e,this.commandManager=t}async set(e){this.lastValue!==e&&(this.lastValue=e,await this.commandManager.executeCommand("setContext",this.name,this.lastValue))}}var i_;function r_(e){const t=e;if(void 0===t.__notebookUri||void 0===t.__mode||(t.__mode===Ww.Cell||t.__mode===Ww.InteractiveWindow||t.__mode===Ww.RunByLine)&&void 0===t.__cellIndex)throw new Error("Invalid launch configuration")}function o_(e,t){switch(e.type){case"event":const n=e;switch(n.event){case"output":case"loadedSource":t(n.body);break;case"breakpoint":t(n.body.breakpoint)}break;case"request":const i=e;switch(i.command){case"setBreakpoints":const e=i.arguments,n=e.breakpoints;if(n&&n.length){const i=n[0].line;n.forEach((n=>{t(n,{...e.source})}));const r={source:e.source,line:i};t(r),e.source=r.source}break;case"breakpointLocations":case"source":case"gotoTargets":t(i.arguments)}break;case"response":const r=e;if(r.success&&r.body)switch(r.command){case"stackTrace":r.body.stackFrames.forEach((e=>{t(e)}));break;case"loadedSources":r.body.sources.forEach((e=>{const n={source:e};t(n),e.path=n.source.path}));break;case"scopes":r.body.scopes.forEach((e=>{t(e)}));break;case"setFunctionBreakpoints":case"setBreakpoints":r.body.breakpoints.forEach((e=>{t(e)}))}}}async function s_(e,t){await e.executeHidden("import debugpy\ndebugpy.debug_this_thread()"),await t.dumpAllCells()}function a_(e){return e.includes("Frame skipped from debugging during step-in")}function c_(e){return"debugpyAttach"===e.event}!function(e){e[e.Unknown=0]="Unknown",e[e.Ok=1]="Ok",e[e.Outdated=2]="Outdated",e[e.NotInstalled=3]="NotInstalled",e[e.ControllerNotSelected=4]="ControllerNotSelected"}(i_||(i_={}));class l_{constructor(e,t,n,i){this.debugAdapter=e,this.debugCell=t,this.execution=n,this.commandManager=i,io(Tr.successfullyStartedRunAndDebugCell)}trace(e,t){En(`[Debug-Cell] ${e}: ${t}`)}async willSendEvent(e){return c_(e)?(this.trace("intercept","debugpyAttach request for subprocess, not supported"),!0):!("output"!==e.event||!a_(e.body.output)||(this.trace("intercept","justMyCode notification"),0))}async willSendRequest(e){"configurationDone"===e.command&&(await s_(this.execution,this.debugAdapter),this.commandManager.executeCommand("notebook.cell.execute",{ranges:[{start:this.debugCell.index,end:this.debugCell.index+1}],document:this.debugCell.notebook.uri}).then(ae,ae))}}class d_{constructor(e,t,n,i){this.mode=e,this.debugAdapter=t,this.debugCell=n,this.serviceContainer=i,this.debuggingManager=this.serviceContainer.get(Vw)}trace(e,t){En(`[Debug-Restart] ${e}: ${t}`)}error(e,t){Sn(`[Debug-Restart] ${e}: ${t}`)}async willSendResponse(e){"initialize"===e.command&&e.body&&(e.body.supportsRestartRequest=!0)}async willSendRequest(e){if("restart"===e.command)return this.trace("restart","Handling restart request"),setTimeout((()=>{this.debugAdapter.disconnect().then((()=>(this.trace("restart","doRestart"),this.debuggingManager.tryToStartDebugging(this.mode,this.debugCell,!0)))).catch((e=>{this.error("restart",`Error restarting: ${e}`)}))}),0),{command:e.command,request_seq:e.seq,seq:e.seq,success:!0,type:"response"}}}class u_{constructor(e,t,n,i,r){this.debugAdapter=e,this.debugCell=t,this.commandManager=n,this.execution=i,this.settings=r,io(Tr.successfullyStartedRunByLine)}continue(){if("number"!=typeof this.lastPausedThreadId)return En("No paused thread, can't do RBL"),void this.stop();this.debugAdapter.stepIn(this.lastPausedThreadId).then(ae,ae)}stop(){xn("RunbylineController::stop()"),this.execution.executeHidden("pass").then(ae,ae),this.debugAdapter.disconnect().then(ae,ae)}getMode(){return this.debugAdapter.getConfiguration().__mode}async willSendEvent(e){return"stopped"===e.event&&(this.lastPausedThreadId=e.body.threadId,await this.handleStoppedEvent(this.lastPausedThreadId))?(this.trace("intercepted","handled stop event"),!0):!("output"!==e.event||!a_(e.body.output)||(this.trace("intercept","justMyCode notification"),0))}async willSendRequest(e){xn(`willSendRequest: ${e.command}`),"configurationDone"===e.command&&await this.initializeExecute()}async handleStoppedEvent(e){return!!await this.shouldStepIn(e)&&(this.debugAdapter.stepIn(e).then(ae,ae),!0)}async shouldStepIn(e){const t=await this.debugAdapter.stackTrace({threadId:e,startFrame:0,levels:1});if(t&&t.stackFrames[0]){const e=t.stackFrames[0],n=new Oe.Position(e.line,e.column);return this.lastPausePosition?.isEqual(n)?(this.trace("intercept","working around duplicate stop event"),!0):(this.lastPausePosition=n,!!e.source&&e.source.path!==this.debugCell.document.uri.toString())}return!1}trace(e,t){En(`[Debug-RBL] ${e}: ${t}`)}async initializeExecute(){await s_(this.execution,this.debugAdapter);const e=Ee(this.debugCell.document.getText(),{trim:!1,removeEmptyEntries:!1}),t=[];if(sc(e,(()=>{}),((e,n)=>{0!==e.trim().length&&t.push(n)})),t.sort(),0!==t.length){const e={line:t[0]+1};await this.debugAdapter.setBreakpoints({source:{name:It(this.debugCell.notebook.uri.path),path:this.debugCell.document.uri.toString()},breakpoints:[e],sourceModified:!1}),this.settings.getSettings(this.debugCell.notebook.uri).showVariableViewWhenDebugging&&this.commandManager.executeCommand(N.OpenVariableView).then(ae,ae)}this.commandManager.executeCommand("notebook.cell.execute",{ranges:[{start:this.debugCell.index,end:this.debugCell.index+1}],document:this.debugCell.notebook.uri}).then(ae,ae)}}class p_{constructor(e,t,n){this.document=e,this.config=t,this.session=n}}class h_{constructor(e,t,n,i,r,o){this.kernelProvider=e,this.controllerRegistration=t,this.commandManager=n,this.appShell=i,this.vscNotebook=r,this.serviceContainer=o,this.notebookToDebugger=new Map,this.notebookToDebugAdapter=new Map,this.notebookInProgress=new Set,this.disposables=[],this._doneDebugging=new Oe.EventEmitter}activate(){this.disposables.push(Oe.debug.onDidTerminateDebugSession(this.endSession.bind(this)),Oe.workspace.onDidCloseNotebookDocument((async e=>{const t=this.notebookToDebugger.get(e);t&&(await Oe.debug.stopDebugging(t.session),this.onDidStopDebugging(e))})))}getDebugCell(e){return this.notebookToDebugAdapter.get(e)?.debugCell}get onDoneDebugging(){return this._doneDebugging.event}dispose(){this.disposables.forEach((e=>e.dispose()))}isDebugging(e){return this.notebookToDebugger.has(e)}getDebugSession(e){const t=this.notebookToDebugger.get(e);if(t)return t.session}getDebugAdapter(e){return this.notebookToDebugAdapter.get(e)}onDidStopDebugging(e){}async startDebuggingConfig(e,t){xn(`Attempting to start debugging with config ${JSON.stringify(e)}`);try{await Oe.debug.startDebugging(void 0,e,t)}catch(e){Sn(`Can't start debugging (${e})`),this.appShell.showErrorMessage(gr.cantStartDebugging).then(ae,ae)}}trackDebugAdapter(e,t){this.notebookToDebugAdapter.set(e,t),this.disposables.push(t.onDidEndSession(this.endSession.bind(this)))}async endSession(e){kn(`Ending debug session ${e.id}`),this._doneDebugging.fire();for(const[t,n]of this.notebookToDebugger.entries())if(n&&e.id===n.session.id){this.notebookToDebugger.delete(t),this.notebookToDebugAdapter.delete(t),this.onDidStopDebugging(t);break}}getDebuggerByUri(e){for(const[t,n]of this.notebookToDebugger.entries())if(e===t)return n}async ensureKernelIsRunning(e){const t=this.controllerRegistration.getSelected(e);let n=this.kernelProvider.get(e);return t&&(!n||n&&"unknown"===n.status)&&(n=await Yb.connectToNotebookKernel(t.connection,this.serviceContainer,{notebook:e,controller:t.controller,resource:e.uri},new hh(!1),this.disposables,"jupyterExtension")),n}findEditorForCell(e){const t=e.notebook.uri.toString();return Oe.window.visibleNotebookEditors.find((e=>e.notebook.uri.toString()===t))}async checkIpykernelAndPrompt(e,t=!0){const n=this.findEditorForCell(e);if(!n)return this.appShell.showErrorMessage(gr.noNotebookToDebug).then(ae,ae),i_.Unknown;const i=await this.checkForIpykernel6(n.notebook);switch(i){case i_.NotInstalled:break;case i_.Outdated:case i_.Unknown:this.promptInstallIpykernel6().then(ae,ae);break;case i_.ControllerNotSelected:if(t)return await this.commandManager.executeCommand("notebook.selectKernel",{notebookEditor:n}),await this.checkIpykernelAndPrompt(e,!1)}return i}async checkForIpykernel6(e){try{let t=this.kernelProvider.get(e);if(!t){const n=this.controllerRegistration.getSelected(e);if(!n)return i_.ControllerNotSelected;t=this.kernelProvider.getOrCreate(e,{metadata:n.connection,controller:n?.controller,resourceUri:e.uri})}const n=this.kernelProvider.getKernelExecution(t),i=await async function(e){const t=await e.executeHidden("import builtins\nimport ipykernel\nbuiltins.print(ipykernel.__version__)"),n=/^(\d+)\.\d+\.\d+$/;for(const e of t){if("stream"!==e.output_type)continue;const t=(e.text?.toString().trim()??"").match(n);if(t){const e=t[1];return Number(e)>=6?i_.Ok:i_.Outdated}}return i_.Unknown}(n);return io(Tr.ipykernel6Status,void 0,{status:i===i_.Ok?"installed":"notInstalled"}),i}catch(e){Sn("Debugging: Could not check for ipykernel 6",e)}return i_.Unknown}async promptInstallIpykernel6(){await this.appShell.showInformationMessage(gr.needIpykernel6,{modal:!0},gr.setup)===gr.setup?(io(Tr.clickedOnSetup),this.appShell.openUrl("https://github.com/microsoft/vscode-jupyter/wiki/Setting-Up-Run-by-Line-and-Debugging-for-Notebooks")):io(Tr.closedModal)}}class f_{constructor(e){this.debugAdapter=e}trace(e,t){En(`[Debug-Reset] ${e}: ${t}`)}async willSendRequest(e){"attach"===e.command&&(this.trace("attach","Continuing paused kernel threads if needed"),(await this.debugAdapter.debugInfo()).stoppedThreads.forEach((e=>this.debugAdapter.continueDirect(e))))}}class m_{constructor(e,t,n,i,r,o){this.session=e,this.notebookDocument=t,this.jupyterSession=n,this.kernel=i,this.platformService=r,this.debugService=o,this.fileToCell=new Map,this.sendMessage=new Oe.EventEmitter,this.endSession=new Oe.EventEmitter,this.disposables=[],this.delegates=[],this.onDidSendMessage=this.sendMessage.event,this.onDidEndSession=this.endSession.event,this.disconnected=!1,xn("Creating kernel debug adapter for debugging notebooks");const s=this.session.configuration;r_(s),this.configuration=s,this.debugCell=t.cellAt(s.__cellIndex),this.addDebuggingDelegates([new f_(this)]),this.jupyterSession.kernel?.iopubMessage.connect(this.onIOPubMessage,this),this.disposables.push(new Oe.Disposable((()=>this.jupyterSession.kernel?.iopubMessage.disconnect(this.onIOPubMessage,this)))),this.kernel&&(this.kernel.addHook("willRestart",(()=>this.disconnect()),this,this.disposables),this.kernel.addHook("interruptCompleted",(()=>this.disconnect()),this,this.disposables),this.disposables.push(this.kernel.onDisposed((()=>{this.disconnected||(Oe.debug.stopDebugging(this.session).then(ae,ae),this.disconnect().catch(ae),io(Tr.endedSession,void 0,{reason:"onKernelDisposed"}))})))),this.disposables.push(Oe.notebooks.onDidChangeNotebookCellExecutionState((e=>{this.configuration.__cellIndex!==e.cell.index||e.state!==Oe.NotebookCellExecutionState.Idle||this.disconnected||(io(Tr.endedSession,void 0,{reason:"normally"}),this.disconnect().catch(ae))}),this,this.disposables)),this.disposables.push(Oe.workspace.onDidChangeNotebookDocument((e=>{e.contentChanges.forEach((e=>{e.removedCells.forEach((e=>{e===this.debugCell&&this.disconnect().catch(ae)}))}))}),this,this.disposables)),this.disposables.push(this.debugService.onDidTerminateDebugSession((e=>{e===this.session&&this.disconnect().catch(ae)})))}addDebuggingDelegates(e){this.delegates.push(...e)}trace(e,t){En(`[Debug] ${e}: ${t}`)}async onIOPubMessage(e,t){if(xn(`Debug IO Pub message: ${JSON.stringify(t)}`),function(e){return!!e.header&&"debug_event"===e.header.msg_type}(t)){this.trace("event",JSON.stringify(t));for(const e of this.delegates??[])if(await(e?.willSendEvent?.(t.content)))return;this.sendMessage.fire(t.content)}}handleMessage(e){this.handleClientMessageAsync(e).catch(ae)}async handleClientMessageAsync(e){try{if(xn(`KernelDebugAdapter::handleMessage ${JSON.stringify(e,void 0," ")}`),"request"===e.type&&"setBreakpoints"===e.command){const t=e.arguments;if(t.source&&t.source.path&&0===t.source.path.indexOf("vscode-notebook-cell:")){const e=this.notebookDocument.getCells().find((e=>e.document.uri.toString()===t.source.path));e&&await this.dumpCell(e.index)}}if("request"===e.type)for(const t of this.delegates??[]){const n=await(t?.willSendRequest?.(e));if(n)return this.trace("response",JSON.stringify(n)),void this.sendMessage.fire(n)}await this.sendMessageToJupyterSession(e)}catch(e){Sn(`KernelDebugAdapter::handleMessage failure: ${e}`)}}getConfiguration(){return this.configuration}stepIn(e){return this.session.customRequest("stepIn",{threadId:e})}async debugInfo(){return await this.session.customRequest("debugInfo")}continueDirect(e){if(!this.jupyterSession.kernel)throw new Ur;this.jupyterSession.kernel.requestDebug({seq:0,type:"request",command:"continue",arguments:{threadId:e}})}async disconnect(){if(!this.disconnected){if(this.disconnected=!0,this.debugService.activeDebugSession===this.session)try{await Promise.all([this.deleteDumpedFiles().catch((e=>Cn("Error deleting temporary debug files.",e))),this.session.customRequest("disconnect",{restart:!1})])}catch(e){Sn("Failed to disconnect debug session",e)}this.endSession.fire(this.session)}}dispose(){this.disposables.forEach((e=>e.dispose()))}stackTrace(e){return this.session.customRequest("stackTrace",e)}setBreakpoints(e){return this.session.customRequest("setBreakpoints",e)}async dumpAllCells(){await Promise.all(this.notebookDocument.getCells().map((async e=>{e.kind===Oe.NotebookCellKind.Code&&await this.dumpCell(e.index)})))}lookupCellByLongName(e){if(this.platformService.isWindows){e=Ct(e);for(let[n,i]of this.fileToCell.entries())if(/~\d+\\/.test(n)&&(t=e,new RegExp(n.replace(/\\/g,"\\\\").replace(/~\d+\\\\/g,"[^\\\\]+\\\\"),"i").test(t)))return i;var t}}async sendMessageToJupyterSession(e){if(!this.jupyterSession.isDisposed&&"dead"!==this.jupyterSession.status&&this.jupyterSession.kernel)if(this.trace("to kernel",JSON.stringify(e)),"request"===e.type){const t=await this.sendRequestToJupyterSession(e);t&&this.sendMessage.fire(t)}else{if("response"===e.type){o_(e,this.translateRealLocationToDebuggerLocation.bind(this));const t=e;return this.jupyterSession.kernel.requestDebug({seq:t.seq,type:"request",command:t.command},!0).done}Sn(`Unknown message type to send ${e.type}`)}else kn(`Skipping sending message ${e.type} because session is disposed`)}async sendRequestToJupyterSession(e){if(o_(e,this.translateRealLocationToDebuggerLocation.bind(this)),!this.jupyterSession.kernel)throw new Ur;this.trace("to kernel, mapped",JSON.stringify(e));const t=e,n=this.jupyterSession.kernel.requestDebug({seq:t.seq,type:"request",command:t.command,arguments:t.arguments},!0),i=(await n.done).content;o_(i,this.translateDebuggerLocationToRealLocation.bind(this));for(const e of this.delegates??[])await(e?.willSendResponse?.(i));return this.trace("response",JSON.stringify(i)),i}translateDebuggerLocationToRealLocation(e,t){if((t=e?.source??t)&&t.path){const e=this.fileToCell.get(t.path)??this.lookupCellByLongName(t.path);e&&(t.name=It(e.path),t.path=e.toString())}}async deleteDumpedFiles(){const e=this.getDumpFilesForDeletion();if(this.jupyterSession.kernel&&e.length){const t=`import os as _VSCODE_os\n_VSCODE_fileList = [${e.map((e=>'"'+e.replace(/\\/g,"\\\\")+'"')).join(",")}]\nfor file in _VSCODE_fileList:\n    try:\n        _VSCODE_os.remove(file)\n    except:\n        pass\ndel _VSCODE_fileList\ndel _VSCODE_os`;await Cs(this.jupyterSession.kernel,t,{traceErrors:!0,traceErrorsMessage:"Error deleting temporary debugging files"})}}}class g_ extends m_{constructor(){super(...arguments),this.cellToFile=new Map}async dumpCell(e){const t=this.notebookDocument.cellAt(e);try{const e=await this.session.customRequest("dumpCell",{code:t.document.getText().replace(/\r\n/g,"\n")}),n=Ct(e.sourcePath);this.fileToCell.set(n,t.document.uri),this.cellToFile.set(t.document.uri.toString(),n)}catch(e){Sn(e)}}translateRealLocationToDebuggerLocation(e){const t=e.source;if(t&&t.path){const e=this.cellToFile.get(t.path);e&&(t.path=e)}}getDumpFilesForDeletion(){return Array.from(this.cellToFile.values())}}var v_=function(e,t){return function(n,i){t(n,i,e)}};let y_=class extends h_{constructor(e,t,n,i,r,o,s,a,c){super(e,t,n,i,r,c),this.configurationService=o,this.platform=s,this.debugService=a,this.notebookToRunByLineController=new Map,this.runByLineCells=new n_(L.RunByLineCells,n),this.runByLineDocuments=new n_(L.RunByLineDocuments,n),this.debugDocuments=new n_(L.DebugDocuments,n)}activate(){super.activate(),this.disposables.push(Oe.debug.registerDebugAdapterDescriptorFactory(Er,{createDebugAdapterDescriptor:async e=>this.createDebugAdapterDescriptor(e)}))}getDebugMode(e){const t=this.notebookToRunByLineController.get(e);return t?.getMode()}onDidStopDebugging(e){super.onDidStopDebugging(e),this.notebookToRunByLineController.delete(e),this.updateRunByLineContextKeys(),this.updateDebugContextKey()}updateRunByLineContextKeys(){const e=[],t=[];this.notebookToRunByLineController.forEach((n=>{e.push(n.debugCell.document.uri),t.push(n.debugCell.notebook.uri)})),this.runByLineCells.set(e).catch(ae),this.runByLineDocuments.set(t).catch(ae)}updateDebugContextKey(){const e=new sf;this.notebookToDebugAdapter.forEach(((t,n)=>e.add(n.uri))),this.notebookInProgress.forEach((t=>e.add(t.uri))),this.debugDocuments.set(Array.from(e.values())).catch(ae)}async tryToStartDebugging(e,t,n=!1){if(kn(`Starting debugging with mode ${e}`),!n){const e=await this.checkIpykernelAndPrompt(t);if(e!==i_.Ok)return void kn(`Ipykernel check failed: ${i_[e]}`)}e!==Ww.RunByLine&&e!==Ww.Cell||await this.startDebuggingCell(e,t)}runByLineNext(e){const t=this.notebookToRunByLineController.get(e.notebook);t&&t.debugCell.document.uri.toString()===e.document.uri.toString()&&t.continue()}runByLineStop(e){const t=this.notebookToRunByLineController.get(e.notebook);t&&(io(Tr.endedSession,void 0,{reason:"withKeybinding"}),t.stop())}async startDebuggingCell(e,t){const n=t.notebook,i=this.configurationService.getSettings(n.uri),r={type:Er,name:It(n.uri.toString()),request:"attach",justMyCode:e!==Ww.Cell||i.debugJustMyCode,__mode:e,__cellIndex:t.index,__notebookUri:n.uri.toString()},o=e===Ww.RunByLine?{suppressDebugStatusbar:!0,suppressDebugToolbar:!0,suppressDebugView:!0,suppressSaveBeforeStart:!0}:{suppressSaveBeforeStart:!0};return this.startDebuggingConfig(r,o)}async createDebugAdapterDescriptor(e){const t=e.configuration;r_(t);const n=t.__notebookUri,i=this.vscNotebook.notebookDocuments.find((e=>e.uri.toString()===n));if(i)if(this.notebookInProgress.has(i))kn("Cannot start debugging. Already debugging this notebook");else if(this.isDebugging(i))kn("Cannot start debugging. Already debugging this notebook document.");else{this.notebookToDebugger.set(i,new p_(i,t,e));try{return this.notebookInProgress.add(i),this.updateDebugContextKey(),await this.doCreateDebugAdapterDescriptor(t,e,i)}finally{this.notebookInProgress.delete(i),this.updateDebugContextKey()}}else kn(`Cannot start debugging. Notebook ${n} not found.`)}async doCreateDebugAdapterDescriptor(e,t,n){const i=await this.ensureKernelIsRunning(n);if(i?.session){const r=new g_(t,n,i.session,i,this.platform,this.debugService);if(e.__mode===Ww.RunByLine&&"number"==typeof e.__cellIndex){const t=n.cellAt(e.__cellIndex),o=new u_(r,t,this.commandManager,this.kernelProvider.getKernelExecution(i),this.configurationService);r.addDebuggingDelegates([o,new d_(Ww.RunByLine,r,t,this.serviceContainer)]),this.notebookToRunByLineController.set(n,o),this.updateRunByLineContextKeys()}else if(e.__mode===Ww.Cell&&"number"==typeof e.__cellIndex){const t=n.cellAt(e.__cellIndex),o=new l_(r,t,this.kernelProvider.getKernelExecution(i),this.commandManager);r.addDebuggingDelegates([o,new d_(Ww.Cell,r,t,this.serviceContainer)])}return this.trackDebugAdapter(n,r),this.updateDebugContextKey(),new Oe.DebugAdapterInlineImplementation(r)}this.appShell.showInformationMessage(gr.kernelWasNotStarted).then(ae,ae)}};y_=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),v_(0,zn(na)),v_(1,zn(Ks)),v_(2,zn(Gn)),v_(3,zn(Jn)),v_(4,zn(oi)),v_(5,zn(ji)),v_(6,zn(Ma)),v_(7,zn(Zn)),v_(8,zn(ya))],y_);var b_=function(e,t){return function(n,i){t(n,i,e)}};let w_=class{constructor(e,t){this.disposableRegistry=t,this.activeTrackers=new WeakMap,this.updatedEmitter=new Oe.EventEmitter,t.push(e.registerDebugAdapterTrackerFactory("python",this))}createDebugAdapterTracker(e){const t=new Xw(e.id);return this.activeTrackers.set(e,t),t.sessionEnded((()=>this.activeTrackers.delete(e)),this,this.disposableRegistry),t.debugLocationUpdated(this.onLocationUpdated,this,this.disposableRegistry),this.onLocationUpdated(),t}get updated(){return this.updatedEmitter.event}getLocation(e){const t=this.activeTrackers.get(e);if(t)return t.debugLocation}onLocationUpdated(){this.updatedEmitter.fire()}};w_=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),b_(0,zn(Zn)),b_(1,zn(Ri))],w_);var __=__webpack_require__(41808);class S_{constructor(){this.rawData=Buffer.concat([]),this.contentLength=-1,this.disposed=!1,this.dataCallbackHandler=e=>{this.handleData(e)},this.events=new Vp.EventEmitter}dispose(){this.stream&&(this.stream.removeListener("data",this.dataCallbackHandler),this.stream=void 0)}connect(e){this.stream=e,e.addListener("data",this.dataCallbackHandler)}on(e,t){return this.events.on(e,t),this}once(e,t){return this.events.once(e,t),this}dispatch(e){const t=JSON.parse(e);switch(t.type){case"event":{const e=t;"string"==typeof e.event&&this.events.emit(`${t.type}_${e.event}`,e);break}case"request":{const e=t;"string"==typeof e.command&&this.events.emit(`${t.type}_${e.command}`,e);break}case"response":{const e=t;"string"==typeof e.command&&this.events.emit(`${t.type}_${e.command}`,e);break}default:this.events.emit(`${t.type}`,t)}this.events.emit("data",t)}handleData(e){if(!this.disposed)for(this.rawData=Buffer.concat([this.rawData,e]);;){if(this.contentLength>=0){if(this.rawData.length>=this.contentLength){const e=this.rawData.toString("utf8",0,this.contentLength);this.rawData=this.rawData.slice(this.contentLength),this.contentLength=-1,e.length>0&&this.dispatch(e);continue}}else{const e=this.rawData.indexOf("\r\n\r\n");if(-1!==e){const t=this.rawData.toString("utf8",0,e).split("\r\n");for(const e of t){const t=e.split(/: +/);"Content-Length"===t[0]&&(this.contentLength=+t[1])}this.rawData=this.rawData.slice(e+4);continue}}break}}}class C_{constructor(e,t,n){this._id=e,this._configuration=t,this.customRequestHandler=n,this._name="JupyterDebugSession"}get id(){return this._id}get type(){return"python"}get name(){return this._name}get workspaceFolder(){}get configuration(){return this._configuration}customRequest(e,t){return this.customRequestHandler(e,t)}getDebugProtocolBreakpoint(e){return Promise.resolve(void 0)}}let k_=class{constructor(e){this.sequence=1,this.breakpointEmitter=new Oe.EventEmitter,this.debugAdapterTrackerFactories=[],this.debugAdapterTrackers=[],this.sessionChangedEvent=new Oe.EventEmitter,this.sessionStartedEvent=new Oe.EventEmitter,this.sessionTerminatedEvent=new Oe.EventEmitter,this.sessionCustomEvent=new Oe.EventEmitter,this.breakpointsChangedEvent=new Oe.EventEmitter,this._breakpoints=[],e.push(this),this.protocolParser=new S_}dispose(){this.socket&&(this.socket.end(),this.socket=void 0)}get activeDebugSession(){return this.session}get activeDebugConsole(){return{append(e){},appendLine(e){}}}get breakpoints(){return this._breakpoints}get onDidChangeActiveDebugSession(){return this.sessionChangedEvent.event}get onDidStartDebugSession(){return this.sessionStartedEvent.event}get onDidReceiveDebugSessionCustomEvent(){return this.sessionCustomEvent.event}get onDidTerminateDebugSession(){return this.sessionTerminatedEvent.event}get onDidChangeBreakpoints(){return this.breakpointsChangedEvent.event}registerDebugConfigurationProvider(e,t){return{dispose:()=>{}}}registerDebugAdapterTrackerFactory(e,t){return this.debugAdapterTrackerFactories.push(t),{dispose:()=>{this.debugAdapterTrackerFactories=this.debugAdapterTrackerFactories.filter((e=>e!==t))}}}startRunByLine(e){return this.startDebugging(void 0,e)}startDebugging(e,t,n){const i=t;return i.port?(this.session=new C_(Kf()(),i,this.sendCustomRequest.bind(this)),this.sessionChangedEvent.fire(this.session),this.debugAdapterTrackers=this.debugAdapterTrackerFactories.map((e=>e.createDebugAdapterTracker(this.session))),this.socket=__.createConnection(i.port),this.protocolParser.connect(this.socket),this.protocolParser.on("event_stopped",this.onBreakpoint.bind(this)),this.protocolParser.on("event_output",this.onOutput.bind(this)),this.protocolParser.on("event_terminated",this.sendToTrackers.bind(this)),this.socket.on("error",this.onError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.sendStartSequence(i,this.session.id).then((()=>!0))):Promise.resolve(!0)}addBreakpoints(e){this._breakpoints=this._breakpoints.concat(e)}removeBreakpoints(e){}get onBreakpointHit(){return this.breakpointEmitter.event}async continue(){await this.sendMessage("continue",{threadId:0}),this.sendToTrackers({type:"event",event:"continue"})}async step(){await this.sendMessage("stepIn",{threadId:this._stoppedThreadId?this._stoppedThreadId:1}),this.sendToTrackers({type:"event",event:"stepIn"})}async getStack(){const e=ie();return this.protocolParser.once("response_stackTrace",(t=>{this.sendToTrackers(t);const n=t,i=n.body.stackFrames?n.body.stackFrames:[];e.resolve(i),this._topFrameId=i[0]?.id})),await this.emitMessage("stackTrace",{threadId:this._stoppedThreadId?this._stoppedThreadId:1,startFrame:0,levels:1}),e.promise}async requestVariables(){await this.getStack();const e=ie();let t=0;return this.protocolParser.once("response_scopes",(e=>{this.sendToTrackers(e),e&&(t=e.body.scopes[0].variablesReference),this.emitMessage("variables",{threadId:this._stoppedThreadId?this._stoppedThreadId:1,variablesReference:t}).catch(ae)})),this.protocolParser.once("response_variables",(t=>{this.sendToTrackers(t),e.resolve()})),await this.emitMessage("scopes",{frameId:this._topFrameId?this._topFrameId:1}),e.promise}stop(){this.onClose()}sendToTrackers(e){"request"===e.type?this.debugAdapterTrackers.forEach((t=>{t.onWillReceiveMessage&&t.onWillReceiveMessage(e)})):this.debugAdapterTrackers.forEach((t=>t.onDidSendMessage(e)))}sendCustomRequest(e,t){return this.sendMessage(e,t)}async sendStartSequence(e,t){kn("Sending debugger initialize..."),await this.sendInitialize(),this._breakpoints.length>0&&(kn("Sending breakpoints"),await this.sendBreakpoints()),kn("Sending debugger attach...");const n=this.sendAttach(e,t);return kn("Sending configuration done"),await this.sendConfigurationDone(),kn("Session started."),n.then((()=>{this.sessionStartedEvent.fire(this.session)}))}sendBreakpoints(){const e=this._breakpoints.map((e=>e)),t=e[0].location.uri.fsPath;return this.sendMessage("setBreakpoints",{source:{name:It(t),path:t},lines:e.map((e=>e.location.range.start.line)),breakpoints:e.map((e=>({line:e.location.range.start.line}))),sourceModified:!0})}sendAttach(e,t){return this.sendMessage("attach",{debugOptions:["RedirectOutput","FixFilePathCase","WindowsClient","ShowReturnValue"],workspaceFolder:Tc,__sessionId:t,...e})}sendConfigurationDone(){return this.sendMessage("configurationDone")}sendInitialize(){return this.sendMessage("initialize",{clientID:"vscode",clientName:"Visual Studio Code",adapterID:"python",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!0,locale:"en-us"})}sendDisconnect(){return this.sendMessage("disconnect",{})}sendMessage(e,t){const n=ie(),i=this.sessionTerminatedEvent.event((()=>{n.resolve({body:{}})})),r=this.sequence;return this.protocolParser.on(`response_${e}`,(e=>{e.request_seq===r&&(this.sendToTrackers(e),kn(`Received response from debugger: ${JSON.stringify(t)}`),i.dispose(),n.resolve(e.body))})),this.socket?.on("error",(e=>n.reject(e))),this.emitMessage(e,t).catch((t=>{Sn(`Exception attempting to emit ${e} to debugger: `,t)})),n.promise}emitMessage(e,t){return new Promise(((n,i)=>{try{if(this.socket){const i={command:e,arguments:t,type:"request",seq:this.sequence};this.sequence+=1;const r=JSON.stringify(i);kn(`Sending request to debugger: ${r}`);const o=`Content-Length: ${r.length}\r\n\r\n${r}`;this.socket.write(o,(e=>{this.sendToTrackers(i),n()}))}}catch(e){i(e)}}))}onBreakpoint(e){this._stoppedThreadId=e.body.threadId,this.sendToTrackers(e),this.breakpointEmitter.fire()}onOutput(e){this.sendToTrackers(e),kn(JSON.stringify(e))}onError(e){this.sendToTrackers(e),kn(JSON.stringify(e))}onClose(){this.socket&&(this.sessionTerminatedEvent.fire(this.activeDebugSession),this.session=void 0,this.sessionChangedEvent.fire(void 0),this.debugAdapterTrackers.forEach((e=>e.onExit?e.onExit(0,void 0):void 0)),this.debugAdapterTrackers=[],this.sendDisconnect().catch(ae),this.socket.destroy(),this.socket=void 0)}};k_=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(Ri))],k_);var E_=function(e,t){return function(n,i){t(n,i,e)}};let x_=class{constructor(e,t,n,i){this.commandManager=t,this.vscodeDebugService=n,this.jupyterDebugService=i,this.sessionChangedEvent=new Oe.EventEmitter,this.sessionStartedEvent=new Oe.EventEmitter,this.sessionTerminatedEvent=new Oe.EventEmitter,this.sessionCustomEvent=new Oe.EventEmitter,e.push(n.onDidTerminateDebugSession(this.endedDebugSession.bind(this))),e.push(n.onDidStartDebugSession(this.startedDebugSession.bind(this))),e.push(n.onDidChangeActiveDebugSession(this.changedDebugSession.bind(this))),e.push(n.onDidReceiveDebugSessionCustomEvent(this.gotCustomEvent.bind(this))),i&&(e.push(i.onDidTerminateDebugSession(this.endedDebugSession.bind(this))),e.push(i.onDidStartDebugSession(this.startedDebugSession.bind(this))),e.push(i.onDidChangeActiveDebugSession(this.changedDebugSession.bind(this))),e.push(i.onDidReceiveDebugSessionCustomEvent(this.gotCustomEvent.bind(this))))}get activeDebugSession(){return this.activeService.activeDebugSession}get activeDebugConsole(){return this.activeService.activeDebugConsole}get breakpoints(){return this.activeService.breakpoints}get onDidChangeActiveDebugSession(){return this.sessionChangedEvent.event}get onDidStartDebugSession(){return this.sessionStartedEvent.event}get onDidReceiveDebugSessionCustomEvent(){return this.sessionCustomEvent.event}get onDidTerminateDebugSession(){return this.sessionTerminatedEvent.event}get onDidChangeBreakpoints(){return this.activeService.onDidChangeBreakpoints}get onBreakpointHit(){if(!this.jupyterDebugService)throw new Error("No jupyter debugger service");return this.jupyterDebugService.onBreakpointHit}startRunByLine(e){if(this.lastStartedService=this.jupyterDebugService,!this.jupyterDebugService)throw new Error("No jupyter debugger service");return this.jupyterDebugService.startRunByLine(e)}registerDebugConfigurationProvider(e,t){const n=this.vscodeDebugService.registerDebugConfigurationProvider(e,t);if(this.jupyterDebugService){const i=this.jupyterDebugService.registerDebugConfigurationProvider(e,t);return this.combineDisposables(n,i)}return n}registerDebugAdapterTrackerFactory(e,t){const n=this.vscodeDebugService.registerDebugAdapterTrackerFactory(e,t);if(this.jupyterDebugService){const i=this.jupyterDebugService.registerDebugAdapterTrackerFactory(e,t);return this.combineDisposables(n,i)}return n}startDebugging(e,t,n){return this.lastStartedService=this.vscodeDebugService,this.vscodeDebugService.startDebugging(e,t,n)}addBreakpoints(e){return this.activeService.addBreakpoints(e)}removeBreakpoints(e){return this.activeService.removeBreakpoints(e)}getStack(){if(!this.jupyterDebugService)throw new Error("No jupyter debugger service");if(this.lastStartedService===this.jupyterDebugService)return this.jupyterDebugService.getStack();throw new Error("Requesting jupyter specific stack when not debugging.")}step(){if(!this.jupyterDebugService)throw new Error("No jupyter debugger service");if(this.lastStartedService===this.jupyterDebugService)return this.jupyterDebugService.step();throw new Error("Requesting jupyter specific step when not debugging.")}continue(){if(!this.jupyterDebugService)throw new Error("No jupyter debugger service");if(this.lastStartedService===this.jupyterDebugService)return this.jupyterDebugService.continue();throw new Error("Requesting jupyter specific step when not debugging.")}requestVariables(){if(!this.jupyterDebugService)throw new Error("No jupyter debugger service");if(this.lastStartedService===this.jupyterDebugService)return this.jupyterDebugService.requestVariables();throw new Error("Requesting jupyter specific variables when not debugging.")}stop(){this.jupyterDebugService&&this.lastStartedService===this.jupyterDebugService?this.jupyterDebugService.stop():this.commandManager.executeCommand("workbench.action.debug.stop").then(ae,ae)}get activeService(){return this.lastStartedService?this.lastStartedService:this.vscodeDebugService}combineDisposables(e,t){return{dispose:()=>{e.dispose(),t.dispose()}}}endedDebugSession(e){this.sessionTerminatedEvent.fire(e),this.lastStartedService=void 0}startedDebugSession(e){this.sessionStartedEvent.fire(e)}changedDebugSession(e){this.sessionChangedEvent.fire(e)}gotCustomEvent(e){this.sessionCustomEvent.fire(e)}};var T_;x_=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),E_(0,zn(Ri)),E_(1,zn(Gn)),E_(2,zn(Zn)),E_(3,Qi()),E_(3,zn(Kw)),E_(3,Nc(C.RUN_BY_LINE_DEBUGSERVICE))],x_),function(e){e.pdf="pdf",e.html="html",e.python="python",e.ipynb="ipynb"}(T_||(T_={}));const P_=Symbol("IFileConverter"),I_=Symbol("INbConvertExport"),D_=Symbol("IExportBase"),R_=Symbol("IExport"),O_=Symbol("IExportDialog");var A_=function(e,t){return function(n,i){t(n,i,e)}};let N_=class{constructor(e,t){this.extensions=e,this.filePicker=t}async getContent(e){const t=this.extensions.getExtension("vscode.ipynb");if(!t)throw new Error("Unable to export notebook as the built-in vscode.ipynb extension is currently unavailable.");t.isActive||await t.activate();const n=e.getCells().map((e=>{const t=new Oe.NotebookCellData(e.kind,e.document.getText(),e.document.languageId);return t.metadata=e.metadata,t.mime=e.mime,t.outputs=[...e.outputs],t})),i=new Oe.NotebookData(n);return i.metadata=e.metadata,t.exports.exportNotebook(i)}async getTargetFile(e,t,n){return await this.filePicker.showDialog(e,t,n)}};N_=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),A_(0,zn(qi)),A_(1,zn(O_))],N_);var M_=function(e,t){return function(n,i){t(n,i,e)}};let L_=class extends N_{constructor(e,t,n){super(t,n),this.fs=e}async generateTempDir(){const e=Oe.Uri.file(Et(hc.tmpdir(),Kf()()));return await this.fs.createDirectory(e),{path:un(e),dispose:async()=>{let t=0;for(;t<10;)try{await this.fs.delete(e),t=10}catch{await Q(3e3),t+=1}}}}async getTargetFile(e,t,n){let i;return i=e!==T_.python?await this.filePicker.showDialog(e,t,n):Oe.Uri.file((await this.fs.createTemporaryLocalFile(".py")).filePath),i}async makeFileInDirectory(e,t,n){const i=Et(n,t);return await this.fs.writeFile(Oe.Uri.file(i),e),i}async removeSvgs(e){const t=JSON.parse(e);for(const e of t.cells){const t="outputs"in e?e.outputs:void 0;t&&Array.isArray(t)&&this.removeSvgFromOutputs(t)}return JSON.stringify(t,void 0,4)}removeSvgFromOutputs(e){const t="image/svg+xml";for(const n of e)if("data"in n){const e=n.data;if(!(t in e))continue;"image/png"in e&&delete e[t]}}};L_=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),M_(0,zn(Nu)),M_(1,zn(qi)),M_(2,zn(O_))],L_);var j_=function(e,t){return function(n,i){t(n,i,e)}};let F_=class{constructor(e,t,n){this.dependencyManager=e,this.nbConvertDependencyChecker=t,this.jupyterInterpreterService=n}async getExportInterpreter(e){if(e&&await this.checkNotebookInterpreter(e))return e;const t=await this.jupyterInterpreterService.getSelectedInterpreter();if(t||await this.jupyterInterpreterService.selectInterpreter(),t){if(await this.checkNotebookInterpreter(t))return t;if(await this.dependencyManager.installMissingDependencies(),await this.checkNotebookInterpreter(t))return t}throw new Error(gr.jupyterNbConvertNotSupported)}async checkNotebookInterpreter(e){return this.nbConvertDependencyChecker.isNbConvertInstalled(e)}};F_=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),j_(0,zn(pi)),j_(1,zn(hi)),j_(2,zn(Qp))],F_);var U_=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},q_=function(e,t){return function(n,i){t(n,i,e)}};let K_=class{constructor(e,t,n,i,r,o,s){this.pythonExecutionFactory=e,this.jupyterService=t,this.fs=n,this.filePicker=i,this.exportUtil=r,this.importer=o,this.exportInterpreterFinder=s}async export(e,t,n,i){}async executeCommand(e,t,n,i,r){if(r.isCancellationRequested)return;if(i=await this.exportInterpreterFinder.getExportInterpreter(i),n===T_.python){const n=await this.importer.importFromFile(e.uri,i);return void await this.fs.writeFile(t,n)}let o=await this.exportUtil.getContent(e);n===T_.pdf&&(o=await this.exportUtil.removeSvgs(o));const s=await this.exportUtil.generateTempDir(),a=await this.makeSourceFile(t,o,s),c=await this.getExecutionService(a,i);if(!c)return;if(r.isCancellationRequested)return;const l=await this.fs.createTemporaryLocalFile(Dt(t.fsPath)),d=[a.fsPath,"--to",n,"--output",It(l.filePath),"--output-dir",Pt(l.filePath),"--debug"],u=await c.execModule("jupyter",["nbconvert"].concat(d),{throwOnStdErr:!1,encoding:"utf8",token:r});if(r.isCancellationRequested)l.dispose();else try{if(!((await this.fs.stat(Oe.Uri.file(l.filePath))).size>1))throw new Error("File size is zero during conversion. Outputting error.");await this.fs.copy(Oe.Uri.file(l.filePath),t)}catch{throw new Error(u.stderr)}finally{l.dispose()}}async makeSourceFile(e,t,n){const i=It(e.fsPath,Dt(e.fsPath)),r=await this.exportUtil.makeFileInDirectory(t,`${i}.ipynb`,n.path);return Oe.Uri.file(r)}async getExecutionService(e,t){return this.pythonExecutionFactory.createActivatedEnvironment({resource:e,interpreter:t})}};U_([Yu(Da.PerformingExport)],K_.prototype,"executeCommand",null),K_=U_([Kn(),q_(0,zn(qd)),q_(1,zn(Pp)),q_(2,zn(Nu)),q_(3,zn(O_)),q_(4,zn(L_)),q_(5,zn(di)),q_(6,zn(F_))],K_);var V_=function(e,t){return function(n,i){t(n,i,e)}};const W_={PDF:["pdf"]},$_={HTML:["html","htm"]},B_={Python:["py"]};let H_=class{constructor(e,t,n){this.applicationShell=e,this.workspaceService=t,this.isWebExtension=n}async showDialog(e,t,n){let i,r={};switch(e){case T_.python:r=B_,i=".py";break;case T_.pdf:i=".pdf",r=W_;break;case T_.html:i=".html",r=$_;break;case T_.ipynb:i=".ipynb",r[gr.exportDialogFilter]=["ipynb"];break;default:return}const o=n||!t?n||"":`${It(t.path,Dt(t.path))}${i}`,s={defaultUri:await this.getDefaultUri(t,o),saveLabel:gr.exportButtonTitle,filters:r};return this.applicationShell.showSaveDialog(s)}async getDefaultUri(e,t){if(e&&"untitled"===e.scheme&&this.isWebExtension)return;if(!e||"file"===e.scheme||"untitled"===e.scheme||"vscode-interactive"===e.scheme)return Oe.Uri.file(Et(await this.workspaceService.computeWorkingDirectory(e),t));const n=Et(Pt(e.path),t);return Oe.Uri.parse(`${e.scheme}://${n}`).with({authority:e.authority})}};H_=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),V_(0,zn(Jn)),V_(1,zn(Qn)),V_(2,zn(Pi))],H_);var z_=function(e,t){return function(n,i){t(n,i,e)}};let J_=class{constructor(e,t,n,i){this.documentManager=e,this.fs=t,this.applicationShell=n,this.browserService=i}async openFile(e,t,n=!1){if(e===T_.python)await this.openPythonFile(t,n),io(F.ExportNotebookAs,void 0,{format:e,successful:!0,opened:!0});else{const i=await this.askOpenFile(t,n);io(F.ExportNotebookAs,void 0,{format:e,successful:!0,opened:i})}}async openPythonFile(e,t){let n;if(t)n=await this.documentManager.showTextDocument(e);else{const t=await this.fs.readFile(e);await this.fs.delete(e);const r=await this.documentManager.openTextDocument({language:i,content:t});n=await this.documentManager.showTextDocument(r)}await n.edit((e=>{e.insert(new Oe.Position(n.document.lineCount,0),"\n")}))}async askOpenFile(e,t){const n=gr.openExportFileYes,i=[n,gr.openExportFileNo];return await this.applicationShell.showInformationMessage(gr.openExportedFileMessage,...i).then((e=>e))===n&&(t?this.documentManager.showTextDocument(e).then(ae,ae):this.browserService.launch(e.toString()),!0)}};J_=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),z_(0,zn(Yn)),z_(1,zn(La)),z_(2,zn(Jn)),z_(3,zn(Ki))],J_);let G_=class{constructor(e){this.exportBase=e}async export(e,t,n,i){await this.exportBase.executeCommand(e,t,T_.html,n,i)}};G_=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(D_))],G_);let Y_=class{constructor(e){this.exportBase=e}async export(e,t,n,i){await this.exportBase.executeCommand(e,t,T_.pdf,n,i)}};Y_=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(D_))],Y_);let Q_=class{constructor(e){this.exportBase=e}async export(e,t,n,i){await this.exportBase.executeCommand(e,t,T_.python,n,i)}};Q_=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(D_))],Q_);var X_=function(e,t){return function(n,i){t(n,i,e)}};let Z_=class{constructor(e,t,n){this.fs=e,this.configuration=t,this.platform=n}async writeFile(e,t){await this.fs.writeFile(e,t)}getEOL(){return this.platform.isWindows?"\r\n":"\n"}async export(e,t,n){if(n.isCancellationRequested)return;const i=this.exportDocument(e);await this.writeFile(t,i)}exportDocument(e){return e.getCells().filter((e=>!e.metadata.custom?.metadata?.isInteractiveWindowMessageCell)).reduce(((e,t)=>e+this.exportCell(t)),"")}exportCell(e){if(e.document.lineCount){const t=this.cellMarker(e),n=this.getEOL();switch(e.kind){case Oe.NotebookCellKind.Code:return`${t}${n}${this.exportCodeCell(e)}${n}${n}`;case Oe.NotebookCellKind.Markup:return`${t} [markdown]${n}${this.exportMarkdownCell(e)}${n}${n}`}}return""}exportCodeCell(e){let t=Ee(e.document.getText(),{trim:!1,removeEmptyEntries:!1});const n="commentMagics"===this.configuration.getSettings(e.notebook.uri).pythonExportMethod;return ac(t,this.getEOL(),n?eS:void 0).join("")}exportMarkdownCell(e){return ac(Ee(e.document.getText(),{trim:!1,removeEmptyEntries:!1}),this.getEOL(),tS).join("")}cellMarker(e){const t=this.configuration.getSettings(e.notebook.uri);return e.metadata.interactiveWindowCellMarker??t.defaultCellMarker}};function eS(e){return/^\s*!/.test(e)||/^\s*%/.test(e)?`# ${e}`:e}function tS(e){return`# ${e}`}Z_=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),X_(0,zn(La)),X_(1,zn(ji)),X_(2,zn(Ma))],Z_);var nS=function(e,t){return function(n,i){t(n,i,e)}};let iS=class{constructor(e,t,n,i,r,o,s,a,c,l){this.exportToPythonPlain=e,this.exportToPDF=t,this.exportToHTML=n,this.exportToPython=i,this.filePicker=r,this.exportUtil=o,this.progressReporter=s,this.applicationShell=a,this.exportFileOpener=c,this.configuration=l}async importIpynb(e){const t=this.progressReporter.createProgressIndicator(gr.importingIpynb,!0);try{const n=await Oe.workspace.openNotebookDocument(e);await this.exportImpl(T_.python,n,void 0,t.token)}finally{t.dispose()}}async export(e,t,n,i){const r=this.progressReporter.createProgressIndicator(gr.exportingToFormat(e.toString()),!0);try{await this.exportImpl(e,t,n,r.token,i)}finally{r.dispose()}r.token.isCancellationRequested&&io(F.ExportNotebookAs,void 0,{format:e,cancelled:!0})}async exportImpl(e,t,n,i,r){try{let o=await this.exportUtil.getTargetFile(e,t.uri,n);if(!o)return;await this.performExport(e,t,o,i,r)}catch(t){Sn("Export failed",t),io(F.ExportNotebookAsFailed,void 0,{format:e}),e===T_.pdf&&Sn(gr.exportToPDFDependencyMessage),this.showExportFailed(gr.exportFailedGeneralMessage)}}async performExport(e,t,n,i,r){e===T_.python&&"nbconvert"!==this.configuration.getSettings(t.uri).pythonExportMethod?await this.performPlainExport(e,t,n,i):await this.performNbConvertExport(t,e,n,r,i),n&&this.openExportedFile(e,n).catch(ae)}async openExportedFile(e,t){await this.exportFileOpener.openFile(e,t,!0).catch(ae)}async performPlainExport(e,t,n,i){return n&&e===T_.python&&await this.exportToPythonPlain.export(t,n,i),n}async performNbConvertExport(e,t,n,i,r){try{return await this.exportToFormat(e,n,t,i,r)}finally{}}async exportToFormat(e,t,n,i,r){switch(n){case T_.python:return await this.exportToPython.export(e,t,i,r);case T_.pdf:return await this.exportToPDF.export(e,t,i,r);case T_.html:return await this.exportToHTML.export(e,t,i,r)}}showExportFailed(e){this.applicationShell.showErrorMessage(`${gr.failedExportMessage} ${e}`).then}};iS=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),nS(0,zn(R_)),nS(0,Nc(T_.python)),nS(1,zn(I_)),nS(1,Nc(T_.pdf)),nS(2,zn(I_)),nS(2,Nc(T_.html)),nS(3,zn(I_)),nS(3,Nc(T_.python)),nS(4,zn(O_)),nS(5,zn(N_)),nS(6,zn(Qu)),nS(7,zn(Jn)),nS(8,zn(J_)),nS(9,zn(ji))],iS);var rS=function(e,t){return function(n,i){t(n,i,e)}};let oS=class extends iS{constructor(e,t,n,i,r,o,s,a,c,l,d){super(i,e,t,n,s,r,a,c,l,d),this.exportUtil=r,this.fs=o}async openExportedFile(e,t){await this.exportFileOpener.openFile(e,t).catch(ae)}};oS=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),rS(0,zn(I_)),rS(0,Nc(T_.pdf)),rS(1,zn(I_)),rS(1,Nc(T_.html)),rS(2,zn(I_)),rS(2,Nc(T_.python)),rS(3,zn(R_)),rS(3,Nc(T_.python)),rS(4,zn(L_)),rS(5,zn(Nu)),rS(6,zn(O_)),rS(7,zn(Qu)),rS(8,zn(Jn)),rS(9,zn(J_)),rS(10,zn(ji))],oS);var sS=function(e,t){return function(n,i){t(n,i,e)}};let aS=class{constructor(e,t,n,i){this.configService=e,this.fs=t,this.workspace=n,this.registry=i,this.priority=0}activate(){this.registry.register(this,l)}async getCode(e){const t=await this.getWorkingDirectory(e);return t?Ee(De(k.UpdateCWDAndPath,un(t)),{trim:!1}):[]}async getWorkingDirectory(e){if(!ea(e.kernelConnectionMetadata)&&!Ss(e.kernelConnectionMetadata))return;if(!fs(e.kernelConnectionMetadata))return;let t=await this.calculateWorkingDirectory(e.resourceUri);return t&&await this.fs.exists(t)||e.resourceUri&&"untitled"!==e.resourceUri.scheme&&await this.fs.exists(e.resourceUri)&&(t=Oe.Uri.file(ao(un(t),e.resourceUri,this.workspace,this.configService.getSettings(e.resourceUri))),t&&await this.fs.exists(t))?t:void 0}async calculateWorkingDirectory(e){let t;const n=this.configService.getSettings(e),i=dl(n.notebookFileRoot);if(i&&this.workspace.hasWorkspaceFolders){const e=Oe.Uri.file(i),n=this.workspace.workspaceFolders[0].uri;if(kt(i))t=await this.fs.exists(e)?e:n;else if(i.includes("${"))t=e;else{const e=Oe.Uri.joinPath(n,i);t=await this.fs.exists(e)?e:n}}return t}};aS=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),sS(0,zn(ji)),sS(1,zn(La)),sS(2,zn(Qn)),sS(3,zn(ua))],aS);var cS=__webpack_require__(70336);const lS=new WeakMap;async function dS(e,t){const n=e;if(e.isClosed)return!0;const i=lS.has(n)?lS.get(n):Promise.resolve(),r=ie(),o=i.finally((async()=>{const e=new Oe.WorkspaceEdit,n=t(e);(0,cS.t)(n)&&await n,await Oe.workspace.applyEdit(e).then((e=>r.resolve(e)),(e=>r.reject(e)))})).catch(ae);return lS.set(n,o),r.promise}var uS=function(e,t){return function(n,i){t(n,i,e)}};let pS=class{constructor(e,t,n){this.notebook=e,this.disposables=t,this.controllerRegistration=n}activate(){this.controllerRegistration.onControllerSelected(this.onDidChangeNotebookController,this,this.disposables)}async onDidChangeNotebookController(e){const t=e.notebook,n=e.controller.connection;if(!Za(t))return;const r=this.notebook.notebookEditors.find((e=>e.notebook===t));if(!r)return;const o=t.getCells().filter((e=>e.kind===Oe.NotebookCellKind.Code&&0===e.document.getText().trim().length)),s=t.getCells().filter((e=>e.kind===Oe.NotebookCellKind.Code)).length;if(0===o.length||o.length!==s)return;let a;const c=n.kind;switch(n.kind){case"connectToLiveRemoteKernel":a=n.kernelModel.language;break;case"startUsingRemoteKernelSpec":case"startUsingLocalKernelSpec":a=n.kernelSpec.language;break;case"startUsingPythonInterpreter":a=i;break;default:return void Sn(`Unsupported kernel kind encountered ${c}`)}if(!a)return;const l=Xa(a);dS(r.notebook,(async()=>{await o.map((async e=>{if(l.toLowerCase()!==e.document.languageId)return Oe.languages.setTextDocumentLanguage(e.document,l).then(ae,ae)}))})).then(ae,ae)}};pS=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),uS(0,zn(oi)),uS(1,zn(Ri)),uS(2,zn(Ks))],pS);var hS=function(e,t){return function(n,i){t(n,i,e)}};let fS=class{constructor(e,t,n,i,r,o,s,a,c,l,d){this.disposableRegistry=e,this.notebooks=t,this.commandManager=n,this.languageService=i,this.applicationShell=r,this.configurationService=o,this.kernelProvider=s,this.controllerRegistration=a,this.errorHandler=c,this.notebookEditorProvider=l,this.serviceContainer=d,this.kernelInterruptedDontAskToRestart=!1,this.pendingRestartInterrupt=new WeakMap}register(e){this.disposableRegistry.push(e.registerCommand(N.NotebookEditorRemoveAllCells,(()=>this.removeAllCells()))),this.disposableRegistry.push(e.registerCommand(N.NotebookEditorRunAllCells,(()=>this.runAllCells()))),this.disposableRegistry.push(e.registerCommand(N.NotebookEditorAddCellBelow,(()=>this.addCellBelow()))),this.disposableRegistry.push(this.commandManager.registerCommand(N.NotebookEditorCollapseAllCells,(()=>this.collapseAll()))),this.disposableRegistry.push(this.commandManager.registerCommand(N.NotebookEditorExpandAllCells,(()=>this.expandAll()))),this.disposableRegistry.push(this.commandManager.registerCommand(N.RestartKernelAndRunUpToSelectedCell,(()=>this.restartKernelAndRunUpToSelectedCell()))),this.disposableRegistry.push(e.registerCommand(N.RestartKernel,(e=>e&&"notebookEditor"in e?this.restartKernel(e?.notebookEditor?.notebookUri).catch(ae):this.restartKernel(e).catch(ae)))),this.disposableRegistry.push(e.registerCommand(N.InterruptKernel,(e=>this.interruptKernel(e?.notebookEditor?.notebookUri)))),this.disposableRegistry.push(e.registerCommand(N.RestartKernelAndRunAllCells,(e=>{e&&"notebookEditor"in e?this.restartKernelAndRunAllCells(e?.notebookEditor?.notebookUri).catch(ae):this.restartKernelAndRunAllCells(e).catch(ae)})))}runAllCells(){this.notebooks.activeNotebookEditor&&this.commandManager.executeCommand("notebook.execute").then(ae,ae)}addCellBelow(){this.notebooks.activeNotebookEditor&&this.commandManager.executeCommand("notebook.cell.insertCodeCellBelow").then(ae,ae)}removeAllCells(){const e=this.notebooks.activeNotebookEditor?.notebook;if(!e)return;const t=this.languageService.getPreferredLanguage(ec(e));dS(e,(n=>{const i=Oe.NotebookEdit.replaceCells(new Oe.NotebookRange(0,e.cellCount),[new Oe.NotebookCellData(Oe.NotebookCellKind.Code,"",t)]);n.set(e.uri,[i])})).then(ae,ae)}collapseAll(){const e=this.notebooks.activeNotebookEditor?.notebook;e&&dS(e,(t=>{e.getCells().forEach(((n,i)=>{const r={...n.metadata||{},inputCollapsed:!0,outputCollapsed:!0};t.set(e.uri,[Oe.NotebookEdit.updateCellMetadata(i,r)])}))})).then(ae,ae)}expandAll(){const e=this.notebooks.activeNotebookEditor?.notebook;e&&dS(e,(t=>{e.getCells().forEach(((n,i)=>{const r={...n.metadata||{},inputCollapsed:!1,outputCollapsed:!0};t.set(e.uri,[Oe.NotebookEdit.updateCellMetadata(i,r)])}))})).then(ae,ae)}async interruptKernel(e){const t=e??this.notebookEditorProvider.activeNotebookEditor?.notebook.uri,n=Oe.workspace.notebookDocuments.find((e=>e.uri.toString()===t?.toString()));if(void 0===n)return;En(`Command interrupted kernel for ${pn(n.uri)}`);const i=this.kernelProvider.get(n);i?await this.wrapKernelMethod("interrupt",i):kn("Interrupt requested & no kernel.")}async restartKernelAndRunAllCells(e){await this.restartKernel(e),this.runAllCells()}async restartKernelAndRunUpToSelectedCell(){const e=this.notebookEditorProvider.activeNotebookEditor;e&&(await this.restartKernel(e.notebook.uri),this.commandManager.executeCommand("notebook.cell.execute",{ranges:[{start:0,end:e.selection.end}],document:e.notebook.uri}).then(ae,ae))}async restartKernel(e){const t=e??this.notebookEditorProvider.activeNotebookEditor?.notebook.uri,n=Oe.workspace.notebookDocuments.find((e=>e.uri.toString()===t?.toString()));if(void 0===n)return;const i=this.kernelProvider.get(n);if(i)if(En(`Restart kernel command handler for ${pn(n.uri)}`),await this.shouldAskForRestart(n.uri)){const e=gr.restartKernelMessage,t=gr.restartKernelMessageYes,r=gr.restartKernelMessageDontAskAgain,o=await this.applicationShell.showInformationMessage(e,{modal:!0},t,r);o===r?(await this.disableAskForRestart(n.uri),this.wrapKernelMethod("restart",i).catch(ae)):o===t&&this.wrapKernelMethod("restart",i).catch(ae)}else this.wrapKernelMethod("restart",i).catch(ae)}async wrapKernelMethod(e,t){const n=t.notebook,i=this.pendingRestartInterrupt.get(t);if(i)return i;const r=(async()=>{const i=this.kernelProvider.getKernelExecution(t).pendingCells[0],r=this.controllerRegistration.getSelected(n);try{if(!r)throw new Error("No kernel associated with the notebook");await Yb.wrapKernelMethod(r.connection,e,t.creator,this.serviceContainer,{resource:t.resourceUri,notebook:n,controller:r.controller},new hh(!1),this.disposableRegistry)}catch(n){i?await Tg(i,t.controller,await this.errorHandler.getErrorMessageForDisplayInCell(n,e,t.resourceUri),!1):this.applicationShell.showErrorMessage(n.toString()).then(ae,ae)}})();return r.finally((()=>{this.pendingRestartInterrupt.get(t)===r&&this.pendingRestartInterrupt.delete(t)})).catch(ae),this.pendingRestartInterrupt.set(t,r),r}async shouldAskForRestart(e){if(this.kernelInterruptedDontAskToRestart)return!1;const t=this.configurationService.getSettings(e);return t&&!0===t.askForKernelRestart}async disableAskForRestart(e){this.configurationService.getSettings(e)&&this.configurationService.updateSetting("askForKernelRestart",!1,void 0,Oe.ConfigurationTarget.Global).catch(ae)}};fS=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),hS(0,zn(Ri)),hS(1,zn(oi)),hS(2,zn(Gn)),hS(3,zn(Hb)),hS(4,zn(Jn)),hS(5,zn(ji)),hS(6,zn(na)),hS(7,zn(Ks)),hS(8,zn(bo)),hS(9,zn(Jb)),hS(10,zn(ya))],fS);let mS=class{constructor(e){this.vscodeNotebook=e,this.providers=new Set}registerEmbedNotebookProvider(e){this.providers.add(e)}findNotebookEditor(e){const t=e?Qt(e,!0):"false",n="notebook"===Ya(e)?this.vscodeNotebook.notebookDocuments.find((e=>Qt(e.uri,!0)===t)):void 0,i=n&&this.vscodeNotebook.activeNotebookEditor?.notebook===n?this.vscodeNotebook.activeNotebookEditor:void 0;if(i)return i;for(let t of this.providers){const n=t.findNotebookEditor(e);if(n)return n}}get activeNotebookEditor(){return this.findNotebookEditor(Oe.window.activeNotebookEditor?.notebook.uri)||this.findNotebookEditor(Oe.window.activeTextEditor?.document.uri)}findAssociatedNotebookDocument(e){const t=ln()===cn.Windows;let n=this.vscodeNotebook.notebookDocuments.find((n=>t?n.uri.path.toLowerCase()===e.path.toLowerCase():n.uri.path===e.path));if(n)return n;for(let t of this.providers){const n=t.findAssociatedNotebookDocument(e);if(n)return n}}};mS=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(oi))],mS);var gS=function(e,t){return function(n,i){t(n,i,e)}};let vS=class{get isTelemetryDisabled(){return Qr(this.workspace)}constructor(e,t,n){this.vscNotebook=e,this.workspace=n,this.sentMimeTypes=new Set,this.disposables=[],t.push(this)}activate(){this.vscNotebook.onDidOpenNotebookDocument(this.onDidOpenCloseDocument,this,this.disposables),this.vscNotebook.onDidCloseNotebookDocument(this.onDidOpenCloseDocument,this,this.disposables),this.vscNotebook.onDidSaveNotebookDocument(this.onDidOpenCloseDocument,this,this.disposables),this.vscNotebook.onDidChangeNotebookCellExecutionState(this.onDidChangeNotebookCellExecutionState,this,this.disposables)}dispose(){Ie(this.disposables)}async onDidChangeNotebookCellExecutionState(e){Za(e.cell.notebook)&&!this.isTelemetryDisabled&&this.checkCell(e.cell,"onExecution")}onDidOpenCloseDocument(e){Za(e)&&!this.isTelemetryDisabled&&e.getCells().forEach((e=>this.checkCell(e,"onOpenCloseOrSave")))}checkCell(e,t){if(e.kind===Oe.NotebookCellKind.Markup)return;if("raw"===e.document.languageId)return;const n=e.notebook.notebookType===l?"notebook":"interactive";e.outputs.map((e=>e.items.map((e=>e.mime)))).flat().map((e=>this.sendTelemetry(e,t,n)))}sendTelemetry(e,t,n){const i=`${e}-${t}`;this.sentMimeTypes.has(i)||(this.sentMimeTypes.add(i),e=e.replace(/\//g,"_").replace(/\\/g,"_"),io(F.CellOutputMimeType,void 0,{mimeType:e,when:t,resourceType:n}))}};vS=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),gS(0,zn(oi)),gS(1,zn(Ri)),gS(2,zn(Qn))],vS);const yS=/(;32m[ ->]*?)(\d+)(.*)/g;let bS=class{format(e,t){return e.notebook.notebookType!==l?t:t.map((t=>this.modifyTracebackFrameIPython(e,t)))}modifyTracebackFrameIPython(e,t){return/^[Cell|Input|File].*?\n.*/.test(t)?this.modifyTracebackFrameIPython8(e,t):t}modifyTracebackFrameIPython8(e,t){xn(`Trace frame to match: ${t=(t=(t=t.replace(/\u001b\[4\dm/g,"")).replace(/\u001b\[38;.*?\d+m/g,"[39m")).replace(/(;32m[ ->]*?)(\d+)(.*)\n/g,((e,t,n,i)=>`${t}${n}${i=i.replace(/\u001b\[3\d+m/g,"[39m")}\n`))}`);const n=(t,n)=>{const i=t.replace(yS,((t,n,i,r)=>{const o=parseInt(i,10);return`${n}<a href='${e.document.uri.toString()}?line=${o-1}'>${o}</a>${r}`})),r=gr.cellAtFormat(un(e.document.uri),e.index+1);return i.replace(/.*?\n/,`[1;32m${r}[0m line [0;36m${n}\n`)},i=/^Input.*?\[.*32mIn\s+\[(\d+).*?0;36m(.*?)\n.*/.exec(t);if(i&&i.length>1)return n(t,i[2]);const r=/Cell.*?\[.*32mIn\s*\[(\d+)\]\,\s+line\s+([(\d+)])(.*?)\n.*/gm.exec(t);return r&&r.length>1?n(t,r[2]):t}};bS=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn()],bS);var wS=function(e,t){return function(n,i){t(n,i,e)}};let _S=class{constructor(e,t,n,i,r,o,s,a,c){this.packages=e,this.installer=t,this.extensions=n,this.pythonExtensionChecker=i,this.disposables=r,this.interpreterService=o,this.apiProvider=s,this.notebookControllerManager=a,this.webExtension=c}activate(){this.notebookControllerManager.onControllerSelected(this.onNotebookControllerSelected,this,this.disposables),this.webExtension||this.interpreterService.onDidChangeInterpreter(this.trackPackagesOfActiveInterpreter,this,this.disposables),this.installer?.onInstalled(this.onDidInstallPackage,this,this.disposables),this.extensions.onDidChange(this.trackUponActivation,this,this.disposables),this.trackUponActivation().catch(ae),this.apiProvider.onDidActivatePythonExtension(this.trackUponActivation,this,this.disposables)}async onNotebookControllerSelected(e){e.controller.connection.interpreter&&(await Pf(e.notebook.uri,{kernelConnection:e.controller.connection}),await this.packages.trackPackages(e.controller.connection.interpreter))}async trackUponActivation(){this.activeInterpreterTrackedUponActivation||this.pythonExtensionChecker.isPythonExtensionActive&&(this.activeInterpreterTrackedUponActivation=!0,await this.trackPackagesOfActiveInterpreter())}async trackPackagesOfActiveInterpreter(){if(!this.pythonExtensionChecker.isPythonExtensionActive)return;const e=await this.interpreterService.getActiveInterpreter(void 0);e&&await this.packages.trackPackages(e)}async onDidInstallPackage(e){if(this.pythonExtensionChecker.isPythonExtensionActive)if(le(e.resource)){const t=await this.interpreterService.getActiveInterpreter(e.resource);await this.packages.trackPackages(t,!0)}else await this.packages.trackPackages(e.resource,!0)}};_S=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),wS(0,zn(du)),wS(1,zn(Ld)),wS(1,Qi()),wS(2,zn(qi)),wS(3,zn(Ao)),wS(4,zn(Ri)),wS(5,zn(ka)),wS(6,zn(Oo)),wS(7,zn(Ks)),wS(8,zn(Pi))],_S);const SS=Symbol("IDataScienceCodeLensProvider"),CS=Symbol("ICodeWatcher"),kS=Symbol("ICodeLensFactory"),ES=(Symbol("IGeneratedCodeStore"),Symbol("IGeneratedCodeStorageFactory")),xS=Symbol("ICodeGeneratorFactory"),TS=Symbol("IInteractiveWindowDebugger"),PS=Symbol("IInteractiveWindowProvider"),IS=Symbol("IInteractiveControllerHelper"),DS=Symbol("IInteractiveWindowDebuggingManager");async function RS(e){const t=await Oe.workspace.openNotebookDocument(e);await Oe.window.showNotebookDocument(t)}class OS{constructor(e){this.codeMatchRegEx=this.createRegExp(e?e.codeRegularExpression:void 0,j.PythonCellMarker),this.markdownMatchRegEx=this.createRegExp(e?e.markdownRegularExpression:void 0,j.PythonMarkdownCellMarker),this.codeExecRegEx=new RegExp(`${this.codeMatchRegEx.source}(.*)`),this.markdownExecRegEx=new RegExp(`${this.markdownMatchRegEx.source}(.*)`),this.defaultCellMarker=e?.defaultCellMarker?e.defaultCellMarker:"# %%"}isCell(e){return this.isCode(e)||this.isMarkdown(e)}isMarkdown(e){return this.markdownMatchRegEx.test(e.trim())}isCode(e){return this.codeMatchRegEx.test(e.trim())||e.trim()===this.defaultCellMarker}getCellType(e){return this.isMarkdown(e)?"markdown":"code"}isEmptyCell(e){return 0===this.stripFirstMarker(e).trim().length}stripFirstMarker(e){const t=Ee(e,{trim:!1,removeEmptyEntries:!1});return t.length>0&&(this.isCode(t[0])||this.isMarkdown(t[0]))?t.slice(1).join("\n"):e}stripFirstMarkerNoConcat(e){return e.length>0&&(this.isCode(e[0])||this.isMarkdown(e[0]))?e.slice(1):e}getFirstMarker(e){const t=Ee(e,{trim:!1,removeEmptyEntries:!1});if(t.length>0&&(this.isCode(t[0])||this.isMarkdown(t[0])))return t[0]}createRegExp(e,t){try{if(e)return new RegExp(e)}catch{}return t}}function AS(e){return e.kind===Oe.NotebookCellKind.Markup&&e.metadata.custom?.metadata&&e.metadata.custom.metadata.isInteractiveWindowMessageCell}class NS{constructor(e,t){if(this.notebookDocument=e,this.isDeleted=!1,e.cellCount){const n=e.cellAt(e.cellCount);AS(n)&&(this.sysInfoCellPromise=Promise.resolve(n),this.sysInfoCellPromise=this.updateMessage(t))}void 0===this.sysInfoCellPromise&&(this.sysInfoCellPromise=this.createCell(t))}async createCell(e){let t;return await dS(this.notebookDocument,(n=>{const i=new Oe.NotebookCellData(Oe.NotebookCellKind.Markup,e,r);i.metadata={custom:{metadata:{isInteractiveWindowMessageCell:!0}}},t=this.notebookDocument.cellCount;const o=Oe.NotebookEdit.insertCells(t,[i]);n.set(this.notebookDocument.uri,[o])})),t=t??this.notebookDocument.cellCount-1,this.notebookDocument.cellAt(t)}async updateMessage(e){const t=await this.sysInfoCellPromise;return await dS(this.notebookDocument,(n=>{if(t.index>=0&&!this.isDeleted&&AS(t))return n.replace(t.document.uri,new Oe.Range(0,0,t.document.lineCount,0),e),void n.set(this.notebookDocument.uri,[Oe.NotebookEdit.updateCellMetadata(t.index,{custom:{metadata:{isInteractiveWindowMessageCell:!0}}})])})),t}async deleteCell(){this.isDeleted=!0;const e=await this.sysInfoCellPromise;await dS(this.notebookDocument,(t=>{if(e.index>=0&&AS(e)){const n=Oe.NotebookEdit.deleteCells(new Oe.NotebookRange(e.index,e.index+1));t.set(this.notebookDocument.uri,[n])}}))}}function MS(e,t){const n="boolean"==typeof t&&t;return e=e||"",{cell_type:"code",execution_count:null,metadata:{},outputs:"boolean"==typeof t?[]:t||[],source:Array.isArray(e)?ac(e,"\n",n?jS:void 0):e}}function LS(e,t=!1){return e=Array.isArray(e)?e:[e],{cell_type:"markdown",metadata:{},source:t?e:cc(e)}}function jS(e){return/^#\s*!/.test(e)?/^#\s*!\s*%%?/.test(e)?e.replace(/^#\s*!\s*/,""):e.replace(/^#\s*/,""):e}function FS(e,t,n){return{data:MS(e,n),uri:t}}function US(e,t,n=!1){return{uri:t,data:LS(e,n)}}function qS(e,t){const n=new OS(t),i=[];for(let t=0;t<e.lineCount;t+=1){const r=e.lineAt(t);if(n.isCell(r.text)){if(i.length>0){const n=i[i.length-1];n.range=new Oe.Range(n.range.start,e.lineAt(t-1).range.end)}i.push({range:r.range,cell_type:n.getCellType(r.text)})}}if(i.length>=1){const t=e.lineAt(e.lineCount-1),n=i[i.length-1];n.range=new Oe.Range(n.range.start,t.range.end)}return i}function KS(e,t){const n=qS(e,t);return Array.prototype.concat(...n.map((n=>{const i=e.getText(n.range);return function(e,t,n,i){const r=Ee(t,{trim:!1}),o=r[0],s=new OS(e),{magicCommandsAsComments:a=!1}=e||{};if(s.isMarkdown(o)){let e=-1;return sc(r,((e,t)=>{}),((t,n)=>{t&&t.length>0&&-1===e&&(e=-1)})),e>=0?[US(r.slice(0,e),n),FS(r.slice(e),n,a)]:[US(r,n)]}return[FS(r,n,a)]}(t,i,e.uri)})))}class VS{constructor(e,t,n){this.disposed=!1,this.dispose=()=>{this.disposed||(this.disposed=!0,this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.disposeCallback(),this.deferred.completed||this.deferred.resolve())},this.promise=()=>this.deferred.promise,this.reject=()=>{this.deferred.reject(),this.dispose()},this.deferred=ie(),this.disposeCallback=t,n&&(this.timeout=setTimeout(this.dispose,n))}}class WS{constructor(e){this.applicationShell=e,this.statusCount=0,this.incrementCount=()=>{this.statusCount+=1},this.decrementCount=()=>{const e=this.statusCount-1;this.statusCount=Math.max(e,0)}}set(e,t,n){this.incrementCount();const i=new VS(e,(()=>this.decrementCount()),t),r={location:n?Oe.ProgressLocation.Notification:Oe.ProgressLocation.Window,title:e,cancellable:void 0!==n};return this.applicationShell.withProgress(r,((e,t)=>(t&&n&&t.onCancellationRequested((()=>{n(),i.reject()})),i.promise()))).then(ae,ae),i}async waitWithStatus(e,t,n,i){const r=this.set(t,n,i);let o;try{o=await e()}finally{r.dispose()}return o}}var $S=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},BS=function(e,t){return function(n,i){t(n,i,e)}};let HS=class{constructor(e,t,n,i,r,o,s,a,c,l,d,u,p,h,f,m,g,v,y,b,w){this.disposables=e,this.jupyterExporter=t,this.jupyterServerHelper=n,this.documentManager=i,this.applicationShell=r,this.fileSystem=o,this.configuration=s,this.dataScienceCodeLensProvider=a,this.commandManager=c,this.debugService=l,this.configService=d,this.appShell=u,this.workspace=p,this.interactiveWindowProvider=h,this.kernelProvider=f,this.dataScienceErrorHandler=m,this.ipynbProvider=g,this.fileConverter=v,this.exportDialog=y,this.clipboard=b,this.notebook=w,this.statusProvider=new WS(r),this.workspace.isTrusted||this.workspace.onDidGrantWorkspaceTrust(this.registerCommandsIfTrusted,this,this.disposables)}activate(){this.registerCommandsIfTrusted(),this.registerCommand(N.InsertCellBelowPosition,this.insertCellBelowPosition),this.registerCommand(N.InsertCellBelow,this.insertCellBelow),this.registerCommand(N.InsertCellAbove,this.insertCellAbove),this.registerCommand(N.DeleteCells,this.deleteCells),this.registerCommand(N.SelectCell,this.selectCell),this.registerCommand(N.SelectCellContents,this.selectCellContents),this.registerCommand(N.ExtendSelectionByCellAbove,this.extendSelectionByCellAbove),this.registerCommand(N.ExtendSelectionByCellBelow,this.extendSelectionByCellBelow),this.registerCommand(N.MoveCellsUp,this.moveCellsUp),this.registerCommand(N.MoveCellsDown,this.moveCellsDown),this.registerCommand(N.ChangeCellToMarkdown,this.changeCellToMarkdown),this.registerCommand(N.ChangeCellToCode,this.changeCellToCode),this.registerCommand(N.GotoNextCellInFile,this.gotoNextCellInFile),this.registerCommand(N.GotoPrevCellInFile,this.gotoPrevCellInFile),this.registerCommand(N.AddCellBelow,this.addCellBelow),this.registerCommand(N.CreateNewNotebook,this.createNewNotebook),this.registerCommand(N.LatestExtension,this.openPythonExtensionPage),this.registerCommand(N.EnableDebugLogging,this.enableDebugLogging),this.registerCommand(N.ResetLoggingLevel,this.resetLoggingLevel),this.registerCommand(N.EnableLoadingWidgetsFrom3rdPartySource,this.enableLoadingWidgetScriptsFromThirdParty),this.registerCommand(N.CreateNewInteractive,(e=>this.createNewInteractiveWindow(e))),this.registerCommand(N.ImportNotebook,((e,t=A.commandPalette)=>this.listenForErrors((()=>e?this.importNotebookOnFile(e):this.importNotebook())))),this.registerCommand(N.ImportNotebookFile,((e,t=A.commandPalette)=>this.listenForErrors((()=>e?this.importNotebookOnFile(e):this.importNotebook())))),this.commandManager.registerCommand(N.ExportFileAsNotebook,((e,t=A.commandPalette)=>this.listenForErrors((()=>{if(e)return this.exportFile(e);{const e=this.documentManager.activeTextEditor;if(e&&e.document.languageId===i)return this.exportFile(e.document.uri)}return Promise.resolve()})))),this.registerCommand(N.ExportFileAndOutputAsNotebook,((e,t=A.commandPalette)=>this.listenForErrors((()=>{if(e)return this.exportFileAndOutput(e);{const e=this.documentManager.activeTextEditor;if(e&&e.document.languageId===i)return this.exportFileAndOutput(e.document.uri)}return Promise.resolve()})))),this.registerCommand(N.ExpandAllCells,(async e=>this.expandAllCells(e?.notebookEditor?.notebookUri))),this.registerCommand(N.CollapseAllCells,(async e=>this.collapseAllCells(e?.notebookEditor?.notebookUri))),this.registerCommand(N.ExportOutputAsNotebook,(()=>this.exportCells())),this.registerCommand(N.InteractiveExportAsNotebook,(e=>this.export(e?.notebookEditor?.notebookUri))),this.registerCommand(N.InteractiveExportAs,(e=>this.exportAs(e?.notebookEditor?.notebookUri))),this.registerCommand(N.ScrollToCell,((e,t)=>this.scrollToCell(e,t))),this.registerCommand(N.InteractiveClearAll,this.clearAllCellsInInteractiveWindow),this.registerCommand(N.InteractiveGoToCode,this.goToCodeInInteractiveWindow),this.commandManager.registerCommand(N.InteractiveCopyCell,this.copyCellInInteractiveWindow)}dispose(){this.disposables.forEach((e=>e.dispose()))}registerCommandsIfTrusted(){this.workspace.isTrusted&&(this.registerCommand(N.RunAllCells,this.runAllCells),this.registerCommand(N.RunCell,this.runCell),this.registerCommand(N.RunCurrentCell,this.runCurrentCell),this.registerCommand(N.RunCurrentCellAdvance,this.runCurrentCellAndAdvance),this.registerCommand(N.ExecSelectionInInteractiveWindow,(e=>{this.runSelectionOrLine(e).catch(ae)})),this.registerCommand(N.RunAllCellsAbove,this.runAllCellsAbove),this.registerCommand(N.RunCellAndAllBelow,this.runCellAndAllBelow),this.registerCommand(N.RunAllCellsAbovePalette,this.runAllCellsAboveFromCursor),this.registerCommand(N.RunCellAndAllBelowPalette,this.runCellAndAllBelowFromCursor),this.registerCommand(N.RunCurrentCellAndAddBelow,this.runCurrentCellAndAddBelow),this.registerCommand(N.DebugCell,this.debugCell),this.registerCommand(N.DebugStepOver,this.debugStepOver),this.registerCommand(N.DebugContinue,this.debugContinue),this.registerCommand(N.DebugStop,this.debugStop),this.registerCommand(N.DebugCurrentCellPalette,this.debugCurrentCellFromCursor),this.registerCommand(N.OpenVariableView,this.openVariableView),this.registerCommand(N.OpenOutlineView,this.openOutlineView),this.registerCommand(N.RunToLine,this.runToLine),this.registerCommand(N.RunFromLine,this.runFromLine),this.registerCommand(N.RunFileInInteractiveWindows,this.runFileInteractive),this.registerCommand(N.DebugFileInInteractiveWindows,this.debugFileInteractive))}registerCommand(e,t){const n=this.commandManager.registerCommand(e,t,this);this.disposables.push(n)}getCodeWatcher(e){if(e&&this.dataScienceCodeLensProvider){const t=this.documentManager.textDocuments.filter((t=>Gt(t.uri,e)));if(t&&1===t.length)return this.dataScienceCodeLensProvider.getCodeWatcher(t[0]);if(t&&t.length>1)throw new Error(gr.documentMismatch(un(e)))}}async enableDebugLogging(){"debug"!==this.configService.getSettings().logging.level&&(await this.configService.updateSetting("logging.level","debug",void 0,Oe.ConfigurationTarget.Global),this.commandManager.executeCommand("jupyter.reloadVSCode",gr.reloadRequired).then(ae,ae))}async resetLoggingLevel(){"error"!==this.configService.getSettings().logging.level&&(await this.configService.updateSetting("logging.level","error",void 0,Oe.ConfigurationTarget.Global),this.commandManager.executeCommand("jupyter.reloadVSCode",gr.reloadRequired).then(ae,ae))}async enableLoadingWidgetScriptsFromThirdParty(){this.configService.getSettings(void 0).widgetScriptSources.length>0||await this.configService.updateSetting("widgetScriptSources",["jsdelivr.com","unpkg.com"],void 0,Oe.ConfigurationTarget.Global).catch(ae)}async runAllCells(e){let t=this.getCodeWatcher(e);return t||(t=this.getCurrentCodeWatcher()),t?t.runAllCells():void 0}async runFileInteractive(e){let t=this.getCodeWatcher(e);return t||(t=this.getCurrentCodeWatcher()),t?t.runFileInteractive():void 0}async debugFileInteractive(e){let t=this.getCodeWatcher(e);return t||(t=this.getCurrentCodeWatcher()),t?t.debugFileInteractive():void 0}async runCell(e,t,n,i,r){const o=this.getCodeWatcher(e);if(o)return o.runCell(new Oe.Range(t,n,i,r))}async runAllCellsAbove(e,t,n){if(e){const i=this.getCodeWatcher(e);if(i)return i.runAllCellsAbove(t,n)}}async runCellAndAllBelow(e,t,n){if(e){const i=this.getCodeWatcher(e);if(i)return i.runCellAndAllBelow(t,n)}}async runToLine(){const e=this.getCurrentCodeWatcher(),t=this.documentManager.activeTextEditor;if(e&&t&&t.selection)return e.runToLine(t.selection.start.line)}async runFromLine(){const e=this.getCurrentCodeWatcher(),t=this.documentManager.activeTextEditor;if(e&&t&&t.selection)return e.runFromLine(t.selection.start.line)}async runCurrentCell(){const e=this.getCurrentCodeWatcher();return e?e.runCurrentCell():void 0}async runCurrentCellAndAdvance(){const e=this.getCurrentCodeWatcher();return e?e.runCurrentCellAndAdvance():void 0}async runSelectionOrLine(e){const t=this.getCurrentCodeWatcher();return t?t.runSelectionOrLine(this.documentManager.activeTextEditor,de(e)?void 0:e):void 0}async debugCell(e,t,n,i,r){if(e){const o=this.getCodeWatcher(e);if(o)return o.debugCell(new Oe.Range(t,n,i,r))}}async debugStepOver(){this.debugService?.activeDebugSession&&this.commandManager.executeCommand("workbench.action.debug.stepOver").then(ae,ae)}async debugStop(e){if(this.debugService?.activeDebugSession&&this.interactiveWindowProvider){const t=this.interactiveWindowProvider.get(e);if(t&&t.notebookDocument){const n=this.kernelProvider.get(t.notebookDocument);n&&(En(`Interrupt kernel due to debug stop of IW ${e.toString()}`),await n.interrupt())}this.commandManager.executeCommand("workbench.action.debug.stop").then(ae,ae)}}async debugContinue(){this.debugService?.activeDebugSession&&this.commandManager.executeCommand("workbench.action.debug.continue").then(ae,ae)}async addCellBelow(){await(this.getCurrentCodeWatcher()?.addEmptyCellToBottom())}async runCurrentCellAndAddBelow(){this.getCurrentCodeWatcher()?.runCurrentCellAndAddBelow()}async insertCellBelowPosition(){this.getCurrentCodeWatcher()?.insertCellBelowPosition()}async insertCellBelow(){this.getCurrentCodeWatcher()?.insertCellBelow()}async insertCellAbove(){this.getCurrentCodeWatcher()?.insertCellAbove()}async deleteCells(){this.getCurrentCodeWatcher()?.deleteCells()}async selectCell(){this.getCurrentCodeWatcher()?.selectCell()}async selectCellContents(){this.getCurrentCodeWatcher()?.selectCellContents()}async extendSelectionByCellAbove(){this.getCurrentCodeWatcher()?.extendSelectionByCellAbove()}async extendSelectionByCellBelow(){this.getCurrentCodeWatcher()?.extendSelectionByCellBelow()}async moveCellsUp(){this.getCurrentCodeWatcher()?.moveCellsUp()}async moveCellsDown(){this.getCurrentCodeWatcher()?.moveCellsDown()}async changeCellToMarkdown(){this.getCurrentCodeWatcher()?.changeCellToMarkdown()}async changeCellToCode(){this.getCurrentCodeWatcher()?.changeCellToCode()}async gotoNextCellInFile(){this.getCurrentCodeWatcher()?.gotoNextCell()}async gotoPrevCellInFile(){this.getCurrentCodeWatcher()?.gotoPreviousCell()}async runAllCellsAboveFromCursor(){const e=this.getCurrentCodeLens();if(e){const t=this.getCurrentCodeWatcher();if(t)return t.runAllCellsAbove(e.range.start.line,e.range.start.character)}}async runCellAndAllBelowFromCursor(){const e=this.getCurrentCodeLens();if(e){const t=this.getCurrentCodeWatcher();if(t)return t.runCellAndAllBelow(e.range.start.line,e.range.start.character)}}async debugCurrentCellFromCursor(){if(this.getCurrentCodeLens()){const e=this.getCurrentCodeWatcher();if(e)return e.debugCurrentCell()}}async createNewNotebook(){this.appShell.showInformationMessage('This command has been deprecated and will eventually be removed, please use ["Create: New Jupyter Notebook"](command:workbench.action.openGlobalKeybindings?%5B%22@command:ipynb.newUntitledIpynb%22%5D) instead.').then(ae,ae),await Oe.commands.executeCommand("ipynb.newUntitledIpynb")}getCurrentCodeLens(){const e=this.documentManager.activeTextEditor,t=this.getCurrentCodeWatcher();if(e&&t)return t.getCodeLenses().find((t=>t.range.end.line>=e.selection.anchor.line&&t.range.start.line<=e.selection.anchor.line))}getCurrentCodeWatcher(){const e=this.documentManager.activeTextEditor;if(e&&e.document&&this.dataScienceCodeLensProvider)return this.dataScienceCodeLensProvider.getCodeWatcher(e.document)}openPythonExtensionPage(){Oe.env.openExternal(Oe.Uri.parse("https://marketplace.visualstudio.com/items?itemName=ms-toolsai.jupyter")).then(ae,ae)}async openVariableView(){return this.commandManager.executeCommand("jupyterViewVariables.focus")}async openOutlineView(){return this.commandManager.executeCommand("outline.focus")}async listenForErrors(e){let t;try{return t=await e(),t}catch(e){Sn("listenForErrors",e),this.dataScienceErrorHandler.handleError(e).then(ae,ae)}return t}async exportFile(e){const t=un(e);if(t&&t.length>0&&this.jupyterExporter){const n=this.documentManager.activeTextEditor;if(n&&this.fileSystem.arePathsSame(n.document.uri,e)){const i=KS(n.document,this.configuration.getSettings(n.document.uri));if(i){const n=await this.exportDialog.showDialog(T_.ipynb,e);if(await this.waitForStatus((async()=>{if(n){const e=await(this.jupyterExporter?.translateToNotebook(i));await this.fileSystem.writeFile(n,JSON.stringify(e,void 0,1))}}),gr.exportingFormat,pn(e)),n&&t){const t=gr.exportOpenQuestion1;await this.applicationShell.showInformationMessage(gr.exportDialogComplete(pn(e)),t)===t&&await RS(n)}}}}}async exportFileAndOutput(e){const t=un(e);if(t&&t.length>0&&this.jupyterExporter&&this.jupyterServerHelper&&await this.jupyterServerHelper.isJupyterServerSupported()){const t=this.documentManager.activeTextEditor;if(t&&t.document&&this.fileSystem.arePathsSame(t.document.uri,e)){const n=KS(t.document,this.configuration.getSettings(t.document.uri));if(n){const t=await this.exportDialog.showDialog(T_.ipynb,e);if(!t)return;return await this.waitForStatus((async()=>{if(t){const e=await(this.jupyterExporter?.translateToNotebook(n));await this.fileSystem.writeFile(t,JSON.stringify(e,void 0,1))}}),gr.exportingFormat,pn(e)),await this.notebook.openNotebookDocument(t).then((e=>this.notebook.showNotebookDocument(e))),await this.commandManager.executeCommand("notebook.execute"),t}}}else this.jupyterServerHelper&&await this.dataScienceErrorHandler.handleError(new vh(gr.jupyterNotSupported(await this.jupyterServerHelper.getJupyterServerError())))}async expandAllCells(e){const t=this.interactiveWindowProvider.getInteractiveWindowWithNotebook(e);kn(`Expanding all cells in interactive window with uri ${t?.notebookUri}`),t&&await t.expandAllCells()}async collapseAllCells(e){const t=this.interactiveWindowProvider.getInteractiveWindowWithNotebook(e);kn(`Collapsing all cells in interactive window with uri ${t?.notebookUri}`),t&&await t.collapseAllCells()}exportCells(){const e=this.interactiveWindowProvider?.activeWindow;e&&e.export()}exportAs(e){const t=this.interactiveWindowProvider.getInteractiveWindowWithNotebook(e);t&&t.exportAs()}export(e){const t=this.interactiveWindowProvider.getInteractiveWindowWithNotebook(e);t&&t.export()}async createNewInteractiveWindow(e){await(this.interactiveWindowProvider?.getOrCreate(void 0,e))}waitForStatus(e,t,n,i){const r=t(n||"");return this.statusProvider.waitWithStatus(e,r,void 0,i)}async importNotebook(){const e={};e[gr.importDialogFilter]=["ipynb"];const t=await this.applicationShell.showOpenDialog({openLabel:gr.importDialogTitle,filters:e});t&&t.length>0&&await this.waitForStatus((async()=>{await this.fileConverter.importIpynb(t[0])}),gr.importingFormat,pn(t[0]))}async importNotebookOnFile(e){const t=un(e);t&&t.length>0&&await this.waitForStatus((async()=>{await this.fileConverter.importIpynb(e)}),gr.importingFormat,pn(e))}async scrollToCell(e,t){if(t&&e){const n=this.interactiveWindowProvider.getInteractiveWindowsWithSubmitter(e);for(let e=0;e<n.length;e+=1)if(await n[e].hasCell(t)){n[e].scrollToCell(t);break}}}async clearAllCellsInInteractiveWindow(e){const t=this.interactiveWindowProvider.getInteractiveWindowWithNotebook(e?.notebookEditor?.notebookUri)?.notebookUri;if(!t)return;const n=Oe.workspace.notebookDocuments.find((e=>e.uri.toString()===t.toString()));if(!n)return;const i=new Oe.WorkspaceEdit,r=Oe.NotebookEdit.deleteCells(new Oe.NotebookRange(0,n.cellCount));i.set(n.uri,[r]),await Oe.workspace.applyEdit(i)}async goToCodeInInteractiveWindow(e){if(e&&e.metadata?.interactive){const t=Oe.Uri.parse(e.metadata.interactive.uristring),n=e.metadata.interactive.lineIndex,i=await this.documentManager.showTextDocument(t,{viewColumn:Oe.ViewColumn.One});i&&(i.revealRange(new Oe.Range(n,0,n,0)),i.selection=new Oe.Selection(new Oe.Position(n,0),new Oe.Position(n,0)))}}async copyCellInInteractiveWindow(e){if(e){const t=this.configuration.getSettings(e.notebook.uri),n=[e.metadata.interactiveWindowCellMarker??t.defaultCellMarker,e.document.getText()].join("\n");await this.clipboard.writeText(n)}}};$S([so(F.DebugStepOver)],HS.prototype,"debugStepOver",null),$S([so(F.DebugStop)],HS.prototype,"debugStop",null),$S([so(F.DebugContinue)],HS.prototype,"debugContinue",null),$S([oo(F.AddCellBelow)],HS.prototype,"addCellBelow",null),$S([so(F.ExportPythonFileInteractive)],HS.prototype,"exportFile",null),$S([so(F.ExportPythonFileAndOutputInteractive)],HS.prototype,"exportFileAndOutput",null),$S([so(F.ImportNotebook,{scope:"command"})],HS.prototype,"importNotebook",null),$S([so(F.ImportNotebook,{scope:"file"})],HS.prototype,"importNotebookOnFile",null),HS=$S([Kn(),BS(0,zn(Ri)),BS(1,zn(ui)),BS(1,Qi()),BS(2,zn(ci)),BS(2,Qi()),BS(3,zn(Yn)),BS(4,zn(Jn)),BS(5,zn(La)),BS(6,zn(ji)),BS(7,zn(SS)),BS(7,Qi()),BS(8,zn(Gn)),BS(9,zn(Zn)),BS(9,Qi()),BS(10,zn(ji)),BS(11,zn(Jn)),BS(12,zn(Qn)),BS(13,zn(PS)),BS(14,zn(na)),BS(15,zn(bo)),BS(16,zn(Jb)),BS(17,zn(P_)),BS(18,zn(O_)),BS(19,zn(ri)),BS(20,zn(oi))],HS);class zS{constructor(e,t,n,i,r,o){this.documentManager=e,this.configService=t,this.storage=n,this.notebook=i,this.executionCount=0,this.cellIndexesCounted={},this.disposables=[],o.push(this),this.documentManager.onDidChangeTextDocument(this.onChangedDocument,this,this.disposables),r.onDidChangeNotebookCellExecutionState(this.onDidCellStateChange,this,this.disposables)}dispose(){this.disposed||(this.disposed=!0,this.storage.clear(),this.disposables.forEach((e=>e.dispose())))}reset(){this.storage.clear(),this.executionCount=0}async generateCode(e,t,n,i){const{executableLines:r}=this.extractExecutableLines(e);if(this.executionCount+=1,this.cellIndexesCounted[t]=!0,r.length>0&&r.find((e=>e.trim().length>0)))return this.generateCodeImpl(e,this.executionCount,n,i)}extractExecutableLines(e){const t=e.interactive.originalSource,n=this.configService.getSettings(this.notebook.uri),i=new OS(n),r=ic(t);if(n.magicCommandsAsComments&&r.forEach(((e,t)=>r[t]=jS(e))),e.interactiveWindowCellMarker&&r.length&&r[0].trim()===e.interactiveWindowCellMarker.trim()){const e=r.slice(1).filter((e=>e.trim().length>0));if(e.length>0&&e[0].trim().startsWith("%%")){const t=r.slice(r.indexOf(e[0]));return{lines:t,executableLines:t}}}return r.length>0&&(i.isCode(r[0])||i.isMarkdown(r[0]))?{lines:r,executableLines:r.slice(1)}:{lines:r,executableLines:r}}onDidCellStateChange(e){e.cell.notebook===this.notebook&&e.cell.executionSummary?.executionOrder&&!this.cellIndexesCounted[e.cell.index]&&(this.executionCount+=1,this.cellIndexesCounted[e.cell.index]=!0)}async generateCodeImpl(e,t,n,i){const{lineIndex:r,uristring:o}=e.interactive,s=this.documentManager.textDocuments.find((e=>e.uri.toString()===o));if(!s)return;const{stripped:a,trueStartLine:c}=this.extractStrippedLines(e),l=s.lineAt(c),d=s.lineAt(Math.min(c+a.length-1,s.lineCount-1));let u=0;for(;u<a.length&&0===a[u].trim().length;)u+=1;const p=u+c,h=s.offsetAt(new Oe.Position(r,0)),f=s.offsetAt(d.rangeIncludingLineBreak.end),m=(e.interactiveWindowCellMarker||"").length>0,{runtimeLine:g,debuggerStartLine:v}=this.addHiddenLines(n,a,c,p,m,i),y=a.join(""),b=s.getText(new Oe.Range(new Oe.Position(r,0),d.rangeIncludingLineBreak.end)),w=(await Mr(y,"SHA-1")).substring(0,12),_=this.getRuntimeFile(w,t),S=n?-1:0,C={line:l?l.lineNumber+1:1,endLine:d?d.lineNumber+1:1,firstNonBlankLineIndex:p,debuggerStartLine:v,executionCount:t,startOffset:h,endOffset:f,deleted:!1,code:y,trimmedRightCode:a.map((e=>e.replace(/[ \t\r]+\n$/g,"\n"))).join(""),realCode:b,runtimeLine:g,runtimeFile:_,id:e.id,timestamp:Date.now(),lineOffsetRelativeToIndexOfFirstLineInCell:S,hasCellMarker:m};return kn(`Generated code for ${t} = ${_} with ${a.length} lines`),this.storage.store(Oe.Uri.parse(e.interactive.uristring),C),C}getRuntimeFile(e,t){return`<ipython-input-${t}-${e}>`}onChangedDocument(e){const t=this.storage.getFileGeneratedCode(e.document.uri);if(t){const n=e.document.getText();e.contentChanges.forEach((e=>{this.handleContentChange(n,e,t)}))}}extractStrippedLines(e){const t=ic(e.interactive.originalSource),{lines:n}=this.extractExecutableLines(e);let i=e.interactive.lineIndex+1;if(!e.interactiveWindowCellMarker){i=e.interactive.lineIndex;for(let e=0;e<n.length;e+=1)if(n[e]!==t[e]){i+=e+1;break}}let r=0;for(;r<n.length&&0===n[r].trim().length;)r+=1;let o=n.length-1,s=n.length-2;for(;s>0;){const e=n[o],t=n[s];if(0!==e.length&&"\n"!==e||0!==t.length&&"\n"!==t)break;n.splice(o,1),o-=1,s-=1}!n[o].endsWith("\n")&&n[o].length>0&&(n[o]=`${n[o]}\n`);for(let e=0;e<n.length;e++)n[e]=n[e].replace(/\r\n/g,"\n");return{stripped:n,trueStartLine:i}}handleContentChange(e,t,n){const i=t.range.start.line-t.range.end.line+t.text.split("\n").length-1,r=t.text.length-t.rangeLength,o=t.rangeLength<=0?t.rangeOffset:t.rangeOffset+t.rangeLength-1;n.forEach((n=>{n.endOffset<t.rangeOffset||(n.startOffset>o?(n.line+=i,n.endLine+=i,n.startOffset+=r,n.endOffset+=r):n.startOffset===o?n.deleted||t.rangeLength>0||0===i?n.deleted=e.substr(n.startOffset,n.endOffset-n.startOffset)!==n.realCode:(n.line+=i,n.endLine+=i,n.startOffset+=r,n.endOffset+=r):n.deleted=e.substr(n.startOffset,n.endOffset-n.startOffset)!==n.realCode)}))}addHiddenLines(e,t,n,i,r,o){const s=o||!0===this.configService.getSettings(void 0).forceIPyKernelDebugger;return e&&this.configService.getSettings(this.notebook.uri).stopOnFirstLineWhileDebugging?s?(t.splice(0,0,"breakpoint()\n"),{runtimeLine:1,debuggerStartLine:n+1}):(t.splice(0,0,"breakpoint()\n"),{runtimeLine:2,debuggerStartLine:n}):{runtimeLine:1,debuggerStartLine:r?i:i+1}}}var JS=function(e,t){return function(n,i){t(n,i,e)}};let GS=class{constructor(e,t,n,i,r){this.documentManager=e,this.configService=t,this.storageFactory=n,this.disposables=i,this.notebooks=r,this.codeGenerators=new WeakMap}activate(){this.notebooks.onDidCloseNotebookDocument(this.onDidCloseNotebook,this,this.disposables)}getOrCreate(e){const t=this.get(e);if(t)return t;const n=new zS(this.documentManager,this.configService,this.storageFactory.getOrCreate(e),e,this.notebooks,this.disposables);return this.codeGenerators.set(e,n),n}get(e){return this.codeGenerators.get(e)}onDidCloseNotebook(e){this.codeGenerators.get(e)?.dispose(),this.codeGenerators.delete(e)}};function YS(e){if(void 0!==e.metadata.interactive)return e.metadata}function QS(e){let t=e;return t&&t.input&&de(t.input.uri)&&de(t.input.inputBoxUri)}GS=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),JS(0,zn(Yn)),JS(1,zn(ji)),JS(2,zn(ES)),JS(3,zn(Ri)),JS(4,zn(oi))],GS);var XS=function(e,t){return function(n,i){t(n,i,e)}};const ZS=gr.runCurrentCellAndAddBelow,eC=gr.addCellBelowCommandTitle,tC=gr.debugCellCommandTitle,nC=gr.debugCellCommandTitle,iC=gr.debugStepOverCommandTitle,rC=gr.debugContinueCommandTitle,oC=gr.debugStopCommandTitle,sC=gr.runCellLensCommandTitle,aC=gr.runAllCellsLensCommandTitle,cC=gr.runAllCellsAboveLensCommandTitle,lC=gr.runCellAndAllBelowLensCommandTitle,dC=gr.scrollToCellTitleFormatMessage;let uC=class{constructor(e,t,n,i,r,o,s){this.configService=e,this.documentManager=t,this.workspace=n,this.generatedCodeStorageFactory=o,this.updateEvent=new Oe.EventEmitter,this.notebookData=new Map,this.codeLensCache=new Map,this.totalCodeLensUpdateTimeInMs=0,this.codeLensUpdateCount=0,this.maxCellCount=0,this.documentManager.onDidCloseTextDocument(this.onClosedDocument,this,r),this.workspace.onDidGrantWorkspaceTrust((()=>this.codeLensCache.clear()),this,r),this.configService.getSettings(void 0).onDidChange(this.onChangedSettings,this,r),i.onDidChangeNotebookCellExecutionState(this.onDidChangeNotebookCellExecutionState,this,r),s.onDidDisposeKernel((e=>{this.notebookData.delete(e.notebook.uri.toString())}),this,r)}getPerfMeasures(){return{totalCodeLensUpdateTimeInMs:this.totalCodeLensUpdateTimeInMs,codeLensUpdateCount:this.codeLensUpdateCount,maxCellCount:this.maxCellCount}}get updateRequired(){return this.updateEvent.event}createCodeLenses(e){const t=this.getCodeLensCacheData(e);return[...t.documentLenses,...t.gotoCellLens]}getCellRanges(e){return this.getCodeLensCacheData(e).cellRanges}getCodeLensCacheData(e){const t=new se;let n=!1;const i=e.uri.toString();let r=this.codeLensCache.get(i),o=!1;r||(r={cachedDocumentVersion:void 0,cachedExecutionCounts:new Set,documentLenses:[],cellRanges:[],gotoCellLens:[]},o=!0,this.codeLensCache.set(i,r)),r.cachedDocumentVersion!==e.version&&(r.cellRanges=qS(e,this.configService.getSettings(e.uri)),r.documentLenses=[],r.gotoCellLens=[],r.cachedDocumentVersion=e.version,o=!0);const s=this.getDocumentExecutionCounts(i);if((s.length!==r.cachedExecutionCounts.size||s.find((e=>!r?.cachedExecutionCounts.has(e))))&&(r.gotoCellLens=[],r.cachedExecutionCounts=new Set(s),o=!0),0===r.documentLenses.length&&o&&r.cellRanges.length){n=!0;const t=this.enumerateCommands(e.uri);En(`CodeLensFactory: Generating new code lenses for version ${e.version} of document ${e.uri} for commands ${t.join(", ")}`);let i=!0;r.cellRanges.forEach((n=>{t.forEach((t=>{const o=this.createCodeLens(e,n,t,i);o&&r.documentLenses.push(o)})),i=!1}))}else xn(`NOT Generating new code lenses for version ${e.version} of document ${e.uri} - needUpdate: ${o}, cellRanges.length: ${r.cellRanges.length}`);if(o&&0===r.gotoCellLens.length&&r.cellRanges.length&&this.configService.getSettings(e.uri).addGotoCodeLenses){const t=this.generatedCodeStorageFactory.get({fileUri:e.uri}),n=t?t.all.find((t=>t.uri.toString()===e.uri.toString()))?.generatedCodes:void 0;n&&n.length&&r.cellRanges.forEach((t=>{const i=this.createExecutionLens(e,t.range,n);i&&r?.gotoCellLens.push(i)}))}return n&&(this.totalCodeLensUpdateTimeInMs+=t.elapsedTime,this.codeLensUpdateCount+=1,this.maxCellCount=Math.max(this.maxCellCount,r.cellRanges.length)),r}getDocumentExecutionCounts(e){return[...this.notebookData.values()].map((t=>t.documentExecutionCounts.get(e))).filter((e=>void 0!==e))}onDidChangeNotebookCellExecutionState(e){if(e.cell.notebook.notebookType!==d)return;if(e.state!==Oe.NotebookCellExecutionState.Idle||!e.cell.executionSummary?.executionOrder)return;const t=YS(e.cell);let n=this.notebookData.get(e.cell.notebook.uri.toString());n||(n={cellExecutionCounts:new Map,documentExecutionCounts:new Map},this.notebookData.set(e.cell.notebook.uri.toString(),n)),void 0!==n&&void 0!==t&&(n.cellExecutionCounts.set(t.id,e.cell.executionSummary.executionOrder),n.documentExecutionCounts.set(t.interactive.uristring,e.cell.executionSummary.executionOrder),this.updateEvent.fire())}onClosedDocument(e){this.codeLensCache.delete(e.uri.toString())}onChangedSettings(){this.codeLensCache.clear(),this.updateEvent.fire()}enumerateCommands(e){let t;const n=this.configService.getSettings(e).codeLenses;t=n?n.split(",").map((e=>e.trim())):M.DefaultDesignLenses;const i=this.configService.getSettings(e).debugCodeLenses;t=i?t.concat(i.split(",").map((e=>e.trim()))):t.concat(M.DefaultDebuggingLenses);let r=[];return this.workspace.isTrusted||(r=[...M.DebuggerCommands,...M.DebuggerCommands,N.RunAllCells,N.RunAllCellsAbove,N.RunAllCellsAbovePalette,N.RunCellAndAllBelowPalette,N.RunCurrentCell,N.RunCurrentCellAdvance,N.RunCurrentCellAndAddBelow,N.RunFileInInteractiveWindows,N.InterruptKernel,N.RunToLine,N.RunCell,N.DebugCell,N.DebugContinue,N.DebugStepOver,N.DebugStop,N.RunCellAndAllBelowPalette]),r&&(t=t.filter((e=>!r.includes(e)))),t}createCodeLens(e,t,n,i){const{range:r,cell_type:o}=t;switch(n){case N.RunCurrentCellAndAddBelow:return this.generateCodeLens(r,N.RunCurrentCellAndAddBelow,ZS);case N.AddCellBelow:return this.generateCodeLens(r,N.AddCellBelow,eC,[e.uri,r.start.line]);case N.DebugCurrentCellPalette:return this.generateCodeLens(r,N.DebugCurrentCellPalette,tC);case N.DebugCell:if("code"!==o)break;return this.generateCodeLens(r,N.DebugCell,nC,[e.uri,r.start.line,r.start.character,r.end.line,r.end.character]);case N.DebugStepOver:if("code"!==o)break;return this.generateCodeLens(r,N.DebugStepOver,iC,[e.uri]);case N.DebugContinue:if("code"!==o)break;return this.generateCodeLens(r,N.DebugContinue,rC,[e.uri]);case N.DebugStop:if("code"!==o)break;return this.generateCodeLens(r,N.DebugStop,oC,[e.uri]);case N.RunCurrentCell:case N.RunCell:return this.generateCodeLens(r,N.RunCell,sC,[e.uri,r.start.line,r.start.character,r.end.line,r.end.character]);case N.RunAllCells:return this.generateCodeLens(r,N.RunAllCells,aC,[e.uri,r.start.line,r.start.character]);case N.RunAllCellsAbovePalette:case N.RunAllCellsAbove:return i?this.generateCodeLens(r,N.RunCellAndAllBelow,lC,[e.uri,r.start.line,r.start.character]):this.generateCodeLens(r,N.RunAllCellsAbove,cC,[e.uri,r.start.line,r.start.character]);case N.RunCellAndAllBelowPalette:case N.RunCellAndAllBelow:return this.generateCodeLens(r,N.RunCellAndAllBelow,lC,[e.uri,r.start.line,r.start.character]);default:Cn(`Invalid command for code lens ${n}`)}}findMatchingCellExecutionCount(e){const t=[...this.notebookData.values()].find((t=>t.cellExecutionCounts.get(e)));return t?.cellExecutionCounts.get(e)}createExecutionLens(e,t,n){if(n){const i=n.filter((e=>e.line-2===t.start.line)).sort(((e,t)=>e.timestamp-t.timestamp));if(i&&i.length){const n=i[i.length-1],r=this.findMatchingCellExecutionCount(n.id);if(void 0!==r)return this.generateCodeLens(t,N.ScrollToCell,dC(r),[e.uri,n.id])}}}generateCodeLens(e,t,n,i){return new Oe.CodeLens(e,function(e,t,n){return{arguments:n,title:t,command:e}}(t,n,i))}};uC=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),XS(0,zn(ji)),XS(1,zn(Yn)),XS(2,zn(Qn)),XS(3,zn(oi)),XS(4,zn(Ri)),XS(5,zn(ES)),XS(6,zn(na))],uC);var pC=function(e,t){return function(n,i){t(n,i,e)}};let hC=class{constructor(e,t,n,i,r,o,s,a){this.serviceContainer=e,this.debugLocationTracker=t,this.documentManager=n,this.configuration=i,this.commandManager=r,this.debugService=s,this.totalExecutionTimeInMs=0,this.totalGetCodeLensCalls=0,this.activeCodeWatchers=[],this.didChangeCodeLenses=new Oe.EventEmitter,o.push(this),o.push(a.onDidGrantWorkspaceTrust((()=>{Ie(this.activeCodeWatchers),this.activeCodeWatchers=[],this.didChangeCodeLenses.fire()}))),o.push(this.debugService.onDidChangeActiveDebugSession(this.onChangeDebugSession.bind(this))),o.push(this.documentManager.onDidCloseTextDocument(this.onDidCloseTextDocument.bind(this))),this.debugLocationTracker&&o.push(this.debugLocationTracker.updated(this.onDebugLocationUpdated.bind(this)))}dispose(){this.totalGetCodeLensCalls>0&&io(F.CodeLensAverageAcquisitionTime,{duration:this.totalExecutionTimeInMs/this.totalGetCodeLensCalls}),Ie(this.activeCodeWatchers)}get onDidChangeCodeLenses(){return this.didChangeCodeLenses.event}provideCodeLenses(e,t){return[o,c].includes(e.uri.scheme)?[]:this.getCodeLensTimed(e)}getCodeWatcher(e){return this.matchWatcher(e.uri)}onDebugLocationUpdated(){this.didChangeCodeLenses.fire()}onChangeDebugSession(e){this.didChangeCodeLenses.fire()}onDidCloseTextDocument(e){const t=this.activeCodeWatchers.findIndex((t=>t.uri&&t.uri.toString()===e.uri.toString()));t>=0&&this.activeCodeWatchers.splice(t,1)[0].dispose()}getCodeLensTimed(e){const t=new se,n=this.getCodeLens(e);return this.totalExecutionTimeInMs+=t.elapsedTime,this.totalGetCodeLensCalls+=1,new n_(L.HasCodeCells,this.commandManager).set(n&&n.length>0).catch(ae),this.configuration.getSettings(e.uri).enableCellCodeLens?this.adjustDebuggingLenses(e,n):[]}adjustDebuggingLenses(e,t){const n=M.DebuggerCommands;if(!this.debugLocationTracker||!this.debugService.activeDebugSession)return t.filter((e=>!!e.command&&!n.includes(e.command.command)));{const i=this.debugLocationTracker.getLocation(this.debugService.activeDebugSession);let r;try{r=i?Oe.Uri.parse(i.fileName):void 0}catch{}if(i&&(Gt(Oe.Uri.file(i.fileName),e.uri,!0)||r&&Gt(r,e.uri,!0)))return t.filter((e=>{const t=new Oe.Position(i.lineNumber-1,i.column-1);return e.range.contains(t)})).filter((e=>!!e.command&&n.includes(e.command.command)));xn(`Detected debugging context because activeDebugSession is name:"${this.debugService.activeDebugSession.name}", type: "${this.debugService.activeDebugSession.type}", but fell through with debugLocation: ${JSON.stringify(i)}, and document.uri: ${e.uri.toString()}`)}return[]}getCodeLens(e){const t=this.matchWatcher(e.uri);return t?t.getCodeLenses():(En(`Creating a new watcher for document ${e.uri}`),this.createNewCodeWatcher(e).getCodeLenses())}matchWatcher(e){const t=this.activeCodeWatchers.findIndex((t=>t.uri&&t.uri.toString()==e.toString()));if(t>=0)return this.activeCodeWatchers[t];const n=this.documentManager.textDocuments.filter((t=>t.uri.toString()===e.toString()));return n&&n.length>0?(En(`creating new code watcher with matching document ${e}`),this.createNewCodeWatcher(n[0])):void 0}createNewCodeWatcher(e){const t=this.serviceContainer.get(CS);return t.setDocument(e),t.codeLensUpdated(this.onWatcherUpdated.bind(this)),this.activeCodeWatchers.push(t),t}onWatcherUpdated(){this.didChangeCodeLenses.fire()}};hC=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),pC(0,zn(ya)),pC(1,zn(Bw)),pC(1,Qi()),pC(2,zn(Yn)),pC(3,zn(ji)),pC(4,zn(Gn)),pC(5,zn(Ri)),pC(6,zn(Zn)),pC(7,zn(Qn))],hC);class fC extends Error{constructor(e){super("Cell failed to execute"),this.cell=e}}var mC=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},gC=function(e,t){return function(n,i){t(n,i,e)}};let vC=class{constructor(e,t,n,i,r,o){this.interactiveWindowProvider=e,this.configService=t,this.documentManager=n,this.executionHelper=i,this.dataScienceErrorHandler=r,this.codeLensFactory=o,this.version=-1,this.codeLenses=[],this.cells=[],this.codeLensUpdatedEvent=new Oe.EventEmitter}setDocument(e){this.document=e,this.version=e.version,this.codeLenses=this.codeLensFactory.createCodeLenses(e),this.cells=this.codeLensFactory.getCellRanges(e),this.updateRequiredDisposable=this.codeLensFactory.updateRequired(this.onCodeLensFactoryUpdated.bind(this)),this.closeDocumentDisposable=this.documentManager.onDidCloseTextDocument(this.onDocumentClosed.bind(this))}get codeLensUpdated(){return this.codeLensUpdatedEvent.event}get uri(){return this.document?.uri}getVersion(){return this.version}getCodeLenses(){const e=this.document;return e&&e.version!=this.version&&(this.codeLenses=this.codeLensFactory.createCodeLenses(e),this.cells=this.codeLensFactory.getCellRanges(e),this.version=e.version),this.codeLenses}async debugCurrentCell(){if(this.documentManager.activeTextEditor&&this.documentManager.activeTextEditor.document)return this.runMatchingCell(this.documentManager.activeTextEditor.selection,!1,!0)}dispose(){let e=this.codeLensFactory.getPerfMeasures();e&&e.codeLensUpdateCount>0&&io(F.DocumentWithCodeCells,{codeLensUpdateTime:e.totalCodeLensUpdateTimeInMs/e.codeLensUpdateCount,maxCellCount:e.maxCellCount}),this.codeLensUpdatedEvent.dispose(),this.closeDocumentDisposable?.dispose(),this.updateRequiredDisposable?.dispose()}async runAllCells(){const e=await this.getActiveInteractiveWindow(),t=this.codeLenses.filter((e=>e.command&&e.command.command===N.RunCell&&e.command.arguments&&e.command.arguments.length>=5));let n=t.length,i=Promise.resolve(!0);for(const r of t){let o=new Oe.Range(r.command.arguments[1],r.command.arguments[2],r.command.arguments[3],r.command.arguments[4]);if(this.document){n===t.length&&(o=new Oe.Range(new Oe.Position(0,0),o.end));const r=this.document.getText(o);n-=1,i=this.addCode(e,r,this.document.uri,o.start.line)}}if(await i,0===t.length)return this.runFileInteractiveInternal(!1)}async runFileInteractive(){return this.runFileInteractiveInternal(!1)}async debugFileInteractive(){return this.runFileInteractiveInternal(!0)}async runAllCellsAbove(e,t){const n=await this.getActiveInteractiveWindow(),i=this.codeLenses.filter((e=>e.command&&e.command.command===N.RunCell));let r=i.findIndex((n=>n.range.start.line>=e&&n.range.start.character>=t));r<0&&(r=i.length);const o=r;let s=Promise.resolve(!0);for(const e of i){if(!(r>0&&this.document))break;{let t=new Oe.Range(e.range.start,e.range.end);r===o&&(t=new Oe.Range(new Oe.Position(0,0),t.end)),r-=1;const i=this.document.getText(t);s=this.addCode(n,i,this.document.uri,e.range.start.line)}}await s}async runCellAndAllBelow(e,t){const n=await this.getActiveInteractiveWindow(),i=this.codeLenses.filter((e=>e.command&&e.command.command===N.RunCell)),r=i.findIndex((n=>n.range.start.line>=e&&n.range.start.character>=t));let o=r>0?i.length-r:i.length,s=Promise.resolve(!0);for(let e=r;e>=0&&e<i.length;e+=1)if(o>0&&this.document){const t=i[e];o-=1;const r=this.document.getText(t.range);s=this.addCode(n,r,this.document.uri,t.range.start.line)}await s}async runSelectionOrLine(e,t){if(this.document&&e&&Gt(e.document.uri,this.document.uri)){const n=await this.getActiveInteractiveWindow();let i;if(i=void 0===t||de(t)?this.executionHelper.getSelectedTextToExecute(e):t,!i)return;const r=await this.executionHelper.normalizeLines(i);if(!r||0===r.trim().length)return;await this.addCode(n,r,this.document.uri,e.selection.start.line)}}async runToLine(e){if(this.document&&e>0){const t=await this.getActiveInteractiveWindow(),n=this.document.lineAt(e-1),i=this.document.getText(new Oe.Range(0,0,n.range.end.line,n.range.end.character));i&&i.trim().length&&await this.addCode(t,i,this.document.uri,0)}}async runFromLine(e){if(this.document&&e<this.document.lineCount){const t=await this.getActiveInteractiveWindow(),n=this.document.lineAt(this.document.lineCount-1),i=this.document.getText(new Oe.Range(e,0,n.range.end.line,n.range.end.character));i&&i.trim().length&&await this.addCode(t,i,this.document.uri,e)}}async runCell(e){if(!this.documentManager.activeTextEditor||!this.documentManager.activeTextEditor.document)return;const t=e.contains(this.documentManager.activeTextEditor.selection.start)&&this.configService.getSettings(this.documentManager.activeTextEditor.document.uri).enableAutoMoveToNextCell;return this.runMatchingCell(e,t)}async debugCell(e){if(this.documentManager.activeTextEditor&&this.documentManager.activeTextEditor.document)return this.runMatchingCell(e,!1,!0)}async runCurrentCell(){if(this.documentManager.activeTextEditor&&this.documentManager.activeTextEditor.document)return this.runMatchingCell(this.documentManager.activeTextEditor.selection,!1)}async runCurrentCellAndAdvance(){if(this.documentManager.activeTextEditor&&this.documentManager.activeTextEditor.document)return this.runMatchingCell(this.documentManager.activeTextEditor.selection,!0)}async addEmptyCellToBottom(){const e=this.documentManager.activeTextEditor;e&&this.insertCell(e,e.document.lineCount+1)}async runCurrentCellAndAddBelow(){if(!this.documentManager.activeTextEditor||!this.documentManager.activeTextEditor.document)return;const e=this.documentManager.activeTextEditor,t=new OS(this.configService.getSettings(e.document.uri));let n=0;const i=this.getDefaultCellMarker(e.document.uri);e&&e.edit((r=>{let o=!0;for(let s=e.selection.end.line+1;s<e.document.lineCount;s+=1)if(t.isCell(e.document.lineAt(s).text)){o=!1,n=s,r.insert(new Oe.Position(s,0),`${i}\n\n`);break}o&&(n=e.document.lineCount,r.insert(new Oe.Position(e.document.lineCount,0),`\n${i}\n`))})).then(ae,ae);const r=new Oe.Position(n+1,0);return this.runMatchingCell(e.selection,!1).then((()=>this.advanceToRange(new Oe.Range(r,r))))}insertCellBelowPosition(){const e=this.documentManager.activeTextEditor;e&&e.selection&&this.insertCell(e,e.selection.end.line+1)}insertCellBelow(){const e=this.documentManager.activeTextEditor;if(e&&e.selection){const t=this.getCellFromPosition(e.selection.end);t?this.insertCell(e,t.range.end.line+1):this.insertCell(e,e.selection.end.line+1)}}insertCellAbove(){const e=this.documentManager.activeTextEditor;if(e&&e.selection){const t=this.getCellFromPosition(e.selection.start);t?this.insertCell(e,t.range.start.line):this.insertCell(e,e.selection.start.line)}}deleteCells(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=this.getStartEndCells(e.selection);if(!t)return;const n=t[0],i=t[1];let r=0,o=0,s=i.range.end.line+1,a=0;n.range.start.line>0&&(r=n.range.start.line-1,o=e.document.lineAt(r).range.end.character,s=i.range.end.line,a=i.range.end.character);const c=new Oe.Range(new Oe.Position(r,o),new Oe.Position(s,a));e.edit((e=>{e.replace(c,""),this.codeLensUpdatedEvent.fire()})).then(ae,ae)}selectCell(){const e=this.documentManager.activeTextEditor;if(e&&e.selection){const t=this.getStartEndCells(e.selection);if(t){const n=t[0],i=t[1];e.selection.anchor.isBeforeOrEqual(e.selection.active)?e.selection=new Oe.Selection(n.range.start,i.range.end):e.selection=new Oe.Selection(i.range.end,n.range.start)}}}selectCellContents(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=this.getStartEndCellIndex(e.selection);if(!t)return;const n=t[0],i=t[1],r=e.selection.anchor.isBeforeOrEqual(e.selection.active),o=this.cells,s=[];for(let t=n;t<=i;t+=1){const n=o[t];let i=n.range.start.line+1,a=0,c=n.range.end.line,l=n.range.end.character;n.range.start.line===n.range.end.line&&(i=n.range.start.line,a=e.document.lineAt(i).range.end.character,c=i,l=a),r?s.push(new Oe.Selection(i,a,c,l)):s.push(new Oe.Selection(c,l,i,a))}e.selections=s}extendSelectionByCellAbove(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=e.selection,n=this.getStartEndCellIndex(e.selection);if(!n)return;const i=e.selection.anchor.isBefore(e.selection.active),r=this.cells,o=n[0],s=n[1],a=r[o],c=r[s];if(a.range.start.isEqual(t.start)&&c.range.end.isEqual(t.end)){let t;i&&o<s?(t=r[s-1],e.selection=new Oe.Selection(a.range.start,t.range.end)):o>0&&(t=r[o-1],e.selection=new Oe.Selection(c.range.end,t.range.start)),t&&e.revealRange(t.range,Oe.TextEditorRevealType.Default)}else{let t;t=i?o<s?new Oe.Selection(a.range.start,r[s-1].range.end):new Oe.Selection(a.range.end,a.range.start):new Oe.Selection(c.range.end,a.range.start),e.selection=t}}extendSelectionByCellBelow(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=e.selection,n=this.getStartEndCellIndex(e.selection);if(!n)return;const i=e.selection.anchor.isBeforeOrEqual(e.selection.active),r=this.cells,o=n[0],s=n[1],a=r[o],c=r[s];if(a.range.start.isEqual(t.start)&&c.range.end.isEqual(t.end)){let t;i||o===s?s<r.length-1&&(t=r[s+1],e.selection=new Oe.Selection(a.range.start,t.range.end)):o<s&&(t=r[o+1],e.selection=new Oe.Selection(c.range.end,t.range.start)),t&&e.revealRange(t.range,Oe.TextEditorRevealType.Default)}else{let t;t=i?new Oe.Selection(a.range.start,c.range.end):o<s?new Oe.Selection(r[o+1].range.start,c.range.end):new Oe.Selection(c.range.start,c.range.end),e.selection=t}}async moveCellsUp(){await this.moveCellsDirection(!0)}async moveCellsDown(){await this.moveCellsDirection(!1)}changeCellToMarkdown(){this.applyToCells(((e,t,n)=>this.changeCellTo(e,t,"markdown")))}changeCellToCode(){this.applyToCells(((e,t,n)=>this.changeCellTo(e,t,"code")))}gotoNextCell(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=e.selection,n=this.getCurrentCellLens(t.start),i=this.getNextCellLens(t.start);n&&i&&this.advanceToRange(i.range)}gotoPreviousCell(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=e.selection,n=this.getCurrentCellLens(t.start),i=this.getPreviousCellLens(t.start);n&&i&&this.advanceToRange(i.range)}applyToCells(e){const t=this.documentManager.activeTextEditor,n=this.getStartEndCellIndex(t?.selection);if(!t||!n)return;const i=this.cells,r=n[0],o=n[1];for(let n=r;n<=o;n+=1)e(t,i[n],n)}changeCellTo(e,t,n){if("raw"===n)throw Error("Cell Type raw not implemented");if(t.cell_type===n)return;const i=new OS(this.configService.getSettings(e.document.uri)),r=e.document.lineAt(t.range.start.line),o=e.document.getText(r.range),s=this.getDefaultCellMarker(e.document.uri),a="markdown"===n?i.codeExecRegEx.exec(o):i.markdownExecRegEx.exec(o);if(!a)return;const c=a[a.length-1],l="markdown"===n?`${s} [markdown]${c}`:`${s}${c}`;e.edit((async i=>{i.replace(r.range,l),t.cell_type=n,t.range.start.line<t.range.end.line&&(e.selection=new Oe.Selection(t.range.start.line+1,0,t.range.end.line,t.range.end.character),Oe.commands.executeCommand("editor.action.removeCommentLine").then(ae,ae),"markdown"===n&&Oe.commands.executeCommand("editor.action.addCommentLine").then(ae,ae))})).then(ae,ae)}async moveCellsDirection(e){const t=this.documentManager.activeTextEditor;if(!t||!t.selection)return!1;const n=this.getStartEndCellIndex(t.selection);if(!n)return!1;const i=n[0],r=n[1],o=this.cells,s=o[i],a=o[r];if(!s||!a)return!1;const c=new Oe.Range(s.range.start,a.range.end),l=new Oe.Range(t.selection.start.line-c.start.line,t.selection.start.character,t.selection.end.line-c.start.line,t.selection.end.character),d=t.selection.active.isBefore(t.selection.anchor);let u;if(e){if(0===i)return!1;{const e=o[i-1];u=this.exchangeTextLines(t,e.range,c).then((n=>(n&&(t.selection=new Oe.Selection(e.range.start.line+l.start.line,l.start.character,e.range.start.line+l.end.line,l.end.character)),n)))}}else{if(r===o.length-1)return!1;{const e=o[r+1],n=this.exchangeTextLines(t,c,e.range),i=e.range.end.line-e.range.start.line-(c.end.line-c.start.line);u=n.then((n=>(n&&(t.selection=new Oe.Selection(e.range.start.line+i+l.start.line,l.start.character,e.range.start.line+i+l.end.line,l.end.character)),n)))}}return u.then((e=>(e&&d&&(t.selection=new Oe.Selection(t.selection.active,t.selection.anchor)),!0)))}exchangeTextLines(e,t,n){const i=t.start.line,r=t.end.line,o=n.start.line,s=n.end.line;if(r>=o)throw RangeError(`Above lines must be fully above not ${r} <= ${o}`);const a=new Oe.Range(i,0,r,e.document.lineAt(r).range.end.character),c=e.document.getText(a),l=new Oe.Range(o,0,s,e.document.lineAt(s).range.end.character),d=e.document.getText(l);let u="";if(r+1<o){const t=r+1,n=o-1,i=new Oe.Range(t,0,n,e.document.lineAt(n).range.end.character);u=`${e.document.getText(i)}\n`}const p=`${d}\n${u}${c}`,h=new Oe.Range(a.start,l.end);return e.edit((e=>{e.replace(h,p),this.codeLensUpdatedEvent.fire()}))}getStartEndCells(e){const t=this.getStartEndCellIndex(e);if(t)return[this.getCellFromIndex(t[0]),this.getCellFromIndex(t[1])]}getStartEndCellIndex(e){if(!e)return;let t=this.getCellIndex(e.start),n=t;if(e.start.line!==e.end.line&&(n=this.getCellIndex(e.end)),-1===t){if(-1===n)return;{t=0;const n=this.getCellFromIndex(0);if(e.start.line>n.range.start.line)throw RangeError(`Should not be able to pick a range with an end in a cell and start after a cell. ${e.start.line} > ${n.range.end.line}`)}}return t>=0&&n>=0?[t,n]:void 0}insertCell(e,t){const n=this.getDefaultCellMarker(e.document.uri),i=t>=e.document.lineCount?`\n${n}\n`:`${n}\n\n`,r=new Oe.Position(t,0),o=new Oe.Position(t+1,0);e.edit((e=>{e.insert(r,i),this.codeLensUpdatedEvent.fire()})).then(ae,ae),e.selection=new Oe.Selection(o,o)}getDefaultCellMarker(e){return this.configService.getSettings(e).defaultCellMarker||C.DefaultCodeCellMarker}onCodeLensFactoryUpdated(){this.document&&(this.codeLenses=this.codeLensFactory.createCodeLenses(this.document),this.cells=this.codeLensFactory.getCellRanges(this.document)),this.codeLensUpdatedEvent.fire()}onDocumentClosed(e){this.document&&Gt(e.uri,this.document.uri)&&(this.codeLensUpdatedEvent.dispose(),this.closeDocumentDisposable?.dispose(),this.updateRequiredDisposable?.dispose())}getActiveInteractiveWindow(){return this.interactiveWindowProvider.getOrCreate(this.document?.uri)}async addCode(e,t,n,i,r){let o=!1;try{o=r?await e.debugCode(t,n,i):await e.addCode(t,n,i)}catch(e){e instanceof fC||await this.dataScienceErrorHandler.handleError(e)}return o}async runMatchingCell(e,t,n){const i=this.getCurrentCellLens(e.start),r=this.getNextCellLens(e.start);if(i&&this.document){const e=this.document.getText(i.range);if(t){const t=this.documentManager.activeTextEditor,{newCellOnRunLast:n}=this.configService.getSettings(this.document.uri),o=new OS(this.configService.getSettings(this.document.uri));r?this.advanceToRange(r.range):n&&t&&!o.isEmptyCell(e)&&this.insertCell(t,i.range.end.line+1)}const o=await this.getActiveInteractiveWindow();await this.addCode(o,e,this.document.uri,i.range.start.line,n)}}getCellIndex(e){return this.cells.findIndex((t=>e&&t.range.contains(e)))}getCellFromIndex(e){const t=this.cells,n=function(e,t){if(t<=0)throw new RangeError(`Length must be > 0 not ${t}`);return e<0&&(e+=t),e<0?0:e>=t?t-1:e}(e,t.length);return t[n]}getCellFromPosition(e){if(!e){const t=this.documentManager.activeTextEditor;t&&t.selection&&(e=t.selection.active)}if(e){const t=this.getCellIndex(e);if(t>=0)return this.cells[t]}}getCurrentCellLens(e){return this.codeLenses.find((t=>t.range.contains(e)&&void 0!==t.command&&t.command.command===N.RunCell))}getNextCellLens(e){const t=this.codeLenses.findIndex((t=>t.range.contains(e)&&void 0!==t.command&&t.command.command===N.RunCell));if(t>=0)return this.codeLenses.find(((e,n)=>void 0!==e.command&&e.command.command===N.RunCell&&n>t))}getPreviousCellLens(e){const t=this.codeLenses.findIndex((t=>t.range.contains(e)&&void 0!==t.command&&t.command.command===N.RunCell));if(t>=1)return this.codeLenses.find(((e,n)=>void 0!==e.command&&n<t&&n+1===t))}async runFileInteractiveInternal(e){if(this.document){const t=await this.getActiveInteractiveWindow(),n=this.document.getText(),i=this.cells;if(i&&i.length){const n=i.map((n=>this.addCode(t,this.document.getText(n.range),this.document.uri,n.range.start.line,e)));await Promise.all(n)}else await this.addCode(t,n,this.document.uri,0,e)}}advanceToRange(e){const t=this.documentManager.activeTextEditor,n=new Oe.Selection(e.start,e.start);t&&(t.selection=n,t.revealRange(e,Oe.TextEditorRevealType.Default))}};mC([so(F.DebugCurrentCell)],vC.prototype,"debugCurrentCell",null),mC([so(F.RunAllCells)],vC.prototype,"runAllCells",null),mC([so(F.RunFileInteractive)],vC.prototype,"runFileInteractive",null),mC([so(F.DebugFileInteractive)],vC.prototype,"debugFileInteractive",null),mC([so(F.RunAllCellsAbove)],vC.prototype,"runAllCellsAbove",null),mC([so(F.RunCellAndAllBelow)],vC.prototype,"runCellAndAllBelow",null),mC([so(F.RunSelectionOrLine)],vC.prototype,"runSelectionOrLine",null),mC([so(F.RunToLine)],vC.prototype,"runToLine",null),mC([so(F.RunFromLine)],vC.prototype,"runFromLine",null),mC([Tn("CodeWatcher::runCell",$.BeforeCall)],vC.prototype,"runCell",null),mC([so(F.DebugCurrentCell)],vC.prototype,"debugCell",null),mC([so(F.RunCurrentCell)],vC.prototype,"runCurrentCell",null),mC([so(F.RunCurrentCellAndAdvance)],vC.prototype,"runCurrentCellAndAdvance",null),mC([oo(F.RunCurrentCellAndAddBelow)],vC.prototype,"runCurrentCellAndAddBelow",null),mC([oo(F.InsertCellBelowPosition)],vC.prototype,"insertCellBelowPosition",null),mC([oo(F.InsertCellBelow)],vC.prototype,"insertCellBelow",null),mC([oo(F.InsertCellAbove)],vC.prototype,"insertCellAbove",null),mC([oo(F.DeleteCells)],vC.prototype,"deleteCells",null),mC([oo(F.SelectCell)],vC.prototype,"selectCell",null),mC([oo(F.SelectCellContents)],vC.prototype,"selectCellContents",null),mC([oo(F.ExtendSelectionByCellAbove)],vC.prototype,"extendSelectionByCellAbove",null),mC([oo(F.ExtendSelectionByCellBelow)],vC.prototype,"extendSelectionByCellBelow",null),mC([oo(F.MoveCellsUp)],vC.prototype,"moveCellsUp",null),mC([oo(F.MoveCellsDown)],vC.prototype,"moveCellsDown",null),mC([oo(F.ChangeCellToMarkdown)],vC.prototype,"changeCellToMarkdown",null),mC([oo(F.ChangeCellToCode)],vC.prototype,"changeCellToCode",null),mC([oo(F.GotoNextCellInFile)],vC.prototype,"gotoNextCell",null),mC([oo(F.GotoPrevCellInFile)],vC.prototype,"gotoPreviousCell",null),vC=mC([Kn(),gC(0,zn(PS)),gC(1,zn(ji)),gC(2,zn(Yn)),gC(3,zn(Zl)),gC(4,zn(bo)),gC(5,zn(kS))],vC);var yC=function(e,t){return function(n,i){t(n,i,e)}};let bC=class{constructor(e,t,n,i){this.documentManager=e,this.configuration=n,this.extensionChecker=i,this.computeDecorations(),t.push(this),t.push(this.configuration.getSettings(void 0).onDidChange(this.settingsChanged,this)),t.push(this.documentManager.onDidChangeActiveTextEditor(this.changedEditor,this)),t.push(this.documentManager.onDidChangeTextEditorSelection(this.changedSelection,this)),t.push(this.documentManager.onDidChangeTextDocument(this.changedDocument,this)),this.settingsChanged()}activate(){}dispose(){this.timer&&clearTimeout(this.timer)}settingsChanged(){this.documentManager.activeTextEditor&&this.triggerUpdate(this.documentManager.activeTextEditor)}changedEditor(){this.triggerUpdate(void 0)}changedDocument(e){this.documentManager.activeTextEditor&&e.document===this.documentManager.activeTextEditor.document&&this.triggerUpdate(this.documentManager.activeTextEditor)}changedSelection(e){e.textEditor&&e.textEditor.selection.anchor&&this.triggerUpdate(e.textEditor)}triggerUpdate(e){this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>this.update(e)),100)}computeDecorations(){this.currentCellTopUnfocused=this.documentManager.createTextEditorDecorationType({borderColor:new Oe.ThemeColor("interactive.inactiveCodeBorder"),borderWidth:"2px 0px 0px 0px",borderStyle:"solid",isWholeLine:!0}),this.currentCellBottomUnfocused=this.documentManager.createTextEditorDecorationType({borderColor:new Oe.ThemeColor("interactive.inactiveCodeBorder"),borderWidth:"0px 0px 1px 0px",borderStyle:"solid",isWholeLine:!0}),this.currentCellTop=this.documentManager.createTextEditorDecorationType({borderColor:new Oe.ThemeColor("interactive.activeCodeBorder"),borderWidth:"2px 0px 0px 0px",borderStyle:"solid",isWholeLine:!0}),this.currentCellBottom=this.documentManager.createTextEditorDecorationType({borderColor:new Oe.ThemeColor("interactive.activeCodeBorder"),borderWidth:"0px 0px 1px 0px",borderStyle:"solid",isWholeLine:!0})}cellDecorationEnabled(e){return!1!==e.decorateCells&&("currentCell"===e.decorateCells||"allCells"===e.decorateCells)}update(e){const t=void 0===e?this.documentManager.visibleTextEditors:[e];for(const e of t)if(e&&e.document&&e.document.languageId===i&&!tc(e.document)&&this.currentCellTop&&this.currentCellBottom&&this.currentCellTopUnfocused&&this.currentCellBottomUnfocused&&this.extensionChecker.isPythonExtensionInstalled){const t=this.configuration.getSettings(e.document.uri);if(this.cellDecorationEnabled(t)){const n=qS(e.document,t),i=n.map((e=>e.range)).filter((t=>t.contains(e.selection.anchor))),r=i.length>0?[new Oe.Range(i[0].start,i[0].start)]:[],o="allCells"!==t.decorateCells&&i.length>0?[new Oe.Range(i[0].end,i[0].end)]:[],s=[];"allCells"===t.decorateCells&&n.forEach((e=>{const t=e.range.start;t!==i[0].start&&s.push(new Oe.Range(t,t))})),this.documentManager.activeTextEditor===e?(e.setDecorations(this.currentCellTop,r),e.setDecorations(this.currentCellBottom,o),e.setDecorations(this.currentCellTopUnfocused,s),e.setDecorations(this.currentCellBottomUnfocused,[])):(e.setDecorations(this.currentCellTop,[]),e.setDecorations(this.currentCellBottom,[]),e.setDecorations(this.currentCellTopUnfocused,[...s,...r]),e.setDecorations(this.currentCellBottomUnfocused,o))}else e.setDecorations(this.currentCellTop,[]),e.setDecorations(this.currentCellBottom,[]),e.setDecorations(this.currentCellTopUnfocused,[]),e.setDecorations(this.currentCellBottomUnfocused,[])}}};bC=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),yC(0,zn(Yn)),yC(1,zn(Ri)),yC(2,zn(ji)),yC(3,zn(Ao))],bC);class wC{constructor(){this.codeGeneratorsByFile=new of}clear(){this.codeGeneratorsByFile.clear()}get all(){return[...this.codeGeneratorsByFile.entries()].map((e=>({uri:e[0],generatedCodes:e[1].filter((e=>!e.deleted))}))).filter((e=>e.generatedCodes.length>0))}getFileGeneratedCode(e){return this.codeGeneratorsByFile.get(e)||[]}store(e,t){const n=this.codeGeneratorsByFile.get(e)||[];let i=!1;for(let e=0;e<n.length&&!i;e+=1){const r=n[e];t.line>=r.line&&t.line<=r.endLine?(n.splice(e,1,t),i=!0):r.line>t.line&&(n.splice(e,0,t),i=!0)}i||n.push(t),this.codeGeneratorsByFile.set(e,n)}}let _C=class{constructor(e){this.notebook=e,this.storages=new WeakMap}getOrCreate(e){return this.storages.has(e)||this.storages.set(e,new wC),this.storages.get(e)}get(e){if("notebook"in e)return this.storages.get(e.notebook);{const t=this.notebook.notebookDocuments.find((t=>{const n=this.storages.get(t);return n?.all.find((t=>t.uri.toString()===e.fileUri.toString()))}));return t?this.storages.get(t):void 0}}};_C=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(oi))],_C);var SC=function(e,t){return function(n,i){t(n,i,e)}};let CC=class{constructor(e,t,n,i,r){this.variableProvider=e,this.interactiveProvider=t,this.notebook=n,this.disposables=i,this.kernelProvider=r,this.runFiles=new Set,this.stopWatch=new se}activate(){this.notebook.onDidChangeNotebookCellExecutionState(this.onDidChangeNotebookCellExecutionState,this,this.disposables),this.kernelProvider.onDidRestartKernel((()=>this.runFiles.clear()),this,this.disposables)}dispose(){this.hoverProviderRegistration&&this.hoverProviderRegistration.dispose()}async onDidChangeNotebookCellExecutionState(e){try{if(e.cell.notebook.notebookType!==d)return;const t=this.runFiles.size,n=YS(e.cell);void 0!==n&&this.runFiles.add(n.interactive.uristring),t!==this.runFiles.size&&await this.initializeHoverProvider()}catch(e){Sn(e)}}async provideHover(e,t,n){this.stopWatch.reset();const i=await Z(300,this.getVariableHover(e,t,n));return io(F.InteractiveFileTooltipsPerf,{duration:this.stopWatch.elapsedTime},{isResultNull:!!i}),i}async initializeHoverProvider(){this.hoverProviderRegistration||(this.hoverProviderRegistration=Oe.languages.registerHoverProvider(a,this))}async getVariableHover(e,t,n){const i=e.getWordRangeAtPosition(t);if(i){const t=e.getText(i);if(t){const i=this.getMatchingKernels(e);if(i.length){const e=await xa(n,{},...i.map((e=>this.variableProvider.getVariableProperties(t,e,n)))),r=Object.entries(e||{});if(r.length>0){const e=r.reduce(((e,t)=>e+`${t[0]}: ${t[1]}\n`),"```\n")+"```";return{contents:[new Oe.MarkdownString(e)]}}}}}}getMatchingKernels(e){let t=this.interactiveProvider.get(e.uri)?.notebookUri;if(!t)return[];const n=new Set;return this.notebook.notebookDocuments.filter((e=>t?.toString()===e.uri.toString())).forEach((e=>{const t=this.kernelProvider.get(e);t&&n.add(t)})),Array.from(n)}};CC=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),SC(0,zn(Oy)),SC(0,Nc(C.KERNEL_VARIABLES)),SC(1,zn(PS)),SC(2,zn(oi)),SC(3,zn(Ri)),SC(4,zn(na))],CC);var kC=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class EC{get onDidChangeViewState(){return this._onDidChangeViewState.event}get closed(){return this.closedEvent.event}get owner(){return this._owner}get submitters(){return this._submitters}get notebookDocument(){return this._notebookDocument||(this._notebookDocument=Oe.workspace.notebookDocuments.find((e=>e.uri.toString()===this.notebookUri.toString()))),this._notebookDocument}get kernelConnectionMetadata(){return this.controller?.metadata}constructor(e,t,n,i,r){this.serviceContainer=e,this._owner=t,this.controllerFactory=n,this.inputUri=r,this._onDidChangeViewState=new Oe.EventEmitter,this.closedEvent=new Oe.EventEmitter,this._submitters=[],this.internalDisposables=[],this.documentManager=this.serviceContainer.get(Yn),this.commandManager=this.serviceContainer.get(Gn),this.fs=this.serviceContainer.get(La),this.configuration=this.serviceContainer.get(ji),this.jupyterExporter=this.serviceContainer.get(ui),this.workspaceService=this.serviceContainer.get(Qn),this.exportDialog=this.serviceContainer.get(O_),this.interactiveWindowDebugger=this.serviceContainer.tryGet(TS),this.errorHandler=this.serviceContainer.get(bo),this.codeGeneratorFactory=this.serviceContainer.get(xS),this.storageFactory=this.serviceContainer.get(ES),this.kernelProvider=this.serviceContainer.get(na),this.debuggingManager=this.serviceContainer.get(DS),this.isWebExtension=this.serviceContainer.get(Pi),this.notebookUri=QS(i)?i.input.uri:i.notebook.uri,this._owner&&this._submitters.push(this._owner),Oe.window.onDidChangeActiveNotebookEditor((e=>{e?.notebook.uri.toString()===this.notebookUri.toString()&&this._onDidChangeViewState.fire()}),this.internalDisposables),Oe.workspace.onDidCloseNotebookDocument((e=>{e.uri.toString()===this.notebookUri.toString()&&this.closedEvent.fire()}),this.internalDisposables),Oe.window.activeNotebookEditor?.notebook.uri.toString()===this.notebookUri.toString()&&this._onDidChangeViewState.fire(),this.cellMatcher=new OS(this.configuration.getSettings(this.owningResource)),this.notebookDocument&&this.codeGeneratorFactory.getOrCreate(this.notebookDocument)}notifyConnectionReset(){if(this.notebookDocument)this.controller||(this.controller=this.initController(this.notebookDocument)),this.controller.setInfoMessageCell(gr.noKernelConnected);else{const e=Oe.workspace.onDidOpenNotebookDocument((t=>{t.uri.toString()===this.notebookUri.toString()&&(this._notebookDocument=t,this.controller=this.initController(t),this.internalDisposables.push(this.controller.listenForControllerSelection()),this.controller.setInfoMessageCell(gr.noKernelConnected),e.dispose())}))}}initController(e){const t=this.controllerFactory.create(e,this.errorHandler,this.kernelProvider,this._owner);return this.internalDisposables.push(t.listenForControllerSelection()),t}async ensureInitialized(){if(!this.notebookDocument&&(En("Showing Interactive editor to initialize codeGenerator from notebook document"),await this.showInteractiveEditor(),!this.notebookDocument))throw new Error("Could not open notebook document for Interactive Window");this.codeGeneratorFactory.get(this.notebookDocument)||this.codeGeneratorFactory.getOrCreate(this.notebookDocument),this.controller||(this.controller=this.initController(this.notebookDocument)),this.controller.controller?this.controller.startKernel().catch(ae):(kn("No controller selected for Interactive Window initilization"),this.controller.setInfoMessageCell(gr.selectKernelForEditor))}async showInteractiveEditor(){let e;Oe.window.tabGroups.all.find((t=>{t.tabs.find((t=>{QS(t)&&t.input.uri.toString()==this.notebookUri.toString()&&(e=t)}))}));const t=this.notebookDocument||await this.openNotebookDocument();return await Oe.window.showNotebookDocument(t,{preserveFocus:!0,viewColumn:e?.group.viewColumn})}async openNotebookDocument(){return En(`Opening notebook document ${this.notebookUri}`),await Oe.workspace.openNotebookDocument(this.notebookUri)}dispose(){this.internalDisposables.forEach((e=>e.dispose())),this.controller?.disconnect()}async showErrorForCell(e,t){const n=this.controller?.controller,i=zr(e);if(n&&i&&t){const e=dg.getOrCreate(t,new Qb(n));try{await e.appendOutput(i)}catch(e){Cn(`Could not append error message "${i}" to cell: ${e}`)}finally{e.end(!1,t.executionSummary?.timing?.endTime)}}else kn(`Could not append error message to cell "${i}"`)}changeMode(e){this.controller?.updateMode(e)}async addCode(e,t,n){return this.submitCode(e,t,n,!1)}useNewDebugMode(){return!!(this.configuration.getSettings(this.owner).forceIPyKernelDebugger||this.controller?.metadata&&!ea(this.controller.metadata))}async debugCode(e,t,n){let i=!0;const r=this.documentManager.textDocuments.find((e=>this.fs.arePathsSame(e.uri,t)));if(!this.useNewDebugMode()&&r&&r.isUntitled){const e=[...this.documentManager.textDocuments];if(i=await r.save(),i){const n=this.documentManager.textDocuments.filter((t=>-1===e.indexOf(t)));if(n&&n.length>0){const e=n.find((e=>"python"===e.languageId))||n.find((e=>!e.fileName.endsWith(".interactive")))||n[0];t=e.uri,await this.documentManager.openTextDocument(t)}}}return!i||this.submitCode(e,t,n,!0)}async submitCode(e,t,n,i){if(this.cellMatcher.isEmptyCell(e)||!this.controller?.controller)return!0;this.updateOwners(t);const r=Ee(e,{trim:!1}),o=new OS(this.configuration.getSettings(t));let s=-1;o.isMarkdown(r[0])&&sc(r,((e,t)=>{}),((e,t)=>{e&&e.length>0&&-1===s&&(s=t)}));const a=(s>0?[r.slice(0,s).join("\n"),r.slice(s).join("\n")]:[e]).map((e=>{const r=ie();this.controller.setPendingCellAdd(r.promise);const o=this.addNotebookCell(e,t,n),s=this.createExecutionPromise(o,i);return s.catch((e=>{e instanceof fC?o.then((t=>{e.cell!==t&&this.showErrorForCell(gr.cellStopOnErrorMessage,t).then(ae,ae)})).catch(ae):o.then((t=>this.errorHandler.getErrorMessageForDisplayInCell(e,"execution",this.owningResource).then((e=>this.showErrorForCell(e,t))))).catch(ae)})).finally((()=>{r?.resolve()})),s}));return a[a.length-1]}async createExecutionPromise(e,t){if(!this.controller||!this.notebookDocument)return!1;xn("InteractiveWindow.ts.createExecutionPromise.start");const n=this.controller.startKernel(),i=await e;let r=!0,o=async()=>{};try{const e=await n;await this.generateCodeAndAddMetadata(i,t,e),t&&this.useNewDebugMode()?await this.debuggingManager.start(this.notebookDocument,i):t&&ea(e.kernelConnectionMetadata)&&this.interactiveWindowDebugger&&(o=async()=>this.interactiveWindowDebugger?.detach(e),await this.interactiveWindowDebugger.attach(e),await this.interactiveWindowDebugger.updateSourceMaps(this.storageFactory.get({notebook:i.notebook})?.all||[]),this.interactiveWindowDebugger.enable(e)),xn("InteractiveWindow.ts.createExecutionPromise.kernel.executeCell");const s=YS(i),a=this.kernelProvider.getKernelExecution(e);r=await a.executeCell(i,s?.generatedCode?.code)!==zs.Error,xn("InteractiveWindow.ts.createExecutionPromise.kernel.executeCell.finished")}finally{await o(),xn("InteractiveWindow.ts.createExecutionPromise.end")}if(!r)throw new fC(i);return r}async expandAllCells(){this.notebookDocument&&await Promise.all(this.notebookDocument.getCells().map((async(e,t)=>{await this.commandManager.executeCommand("notebook.cell.expandCellInput",{ranges:[{start:t,end:t+1}],document:this.notebookUri})})))}async collapseAllCells(){this.notebookDocument&&await Promise.all(this.notebookDocument.getCells().map((async(e,t)=>{e.kind===Oe.NotebookCellKind.Code&&await this.commandManager.executeCommand("notebook.cell.collapseCellInput",{ranges:[{start:t,end:t+1}],document:this.notebookUri})})))}async scrollToCell(e){const t=await this.showInteractiveEditor(),n=t.notebook.getCells().find((t=>YS(t)?.id===e));if(n){const e=new Oe.NotebookRange(n.index,n.index+1);t.revealRange(e,Oe.NotebookEditorRevealType.Default),t.selection=e}}async hasCell(e){const t=this.notebookDocument;return!!t&&t.getCells().some((t=>YS(t)?.id===e))}get owningResource(){if(this.owner)return this.owner;return this.workspaceService.rootFolder||void 0}updateOwners(e){this._owner||(this._owner=e,this.controller?.updateOwners(e)),this._submitters.find((t=>t.toString()==e.toString()))||this._submitters.push(e)}async addNotebookCell(e,t,n){const o=this.notebookDocument;if(!o)throw new Error("No notebook document");const s=this.configuration.getSettings(this.owningResource),a=this.cellMatcher.getCellType(e)===r,c=a?cc(Ee(e)).join(""):function(e,t,n){const i=Ee(e,{trim:!1,removeEmptyEntries:!1});return ac(function(e){let t=e.length,n=-1;return e.forEach(((e,i)=>{e.trim()&&(t=i,n<0&&(n=i))})),n>=0?e.slice(n,t+1):[]}(n.stripFirstMarkerNoConcat(i)),"\n",t.magicCommandsAsComments?jS:void 0).join("")}(e,s,this.cellMatcher),l=this.cellMatcher.getFirstMarker(e),d=Oe.workspace.textDocuments.find((e=>e.uri.toString()===this.owner?.toString()))?.languageId??i,u=new Oe.NotebookCellData(a?Oe.NotebookCellKind.Markup:Oe.NotebookCellKind.Code,c,a?r:d),p={interactiveWindowCellMarker:l,interactive:{uristring:t.toString(),lineIndex:n,originalSource:e},id:Kf()()};u.metadata=p,await dS(o,(e=>{const t=Oe.NotebookEdit.insertCells(o.cellCount,[u]);e.set(o.uri,[t])}));const h=o.cellCount-1;return o.cellAt(h)}async generateCodeAndAddMetadata(e,t,n){const i=YS(e);if(!i)return;const r=!ea(n.kernelConnectionMetadata)||this.configuration.getSettings(void 0).forceIPyKernelDebugger,o=await this.codeGeneratorFactory.getOrCreate(this.notebookDocument).generateCode(i,e.index,t,r),s={...i,generatedCode:o},a=new Oe.WorkspaceEdit,c=Oe.NotebookEdit.updateCellMetadata(e.index,s);a.set(e.notebook.uri,[c]),await Oe.workspace.applyEdit(a)}async export(){if(!this.notebookDocument)throw new Error("no notebook to export.");const{magicCommandsAsComments:e}=this.configuration.getSettings(this.owningResource),t=function(e,t){return e.getCells().filter((e=>!AS(e))).map((e=>{let n=Ee(e.document.getText(),{trim:!1,removeEmptyEntries:!1});void 0!==e.metadata.interactiveWindowCellMarker&&n.unshift(e.metadata.interactiveWindowCellMarker+"\n");const i=function(e){let t;return t=e.kind===Oe.NotebookCellKind.Markup?function(e){const t=e.metadata?.custom,n={cell_type:"markdown",source:ic("document"in e?e.document.getText():e.value),metadata:t?.metadata||{}};return t?.attachments&&(n.attachments=t.attachments),n}(e):"document"in e&&"raw"===e.document.languageId||"languageId"in e&&"raw"===e.languageId?function(e){const t=e.metadata?.custom,n={cell_type:"raw",source:ic("document"in e?e.document.getText():e.value),metadata:t?.metadata||{}};return t?.attachments&&(n.attachments=t.attachments),n}(e):function(e){const t=e.metadata?.custom,n="document"in e?e.document.getText():e.value;return{cell_type:"code",execution_count:e.executionSummary?.executionOrder??null,source:ic(n),outputs:(e.outputs||[]).map(Eg),metadata:t?.metadata||{}}}(e),t}(e);return i.source=e.kind===Oe.NotebookCellKind.Code?ac(n,"\n",t?jS:void 0):ac(n),{data:i,file:""}}))}(this.notebookDocument,e);if(t&&this.exportDialog){const e=await this.exportDialog.showDialog(T_.ipynb,this.owningResource);e&&await(this.jupyterExporter?.exportToFile(t,un(e)))}}async exportAs(){if(await this.ensureInitialized(),!this.controller)throw new Error("An active kernel is required to export the notebook.");const e=this.controller.kernel?.value;let t;if(e&&await xg({},e.kernelConnectionMetadata),this.submitters&&this.submitters.length){const e=this.submitters[this.submitters.length-1];t=It(e.path,Dt(e.path))}this.isWebExtension?this.commandManager.executeCommand(N.ExportAsPythonScript,this.notebookDocument,e?.kernelConnectionMetadata.interpreter).then(ae,ae):this.commandManager.executeCommand(N.Export,this.notebookDocument,t,e?.kernelConnectionMetadata.interpreter).then(ae,ae)}}kC([_e()],EC.prototype,"showErrorForCell",null),kC([_e()],EC.prototype,"createExecutionPromise",null);class xC{constructor(e,t,n,i,r,o,s){this.controllerService=e,this.mode=t,this.notebook=n,this.errorHandler=i,this.kernelProvider=r,this.owner=o,this.disposables=[],this.controller=s?.controller,this.metadata=s?.connection}updateMode(e){this.mode=e}updateOwners(e){this.owner=e}async startKernel(){if(this.connectingListener?.dispose(),this.kernel)return this.kernel.promise;if(!this.controller||!this.metadata)throw new Error("Interactive Window kernel not selected");this.setInfoMessage(this.metadata,Rs.Start);try{const e=await this.createKernel(),t=async()=>{this.notebook&&this.metadata&&(this.systemInfoCell=void 0,this.setInfoMessage(this.metadata,Rs.Restart))};return this.disposables.push(e.addHook("willRestart",t)),e.onRestarted((async()=>{En("Restart event handled in IW"),this.fileInKernel=void 0;try{await this.setFileInKernel(e)}catch(e){Sn("Failed to run initialization after restarting")}finally{this.finishSysInfoMessage(e,Rs.Restart)}}),this,this.disposables),this.fileInKernel=void 0,await this.setFileInKernel(e),this.finishSysInfoMessage(e,Rs.Start),e}catch(e){throw this.owner?this.deleteSysInfoCell():await this.finishSysInfoWithFailureMessage(e),e}}async createKernel(){if(this.kernel)return this.kernel.promise;if(!this.controller||!this.metadata)throw new Error("Controller not selected");const e=ie();e.promise.catch(ae),this.kernel=e;try{const{kernel:t,actualController:n}=await this.controllerService.createKernel(this.metadata,this.controller,this.owner,this.notebook,this.disposables);return this.metadata=t.kernelConnectionMetadata,this.controller=n,this.disposables.push(t),e.resolve(t),t}catch(t){throw e.reject(t),this.disconnect(),t}}async setFileInKernel(e){const t=this.owner;if(!t)return void xn("Unable to run initialization for IW");const n=un(t),i=this.kernelProvider.getKernelExecution(e);("perFile"!==this.mode||this.fileInKernel)&&(this.fileInKernel&&this.fileInKernel.toString()===t.toString()||"perFile"===this.mode)?En(`Not Initializing __file__ in setFileInKernel with ${n} for mode ${this.mode} currently ${this.fileInKernel}`):(En(`Initializing __file__ in setFileInKernel with ${t} for mode ${this.mode}`),this.fileInKernel=t,await i.executeHidden(`__file__ = '${n.replace(/\\/g,"\\\\")}'`))}setPendingCellAdd(e){if(this.metadata&&this.notebook){const t=this.controllerService.getRegisteredController(this.metadata);t?.setPendingCellAddition(this.notebook,e)}}listenForControllerSelection(){return this.controllerService.onControllerSelected((e=>{if(this.notebook&&e.notebook.uri.toString()===this.notebook?.uri?.toString()&&e.controller.id!==this.controller?.id){const t=!!this.kernel;this.disconnect(),this.controller=e.controller.controller,this.metadata=e.controller.connection,t?this.startKernel().catch(ae):(this.connectingListener?.dispose(),this.connectingListener=e.controller.onConnecting((()=>{this.startKernel().catch(ae)})),this.disposables.push(this.connectingListener))}}),this)}setInfoMessageCell(e){this.systemInfoCell?this.systemInfoCell.updateMessage(e).catch((t=>Cn(`could not update info cell with message: "${e}", error: ${t}`))):this.systemInfoCell=new NS(this.notebook,e)}setInfoMessage(e,t){const n=function(e,t){const n=ls(e);return n?t==Rs.Restart?gr.restartingKernelCustomHeader(n):gr.startingNewKernelCustomHeader(n):t==Rs.Restart?gr.restartingKernelHeader:gr.startingNewKernelHeader}(e,t);this.setInfoMessageCell(n)}finishSysInfoMessage(e,t){const n=function(e,t){const n=ls(e);return t==Rs.Restart?gr.restartedKernelHeader(n||""):gr.connectedKernelHeader(n||"")}(e.kernelConnectionMetadata,t);this.systemInfoCell?.updateMessage(n).catch((e=>Cn(`System info message was not updated: "${n}" because of error: ${e}`))),this.systemInfoCell=void 0}async finishSysInfoWithFailureMessage(e){let t=await this.errorHandler.getErrorMessageForDisplayInCell(e,"start",this.owner);t=t.split("\n").join("  \n"),this.systemInfoCell?.updateMessage(t).catch((e=>Cn(`System info message was not updated: "${t}" because of error: ${e}`))),this.systemInfoCell=void 0}deleteSysInfoCell(){this.systemInfoCell?.deleteCell().then(ae,ae),this.systemInfoCell=void 0}disconnect(){this.disposables.forEach((e=>e.dispose())),this.disposables=[],this.kernel=void 0}}class TC{constructor(e,t,n){this.controllerService=e,this.mode=t,this.initialController=n}create(e,t,n,i){let r=this.initialController;const o=this.controllerService.getSelectedController(e);return o&&(r=o),new xC(this.controllerService,this.mode,e,t,n,i,r)}}var PC=function(e,t){return function(n,i){t(n,i,e)}};const IC="ds_asked_per_file_interactive",DC="ds_interactive_window_cache";let RC=class{get onDidChangeActiveInteractiveWindow(){return this._onDidChangeActiveInteractiveWindow.event}get activeWindow(){const e=Oe.window.activeNotebookEditor?.notebook.uri.toString();return e?this._windows.find((t=>t.notebookUri?.toString()===e)):void 0}constructor(e,t,n,i,r,o,s,a,c,l){this.serviceContainer=e,this.disposables=t,this.fs=n,this.configService=i,this.globalMemento=r,this.workspaceMemento=o,this.appShell=s,this.workspaceService=a,this.notebookEditorProvider=c,this.controllerHelper=l,this._onDidChangeActiveInteractiveWindow=new Oe.EventEmitter,this._windows=[],this.notebookEditorProvider.registerEmbedNotebookProvider(this),this.restoreWindows()}restoreWindows(){const e=new Map;Oe.window.tabGroups.all.forEach((t=>{t.tabs.forEach((t=>{QS(t)&&t.input.uri&&e.set(t.input.uri.toString(),t)}))})),this.workspaceMemento.get(DC,[]).forEach((t=>{if(!t.uriString||!e.get(t.uriString))return;const n=e.get(t.uriString);if(!n)return;const i=this.configService.getSettings(n.input.uri).interactiveWindowMode,r=new EC(this.serviceContainer,Oe.Uri.parse(t.owner),new TC(this.controllerHelper,i),n,Oe.Uri.parse(t.inputBoxUriString));r.notifyConnectionReset(),this._windows.push(r),io(F.CreateInteractiveWindow,{windowCount:this._windows.length},{hasKernel:!1,hasOwner:!!t.owner,mode:i,restored:!0});const o=r.closed(this.onInteractiveWindowClosed.bind(this,r));this.disposables.push(r),this.disposables.push(o),this.disposables.push(r.onDidChangeViewState(this.raiseOnDidChangeActiveInteractiveWindow.bind(this)))})),this._updateWindowCache()}async getOrCreate(e,t){if(!this.workspaceService.isTrusted)throw new Error("Workspace not trusted");const n=await this.getInteractiveMode(e);this.pendingCreations&&await this.pendingCreations.catch(ae);let i=this.getExisting(e,n,t);return i||(i=await this.create(e,n,t)),await i.ensureInitialized(),i}get(e){const t=this.configService.getSettings(e).interactiveWindowMode;return this.getExisting(e,t)}async create(e,t,n){const i=ie();this.pendingCreations=i.promise;try{let i=await this.controllerHelper.getInitialController(e,n);kn(`Starting interactive window for resource '${pn(e)}' with controller '${i?.id}'`);const r=this.serviceContainer.get(Gn),[o,s]=await this.createEditor(i,e,t,r);i&&i.controller.updateNotebookAffinity(s.notebook,Oe.NotebookControllerAffinity.Preferred),En(`Interactive Window Editor Created: ${s.notebook.uri.toString()} with input box: ${o.toString()}`);const a=new EC(this.serviceContainer,e,new TC(this.controllerHelper,t,i),s,o);this._windows.push(a),io(F.CreateInteractiveWindow,{windowCount:this._windows.length},{hasKernel:!!i,hasOwner:!!e,mode:t,restored:!1}),this._updateWindowCache(),this.lastActiveInteractiveWindow=a;const c=a.closed(this.onInteractiveWindowClosed.bind(this,a));return this.disposables.push(a),this.disposables.push(c),this.disposables.push(a.onDidChangeViewState(this.raiseOnDidChangeActiveInteractiveWindow.bind(this))),a}finally{i.resolve()}}async createEditor(e,t,n,i){const r=e?`${p}/${e.id}`:void 0,o=void 0!==t;let s=this.getInteractiveViewColumn(t);const{inputUri:a,notebookEditor:c}=await i.executeCommand("interactive.open",{viewColumn:s,preserveFocus:o},void 0,r,t&&"perFile"===n?(l=t,gr.interactiveWindowTitleFormat(It(l.path))):void 0);var l;if(!c)throw new Error("Failed to request creation of interactive window from VS Code.");return[a,c]}getInteractiveViewColumn(e){if(e)return Oe.ViewColumn.Beside;const t=this.configService.getSettings(e).interactiveWindowViewColumn;return"secondGroup"===t?Oe.ViewColumn.One:"active"===t?Oe.ViewColumn.Active:Oe.ViewColumn.Beside}async getInteractiveMode(e){let t=this.configService.getSettings(e).interactiveWindowMode;if("multiple"===t&&e&&!this.globalMemento.get(IC)&&1===this._windows.length&&(!this._windows[0].owner||!this.fs.arePathsSame(this._windows[0].owner,e))){this.globalMemento.update(IC,!0).then(ae,ae);const n=[gr.interactiveWindowModeBannerSwitchYes,gr.interactiveWindowModeBannerSwitchNo];await this.appShell.showInformationMessage(gr.interactiveWindowModeBannerTitle,...n)===n[0]&&(t="perFile",this._windows[0].changeMode(t),await this.configService.updateSetting("interactiveWindow.creationMode",t,e,Oe.ConfigurationTarget.Global))}return t}_updateWindowCache(){const e=this._windows.map((e=>({owner:e.owner?.toString(),uriString:e.notebookUri.toString(),inputBoxUriString:e.inputUri.toString()})));this.workspaceMemento.update(DC,e).then(ae,ae)}getExisting(e,t,n){return"single"===t?this._windows.length>0?this._windows[0]:void 0:"multiple"===t?e?this.activeWindow||this.lastActiveInteractiveWindow||this._windows[0]:void 0:this._windows.find((t=>!(e||t.owner||n)||!!(e&&t.owner&&this.fs.arePathsSame(e,t.owner))&&(!n||t.kernelConnectionMetadata?.id===n.id)))}raiseOnDidChangeActiveInteractiveWindow(){this.lastActiveInteractiveWindow=this.activeWindow?this.activeWindow:this.lastActiveInteractiveWindow,this._onDidChangeActiveInteractiveWindow.fire(this.activeWindow)}onInteractiveWindowClosed(e){En(`Closing interactive window: ${e.notebookUri?.toString()}`),e.dispose(),this._windows=this._windows.filter((t=>t!==e)),this._updateWindowCache(),this.lastActiveInteractiveWindow===e&&(this.lastActiveInteractiveWindow=this._windows[0]),this.raiseOnDidChangeActiveInteractiveWindow()}getActiveOrAssociatedInteractiveWindow(){if(this.activeWindow)return this.activeWindow;if(void 0===Oe.window.activeTextEditor)return;const e=Oe.window.activeTextEditor.document.uri;return e.scheme!==o?this.get(e):void 0}findNotebookEditor(e){let t;if(e&&e.path.endsWith(".interactive"))t=this.get(e)?.notebookDocument;else{const n=this.configService.getSettings(e).interactiveWindowMode;t=this.getExisting(e,n)?.notebookDocument}return t?Oe.window.visibleNotebookEditors.find((e=>e.notebook===t)):void 0}findAssociatedNotebookDocument(e){const t=this._windows.find((t=>t.inputUri?.toString()===e.toString()));let n=t?.notebookDocument;return n}getInteractiveWindowWithNotebook(e){let t;return t=void 0!==e?this._windows.find((t=>t.notebookUri?.toString()===e.toString())):this.getActiveOrAssociatedInteractiveWindow(),t}getInteractiveWindowsWithSubmitter(e){return this._windows.filter((t=>t.submitters.find((t=>this.fs.arePathsSame(e,t)))))}};RC=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),PC(0,zn(ya)),PC(1,zn(Ri)),PC(2,zn(La)),PC(3,zn(ji)),PC(4,zn(Oi)),PC(4,Nc(Ai)),PC(5,zn(Oi)),PC(5,Nc(Ni)),PC(6,zn(Jn)),PC(7,zn(Qn)),PC(8,zn(Jb)),PC(9,zn(IS))],RC);var OC=function(e,t){return function(n,i){t(n,i,e)}};let AC=class{constructor(e,t,n,i,r){this.kernelProvider=e,this.codeGeneratorFactory=n,this.storageFactory=i,this.controllers=r,this.disposables=[],t.push(this)}dispose(){Ie(this.disposables)}activate(){this.kernelProvider.onDidCreateKernel(this.onDidCreateKernel,this,this.disposables),this.controllers.onControllerSelected(this.onNotebookControllerSelected,this,this.disposables)}onNotebookControllerSelected({notebook:e}){this.storageFactory.get({notebook:e})?.clear(),this.codeGeneratorFactory.get(e)?.reset()}onDidCreateKernel(e){const t=e.notebook;"jupyterExtension"===e.creator&&t.notebookType===d&&(this.storageFactory.get({notebook:t})?.clear(),e.onRestarted((()=>{this.storageFactory.get({notebook:t})?.clear(),this.codeGeneratorFactory.getOrCreate(t).reset()}),this,this.disposables))}};AC=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),OC(0,zn(na)),OC(1,zn(Ri)),OC(2,zn(xS)),OC(3,zn(ES)),OC(4,zn(Ks))],AC);var NC=function(e,t){return function(n,i){t(n,i,e)}};const MC=__webpack_require__(3522),LC=/(;32m[ ->]*?)(\d+)(.*)/g;let jC=class{constructor(e,t){this.storageFactory=e,this.platformService=t}format(e,t){if(e.notebook.notebookType!==d)return t;const n=this.storageFactory.get({notebook:e.notebook}),i=t.some((e=>/^[Input|Cell|File].*?\n.*/.test(e)));return i||n?t.map((e=>i?this.modifyTracebackFrameIPython8(e,n?.all):this.modifyTracebackFrameIPython7(e,n.all))):t}modifyTracebackFrameIPython8(e,t){let n,i;xn(`Trace frame to match: ${e=(e=(e=e.replace(/\u001b\[4\dm/g,"")).replace(/\u001b\[38;.*?\d+m/g,"[39m")).replace(/(;32m[ ->]*?)(\d+)(.*)\n/g,((e,t,n,i)=>`${t}${n}${i=i.replace(/\u001b\[3\d+m/g,"[39m")}\n`))}`);const r=/^Input.*?\[.*32mIn\s+\[(\d+).*?0;36m(.*?)\n.*/.exec(e),o=/^Cell.*?\[.*32mIn\s*\[(\d+)\], (.*).\[0m\n/.exec(e);if(r&&r.length>1?(n=parseInt(r[1]),i=r[2]):o&&o.length>1&&(n=parseInt(o[1]),i=o[2]),t&&n){let r,o;for(let e of t)if(o=e.generatedCodes.find((e=>e.executionCount===n)),o){r=e.uri;break}if(o&&r)return e.replace(LC,((e,t,n,i)=>{const s=parseInt(n,10),a=(o.hasCellMarker?o.line-1:o.line)-1+o.lineOffsetRelativeToIndexOfFirstLineInCell+s;return`${t}<a href='${r?.toString()}?line=${a-1}'>${a}</a>${i}`})).replace(/.*?\n/,`[1;32m${un(r)}[0m in [0;36m${i}\n`)}const s=/^File.*?\[\d;32m(.*):\d+.*\u001b.*\n/.exec(e);if(s&&s.length>1){const t=dn(s[1],un(this.platformService.homeDir)),n=Oe.Uri.file(t);return e.replace(LC,((e,t,i,r)=>{const o=parseInt(i,10);return`${t}<a href='${n?.toString()}?line=${o-1}'>${o}</a>${r}`}))}return e}modifyTracebackFrameIPython7(e,t){return t.map((e=>e.uri)).forEach((t=>{const n=un(t),i=pn(t),r=this.storageFactory.get({fileUri:t});if(r){if(e.includes(n)&&new RegExp(`\\[.*?;32m${MC(n)}`).test(e)||e.includes(i)&&new RegExp(`\\[.*?;32m${MC(i)}`).test(e)){let n="";const i=/(;32m[ ->]*?)(\d+)(.*)/g;for(let t=i.exec(e);t&&t.length>3;t=i.exec(e))n=`${n}${jy(t[3]).substr(1)}\n`;const o=this.findCellOffset(r.getFileGeneratedCode(t),n);void 0!==o&&(e=e.replace(LC,((e,n,i,r)=>{const s=parseInt(i,10),a=o+s-1;return`${n}<a href='${t.toString()}?line=${a}'>${a+1}</a>${r}`})))}if(e.includes(n)){const n=this.findCellOffset(r.getFileGeneratedCode(t),e);if(n)return e.replace(LC,((e,i,r,o)=>{const s=parseInt(r,10),a=n+s-1;return`${i}<a href='${t.toString()}?line=${a}'>${a+1}</a>${o}`}))}}})),e}findCellOffset(e,t){if(e)for(const n of e)if(n.trimmedRightCode.indexOf(t)>=0)return n.firstNonBlankLineIndex}};jC=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),NC(0,zn(ES)),NC(1,zn(Ma))],jC);class FC extends wo{constructor(e,t,n){super("notinstalled",t||gr.jupyterDebuggerNotInstalledError(e),n)}}function UC(e){const t={source:{path:un(e.uri)},pydevdSourceMaps:[]};return t.pydevdSourceMaps=e.generatedCodes.map((e=>({line:e.debuggerStartLine,endLine:e.endLine,runtimeSource:{path:e.runtimeFile},runtimeLine:e.runtimeLine}))),t}var qC=function(e,t){return function(n,i){t(n,i,e)}};let KC=class{constructor(e,t,n,i){this.apiProvider=e,this.configService=t,this.debugService=n,this.platform=i,this.configs=new WeakMap,this.debuggingActive=!1,this.debuggerPackage="debugpy",this.enableDebuggerCode="import debugpy;debugpy.listen(('localhost', 0))",this.waitForDebugClientCode="import debugpy;debugpy.wait_for_client()",this.tracingEnableCode="from debugpy import trace_this_thread;trace_this_thread(True)",this.tracingDisableCode="from debugpy import trace_this_thread;trace_this_thread(False)"}async attach(e){if(!e.session)throw new Error("Notebook not initialized");const t=this.configService.getSettings(e.resourceUri),n=e.kernelConnectionMetadata.interpreter?.uri;return this.startDebugSession((e=>this.debugService.startDebugging(void 0,e)),e,{justMyCode:t.debugJustMyCode,python:n})}async detach(e){if(!e.session)return;const t=e.notebook;this.configs.get(t)&&(kn("stop debugging"),this.debuggingActive=!1,this.debugService.stop(),"dead"!==e.status&&"unknown"!==e.status&&this.disable(e))}async updateSourceMaps(e){this.debugService.activeDebugSession&&this.debuggingActive&&(xn("Sending debug request for source map"),await Promise.all(e.map((async e=>{if(this.debuggingActive)return this.debugService.activeDebugSession.customRequest("setPydevdSourceMap",UC(e))}))))}enable(e){e.session?.kernel&&Cs(e.session.kernel,this.tracingEnableCode,{traceErrors:!0,traceErrorsMessage:"Execute_request failure enabling tracing code for IW",telemetryName:F.InteractiveWindowDebugSetupCodeFailure}).catch(ae)}disable(e){e.session?.kernel&&Cs(e.session.kernel,this.tracingDisableCode,{traceErrors:!0,traceErrorsMessage:"Execute_request failure disabling tracing code for IW",telemetryName:F.InteractiveWindowDebugSetupCodeFailure}).catch(ae)}async startDebugSession(e,t,n){if(kn("start debugging"),!t.session?.kernel)return;const i=await this.connect(t,n);if(i&&(kn("connected to notebook during debugging"),this.debuggingActive=await e(i),this.debuggingActive)){this.debugService.removeBreakpoints([]);const e=await Cs(t.session.kernel,this.waitForDebugClientCode,{traceErrors:!0,traceErrorsMessage:"Execute_request failure starting debug session for IW",telemetryName:F.InteractiveWindowDebugSetupCodeFailure});e.some((e=>"error"===e.output_type))?Cn(`${this.debuggerPackage} not found in path.`):kn(`import startup: ${Xg(e)}`),await this.disable(t)}}async connect(e,t){const n=e.notebook,i=n;let r=this.configs.get(i);if(r)return{...r,...t};kn("enable debugger attach"),await this.appendDebuggerPaths(e),r={type:"python",name:"IPython",request:"attach",...t};const{host:o,port:s}=await this.connectToLocal(e);if(r.host=o,r.port=s,r.port){this.configs.set(n,r);const t=[],o=()=>{this.configs.delete(i),t.forEach((e=>e.dispose()))};t.push(e.onDisposed(o)),t.push(e.onRestarted(o))}return r}async calculateDebuggerPathList(e){const t=[];let n=this.configService.getSettings(e.resourceUri).debugpyDistPath;if(n&&(this.platform.isWindows&&(n=n.replace(/\\/g,"\\\\")),t.push(n)),ea(e.kernelConnectionMetadata)){let e=await this.getDebuggerPath();this.platform.isWindows&&(e=e.replace(/\\/g,"\\\\")),t.push(e)}if(t&&t.length>0)return t.reduce(((e,t)=>0===e.length?`'${t}'`:`${e}, '${t}'`),"")}getDebuggerPath(){return this.apiProvider.getApi().then((e=>e.getDebuggerPath()))}async appendDebuggerPaths(e){const t=await this.calculateDebuggerPathList(e);t&&t.length>0&&kn(`Appending paths: ${Xg(e.session?.kernel?await Cs(e.session.kernel,`import sys as _VSCODE_sys\r\n_VSCODE_sys.path.extend([${t}])\r\n_VSCODE_sys.path\r\ndel _VSCODE_sys`,{traceErrors:!0,traceErrorsMessage:"Execute_request failure appending debugger paths for IW",telemetryName:F.InteractiveWindowDebugSetupCodeFailure}):[])}`)}async connectToLocal(e){const t=e.session?.kernel?await Cs(e.session.kernel,this.enableDebuggerCode,{traceErrors:!0,traceErrorsMessage:"Execute_request failure enabling debugging for IW",telemetryName:F.InteractiveWindowDebugSetupCodeFailure}):[];if(t.length>0){let e=Xg(t);if(e){e=Pe(e);const t=/\('(.*?)', ([0-9]*)\)/.exec(e);if(t)return{port:parseInt(t[2],10),host:t[1]}}}if(t.length>0&&"error"===t[0].output_type){const n=t[0];throw new FC(this.debuggerPackage,n.ename,e.kernelConnectionMetadata)}throw new FC(gr.jupyterDebuggerOutputParseError(this.debuggerPackage),void 0,e.kernelConnectionMetadata)}};KC=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),qC(0,zn(Oo)),qC(1,zn(ji)),qC(2,zn(Kw)),qC(2,Nc(C.MULTIPLEXING_DEBUGSERVICE)),qC(3,zn(Ma))],KC);class VC{constructor(e,t,n){this.debugAdapter=e,this.debugCell=t,this.execution=n,this._ready=ie(),this.ready=this._ready.promise,io(Tr.successfullyStartedRunAndDebugCell)}trace(e,t){En(`[Debug-IW] ${e}: ${t}`)}async willSendEvent(e){return c_(e)?(this.trace("intercept","debugpyAttach request for subprocess, not supported"),!0):!("output"!==e.event||!a_(e.body.output)||(this.trace("intercept","justMyCode notification"),0))}async willSendRequest(e){const t=YS(this.debugCell);"setBreakpoints"===e.command&&t&&t.generatedCode&&!this.cellDumpInvoked&&(this.debugCellDumped||(this.debugCellDumped=s_(this.execution,this.debugAdapter)),await this.debugCellDumped),"configurationDone"===e.command&&t&&t.generatedCode&&(this.debugCellDumped||(this.debugCellDumped=s_(this.execution,this.debugAdapter)),await this.debugCellDumped,this._ready.resolve())}}class WC extends p_{constructor(){super(...arguments),this._ready=ie(),this.ready=this._ready.promise}resolve(){this._ready.resolve()}}class $C extends m_{constructor(e,t,n,i,r,o,s){super(e,t,n,i,r,o),this.cellToDebugFileSortedInReverseOrderByLineNumber=[],s&&(this.debugLocationTracker=s.createDebugAdapterTracker(e),this.debugLocationTracker.onWillStartSession&&this.debugLocationTracker.onWillStartSession(),this.onDidSendMessage((e=>{this.debugLocationTracker?.onDidSendMessage&&this.debugLocationTracker.onDidSendMessage(e)}),this,this.disposables),this.onDidEndSession((()=>{this.debugLocationTracker?.onWillStopSession&&this.debugLocationTracker.onWillStopSession()}),this,this.disposables))}handleClientMessageAsync(e){return xn(`KernelDebugAdapter::handleMessage ${JSON.stringify(e,void 0," ")}`),"request"===e.type&&this.debugLocationTracker?.onWillReceiveMessage&&this.debugLocationTracker.onWillReceiveMessage(e),"response"===e.type&&this.debugLocationTracker?.onDidSendMessage&&this.debugLocationTracker.onDidSendMessage(e),super.handleClientMessageAsync(e)}async dumpCell(e){const t=this.notebookDocument.cellAt(e),n=YS(t);if(!n)throw new Error("Not an interactive window cell");try{const e=(n.generatedCode?.code||t.document.getText()).replace(/\r\n/g,"\n"),i=await this.session.customRequest("dumpCell",{code:e}),r=Ct(i.sourcePath);this.fileToCell.set(r,Oe.Uri.parse(n.interactive.uristring));let o=0;n.generatedCode&&!n.generatedCode.hasCellMarker&&(o=n.generatedCode.firstNonBlankLineIndex),this.cellToDebugFileSortedInReverseOrderByLineNumber.push({debugFilePath:r,interactiveWindow:Oe.Uri.parse(n.interactive.uristring),metadata:n,lineOffset:o+n.interactive.lineIndex+(n.generatedCode?.lineOffsetRelativeToIndexOfFirstLineInCell||0)}),this.cellToDebugFileSortedInReverseOrderByLineNumber.sort(((e,t)=>t.metadata.interactive.lineIndex-e.metadata.interactive.lineIndex))}catch(e){Sn(`Failed to dump cell for ${t.index} with code ${n.interactive.originalSource}`,e)}}translateDebuggerLocationToRealLocation(e,t){if(!(t=e?.source??t)||!t.path)return;const n=this.cellToDebugFileSortedInReverseOrderByLineNumber.find((e=>e.debugFilePath===t.path));n&&(t.name=It(n.interactiveWindow.path),t.path=n.interactiveWindow.toString(),"number"==typeof e?.endLine&&(e.endLine=e.endLine+(n.lineOffset||0)),"number"==typeof e?.line&&(e.line=e.line+(n.lineOffset||0)))}translateRealLocationToDebuggerLocation(e,t){const n=e.line;if(!(t=e?.source??t)||!t.path||"number"!=typeof n)return;const i=this.cellToDebugFileSortedInReverseOrderByLineNumber.find((e=>n>=e.metadata.interactive.lineIndex+1));i&&i.interactiveWindow.path===t.path&&(t.path=i.debugFilePath,"number"==typeof e?.endLine&&(e.endLine=e.endLine-(i.lineOffset||0)),"number"==typeof e?.line&&(e.line=e.line-(i.lineOffset||0)))}async sendRequestToJupyterSession(e){if("setBreakpoints"===e.command){const t=e.arguments;if(delete t.lines,t.source.path!==this.cellToDebugFileSortedInReverseOrderByLineNumber[0]?.interactiveWindow.path)return super.sendRequestToJupyterSession(e);let n,i=[];const r=[],o=()=>{if(i.length){const t=JSON.parse(JSON.stringify(e));t.arguments.breakpoints=i,r.push(super.sendRequestToJupyterSession(t))}};for(const t of e.arguments.breakpoints??[]){const e=this.cellToDebugFileSortedInReverseOrderByLineNumber.find((e=>t.line>=e.metadata.generatedCode.line&&t.line<=e.metadata.generatedCode.endLine));if(e&&e.metadata.interactive.lineIndex!==n)o(),n=e.metadata.interactive.lineIndex,i=[t];else if(e)i.push(t);else{const e={...t,verified:!0};r.push(Promise.resolve({body:{breakpoints:[e]}}))}}o();const s=await Promise.all(r),a=JSON.parse(JSON.stringify(s[0]));return s.slice(1).forEach((e=>{a.body.breakpoints=a.body.breakpoints.concat(e.body.breakpoints??[])})),a.command="setBreakpoints",a.type="response",a.success=!0,a.request_seq=e.seq,a}return super.sendRequestToJupyterSession(e)}getDumpFilesForDeletion(){return this.cellToDebugFileSortedInReverseOrderByLineNumber.map((e=>e.debugFilePath))}}class BC{constructor(e,t){this.debugCell=e,this.applicationShell=t.get(Jn)}trace(e,t){En(`[Debug-IWRestart] ${e}: ${t}`)}async willSendResponse(e){"initialize"===e.command&&e.body&&(e.body.supportsRestartRequest=!0)}async willSendRequest(e){if("restart"===e.command)return this.trace("restart","Showing warning for unsupported restart request"),this.applicationShell.showWarningMessage(gr.restartNotSupported,{modal:!0}).then(ae,ae),{command:e.command,request_seq:e.seq,seq:e.seq,success:!0,type:"response"}}}var HC=function(e,t){return function(n,i){t(n,i,e)}};let zC=class extends h_{constructor(e,t,n,i,r,o,s,a,c,l){super(e,t,n,i,r,l),this.platform=o,this.debugLocationTrackerFactory=s,this.configService=a,this.debugService=c}activate(){super.activate(),this.disposables.push(Oe.debug.registerDebugAdapterDescriptorFactory(xr,{createDebugAdapterDescriptor:async e=>this.createDebugAdapterDescriptor(e)}))}getDebugMode(e){return Ww.InteractiveWindow}async start(e,t){xn("Starting debugging IW"),await this.checkIpykernelAndPrompt(t)===i_.Ok&&await this.startDebuggingCell(e,t)}async startDebuggingCell(e,t){const n=this.configService.getSettings(e.uri),i={type:xr,name:It(e.uri.toString()),request:"attach",justMyCode:n.debugJustMyCode,__notebookUri:e.uri.toString(),__mode:Ww.InteractiveWindow,__cellIndex:t.index};await this.startDebuggingConfig(i,{suppressSaveBeforeStart:!0});const r=this.notebookToDebugger.get(e);r?await r.ready:Sn("Debugger not found, could not start debugging.")}async createDebugAdapterDescriptor(e){const t=e.configuration;!function(e){if(r_(e),e.__mode!==Ww.InteractiveWindow)throw new Error("Invalid launch configuration")}(t);const n=this.vscNotebook.notebookDocuments.find((e=>e.uri.toString()===t.__notebookUri));if(!n||"number"!=typeof t.__cellIndex)return void Sn("Invalid debug session for debugging of IW using Jupyter Protocol");if(this.notebookInProgress.has(n))return void kn("Cannot start debugging. Already debugging this notebook");if(this.isDebugging(n))return void kn("Cannot start debugging. Already debugging this notebook document. Toolbar should update");const i=new WC(n,t,e);this.notebookToDebugger.set(n,i);try{return this.notebookInProgress.add(n),await this.doCreateDebugAdapterDescriptor(t,e,n,i)}finally{this.notebookInProgress.delete(n)}}async doCreateDebugAdapterDescriptor(e,t,n,i){const r=await this.ensureKernelIsRunning(n);if(!r?.session)return void this.appShell.showInformationMessage(gr.kernelWasNotStarted).then(ae,ae);const o=new $C(t,n,r.session,r,this.platform,this.debugService,this.debugLocationTrackerFactory);this.disposables.push(o.onDidEndSession(this.endSession.bind(this)));const s=n.cellAt(e.__cellIndex),a=new VC(o,s,this.kernelProvider.getKernelExecution(r));return o.addDebuggingDelegates([a,new BC(s,this.serviceContainer)]),a.ready.then((()=>i.resolve())).catch((e=>console.error("Failed waiting for controller to be ready",e))),this.trackDebugAdapter(n,o),new Oe.DebugAdapterInlineImplementation(o)}async updateSourceMaps(e,t){let n=this.getDebugSession(e.notebook);n&&(xn("Sending debug request for source map"),await Promise.all(t.map((async e=>{if(n)return n.customRequest("setPydevdSourceMap",UC(e))}))))}};zC=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),HC(0,zn(na)),HC(1,zn(Ks)),HC(2,zn(Gn)),HC(3,zn(Jn)),HC(4,zn(oi)),HC(5,zn(Ma)),HC(6,zn($w)),HC(7,zn(ji)),HC(8,zn(Zn)),HC(9,zn(ya))],zC);var JC=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},GC=function(e,t){return function(n,i){t(n,i,e)}};const YC="InteractiveShiftEnterBanner";var QC,XC;!function(e){e.ShowBanner="InteractiveShiftEnterBanner"}(QC||(QC={})),function(e){e[e.Yes=0]="Yes",e[e.No=1]="No"}(XC||(XC={}));let ZC=class{constructor(e,t,n){this.appShell=e,this.persistentState=t,this.configuration=n,this.disabledInCurrentSession=!1,this.bannerMessage=hr.bannerMessage,this.bannerLabels=[lr.bannerLabelYes,lr.bannerLabelNo],this.initialize()}initialize(){this.initialized||(this.initialized=!0,this.isEnabled())}isEnabled(){return this.persistentState.createGlobalPersistentState(QC.ShowBanner,!0).value}async showBanner(){if(this.isEnabled()&&await this.shouldShowBanner())switch(io(F.ShiftEnterBannerShown),await this.appShell.showInformationMessage(this.bannerMessage,...this.bannerLabels)){case this.bannerLabels[XC.Yes]:await this.enableInteractiveShiftEnter();break;case this.bannerLabels[XC.No]:await this.disableInteractiveShiftEnter();break;default:this.disabledInCurrentSession=!0}}async shouldShowBanner(){const e=this.configuration.getSettings();return Promise.resolve(this.isEnabled()&&!this.disabledInCurrentSession&&!e.sendSelectionToInteractiveWindow)}async disableInteractiveShiftEnter(){await this.configuration.updateSetting("interactiveWindow.textEditor.executeSelection",!1,void 0,Oe.ConfigurationTarget.Global),await this.disableBanner()}async enableInteractiveShiftEnter(){await this.configuration.updateSetting("interactiveWindow.textEditor.executeSelection",!0,void 0,Oe.ConfigurationTarget.Global),await this.disableBanner()}async disableBanner(){await this.persistentState.createGlobalPersistentState(QC.ShowBanner,!1).updateValue(!1)}};JC([so(F.DisableInteractiveShiftEnter)],ZC.prototype,"disableInteractiveShiftEnter",null),JC([so(F.EnableInteractiveShiftEnter)],ZC.prototype,"enableInteractiveShiftEnter",null),ZC=JC([Kn(),GC(0,zn(Jn)),GC(1,zn(Li)),GC(2,zn(ji))],ZC);var ek=function(e,t){return function(n,i){t(n,i,e)}};let tk=class{constructor(e,t,n,i,r){this.configService=e,this.fs=t,this.context=n,this.isWebExtension=i,this.registry=r,this.priority=5}activate(){this.registry.register(this,d)}async getCode(e){if(!fs(e.kernelConnectionMetadata))return[];if(!this.isWebExtension){if(!0===this.configService.getSettings(void 0).forceIPyKernelDebugger)return[];if(!ea(e.kernelConnectionMetadata))return[]}return e.notebook?.notebookType===d&&ea(e.kernelConnectionMetadata)?(this.addRunCellHookContents||(this.addRunCellHookContents=this.fs.readFile(Oe.Uri.joinPath(this.context.extensionUri,"pythonFiles","vscode_datascience_helpers","kernel","addRunCellHook.py"))),Ee(await this.addRunCellHookContents,{trim:!1})):[]}};tk=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),ek(0,zn(ji)),ek(1,zn(La)),ek(2,zn(Ui)),ek(3,zn(Pi)),ek(4,zn(ua))],tk);var nk=function(e,t){return function(n,i){t(n,i,e)}};let ik=class{constructor(e,t,n){this.dataScienceCodeLensProvider=e,this.extensionContext=t,this.configurationService=n}activate(){this.configurationService.getSettings().pythonCellFolding&&this.extensionContext.subscriptions.push(Oe.languages.registerFoldingRangeProvider([s],this))}provideFoldingRanges(e,t,n){if([o,c].includes(e.uri.scheme))return;const i=this.dataScienceCodeLensProvider.getCodeWatcher(e);if(i){const e=i.getCodeLenses();if(n.isCancellationRequested||0==e.length)return;return e.map((e=>new Oe.FoldingRange(e.range.start.line,e.range.end.line,Oe.FoldingRangeKind.Region)))}}};ik=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),nk(0,zn(SS)),nk(1,zn(Ui)),nk(2,zn(ji))],ik);var rk=function(e,t){return function(n,i){t(n,i,e)}};let ok=class{constructor(e,t){this.dataScienceCodeLensProvider=e,this.extensionContext=t}activate(){this.extensionContext.subscriptions.push(Oe.languages.registerCodeLensProvider([s],this.dataScienceCodeLensProvider))}};ok=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),rk(0,zn(SS)),rk(1,zn(Ui))],ok);var sk=function(e,t){return function(n,i){t(n,i,e)}};const ak="LastInteractiveKernelSelected";let ck=class{constructor(e,t,n,i,r){this.controllerRegistration=e,this.interpreterService=t,this.disposables=n,this.workspaceMemento=i,this.serviceContainer=r,this.onControllerSelected=this.controllerRegistration.onControllerSelected}async getInitialController(e,t){if(t){const e=this.controllerRegistration.get(t,d);if(e)return e}if(this.workspaceMemento.get(ak)){const e=this.workspaceMemento.get(ak),t=e?this.controllerRegistration.get(e,d):void 0;if(t)return t}if(this.interpreterService)return await async function(e,t,n,i){const r=await n.getActiveInterpreter(t);if(r){const n=await is(r),o=Zs.create({kernelSpec:n,interpreter:r,id:cs(n,r)}),s=i.addOrUpdate(o,[e]),a=s[0];return i.trackActiveInterpreterControllers(s),xn(`Active Interpreter Controller ${a.connection.kind}:${a.id} created for View ${e} with resource ${pn(t)}`),a}}(d,e,this.interpreterService,this.controllerRegistration)}getSelectedController(e){return this.controllerRegistration.getSelected(e)}getRegisteredController(e){return this.controllerRegistration.get(e,"interactive")}async createKernel(e,t,n,i,r){await If(n,e);const o=await Yb.connectToNotebookKernel(e,this.serviceContainer,{resource:n||i.uri,notebook:i,controller:t},new hh(!1),r,"jupyterExtension",((e,t)=>{"start"!==e&&"restart"!==e||xn(`(onStart) Looking for controller ${t.controller.id} in ${this.controllerRegistration.all.map((e=>`${e.kind}:${e.id}`)).join(", ")}`)})),s=this.controllerRegistration.registered.find((e=>e.id===o.controller.id));if(!s)throw Error(`Controller ${o.controller.id} not found or not yet created`);const a=s.controller;return this.interpreterService&&async function(e,t,n){const i=await n.getActiveInterpreter(t);return i?.id===e.interpreter?.id}(o.kernelConnectionMetadata,n,this.interpreterService).then((async e=>{await this.workspaceMemento.update(ak,e?void 0:o.kernelConnectionMetadata)})).catch((e=>{Cn("Failed to store kernel connection metadata",e)})),{kernel:o,actualController:a}}};ck=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),sk(0,zn(Ks)),sk(1,zn(ka)),sk(1,Qi()),sk(2,zn(Ri)),sk(3,zn(Oi)),sk(3,Nc(Ni)),sk(4,zn(ya))],ck);var lk=function(e,t){return function(n,i){t(n,i,e)}};let dk=class{constructor(e,t,n,i){this.configService=e,this.fs=t,this.workspace=n,this.registry=i,this.priority=0}activate(){this.registry.register(this,d)}async getCode(e){const t=await this.getWorkingDirectory(e);return t?Ee(De(k.UpdateCWDAndPath,un(t)),{trim:!1}):[]}async getWorkingDirectory(e){if(!ea(e.kernelConnectionMetadata)&&!Ss(e.kernelConnectionMetadata))return;if(!fs(e.kernelConnectionMetadata))return;const t=e.resourceUri?.path.endsWith(".interactive")&&this.workspace.rootFolder?Oe.Uri.joinPath(this.workspace.rootFolder,e.resourceUri.path):e.resourceUri;let n=await this.calculateWorkingDirectory(e.resourceUri);return n&&await this.fs.exists(n)||e.resourceUri&&"untitled"!==e.resourceUri.scheme&&await this.fs.exists(e.resourceUri)&&(n=Oe.Uri.file(ao(un(n),t,this.workspace,this.configService.getSettings(t))),n&&await this.fs.exists(n))?n:void 0}async calculateWorkingDirectory(e){let t;const n=this.configService.getSettings(e),i=dl(n.notebookFileRoot);if(i&&this.workspace.hasWorkspaceFolders){const e=Oe.Uri.file(i),n=this.workspace.workspaceFolders[0].uri;if(kt(i))t=await this.fs.exists(e)?e:n;else if(i.includes("${"))t=e;else{const e=Oe.Uri.joinPath(n,i);t=await this.fs.exists(e)?e:n}}return t}};dk=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),lk(0,zn(ji)),lk(1,zn(La)),lk(2,zn(Qn)),lk(3,zn(ua))],dk);var uk=function(e,t){return function(n,i){t(n,i,e)}};let pk=class{constructor(e,t,n,i,r){this.jupyterServerHelper=e,this.configService=t,this.fileSystem=n,this.applicationShell=i,this.errorHandler=r,this.pruneCells=(e,t)=>e.map((e=>this.pruneCell(e,t))),this.pruneCell=(e,t)=>{const n=function(e){const t={...e,source:ic(e.source)};if("code"!==t.cell_type)delete t.outputs,delete t.execution_count;else if(t.cell_type){const e=t;e.outputs=e.outputs?e.outputs.map(Qa):[]}return t}({...e.data});return n.source=this.pruneSource(e.data.source,t),n},this.pruneSource=(e,t)=>{if(Array.isArray(e)&&e.length>0){if(t.isCell(e[0]))return e.slice(1)}else{const n=e.toString().split("\n").map((e=>`${e}\n`));if(n.length>0&&t.isCell(n[0]))return n.slice(1)}return e},this.extractPythonMainVersion=async()=>{if(!this.jupyterServerHelper)return 3;const e=await this.jupyterServerHelper.getUsableJupyterPython();return e&&e.version?e.version.major:3}}dispose(){}async exportToFile(e,t,n=!0){const i=await this.translateToNotebook(e);try{const e=JSON.stringify(i,void 0,1);if(await this.fileSystem.writeFile(Oe.Uri.file(t),e),!n)return;const r=gr.exportOpenQuestion1;this.applicationShell.showInformationMessage(gr.exportDialogComplete(t),r).then((async e=>{try{e===r&&await RS(Oe.Uri.file(t))}catch(e){await this.errorHandler.handleError(e)}}),ae)}catch(e){Sn("Error in exporting notebook file"),this.applicationShell.showInformationMessage(gr.exportDialogFailed(e)).then(ae,ae)}}async translateToNotebook(e,t){const n=await this.extractPythonMainVersion(),i={language_info:{codemirror_mode:{name:"ipython",version:n},file_extension:".py",mimetype:"text/x-python",name:"python",nbconvert_exporter:"python",pygments_lexer:`ipython${n}`,version:n},kernelspec:t},r=new OS(this.configService.getSettings());return{cells:this.pruneCells(e,r),nbformat:4,nbformat_minor:2,metadata:i}}};pk=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),uk(0,zn(ci)),uk(0,Qi()),uk(1,zn(ji)),uk(2,zn(La)),uk(3,zn(Jn)),uk(4,zn(bo))],pk);var hk=function(e,t){return function(n,i){t(n,i,e)}};let fk=class{constructor(e,t,n,i,r){this.fs=e,this.disposableRegistry=t,this.configuration=n,this.nbConvertDependencyChecker=i,this.exportToPythonService=r,this.isDisposed=!1,this.nbconvertBaseTemplateFormat="{%- extends '{0}' -%}\n{% block codecell %}\n{1}\n{{ super() }}\n{% endblock codecell %}\n{% block in_prompt %}{% endblock in_prompt %}\n{% block input %}{{ cell.source | ipython2python }}{% endblock input %}\n{% block markdowncell scoped %}{1} [markdown]\n{{ cell.source | comment_lines }}\n{% endblock markdowncell %}",this.nbconvert5Null="null.tpl",this.nbconvert6Null="base/null.j2",this.dispose=()=>{this.isDisposed=!0},this.addInstructionComments=e=>gr.instructionComments(this.defaultCellMarker).concat(e),this.addIPythonImport=e=>De(k.ImportIPython,this.defaultCellMarker,e)}async importFromFile(e,t){const n=await this.nbConvertDependencyChecker.getNbConvertVersion(t);if(n){let i;n.major>=6?(this.template6Promise||(this.template6Promise=this.createTemplateFile(!0)),i=await this.template6Promise):(this.template5Promise||(this.template5Promise=this.createTemplateFile(!1)),i=await this.template5Promise);let r=await this.exportToPythonService.exportNotebookToPython(e,t,i);return r.includes("get_ipython()")&&(r=this.addIPythonImport(r)),this.addInstructionComments(r)}throw new Error(gr.jupyterNbConvertNotSupported)}get defaultCellMarker(){return this.configuration.getSettings().defaultCellMarker||C.DefaultCodeCellMarker}async createTemplateFile(e){const t=await this.fs.createTemporaryLocalFile(".tpl");if(t)try{return this.disposableRegistry.push(t),await this.fs.writeFile(Oe.Uri.file(t.filePath),De(this.nbconvertBaseTemplateFormat,e?this.nbconvert6Null:this.nbconvert5Null,this.defaultCellMarker)),t.filePath}catch{}}};fk=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),hk(0,zn(Nu)),hk(1,zn(Ri)),hk(2,zn(ji)),hk(3,zn(hi)),hk(4,zn(fi))],fk);class mk{constructor(e,t,n,i,r,o,s,a,c){this.commandManager=e,this.fileConverter=t,this.applicationShell=n,this.fs=i,this.notebooks=r,this.interactiveProvider=o,this.controllerRegistration=s,this.preferredKernel=a,this.kernelFinder=c,this.disposables=[]}register(){this.registerCommand(N.ExportAsPythonScript,((e,t)=>this.export(e,T_.python,void 0,t))),this.registerCommand(N.ExportToHTML,((e,t,n)=>this.export(e,T_.html,t,n))),this.registerCommand(N.ExportToPDF,((e,t,n)=>this.export(e,T_.pdf,t,n))),this.registerCommand(N.Export,((e,t,n)=>this.export(e,void 0,t,n))),this.registerCommand(N.NativeNotebookExport,(e=>this.nativeNotebookExport(e)))}dispose(){this.disposables.forEach((e=>e.dispose()))}registerCommand(e,t){const n=this.commandManager.registerCommand(e,t,this);this.disposables.push(n)}async nativeNotebookExport(e){const t=de(e)?e:e?.notebookEditor?.notebookUri,n=t?this.notebooks.notebookDocuments.find((e=>this.fs.arePathsSame(e.uri,t))):this.notebooks.activeNotebookEditor?.notebook;if(n){let e;const t=this.kernelFinder.registered.find((e=>e.kind===jm.LocalPythonEnvironment)),i=new Oe.CancellationTokenSource;try{e=t?await this.preferredKernel.findPreferredLocalKernelSpecConnection(n,t,i.token).then((e=>e?.interpreter)):void 0}finally{i.dispose()}const r=this.controllerRegistration.getSelected(n)?.connection.interpreter||e;return this.export(n,void 0,void 0,r)}return this.export(void 0,void 0,void 0,void 0)}async export(e,t,n,i){if(!e){if(!(e=this.notebooks.activeNotebookEditor?.notebook||this.interactiveProvider?.getActiveOrAssociatedInteractiveWindow()?.notebookDocument))return void kn("Export called without a valid exportable document active");i=i||this.controllerRegistration.getSelected(e)?.connection.interpreter,t&&io(F.ExportNotebookAsCommand,void 0,{format:t})}if(t)await this.fileConverter.export(t,e,n,i);else{const t=await this.showExportQuickPickMenu(e,n,i).then((e=>e));void 0!==t?t.handler():io(F.ClickedExportNotebookAsQuickPick)}}getExportQuickPickItems(e,t,n){const i=[];return(n||e.metadata&&rs(ec(e)))&&i.push({label:gr.exportPythonQuickPickLabel,picked:!0,handler:()=>{io(F.ClickedExportNotebookAsQuickPick,void 0,{format:T_.python}),this.commandManager.executeCommand(N.ExportAsPythonScript,e,n).then(ae,ae)}}),i.push({label:gr.exportHTMLQuickPickLabel,picked:!1,handler:()=>{io(F.ClickedExportNotebookAsQuickPick,void 0,{format:T_.html}),this.commandManager.executeCommand(N.ExportToHTML,e,t,n).then(ae,ae)}},{label:gr.exportPDFQuickPickLabel,picked:!1,handler:()=>{io(F.ClickedExportNotebookAsQuickPick,void 0,{format:T_.pdf}),this.commandManager.executeCommand(N.ExportToPDF,e,t,n).then(ae,ae)}}),i}async showExportQuickPickMenu(e,t,n){const i=this.getExportQuickPickItems(e,t,n),r={ignoreFocusOut:!1,matchOnDescription:!0,matchOnDetail:!0,placeHolder:gr.exportAsQuickPickPlaceholder};return this.applicationShell.showQuickPick(i,r)}}var gk=function(e,t){return function(n,i){t(n,i,e)}};let vk=class{constructor(e,t,n,i,r,o,s,a,c,l,d){this.disposables=e,this.workspace=t,this.commandManager=n,this.fileConverter=i,this.applicationShell=r,this.fs=o,this.notebooks=s,this.interactiveProvider=a,this.controllerSelection=c,this.kernelFinder=l,this.jupyterConnection=d,this.exportCommand=new mk(this.commandManager,this.fileConverter,this.applicationShell,this.fs,this.notebooks,this.interactiveProvider,c,new Cw(d),l),this.workspace.isTrusted||this.workspace.onDidGrantWorkspaceTrust(this.registerCommandsIfTrusted,this,this.disposables)}activate(){this.registerCommandsIfTrusted()}registerCommandsIfTrusted(){this.workspace.isTrusted&&this.exportCommand?.register()}};vk=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),gk(0,zn(Ri)),gk(1,zn(Qn)),gk(2,zn(Gn)),gk(3,zn(P_)),gk(4,zn(Jn)),gk(5,zn(La)),gk(6,zn(oi)),gk(7,zn(PS)),gk(7,Qi()),gk(8,zn(Ks)),gk(9,zn(la)),gk(10,zn(xs))],vk);var yk=function(e,t){return function(n,i){t(n,i,e)}};const bk="JVSC_NEVER_PROMPT_EXTENSIONS_LIST",wk=new Map([["ms-dotnettools.dotnet-interactive-vscode",{displayName:".NET Interactive Notebooks Preview",extensionLink:"https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.dotnet-interactive-vscode"}]]),_k=new Map([["c#","ms-dotnettools.dotnet-interactive-vscode"],["csharp","ms-dotnettools.dotnet-interactive-vscode"],["f#","ms-dotnettools.dotnet-interactive-vscode"],["fsharp","ms-dotnettools.dotnet-interactive-vscode"],["powershell","ms-dotnettools.dotnet-interactive-vscode"]]);let Sk=class{constructor(e,t,n,i,r,o,s){this.notebook=e,this.controllerManager=t,this.globalMemento=i,this.appShell=r,this.extensions=o,this.commandManager=s,this.disposables=[],this.recommendedInSession=new Set,n.push(this)}dispose(){Ie(this.disposables)}activate(){this.notebook.onDidOpenNotebookDocument(this.onDidOpenNotebookDocument,this,this.disposables),this.controllerManager.onControllerSelected(this.onNotebookControllerSelected,this,this.disposables)}onDidOpenNotebookDocument(e){if(!Za(e))return;const t=vs(ec(e));t&&this.recommendExtensionForLanguage(t).catch(ae)}onNotebookControllerSelected({controller:e}){if("startUsingLocalKernelSpec"!==e.connection.kind&&"startUsingRemoteKernelSpec"!==e.connection.kind)return;if(fs(e.connection))return;const t=gs(e.connection);t&&this.recommendExtensionForLanguage(t).catch(ae)}async recommendExtensionForLanguage(e){const t=_k.get(e.toLowerCase());if(!t||this.extensions.getExtension(t))return;const n=wk.get(t);if(!n)return;if(this.globalMemento.get(bk,[]).includes(t)||this.recommendedInSession.has(t))return;this.recommendedInSession.add(t);const i=gr.recommendExtensionForNotebookLanguage(`[${n.displayName}](${n.extensionLink})`,e);switch(io(F.RecommendExtension,void 0,{extensionId:t,action:"displayed"}),await this.appShell.showInformationMessage(i,lr.bannerLabelYes,lr.bannerLabelNo,lr.doNotShowAgain)){case lr.bannerLabelYes:io(F.RecommendExtension,void 0,{extensionId:t,action:"ok"}),this.commandManager.executeCommand("extension.open",t).then(ae,ae);break;case lr.bannerLabelNo:io(F.RecommendExtension,void 0,{extensionId:t,action:"cancel"});break;case lr.doNotShowAgain:{io(F.RecommendExtension,void 0,{extensionId:t,action:"doNotShowAgain"});const e=this.globalMemento.get(bk,[]);e.includes(t)||(e.push(t),await this.globalMemento.update(bk,e));break}default:io(F.RecommendExtension,void 0,{extensionId:t,action:"dismissed"})}}};Sk=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),yk(0,zn(oi)),yk(1,zn(Ks)),yk(2,zn(Ri)),yk(3,zn(Oi)),yk(3,Nc(Ai)),yk(4,zn(Jn)),yk(5,zn(qi)),yk(6,zn(Gn))],Sk);var Ck=function(e,t){return function(n,i){t(n,i,e)}};let kk=class{constructor(e,t,n,i,r,o,s,a){this.interactiveProvider=e,this.docManager=t,this.commandManager=n,this.vscNotebook=r,this.kernelProvider=o,this.controllers=s,this.jupyterUriProviderRegistration=a,this.disposables=[],this.isPythonFileActive=!1,i.push(this),this.nativeContext=new n_(L.IsNativeActive,this.commandManager),this.canRestartNotebookKernelContext=new n_(L.CanRestartNotebookKernel,this.commandManager),this.canInterruptNotebookKernelContext=new n_(L.CanInterruptNotebookKernel,this.commandManager),this.canRestartInteractiveWindowKernelContext=new n_(L.CanRestartInteractiveWindowKernel,this.commandManager),this.canInterruptInteractiveWindowKernelContext=new n_(L.CanInterruptInteractiveWindowKernel,this.commandManager),this.interactiveContext=new n_(L.IsInteractiveActive,this.commandManager),this.interactiveOrNativeContext=new n_(L.IsInteractiveOrNativeActive,this.commandManager),this.pythonOrNativeContext=new n_(L.IsPythonOrNativeActive,this.commandManager),this.pythonOrInteractiveContext=new n_(L.IsPythonOrInteractiveActive,this.commandManager),this.pythonOrInteractiveOrNativeContext=new n_(L.IsPythonOrInteractiveOrNativeActive,this.commandManager),this.hasNativeNotebookCells=new n_(L.HaveNativeCells,this.commandManager),this.isPythonNotebook=new n_(L.IsPythonNotebook,this.commandManager),this.isJupyterKernelSelected=new n_(L.IsJupyterKernelSelected,this.commandManager),this.hasNativeNotebookOrInteractiveWindowOpen=new n_(L.HasNativeNotebookOrInteractiveWindowOpen,this.commandManager),this.kernelSourceContext=new n_(L.KernelSource,this.commandManager)}dispose(){this.disposables.forEach((e=>e.dispose()))}activate(){this.docManager.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor,this,this.disposables),this.kernelProvider.onKernelStatusChanged(this.onDidKernelStatusChange,this,this.disposables),this.interactiveProvider&&(this.interactiveProvider.onDidChangeActiveInteractiveWindow(this.onDidChangeActiveInteractiveWindow,this,this.disposables),this.interactiveProvider.activeWindow&&this.onDidChangeActiveInteractiveWindow()),this.vscNotebook.activeNotebookEditor&&this.onDidChangeActiveNotebookEditor(this.vscNotebook.activeNotebookEditor),this.vscNotebook.onDidChangeActiveNotebookEditor(this.onDidChangeActiveNotebookEditor,this,this.disposables),this.docManager.activeTextEditor?.document.languageId===i&&this.onDidChangeActiveTextEditor(this.docManager.activeTextEditor),this.vscNotebook.onDidChangeNotebookEditorSelection(this.updateNativeNotebookInteractiveWindowOpenContext,this,this.disposables),this.vscNotebook.onDidOpenNotebookDocument(this.updateNativeNotebookInteractiveWindowOpenContext,this,this.disposables),this.vscNotebook.onDidCloseNotebookDocument(this.updateNativeNotebookInteractiveWindowOpenContext,this,this.disposables),this.controllers.onControllerSelectionChanged((()=>this.updateSelectedKernelContext()),this,this.disposables),this.updateSelectedKernelContext()}updateNativeNotebookCellContext(){const e=(this.vscNotebook.activeNotebookEditor?.notebook.cellCount||0)>0;this.hasNativeNotebookCells.set(e).catch(ae)}onDidChangeActiveInteractiveWindow(e){this.interactiveContext.set(!!e).catch(ae),this.updateNativeNotebookInteractiveWindowOpenContext(),this.updateMergedContexts(),this.updateContextOfActiveInteractiveWindowKernel()}onDidChangeActiveNotebookEditor(e){const t=!!e&&e.notebook.notebookType===l;this.nativeContext.set(t).catch(ae),this.isPythonNotebook.set(!(!e||!t)&&rs(ec(e.notebook))).catch(ae),this.updateContextOfActiveNotebookKernel(e),this.updateContextOfActiveInteractiveWindowKernel(),this.updateNativeNotebookInteractiveWindowOpenContext(),this.updateNativeNotebookCellContext(),this.updateMergedContexts()}updateNativeNotebookInteractiveWindowOpenContext(){this.hasNativeNotebookOrInteractiveWindowOpen.set(this.vscNotebook.notebookDocuments.some((e=>e.notebookType===l||e.notebookType===d))).catch(ae)}updateContextOfActiveNotebookKernel(e){const t=e&&e.notebook.notebookType===l?this.kernelProvider.get(e.notebook):void 0;if(t){const e="unknown"!==t.status;this.canRestartNotebookKernelContext.set(!!e).catch(ae);const n="busy"===t.status;this.canInterruptNotebookKernelContext.set(!!n).catch(ae)}else this.canRestartNotebookKernelContext.set(!1).catch(ae),this.canInterruptNotebookKernelContext.set(!1).catch(ae);this.updateKernelSourceContext(t).catch(ae),this.updateSelectedKernelContext()}async updateKernelSourceContext(e){if(!e||!ta(e.kernelConnectionMetadata))return void this.kernelSourceContext.set("").catch(ae);const t=e.kernelConnectionMetadata,n=await this.jupyterUriProviderRegistration.getProvider(t.serverProviderHandle.extensionId,t.serverProviderHandle.id).catch(ae);n?this.kernelSourceContext.set(n.id).catch(ae):this.kernelSourceContext.set("").catch(ae)}updateSelectedKernelContext(){const e=this.vscNotebook.activeNotebookEditor?.notebook||this.interactiveProvider?.getActiveOrAssociatedInteractiveWindow()?.notebookDocument;e&&Za(e)&&this.controllers.getSelected(e)?this.isJupyterKernelSelected.set(!0).catch(ae):this.isJupyterKernelSelected.set(!1).catch(ae)}updateContextOfActiveInteractiveWindowKernel(){const e=this.interactiveProvider?.getActiveOrAssociatedInteractiveWindow()?.notebookDocument,t=e?this.kernelProvider.get(e):void 0;if(t){const e="unknown"!==t.status;this.canRestartInteractiveWindowKernelContext.set(!!e).catch(ae);const n="busy"===t.status;this.canInterruptInteractiveWindowKernelContext.set(!!n).catch(ae)}else this.canRestartInteractiveWindowKernelContext.set(!1).catch(ae),this.canInterruptInteractiveWindowKernelContext.set(!1).catch(ae);this.updateSelectedKernelContext()}onDidKernelStatusChange({kernel:e}){const t=e.notebook;t.notebookType===d?this.updateContextOfActiveInteractiveWindowKernel():t.notebookType===l&&t===this.vscNotebook.activeNotebookEditor?.notebook&&this.updateContextOfActiveNotebookKernel(this.vscNotebook.activeNotebookEditor)}onDidChangeActiveTextEditor(e){this.isPythonFileActive=e?.document.languageId===i&&!ue(e.document.uri),this.updateNativeNotebookCellContext(),this.updateMergedContexts(),this.updateContextOfActiveInteractiveWindowKernel()}updateMergedContexts(){this.interactiveOrNativeContext.set(!0===this.nativeContext.value||!0===this.interactiveContext.value).catch(ae),this.pythonOrNativeContext.set(!0===this.nativeContext.value||!0===this.isPythonFileActive).catch(ae),this.pythonOrInteractiveContext.set(!0===this.interactiveContext.value||!0===this.isPythonFileActive).catch(ae),this.pythonOrInteractiveOrNativeContext.set(!0===this.nativeContext.value||!0===this.interactiveContext.value&&!0===this.isPythonFileActive).catch(ae)}};kk=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Ck(0,zn(PS)),Ck(0,Qi()),Ck(1,zn(Yn)),Ck(2,zn(Gn)),Ck(3,zn(Ri)),Ck(4,zn(oi)),Ck(5,zn(na)),Ck(6,zn(Ks)),Ck(7,zn(gi))],kk);var Ek=function(e,t){return function(n,i){t(n,i,e)}};const xk=/^\s*(from (?<fromImport>\w+)(?:\.\w+)* import \w+(?:, \w+)*(?: as \w+)?|import (?<importImport>\w+(?:, \w+)*)(?: as \w+)?)$/,Tk=w(),Pk=Symbol("IImportTracker");let Ik=class{get isTelemetryDisabled(){return Qr(this.workspace)}constructor(e,t,n){this.vscNotebook=e,this.workspace=n,this.pendingChecks=new of,this.disposables=[],this.sentMatches=new Set,t.push(this),this.vscNotebook.onDidOpenNotebookDocument((e=>this.onOpenedOrClosedNotebookDocument(e,"onOpenCloseOrSave")),this.disposables),this.vscNotebook.onDidCloseNotebookDocument((e=>this.onOpenedOrClosedNotebookDocument(e,"onOpenCloseOrSave")),this.disposables),this.vscNotebook.onDidSaveNotebookDocument((e=>this.onOpenedOrClosedNotebookDocument(e,"onOpenCloseOrSave")),this.disposables),this.vscNotebook.onDidChangeNotebookCellExecutionState((e=>{e.state!=Oe.NotebookCellExecutionState.Pending||this.isTelemetryDisabled||this.checkNotebookCell(e.cell,"onExecution").catch(ae)}),this,t)}dispose(){Ie(this.disposables),this.pendingChecks.clear()}activate(){this.vscNotebook.notebookDocuments.forEach((e=>this.checkNotebookDocument(e,"onOpenCloseOrSave")))}getDocumentLines(e){const t=[];for(let n=0;n<Math.min(1e3,e.lineCount);n++){const i=e.lineAt(n);i.isEmptyOrWhitespace||t.push(i.text.trim())}return t}onOpenedOrClosedNotebookDocument(e,t){Za(e)&&!this.isTelemetryDisabled&&this.scheduleCheck(e.uri,this.checkNotebookDocument.bind(this,e,t))}scheduleCheck(e,t){const n=this.pendingChecks.get(e);n&&(clearTimeout(n),this.pendingChecks.delete(e)),Tk?t():this.pendingChecks.set(e,setTimeout(t,5e3))}async checkNotebookDocument(e,t){Za(e)&&!this.isTelemetryDisabled&&await Promise.all(e.getCells().map((async e=>this.checkNotebookCell(e,t))))}async checkNotebookCell(e,t){if(Za(e.notebook)&&e.kind===Oe.NotebookCellKind.Code&&e.document.languageId===i)try{const n=e.notebook.notebookType===l?"notebook":"interactive";await this.sendTelemetryForImports(this.getDocumentLines(e.document),n,t)}catch(e){if(!y)throw e}}lookForImports(e){const t=[];try{for(const n of e){if(!n.includes("import")&&!n.includes("from"))continue;const e=n?xk.exec(n):null;null!==e&&void 0!==e.groups&&(void 0!==e.groups.fromImport?t.push(e.groups.fromImport):void 0!==e.groups.importImport&&t.push(...e.groups.importImport.split(",").map((e=>e.trim()))))}}catch(e){}return t}async sendTelemetryForImports(e,t,n){await Promise.all(this.lookForImports(e).map((async e=>{const i=`${e}_${t||""}_${n}`;if(this.sentMatches.has(i))return;this.sentMatches.add(i);const r=await jr(e);io(_r.HASHED_PACKAGE_NAME,void 0,{hashedNamev2:r,resourceType:t,when:n})})))}};Ik=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Ek(0,zn(oi)),Ek(1,zn(Ri)),Ek(2,zn(Qn))],Ik);var Dk=function(e,t){return function(n,i){t(n,i,e)}};let Rk=class{constructor(e,t,n,i,r,o){this.commandManager=e,this.disposableRegistry=t,this.configuration=n,this.documentManager=i,this.rawSupported=r,this.commandListeners=o,this.isDisposed=!1,this.startTime=Date.now(),this.onSettingsChanged=()=>{const e=this.configuration.getSettings(void 0).sendSelectionToInteractiveWindow;new n_(L.OwnsSelection,this.commandManager).set(e).catch(ae)}}get activationStartTime(){return this.startTime}activate(){this.onSettingsChanged(),this.changeHandler=this.configuration.getSettings(void 0).onDidChange(this.onSettingsChanged.bind(this)),this.disposableRegistry.push(this),this.disposableRegistry.push(this.documentManager.onDidChangeActiveTextEditor((()=>this.onChangedActiveTextEditor()))),this.onChangedActiveTextEditor(),this.computeZmqAvailable(),this.commandListeners&&this.commandListeners.forEach((e=>e.register(this.commandManager)))}async dispose(){this.changeHandler&&(this.changeHandler.dispose(),this.changeHandler=void 0)}computeZmqAvailable(){new n_(L.ZmqAvailable,this.commandManager).set(!!this.rawSupported&&this.rawSupported.isSupported).then(ae,ae)}onChangedActiveTextEditor(){const e=new n_(L.HasCodeCells,this.commandManager),t=this.documentManager.activeTextEditor;t&&t.document.languageId===i?e.set(function(e,t){const n=new OS(t);for(let t=0;t<e.lineCount;t+=1){const i=e.lineAt(t);if(n.isCell(i.text))return!0}return!1}(t.document,this.configuration.getSettings())).catch(ae):e.set(!1).catch(ae)}};Rk=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Dk(0,zn(Gn)),Dk(1,zn(Ri)),Dk(2,zn(ji)),Dk(3,zn(Yn)),Dk(4,zn(Zp)),Dk(4,Qi()),Dk(5,Ug(Ji))],Rk);class Ok extends km{get possibleKernelConnection(){return this.kernel.session?.kernel===this._kernelConnection?this._kernelConnection:(this.stopHandlingKernelMessages(this._kernelConnection),this.kernel.session?.kernel?(this.startHandleKernelMessages(this.kernel.session.kernel),this._kernelConnection):void 0)}constructor(e,t){super(e.session.kernel,t),this.kernel=e;const n=()=>{this.statusChanged.emit(e.status),"dead"!==e.status||e.disposed||e.disposing||this.connectionStatusChanged.emit("disconnected")};e.onDisposed((()=>{n(),this.disposed.emit()}),this,t),e.onStarted(n,this,t),e.onRestarted(n,this,t),e.onStatusChanged(n,this,t),this.startHandleKernelMessages(e.session.kernel)}async shutdown(){"startUsingRemoteKernelSpec"!==this.kernel.kernelConnectionMetadata.kind&&"connectToLiveRemoteKernel"!==this.kernel.kernelConnectionMetadata.kind||await(this.kernel.session?.shutdown()),await this.kernel.dispose()}dispose(){this.kernel.dispose().catch(ae)}async interrupt(){if(this.stopHandlingKernelMessages(this.possibleKernelConnection),await this.kernel.interrupt(),!this.kernel.session?.kernel)throw new Error("Restart failed");this.startHandleKernelMessages(this.kernel.session.kernel)}async restart(){if(this.possibleKernelConnection&&this.stopHandlingKernelMessages(this.possibleKernelConnection),await this.kernel.restart(),!this.kernel.session?.kernel)throw new Error("Restart failed");this.startHandleKernelMessages(this.kernel.session.kernel)}startHandleKernelMessages(e){this._kernelConnection=e,super.startHandleKernelMessages(e)}}var Ak=function(e,t){return function(n,i){t(n,i,e)}};const Nk="JUPYTER_API_ACCESS_INFORMATION",Mk=new Set([p.split(".")[0],"rchiodo","donjayamanne","SynapseVSCode"]),Lk=new Set(["rchiodo","nuant"]);let jk=class{constructor(e,t,n,i,r){this.globalState=e,this.appShell=t,this.context=n,this.env=i,this.extensions=r,this.extensionAccess=new Map,this.promiseChain=new oe}async getAccessInformation(e){const t=e.extensionId&&e.extensionId!==V&&e.extensionId.split(".")[0]||"";if(this.context.extensionMode===Oe.ExtensionMode.Test||!t||"insiders"===this.env.channel){if(!Mk.has(t)&&!Lk.has(t)){Cn(`Publisher ${t} is allowed to access the Kernel API with a message.`);const n=this.extensions.getExtension(e.extensionId)?.packageJSON?.displayName||"",i=n&&e.extensionId?`${n} (${e.extensionId})`:e.extensionId||t;this.appShell.showErrorMessage(gr.thanksForUsingJupyterKernelApiPleaseRegisterWithUs(i)).then(ae,ae)}if(!Lk.has(t)||!t||this.context.extensionMode===Oe.ExtensionMode.Test)return{extensionId:e.extensionId,accessAllowed:!0}}if(Mk.has(t))return{extensionId:e.extensionId,accessAllowed:!0};if(!Lk.has(t))return this.appShell.showErrorMessage(`Please contact the Jupyter Extension to get access to the Kernel API. Publisher ${t}`).then(ae,ae),Sn(`Publisher ${t} is not allowed to access the Kernel API.`),{extensionId:e.extensionId,accessAllowed:!1};const n=this.globalState.get(Nk),i=n?.find((t=>t.extensionId===e.extensionId));if(i)return io(F.JupyterKernelApiAccess,void 0,{extensionId:e.extensionId,allowed:i.allowed}),{extensionId:e.extensionId,accessAllowed:"yes"===i.allowed};if(this.extensionAccess.get(e.extensionId))return this.extensionAccess.get(e.extensionId);const r=(async()=>{const t=gr.allowExtensionToUseJupyterKernelApi(`${e.displayName} (${e.extensionId})`,lr.bannerLabelYes),n=await this.appShell.showInformationMessage(t,{modal:!0},lr.bannerLabelYes,lr.bannerLabelNo)===lr.bannerLabelYes;return this.promiseChain.chainFinally((async()=>{let t=[...this.globalState.get(Nk,[])];return t=t.filter((t=>t.extensionId!==e.extensionId)),t.push({allowed:n?"yes":"no",extensionId:e.extensionId}),this.globalState.update(Nk,t)})).then(ae,ae),io(F.JupyterKernelApiAccess,void 0,{extensionId:e.extensionId,allowed:n?"yes":"no"}),{extensionId:e.extensionId,accessAllowed:n}})();return this.extensionAccess.set(e.extensionId,r),r}};jk=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Ak(0,zn(Oi)),Ak(0,Nc(Ai)),Ak(1,zn(Jn)),Ak(2,zn(Ui)),Ak(3,zn(ei)),Ak(4,zn(qi))],jk);var Fk,Uk=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},qk=function(e,t){return function(n,i){t(n,i,e)}};let Kk=class{constructor(e,t,n,i,r,o,s,a){this.kernelProvider=e,this.kernelFinder=t,this.thirdPartyKernelProvider=n,this.disposables=i,this.controllerRegistration=r,this.apiAccess=o,this.extensions=s,this.serviceContainer=a,this.chainedApiAccess=new oe,this.extensionApi=new Map}async getService(){const e=await this.extensions.determineExtensionFromCallStack(),t=await this.chainedApiAccess.chainFinally((()=>this.apiAccess.getAccessInformation(e)));if(!t.accessAllowed)return;if(this.extensionApi.get(t.extensionId))return this.extensionApi.get(t.extensionId);const n=new Vk(t.extensionId,this.kernelProvider,this.kernelFinder,this.thirdPartyKernelProvider,this.disposables,this.controllerRegistration,this.serviceContainer);return this.extensionApi.set(t.extensionId,n),n}};Kk=Uk([Kn(),qk(0,zn(na)),qk(1,zn(la)),qk(2,zn(ia)),qk(3,zn(Ri)),qk(4,zn(Ks)),qk(5,zn(jk)),qk(6,zn(qi)),qk(7,zn(ya))],Kk);let Vk=Fk=class{get onDidChangeKernelSpecifications(){return io(F.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"onDidChangeKernelSpecifications"}),En(`API called from ${this.callingExtensionId}`),this._onDidChangeKernelSpecifications.event}get onDidChangeKernels(){return io(F.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"onDidChangeKernels"}),this._onDidChangeKernels.event}get status(){return this._status}get onDidChangeStatus(){return this._onDidChangeStatus.event}constructor(e,t,n,i,r,o,s){this.callingExtensionId=e,this.kernelProvider=t,this.kernelFinder=n,this.thirdPartyKernelProvider=i,this.disposables=r,this.controllerRegistration=o,this.serviceContainer=s,this._onDidChangeKernelSpecifications=new Oe.EventEmitter,this._onDidChangeKernels=new Oe.EventEmitter,this.translatedConnections=new WeakMap,this._onDidChangeStatus=new Oe.EventEmitter,this._status=this.kernelFinder.status,this.kernelFinder.onDidChangeStatus((()=>{this._status=this.kernelFinder.status,this._onDidChangeStatus.fire()}),this,r),this.kernelProvider.onDidDisposeKernel((e=>{xn(`Kernel ${e.kernelConnectionMetadata.id}, ${e.kernelConnectionMetadata.interpreter?.uri.toString()} disposed`),this._onDidChangeKernels.fire()}),this,r),this.kernelProvider.onDidStartKernel((e=>{xn(`Kernel ${e.kernelConnectionMetadata.id}, ${e.kernelConnectionMetadata.interpreter?.uri.toString()} started`),this._onDidChangeKernels.fire()}),this,r),this.thirdPartyKernelProvider.onDidDisposeKernel((e=>{xn(`Third party Kernel ${e.kernelConnectionMetadata.id}, ${e.kernelConnectionMetadata.interpreter?.uri.toString()} disposed`),this._onDidChangeKernels.fire()}),this,r),this.thirdPartyKernelProvider.onDidStartKernel((e=>{xn(`Third party Kernel ${e.kernelConnectionMetadata.id}, ${e.kernelConnectionMetadata.interpreter?.uri.toString()} started`),this._onDidChangeKernels.fire()}),this,r),this.controllerRegistration.onDidChange((()=>this._onDidChangeKernelSpecifications.fire()),this,r)}async getKernelSpecifications(){return io(F.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"getKernelSpecifications"}),this.kernelFinder.kernels.map((e=>this.translateKernelConnectionMetadataToExportedType(e)))}getActiveKernels(){io(F.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"getActiveKernels"});const e=[],t=new Set;return this.kernelProvider.kernels.filter((e=>e.startedAtLeastOnce||"connectToLiveRemoteKernel"===e.kernelConnectionMetadata.kind)).forEach((n=>{const i=this.kernelProvider.get(n.notebook);i&&i.session?.kernel?.id&&t.add(i.session.kernel.id),e.push({metadata:this.translateKernelConnectionMetadataToExportedType(n.kernelConnectionMetadata),uri:n.uri,id:n.id})})),this.thirdPartyKernelProvider.kernels.filter((e=>e.startedAtLeastOnce||"connectToLiveRemoteKernel"===e.kernelConnectionMetadata.kind)).forEach((n=>{const i=this.thirdPartyKernelProvider.get(n.uri);i&&i.session?.kernel?.id&&t.add(i.session.kernel.id),e.push({metadata:this.translateKernelConnectionMetadataToExportedType(n.kernelConnectionMetadata),uri:n.uri,id:n.id})})),this.controllerRegistration.registered.forEach((n=>{n.controller.notebookType===l&&"connectToLiveRemoteKernel"===n.connection.kind&&n.connection.kernelModel.id&&!t.has(n.connection.kernelModel.id)&&e.push({metadata:n.connection,uri:void 0,id:n.id})})),e}getKernel(e){io(F.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"getKernel"});const t=this.thirdPartyKernelProvider.get(e)??this.kernelProvider.get(e);if(t?.session?.kernel){const e=this.wrapKernelConnection(t);return{metadata:this.translateKernelConnectionMetadataToExportedType(t.kernelConnectionMetadata),connection:e}}}async startKernel(e,t){return io(F.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"startKernel"}),this.startOrConnect(e,t)}async connect(e,t){return io(F.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"connect"}),this.startOrConnect(e,t)}async startOrConnect(e,t){const n=this.kernelFinder.kernels.find((t=>t.id===e.id));if(!n)throw new Error("Not found");const i=await Yb.connectToKernel(n,this.serviceContainer,{resource:t},new hh(!1),this.disposables,"3rdPartyExtension");let r=Fk.wrappedKernelConnections.get(i);if(r)return r;if(!i?.session?.kernel)throw new Error("Not found");return this.wrapKernelConnection(i)}wrapKernelConnection(e){if(Fk.wrappedKernelConnections.get(e))return Fk.wrappedKernelConnections.get(e);const t={connection:new Ok(e,this.disposables),kernelSocket:new Wk(e)};return Fk.wrappedKernelConnections.set(e,t),t}translateKernelConnectionMetadataToExportedType(e){if(!this.translatedConnections.has(e)){const t=Object.freeze(Gs.fromJSON(e.toJSON()));this.translatedConnections.set(e,t)}return this.translatedConnections.get(e)}};Vk.wrappedKernelConnections=new WeakMap,Vk=Fk=Uk([qk(1,zn(na)),qk(2,zn(la)),qk(3,zn(ia)),qk(4,zn(Ri)),qk(5,zn(Ks)),qk(6,zn(ya))],Vk);class Wk{get ready(){return!!this.socket}get onDidChange(){return this._onDidSocketChange.event}constructor(e){this.disposables=[],this.receiveHooks=new Set,this.sendHooks=new Set,this._onDidSocketChange=new Oe.EventEmitter;const t=e.kernelSocket.subscribe((e=>{this.removeHooks(),this.socket=e?.socket,this.addHooks(),this._onDidSocketChange.fire()}));this.disposables.push(new Oe.Disposable((()=>t.unsubscribe())))}dispose(){Ie(this.disposables)}sendToRealKernel(e,t){this.socket?.sendToRealKernel(e,t)}addReceiveHook(e){this.receiveHooks.add(e)}removeReceiveHook(e){this.receiveHooks.delete(e)}addSendHook(e){this.sendHooks.add(e)}removeSendHook(e){this.sendHooks.delete(e)}removeHooks(){this.socket&&(this.receiveHooks.forEach((e=>this.socket?.removeReceiveHook(e))),this.sendHooks.forEach((e=>this.socket?.removeSendHook(e))))}addHooks(){this.socket&&(this.receiveHooks.forEach((e=>this.socket?.addReceiveHook(e))),this.sendHooks.forEach((e=>this.socket?.addSendHook(e))))}}var $k=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Bk=function(e,t){return function(n,i){t(n,i,e)}};let Hk=class{constructor(e,t,n){this.documentManager=e,this.workspaceService=t,this.fileSystem=n,this.activatedWorkspaces=new Set,this.disposables=[]}activate(){this.addHandlers(),this.addRemoveDocOpenedHandlers(),this.activateWorkspace(this.getActiveResource()).catch(ae)}getActiveResource(){const e=this.documentManager.activeTextEditor;return e&&!e.document.isUntitled?e.document.uri:Array.isArray(this.workspaceService.workspaceFolders)&&this.workspaceService.workspaceFolders.length>0?this.workspaceService.workspaceFolders[0].uri:void 0}async activateWorkspace(e){const t=this.getWorkspaceKey(e);this.activatedWorkspaces.has(t)||(this.activatedWorkspaces.add(t),await async function(e,t,n){if(Ll()){const i=new Ol(n,void 0,t).resolveAny(jl(t));await e.exists(Oe.Uri.file(i))&&Ml()}}(this.fileSystem,this.workspaceService,e))}onDocOpened(e){if(e.languageId!==i)return;const t=this.getWorkspaceKey(e.uri);if(""===t&&this.workspaceService.hasWorkspaceFolders)return;if(this.activatedWorkspaces.has(t))return;const n=this.workspaceService.getWorkspaceFolder(e.uri);this.activateWorkspace(n?n.uri:void 0).catch(ae)}addHandlers(){this.disposables.push(this.workspaceService.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this))}addRemoveDocOpenedHandlers(){this.hasMultipleWorkspaces()?this.docOpenedHandler||(this.docOpenedHandler=this.documentManager.onDidOpenTextDocument(this.onDocOpened,this)):this.docOpenedHandler&&(this.docOpenedHandler.dispose(),this.docOpenedHandler=void 0)}onWorkspaceFoldersChanged(){const e=this.workspaceService.workspaceFolders.map((e=>this.getWorkspaceKey(e.uri))),t=Array.from(this.activatedWorkspaces.keys()).filter((t=>e.indexOf(t)<0));if(t.length>0)for(const e of t)this.activatedWorkspaces.delete(e);this.addRemoveDocOpenedHandlers()}hasMultipleWorkspaces(){return this.workspaceService.hasWorkspaceFolders&&this.workspaceService.workspaceFolders.length>1}getWorkspaceKey(e){return this.workspaceService.getWorkspaceFolderIdentifier(e,"")}};$k([Pn("Failed to activate a workspace")],Hk.prototype,"activateWorkspace",null),Hk=$k([Kn(),Bk(0,zn(Yn)),Bk(1,zn(Qn)),Bk(2,zn(La))],Hk);var zk=function(e,t){return function(n,i){t(n,i,e)}};let Jk=class{constructor(e){this.syncActivationServices=e}activate(){this.syncActivationServices.map((e=>{try{e.activate()}catch(t){Sn(`Error in activating extension, failed in ${e.constructor.name}`,t)}}))}};Jk=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),zk(0,Qi()),zk(0,Ug(_a))],Jk);var Gk,Yk=function(e,t){return function(n,i){t(n,i,e)}};const Qk=Symbol("ISurveyBanner");var Xk,Zk,eE;!function(e){e.ShowBanner="ShowInsidersNotebookSurveyBanner",e.ExecutionCount="DS_InsidersNotebookExecutionCount"}(Xk||(Xk={})),function(e){e.ShowBanner="ShowExperimentNotebookSurveyBanner",e.ExecutionCount="DS_ExperimentNotebookExecutionCount"}(Zk||(Zk={})),function(e){e[e.Yes=0]="Yes",e[e.No=1]="No"}(eE||(eE={}));let tE=Gk=class{isEnabled(e){switch(e){case Mi.InsidersNotebookSurvey:if("insiders"===this.applicationEnvironment.channel)return this.isEnabledInternal(e);break;case Mi.ExperimentNotebookSurvey:if("stable"===this.applicationEnvironment.channel)return this.isEnabledInternal(e);break;default:return Sn("Invalid Banner Type"),!1}return!1}isEnabledInternal(e){return this.applicationEnvironment.uiKind===Oe.UIKind.Desktop&&(!this.showBannerState.get(e).value.expiry||this.showBannerState.get(e).value.expiry<Date.now())}constructor(e,t,n,i,r,o,s){this.appShell=e,this.persistentState=t,this.browserService=n,this.applicationEnvironment=i,this.vscodeNotebook=r,this.isCodeSpace=o,this.disposables=s,this.disabledInCurrentSession=!1,this.bannerLabels=[mr.bannerLabelYes,mr.bannerLabelNo],this.showBannerState=new Map,this.NotebookExecutionThreshold=250,this.setPersistentState(Mi.InsidersNotebookSurvey,Xk.ShowBanner),this.setPersistentState(Mi.ExperimentNotebookSurvey,Zk.ShowBanner),setTimeout((()=>{Gk.surveyDelay=!0}),6e5)}activate(){this.vscodeNotebook.onDidChangeNotebookCellExecutionState(this.onDidChangeNotebookCellExecutionState,this,this.disposables)}async showBanner(e){this.shouldShowBanner(e)&&(this.disabledInCurrentSession=!0,await this.appShell.showInformationMessage(this.getBannerMessage(e),...this.bannerLabels)===this.bannerLabels[eE.Yes]?(await this.launchSurvey(e),await this.disable(eE.Yes,e)):await this.disable(eE.No,e))}shouldShowBanner(e){return!(this.isCodeSpace||!this.isEnabled(e)||this.disabledInCurrentSession||!Gk.surveyDelay)&&this.getExecutionCount(e)>=this.NotebookExecutionThreshold}setPersistentState(e,t){this.showBannerState.set(e,this.persistentState.createGlobalPersistentState(t,{data:!0}))}async launchSurvey(e){this.browserService.launch(this.getSurveyLink(e))}async disable(e,t){let n=e===eE.Yes?6:4;n&&await this.showBannerState.get(t).updateValue({expiry:31*n*864e5+Date.now(),data:!0})}getExecutionCount(e){switch(e){case Mi.InsidersNotebookSurvey:return this.getPersistentState(Xk.ExecutionCount);case Mi.ExperimentNotebookSurvey:return this.getPersistentState(Zk.ExecutionCount);default:return Sn("Invalid Banner type"),-1}}getPersistentState(e){return this.persistentState.createGlobalPersistentState(e,0).value}async onDidChangeNotebookCellExecutionState(e){Za(e.cell.notebook)&&e.state===Oe.NotebookCellExecutionState.Executing&&(this.updateStateAndShowBanner(Xk.ExecutionCount,Mi.InsidersNotebookSurvey).catch(ae),this.updateStateAndShowBanner(Zk.ExecutionCount,Mi.ExperimentNotebookSurvey).catch(ae))}async updateStateAndShowBanner(e,t){const n=this.persistentState.createGlobalPersistentState(e,0);await n.updateValue(n.value+1),this.showBanner(t).catch(ae)}getBannerMessage(e){switch(e){case Mi.InsidersNotebookSurvey:case Mi.ExperimentNotebookSurvey:return fr.bannerMessage;default:return Sn("Invalid Banner type"),""}}getSurveyLink(e){switch(e){case Mi.InsidersNotebookSurvey:return"https://aka.ms/vscjupyternb";case Mi.ExperimentNotebookSurvey:return"https://aka.ms/vscnbexp";default:return Sn("Invalid Banner type"),""}}};tE.surveyDelay=!1,tE=Gk=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Yk(0,zn(Jn)),Yk(1,zn(Li)),Yk(2,zn(Ki)),Yk(3,zn(ei)),Yk(4,zn(oi)),Yk(5,zn(xi)),Yk(6,zn(Ri))],tE);var nE=function(e,t){return function(n,i){t(n,i,e)}};const iE=gr.percentPipCondaInstallInsteadOfBang("pip"),rE=gr.percentPipCondaInstallInsteadOfBang("conda"),oE=gr.matplotlibWidgetInsteadOfOther,sE="Jupyter";let aE=class{constructor(e,t,n){this.notebooks=e,this.documents=n,this.disposables=[],this.notebooksProcessed=new WeakMap,this.cellsToProcess=new Set,this.problems=Oe.languages.createDiagnosticCollection(sE),this.disposables.push(this.problems),t.push(this)}dispose(){Ie(this.disposables),this.problems.dispose()}activate(){this.disposables.push(Oe.languages.registerCodeActionsProvider(i,this)),this.disposables.push(Oe.languages.registerHoverProvider(i,this)),this.documents.onDidChangeTextDocument((e=>{const t=tc(e.document);if(!t)return;const n=t.getCells().find((t=>t.document===e.document));n&&this.analyzeNotebookCell(n)}),this,this.disposables),this.notebooks.onDidCloseNotebookDocument((e=>{this.problems.delete(e.uri);const t=this.notebooksProcessed.get(e);this.notebooksProcessed.delete(e),t&&t.forEach(((e,t)=>this.problems.delete(Oe.Uri.parse(t))))}),this,this.disposables),this.notebooks.onDidOpenNotebookDocument((e=>this.analyzeNotebook(e)),this,this.disposables),Oe.workspace.onDidChangeNotebookDocument((e=>{const t=this.notebooksProcessed.get(e.notebook);e.contentChanges.forEach((e=>{e.removedCells.forEach((e=>{t?.delete(e.document.uri.toString())})),e.addedCells.forEach((e=>this.queueCellForProcessing(e)))})),e.cellChanges.forEach((e=>this.queueCellForProcessing(e.cell)))}),this,this.disposables),this.notebooks.notebookDocuments.map((e=>this.analyzeNotebook(e)))}provideHover(e,t,n){const i=tc(e);if(i?.notebookType!==l)return;const r=this.problems.get(e.uri);if(!r)return;const o=r.find((e=>e.message===iE||e.message===rE));if(!o||!o.range.contains(t))return;const s=o.message===iE?"pip":"conda";return new Oe.Hover(gr.pipCondaInstallHoverWarning(s,"https://aka.ms/jupyterCellMagicBangInstall"),o.range)}provideCodeActions(e,t,n,i){if(!tc(e))return[];const r=[];return n.diagnostics.forEach((t=>{switch(t.message){case iE:r.push(this.createReplaceCodeAction(e,"pip",t));break;case rE:r.push(this.createReplaceCodeAction(e,"conda",t));break;case oE:r.push(this.createGotoWikiAction(e,Oe.Uri.parse("https://aka.ms/vscodejupytermatplotlibwidget"),t))}})),r}createReplaceCodeAction(e,t,n){const i=new Oe.CodeAction(gr.replacePipCondaInstallCodeAction(t),Oe.CodeActionKind.QuickFix);i.isPreferred=!0,i.diagnostics=[n];const r=new Oe.WorkspaceEdit;return r.replace(e.uri,new Oe.Range(n.range.start,new Oe.Position(n.range.start.line,n.range.start.character+1)),"%"),i.edit=r,i}createGotoWikiAction(e,t,n){const i=new Oe.CodeAction(gr.matplotlibWidgetCodeActionTitle,Oe.CodeActionKind.QuickFix);return i.isPreferred=!0,i.diagnostics=[n],i.command={title:gr.matplotlibWidgetCodeActionTitle,command:"vscode.open",arguments:[t]},i}analyzeNotebook(e){e.notebookType===l&&e.getCells().forEach(((e,t)=>t<100?this.queueCellForProcessing(e):void 0))}queueCellForProcessing(e){this.cellsToProcess.add(e),this.analyzeNotebookCells()}analyzeNotebookCells(){if(0===this.cellsToProcess.size)return;const e=this.cellsToProcess.values().next().value;this.cellsToProcess.delete(e),this.analyzeNotebookCell(e),setTimeout((()=>this.analyzeNotebookCells()),0)}analyzeNotebookCell(e){if(e.kind!==Oe.NotebookCellKind.Code||e.document.languageId!==i||e.notebook.isClosed||e.document.isClosed)return;if(this.notebooksProcessed.get(e.notebook)?.get(e.document.uri.toString())===e.document.version)return;this.problems.delete(e.document.uri);const t=this.notebooksProcessed.get(e.notebook)||new Map;t.set(e.document.uri.toString(),e.document.version),this.notebooksProcessed.set(e.notebook,t);for(let t=0;t<Math.min(e.document.lineCount,50);t++){const n=e.document.lineAt(t),i=n.text;if(i.trim().startsWith("!pip install")){const t=i.indexOf("!"),r=i.indexOf("l"),o=new Oe.Range(n.lineNumber,t,n.lineNumber,r+2);this.problems.set(e.document.uri,[{message:iE,range:o,severity:Oe.DiagnosticSeverity.Error,source:sE}])}else if(i.trim().startsWith("!conda install")){const t=i.indexOf("!"),r=i.indexOf("l"),o=new Oe.Range(n.lineNumber,t,n.lineNumber,r+2);this.problems.set(e.document.uri,[{message:rE,range:o,severity:Oe.DiagnosticSeverity.Error,source:sE}])}else if(i.trim().startsWith("%matplotlib")&&!i.trim().endsWith("widget")&&!i.trim().endsWith("inline")){const t=i.indexOf("%"),r=i.length,o=new Oe.Range(n.lineNumber,t,n.lineNumber,r);this.problems.set(e.document.uri,[{message:oE,range:o,severity:Oe.DiagnosticSeverity.Warning,source:sE}])}}}};aE=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),nE(0,zn(oi)),nE(1,zn(Ri)),nE(2,zn(Yn))],aE);var cE=__webpack_require__(52847),lE=__webpack_require__(1730);function dE(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class uE{constructor(){this._id=Kf()(),this._commands=new Map,this.fillInitializeParams=void 0,this.preInitialize=void 0}getState(){return{kind:"workspace",id:this._id,registrations:!0}}get registrationType(){return cE.ExecuteCommandRequest.type}fillClientCapabilities(e){dE(dE(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:this._id,registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){kn("Registering dummy command feature")}unregister(e){let t=this._commands.get(e);t&&t.forEach((e=>e.dispose()))}dispose(){this._commands.forEach((e=>{e.forEach((e=>e.dispose()))})),this._commands.clear()}}class pE{constructor(e,t,n,i){this.interpreter=t,this.middleware=n,this.disposables=i,this._client=e,this._interpreterId=Qt(t.uri),Oe.workspace.onDidChangeNotebookDocument(this.onDidChangeNotebookDocument,this,i)}async dispose(){if(!this._client)return;xn(`Disposing Language Server for ${pn(this.interpreter.id)}`);const e=this._client;this._client=void 0,this.disposables.forEach((e=>e.dispose())),this.middleware.dispose(),await e.stop(),await e.dispose()}get client(){return this._client}get interpreterId(){return this._interpreterId}stopWatching(e){try{this.middleware.stopWatching(e)}catch(e){xn("Error shutting down the LS.",e)}}startWatching(e){this.middleware.startWatching(e)}static async createLanguageServer(e,t,n){const r=await pE.createServerOptions(e);if(r){let o;const s=Oe.window.createOutputChannel(`${e.displayName||"notebook"}-languageserver`),a=Qt(e.uri),c=(0,lE.createNotebookMiddleware)((()=>o),(()=>ae),u,un(e.uri),(n=>t(n,a,e.uri)),n),l={documentSelector:u,workspaceFolder:void 0,synchronize:{configurationSection:i},outputChannel:s,revealOutputChannelOn:cE.RevealOutputChannelOn.Never,middleware:c,initializationOptions:{notebookServer:!0}},d=new cE.LanguageClient("notebook-intellisense",r,l),p=d._features.filter((e=>"workspace/executeCommand"!=e.registrationType?.method));return p.push(new uE),d._features=p,await d.start(),o=d,new pE(d,e,c,[s])}}onDidChangeNotebookDocument(e){e.notebook&&e.contentChanges.length&&this.middleware.refresh(e.notebook)}static async createServerOptions(e){return pE.createJediLSPServerOptions(e)}static async createJediLSPServerOptions(e){const t=Oe.extensions.getExtension("ms-python.python");if(t){const n=Et(t.extensionPath,"pythonFiles","run-jedi-language-server.py");if(await il.pathExists(n)){const t=un(e.uri);return{command:t.length>0?t:"python",args:[n]}}}}}var hE=__webpack_require__(92850),fE=function(e,t){return function(n,i){t(n,i,e)}};let mE=class{constructor(e,t,n,i){this.apiProvider=e,this.extensionChecker=t,this.notebookEditorProvider=n,this.controllerRegistration=i,this._isPylanceExtensionInstalled()||(this.extensionChangeHandler=Oe.extensions.onDidChange(this.extensionsChangeHandler.bind(this)))}activate(){this.isUsingPylance()&&this.extensionChecker.isPythonExtensionInstalled&&this.apiProvider.getApi().then((e=>{void 0!==e.registerJupyterPythonPathFunction&&e.registerJupyterPythonPathFunction((e=>this._jupyterPythonPathFunction(e))),void 0!==e.registerGetNotebookUriForTextDocumentUriFunction&&e.registerGetNotebookUriForTextDocumentUriFunction((e=>this._getNotebookUriForTextDocumentUri(e)))})).catch(ae)}async reset(){this._isEnabled=void 0,await this.activate()}_isPylanceExtensionInstalled(){return void 0!==Oe.extensions.getExtension(I)}async extensionsChangeHandler(){this._isPylanceExtensionInstalled()&&this.extensionChangeHandler&&(this.extensionChangeHandler.dispose(),this.extensionChangeHandler=void 0,await this.reset())}isUsingPylance(){if(void 0===this._isEnabled){const e=Oe.workspace.getConfiguration("python"),t=e?.get("languageServer");this._isEnabled=!1,"Pylance"!==t&&"Default"!==t?kn("Not using Pylance"):(this._isEnabled=!0,kn("Using Pylance"))}return this._isEnabled}async _jupyterPythonPathFunction(e){const t=this.notebookEditorProvider.findAssociatedNotebookDocument(e);if(!t)return;const n=this.controllerRegistration.getSelected(t);if(n&&ta(n.connection))return"";const i=n?.connection?.interpreter;return i?un(i.uri):(Cn(`No interpreter for Pylance for Notebook URI "${pn(t.uri)}"`),"")}_getNotebookUriForTextDocumentUri(e){const t=function(e){if("vscode-interactive-input"!==e.scheme)return;const t=`${e.path.replace("InteractiveInput-","Interactive-")}.interactive`;return Oe.workspace.notebookDocuments.find((e=>e.uri.path===t))?.uri}(e);if(!t)return;let n;return Oe.window.tabGroups.all.find((e=>{e.tabs.find((e=>{if(QS(e)){const i=e.input.uri.toString();e.input.uri.toString().endsWith(t.path)&&(n=i)}}))})),n}};mE=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),fE(0,zn(Oo)),fE(1,zn(Ao)),fE(2,zn(Jb)),fE(3,zn(Ks))],mE);var gE=function(e,t){return function(n,i){t(n,i,e)}};let vE=class{constructor(e,t,n,i,r,o,s,a,c){this.disposables=e,this.controllerRegistration=t,this.notebookEditorProvider=n,this.notebooks=i,this.interpreterService=r,this.workspaceService=o,this.extensionChecker=s,this.configService=a,this.notebookPythonPathService=c,this.servers=new Map,this.activeInterpreterCache=new Map,this.knownControllers=new WeakMap}activate(){this.controllerRegistration.onControllerSelected(this.controllerChanged,this,this.disposables),this.notebooks.onDidOpenNotebookDocument(this.openedNotebook,this,this.disposables),this.notebooks.onDidCloseNotebookDocument(this.closedNotebook,this,this.disposables),this.notebooks.notebookDocuments.forEach((e=>this.openedNotebook(e).catch(ae))),this.getActiveInterpreterSync(void 0),this.interpreterService.onDidChangeInterpreter(this.handleInterpreterChange,this,this.disposables),this.workspaceService.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this.disposables)}async getLanguageClient(e){const t=this.controllerRegistration.getSelected(e),n=t?t.connection.interpreter:await this.interpreterService.getActiveInterpreter(e.uri),i=n?Qt(n.uri):void 0,r=i?await this.servers.get(i):void 0;return r?.client}async getCompletions(e,t,n,i,r){const o=await this.getLanguageClient(e);if(o){const e=o.getFeature(hE.CompletionRequest.method).getProvider(t);if(e){const o=await e.provideCompletionItems(t,n,r,i);return o&&"items"in o?o.items:o}}}handleInterpreterChange(){this.activeInterpreterCache.clear(),this.getActiveInterpreterSync(void 0)}getActiveInterpreterSync(e){if(!this.extensionChecker.isPythonExtensionInstalled)return;const t=this.workspaceService.getWorkspaceFolder(e)?.uri||(this.workspaceService.rootFolder?this.workspaceService.rootFolder:void 0),n=t?Qt(t):"";return this.activeInterpreterCache.has(n)||this.interpreterService.getActiveInterpreter(t).then((e=>{this.activeInterpreterCache.set(n,e)})).catch(ae),this.activeInterpreterCache.get(n)}async controllerChanged(e){if(!this.notebookPythonPathService.isUsingPylance()){const t=await this.ensureLanguageServer(e.controller.connection.interpreter,e.notebook),n=this.knownControllers.get(e.notebook),i=n?n.connection.interpreter:this.getActiveInterpreterSync(e.notebook.uri),r=i?Qt(i.uri):void 0,o=r?await this.servers.get(r):void 0;o&&t?.interpreterId!=o.interpreterId&&o.stopWatching(e.notebook),t&&t.startWatching(e.notebook)}this.knownControllers.set(e.notebook,e.controller)}async openedNotebook(e){if(Za(e)&&this.extensionChecker.isPythonExtensionInstalled&&!this.notebookPythonPathService.isUsingPylance()){const t=this.controllerRegistration.getSelected(e);t&&this.knownControllers.set(e,t),this.getActiveInterpreterSync(e.uri);const n=t?.connection.interpreter||await this.interpreterService.getActiveInterpreter(e.uri),i=await this.ensureLanguageServer(n,e);i&&i.startWatching(e)}}closedNotebook(e){this.knownControllers.delete(e)}shouldAllowIntellisense(e,t,n){const i=this.notebookEditorProvider.findAssociatedNotebookDocument(e),r=i?this.controllerRegistration.getSelected(i):void 0,o=r?r.connection.interpreter:this.getActiveInterpreterSync(e);let s=o?Qt(o.uri):void 0;if(t!==s&&("startUsingRemoteKernelSpec"===r?.connection.kind||"connectToLiveRemoteKernel"===r?.connection.kind)){const t=this.getActiveInterpreterSync(e);s=t?Qt(t.uri):void 0}const a=i?.getCells().find((t=>t.document.uri.toString()===e.toString()));return t==s&&(!a||"python"===a.document.languageId)}getNotebookHeader(e){let t=this.configService.getSettings(e).runStartupCommands;return Array.isArray(t)&&(t=t.join("\n")),t?t.replace(/\\n/g,"\n").replace(/\\r/g,"\r"):""}async ensureLanguageServer(e,t){const n=e?Qt(e.uri):void 0;if(n&&!this.servers.has(n)&&e){const i=pE.createLanguageServer(e,this.shouldAllowIntellisense.bind(this),this.getNotebookHeader.bind(this)).then((e=>(e?.startWatching(t),e)));this.servers.set(n,i)}return n?this.servers.get(n):void 0}onDidChangeConfiguration(e){e.affectsConfiguration("python.languageServer")&&(xn("Dispose all language servers due to changes in configuration"),this.servers.forEach((e=>e.then((e=>e?.dispose())))),this.servers.clear(),this.notebooks.notebookDocuments.forEach((e=>this.openedNotebook(e).catch(ae))))}};vE=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),gE(0,zn(Ri)),gE(1,zn(Ks)),gE(2,zn(Jb)),gE(3,zn(oi)),gE(4,zn(ka)),gE(5,zn(Qn)),gE(6,zn(Ao)),gE(7,zn(ji)),gE(8,zn(mE))],vE);var yE=__webpack_require__(52881),bE=function(e,t){return function(n,i){t(n,i,e)}};let wE=class{constructor(e,t,n,i,r){this.commandService=e,this.disposableRegistry=t,this.appShell=n,this.fs=i,this.configService=r,this.steps=[],this.index=-1}activate(){this.disposableRegistry.push(this.commandService.registerCommand(N.ReplayPylanceLog,this.replayPylanceLog,this)),this.disposableRegistry.push(this.commandService.registerCommand(N.ReplayPylanceLogStep,this.step,this)),this.isLogActive=new n_(L.ReplayLogLoaded,this.commandService),this.isLogActive.set(!1).then(ae,ae)}async replayPylanceLog(){if(Oe.window.activeNotebookEditor){const e=await this.appShell.showOpenDialog({title:"Open Pylance Output Log"});e&&1===e.length&&(this.activeNotebook=Oe.window.activeNotebookEditor.notebook,this.steps=await this.parsePylanceLogSteps(e[0].fsPath),this.index=-1,this.isLogActive?.set(!0))}else this.appShell.showErrorMessage("Command should be run with a jupyter notebook open").then(ae,ae)}async step(){if(this.steps.length-1>this.index&&this.steps.length>0&&this.activeNotebook===Oe.window.activeNotebookEditor?.notebook&&this.activeNotebook){this.appShell.showInformationMessage(`Replaying step ${this.index+2} of ${this.steps.length}`).then(ae,ae),this.index+=1;let e=this.steps[this.index],t=e.contentChanges[0];if(e.textDocument.uri.includes("_NotebookConcat_")&&this.activeNotebook){const n=await this.getConverter();if(e.textDocument.uri=n.getConcatDocument(this.activeNotebook.cellAt(0).document.uri.toString()).concatUri?.toString(),n){const i={textDocument:{version:e.textDocument.version,uri:n.toNotebookUri(e.textDocument.uri,t.range)},contentChanges:[{text:t.text,range:n.toNotebookRange(e.textDocument.uri,t.range),rangeLength:t.rangeLength}]};if(t.text.startsWith("import IPython\nIPython.get_ipython()\n")){const e=t.text.slice(37).replace(" # type: ignore",""),n=this.activeNotebook.getCells().find((e=>i.textDocument.uri===e.document.uri.toString()));n&&(i.contentChanges=[{text:e,range:new Oe.Range(new Oe.Position(0,0),new Oe.Position(n.document.lineCount,0)),rangeLength:n.document.getText().length}])}n.handleChange(i),e=i,t=i.contentChanges[0]}}else{const t=/(#ch\d+)/.exec(e.textDocument.uri),n=null!=t&&t.length>1?this.activeNotebook.cellAt(0).document.uri.toString().replace(/(#ch\d+)/,t[1]):e.textDocument.uri;e.textDocument.uri=n}kn(`*** Replaying step: ${JSON.stringify(e,void 0,"  ")}`);let n=this.activeNotebook?.getCells().find((t=>t.document.uri.toString()===e.textDocument.uri));if(!n){const e=this.activeNotebook.cellCount,t=new Oe.WorkspaceEdit,r=new Oe.NotebookCellData(Oe.NotebookCellKind.Code,"",i);r.outputs=[],r.metadata={};const o=Oe.NotebookEdit.insertCells(e,[r]);t.set(this.activeNotebook.uri,[o]),await Oe.workspace.applyEdit(t),n=this.activeNotebook.cellAt(this.activeNotebook.cellCount-1)}const r=new Oe.NotebookRange(n.index,n.index+1);Oe.window.activeNotebookEditor?.revealRange(r,Oe.NotebookEditorRevealType.InCenterIfOutsideViewport),await X((async()=>void 0!==Oe.window.visibleTextEditors.find((e=>e.document===n.document))),3e3,10);const o=Oe.window.visibleTextEditors.find((e=>e.document===n.document));if(o){const e=new Oe.Range(new Oe.Position(t.range.start.line,t.range.start.character),new Oe.Position(t.range.end.line,t.range.end.character));o.revealRange(e,Oe.TextEditorRevealType.InCenterIfOutsideViewport),o.selection=new Oe.Selection(e.start,e.start),await Q(100),await o.edit((n=>{""==t.text?n.delete(e):t.rangeLength>0?n.replace(e,t.text):n.insert(e.start,t.text)}))}this.steps.length===this.index&&(ce((()=>this.isLogActive?.set(!1))),this.steps=[],this.index=-1)}else this.activeNotebook?.toString()!==Oe.window.activeNotebookEditor?.notebook.uri.toString()&&this.index<this.steps.length-1&&this.appShell.showErrorMessage("You changed the notebook editor in the middle of stepping through the log").then(ae,ae)}async parsePylanceLogSteps(e){const t=await this.fs.readFile(Oe.Uri.file(e)),n=[],i=/textDocument\/didChange'[\s\S]*?Params:\s(?<json_event>[\s\S]*?\n\})/g;let r=null;for(;null!=(r=i.exec(t));)if(r.index===i.lastIndex&&i.lastIndex++,r.groups&&r.groups.json_event){const e=JSON.parse(r.groups.json_event);n.push(e)}return n}getNotebookHeader(e){let t=this.configService.getSettings(e).runStartupCommands;return Array.isArray(t)&&(t=t.join("\n")),t?t.replace(/\\n/g,"\n").replace(/\\r/g,"\r"):""}async getConverter(){if(!this.converter&&this.activeNotebook){const e=yE.createConverter((e=>this.getNotebookHeader(this.activeNotebook.uri)),(()=>hc.platform()));this.activeNotebook.getCells().filter((e=>Oe.languages.match(u,e.document)>0)).forEach((t=>{e.handleOpen({textDocument:{uri:t.document.uri.toString(),text:t.document.getText(),languageId:t.document.languageId,version:t.document.version}})})),this.converter=e}return this.converter}};var _E;wE=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),bE(0,zn(Gn)),bE(1,zn(Ri)),bE(2,zn(Jn)),bE(3,zn(La)),bE(4,zn(ji))],wE),function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.Snippet=25]="Snippet"}(_E||(_E={}));const SE=new Map([["method",_E.Method],["function",_E.Function],["constructor",_E.Constructor],["field",_E.Field],["variable",_E.Variable],["class",_E.Class],["struct",_E.Struct],["interface",_E.Interface],["module",_E.Module],["property",_E.Property],["event",_E.Event],["operator",_E.Operator],["unit",_E.Unit],["value",_E.Value],["constant",_E.Constant],["enum",_E.Enum],["enumMember",_E.EnumMember],["keyword",_E.Keyword],["text",_E.Text],["color",_E.Color],["file",_E.File],["reference",_E.Reference],["customcolor",_E.Customcolor],["folder",_E.Folder],["typeParameter",_E.TypeParameter],["snippet",_E.Snippet],["<unknown>",_E.Field]]);var CE=function(e,t){return function(n,i){t(n,i,e)}};let kE=v.IntellisenseTimeout,EE=class{constructor(e,t,n,i,r){this.kernelProvider=e,this.notebookEditorProvider=t,this.notebookCompletionProvider=n,this.allowStringFilter=!1;const o=i.getSettings().pythonCompletionTriggerCharacters;this.allowStringFilter=null!=o&&(o.includes("'")||o.includes('"')),Oe.workspace.onDidChangeConfiguration((e=>{if(e.affectsConfiguration("jupyter.pythonCompletionTriggerCharacters")){const e=i.getSettings().pythonCompletionTriggerCharacters;this.allowStringFilter=null!=e&&(e.includes("'")||e.includes('"'))}}),this,r)}async provideCompletionItems(e,t,n,i){if(!ue(e))return[];const r=this.notebookEditorProvider.findAssociatedNotebookDocument(e.uri);if(!r)return Sn(`Notebook not found for Cell ${pn(e.uri)}`),[];const o=this.kernelProvider.get(r);if(!o||!o.session||!o.session.kernel)return En(`Live Notebook not available for ${pn(r.uri)}`),[];xn(`Notebook completion request for ${e.getText()}, ${e.offsetAt(t)}`);const[s,a]=await Promise.all([Z(kE,this.getJupyterCompletion(o.session,e.getText(),e.offsetAt(t),n)),Z(kE,this.getPylanceCompletions(e,t,i,n))]);if(!s)return xn("Notebook completions not found."),[];xn(`Completions found, filtering the list: ${JSON.stringify(s)}.`);let c=[];const l=s.metadata?s.metadata._jupyter_types_experimental:[];return c=Array.isArray(l)&&l.length>=s.matches.length&&l.every((e=>"number"==typeof e.start&&"number"==typeof e.end&&"string"==typeof e.text))?l.map(((t,n)=>({label:t.text,itemText:t.text,range:new Oe.Range(e.positionAt(t.start),e.positionAt(t.end)),kind:t.type?SE.get(t.type):Oe.CompletionItemKind.Field,sortText:xE(n)}))):s.matches.map(((e,t)=>({label:e,itemText:e,sortText:xE(t)}))),function(e,t,n,i,r,o){let s=n;const a=0===o.character?void 0:new Oe.Range(o.line,o.character-1,o.line,o.character),c="."===(a?r.getText(a):void 0),l=r.getWordRangeAtPosition(c||"."===e?new Oe.Position(o.line,o.character-1):o),d=l&&a?l.union(a):void 0,u=r.lineAt(o.line).text,p=d?r.getText(d):u,h=p.endsWith(".")||c,f=t&&("'"==e||'"'==e||function(e,t){const n=e.indexOf('"'),i=e.indexOf("'"),r=e.lastIndexOf('"'),o=e.lastIndexOf("'"),s=n>=0?n:i,a=r>=0?r:o;return s>=0&&t.character>s&&t.character<=a}(u,o));if(xn(`Jupyter completions filtering applied: ${f} on ${u}`),s=s.map(((e,t)=>{if(e.itemText.startsWith("%")||e.itemText.startsWith("!"))return{...e,sortText:`ZZZ${e.sortText}`};if(f)return e;const n=p?e.itemText.indexOf(p):-1;let i,r,o;if(p&&h&&e.itemText.includes(p)){i=e.itemText.substring(e.itemText.indexOf(p)+(h?p.length:0)),r=e.itemText.substring(e.itemText.indexOf(p)+p.length);const t=("string"==typeof e.label?e.label.length:e.label.label.length)-r.length;o=e.range&&"start"in e.range?new Oe.Range(new Oe.Position(e.range.start.line,e.range.start.character+t),e.range.end):e.range}if(!r&&n>0){i=e.itemText.substring(e.itemText.indexOf(p)+(h?p.length:0)),r=e.itemText.substring(e.itemText.indexOf(p)+p.length);const t=("string"==typeof e.label?e.label.length:e.label.label.length)-r.length;o=e.range&&"start"in e.range?new Oe.Range(new Oe.Position(e.range.start.line,e.range.start.character+t),e.range.end):e.range}return i&&r&&o&&(e.label=i,e.itemText=r,e.insertText=r,e.filterText=h?`.${r}`:r,e.range=o,e.sortText=xE(t)),e})),s=f?s.map((e=>e.itemText.endsWith("/")?{...e,command:{command:"editor.action.triggerSuggest",title:""}}:(e.itemText.includes(" ")&&(e.itemText=e.itemText.replace(/\\ /g," "),"string"==typeof e.label?e.label=e.label.replace(/\\ /g," "):e.label.label=e.label.label.replace(/\\ /g," ")),e))):s.filter((e=>!e.itemText.includes(".")&&!e.itemText.endsWith("/"))),i){const e=new Set(i.map((e=>e.label.toString())));s=s.filter((t=>!e.has(t.itemText)))}return xn(`Jupyter completions for ${p} at pos ${o.line}:${o.character} with trigger: ${e}\n   ${n.map((e=>e.label)).join(",")}`),xn(`Jupyter results for ${p} at pos ${o.line}:${o.character} with trigger: ${e}\n   ${s.map((e=>e.label)).join(",")}`),s}(i.triggerCharacter,this.allowStringFilter,c,a,e,t)}async getJupyterCompletion(e,t,n,i){const r=new se;if(!e.kernel)return{matches:[],cursor:{start:0,end:0},metadata:{}};if("busy"===e.status&&!w())return{matches:[],cursor:{start:0,end:0},metadata:{}};const o=await xa(i,e.kernel.requestComplete({code:t,cursor_pos:n}));return xn(`Got jupyter notebook completions. Is cancel? ${i?.isCancellationRequested}: ${o?JSON.stringify(o):"empty"}`),En(`Jupyter completion time: ${r.elapsedTime}`),o&&o.content&&"matches"in o.content?{matches:o.content.matches,cursor:{start:o.content.cursor_start,end:o.content.cursor_end},metadata:o.content.metadata}:{matches:[],cursor:{start:0,end:0},metadata:{}}}async getPylanceCompletions(e,t,n,i){const r=tc(e);if(r&&this.notebookCompletionProvider)return this.notebookCompletionProvider.getCompletions(r,e,t,n,i)}};function xE(e){return e>=300?"ZZZZZZZ":e<=25?`A${String.fromCharCode(65+e)}`:`${String.fromCharCode(65+Math.ceil(e/25))}${String.fromCharCode(65+e%25)}`}EE=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),CE(0,zn(na)),CE(1,zn(Jb)),CE(2,zn(zb)),CE(2,Qi()),CE(3,zn(ji)),CE(4,zn(Ri))],EE);var TE=function(e,t){return function(n,i){t(n,i,e)}};const PE=[".","%"];let IE=class{constructor(e,t,n){this.disposables=e,this.config=t,this.completionProvider=n}activate(){let e=this.config.getSettings().pythonCompletionTriggerCharacters?.split("")||PE;(e.includes('"')||e.includes("'"))&&(e=[...e,"/"]),this.registerCompletionItemProvider(e)}registerCompletionItemProvider(e){const t=Oe.languages.registerCompletionItemProvider(u,this.completionProvider,...e);this.disposables.push(t)}};IE=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),TE(0,zn(Ri)),TE(1,zn(ji)),TE(2,zn(EE))],IE);var DE=function(e,t){return function(n,i){t(n,i,e)}};let RE=class{constructor(e,t,n,i){this.extensionChecker=e,this.disposables=t,this.applicationShell=n,this.kernelProvider=i}activate(){this.extensionChecker.onPythonExtensionInstallationStatusChanged(this.onPythonExtensionInstallationStatusChanged,this,this.disposables)}async onPythonExtensionInstallationStatusChanged(e){"installed"===e&&this.anyKernelsAreActive()&&this.applicationShell.showInformationMessage(gr.pythonExtensionInstalled,lr.ok).then(ae,ae)}anyKernelsAreActive(){return this.kernelProvider.kernels.length>0}};RE=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),DE(0,zn(Ao)),DE(1,zn(Ri)),DE(2,zn(Jn)),DE(3,zn(na))],RE);class OE{constructor(e,t,n,i,r,o){this.appShell=e,this.configService=t,this.agentCreator=n,this.requestCreator=i,this.serverUriStorage=r,this.disposables=o,this.savedConnectInfo=new Map,this.serverUriStorage.onDidRemove(this.onDidRemoveServers,this,this.disposables)}getPasswordConnectionInfo(e){if(!e.url||e.url.length<1)throw new Error("Invalid URL");const t=AE(e.url),n=e.disposables||[],i=!Array.isArray(e.disposables);let r=this.savedConnectInfo.get(e.handle);return r||(r=this.getJupyterConnectionInfo({url:t,isTokenEmpty:e.isTokenEmpty,disposables:n,validationErrorMessage:e.validationErrorMessage}).then((n=>((!n||n.requiresPassword&&1===Object.keys(n).length)&&(Cn(`Password for ${t} was invalid.`),this.savedConnectInfo.delete(e.handle)),n))),r.catch((()=>this.savedConnectInfo.delete(e.handle))),r.finally((()=>{i&&Ie(n)})).catch(ae),this.savedConnectInfo.set(e.handle,r)),r}async getJupyterConnectionInfo(e){let t,n,i,r;const o=await this.needPassword(e.url);if(!o&&!e.isTokenEmpty)return{requiresPassword:o};if(o&&e.isTokenEmpty){const t=this.appShell.createInputBox();e.disposables.push(t),t.title=gr.jupyterSelectPasswordTitle,t.placeholder=gr.jupyterSelectPasswordPrompt,t.ignoreFocusOut=!0,t.password=!0,t.validationMessage=e.validationErrorMessage||"",t.show(),t.buttons=[Oe.QuickInputButtons.Back],r=await new Promise(((n,i)=>{t.onDidTriggerButton((e=>{e===Oe.QuickInputButtons.Back&&i(Xc.back)}),this,e.disposables),t.onDidChangeValue((()=>t.validationMessage=""),this,e.disposables),t.onDidAccept((()=>n(t.value)),this,e.disposables),t.onDidHide((()=>i(Xc.cancel)),this,e.disposables)}))}if(void 0===typeof r&&!r&&e.isTokenEmpty)throw new Oe.CancellationError;if(!r&&!e.isTokenEmpty)return{requiresPassword:o};if(t=await this.getXSRFToken(e.url,""),t){const o=await this.getSessionCookie(e.url,t,r||"");n=o.sessionCookieName,i=o.sessionCookieValue}else n="authservice_session",i=r,t=await this.getXSRFToken(e.url,`${n}=${i}`);return t&&n&&(i||e.isTokenEmpty)?(io(F.GetPasswordSuccess),{requestHeaders:{Cookie:`_xsrf=${t}; ${n}=${i||""}`,"X-XSRFToken":t},requiresPassword:o}):(io(F.GetPasswordFailure),{requiresPassword:o})}addAllowUnauthorized(e,t,n){if(e.startsWith("https")&&t&&this.agentCreator){const e=this.agentCreator.createHttpRequestAgent();return{...n,agent:e}}return n}async getXSRFToken(e,t){let n,i,r=new URL("login?",AE(e)).toString();""!=t?(r=new URL("tree",AE(e)).toString(),i={Connection:"keep-alive",Cookie:t}):i={Connection:"keep-alive"};const o=await this.makeRequest(r,{method:"get",redirect:"manual",headers:i});if(void 0!==o&&o.ok){const e=this.getCookies(o);e.has("_xsrf")&&(n=e.get("_xsrf")?.split(";")[0])}return n}async needPassword(e){return 200!==(await this.makeRequest(new URL("tree?",AE(e)).toString(),{method:"get",redirect:"manual",headers:{Connection:"keep-alive"}})).status}async makeRequest(e,t){const n=this.configService.getSettings(void 0).allowUnauthorizedRemoteConnection;try{return await this.requestCreator.getFetchMethod()(e,this.addAllowUnauthorized(e,!!n,t))}catch(n){if(n.message.indexOf("reason: self signed certificate")>=0){const i=gr.jupyterSelfCertEnable,r=gr.jupyterSelfCertClose,o=await this.appShell.showErrorMessage(gr.jupyterSelfCertFail(n.message),{modal:!0},i,r);if(o===i)return io(F.SelfCertsMessageEnabled),await this.configService.updateSetting("allowUnauthorizedRemoteConnection",!0,void 0,Oe.ConfigurationTarget.Workspace),this.requestCreator.getFetchMethod()(e,this.addAllowUnauthorized(e,!0,t));o===r&&io(F.SelfCertsMessageClose)}throw n}}async getSessionCookie(e,t,n){let i,r;const o=new URLSearchParams;o.append("_xsrf",t),o.append("password",n);const s=await this.makeRequest(new URL("login?",AE(e)).toString(),{method:"post",headers:{Cookie:`_xsrf=${t}`,Connection:"keep-alive","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},body:o.toString(),redirect:"manual"});if(302===s.status){const e=this.getCookies(s);e.size>0&&(i=e.entries().next().value[0],r=e.entries().next().value[1])}return{sessionCookieName:i,sessionCookieValue:r}}getCookies(e){const t=new Map,n=(e.headers.raw?e.headers.raw():e.headers)["set-cookie"];return n&&n.forEach((e=>{const n=e.substring(0,e.indexOf("=")),i=e.substring(e.indexOf("=")+1);t.set(n,i)})),t}onDidRemoveServers(e){e.forEach((e=>{e.id.startsWith("_builtin")&&this.savedConnectInfo.delete(e.handle)}))}}function AE(e){let t=e;return"/"!==t[t.length-1]&&(t=`${t}/`),t}class NE{constructor(e,t,n,i,r,o,s,a){this.appShell=e,this.multiStepFactory=t,this.asyncDisposableRegistry=n,this.configService=i,this.agentCreator=r,this.requestCreator=o,this.serverUriStorage=s,this.disposables=a,this.savedConnectInfo=new Map,this.serverUriStorage.onDidRemove(this.onDidRemoveServers,this,this.disposables)}async getPasswordConnectionInfo(e){if(!e.url||e.url.length<1)throw new Error("Invalid URL");if(!await this.isJupyterHub(e.url))throw new Error("Not a Jupyter Hub Url");const t=ME(e.url),n=e.disposables||[],i=!Array.isArray(e.disposables);let r=this.savedConnectInfo.get(e.handle);return r||(r=this.getJupyterHubConnectionInfo(t,e.validationErrorMessage).then((n=>((!n||n.requiresPassword&&1===Object.keys(n).length)&&(Cn(`Password for ${t} was invalid.`),this.savedConnectInfo.delete(e.handle)),n))),r.catch((()=>this.savedConnectInfo.delete(e.handle))),r.finally((()=>{i&&Ie(n)})).catch(ae),this.savedConnectInfo.set(e.handle,r)),r}async isJupyterHub(e){try{if(e.toLowerCase().includes("/user/")&&e.includes("token="))return!1;if(e.toLowerCase().includes("/user/")&&!e.includes("token="))return!0;const t=await this.makeRequest(new URL("hub/api",ME(e)).toString(),{method:"get"});if(200!==t.status)return!1;try{const n=await t.json();return En(`JupyterHub version is ${n&&n.version} for url ${e}`),n&&n.version}catch{}return!1}catch(e){return En(`Error in detecting whether url is isJupyterHub: ${e}`),!1}}async getJupyterHubConnectionInfo(e,t){try{const n=await this.getUserNameAndPassword(t);if(n.username||n.password){let t=await this.getJupyterHubConnectionInfoFromLogin(e,n.username,n.password);if(t){const e=0===Object.keys(t||{}).length,n=e?"emptyResponseFromLogin":"gotResponseFromLogin";io(F.CheckPasswordJupyterHub,void 0,{failed:e,info:n})}else{io(F.CheckPasswordJupyterHub,void 0,{failed:!0,info:"emptyResponseFromLogin"}),t=await this.getJupyterHubConnectionInfoFromApi(e,n.username,n.password);const i=0===Object.keys(t||{}).length,r=i?"emptyResponseFromApi":"gotResponseFromApi";io(F.CheckPasswordJupyterHub,void 0,{failed:i,info:r})}return t}return io(F.CheckPasswordJupyterHub,void 0,{failed:!1,info:"passwordNotRequired"}),{requiresPassword:!1}}catch(e){throw io(F.CheckPasswordJupyterHub,void 0,{failed:!0,info:"failure"}),e}}async getJupyterHubConnectionInfoFromLogin(e,t,n){const i=new URL(e),r=`${i.protocol}//${i.host}`,o=new URLSearchParams;o.append("username",t||""),o.append("password",n||"");let s=await this.makeRequest(`${r}/hub/login?next=`,{method:"POST",headers:{Connection:"keep-alive",Referer:`${r}/hub/login`,"content-type":"application/x-www-form-urlencoded;charset=UTF-8"},body:o.toString(),redirect:"manual"});if(s&&302===s.status){const e=[...this.getCookies(s).entries()].reduce(((e,t)=>`${e};${t[0]}=${t[1]}`),"");if(s=await this.makeRequest(`${r}/hub/api/users/${t}/tokens`,{method:"POST",headers:{Connection:"keep-alive",Cookie:e,Referer:`${r}/hub/login`}}),s.ok&&200===s.status){const n=await s.json();if(n&&n.token&&n.id)return await this.makeRequest(`${r}/hub/api/users/${t}/server`,{method:"POST",headers:{Connection:"keep-alive",Cookie:e,Referer:`${r}/hub/login`}}),this.asyncDisposableRegistry.push({dispose:async()=>{this.makeRequest(`${r}/hub/api/users/${t}/tokens/${n.id}`,{method:"DELETE",headers:{Connection:"keep-alive",Cookie:e,Referer:`${r}/hub/login`}}).catch(ae)}}),{requestHeaders:{},remappedBaseUrl:`${r}/user/${t}`,remappedToken:n.token,requiresPassword:!0}}}}async getJupyterHubConnectionInfoFromApi(e,t,n){const i=new URL(e),r=`${i.protocol}//${i.host}`,o=await this.makeRequest(`${r}/hub/api/authorizations/token`,{method:"POST",headers:{Connection:"keep-alive","content-type":"application/json;charset=UTF-8"},body:`{ "username": "${t||""}", "password": "${n||""}"  }`,redirect:"manual"});if(o.ok&&200===o.status){const e=await o.json();if(e&&e.user&&e.user.server&&e.token)return{requestHeaders:{},remappedBaseUrl:`${r}${e.user.server}`,remappedToken:e.token,requiresPassword:!0}}return{requiresPassword:!1}}addAllowUnauthorized(e,t,n){if(e.startsWith("https")&&t&&this.agentCreator){const e=this.agentCreator.createHttpRequestAgent();return{...n,agent:e}}return n}async getUserNameAndPassword(e){const t=this.multiStepFactory.create(),n={username:"",password:"",validationMessage:e};return await t.run(this.getUserNameMultiStep.bind(this),n),n}async getUserNameMultiStep(e,t){if(t.username=await e.showInputBox({title:gr.jupyterSelectUserAndPasswordTitle,prompt:gr.jupyterSelectUserPrompt,validate:this.validateUserNameOrPassword,validationMessage:t.validationMessage,value:""}),t.username)return this.getPasswordMultiStep.bind(this)}async validateUserNameOrPassword(e){}async getPasswordMultiStep(e,t){t.password=await e.showInputBox({title:gr.jupyterSelectUserAndPasswordTitle,prompt:gr.jupyterSelectPasswordPrompt,validate:this.validateUserNameOrPassword,value:"",password:!0})}async makeRequest(e,t){const n=this.configService.getSettings(void 0).allowUnauthorizedRemoteConnection;try{return await this.requestCreator.getFetchMethod()(e,this.addAllowUnauthorized(e,!!n,t))}catch(n){if(n.message.indexOf("reason: self signed certificate")>=0){const i=gr.jupyterSelfCertEnable,r=gr.jupyterSelfCertClose,o=await this.appShell.showErrorMessage(gr.jupyterSelfCertFail(n.message),{modal:!0},i,r);if(o===i)return io(F.SelfCertsMessageEnabled),await this.configService.updateSetting("allowUnauthorizedRemoteConnection",!0,void 0,Oe.ConfigurationTarget.Workspace),this.requestCreator.getFetchMethod()(e,this.addAllowUnauthorized(e,!0,t));o===r&&io(F.SelfCertsMessageClose)}throw n}}getCookies(e){const t=new Map,n=(e.headers.raw?e.headers.raw():e.headers)["set-cookie"];return n&&n.forEach((e=>{const n=e.substring(0,e.indexOf("=")),i=e.substring(e.indexOf("=")+1);t.set(n,i)})),t}onDidRemoveServers(e){e.forEach((e=>{e.id.startsWith("_builtin")&&this.savedConnectInfo.delete(e.handle)}))}}function ME(e){let t=e;return"/"!==t[t.length-1]&&(t=`${t}/`),t}var LE=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},jE=function(e,t){return function(n,i){t(n,i,e)}};const FE="user-jupyter-server-uri-list",UE="user-jupyter-server-uri-list-version2",qE="_builtin.jupyterServerUrlProvider.uriList";let KE=class extends dc{constructor(e,t,i,r,o,s,a,c,l,d,u,h,f,m,g,v,y){super(),this.applicationShell=t,this.jupyterConnection=r,this.isWebExtension=o,this.encryptedStorage=s,this.serverUriStorage=a,this.globalMemento=c,this.commandManager=h,this.context=g,this.fs=v,this.jupyterServerProviderRegistry=y,this.id=n,this.extensionId=p,this.documentation=Oe.Uri.parse("https://aka.ms/vscodeJuptyerExtKernelPickerExistingServer"),this.displayName=gr.UserJupyterServerUrlProviderDisplayName,this.detail=gr.UserJupyterServerUrlProviderDetail,this._onDidChangeHandles=this._register(new Oe.EventEmitter),this.onDidChangeHandles=this._onDidChangeHandles.event,this._onDidChangeServers=this._register(new Oe.EventEmitter),this.onDidChangeServers=this._onDidChangeServers.event,l.push(this),this.oldStorage=new zE(s,c),this.newStorage=new YE(s),this.secureConnectionValidator=new BE(t,c),this.jupyterServerUriInput=new VE(e,t,m),this.jupyterServerUriDisplayName=new $E(t),this.jupyterPasswordConnect=new OE(t,i,f,m,a,l),this.jupyterHubPasswordConnect=new NE(t,d,u,i,f,m,a,l)}activate(){const e=this.jupyterServerProviderRegistry.createJupyterServerCollection(p,this.id,this.displayName,this);this.disposables.push(e),e.commandProvider=this,e.documentation=this.documentation,this.onDidChangeHandles((()=>this._onDidChangeServers.fire()),this,this.disposables),this.disposables.push(this.commandManager.registerCommand("dataScience.ClearUserProviderJupyterServerCache",(async()=>{await Promise.all([this.oldStorage.clear().catch(ae),this.newStorage.clear().catch(ae),this.fs.delete(Oe.Uri.joinPath(this.context.globalStorageUri,Fm)).catch(ae)]),this._onDidChangeHandles.fire()}))),this.initializeServers().catch(ae)}async resolveJupyterServer(e,t){const n=await this.getServerUri(e.id);return{...e,connectionInformation:{id:e.id,label:e.label,baseUrl:Oe.Uri.parse(n.baseUrl),token:n.token,headers:n.authorizationHeader,mappedRemoteNotebookDir:n.mappedRemoteNotebookDir?Oe.Uri.file(n.mappedRemoteNotebookDir):void 0,webSocketProtocols:n.webSocketProtocols}}}async handleCommand(e,t){const n=new Oe.CancellationTokenSource;this.disposables.push(n),this.disposables.push(new Oe.Disposable((()=>n.cancel())));try{const t="url"in e?e.url:void 0,i=await this.captureRemoteJupyterUrl(n.token,t);if(!i||i===Xc.cancel)throw new Oe.CancellationError;if(i&&i instanceof Xc)return;const r=(await this.provideJupyterServers(n.token)).find((e=>e.id===i));if(!r)throw new Error(`Server ${i} not found`);return r}catch(e){if(e instanceof Oe.CancellationError)throw e;return void Sn("Failed to select a Jupyter Server",e)}finally{n.cancel(),n.dispose()}}async provideCommands(e,t){let n="";try{e=(e||"").trim(),["http:","https:"].includes(new URL(e.trim()).protocol.toLowerCase())&&(n=e)}catch{}return n?[{label:gr.connectToToTheJupyterServer(n),url:n}]:[{label:gr.jupyterSelectUriCommandLabel,canBeAutoSelected:!0}]}async provideJupyterServers(e){return await this.initializeServers(),(await this.newStorage.getServers(!1)).map((e=>({id:e.handle,label:e.serverInfo.displayName})))}async removeJupyterServer(e){await this.initializeServers(),await this.newStorage.remove(e.id),this._onDidChangeHandles.fire()}migrateOldServers(){return this.migratedOldServers||(this.migratedOldServers=this.oldStorage.getServers().then((async e=>{await this.newStorage.migrate(e,this.serverUriStorage);const t=this.globalMemento.get(v.JupyterServerUriList);if(!Array.isArray(t)||0===t.length)return;const n=await this.encryptedStorage.retrieve(v.JupyterServerRemoteLaunchService,v.JupyterServerRemoteLaunchUriListKey);if(!n)return;const i=[],r=n.split(v.JupyterServerRemoteLaunchUriSeparator);r.slice(0,Math.min(r.length,t.length)).forEach(((n,r)=>{try{const o=n.split(v.JupyterServerRemoteLaunchNameSeparator),s=o[0];if(s===v.JupyterServerLocalLaunch)return;if(s.startsWith(C.REMOTE_URI))return;const a=HE(s,o[1]||s);if(a&&e.every((e=>e.uri!==s))){const e=Kf()();i.push({time:t[r].time,handle:e,uri:s,serverInfo:a})}}catch{}})),i.length>0&&await Promise.all(i.map((async e=>{try{await this.addNewServer(e),await this.serverUriStorage.add({id:this.id,handle:e.handle,extensionId:p},{time:e.time})}catch{}})))})).catch(ae)),this.migratedOldServers}initializeServers(){if(this._cachedServerInfoInitialized)return this._cachedServerInfoInitialized;const e=ie();return this._cachedServerInfoInitialized=e.promise,(async()=>{const t="NewUserUriMigrationCompleted";this.globalMemento.get(t)!==Oe.env.machineId&&(await Promise.all([this.migrateOldServers().catch(ae),this.newStorage.migrationDone]),await this.globalMemento.update(t,Oe.env.machineId)),this.newStorage.getServers(!1).catch(ae),e.resolve()})().then((()=>e.resolve()),(t=>e.reject(t))).catch(ae),this._cachedServerInfoInitialized}recommendInstallingJupyterHubExtension(){if(!Oe.workspace.getConfiguration("jupyter").get("bypassJupyterHubExtensionCheck"))throw Oe.extensions.getExtension(h)?this.applicationShell.showInformationMessage(gr.useJupyterHubExtension,{modal:!0,detail:gr.useJupyterHubExtensionDetail}).then((()=>{Oe.commands.executeCommand("notebook.selectKernel",{notebookEditor:Oe.window.activeNotebookEditor}).then(ae,ae)}),ae):this.applicationShell.showInformationMessage(gr.installJupyterHub,{modal:!0,detail:gr.installJupyterHubDetail},lr.install,lr.moreInfo).then((e=>{e===lr.install?Oe.commands.executeCommand("workbench.extensions.installExtension",h,{context:{skipWalkthrough:!0}}).then(ae,ae):e===lr.moreInfo&&Oe.env.openExternal(Oe.Uri.parse("https://marketplace.visualstudio.com/items?itemName=ms-toolsai.jupyter-hub")).then(ae,ae)}),ae),new Oe.CancellationError}async captureRemoteJupyterUrl(e,t=""){await this.initializeServers();const n=[];let i,r={baseUrl:"",displayName:"",token:""},o="",s=!1,a=!1,c="Get Url",l="Get Url",d=t,u=!1;if(t){const e=await this.jupyterServerUriInput.parseUserUriAndGetValidationError(t);"string"==typeof e.validationError?(o=e.validationError,c="Get Url"):(u=!0,r=e.jupyterServerUri,c="Check Passwords")}try{let h=!1,f=!1;for(;;)try{if(i=Kf()(),"Get Url"===c){u=!1,c="Check Passwords",l=void 0;const e=o;o="";const i=await this.jupyterServerUriInput.getUrlFromUser(d||t,e,n);r=i.jupyterServerUri,d=i.url}if(e.isCancellationRequested)return Xc.cancel;const m=[];if("Check Passwords"===c){c="Check Insecure Connections",l=u&&t?void 0:"Get Url";try{const e=o;o="",h=await this.jupyterHubPasswordConnect.isJupyterHub(r.baseUrl),h&&this.recommendInstallingJupyterHubExtension();const t=h?await this.jupyterHubPasswordConnect.getPasswordConnectionInfo({url:r.baseUrl,handle:i,displayName:r.displayName,validationErrorMessage:e,disposables:m}):await this.jupyterPasswordConnect.getPasswordConnectionInfo({url:r.baseUrl,isTokenEmpty:0===r.token.length,handle:i,validationErrorMessage:e,disposables:m});s=t.requiresPassword,r.authorizationHeader=t.requestHeaders,f=!1}catch(e){if(f=!1,e instanceof Oe.CancellationError||e==Xc.back||e==Xc.cancel)throw e;if(vo.isSelfCertsError(e));else if(yo.isSelfCertsExpiredError(e));else{WE(i,r.baseUrl,h,"ConnectionFailure");const t=/(https?:\/\/[^\s]+)/g,n=(e.message||e.toString()).replace(t,(e=>`[${e}](${e})`));if(o=(this.isWebExtension?gr.remoteJupyterConnectionFailedWithoutServerWithErrorWeb:gr.remoteJupyterConnectionFailedWithoutServerWithError)(n),!(r.token.length>0&&(e.message||"").toLowerCase()==="Failed to fetch".toLowerCase())){c="Get Url";continue}f=!0}}finally{this.disposables.push(...m)}}if(e.isCancellationRequested)return Xc.cancel;if("Check Insecure Connections"===c&&(c="Verify Connection",l=s&&0===r.token.length?"Check Passwords":"Get Url","Get Url"===l&&(l=u&&t?void 0:"Get Url"),!s&&0===r.token.length&&"http:"===new URL(r.baseUrl).protocol.toLowerCase())&&(a=!0,Ie(m),!await this.secureConnectionValidator.promptToUseInsecureConnections()))return WE(i,r.baseUrl,h,"InsecureHTTP"),Xc.cancel;if(e.isCancellationRequested)return Xc.cancel;if("Verify Connection"===c)try{c="Get Display Name",await this.jupyterConnection.validateRemoteUri({id:this.id,handle:i,extensionId:p},r,!0)}catch(e){if(Cn("Uri verification error",e),f&&o){c="Get Url";continue}if(e instanceof Oe.CancellationError||e==Xc.back||e==Xc.cancel)throw e;if(vo.isSelfCertsError(e)){o=gr.jupyterSelfCertFailErrorMessageOnly,c="Get Url",WE(i,r.baseUrl,h,"SelfCert");continue}if(yo.isSelfCertsExpiredError(e)){o=gr.jupyterSelfCertExpiredErrorMessageOnly,c="Get Url",WE(i,r.baseUrl,h,"ExpiredCert");continue}if(s&&0===r.token.length){o=gr.passwordFailure,c="Check Passwords",WE(i,r.baseUrl,h,"AuthFailure");continue}{WE(i,r.baseUrl,h,"ConnectionFailure");const t=/(https?:\/\/[^\s]+)/g,n=(e.message||e.toString()).replace(t,(e=>`[${e}](${e})`));o=(this.isWebExtension,gr.remoteJupyterConnectionFailedWithoutServerWithErrorWeb)(n),c="Get Url";continue}}finally{Ie(m)}if(e.isCancellationRequested)return Xc.cancel;if("Get Display Name"===c){Ie(m),l=a?"Check Insecure Connections":s&&0===r.token.length?"Check Passwords":"Get Url","Get Url"===l&&(l=u&&t?void 0:"Get Url"),r.displayName=await this.jupyterServerUriDisplayName.getDisplayName(i,r.displayName||new URL(r.baseUrl).hostname);break}}catch(e){if(e instanceof Oe.CancellationError||e===Xc.cancel)return Xc.cancel;if(e===Xc.back){if(!l)return Xc.back;c=l;continue}throw e}return e.isCancellationRequested?Xc.cancel:(await this.addNewServer({handle:i,uri:d,serverInfo:r}),WE(i,r.baseUrl,h),i)}catch(e){if(e instanceof Oe.CancellationError)return Xc.cancel;throw e}finally{Ie(n)}}async addNewServer(e){await this.newStorage.add(e),this._onDidChangeHandles.fire()}async getServerUri(e){const t=(await this.newStorage.getServers(!1)).find((t=>t.handle===e));if(!t)throw new Error("Server not found");const n=t.serverInfo,i=this.jupyterServerUriDisplayName.displayNamesOfHandles.get(e);i&&(n.displayName=i);const r=await this.jupyterHubPasswordConnect.isJupyterHub(n.baseUrl);let o=Object.assign({},n);try{const t=r?await this.jupyterHubPasswordConnect.getPasswordConnectionInfo({url:n.baseUrl,handle:e,displayName:n.displayName}):await this.jupyterPasswordConnect.getPasswordConnectionInfo({url:n.baseUrl,isTokenEmpty:0===n.token.length,handle:e});o=Object.assign({},n,{authorizationHeader:t.requestHeaders||n.authorizationHeader}),r&&t.remappedBaseUrl&&(o.baseUrl=t.remappedBaseUrl),r&&t.remappedToken&&(o.token=t.remappedToken)}catch(e){Sn("Failed to validate Password info",e)}return o}};KE=LE([Kn(),jE(0,zn(ri)),jE(1,zn(Jn)),jE(2,zn(ji)),jE(3,zn(xs)),jE(4,zn(Pi)),jE(5,zn(si)),jE(6,zn(vi)),jE(7,zn(Oi)),jE(7,Nc(Ai)),jE(8,zn(Ri)),jE(9,zn(el)),jE(10,zn(Bi)),jE(11,zn(Gn)),jE(12,zn(wi)),jE(12,Qi()),jE(13,zn(_i)),jE(14,zn(Ui)),jE(15,zn(La)),jE(16,zn(Ei))],KE);let VE=class{constructor(e,t,n){this.clipboard=e,this.applicationShell=t,this.requestCreator=n}async getUrlFromUser(e,t="",n){if(!e)try{const t=await this.clipboard.readText().catch((()=>"")),n=Oe.Uri.parse(t.trim(),!0);e=t&&n&&n.scheme.toLowerCase().startsWith("http")?t:""}catch{}const i=this.applicationShell.createInputBox();n.push(i),i.title=gr.jupyterSelectUriInputTitle,i.placeholder=gr.jupyterSelectUriInputPlaceholder,i.value=e,i.validationMessage=t,i.buttons=[Oe.QuickInputButtons.Back],i.ignoreFocusOut=!0,i.show();const r=ie();return i.onDidChangeValue((()=>i.validationMessage=""),this,n),i.onDidHide((()=>r.reject(Xc.cancel)),this,n),i.onDidTriggerButton((e=>{e===Oe.QuickInputButtons.Back&&r.reject(Xc.back)}),this,n),i.onDidAccept((async()=>{const e=await this.parseUserUriAndGetValidationError(i.value);"string"!=typeof e.validationError?r.resolve(e):i.validationMessage=e.validationError})),r.promise}async parseUserUriAndGetValidationError(e){const t=e.trim().replace(/\/(lab|tree)(\??)$/,""),n=HE(t,"");return n?(n.baseUrl=await async function(e,t){try{if(e=HE(e,"")?.baseUrl||e,"/"===new URL(e).pathname)return e;const n=e.indexOf("token=")>0?e.substring(0,e.indexOf("token=")):e,i=t.getFetchMethod(),r=(await i(n,{method:"GET",redirect:"manual"})).headers.get("location");if(r&&r.includes("login?"))return r.substring(0,r.indexOf("login?"))}catch(e){En("Unable to identify the baseUrl of the Jupyter Server",e)}}(t,this.requestCreator)||n.baseUrl,t.toLowerCase().startsWith("http:")||t.toLowerCase().startsWith("https:")?{jupyterServerUri:n,url:t,validationError:void 0}:{validationError:gr.jupyterSelectURIMustBeHttpOrHttps}):{validationError:gr.jupyterSelectURIInvalidURI}}};function WE(e,t,i,r){t=t.trim().toLowerCase();const o=fo({handle:e,extensionId:p,id:n});Promise.all([jr(t.toLowerCase()),jr(o.toLowerCase())]).then((([e,n])=>{io(F.EnterRemoteJupyterUrl,void 0,{serverIdHash:n,failed:!!r,baseUrlHash:e,isJupyterHub:i,isLocalHost:["localhost","127.0.0.1","::1"].includes(new URL(t).hostname),reason:r})})).catch((e=>Sn(`Failed to hash remote url ${t}`,e)))}VE=LE([jE(0,zn(ri)),jE(1,zn(Jn)),jE(2,zn(_i))],VE);let $E=class{constructor(e){this.applicationShell=e,this.displayNamesOfHandles=new Map}async getDisplayName(e,t){const n=[];try{const i=this.applicationShell.createInputBox();n.push(i),i.ignoreFocusOut=!0,i.title=gr.jupyterRenameServer,i.value=t,i.placeholder=gr.jupyterServerUriDisplayNameInputPlaceholder,i.buttons=[Oe.QuickInputButtons.Back],i.show();const r=ie();return n.push(i.onDidHide((()=>r.reject(Xc.cancel)))),i.onDidTriggerButton((e=>{e===Oe.QuickInputButtons.Back&&r.reject(Xc.back)}),this,n),i.onDidAccept((()=>{const n=i.value.trim()||t;this.displayNamesOfHandles.set(e,n),r.resolve(n)}),this,n),await r.promise}finally{Ie(n)}}};$E=LE([jE(0,zn(Jn))],$E);let BE=class{constructor(e,t){this.applicationShell=e,this.globalMemento=t}async promptToUseInsecureConnections(){if(this.globalMemento.get("DataScienceAllowInsecureConnections",!1))return!0;const e=[],t=ie();try{const n=this.applicationShell.createQuickPick();e.push(n),n.canSelectMany=!1,n.ignoreFocusOut=!0,n.title=gr.insecureSessionMessage,n.buttons=[Oe.QuickInputButtons.Back],n.items=[{label:lr.bannerLabelYes},{label:lr.bannerLabelNo}],n.show(),e.push(n.onDidHide((()=>t.reject(Xc.cancel)))),n.onDidTriggerButton((e=>{e===Oe.QuickInputButtons.Back&&t.reject(Xc.back)}),this,e),n.onDidAccept((()=>t.resolve(n.selectedItems.some((e=>e.label===lr.bannerLabelYes)))),this,e)}finally{Ie(e)}return t.promise}};function HE(e,t){if(!e.startsWith(C.REMOTE_URI))try{const n=new URL(e);return{baseUrl:`${n.protocol}//${n.host}${"/lab"===n.pathname||"/tree"===n.pathname?"":n.pathname}`,token:n.searchParams.get("token")||"",displayName:t||n.hostname}}catch(t){return void Sn(`Failed to parse URI ${e}`,t)}}BE=LE([jE(0,zn(Jn)),jE(1,zn(Oi)),jE(1,Nc(Ai))],BE);let zE=class{constructor(e,t){this.encryptedStorage=e,this.globalMemento=t}async getServers(){const e=this.globalMemento.get(qE),t=await this.encryptedStorage.retrieve(v.JupyterServerRemoteLaunchService,FE);if(!t||!e||0===e.length)return[];const n=t.split(v.JupyterServerRemoteLaunchUriSeparator);if(0===n.length||n.length!==e.length)return Sn("Invalid server list, unable to retrieve server info"),[];const i=[];for(let t=0;t<n.length;t+=1){if(n[t].startsWith(C.REMOTE_URI))continue;const r=HE(n[t]);r?i.push({handle:e[t].handle,uri:n[t],serverInfo:r}):Sn("Unable to parse server info",n[t])}return i}async clear(){await this.encryptedStorage.store(v.JupyterServerRemoteLaunchService,FE,"").catch(ae),await this.globalMemento.update(qE,[]).then(ae,ae)}};function JE(e){return e.map((e=>({handle:e.handle,uri:e.uri,displayName:e.serverInfo.displayName})))}function GE(e){const t=[];return e.forEach((e=>{const n=HE(e.uri,e.displayName);n&&t.push({handle:e.handle,uri:e.uri,serverInfo:n})})),t}zE=LE([jE(0,zn(si)),jE(1,zn(Oi)),jE(1,Nc(Ai))],zE);let YE=class{get migrationDone(){return this._migrationDone.promise}constructor(e){this.encryptedStorage=e,this.updatePromise=Promise.resolve(),this._migrationDone=ie()}async migrate(e,t){const n=await this.encryptedStorage.retrieve(v.JupyterServerRemoteLaunchService,UE);if("string"==typeof n){let e=[],i=!1;try{const t=JSON.parse(n||"[]");i=t.some((e=>e.displayName)),e=GE(t)}catch{return}return i||await this.migrateDisplayNames(e,t),this._migrationDone.resolve()}this.encryptedStorage.store(v.JupyterServerRemoteLaunchService,"user-jupyter-server-uri-list-v2",void 0).catch(ae),await this.migrateDisplayNames(e,t),await this.encryptedStorage.store(v.JupyterServerRemoteLaunchService,UE,JSON.stringify(e)),this._migrationDone.resolve()}async migrateDisplayNames(e,t){if(0===e.length)return;const i=await t.getAll().catch((e=>(Sn("Failed to get all servers from storage",e),[]))),r=new Map(i.filter((e=>e.provider.extensionId===p&&e.provider.id===n)).map((e=>[e.provider.handle,e.displayName])));e.forEach((e=>{e.serverInfo.displayName=r.get(e.handle)||e.uri})),await this.encryptedStorage.store(v.JupyterServerRemoteLaunchService,UE,JSON.stringify(JE(e)))}async getServers(e){if(this.servers&&!e)return this.servers;const t=await this.encryptedStorage.retrieve(v.JupyterServerRemoteLaunchService,UE);if(!t||"[]"===t)return[];try{return this.servers=GE(JSON.parse(t))}catch{return[]}}async add(e){this.servers&&(this.servers=this.servers.filter((t=>t.handle!==e.handle)).concat(e)),await(this.updatePromise=this.updatePromise.then((async()=>{const t=(await this.getServers(!0)).concat(e);this.servers=t,await this.encryptedStorage.store(v.JupyterServerRemoteLaunchService,UE,JSON.stringify(JE(t)))})).catch(ae))}async remove(e){this.servers&&(this.servers=this.servers.filter((t=>t.handle!==e))),await(this.updatePromise=this.updatePromise.then((async()=>{const t=(await this.getServers(!0)).filter((t=>t.handle!==e));return this.servers=t,this.encryptedStorage.store(v.JupyterServerRemoteLaunchService,UE,JSON.stringify(JE(t)))})).catch(ae))}async clear(){this.servers=[],await(this.updatePromise=this.updatePromise.then((async()=>{this.servers=[],await this.encryptedStorage.store(v.JupyterServerRemoteLaunchService,UE,void 0)})).catch(ae))}};YE=LE([jE(0,zn(si))],YE);var QE=function(e,t){return function(n,i){t(n,i,e)}};let XE=class extends dc{constructor(e,n){super(),this.serverSelector=e,this.uriProviderRegistration=n,this.handleMappings=new Map,this._onDidChangeHandles=new Oe.EventEmitter,this.extensionId=p,this.id=t,this.displayName="Jupyter Server for Testing",this.onDidChangeHandles=this._onDidChangeHandles.event}activate(){this.disposables.push(this.uriProviderRegistration.registerProvider(this,p)),this.disposables.push(Oe.commands.registerCommand("jupyter.selectjupyteruri",this.selectJupyterUri,this))}async getServerUri(e){if(!this.handleMappings.has(e))throw new Error(`Invalid handle ${e}`);return this.handleMappings.get(e).server}async getHandles(){return Array.from(this.handleMappings.keys())}async selectJupyterUri(e){kn(`Setting Jupyter Server URI to remote: ${e}`);const t=e.toString(!0),n=new URL(t),i=`${n.protocol}//${n.host}${"/lab"===n.pathname?"":n.pathname}`,r=n.searchParams.get("token")??"",o=await Mr(e.toString(!0),"SHA-1"),s={baseUrl:i,displayName:this.displayName,token:r};this.handleMappings.set(o,{uri:e,server:s}),await this.serverSelector.addJupyterServer({id:this.id,handle:o,extensionId:p}),this._onDidChangeHandles.fire()}};XE=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),QE(0,zn(Ps)),QE(1,zn(gi))],XE);var ZE=function(e,t){return function(n,i){t(n,i,e)}};let ex=class{constructor(e,t,n){this.disposables=e,this.workspace=t,this.commandManager=n}activate(){this.registerCommandsIfTrusted()}dispose(){this.disposables.forEach((e=>e.dispose()))}registerCommandsIfTrusted(){this.workspace.isTrusted&&this.registerCommand(N.ContinueEditSessionInCodespace,this.continueEditSessionInCodespace)}registerCommand(e,t){const n=this.commandManager.registerCommand(e,t,this);this.disposables.push(n)}async continueEditSessionInCodespace(){await Oe.commands.executeCommand("_workbench.editSessions.actions.continueEditSession.github.codespaces.continueEditSessionInCodespaceWithJupyterServer")}};ex=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),ZE(0,zn(Ri)),ZE(1,zn(Qn)),ZE(2,zn(Gn))],ex);let tx=class{constructor(e){this.extensions=e}activate(){this.eagerlyActivateOtherExtensions().catch(ae)}async eagerlyActivateOtherExtensions(){await Promise.all(this.extensions.all.filter((e=>e.packageJSON?.contributes?.pythonRemoteServerProvider)).map((e=>e.isActive?Promise.resolve():e.activate().then(ae,ae))))}};tx=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(qi))],tx);var nx=function(e,t){return function(n,i){t(n,i,e)}};let ix=class{constructor(e,t,n,i,r){this.kernelProvider=e,this.disposables=t,this.jupyterUrisRegistration=n,this.extensions=i,this.serverProviders=r}activate(){this.kernelProvider.onDidCreateKernel((e=>this.addOnStartHooks(e)),this,this.disposables)}addOnStartHooks(e){const t=e.kernelConnectionMetadata;ta(t)&&t.serverProviderHandle.extensionId!==p&&"startUsingRemoteKernelSpec"===t.kind&&e.addHook("didStart",(async(n,i)=>{if(!n)return;const r=this.serverProviders.jupyterCollections.find((e=>e.extensionId===t.serverProviderHandle.extensionId&&e.id===t.serverProviderHandle.id));if(!r)return void Sn(`Unable to find Jupyter Server Provider for ${t.id} with provider ${t.serverProviderHandle.extensionId}$${t.serverProviderHandle.id}`);if(!r.serverProvider?.onStartKernel)return;const o=r.serverProvider.onStartKernel.bind(r.serverProvider),s=this.jupyterUrisRegistration.providers.find((e=>e.extensionId===t.serverProviderHandle.extensionId&&e.id===t.serverProviderHandle.id));if(!s)return void Sn(`Unable to find Provider for ${t.id} with provider ${t.serverProviderHandle.extensionId}$${t.serverProviderHandle.id}`);const a=s.servers;if(!a)return void Sn(`Unable to find servers for kernel ${t.id} with provider ${t.serverProviderHandle.extensionId}$${t.serverProviderHandle.id}`);const c=a.find((e=>e.id===t.serverProviderHandle.handle));if(!c)return void Sn(`Unable to find server for kernel ${t.id} with provider ${t.serverProviderHandle.extensionId}$${t.serverProviderHandle.id} and handle ${t.serverProviderHandle.id}}`);const l=Date.now();try{const t=this.extensions.getExtension(s.extensionId),r=gr.runningKernelStartupHooksFor(t?.packageJSON?.displayName||s.extensionId);await Na.wrapAndReportProgress(e.resourceUri,r,(()=>xa(i,o({uri:e.uri,server:c,session:n},i))))}catch(e){if(e instanceof Oe.CancellationError)return;Cn(`Startup hook for ${t.serverProviderHandle.extensionId}$${t.serverProviderHandle.id} failed`,e)}finally{const e=Date.now()-l;io(F.JupyterKernelStartupHook,{duration:e},{extensionId:t.serverProviderHandle.extensionId,providerId:t.serverProviderHandle.id}),e>1e3&&En(`Kernel Startup hook for ${fo(t.serverProviderHandle)} took ${e}ms`)}}),this,this.disposables)}};ix=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),nx(0,zn(na)),nx(1,zn(Ri)),nx(2,zn(gi)),nx(3,zn(qi)),nx(4,zn(Ei))],ix);var rx=function(e,t){return function(n,i){t(n,i,e)}};let ox,sx=class{constructor(e,t){this.commands=e,this.uriStorage=t}activate(){this.commands.registerCommand("jupyter.getUsedAzMLServerHandles",(async()=>{const e=[];return(await this.uriStorage.getAll()).forEach((t=>{t.provider.extensionId.toLowerCase()==="ms-toolsai.vscode-ai".toLowerCase()&&e.push(t.provider)})),e}))}};function ax(e,t,n){t.addSingleton(_a,Rk),t.addSingleton(_a,Hk),t.addSingleton(_a,Sk),t.addSingleton(_a,kk),t.addSingleton(Pk,Ik),t.addSingleton(_a,Ik),t.addSingleton(_a,tx),t.addSingleton(_a,XE),t.add(ui,pk),t.add(di,fk),t.addSingleton(_a,vk),t.addSingleton(_a,ex),t.addSingleton(Qk,tE),t.addBinding(Qk,_a),t.add(wa,Jk),t.addSingleton(fa,Kk),t.addSingleton(jk,jk),t.addSingleton(_a,RE),function(e,t){t&&e.addSingleton(_a,wE),e.addSingleton(EE,EE),e.addSingleton(_a,IE),e.addSingleton(_a,aE),e.addSingleton(mE,mE),e.addBinding(mE,_a),e.addSingleton(zb,vE)}(t,n),function(e,t){!function(e,t){t&&Oe.commands.registerCommand("dataScience.ClearCache",(async()=>{const t=[];for(const n of e.globalState.keys())t.push(e.globalState.update(n,void 0).then(ae,ae));for(const n of e.workspaceState.keys())t.push(e.workspaceState.update(n,void 0).then(ae,ae));t.push(Oe.commands.executeCommand(N.ClearSavedJupyterUris).then(ae,ae)),await Promise.all(t).catch(ae),await Promise.all([Oe.workspace.fs.delete(Oe.Uri.joinPath(e.globalStorageUri,"lastExecutedRemoteCell.json")).then(ae,ae),Oe.workspace.fs.delete(Oe.Uri.joinPath(e.globalStorageUri,"remoteServersMRUList.json")).then(ae,ae),Oe.workspace.fs.delete(Oe.Uri.joinPath(e.globalStorageUri,Fm)).then(ae,ae)]),kn("Cache cleared")}))}(e,t)}(e,n),t.addSingleton(_a,KE),t.addSingleton(_a,ix),t.addSingleton(_a,sx)}sx=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),rx(0,zn(Gn)),rx(1,zn(vi))],sx);class cx{constructor(e,t,n){this.disposedCallback=n,this.callback=e,this.viewChanged=t}async dispose(){this.disposedCallback()}onMessage(e,t){this.callback(e,t)}onChangeViewState(e){this.viewChanged(e)}}function lx(e,t){return ox&&ox.hasOwnProperty(e)?ox[e]:t}function dx(e,...t){return e.replace(/{(\d+)}/g,((e,n)=>void 0===t[n]?e:t[n]))}const ux=/^\s*((?<StartRange>-?\d+:)|(?<StopRange>-?:\d+)|(?:(?<Start>-?\d+)(?::(?<Stop>-?\d+))?(?::(?<Step>-?\d+))?))\s*$/;function px(e){let t=e.length-2;return"["+e.map((()=>t>0?(t-=1,"0"):":")).join(", ")+"]"}var hx=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class fx{get onDidDispose(){return this._onDidDisposeWebviewPanel.event}constructor(e,t,n,i){this.configService=e,this.workspaceService=t,this.rootPath=n,this.scripts=i,this.disposed=!1,this.themeIsDarkPromise=ie(),this.webviewInit=ie(),this._disposables=[],this.onMessageListeners=[],this._onDidDisposeWebviewPanel=new Oe.EventEmitter,this.onDataScienceSettingsChanged=async()=>{const e=JSON.stringify(await this.generateDataScienceExtraSettings());this.postMessageInternal(Os.UpdateSettings,e).catch(ae)},this.onWebViewLoadFailed=async()=>{this.dispose()},this.onPossibleSettingsChange=async e=>{if(e.affectsConfiguration("workbench.colorTheme")||e.affectsConfiguration("editor.fontSize")||e.affectsConfiguration("editor.fontFamily")||e.affectsConfiguration("editor.cursorStyle")||e.affectsConfiguration("editor.cursorBlinking")||e.affectsConfiguration("editor.autoClosingBrackets")||e.affectsConfiguration("editor.autoClosingQuotes")||e.affectsConfiguration("editor.autoSurround")||e.affectsConfiguration("editor.autoIndent")||e.affectsConfiguration("editor.scrollBeyondLastLine")||e.affectsConfiguration("editor.fontLigatures")||e.affectsConfiguration("editor.scrollbar.verticalScrollbarSize")||e.affectsConfiguration("editor.scrollbar.horizontalScrollbarSize")||e.affectsConfiguration("files.autoSave")||e.affectsConfiguration("files.autoSaveDelay")||e.affectsConfiguration("jupyter.widgetScriptSources")){const e=await this.generateDataScienceExtraSettings();if(e){const t=JSON.stringify(e);this.postMessageInternal(Os.UpdateSettings,t).catch(ae)}}},this._disposables.push(this.workspaceService.onDidChangeConfiguration(this.onPossibleSettingsChange,this)),this._disposables.push(this.configService.getSettings(void 0).onDidChange(this.onDataScienceSettingsChanged.bind(this)))}dispose(){this.disposed||(this.disposed=!0,this._disposables.forEach((e=>e.dispose()))),this.webviewInit=void 0,this._onDidDisposeWebviewPanel.fire()}getHTMLById(e){if(this.activeHTMLRequest)throw new Error("getHTMLById request already in progress");return this.activeHTMLRequest=ie(),this.postMessageInternal(Is.GetHTMLByIdRequest,e).catch(ae),this.activeHTMLRequest.promise}addMessageListener(e){this.onMessageListeners.push(e)}removeMessageListener(e){const t=this.onMessageListeners.indexOf(e);t>=0&&this.onMessageListeners.splice(t,1)}asWebviewUri(e){if(!this.webview)throw new Error("asWebViewUri called too early");return this.webview?.asWebviewUri(e)}postMessage(e,t){return this.postMessageInternal(e.toString(),t)}onMessage(e,t){switch(e){case Os.Started:this.webViewRendered();break;case Is.GetHTMLByIdResponse:this.activeHTMLRequest&&(this.activeHTMLRequest.resolve(t),this.activeHTMLRequest=void 0)}this.onMessageListeners.forEach((n=>{n(e,t)}))}async loadWebview(e,t){if(this.disposed=!1,this.webviewInit=this.webviewInit||ie(),kn("Loading webview. View is "+(this.webview?"set":"notset")),void 0===this.webview){const n=await this.generateDataScienceExtraSettings();kn("Loading web view...");const i=this.workspaceService.getWorkspaceFolder(e)?.uri;this.webview=await this.provideWebview(e,n,i,t),this._disposables.push(this.webview.loadFailed(this.onWebViewLoadFailed,this)),kn("Webview panel created.")}this.onDataScienceSettingsChanged().catch(ae),this.sendLocStrings().catch(ae)}async generateDataScienceExtraSettings(){const e=this.owningResource,t=this.workspaceService.getConfiguration("editor"),n=this.workspaceService.getConfiguration("workbench"),i=n?n.get("colorTheme",x):x,r=Oe.extensions.getExtension(T);return{...JSON.parse(JSON.stringify(this.configService.getSettings(e))),extraSettings:{editor:{cursor:this.getValue(t,"cursorStyle","line"),cursorBlink:this.getValue(t,"cursorBlinking","blink"),autoClosingBrackets:this.getValue(t,"autoClosingBrackets","languageDefined"),autoClosingQuotes:this.getValue(t,"autoClosingQuotes","languageDefined"),autoSurround:this.getValue(t,"autoSurround","languageDefined"),autoIndent:this.getValue(t,"autoIndent",!1),fontLigatures:this.getValue(t,"fontLigatures",!1),scrollBeyondLastLine:this.getValue(t,"scrollBeyondLastLine",!0),verticalScrollbarSize:this.getValue(t,"scrollbar.verticalScrollbarSize",14),horizontalScrollbarSize:this.getValue(t,"scrollbar.horizontalScrollbarSize",10),fontSize:this.getValue(t,"fontSize",14),fontFamily:this.getValue(t,"fontFamily","Consolas, 'Courier New', monospace")},theme:i,hasPythonExtension:void 0!==r,isWeb:ln()===cn.Unknown}}}async sendLocStrings(){const e={collapseSingle:vr.collapseSingle,expandSingle:vr.expandSingle,openExportFileYes:gr.openExportFileYes,openExportFileNo:gr.openExportFileNo,noRowsInDataViewer:vr.noRowsInDataViewer,sliceIndexError:vr.sliceIndexError,sliceMismatchedAxesError:vr.sliceMismatchedAxesError,filterRowsTooltip:vr.sliceMismatchedAxesError,fetchingDataViewer:vr.fetchingDataViewer,dataViewerHideFilters:vr.dataViewerHideFilters,dataViewerShowFilters:vr.dataViewerShowFilters,refreshDataViewer:vr.refreshDataViewer,clearFilters:vr.refreshDataViewer,sliceSummaryTitle:vr.sliceSummaryTitle,sliceData:vr.sliceData,sliceSubmitButton:vr.sliceSubmitButton,sliceDropdownAxisLabel:vr.sliceDropdownAxisLabel,sliceDropdownIndexLabel:vr.sliceDropdownIndexLabel,variableExplorerNameColumn:vr.variableExplorerNameColumn,variableExplorerTypeColumn:vr.variableExplorerTypeColumn,variableExplorerCountColumn:vr.variableExplorerCountColumn,variableExplorerValueColumn:vr.variableExplorerValueColumn,collapseVariableExplorerLabel:vr.collapseVariableExplorerLabel,variableLoadingValue:vr.variableLoadingValue,showDataExplorerTooltip:vr.showDataExplorerTooltip,noRowsInVariableExplorer:vr.noRowsInVariableExplorer,loadingRowsInVariableExplorer:vr.loadingRowsInVariableExplorer,previousPlot:vr.previousPlot,nextPlot:vr.nextPlot,panPlot:vr.panPlot,zoomInPlot:vr.zoomInPlot,zoomOutPlot:vr.zoomOutPlot,exportPlot:vr.exportPlot,deletePlot:vr.deletePlot,selectedImageListLabel:vr.selectedImageListLabel,selectedImageLabel:vr.selectedImageLabel};this.postMessageInternal(Os.LocInit,JSON.stringify(e)).catch(ae)}async postMessageInternal(e,t){this.webviewInit&&(await this.webviewInit.promise,this.webview?.postMessage({type:e.toString(),payload:t}))}webViewRendered(){this.webviewInit&&!this.webviewInit.resolved&&(this.webviewInit.resolve(),kn("Web view react rendered")),this.sendLocStrings().catch(ae),this.onDataScienceSettingsChanged().catch(ae)}getValue(e,t,n){return e?e.get(t,n):n}}hx([we()],fx.prototype,"getHTMLById",null),hx([we()],fx.prototype,"addMessageListener",null),hx([we()],fx.prototype,"removeMessageListener",null);class mx extends fx{get isDisposed(){return this.disposed}get webPanel(){if(this.webview)return this.webview}constructor(e,t,n,i,r,o,s,a){super(e,n,r,o),this.configService=e,this.provider=t,this.workspaceService=n,this._title=s,this.viewColumn=a,this.viewState={visible:!1,active:!1},this.webPanelViewStateChanged=e=>{const t=e.isVisible(),n=e.isActive(),i={visible:t,active:n},r={visible:this.viewState.visible,active:this.viewState.active};this.viewState.visible=t,this.viewState.active=n,this.onViewStateChanged({current:i,previous:r})},this.messageListener=i(this.onMessage.bind(this),this.webPanelViewStateChanged.bind(this),this.dispose.bind(this))}async show(e){this.isDisposed||this.webPanel&&await this.webPanel.show(e)}dispose(){this.isDisposed||this.webPanel&&this.webPanel.close(),super.dispose()}get title(){return this._title}setTitle(e){this._title=e,!this.isDisposed&&this.webPanel&&this.webPanel.setTitle(e)}onViewStateChanged(e){}async provideWebview(e,t,n,i){return this.provider.create({viewColumn:this.viewColumn,listener:this.messageListener,title:this.title,rootPath:this.rootPath,scripts:this.scripts,settings:t,cwd:e,webviewHost:i,additionalPaths:n?[n]:[]})}}var gx=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},vx=function(e,t){return function(n,i){t(n,i,e)}};const yx="JupyterDataViewerPreferredViewColumn";let bx=class extends mx{get active(){return!!this.webPanel?.isActive()}get refreshPending(){return this.pendingRowsCount>0}get onDidDisposeDataViewer(){return this._onDidDisposeDataViewer.event}get onDidChangeDataViewerViewState(){return this._onDidChangeDataViewerViewState.event}constructor(e,t,n,i,r,o,s){const a=tn(s.extensionUri,"out","webviews","webview-side","viewers");super(t,e,n,((e,t,n)=>new cx(e,t,n)),a,[tn(a,"dataExplorer.js")],gr.dataExplorerTitle,r.get(yx)??Oe.ViewColumn.One),this.applicationShell=i,this.globalMemento=r,this.errorHandler=o,this.context=s,this.pendingRowsCount=0,this.sentDataViewerSliceDimensionalityTelemetry=!1,this._onDidDisposeDataViewer=new Oe.EventEmitter,this._onDidChangeDataViewerViewState=new Oe.EventEmitter,this.onDidDispose(this.dataViewerDisposed,this)}async showData(e,t){if(!this.isDisposed){this.dataProvider=e,await super.loadWebview(Oe.Uri.file(process.cwd())).catch(Sn),super.setTitle(t),await super.show(!0);let n=await this.prepDataFrameInfo();if(n.shape&&n.shape.length>2){this.maybeSendSliceDataDimensionalityTelemetry(n.shape.length);const e=px(n.shape);n=await this.getDataFrameInfo(e)}this.postMessage(Ns.InitializeData,n).catch(ae)}}get kernel(){if(this.dataProvider&&"kernel"in this.dataProvider)return this.dataProvider.kernel}dataViewerDisposed(){this._onDidDisposeDataViewer.fire(this)}async refreshData(){const e=this.currentSliceExpression;this.dataFrameInfoPromise=void 0;let t=await this.getDataFrameInfo(void 0,!0);if(void 0!==e&&void 0!==t.shape)if(n=e,i=t.shape,""===function(e,t){if(e.startsWith("[")&&e.endsWith("]")){let n;const i=e.substring(1,e.length-1).split(",").map(((e,i)=>{const r=ux.exec(e);if(r?.groups?.Start&&!r.groups.Stop){const e=parseInt(r.groups.Start),o=t[i];return(e>=0&&e>=o||e<0&&e<-o)&&(n={shapeIndex:i,value:e}),e}}));if(n){const{shapeIndex:e,value:i}=n;return dx(lx("sliceIndexError","Index {0} out of range for axis {1} with {2} elements"),i.toString(),e.toString(),t[e].toString())}if(i&&i.length!==t.length)return dx(lx("sliceMismatchedAxesError","Expected {0} axes, got {1} in slice expression"),t.length.toString(),i.length.toString())}return""}(n,i))t=await this.getDataFrameInfo(e);else{const e=px(t.shape);t=await this.getDataFrameInfo(e)}var n,i;kn(`Refreshing data viewer for variable ${t.name}`),this.postMessage(Ns.InitializeData,t).catch(ae)}dispose(){super.dispose(),this.dataProvider&&(this.dataProvider.dispose(),this.dataProvider=void 0)}async onViewStateChanged(e){e.current.active&&e.current.visible&&e.previous.active&&e.current.visible&&await this.globalMemento.update(yx,this.webPanel?.viewColumn),this._onDidChangeDataViewerViewState.fire()}get owningResource(){}onMessage(e,t){switch(e){case Ns.GetAllRowsRequest:this.getAllRows(t).catch(ae);break;case Ns.GetRowsRequest:this.getRowChunk(t).catch(ae);break;case Ns.GetSliceRequest:this.getSlice(t).catch(ae);break;case Ns.RefreshDataViewer:this.refreshData().catch(ae),io(F.RefreshDataViewer);break;case Ns.SliceEnablementStateChanged:io(F.DataViewerSliceEnablementStateChanged,void 0,{newState:t.newState?Sr.Checked:Sr.Unchecked})}super.onMessage(e,t)}getDataFrameInfo(e,t){return this.dataFrameInfoPromise&&e===this.currentSliceExpression||(this.dataFrameInfoPromise=this.dataProvider?this.dataProvider.getDataFrameInfo(e,t):Promise.resolve({}),this.currentSliceExpression=e),this.dataFrameInfoPromise}async prepDataFrameInfo(){this.rowsTimer=new se;const e=await this.getDataFrameInfo();try{io(F.ShowDataViewer,void 0,{rows:e.rowCount?e.rowCount:0,columns:e.columns?e.columns.length:0}),this.pendingRowsCount=e.rowCount?e.rowCount:0}catch{}return e}async getAllRows(e){return this.wrapRequest((async()=>{if(this.dataProvider){const t=await this.dataProvider.getAllRows(e);return this.pendingRowsCount=0,this.postMessage(Ns.GetAllRowsResponse,t)}}))}getSlice(e){return this.wrapRequest((async()=>{if(this.dataProvider){const t=await this.getDataFrameInfo(e.slice);return t.shape?.length&&this.maybeSendSliceDataDimensionalityTelemetry(t.shape.length),io(F.DataViewerSliceOperation,void 0,{source:e.source}),this.postMessage(Ns.InitializeData,t)}}))}getRowChunk(e){return this.wrapRequest((async()=>{if(this.dataProvider){const t=await this.getDataFrameInfo(e.sliceExpression),n=await this.dataProvider.getRows(e.start,Math.min(e.end,t.rowCount?t.rowCount:0),e.sliceExpression);return this.pendingRowsCount=Math.max(0,this.pendingRowsCount-n.length),this.postMessage(Ns.GetRowsResponse,{rows:n,start:e.start,end:e.end})}}))}async wrapRequest(e){try{return await e()}catch(e){if(e instanceof Gy){Sn(e.message);const t=gr.pythonInteractiveHelpLink;this.applicationShell.showErrorMessage(gr.jupyterDataRateExceeded,t).then((e=>{e===t&&this.applicationShell.openUrl(g.JupyterDataRateHelpLink)}),ae),this.dispose()}Sn(e),this.errorHandler.handleError(e).then(ae,ae)}finally{this.sendElapsedTimeTelemetry()}}sendElapsedTimeTelemetry(){this.rowsTimer&&0===this.pendingRowsCount&&io(F.ShowDataViewerRowsLoaded,void 0,{rowsTimer:this.rowsTimer.elapsedTime})}maybeSendSliceDataDimensionalityTelemetry(e){this.sentDataViewerSliceDimensionalityTelemetry||(io(F.DataViewerDataDimensionality,{numberOfDimensions:e}),this.sentDataViewerSliceDimensionalityTelemetry=!0)}};gx([oo(F.DataViewerWebviewLoaded)],bx.prototype,"showData",null),bx=gx([Kn(),vx(0,zn(ti)),vx(1,zn(ji)),vx(2,zn(Qn)),vx(3,zn(Jn)),vx(4,zn(Oi)),vx(4,Nc(Ai)),vx(5,zn(bo)),vx(6,zn(Ui))],bx);class wx{constructor(e,t){this.configuration=e,this.applicationShell=t}async isRequestedColumnSizeAllowed(e,t){if(e>1e3&&await this.shouldAskForLargeData(t)){const e=gr.tooManyColumnsMessage,t=gr.tooManyColumnsYes,n=gr.tooManyColumnsNo,i=gr.tooManyColumnsDontAskAgain,r=await this.applicationShell.showWarningMessage(e,t,n,i);return r===i&&await this.disableAskForLargeData(),r===t}return!0}async shouldAskForLargeData(e){const t=e?this.configuration.getSettings(e):this.configuration.getSettings();return t&&!0===t.askForLargeDataFrames}async disableAskForLargeData(e){const t=e?this.configuration.getSettings(e):this.configuration.getSettings();t&&(t.askForLargeDataFrames=!1,this.configuration.updateSetting("askForLargeDataFrames",!1,void 0,Oe.ConfigurationTarget.Global).catch(ae))}}var _x=function(e,t){return function(n,i){t(n,i,e)}};let Sx=class{constructor(e,t,n,i,r,o,s,a,c,l,d,u,p,h,f,m){this.disposables=e,this.commandManager=t,this.debugService=n,this.appShell=r,this.jupyterVariableDataProviderFactory=o,this.dataViewerFactory=s,this.variableProvider=a,this.workspace=c,this.errorHandler=l,this.dataViewerDependencyService=d,this.interpreterService=u,this.platformService=p,this.notebooks=h,this.kernelProvider=f,this.interactiveWindowProvider=m,this.dataViewerChecker=new wx(i,r),this.workspace.isTrusted||this.workspace.onDidGrantWorkspaceTrust(this.registerCommandsIfTrusted,this,this.disposables)}activate(){this.registerCommandsIfTrusted()}registerCommandsIfTrusted(){this.workspace.isTrusted&&this.registerCommand(N.ShowDataViewer,this.onVariablePanelShowDataViewerRequest)}registerCommand(e,t){const n=this.commandManager.registerCommand(e,t,this);this.disposables.push(n)}async onVariablePanelShowDataViewerRequest(e){if(io(_r.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_REQUEST),this.debugService?.activeDebugSession&&this.variableProvider&&this.jupyterVariableDataProviderFactory&&this.dataViewerFactory)try{if(this.debugService.activeDebugSession.configuration&&this.dataViewerDependencyService&&this.interpreterService){const e=await this.getDebugAdapterPython(this.debugService.activeDebugSession.configuration);e&&await this.dataViewerDependencyService.checkAndInstallMissingDependencies(e)}const t=Qw(e.variable),n=await this.variableProvider.getFullVariable(t),i=await this.jupyterVariableDataProviderFactory.create(n),r=await i.getDataFrameInfo(),o=r?.columns?.length;if(o&&await this.dataViewerChecker.isRequestedColumnSizeAllowed(o)){const e=`${gr.dataExplorerTitle} - ${n.name}`,t=await this.dataViewerFactory.create(i,e);return io(_r.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_SUCCESS),t}}catch(e){io(_r.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_ERROR,void 0,void 0,e),Sn(e),this.errorHandler.handleError(e).then(ae,ae)}else try{const t=this.getActiveKernel();if(t&&this.jupyterVariableDataProviderFactory&&this.dataViewerFactory){const n=await this.jupyterVariableDataProviderFactory.create(e.variable,t),i=`${gr.dataExplorerTitle} - ${e.variable.name}`;return await this.dataViewerFactory.create(n,i)}}catch(e){Sn(e),io(F.FailedShowDataViewer),this.appShell.showErrorMessage(gr.showDataViewerFail).then(ae,ae)}}getActiveKernel(){const e=this.notebooks.activeNotebookEditor?.notebook,t=e?.notebookType==l?this.kernelProvider.get(e):void 0;if(t)return t;const n=this.getActiveInteractiveWindowDocument(),i=n?this.kernelProvider.get(n):void 0;if(i)return i;const r=this.dataViewerFactory?.activeViewer;return r?this.kernelProvider.kernels.find((e=>e===r.kernel)):void 0}getActiveInteractiveWindowDocument(){const e=this.interactiveWindowProvider.getActiveOrAssociatedInteractiveWindow();if(e)return this.notebooks.notebookDocuments.find((t=>t===e?.notebookDocument))}async getDebugAdapterPython(e){if(!this.interpreterService)return void kn("Interpreter Service missing when trying getDebugAdapterPython");let t="";if(void 0!==e.debugAdapterPython?(kn("Found debugAdapterPython on Debug Configuration to use"),t=e.debugAdapterPython):e.pythonPath&&(kn("Found pythonPath on Debug Configuration to use"),t=e.pythonPath),t){let e=t;return e.startsWith("~")&&this.platformService.homeDir&&(e=dn(e,this.platformService.homeDir.path)),this.interpreterService.getInterpreterDetails(Oe.Uri.file(e))}return this.interpreterService.getActiveInterpreter()}};Sx=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),_x(0,zn(Ri)),_x(1,zn(Gn)),_x(2,zn(Zn)),_x(2,Qi()),_x(3,zn(ji)),_x(4,zn(Jn)),_x(5,zn(Us)),_x(5,Qi()),_x(6,zn(Ls)),_x(6,Qi()),_x(7,zn(Oy)),_x(7,Qi()),_x(7,Nc(C.DEBUGGER_VARIABLES)),_x(8,zn(Qn)),_x(9,zn(bo)),_x(10,zn(qs)),_x(10,Qi()),_x(11,zn(ka)),_x(11,Qi()),_x(12,zn(Ma)),_x(13,zn(oi)),_x(14,zn(na)),_x(15,zn(PS))],Sx);const Cx="0.20.0";class kx{constructor(e,t){this.applicationShell=e,this.isCodeSpace=t}async getVersion(e,t){try{const n=await this._getVersion(e,t);return"string"==typeof n?lc(n):n}catch(e){return void Cn(gr.failedToGetVersionOfPandas,e.message)}}async promptInstall(e,t,n){let i=n?gr.pandasTooOldForViewingFormat(n,Cx):gr.pandasRequiredForViewing(Cx);if((this.isCodeSpace?lr.install:await this.applicationShell.showErrorMessage(i,{modal:!0},lr.install))!==lr.install)throw io(F.UserDidNotInstallPandas),new Error(i);await this._doInstall(e,t)}async checkOrInstall(e){const t=new Oe.CancellationTokenSource;try{const n=await this.getVersion(e,t.token);if(t.token.isCancellationRequested)return void io(F.PandasInstallCanceled);if(n){if(n.compare(Cx)>0)return void io(F.PandasOK);io(F.PandasTooOld);const i=`${n.major}.${n.minor}.${n.build}`;await this.promptInstall(e,t,i)}io(F.PandasNotInstalled),await this.promptInstall(e,t)}finally{t.dispose()}}}!function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([oo(F.PythonModuleInstall,{action:"displayed",moduleName:nu.get(xd.pandas)})],kx.prototype,"promptInstall",null);class Ex extends kx{constructor(e,t,n,i,r){super(i,r),this.installer=e,this.pythonFactory=t,this.interpreterService=n}async _getVersion(e,t){const n=await this.pythonFactory.createActivatedEnvironment({resource:void 0,interpreter:e});return(await n.exec(["-c","import pandas;print(pandas.__version__)"],{throwOnStdErr:!0,token:t})).stdout}async _doInstall(e,t){const n=e||await this.interpreterService.getActiveInterpreter();t.token.isCancellationRequested||await xa(t.token,Ed.Ignore,this.installer.install(xd.pandas,n,t))===Ed.Installed&&io(F.UserInstalledPandas)}async checkAndInstallMissingDependencies(e){io(F.DataViewerUsingInterpreter),await this.checkOrInstall(e)}}class xx extends kx{async execute(e,t){if(!t.session?.kernel)throw new Ur;const n=await Cs(t.session.kernel,e),i=n.find((e=>"error"===e.output_type));return i&&Cn(gr.failedToGetVersionOfPandas,i.message),n.map((e=>e.text?.toString()))}async _getVersion(e){return(await this.execute("import pandas as _VSCODE_pandas;print(_VSCODE_pandas.__version__);del _VSCODE_pandas",e)).map((e=>e?e.toString():void 0)).find((e=>e))}async _doInstall(e){const t=`${function(e){const t=e.kernelConnectionMetadata.interpreter?.envType;return t===ko.Conda?"%conda":"%pip"}(e)} install pandas`;try{await this.execute(t,e),io(F.UserInstalledPandas)}catch(e){throw io(F.UserInstalledPandas,void 0,void 0,e),new Error(gr.failedToInstallPandas)}}async checkAndInstallMissingDependencies(e){if(io(F.DataViewerUsingKernel),!e.session?.kernel)throw io(F.NoActiveKernelSession),new Error("No no active kernel session.");await this.checkOrInstall(e)}}var Tx=function(e,t){return function(n,i){t(n,i,e)}};let Px=class{constructor(e,t,n,i,r){this.withKernel=new xx(i,r),this.withInterpreter=new Ex(e,t,n,i,r)}async checkAndInstallMissingDependencies(e){return function(e){return"sysPrefix"in e&&"string"==typeof e.sysPrefix}(e)?this.withInterpreter.checkAndInstallMissingDependencies(e):this.withKernel.checkAndInstallMissingDependencies(e)}};Px=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Tx(0,zn(Ld)),Tx(1,zn(qd)),Tx(2,zn(ka)),Tx(3,zn(Jn)),Tx(4,zn(xi))],Px);var Ix=__webpack_require__(23279),Dx=__webpack_require__.n(Ix),Rx=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Ox=function(e,t){return function(n,i){t(n,i,e)}};let Ax=class{constructor(e,t,n,i){this.serviceContainer=e,this.disposables=n,this.commandManager=i,this.knownViewers=new Set,this.refreshDataViewer=Dx()((()=>{for(const e of this.knownViewers)e.active&&e.refreshData().then(ae,ae)}),1e3),t.push(this),this.viewContext=new n_(L.IsDataViewerActive,this.commandManager),this.disposables.push(this.commandManager.registerCommand(N.RefreshDataViewer,this.refreshDataViewer,this))}async dispose(){for(const e of this.knownViewers)e.dispose()}async create(e,t){let n;const i=this.serviceContainer.get(js);try{this.knownViewers.add(i),i.onDidDisposeDataViewer(this.updateOpenDataViewers,this,this.disposables),i.onDidChangeDataViewerViewState(this.updateViewStateContext,this,this.disposables),await i.showData(e,t),n=i}finally{n||i.dispose()}return n}get activeViewer(){return[...this.knownViewers.values()].find((e=>e.active))}updateOpenDataViewers(e){this.knownViewers.delete(e)}async updateViewStateContext(){let e=!1;this.knownViewers.forEach((t=>{t.active&&(e=!0)})),await this.viewContext.set(e)}};Rx([oo(F.StartShowDataViewer)],Ax.prototype,"create",null),Ax=Rx([Kn(),Ox(0,zn(ya)),Ox(1,zn(Bi)),Ox(2,zn(Ri)),Ox(3,zn(Gn))],Ax);var Nx,Mx=function(e,t){return function(n,i){t(n,i,e)}};let Lx=Nx=class{constructor(e,t){this.variableManager=e,this.dependencyService=t,this.initialized=!1}get kernel(){return this._kernel}static getNormalizedColumns(e){return e.map((e=>{let t;switch(e.type){case"bool":t=Ms.Bool;break;case"integer":case"int32":case"int64":case"float":case"float32":case"float64":case"number":t=Ms.Number;break;default:t=Ms.String}return{key:e.key,type:t}}))}static parseShape(e){try{if(e.startsWith("(")&&e.endsWith(")"))return e.substring(1,e.length-1).split(",").map((e=>parseInt(e)))}catch(t){Sn(`Could not parse IJupyterVariable with malformed shape: ${e}`)}}dispose(){}setDependencies(e,t){this._kernel=t,this.variable=e}async getDataFrameInfo(e,t){let n={};await this.ensureInitialized();let i=this.variable;return i&&((e||t)&&(i=await this.variableManager.getDataFrameInfo(i,this._kernel,e,t)),n={columns:i.columns?Nx.getNormalizedColumns(i.columns):i.columns,indexColumn:i.indexColumn,rowCount:i.rowCount,dataDimensionality:i.dataDimensionality,shape:Nx.parseShape(i.shape),sliceExpression:e,type:i.type,maximumRowChunkSize:i.maximumRowChunkSize,name:i.name,fileName:un(i.fileName)}),t&&(this.variable=i),n}async getAllRows(e){let t=[];return await this.ensureInitialized(),this.variable&&this.variable.rowCount&&(t=(await this.variableManager.getDataFrameRows(this.variable,0,this.variable.rowCount,this._kernel,e)).data),t}async getRows(e,t,n){let i=[];return await this.ensureInitialized(),this.variable&&this.variable.rowCount&&(i=(await this.variableManager.getDataFrameRows(this.variable,e,t,this._kernel,n)).data),i}async ensureInitialized(){!this.initialized&&this.variable&&(this.initialized=!0,this._kernel?.kernelConnectionMetadata&&this.dependencyService&&await this.dependencyService.checkAndInstallMissingDependencies(pe()?this._kernel:this._kernel?.kernelConnectionMetadata.interpreter||this._kernel),this.variable=await this.variableManager.getDataFrameInfo(this.variable,this._kernel))}};Lx=Nx=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Mx(0,zn(Oy)),Mx(0,Nc(C.ALL_VARIABLES)),Mx(1,zn(qs)),Mx(1,Qi())],Lx);let jx=class{constructor(e){this.serviceContainer=e}async create(e,t){const n=this.serviceContainer.get(Fs);return n.setDependencies(e,t),n}};jx=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(ya))],jx);var Fx=function(e,t){return function(n,i){t(n,i,e)}};let Ux=class{constructor(e,t){this.kernelProvider=e,this.controllers=t,this.disposables=[],this.widgetOutputsPerNotebook=new WeakMap}dispose(){Ie(this.disposables)}activate(){const e=Oe.notebooks.createRendererMessaging("jupyter-ipywidget-renderer");e.onDidReceiveMessage(this.onDidReceiveMessage.bind(this,e),this,this.disposables),this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposables)}onDidStartKernel(e){this.hookupKernel(e),e.onStarted((()=>this.hookupKernel(e)),this,this.disposables),e.onRestarted((()=>this.hookupKernel(e)),this,this.disposables)}hookupKernel(e){this.widgetOutputsPerNotebook.delete(e.notebook);const t=e.session?.kernel,n=e.session?.kernel?.iopubMessage;if(!n)return;const i=__webpack_require__(98250),r=(n,r)=>{n===t&&(i.KernelMessage.isDisplayDataMsg(r)||i.KernelMessage.isUpdateDisplayDataMsg(r)||i.KernelMessage.isExecuteReplyMsg(r)||i.KernelMessage.isExecuteResultMsg(r))&&this.trackModelId(e.notebook,r)};n.connect(r),this.disposables.push(new Oe.Disposable((()=>n.disconnect(r))))}trackModelId(e,t){const n=t.content;if(n.data&&"object"==typeof n.data&&K in n.data){const t=n.data[K];if(t&&"model_id"in t){const n=this.widgetOutputsPerNotebook.get(e)||new Set;n.add(t.model_id),this.widgetOutputsPerNotebook.set(e,n)}}}onDidReceiveMessage(e,{editor:t,message:n}){n&&"object"==typeof n&&"query-widget-state"===n.command&&this.queryWidgetState(e,t,n),n&&"object"==typeof n&&"ipywidget-renderer-loaded"===n.command&&this.sendWidgetVersionAndState(e,t)}queryWidgetState(e,t,n){const i=this.widgetOutputsPerNotebook.get(t.notebook),r=!!this.controllers.getSelected(t.notebook),o=!!i?.has(n.model_id);e.postMessage({command:"query-widget-state",model_id:n.model_id,hasWidgetState:o,kernelSelected:r},t).then(ae,ae)}sendWidgetVersionAndState(e,t){const n=this.kernelProvider.get(t.notebook),i=n?.ipywidgetsVersion;n?.ipywidgetsVersion&&En(`IPyWidget version in Kernel is ${n?.ipywidgetsVersion}.`);const r=!!this.controllers.getSelected(t.notebook);e.postMessage({command:"ipywidget-renderer-init",version:i,widgetState:void 0,kernelSelected:r},t).then(ae,ae)}};Ux=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Fx(0,zn(na)),Fx(1,zn(Ks))],Ux);class qx{constructor(e,t,n){this.disposedCallback=n,this.callback=e,this.viewChanged=t}async dispose(){this.disposedCallback()}onMessage(e,t){this.callback(e,t)}onChangeViewState(e){this.viewChanged&&this.viewChanged(e)}}var Kx;!function(e){e.Started=Os.Started,e.UpdateSettings=Os.UpdateSettings,e.SendPlot="send_plot",e.CopyPlot="copy_plot",e.ExportPlot="export_plot",e.RemovePlot="remove_plot"}(Kx||(Kx={})),Kx.Started,Kx.UpdateSettings,Kx.SendPlot,Kx.CopyPlot,Kx.ExportPlot,Kx.RemovePlot;const Vx=Symbol("IPlotViewerProvider"),Wx=Symbol("IPlotViewer");var $x=function(e,t){return function(n,i){t(n,i,e)}};let Bx=class extends mx{constructor(e,t,n,i,r,o){const s=new se,a=tn(o.extensionUri,"out","webviews","webview-side","viewers");super(t,e,n,((e,t,n)=>new qx(e,t,n)),a,[tn(a,"plotViewer.js")],gr.plotViewerTitle,Oe.ViewColumn.One),this.applicationShell=i,this.fs=r,this.context=o,this.closedEvent=new Oe.EventEmitter,this.removedEvent=new Oe.EventEmitter,this.addPlot=async e=>{this.isDisposed||(await super.show(!1),this.postMessage(Kx.SendPlot,e).catch(ae))},super.loadWebview(Oe.Uri.file(process.cwd())).catch(Sn).finally((()=>{io(F.PlotViewerWebviewLoaded,{duration:s.elapsedTime})}))}get closed(){return this.closedEvent.event}get removed(){return this.removedEvent.event}async show(){if(!this.isDisposed)return super.show(!0)}dispose(){super.dispose(),this.removedEvent.dispose(),this.closedEvent&&this.closedEvent.fire(this)}get owningResource(){}onMessage(e,t){switch(e){case Kx.CopyPlot:this.copyPlot(t.toString()).catch(ae);break;case Kx.ExportPlot:this.exportPlot(t).catch(ae);break;case Kx.RemovePlot:this.removePlot(t)}super.onMessage(e,t)}removePlot(e){this.removedEvent.fire(e)}copyPlot(e){return Promise.resolve()}async exportPlot(e){kn("exporting plot...");const t={};t[gr.pngFilter]=["png"],t[gr.svgFilter]=["svg"];const n=await this.applicationShell.showSaveDialog({saveLabel:gr.exportPlotTitle,filters:t});try{if(n)if(".png"===Dt(n.path).toLowerCase()){const t=Buffer.from(e.png.replace("data:image/png;base64",""),"base64");await this.fs.writeFile(n,t)}else await this.fs.writeFile(n,e.svg)}catch(e){Sn(e),this.applicationShell.showErrorMessage(gr.exportImageFailed(e.toString())).then(ae,ae)}}};Bx=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),$x(0,zn(ti)),$x(1,zn(ji)),$x(2,zn(Qn)),$x(3,zn(Jn)),$x(4,zn(La)),$x(5,zn(Ui))],Bx);var Hx=function(e,t){return function(n,i){t(n,i,e)}};let zx=class extends Bx{constructor(e,t,n,i,r,o){super(e,t,n,i,r,o),this.fsNode=r}async exportPlot(e){kn("exporting plot...");const t={};t[gr.pdfFilter]=["pdf"],t[gr.pngFilter]=["png"],t[gr.svgFilter]=["svg"];const n=await this.applicationShell.showSaveDialog({saveLabel:gr.exportPlotTitle,filters:t});try{if(n)switch(Dt(n.fsPath).toLowerCase()){case".pdf":await Jx(e.svg,this.fsNode,n);break;case".png":const t=Buffer.from(e.png.replace("data:image/png;base64",""),"base64");await this.fs.writeFile(n,t);break;default:await this.fs.writeFile(n,e.svg)}}catch(e){Sn(e),this.applicationShell.showErrorMessage(gr.exportImageFailed(e)).then(ae,ae)}}};async function Jx(e,t,n){kn("Attempting pdf write...");const i=(await __webpack_require__.e(269).then(__webpack_require__.t.bind(__webpack_require__,9269,23))).default,r=ie(),o=new(__webpack_require__(25674)),s=t.createLocalWriteStream(n.fsPath);kn(`Writing pdf to ${n.fsPath}`),s.on("finish",(()=>r.resolve)),i(o,e,0,0,{preserveAspectRatio:"xMinYMin meet"}),o.pipe(s),o.end(),kn(`Finishing pdf to ${n.fsPath}`),await r.promise,kn(`Completed pdf to ${n.fsPath}`)}zx=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Hx(0,zn(ti)),Hx(1,zn(ji)),Hx(2,zn(Qn)),Hx(3,zn(Jn)),Hx(4,zn(Nu)),Hx(5,zn(Ui))],zx);var Gx=function(e,t){return function(n,i){t(n,i,e)}};let Yx=class{constructor(e,t){this.serviceContainer=e,this.imageList=[],this.closedViewer=()=>{this.currentViewer&&(this.currentViewer=void 0),this.currentViewerClosed&&(this.currentViewerClosed.dispose(),this.currentViewerClosed=void 0)},this.removedPlot=e=>{this.imageList.splice(e,1)},t.push(this)}async dispose(){this.currentViewer&&this.currentViewer.dispose()}async showPlot(e){this.imageList.push(e);const t=this.currentViewer?[e]:this.imageList,n=await this.getOrCreate();await Promise.all(t.map(n.addPlot))}async getOrCreate(){return this.currentViewer||(this.currentViewer=this.serviceContainer.get(Wx),this.currentViewerClosed=this.currentViewer.closed(this.closedViewer),this.currentViewer.removed(this.removedPlot),io(F.OpenPlotViewer),await this.currentViewer.show()),this.currentViewer}};Yx=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Gx(0,zn(ya)),Gx(1,zn(Bi))],Yx);var Qx=function(e,t){return function(n,i){t(n,i,e)}};const Xx="image/svg+xml",Zx={"image/png":"png","image/jpeg":"jpeg","image/gif":"gif",[Xx]:"svg"};let eT=class{constructor(e,t,n){this.shell=e,this.fs=t,this.workspace=n}async savePlot(e,t,n){if(e.isClosed)return;const i=function(e,t,n){for(const i of e.getCells())for(const e of i.outputs)if(e.id===t&&e.items.find((e=>e.mime===n)))return e}(e,t,n);if(!i)return Sn(`No plot to save ${pn(e.uri)}, id: ${t} for ${n}`);if(!(n.toLowerCase()in Zx))return Sn(`Unsupported MimeType ${pn(e.uri)}, id: ${t} for ${n}`);const r=await this.getSaveTarget(i,n);r&&(r.path.toLowerCase().endsWith("pdf")?await this.saveAsPdf(i,r):await this.saveAsImage(i,r))}getSaveTarget(e,t){const n=Zx[t.toLowerCase()],i={};e.items.find((e=>e.mime.toLowerCase()===Xx))&&(i[gr.pdfFilter]=["pdf"],i[gr.svgFilter]=["svg"]),"png"===n&&(i[gr.pngFilter]=["png"]),0===Object.keys(i).length&&(i.Images=[n]);const r=(this.workspace.workspaceFolders?.length||0)>0?this.workspace.workspaceFolders[0].uri:void 0,o=`output.${n}`,s=r?Oe.Uri.joinPath(r,o):Oe.Uri.file(o);return this.shell.showSaveDialog({defaultUri:s,saveLabel:gr.exportPlotTitle,filters:i})}async saveAsImage(e,t){const n=Dt(t.path).substring(1),i=Object.keys(Zx).find((e=>Zx[e]===n)),r=e.items.find((e=>e.mime===i));if(!r)throw new Error(`Unsupported MimeType ${t.toString()}, available mime Types: ${e.items.map((e=>e.mime)).join(", ")}`);await this.fs.writeFile(t,Buffer.from(r.data))}async saveAsPdf(e,t){return Sn("Save as PDF is not yet supported on the web.")}};eT=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),Qx(0,zn(Jn)),Qx(1,zn(La)),Qx(2,zn(Qn))],eT);var tT=function(e,t){return function(n,i){t(n,i,e)}};let nT=class extends eT{constructor(e,t,n){super(e,t,n),this.fsNode=t}async saveAsPdf(e,t){const n=Buffer.from(e.items.find((e=>e.mime===Xx)).data).toString();await Jx(n,this.fsNode,t)}};nT=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),tT(0,zn(Jn)),tT(1,zn(Nu)),tT(2,zn(Qn))],nT);let iT=class{constructor(e){this.plotViewProvider=e}async openPlot(e,t){if(e.isClosed)return;const n=rT(e,t,"image/svg+xml");let i;if(n)i=(new TextDecoder).decode(n.data);else{const n=rT(e,t,"image/png");if(!n)return Sn(`No SVG or PNG Plot to open ${pn(e.uri)}, id: ${t}`);i=function(e){const t=Buffer.from(e.data),n=t.toString("base64"),i=function(e){if(!function(e){return 137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]&&13===e[4]&&10===e[5]&&26===e[6]&&10===e[7]&&e.length>29}(e))throw new Error("The buffer is not a valid png");return{width:e.readUInt32BE(16),height:e.readUInt32BE(20)}}(t);return`<?xml version="1.0" encoding="utf-8" standalone="no"?>\n<svg height="${i.height}" width="${i.width}" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g>\n        <image xmlns="http://www.w3.org/2000/svg" x="0" y="0" height="100%" width="100%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="data:image/png;base64,${n}"/>\n    </g>\n</svg>`}(n)}i&&await this.plotViewProvider.showPlot(i)}};function rT(e,t,n){for(const i of e.getCells())for(const e of i.outputs)if(e.id===t)return e.items.find((e=>e.mime===n))}iT=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),function(e,t){return function(n,i){t(n,i,e)}}(0,zn(Vx))],iT);const oT=Symbol("IPlotSaveHandler");var sT=function(e,t){return function(n,i){t(n,i,e)}};let aT=class{constructor(e,t){this.plotSaveHandler=e,this.plotViewHandler=t,this.disposables=[]}dispose(){Ie(this.disposables)}activate(){this.activateImpl().catch(ae)}async activateImpl(){const e=Oe.extensions.getExtension(P);e&&(e.isActive||await e.activate(),e.exports.onDidReceiveMessage((({editor:e,message:t})=>{const n=e.notebook||Oe.window.activeNotebookEditor?.notebook;n&&("saveImageAs"===t.type?this.plotSaveHandler.savePlot(n,t.outputId,t.mimeType).catch(ae):"openImageInPlotViewer"===t.type&&this.plotViewHandler.openPlot(n,t.outputId).catch(ae))}),this,this.disposables))}};aT=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),sT(0,zn(oT)),sT(1,zn(iT))],aT);var cT,lT=function(e,t){return function(n,i){t(n,i,e)}};!function(e){e[e.executed=0]="executed",e[e.restarted=1]="restarted"}(cT||(cT={}));let dT=class{get onDidChangeActiveNotebook(){return this._onDidChangeActiveNotebook.event}get onDidFinishExecutingActiveNotebook(){return this._onDidFinisheExecutingActiveNotebook.event}get onDidRestartActiveNotebook(){return this._onDidRestartActiveNotebook.event}get activeKernel(){const e=this.notebooks.activeNotebookEditor?.notebook,t=e?.notebookType==l?this.kernelProvider.get(e):void 0;if(t)return t;const n=this.getActiveInteractiveWindowDocument(),i=n?this.kernelProvider.get(n):void 0;if(i)return i;const r=this.dataViewerFactory.activeViewer;return r?this.kernelProvider.kernels.find((e=>e===r.kernel)):void 0}get activeNotebookExecutionCount(){const e=this.activeKernel?.notebook;return e?this._executionCountTracker.get(e):void 0}constructor(e,t,n,i,r){this.interactiveWindowProvider=e,this.kernelProvider=t,this.dataViewerFactory=n,this.disposables=i,this.notebooks=r,this._onDidFinisheExecutingActiveNotebook=new Oe.EventEmitter,this._onDidChangeActiveNotebook=new Oe.EventEmitter,this._onDidRestartActiveNotebook=new Oe.EventEmitter,this._executionCountTracker=new WeakMap,this.notebooks.onDidChangeActiveNotebookEditor(this.activeEditorChanged,this,this.disposables),this.notebooks.onDidCloseNotebookDocument(this.notebookEditorClosed,this,this.disposables),this.kernelProvider.onDidRestartKernel((e=>{this.handleRestart({state:cT.restarted,notebook:e.notebook})}),this,this.disposables),r.onDidChangeNotebookCellExecutionState(this.onDidChangeNotebookCellExecutionState,this,this.disposables)}getActiveInteractiveWindowDocument(){const e=this.interactiveWindowProvider.getActiveOrAssociatedInteractiveWindow();if(e)return this.notebooks.notebookDocuments.find((t=>t===e?.notebookDocument))}onDidChangeNotebookCellExecutionState(e){Za(e.cell.notebook)&&e.state===Oe.NotebookCellExecutionState.Idle&&this.handleExecute({notebook:e.cell.notebook,state:cT.executed,cell:e.cell})}handleExecute(e){this.isNonSilentExecution(e)&&(void 0!==e.cell?.executionSummary?.executionOrder&&this._executionCountTracker.set(e.notebook,e.cell.executionSummary?.executionOrder),this.isActiveNotebookEvent(e)&&void 0!==e.cell?.executionSummary?.executionOrder)&&this.activeKernel&&0===this.kernelProvider.getKernelExecution(this.activeKernel).pendingCells.length&&this._onDidFinisheExecutingActiveNotebook.fire({executionCount:e.cell.executionSummary?.executionOrder})}handleRestart(e){this._executionCountTracker.delete(e.notebook),this.isActiveNotebookEvent(e)&&this._onDidRestartActiveNotebook.fire()}notebookEditorClosed(e){this._executionCountTracker.delete(e)}activeEditorChanged(e){const t={};if(e&&Za(e.notebook)){const n=this._executionCountTracker.get(e.notebook);n&&(t.executionCount=n)}this._onDidChangeActiveNotebook.fire(t)}isNonSilentExecution(e){return!(e.state!==cT.executed||!e.cell||!e.cell.executionSummary?.executionOrder)}isActiveNotebookEvent(e){return this.activeKernel?.notebook===e.notebook}};dT=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),lT(0,zn(PS)),lT(1,zn(na)),lT(2,zn(Ls)),lT(3,zn(Ri)),lT(4,zn(oi))],dT),Is.ForceVariableRefresh,Is.SettingsUpdated,Is.Activate,Is.ShowDataViewer,Is.GetVariablesRequest,Is.GetVariablesResponse,Is.VariableExplorerToggle,Is.SetVariableExplorerHeight,Is.VariableExplorerHeightResponse,Is.OpenLink,Is.VariablesComplete,Os.UpdateSettings,Os.LocInit,Is.FinishCell,Is.UpdateVariableViewExecutionCount,Is.GetHTMLByIdRequest,Is.GetHTMLByIdResponse,Is.RestartKernel;const uT=Symbol("INotebookWatcher"),pT=Symbol("IVariableViewProvider");var hT=function(e,t){return function(n,i){t(n,i,e)}};let fT=class{constructor(e,t){this.extensionContext=e,this.variableViewProvider=t}activate(){this.extensionContext.subscriptions.push(Oe.window.registerWebviewViewProvider(this.variableViewProvider.viewType,this.variableViewProvider,{webviewOptions:{retainContextWhenHidden:!1}}))}};fT=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),hT(0,zn(Ui)),hT(1,zn(pT))],fT);class mT{constructor(e,t){this.disposedCallback=t,this.callback=e}async dispose(){this.disposedCallback()}onMessage(e,t){this.callback(e,t)}}class gT extends fx{get isDisposed(){return this.disposed}get webviewView(){return this.webview&&this.webview}constructor(e,t,n,i,r,o){super(e,t,r,o),this.configService=e,this.workspaceService=t,this.provider=i,this.messageListener=n(this.onMessage.bind(this),this.dispose.bind(this))}async provideWebview(e,t,n,i){if(!i)throw new Error("WebviewViews must be passed an initial VS Code Webview");return this.provider.create({additionalPaths:n?[n]:[],rootPath:this.rootPath,cwd:e,listener:this.messageListener,scripts:this.scripts,settings:t,webviewHost:i})}}var vT=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class yT extends gT{get owningResource(){}constructor(e,t,n,i,r,o,s,a,c,l,d,u){const p=tn(i.extensionUri,"out","webviews","webview-side","viewers");super(e,t,((e,t)=>new mT(e,t)),n,p,[tn(p,"variableView.js")]),this.variables=r,this.disposables=o,this.appShell=s,this.notebookWatcher=a,this.commandManager=c,this.documentManager=l,this.extensions=d,this.experiments=u,this.notebookWatcher.onDidFinishExecutingActiveNotebook(this.activeNotebookExecuted,this,this.disposables),this.notebookWatcher.onDidChangeActiveNotebook(this.activeNotebookChanged,this,this.disposables),this.notebookWatcher.onDidRestartActiveNotebook(this.activeNotebookRestarted,this,this.disposables),this.variables.refreshRequired(this.sendRefreshMessage,this,this.disposables),this.documentManager.onDidChangeActiveTextEditor(this.activeTextEditorChanged,this,this.disposables)}async load(e){await super.loadWebview(Oe.Uri.file(process.cwd()),e).catch(Sn),this.webviewView&&this.disposables.push(this.webviewView.onDidChangeVisibility((()=>{this.handleVisibilityChanged()}))),this.handleVisibilityChanged()}get title(){return"variableView"}onMessage(e,t){switch(e){case Is.GetVariablesRequest:this.handleMessage(e,t,this.requestVariables);break;case Is.ShowDataViewer:this.handleMessage(e,t,this.showDataViewer)}super.onMessage(e,t)}handleMessage(e,t,n){const i=t;n.bind(this)(i)}handleVisibilityChanged(){const e=new n_("jupyter.variableViewVisible",this.commandManager);let t=!1;this.webviewView&&(t=this.webviewView.visible),e.set(t).catch(ae),t&&(io(F.NativeVariableViewMadeVisible),void 0!==this.notebookWatcher.activeNotebookExecutionCount?this.postMessage(Is.UpdateVariableViewExecutionCount,{executionCount:this.notebookWatcher.activeNotebookExecutionCount}).catch(ae):this.postMessage(Is.ForceVariableRefresh).catch(ae))}async showDataViewer(e){try{if(!this.experiments.inExperiment(Hi.DataViewerContribution))return this.commandManager.executeCommand(N.ShowDataViewer,{container:{},variable:e.variable});{const t=this.extensions.all.filter((e=>e.packageJSON?.contributes?.jupyterVariableViewers&&e.packageJSON?.contributes?.jupyterVariableViewers.length)).filter((e=>e.id!==p)).map((e=>{const t=e.packageJSON?.contributes;return t?.jupyterVariableViewers?t.jupyterVariableViewers.map((t=>({extension:e,jupyterVariableViewers:t}))):[]})).flat();if(0===t.length)return void await this.commandManager.executeCommand("workbench.extensions.search","@tag:jupyterVariableViewers");if(1===t.length){const n=t[0].jupyterVariableViewers.command;return this.commandManager.executeCommand(n,{container:{},variable:e.variable})}{const n=this.appShell.createQuickPick();n.title="Select DataFrame Viewer",n.items=t.map((e=>({label:e.jupyterVariableViewers.title,detail:e.extension.packageJSON?.displayName??e.extension.id,command:e.jupyterVariableViewers.command}))),n.onDidAccept((()=>{const t=n.selectedItems[0];t&&(n.hide(),this.commandManager.executeCommand(t.command,{container:{},variable:e.variable}).then(ae,ae))})),n.show()}}}catch(e){Sn(e),io(F.FailedShowDataViewer),this.appShell.showErrorMessage(gr.showDataViewerFail).then(ae,ae)}}async requestVariables(e){const t=this.notebookWatcher.activeKernel;if(t){const n=await this.variables.getVariables(e,t);this.postMessage(Is.GetVariablesResponse,n).catch(ae),io(F.VariableExplorerVariableCount,{variableCount:n.totalCount})}else{const t={executionCount:e.executionCount,pageStartIndex:-1,pageResponse:[],totalCount:0,refreshCount:e.refreshCount};this.postMessage(Is.GetVariablesResponse,t).catch(ae)}}async activeNotebookExecuted(e){this.postMessage(Is.UpdateVariableViewExecutionCount,{executionCount:e.executionCount}).catch(ae)}async activeNotebookChanged(e){e.executionCount?this.postMessage(Is.UpdateVariableViewExecutionCount,{executionCount:e.executionCount}).catch(ae):this.postMessage(Is.UpdateVariableViewExecutionCount,{executionCount:0}).catch(ae),this.postMessage(Is.ForceVariableRefresh).catch(ae)}activeTextEditorChanged(){this.postMessage(Is.ForceVariableRefresh).catch(ae)}async activeNotebookRestarted(){this.postMessage(Is.RestartKernel).catch(ae)}async sendRefreshMessage(){this.postMessage(Is.ForceVariableRefresh).catch(ae)}}vT([oo(F.NativeVariableViewLoaded)],yT.prototype,"load",null),vT([ye()],yT.prototype,"showDataViewer",null),vT([ye()],yT.prototype,"requestVariables",null);var bT=function(e,t){return function(n,i){t(n,i,e)}};let wT=class{get activeVariableView(){if(!w())throw new Error("activeVariableView only for test code");return this.variableView?Promise.resolve(this.variableView):(this.activeVariableViewPromise=ie(),this.activeVariableViewPromise.promise)}constructor(e,t,n,i,r,o,s,a,c,l,d,u){this.configuration=e,this.workspaceService=t,this.webviewViewProvider=n,this.context=i,this.variables=r,this.disposables=o,this.appShell=s,this.notebookWatcher=a,this.commandManager=c,this.documentManager=l,this.extensions=d,this.experiments=u,this.viewType="jupyterViewVariables"}async resolveWebviewView(e,t,n){e.webview.options={enableScripts:!0},this.variableView=new yT(this.configuration,this.workspaceService,this.webviewViewProvider,this.context,this.variables,this.disposables,this.appShell,this.notebookWatcher,this.commandManager,this.documentManager,this.extensions,this.experiments),this.activeVariableViewPromise&&this.activeVariableViewPromise.resolve(this.variableView),await this.variableView.load(e)}};function _T(...e){1===e.length?En(Ee(e[0]).map(((e,t)=>0===t?e:`    ${e}`)).join("\n")):En(...e)}wT=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}([Kn(),bT(0,zn(ji)),bT(1,zn(Qn)),bT(2,zn(ni)),bT(3,zn(Ui)),bT(4,zn(Oy)),bT(4,Nc(C.ALL_VARIABLES)),bT(5,zn(Ri)),bT(6,zn(Jn)),bT(7,zn(uT)),bT(8,zn(Gn)),bT(9,zn(Yn)),bT(10,zn(qi)),bT(11,zn(zi))],wT);var ST=__webpack_require__(51389),CT=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let kT=class{getContainer(){return this.container}constructor(e){this.container=e}add(e,t,n,i){n?this.container.bind(e).to(t).whenTargetNamed(n):this.container.bind(e).to(t),i&&i.forEach((t=>{this.addBinding(e,t)}))}addFactory(e,t){this.container.bind(e).toFactory(t)}addBinding(e,t){this.container.bind(t).toService(e)}addSingleton(e,t,n,i){n?this.container.bind(e).to(t).inSingletonScope().whenTargetNamed(n):this.container.bind(e).to(t).inSingletonScope(),i&&i.forEach((t=>{this.addBinding(e,t)}))}addSingletonInstance(e,t,n){n?this.container.bind(e).toConstantValue(t).whenTargetNamed(n):this.container.bind(e).toConstantValue(t)}get(e,t){return t?this.container.getNamed(e,t):this.container.get(e)}tryGet(e,t){try{return t?this.container.getNamed(e,t):this.container.get(e)}catch{}}getAll(e,t){return t?this.container.getAllNamed(e,t):this.container.getAll(e)}rebind(e,t,n){n?this.container.rebind(e).to(t).whenTargetNamed(n):this.container.rebind(e).to(t)}rebindSingleton(e,t,n){n?this.container.rebind(e).to(t).inSingletonScope().whenTargetNamed(n):this.container.rebind(e).to(t).inSingletonScope()}rebindInstance(e,t,n){n?this.container.rebind(e).toConstantValue(t).whenTargetNamed(n):this.container.rebind(e).toConstantValue(t)}dispose(){this.container.unbindAll(),this.container.unload()}};CT([we()],kT.prototype,"getContainer",null),kT=CT([Kn()],kT);const ET=__webpack_require__(18972);class xT{constructor(e,t,n){this.channel=e,this.homeReplaceRegEx=t,this.userNameReplaceRegEx=n}format(e,t,...n){let i=e?`${ke()} [${e}] ${ET(t,...n)}`:ET(t,...n);return this.homeReplaceRegEx&&(i=i.replace(this.homeReplaceRegEx,"~")),this.userNameReplaceRegEx&&(i=i.replace(this.userNameReplaceRegEx,"<username>")),i}traceLog(e,...t){this.channel.appendLine(this.format("",e,...t))}traceError(e,...t){this.channel.appendLine(this.format("error",e,...t))}traceWarn(e,...t){this.channel.appendLine(this.format("warn",e,...t))}traceInfo(e,...t){this.channel.appendLine(this.format("info",e,...t))}traceVerbose(e,...t){this.channel.appendLine(this.format("debug",e,...t))}}const TT=__webpack_require__(18972);function PT(e,t,...n){const i=0===[...n].length?TT(t):TT(t,...n);return e?`${e} ${ke()}: ${i}`:i}class IT{constructor(e){this.prefix=e}traceLog(e,...t){console.log(TT(`${this.prefix||""} ${e}`,...t))}traceError(e,...t){console.error(PT("error",`${this.prefix||""} ${e}`,...t))}traceWarn(e,...t){console.warn(PT("warn",`${this.prefix||""} ${e}`,...t))}traceInfo(e,...t){console.info(PT("info",`${this.prefix||""} ${e}`,...t))}traceVerbose(e,...t){console.log(PT("verbose",`${this.prefix||""} ${e}`,...t))}}const DT={totalActivateTime:0,codeLoadingTime:0,startActivateTime:0,endActivateTime:0,workspaceFolderCount:0},RT=new se;let OT;async function AT(t){t.subscriptions.push({dispose:()=>e.isExiting=!0});try{let e,n,i;return[e,n,i]=await async function(e,t,n){const i=ie();try{!function(e){const t={location:Oe.ProgressLocation.Window,title:lr.loadingExtension};Oe.window.withProgress(t,(()=>e)).then(ae,ae)}(i.promise),n.startActivateTime=t.elapsedTime;const[r,o]=function(e){const t=new ST.Container({skipBaseClassChecks:!0}),n=new kT(t),i=new Wp(t);return n.addSingletonInstance(ya,i),n.addSingletonInstance(va,n),n.addSingletonInstance(Ri,e.subscriptions),n.addSingletonInstance(Oi,e.globalState,Ai),n.addSingletonInstance(Oi,e.workspaceState,Ni),n.addSingletonInstance(Ui,e),[n,i]}(e);OT=o,Ph=e=>o.get(du).getPackageVersions(e);const s=async function(e,t,n){return async function(e,t,n){const i=!w()&&(e.extensionMode===Oe.ExtensionMode.Development||Oe.workspace.getConfiguration("jupyter").get("development",!1));var r;t.addSingletonInstance(Ti,i),t.addSingletonInstance(Pi,!1),i&&Oe.commands.executeCommand("setContext","jupyter.development",!0).then(ae,ae),Oe.commands.executeCommand("setContext","jupyter.webExtension",!1).then(ae,ae),r=(0,hc.homedir)(),fn=r.toLowerCase(),function(){if(process.env.VSC_JUPYTER_FORCE_LOGGING){let e;y||(e="Jupyter Extension:"),vn(new IT(e))}}(),function(e,t){const n=Oe.window.createOutputChannel(ur.jupyter,"log");vn(new xT(n,function(){try{const e=MT(gc().fsPath);return new RegExp(e,"ig")}catch(e){console.info(`jupyter extension failed to get home directory path with ${e}\n home Path will not be obfuscated in local logs`)}}(),function(){try{const e=MT((0,hc.userInfo)().username);return new RegExp(e,"ig")}catch(e){console.info(`jupyter extension failed to get username info with ${e}\n username will not be obfuscated in local logs`)}}())),t.addSingletonInstance(Ii,n,m),t.addSingletonInstance(Ii,function(e){const t=Oe.window.createOutputChannel(gr.jupyterServerConsoleOutputChannel,"log");e.push(t);const n={get(e,n){const i=e[n];if("function"==typeof i){if("append"===n)return(...e)=>{t.append(...e),_T(...e)};if("appendLine"===n)return(...e)=>{t.appendLine(...e),_T(...e)}}return i}};return new Proxy(t,n)}(e.subscriptions),E),t.addSingletonInstance(xi,Oe.env.uiKind==Oe.UIKind.Web),n.appendLine(`${Oe.env.appName} (${Oe.version}, ${Oe.env.remoteName}, ${Oe.env.appHost})`),n.appendLine(`Jupyter Extension Version: ${e.extension.packageJSON.version}.`);const i=Oe.extensions.getExtension(T);i?n.appendLine(`Python Extension Version: ${i.packageJSON.version}.`):n.appendLine("Python Extension not installed."),n.appendLine(`Platform: ${(0,hc.platform)()} (${(0,hc.arch)()}).`),Oe.workspace.workspaceFolders&&0!==Oe.workspace.workspaceFolders.length?1===Oe.workspace.workspaceFolders.length?n.appendLine(`Workspace folder ${pn(Oe.workspace.workspaceFolders[0].uri)}, Home = ${ml.fsPath}`):n.appendLine(`Multiple Workspace folders opened ${Oe.workspace.workspaceFolders.map((e=>pn(e.uri))).join(", ")}`):n.appendLine("No workspace folder opened.")}(e,t),function(e){e.addSingleton(fp,fp),e.addBinding(fp,Nu),e.addBinding(fp,La),e.addSingleton(Gn,ep),e.addSingleton(Qn,vp),e.addSingleton(Jn,Xu),e.addSingleton(ji,ap),function(e){e.addSingleton(Oo,Yo),e.addSingleton(Ao,Qo),e.addSingleton(ka,Xo),e.addSingleton(_a,pc),e.addSingleton(Ja,za)}(e),Jl(e),function(e){e.addSingleton(Zl,Xl)}(e),function(e){e.addSingleton(qd,Iu),e.addSingleton(id,id),e.addSingleton($a,$a),e.addSingleton(du,au),e.addSingleton(_a,Bu),e.addSingleton(uu,zu),e.addSingleton(_a,Sd),e.addSingleton(_a,kd),e.addSingleton(_a,bd),e.addSingleton(_d,_d),e.addSingleton(lu,ju),e.addSingleton(Gi,Vu),e.addSingleton(Yi,dd),e.addSingleton(Rd,$d),e.addSingleton(Rd,Qd),e.addSingleton(Rd,Yd),e.addSingleton(Rd,tu),e.addSingleton(Od,jd),e.addSingleton(Ad,bu),e.addSingleton(Ld,gu),e.addSingleton(Nd,yu,Dd.DataScience),e.addSingleton(_u,_u),e.addBinding(_u,_a)}(e),e.addSingletonInstance(q,Date.now()),e.addSingleton(Qu,Qu),e.addSingleton(_a,Na),e.addSingleton(Ji,bp),e.add(ni,Cp),e.add(ti,xp)}(t),function(e,t){e.addSingleton(_a,ih),e.addSingleton(_a,gh),e.addSingleton(_a,_v),e.addSingleton(Zp,Ry),e.addSingleton(dh,dh),e.addSingleton(eh,Ey),e.addSingleton(th,Dy),e.addSingleton(Xp,oy),e.addSingleton(Rf,Rf),e.addSingleton(la,Fg),e.addSingleton(_a,Uv),e.addSingleton(_a,ph),e.addSingleton(vf,vf),e.addSingleton(Iv,Hv),e.addSingleton(Pv,Pv),e.addBinding(Pv,_a),e.addSingleton(Lv,Lv),e.addSingleton(_a,wv),e.addSingleton(_a,Jy),e.addSingleton(Oy,Ly,C.ALL_VARIABLES),e.addSingleton(Oy,Hy,C.KERNEL_VARIABLES),e.addSingleton(Ay,Zy,C.PYTHON_VARIABLES_REQUESTER),e.addSingleton(ca,jg),e.addSingleton(_a,Ng),e.addSingleton(_a,mv),e.addSingleton(_a,Ig),e.addSingleton(_a,Rg),e.addSingleton(_a,yv),e.addSingleton(_a,ah),e.addSingleton(na,pv),e.addSingleton(ia,hv),e.addSingleton(_a,rb),e.addSingleton(nb,nb),e.addBinding(nb,_a),function(e,t){e.add(Tp,Qh),e.addSingleton(_a,Zh),e.addSingleton(_a,qp),e.addSingleton(ci,$f),e.addSingleton(li,Om),e.addSingleton(Uf,Uf),e.addSingleton(Op,Op),e.addSingleton(hi,Cf),e.addSingleton(fi,_f),e.addSingleton(Gp,Gp),e.addSingleton(Qp,Qp),e.addSingleton(Up,Up),e.addSingleton(Ps,Ps),e.addSingleton(bi,Mf),e.addSingleton(mi,Yf),e.addSingleton(pi,bf),e.addSingleton(Pp,bf),e.addSingleton(gi,Lh),e.addBinding(gi,_a),e.addSingleton(vi,om),e.addSingleton(Si,nm),e.addSingleton(oa,zf),e.addSingleton(sa,eg),e.addSingleton(Xm,Xm),e.addSingleton(Gm,Gm),e.addSingleton(yi,hm),e.addSingleton(_i,ym),e.addSingleton(wi,Nm),e.addSingleton(xs,xs),e.addSingleton(Ci,dm),e.addBinding(Ci,_a),e.addSingleton(ki,jf),e.addSingleton(_a,Tf),e.addSingleton(bo,zh),e.addSingleton(og,Vm),e.addBinding(og,_a),e.addSingleton(Ei,rg)}(e),Zr("isInsiderExtension",function(){try{return"false"}catch{return"true"}}()),Zr("isPythonExtensionInstalled",e.get(Ao).isPythonExtensionInstalled?"true":"false"),Zr("rawKernelSupported",e.get(Zp).isSupported?"true":"false"),e.addSingleton(_a,oh),e.addSingleton(ua,gv),e.addSingleton(Wv,Wv)}(t),function(e,t){(function(e,t){e.addSingleton(Ks,rw),e.addBinding(Ks,_a),e.addSingleton(Hs,Kb),e.addSingleton(Ws,qw),e.addSingleton($s,Rw),e.addSingleton(Bs,Lw),e.addBinding(Bs,_a),e.addSingleton(_a,Sw),function(e,t){e.addSingleton(fb,fb),e.addSingleton(bb,cw),e.addSingleton(_b,vw),e.addSingleton(wb,lw),e.addSingleton(Pb,Pb),e.addSingleton(_a,ww)}(e)})(e),e.addSingleton(_a,lb),e.addSingleton(Ji,fS),e.addSingleton(Jb,mS),e.addBinding(zb,_a),e.addSingleton(_a,jb),e.addSingleton(da,bS),e.addSingleton(Kw,k_,C.RUN_BY_LINE_DEBUGSERVICE),e.addSingleton(Ob,Ob),e.addBinding(Ob,_a),e.addSingleton(_a,Nb),e.addSingleton(_a,_S),e.addSingleton(_a,sb),e.addSingleton(Hb,Hb),e.addBinding(Hb,_a),e.addSingleton(_a,pS),e.addSingleton(Vw,y_,void 0,[_a]),e.addSingleton(_a,Gw),e.addSingleton(Oy,t_,C.DEBUGGER_VARIABLES),e.addSingleton(Kw,x_,C.MULTIPLEXING_DEBUGSERVICE),e.addSingleton(Bw,w_,void 0,[$w]),e.addSingleton(_a,zw),e.addSingleton(_a,vS),e.addSingleton(_a,aS),e.addSingleton(P_,oS),e.addSingleton(F_,F_),e.addSingleton(J_,J_),e.addSingleton(D_,K_),e.addSingleton(I_,Y_,T_.pdf),e.addSingleton(I_,G_,T_.html),e.addSingleton(I_,Q_,T_.python),e.addSingleton(I_,K_,"Export Base"),e.addSingleton(R_,Z_,T_.python),e.addSingleton(N_,N_),e.addSingleton(L_,L_),e.addSingleton(O_,H_)}(t),function(e){e.addSingleton(PS,RC),e.addSingleton(IS,ck),e.addSingleton(_a,HS),e.addSingleton(_a,CC),e.add(CS,vC),e.addSingleton(kS,uC),e.addSingleton(SS,hC),e.addSingleton(_a,ok),e.addSingleton(_a,ik),e.addSingleton(_a,bC),e.addSingleton(_a,AC),e.addSingleton(_a,dk),e.addSingleton(_a,tk),e.addSingleton(xS,GS,void 0,[_a]),e.addSingleton(ES,_C),e.addSingleton(da,jC),e.addSingleton(TS,KC),e.addSingleton(DS,zC,void 0,[_a]),e.addSingleton(Vi,ZC,YC)}(t),ax(e,t,i),function(e){e.addSingleton(_a,aT),e.add(js,bx),e.addSingleton(Ls,Ax),e.addSingleton(qs,Px),e.addSingleton(_a,Sx),e.add(Wx,zx),e.addSingleton(Vx,Yx),e.addSingleton(oT,nT),e.addSingleton(iT,iT),e.addSingleton(uT,dT),e.addSingleton(_a,fT),e.addSingleton(_a,Ux),e.addSingleton(pT,wT),e.add(Fs,Lx),e.addSingleton(Us,jx)}(t);const o=n.get(zi);await o.activate();const s=t.get(ei),a=t.get(ji).getSettings();wn(a.logging.level),a.onDidChange((()=>{wn(a.logging.level)}));n.get(Gn).executeCommand("setContext","jupyter.vscode.channel",s.channel).then(ae,ae),n.get(wa).activate();const c=n.get(Wi);c.initialize(),e.subscriptions.push(c)}(e,t,n)}(e,r,o);return n.endActivateTime=t.elapsedTime,i.resolve(),[ga(s,r,o,e),s,o]}finally{i.completed||i.reject()}}(t,RT,DT),async function(e,t,n,i){if(!w())try{await e,t.totalActivateTime=n.elapsedTime,await ba(i,t),io(_r.EXTENSION_LOAD,t)}catch(e){Sn("sendStartupTelemetry() failed.",e)}}(n,DT,RT,i).catch(ae),await n,e}catch(e){return await async function(e,t){(function(e){try{Oe.window.showErrorMessage(e).then(ae,ae)}catch(e){Sn("failed to notify user",e)}})(lr.handleExtensionActivationError),console.error("extension activation failed",e),Sn("extension activation failed",e),await async function(e,t,n){try{let i={};if(n)try{await ba(n,t)}catch(e){Sn("getActivationTelemetryProps() failed.",e)}io(_r.EXTENSION_LOAD,t,i,e)}catch(e){Sn("sendErrorTelemetry() failed.",e)}}(e,t,OT)}(e,DT),Sn("Failed to active the Jupyter Extension",e),{ready:Promise.resolve(),registerPythonApi:ae,registerRemoteServerProvider:()=>({dispose:ae}),showDataViewer:()=>Promise.resolve(),getKernelService:()=>Promise.resolve(void 0),getSuggestedController:()=>Promise.resolve(void 0),addRemoteJupyterServer:()=>Promise.resolve(void 0),openNotebook:()=>Promise.reject(),createJupyterServerCollection:()=>{throw new Error("Not Implemented")}}}}function NT(){if(e.isExiting=!0,OT){const e=OT.get(Bi);if(e)return e.dispose()}return Promise.resolve()}function MT(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}DT.codeLoadingTime=RT.elapsedTime})(),module.exports=__webpack_exports__})();
//# sourceMappingURL=extension.node.js.map